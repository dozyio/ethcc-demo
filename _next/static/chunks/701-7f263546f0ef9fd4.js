(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{28:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5364),i=r(4570),s=r(6269);function a(e,t,r,a){var o,l,c,u,d;let h;let{c:f,dkLen:p,DK:g,PRF:m,PRFSalt:b}=function(e,t,r,a){(0,n.tW)(e);let{c:o,dkLen:l,asyncTick:c}=(0,s.tY)({dkLen:32,asyncTick:10},a);if((0,n.ai)(o),(0,n.ai)(l),(0,n.ai)(c),o<1)throw Error("PBKDF2: iterations (c) should be >= 1");let u=(0,s.ZJ)(t),d=(0,s.ZJ)(r),h=new Uint8Array(l),f=i.w.create(e,u),p=f._cloneInto().update(d);return{c:o,dkLen:l,asyncTick:c,DK:h,PRF:f,PRFSalt:p}}(e,t,r,a),y=new Uint8Array(4),x=(0,s.O8)(y),w=new Uint8Array(m.outputLen);for(let e=1,t=0;t<p;e++,t+=m.outputLen){let r=g.subarray(t,t+m.outputLen);x.setInt32(0,e,!1),(h=b._cloneInto(h)).update(y).digestInto(w),r.set(w.subarray(0,r.length));for(let e=1;e<f;e++){m._cloneInto(h).update(w).digestInto(w);for(let e=0;e<r.length;e++)r[e]^=w[e]}}return o=m,l=b,c=g,u=h,d=w,o.destroy(),l.destroy(),u&&u.destroy(),d.fill(0),c}},143:function(e,t){(function(){var e,r,n,i,s,a,o,l;l=function(e){return[(-0x1000000&e)>>>24,(0xff0000&e)>>>16,(65280&e)>>>8,255&e].join(".")},o=function(e){var t,n,i,s,a,o;for(t=[],i=s=0;s<=3&&0!==e.length;i=++s){if(i>0){if("."!==e[0])throw Error("Invalid IP");e=e.substring(1)}a=(o=r(e))[0],n=o[1],e=e.substring(n),t.push(a)}if(0!==e.length)throw Error("Invalid IP");switch(t.length){case 1:if(t[0]>0xffffffff)throw Error("Invalid IP");return t[0]>>>0;case 2:if(t[0]>255||t[1]>0xffffff)throw Error("Invalid IP");return(t[0]<<24|t[1])>>>0;case 3:if(t[0]>255||t[1]>255||t[2]>65535)throw Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2])>>>0;case 4:if(t[0]>255||t[1]>255||t[2]>255||t[3]>255)throw Error("Invalid IP");return(t[0]<<24|t[1]<<16|t[2]<<8|t[3])>>>0;default:throw Error("Invalid IP")}},i=(n=function(e){return e.charCodeAt(0)})("0"),a=n("a"),s=n("A"),r=function(e){var t,r,o,l,c;for(l=0,t=10,r="9",o=0,e.length>1&&"0"===e[o]&&("x"===e[o+1]||"X"===e[o+1]?(o+=2,t=16):"0"<=e[o+1]&&e[o+1]<="9"&&(o++,t=8,r="7")),c=o;o<e.length;){if("0"<=e[o]&&e[o]<=r)l=l*t+(n(e[o])-i)>>>0;else if(16===t){if("a"<=e[o]&&e[o]<="f")l=l*t+(10+n(e[o])-a)>>>0;else if("A"<=e[o]&&e[o]<="F")l=l*t+(10+n(e[o])-s)>>>0;else break}else break;if(l>0xffffffff)throw Error("too large");o++}if(o===c)throw Error("empty octet");return[l,o]},e=function(){function e(e,t){var r,n,i;if("string"!=typeof e)throw Error("Missing `net' parameter");if(t||(e=(i=e.split("/",2))[0],t=i[1]),t||(t=32),"string"==typeof t&&t.indexOf(".")>-1){try{this.maskLong=o(t)}catch(e){throw Error("Invalid mask: "+t)}for(r=n=32;n>=0;r=--n)if(this.maskLong===0xffffffff<<32-r>>>0){this.bitmask=r;break}}else if(t||0===t)this.bitmask=parseInt(t,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=0xffffffff<<32-this.bitmask>>>0);else throw Error("Invalid mask: empty");try{this.netLong=(o(e)&this.maskLong)>>>0}catch(t){throw Error("Invalid net address: "+e)}if(!(this.bitmask<=32))throw Error("Invalid mask for ip4: "+t);this.size=Math.pow(2,32-this.bitmask),this.base=l(this.netLong),this.mask=l(this.maskLong),this.hostmask=l(~this.maskLong),this.first=this.bitmask<=30?l(this.netLong+1):this.base,this.last=this.bitmask<=30?l(this.netLong+this.size-2):l(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?l(this.netLong+this.size-1):void 0}return e.prototype.contains=function(t){return("string"==typeof t&&(t.indexOf("/")>0||4!==t.split(".").length)&&(t=new e(t)),t instanceof e)?this.contains(t.base)&&this.contains(t.broadcast||t.last):(o(t)&this.maskLong)>>>0==(this.netLong&this.maskLong)>>>0},e.prototype.next=function(t){return null==t&&(t=1),new e(l(this.netLong+this.size*t),this.mask)},e.prototype.forEach=function(e){var t,r,n;for(n=o(this.first),r=o(this.last),t=0;n<=r;)e(l(n),n,t),t++,n++},e.prototype.toString=function(){return this.base+"/"+this.bitmask},e}(),t.ip2long=o,t.long2ip=l,t.Netmask=e}).call(this)},238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},242:(e,t,r)=>{"use strict";r.d(t,{R:()=>a});var n=r(8121);function i(e){let t=[];for(;e;)t.unshift(255&e),e>>=8;return t}let s="0123456789abcdef";function a(e){let t="0x";for(let r of function e(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(t){r=r.concat(e(t))}),r.length<=55)return r.unshift(192+r.length),r;let n=i(r.length);return n.unshift(247+n.length),n.concat(r)}let r=Array.prototype.slice.call((0,n.q5)(t,"object"));if(1===r.length&&r[0]<=127)return r;if(r.length<=55)return r.unshift(128+r.length),r;let s=i(r.length);return s.unshift(183+s.length),s.concat(r)}(e))t+=s[r>>4],t+=s[15&r];return t}},272:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toBig=t.shrSL=t.shrSH=t.rotrSL=t.rotrSH=t.rotrBL=t.rotrBH=t.rotr32L=t.rotr32H=t.rotlSL=t.rotlSH=t.rotlBL=t.rotlBH=t.add5L=t.add5H=t.add4L=t.add4H=t.add3L=t.add3H=void 0,t.add=x,t.fromBig=i,t.split=s;let r=BigInt(0x100000000-1),n=BigInt(32);function i(e,t=!1){return t?{h:Number(e&r),l:Number(e>>n&r)}:{h:0|Number(e>>n&r),l:0|Number(e&r)}}function s(e,t=!1){let r=e.length,n=new Uint32Array(r),a=new Uint32Array(r);for(let s=0;s<r;s++){let{h:r,l:o}=i(e[s],t);[n[s],a[s]]=[r,o]}return[n,a]}let a=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);t.toBig=a;let o=(e,t,r)=>e>>>r;t.shrSH=o;let l=(e,t,r)=>e<<32-r|t>>>r;t.shrSL=l;let c=(e,t,r)=>e>>>r|t<<32-r;t.rotrSH=c;let u=(e,t,r)=>e<<32-r|t>>>r;t.rotrSL=u;let d=(e,t,r)=>e<<64-r|t>>>r-32;t.rotrBH=d;let h=(e,t,r)=>e>>>r-32|t<<64-r;t.rotrBL=h;let f=(e,t)=>t;t.rotr32H=f;let p=(e,t)=>e;t.rotr32L=p;let g=(e,t,r)=>e<<r|t>>>32-r;t.rotlSH=g;let m=(e,t,r)=>t<<r|e>>>32-r;t.rotlSL=m;let b=(e,t,r)=>t<<r-32|e>>>64-r;t.rotlBH=b;let y=(e,t,r)=>e<<r-32|t>>>64-r;function x(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/0x100000000|0)|0,l:0|i}}t.rotlBL=y;let w=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);t.add3L=w;let v=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0;t.add3H=v;let A=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);t.add4L=A;let E=(e,t,r,n,i)=>t+r+n+i+(e/0x100000000|0)|0;t.add4H=E;let k=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);t.add5L=k;let P=(e,t,r,n,i,s)=>t+r+n+i+s+(e/0x100000000|0)|0;t.add5H=P,t.default={fromBig:i,split:s,toBig:a,shrSH:o,shrSL:l,rotrSH:c,rotrSL:u,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:m,rotlBH:b,rotlBL:y,add:x,add3L:w,add3H:v,add4L:A,add4H:E,add5H:P,add5L:k}},332:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{let t=[];for await(let r of e)t.push(r);return t})();let t=[];for(let r of e)t.push(r);return t}},345:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;let n=r(7584),i=r(5636),s=r(7296),a=r(6902),o=r(4075),l=r(2082),c=r(5733),u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(e,t)=>(e+t/f)/t;function g(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),i=BigInt(22),a=BigInt(23),o=BigInt(44),l=BigInt(88),c=e*e*e%u,d=c*c*e%u,h=(0,s.pow2)(d,t,u)*d%u,p=(0,s.pow2)(h,t,u)*d%u,g=(0,s.pow2)(p,f,u)*c%u,b=(0,s.pow2)(g,n,u)*g%u,y=(0,s.pow2)(b,i,u)*b%u,x=(0,s.pow2)(y,o,u)*y%u,w=(0,s.pow2)(x,l,u)*x%u,v=(0,s.pow2)(w,o,u)*y%u,A=(0,s.pow2)(v,t,u)*d%u,E=(0,s.pow2)(A,a,u)*b%u,k=(0,s.pow2)(E,r,u)*c%u,P=(0,s.pow2)(k,f,u);if(!m.eql(m.sqr(P),e))throw Error("Cannot find square root");return P}let m=(0,s.Field)(u,void 0,void 0,{sqrt:g});t.secp256k1=(0,c.createCurve)({a:BigInt(0),b:BigInt(7),Fp:m,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),a=p(t*e,d),o=p(-r*e,d),l=(0,s.mod)(e-a*t-o*n,d),c=(0,s.mod)(-a*r-o*t,d),u=l>i,f=c>i;if(u&&(l=d-l),f&&(c=d-c),l>i||c>i)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:l,k2neg:f,k2:c}}}},n.sha256);let b=BigInt(0),y=e=>"bigint"==typeof e&&b<e&&e<u,x=e=>"bigint"==typeof e&&b<e&&e<d,w={};function v(e,...t){let r=w[e];if(void 0===r){let t=(0,n.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));r=(0,o.concatBytes)(t,t),w[e]=r}return(0,n.sha256)((0,o.concatBytes)(r,...t))}let A=e=>e.toRawBytes(!0).slice(1),E=e=>(0,o.numberToBytesBE)(e,32),k=e=>(0,s.mod)(e,u),P=e=>(0,s.mod)(e,d),S=t.secp256k1.ProjectivePoint,I=(e,t,r)=>S.BASE.multiplyAndAddUnsafe(e,t,r);function T(e){let r=t.secp256k1.utils.normPrivateKeyToScalar(e),n=S.fromPrivateKey(r);return{scalar:n.hasEvenY()?r:P(-r),bytes:A(n)}}function _(e){if(!y(e))throw Error("bad x: need 0 < x < p");let t=k(e*e),r=g(k(t*e+BigInt(7)));r%f!==b&&(r=k(-r));let n=new S(e,r,h);return n.assertValidity(),n}function C(...e){return P((0,o.bytesToNumberBE)(v("BIP0340/challenge",...e)))}function O(e,t,r){let n=(0,o.ensureBytes)("signature",e,64),i=(0,o.ensureBytes)("message",t),s=(0,o.ensureBytes)("publicKey",r,32);try{let e=_((0,o.bytesToNumberBE)(s)),t=(0,o.bytesToNumberBE)(n.subarray(0,32));if(!y(t))return!1;let r=(0,o.bytesToNumberBE)(n.subarray(32,64));if(!x(r))return!1;let a=C(E(t),A(e),i),l=I(e,r,P(-a));if(!l||!l.hasEvenY()||l.toAffine().x!==t)return!1;return!0}catch(e){return!1}}t.schnorr={getPublicKey:function(e){return T(e).bytes},sign:function(e,t,r=(0,i.randomBytes)(32)){let n=(0,o.ensureBytes)("message",e),{bytes:s,scalar:a}=T(t),l=(0,o.ensureBytes)("auxRand",r,32),c=E(a^(0,o.bytesToNumberBE)(v("BIP0340/aux",l))),u=v("BIP0340/nonce",c,s,n),d=P((0,o.bytesToNumberBE)(u));if(d===b)throw Error("sign failed: k is zero");let{bytes:h,scalar:f}=T(d),p=C(h,s,n),g=new Uint8Array(64);if(g.set(h,0),g.set(E(P(f+p*a)),32),!O(g,n,s))throw Error("sign: Invalid signature produced");return g},verify:O,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:_,pointToBytes:A,numberToBytesBE:o.numberToBytesBE,bytesToNumberBE:o.bytesToNumberBE,taggedHash:v,mod:s.mod}};let R=(0,l.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),N=(0,a.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}),M=(0,l.createHasher)(t.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=N(m.create(e[0]));return R(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256});t.hashToCurve=M.hashToCurve,t.encodeToCurve=M.encodeToCurve},458:(e,t,r)=>{"use strict";r.d(t,{q:()=>n});let n=Symbol.for("@libp2p/content-routing")},489:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEther=t.formatEther=t.parseUnits=t.formatUnits=void 0;let n=r(7073),i=r(6953),s=r(7310),a=["wei","kwei","mwei","gwei","szabo","finney","ether"];function o(e,t){let r=18;if("string"==typeof t){let e=a.indexOf(t);(0,n.assertArgument)(e>=0,"invalid unit","unit",t),r=3*e}else null!=t&&(r=(0,s.getNumber)(t,"unit"));return i.FixedNumber.fromValue(e,r,{decimals:r,width:512}).toString()}function l(e,t){(0,n.assertArgument)("string"==typeof e,"value must be a string","value",e);let r=18;if("string"==typeof t){let e=a.indexOf(t);(0,n.assertArgument)(e>=0,"invalid unit","unit",t),r=3*e}else null!=t&&(r=(0,s.getNumber)(t,"unit"));return i.FixedNumber.fromString(e,{decimals:r,width:512}).value}t.formatUnits=o,t.parseUnits=l,t.formatEther=function(e){return o(e,18)},t.parseEther=function(e){return l(e,18)}},497:(e,t,r)=>{"use strict";function n(e,t){let r;let n=function(){clearTimeout(r),r=setTimeout(function(){r=void 0,e()},t)};return n.start=()=>{},n.stop=()=>{clearTimeout(r)},n}r.d(t,{s:()=>n})},518:e=>{e.exports=function(e){if(!e)throw Error("hashlru must have a max value, of type number, greater than 0");var t=0,r=Object.create(null),n=Object.create(null);function i(i,s){r[i]=s,++t>=e&&(t=0,n=r,r=Object.create(null))}return{has:function(e){return void 0!==r[e]||void 0!==n[e]},remove:function(e){void 0!==r[e]&&(r[e]=void 0),void 0!==n[e]&&(n[e]=void 0)},get:function(e){var t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(i(e,t),t):void 0},set:function(e,t){void 0!==r[e]?r[e]=t:i(e,t)},clear:function(){r=Object.create(null),n=Object.create(null)}}}},555:function(e,t,r){"use strict";var n,i,s,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.OFB=void 0;let l=r(5383);class c extends l.ModeOfOperation{constructor(e,t){if(super("OFB",e,c),n.set(this,void 0),i.set(this,void 0),s.set(this,void 0),t){if(t.length%16)throw TypeError("invalid iv size (must be 16 bytes)");a(this,n,new Uint8Array(t),"f")}else a(this,n,new Uint8Array(16),"f");a(this,i,this.iv,"f"),a(this,s,16,"f")}get iv(){return new Uint8Array(o(this,n,"f"))}encrypt(e){var t,r;if(e.length%16)throw TypeError("invalid plaintext size (must be multiple of 16 bytes)");let n=new Uint8Array(e);for(let e=0;e<n.length;e++)16===o(this,s,"f")&&(a(this,i,this.aes.encrypt(o(this,i,"f")),"f"),a(this,s,0,"f")),n[e]^=o(this,i,"f")[a(this,s,(r=o(this,s,"f"),t=r++,r),"f"),t];return n}decrypt(e){if(e.length%16)throw TypeError("invalid ciphertext size (must be multiple of 16 bytes)");return this.encrypt(e)}}t.OFB=c,n=new WeakMap,i=new WeakMap,s=new WeakMap},558:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyAuthorization=t.hashAuthorization=void 0;let n=r(9111),i=r(6870),s=r(2984),a=r(8662);function o(e){return(0,a.assertArgument)("string"==typeof e.address,"invalid address for hashAuthorization","auth.address",e),(0,i.keccak256)((0,a.concat)(["0x05",(0,a.encodeRlp)([null!=e.chainId?(0,a.toBeArray)(e.chainId):"0x",(0,n.getAddress)(e.address),null!=e.nonce?(0,a.toBeArray)(e.nonce):"0x"])]))}t.hashAuthorization=o,t.verifyAuthorization=function(e,t){return(0,s.recoverAddress)(o(e),t)}},560:(e,t,r)=>{"use strict";r.d(t,{p:()=>o});var n=r(4298),i=r(9985),s=r(2830);class a extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"}function o(e,t){let r=(0,n.L)();e.sink(r).catch(async e=>{await r.end(e)}),e.sink=async e=>{for await(let t of e)await r.push(t);await r.end()};let o=e.source;null!=e.source[Symbol.iterator]?o=e.source[Symbol.iterator]():null!=e.source[Symbol.asyncIterator]&&(o=e.source[Symbol.asyncIterator]());let l=new s.I;return{read:async e=>{if(e?.signal?.throwIfAborted(),e?.bytes==null){let{done:t,value:r}=await (0,i.W)(o.next(),e?.signal);return!0===t?null:r}for(;l.byteLength<e.bytes;){let{value:t,done:r}=await (0,i.W)(o.next(),e?.signal);if(!0===r)throw new a("unexpected end of input");l.append(t)}let t=l.sublist(0,e.bytes);return l.consume(e.bytes),t},write:async(e,t)=>{t?.signal?.throwIfAborted(),e instanceof Uint8Array?await r.push(e,t):await r.push(e.subarray(),t)},unwrap:()=>{if(l.byteLength>0){let r=e.source;e.source=async function*(){t?.yieldBytes===!1?yield l:yield*l,yield*r}()}return e}}}},573:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=t.RIPEMD160=void 0;let n=r(1576),i=r(5636),s=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),a=Uint8Array.from({length:16},(e,t)=>t),o=a.map(e=>(9*e+5)%16),l=[a],c=[o];for(let e=0;e<4;e++)for(let t of[l,c])t.push(t[e].map(e=>s[e]));let u=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),d=l.map((e,t)=>e.map(e=>u[t][e])),h=c.map((e,t)=>e.map(e=>u[t][e])),f=new Uint32Array([0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]),p=new Uint32Array([0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0]),g=(e,t)=>e<<t|e>>>32-t;function m(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let b=new Uint32Array(16);class y extends n.SHA2{constructor(){super(64,20,8,!0),this.h0=0x67452301,this.h1=-0x10325477,this.h2=-0x67452302,this.h3=0x10325476,this.h4=-0x3c2d1e10}get(){let{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)b[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,s=i,a=0|this.h2,o=a,u=0|this.h3,y=u,x=0|this.h4,w=x;for(let e=0;e<5;e++){let t=4-e,v=f[e],A=p[e],E=l[e],k=c[e],P=d[e],S=h[e];for(let t=0;t<16;t++){let n=g(r+m(e,i,a,u)+b[E[t]]+v,P[t])+x|0;r=x,x=u,u=0|g(a,10),a=i,i=n}for(let e=0;e<16;e++){let r=g(n+m(t,s,o,y)+b[k[e]]+A,S[e])+w|0;n=w,w=y,y=0|g(o,10),o=s,s=r}}this.set(this.h1+a+y|0,this.h2+u+w|0,this.h3+x+n|0,this.h4+r+s|0,this.h0+i+o|0)}roundClean(){b.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}t.RIPEMD160=y,t.ripemd160=(0,i.wrapConstructor)(()=>new y)},576:(e,t,r)=>{e.exports=function(){let e;let t=r(1331),n=r(2079),i=r(3110),s=[],a=[],o=[],l=[],c=[];this.statsObject="statsObject";let u=function(e,t){return e.lower<t.lower?-1:+(e.lower>t.lower)},d=function(e,t){return e.total<t.total?1:e.total>t.total?-1:u(e,t)},h=function(e,t){return e.index<t.index?-1:+(e.index>t.index)},f=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},p=function(){o.length=0,e=new f,o[t.ALT]=new f,o[t.CAT]=new f,o[t.REP]=new f,o[t.RNM]=new f,o[t.TRG]=new f,o[t.TBS]=new f,o[t.TLS]=new f,o[t.UDT]=new f,o[t.AND]=new f,o[t.NOT]=new f,o[t.BKR]=new f,o[t.BKA]=new f,o[t.BKN]=new f,o[t.ABG]=new f,o[t.AEN]=new f,l.length=0;for(let e=0;e<s.length;e+=1)l.push({empty:0,match:0,nomatch:0,total:0,name:s[e].name,lower:s[e].lower,index:s[e].index});if(a.length>0){c.length=0;for(let e=0;e<a.length;e+=1)c.push({empty:0,match:0,nomatch:0,total:0,name:a[e].name,lower:a[e].lower,index:a[e].index})}},g=function(e,r){switch(e.total+=1,r){case t.EMPTY:e.empty+=1;break;case t.MATCH:e.match+=1;break;case t.NOMATCH:e.nomatch+=1;break;default:throw Error(`stats.js: collect(): incStat(): unrecognized state: ${r}`)}},m=function(e,t){let r="";return r+`<tr><td class="${i.CLASS_ACTIVE}">${e}</td><td class="${i.CLASS_EMPTY}">${t.empty}</td><td class="${i.CLASS_MATCH}">${t.match}</td><td class="${i.CLASS_NOMATCH}">${t.nomatch}</td><td class="${i.CLASS_ACTIVE}">${t.total}</td></tr>
`},b=function(){let r="";return r+=m("ALT",o[t.ALT]),r+=m("CAT",o[t.CAT]),r+=m("REP",o[t.REP]),r+=m("RNM",o[t.RNM]),r+=m("TRG",o[t.TRG]),r+=m("TBS",o[t.TBS]),r+=m("TLS",o[t.TLS]),r+=m("UDT",o[t.UDT]),r+=m("AND",o[t.AND]),r+=m("NOT",o[t.NOT]),r+=m("BKR",o[t.BKR]),r+=m("BKA",o[t.BKA]),r+=m("BKN",o[t.BKN]),r+=m("ABG",o[t.ABG]),r+=m("AEN",o[t.AEN]),r+=m("totals",e)},y=function(){let e="";e+="<tr><th></th><th></th><th></th><th></th><th></th></tr>\n<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>\n";for(let t=0;t<s.length;t+=1)l[t].total>0&&(e+=`<tr><td class="${i.CLASS_ACTIVE}">${l[t].name}</td><td class="${i.CLASS_EMPTY}">${l[t].empty}</td><td class="${i.CLASS_MATCH}">${l[t].match}</td><td class="${i.CLASS_NOMATCH}">${l[t].nomatch}</td><td class="${i.CLASS_ACTIVE}">${l[t].total}</td></tr>
`);if(a.length>0){e+="<tr><th></th><th></th><th></th><th></th><th></th></tr>\n<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>\n";for(let t=0;t<a.length;t+=1)c[t].total>0&&(e+=`<tr><td class="${i.CLASS_ACTIVE}">${c[t].name}</td><td class="${i.CLASS_EMPTY}">${c[t].empty}</td><td class="${i.CLASS_MATCH}">${c[t].match}</td><td class="${i.CLASS_NOMATCH}">${c[t].nomatch}</td><td class="${i.CLASS_ACTIVE}">${c[t].total}</td></tr>
`)}return e};this.validate=function(e){let t=!1;return"string"==typeof e&&"stats"===e&&(t=!0),t},this.init=function(e,t){s=e,a=t,p()},this.collect=function(r,n){g(e,n.state,n.phraseLength),g(o[r.type],n.state,n.phraseLength),r.type===t.RNM&&g(l[r.index],n.state,n.phraseLength),r.type===t.UDT&&g(c[r.index],n.state,n.phraseLength)},this.toHtml=function(e,t){let r="";for(r+=`<table class="${i.CLASS_STATS}">
`,"string"==typeof t&&(r+=`<caption>${t}</caption>
`),r+=`<tr><th class="${i.CLASS_ACTIVE}">ops</th>
`,r+=`<th class="${i.CLASS_EMPTY}">EMPTY</th>
`,r+=`<th class="${i.CLASS_MATCH}">MATCH</th>
`,r+=`<th class="${i.CLASS_NOMATCH}">NOMATCH</th>
`,r+=`<th class="${i.CLASS_ACTIVE}">totals</th></tr>
`;;){if(null==e||"ops"===e){r+=b();break}if("index"===e){l.sort(h),c.length>0&&c.sort(h),r+=b(),r+=y();break}if("hits"===e){l.sort(d),c.length>0&&c.sort(h),r+=b(),r+=y();break}"alpha"===e&&(l.sort(u),c.length>0&&c.sort(u),r+=b(),r+=y());break}return r+"</table>\n"},this.toHtmlPage=function(e,t,r){return n.htmlToPage(this.toHtml(e,t),r)}}},603:(e,t,r)=>{"use strict";r.d(t,{j:()=>i});var n=r(2315);class i{map;constructor(e){if(this.map=new Map,null!=e)for(let[t,r]of e.entries())this.map.set(t.toString(),{key:t,value:r})}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(e){return this.map.delete(e.toString())}entries(){return(0,n.r)(this.map.entries(),e=>[e[1].key,e[1].value])}forEach(e){this.map.forEach((t,r)=>{e(t.value,t.key,this)})}get(e){return this.map.get(e.toString())?.value}has(e){return this.map.has(e.toString())}set(e,t){this.map.set(e.toString(),{key:e,value:t})}keys(){return(0,n.r)(this.map.values(),e=>e.key)}values(){return(0,n.r)(this.map.values(),e=>e.value)}get size(){return this.map.size}}},608:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});class n extends Event{type;detail;constructor(e,t){super(e),this.type=e,this.detail=t}}},617:function(e,t,r){"use strict";var n,i,s,a=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},o=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.CTR=void 0;let l=r(5383);class c extends l.ModeOfOperation{constructor(e,t){super("CTR",e,c),n.set(this,void 0),i.set(this,void 0),s.set(this,void 0),a(this,s,new Uint8Array(16),"f"),o(this,s,"f").fill(0),a(this,n,o(this,s,"f"),"f"),a(this,i,16,"f"),null==t&&(t=1),"number"==typeof t?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(o(this,s,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)o(this,s,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(16!==e.length)throw TypeError("invalid counter initial Uint8Array value length");o(this,s,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(255===o(this,s,"f")[e])o(this,s,"f")[e]=0;else{o(this,s,"f")[e]++;break}}encrypt(e){var t,r;let l=new Uint8Array(e);for(let e=0;e<l.length;e++)16===o(this,i,"f")&&(a(this,n,this.aes.encrypt(o(this,s,"f")),"f"),a(this,i,0,"f"),this.increment()),l[e]^=o(this,n,"f")[a(this,i,(r=o(this,i,"f"),t=r++,r),"f"),t];return l}decrypt(e){return this.encrypt(e)}}t.CTR=c,n=new WeakMap,i=new WeakMap,s=new WeakMap},622:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultProvider=void 0;let n=r(8662),i=r(3300),s=r(9064),a=r(8926),o=r(7690),l=r(2802),c=r(5226),u=r(7912),d=r(3599),h=r(4822),f=r(9307),p=r(3248),g="goerli kovan sepolia classicKotti optimism-goerli arbitrum-goerli matic-mumbai bnbt".split(" ");t.getDefaultProvider=function(e,t){null==t&&(t={});let r=e=>"-"!==t[e]&&("string"==typeof t.exclusive?e===t.exclusive:!Array.isArray(t.exclusive)||-1!==t.exclusive.indexOf(e));if("string"==typeof e&&e.match(/^https?:/))return new h.JsonRpcProvider(e);if("string"==typeof e&&e.match(/^wss?:/)||e&&"function"==typeof e.send&&"function"==typeof e.close)return new p.WebSocketProvider(e);let m=null;try{m=f.Network.from(e)}catch(e){}let b=[];if(r("publicPolygon")&&m&&("matic"===m.name?b.push(new h.JsonRpcProvider("https://polygon-rpc.com/",m,{staticNetwork:m})):"matic-amoy"===m.name&&b.push(new h.JsonRpcProvider("https://rpc-amoy.polygon.technology/",m,{staticNetwork:m}))),r("alchemy"))try{b.push(new s.AlchemyProvider(e,t.alchemy))}catch(e){}if(r("ankr")&&null!=t.ankr)try{b.push(new i.AnkrProvider(e,t.ankr))}catch(e){}if(r("chainstack"))try{b.push(new a.ChainstackProvider(e,t.chainstack))}catch(e){}if(r("cloudflare"))try{b.push(new o.CloudflareProvider(e))}catch(e){}if(r("etherscan"))try{b.push(new l.EtherscanProvider(e,t.etherscan))}catch(e){}if(r("infura"))try{let r,n=t.infura;"object"==typeof n&&(r=n.projectSecret,n=n.projectId),b.push(new c.InfuraProvider(e,n,r))}catch(e){}if(r("quicknode"))try{let r=t.quicknode;b.push(new u.QuickNodeProvider(e,r))}catch(e){}if((0,n.assert)(b.length,"unsupported default network","UNSUPPORTED_OPERATION",{operation:"getDefaultProvider"}),1===b.length)return b[0];let y=Math.floor(b.length/2);return y>2&&(y=2),m&&-1!==g.indexOf(m.name)&&(y=1),t&&t.quorum&&(y=t.quorum),new d.FallbackProvider(b,void 0,{quorum:y})}},629:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UndecodedEventLog=t.EventLog=t.ContractTransactionResponse=t.ContractTransactionReceipt=t.ContractUnknownEventPayload=t.ContractEventPayload=t.ContractFactory=t.Contract=t.BaseContract=void 0;var n=r(3341);Object.defineProperty(t,"BaseContract",{enumerable:!0,get:function(){return n.BaseContract}}),Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return n.Contract}});var i=r(7399);Object.defineProperty(t,"ContractFactory",{enumerable:!0,get:function(){return i.ContractFactory}});var s=r(8319);Object.defineProperty(t,"ContractEventPayload",{enumerable:!0,get:function(){return s.ContractEventPayload}}),Object.defineProperty(t,"ContractUnknownEventPayload",{enumerable:!0,get:function(){return s.ContractUnknownEventPayload}}),Object.defineProperty(t,"ContractTransactionReceipt",{enumerable:!0,get:function(){return s.ContractTransactionReceipt}}),Object.defineProperty(t,"ContractTransactionResponse",{enumerable:!0,get:function(){return s.ContractTransactionResponse}}),Object.defineProperty(t,"EventLog",{enumerable:!0,get:function(){return s.EventLog}}),Object.defineProperty(t,"UndecodedEventLog",{enumerable:!0,get:function(){return s.UndecodedEventLog}})},659:(e,t,r)=>{"use strict";r.d(t,{a:()=>h});var n=r(7876),i=r(4232),s=r(5981),a=r(1090),o=r(2850);let l=Object.freeze({});Object.freeze({});var c=r(7175),u=r(307);let d=e=>e.charAt(0).toUpperCase()+e.slice(1);function h(e){let{key:t,recipe:r}=e,h=d(t||r.className||"Component"),[f,p]=(0,s.q)({strict:!1,name:`${h}PropsContext`,providerName:`${h}PropsContext`});function g(e){let{unstyled:n,...s}=e,a=function(e){let{key:t,recipe:r}=e,n=(0,u.$)();return(0,i.useMemo)(()=>{let e=r||(null!=t?n.getRecipe(t):{});return n.cva(structuredClone(e))},[t,r,n])}({key:t,recipe:s.recipe||r}),[o,c]=(0,i.useMemo)(()=>a.splitVariantProps(s),[a,s]);return{styles:n?l:a(o),className:a.className,props:c}}return{withContext:(e,t)=>{let r=(0,c.B)(e,{},t),s=(0,i.forwardRef)((e,t)=>{let s=p(),l=(0,i.useMemo)(()=>(0,a.v)(s,e),[e,s]),{styles:c,className:u,props:d}=g(l);return(0,n.jsx)(r,{...d,ref:t,css:[c,l.css],className:(0,o.cx)(u,l.className)})});return s.displayName=e.displayName||e.name,s},PropsProvider:f,withPropsProvider:function(){return f},usePropsContext:p,useRecipeResult:g}}},679:function(e,t,r){"use strict";var n,i,s,a,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},l=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.CFB=void 0;let c=r(5383);class u extends c.ModeOfOperation{constructor(e,t,r=8){if(super("CFB",e,u),n.add(this),i.set(this,void 0),s.set(this,void 0),!Number.isInteger(r)||r%8)throw TypeError("invalid segmentSize");if(Object.defineProperties(this,{segmentSize:{enumerable:!0,value:r}}),t){if(t.length%16)throw TypeError("invalid iv size (must be 16 bytes)");o(this,i,new Uint8Array(t),"f")}else o(this,i,new Uint8Array(16),"f");o(this,s,this.iv,"f")}get iv(){return new Uint8Array(l(this,i,"f"))}encrypt(e){if(8*e.length%this.segmentSize)throw TypeError("invalid plaintext size (must be multiple of segmentSize bytes)");let t=this.segmentSize/8,r=new Uint8Array(e);for(let e=0;e<r.length;e+=t){let i=this.aes.encrypt(l(this,s,"f"));for(let n=0;n<t;n++)r[e+n]^=i[n];l(this,n,"m",a).call(this,r.subarray(e))}return r}decrypt(e){if(8*e.length%this.segmentSize)throw TypeError("invalid ciphertext size (must be multiple of segmentSize bytes)");let t=this.segmentSize/8,r=new Uint8Array(e);for(let i=0;i<r.length;i+=t){let o=this.aes.encrypt(l(this,s,"f"));for(let e=0;e<t;e++)r[i+e]^=o[e];l(this,n,"m",a).call(this,e.subarray(i))}return r}}t.CFB=u,i=new WeakMap,s=new WeakMap,n=new WeakSet,a=function(e){let t=this.segmentSize/8;l(this,s,"f").set(l(this,s,"f").subarray(t)),l(this,s,"f").set(e.subarray(0,t),16-t)}},723:(e,t)=>{"use strict";let r,n,i,s,a,o,l,c,u,d,h,f,p,g,m,b;let y=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function x(e){var t;let r;return t=function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,s=[0,1];for(let e=1;e<n;e++)s.push(i+=r());let a=r(),o=t;t+=a;let l=0,c=0;function u(){return 0==l&&(c=c<<8|e[t++],l=8),c>>--l&1}let d=0x80000000-1,h=0;for(let e=0;e<31;e++)h=h<<1|u();let f=[],p=0,g=0x80000000;for(;;){let e=Math.floor(((h-p+1)*i-1)/g),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<s[n]?r=n:t=n}if(0==t)break;f.push(t);let a=p+Math.floor(g*s[t]/i),o=p+Math.floor(g*s[t+1]/i)-1;for(;((a^o)&0x40000000)==0;)h=h<<1&d|u(),a=a<<1&d,o=o<<1&d|1;for(;a&~o&0x20000000;)h=0x40000000&h|h<<1&d>>>1|u(),a=a<<1^0x40000000,o=(0x40000000^o)<<1|0x40000001;p=a,g=1+o-a}let m=n-4;return f.map(t=>{switch(t-m){case 3:return m+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return m+256+(e[o++]<<8|e[o++]);case 1:return m+e[o++];default:return t-1}})}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((e,r)=>t[e.charCodeAt(0)]=r);let r=e.length,n=new Uint8Array(6*r>>3);for(let i=0,s=0,a=0,o=0;i<r;i++)o=o<<6|t[e.charCodeAt(i)],(a+=6)>=8&&(n[s++]=o>>(a-=8));return n}(e)),r=0,()=>t[r++]}function w(e,t=0){let r=[];for(;;){let n=e(),i=e();if(!i)break;t+=n;for(let e=0;e<i;e++)r.push(t+e);t+=i+1}return r}function v(e){return E(()=>{let t=w(e);if(t.length)return t})}function A(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(function(e,t){let r=1+t(),n=t(),i=E(t);return k(i.length,1+e,t).flatMap((e,t)=>{let[s,...a]=e;return Array(i[t]).fill().map((e,t)=>{let i=t*n;return[s+t*r,a.map(e=>e+i)]})})}(r,e))}for(;;){var r,n;let i=e()-1;if(i<0)break;t.push((r=i,k(1+(n=e)(),1+r,n).map(e=>[e[0],e.slice(1)])))}return t.flat()}function E(e){let t=[];for(;;){let r=e(t.length);if(!r)break;t.push(r)}return t}function k(e,t,r){let n=Array(e).fill().map(()=>[]);for(let i=0;i<t;i++)(function(e,t){let r=Array(e);for(let i=0,s=0;i<e;i++){var n;r[i]=s+=1&(n=t())?~n>>1:n>>1}return r})(e,r).forEach((e,t)=>n[t].push(e));return n}function P(e){return`{${e.toString(16).toUpperCase().padStart(2,"0")}}`}function S(e){let t=[];for(let r=0,n=e.length;r<n;){let n=e.codePointAt(r);r+=n<65536?1:2,t.push(n)}return t}function I(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let r=[];for(let n=0;n<t;)r.push(String.fromCodePoint(...e.slice(n,n+=4096)));return r.join("")}function T(e,t){let r=e.length,n=r-t.length;for(let i=0;0==n&&i<r;i++)n=e[i]-t[i];return n}let _=55204;function C(e){return e>>24&255}function O(e){return 0xffffff&e}function R(e){return e>=44032&&e<_}function N(e){r||function(){let e=x("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");for(let[t,a]of(r=new Map(v(e).flatMap((e,t)=>e.map(e=>[e,t+1<<24]))),n=new Set(w(e)),i=new Map,s=new Map,A(e))){if(!n.has(t)&&2==a.length){let[e,r]=a,n=s.get(e);n||(n=new Map,s.set(e,n)),n.set(r,t)}i.set(t,a.reverse())}}();let t=[],a=[],o=!1;function l(e){let n=r.get(e);n&&(o=!0,e|=n),t.push(e)}for(let r of e)for(;;){if(r<128)t.push(r);else if(R(r)){let e=r-44032,t=e/588|0,n=e%588/28|0,i=e%28;l(4352+t),l(4449+n),i>0&&l(4519+i)}else{let e=i.get(r);e?a.push(...e):l(r)}if(!a.length)break;r=a.pop()}if(o&&t.length>1){let e=C(t[0]);for(let r=1;r<t.length;r++){let n=C(t[r]);if(0==n||e<=n){e=n;continue}let i=r-1;for(;;){let r=t[i+1];if(t[i+1]=t[i],t[i]=r,!i||(e=C(t[--i]))<=n)break}e=C(t[r])}}return t}function M(e){return N(e).map(O)}function B(e){return function(e){let t=[],r=[],n=-1,i=0;for(let a of e){let e=C(a),o=O(a);if(-1==n)0==e?n=o:t.push(o);else if(i>0&&i>=e)0==e?(t.push(n,...r),r.length=0,n=o):r.push(o),i=e;else{let a=function(e,t){if(e>=4352&&e<4371&&t>=4449&&t<4470)return 44032+(e-4352)*588+(t-4449)*28;if(R(e)&&t>4519&&t<4547&&(e-44032)%28==0)return e+(t-4519);{let r=s.get(e);return r&&(r=r.get(t))?r:-1}}(n,o);a>=0?n=a:0==i&&0==e?(t.push(n),n=o):(r.push(o),i=e)}}return n>=0&&t.push(n,...r),t}(N(e))}let D=e=>Array.from(e);function L(e,t){return e.P.has(t)||e.Q.has(t)}class U extends Array{get is_emoji(){return!0}}function F(){let e,t;if(a)return;let r=x("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI"),n=()=>w(r),i=()=>new Set(n()),s=(e,t)=>t.forEach(t=>e.add(t));a=new Map(A(r)),o=i(),l=n(),c=new Set(n().map(e=>l[e])),l=new Set(l),u=i(),d=i();let y=v(r),k=r(),P=()=>{let e=new Set;return n().forEach(t=>s(e,y[t])),s(e,n()),e};h=E(e=>{let t=E(r).map(e=>e+96);if(t.length){let n=e>=k;t[0]-=32,t=I(t),n&&(t=`Restricted[${t}]`);let i=P();return{N:t,P:i,Q:P(),M:!r(),R:n}}}),f=i(),p=new Map;let S=n().concat(D(f)).sort((e,t)=>e-t);for(let{V:e,M:t}of(S.forEach((e,t)=>{let n=r(),i=S[t]=n?S[t-n]:{V:[],M:new Map};i.V.push(e),f.has(e)||p.set(e,i)}),new Set(p.values()))){let r=[];for(let t of e){let e=h.filter(e=>L(e,t)),n=r.find(({G:t})=>e.some(e=>t.has(e)));n||(n={G:new Set,V:[]},r.push(n)),n.V.push(t),s(n.G,e)}let n=r.flatMap(e=>D(e.G));for(let{G:e,V:i}of r){let r=new Set(n.filter(t=>!e.has(t)));for(let e of i)t.set(e,r)}}g=new Set;let _=new Set,C=e=>g.has(e)?_.add(e):g.add(e);for(let e of h){for(let t of e.P)C(t);for(let t of e.Q)C(t)}for(let e of g)p.has(e)||_.has(e)||p.set(e,1);for(let n of(s(g,M(g)),m=(e=[],t=w(r),function t({S:r,B:n},i,s){if(!(4&r)||s!==i[i.length-1])for(let a of(2&r&&(s=i[i.length-1]),1&r&&e.push(i),n))for(let e of a.Q)t(a,[...i,e],s)}(function e(n){return{S:r(),B:E(()=>{let n=w(r).map(e=>t[e]);if(n.length)return e(n)}),Q:n}}([]),[]),e).map(e=>U.from(e)).sort(T),b=new Map,m)){let e=[b];for(let t of n){let r=e.map(e=>{let r=e.get(t);return r||(r=new Map,e.set(t,r)),r});65039===t?e.push(...r):e=r}for(let t of e)t.V=n}}function j(e){return($(e)?"":`${z(H([e]))} `)+P(e)}function z(e){return`"${e}"\u200E`}function H(e,t=1/0,r=P){let n=[];G(e[0])&&n.push("◌"),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let i=0,s=e.length;for(let t=0;t<s;t++){let s=e[t];$(s)&&(n.push(I(e.slice(i,t))),n.push(r(s)),i=t+1)}return n.push(I(e.slice(i,s))),n.join("")}function G(e){return F(),l.has(e)}function $(e){return F(),u.has(e)}function V(e,t,r){if(!e)return[];F();let n=0;return e.split(".").map(e=>{let i=S(e),s={input:i,offset:n};n+=i.length+1;try{let e,n=s.tokens=Z(i,t,r),a=n.length;if(!a)throw Error("empty label");let o=s.output=n.flat();if(!function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw Error("underscore allowed only at start")}(o),!(s.emoji=a>1||n[0].is_emoji)&&o.every(e=>e<128))!function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw Error(`invalid label extension: "${I(e.slice(0,4))}"`)}(o),e="ASCII";else{let t=n.flatMap(e=>e.is_emoji?[]:e);if(t.length){if(l.has(o[0]))throw Q("leading combining mark");for(let e=1;e<a;e++){let t=n[e];if(!t.is_emoji&&l.has(t[0]))throw Q(`emoji + combining mark: "${I(n[e-1])} + ${H([t[0]])}"`)}!function(e){let t=e[0],r=y.get(t);if(r)throw Q(`leading ${r}`);let n=e.length,i=-1;for(let s=1;s<n;s++){t=e[s];let n=y.get(t);if(n){if(i==s)throw Q(`${r} + ${n}`);i=s+1,r=n}}if(i==n)throw Q(`trailing ${r}`)}(o);let r=D(new Set(t)),[i]=function(e){let t=h;for(let r of e){let e=t.filter(e=>L(e,r));if(!e.length){if(h.some(e=>L(e,r)))throw W(t[0],r);throw K(r)}if(t=e,1==e.length)break}return t}(r);(function(e,t){for(let r of t)if(!L(e,r))throw W(e,r);if(e.M){let e=M(t);for(let t=1,r=e.length;t<r;t++)if(c.has(e[t])){let n=t+1;for(let i;n<r&&c.has(i=e[n]);n++)for(let r=t;r<n;r++)if(e[r]==i)throw Error(`duplicate non-spacing marks: ${j(i)}`);if(n-t>4)throw Error(`excessive non-spacing marks: ${z(H(e.slice(t-1,n)))} (${n-t}/4)`);t=n}}})(i,t),function(e,t){let r;let n=[];for(let e of t){let t=p.get(e);if(1===t)return;if(t){let n=t.M.get(e);if(!(r=r?r.filter(e=>n.has(e)):D(n)).length)return}else n.push(e)}if(r){for(let t of r)if(n.every(e=>L(t,e)))throw Error(`whole-script confusable: ${e.N}/${t.N}`)}}(i,r),e=i.N}else e="Emoji"}s.type=e}catch(e){s.error=e}return s})}function q(e){return e.map(({input:t,error:r,output:n})=>{if(r){let n=r.message;throw Error(1==e.length?n:`Invalid label ${z(H(t,63))}: ${n}`)}return I(n)}).join(".")}function K(e){return Error(`disallowed character: ${j(e)}`)}function W(e,t){let r=j(t),n=h.find(e=>e.P.has(t));return n&&(r=`${n.N} ${r}`),Error(`illegal mixture: ${e.N} + ${r}`)}function Q(e){return Error(`illegal placement: ${e}`)}function Z(e,t,r){let n=[],i=[];for(e=e.slice().reverse();e.length;){let s=Y(e);if(s)i.length&&(n.push(t(i)),i=[]),n.push(r(s));else{let t=e.pop();if(g.has(t))i.push(t);else{let e=a.get(t);if(e)i.push(...e);else if(!o.has(t))throw K(t)}}}return i.length&&n.push(t(i)),n}function J(e){return e.filter(e=>65039!=e)}function Y(e,t){let r,n=b,i=e.length;for(;i&&(n=n.get(e[--i]));){let{V:s}=n;s&&(r=s,t&&t.push(...e.slice(i).reverse()),e.length=i)}return r}let X="valid",ee="mapped",et="ignored";function er(e){return e==X||e==ee}function en(e){return e.some(e=>d.has(e))}function ei(e){for(let t=0;t<e.length;t++)if(e[t].type==X){let r=t+1;for(;r<e.length&&e[r].type==X;)r++;e.splice(t,r-t,{type:X,cps:e.slice(t,r).flatMap(e=>e.cps)})}return e}t.ens_beautify=function(e){let t=V(e,B,e=>e);for(let{type:e,output:r,error:n}of t){if(n)break;"Greek"!==e&&function(e,t,r){let n=0;for(;;){let t=e.indexOf(958,n);if(t<0)break;e[t]=926,n=t+1}}(r,958,926)}return q(t)},t.ens_emoji=function(){return F(),m.map(e=>e.slice())},t.ens_normalize=function(e){return q(V(e,B,J))},t.ens_normalize_fragment=function(e,t){F();let r=t?M:B;return e.split(".").map(e=>I(Z(S(e),r,J).flat())).join(".")},t.ens_split=function(e,t){return V(e,B,t?e=>e.slice():J)},t.ens_tokenize=function e(t,{nf:r=!0}={}){F();let n=S(t).reverse(),i=[],s=[];for(;n.length;){let e=Y(n,i);if(e)s.push({type:"emoji",emoji:e.slice(),input:i,cps:J(e)}),i=[];else{let e=n.pop();if(46==e)s.push({type:"stop",cp:e});else if(g.has(e))s.push({type:X,cps:[e]});else if(o.has(e))s.push({type:et,cp:e});else{let t=a.get(e);t?s.push({type:ee,cp:e,cps:t.slice()}):s.push({type:"disallowed",cp:e})}}}if(r)for(let t=0,r=-1;t<s.length;t++){let n=s[t];if(er(n.type)){if(en(n.cps)){let n=t+1;for(let e=n;e<s.length;e++){let{type:t,cps:r}=s[e];if(er(t)){if(!en(r))break;n=e+1}else if(t!==et)break}r<0&&(r=t);let i=s.slice(r,n),a=i.flatMap(e=>er(e.type)?e.cps:[]),o=B(a);T(o,a)?(s.splice(r,n-r,{type:"nfc",input:a,cps:o,tokens0:ei(i),tokens:e(I(o),{nf:!1})}),t=r):t=n-1,r=-1}else r=t}else n.type!==et&&(r=-1)}return ei(s)},t.is_combining_mark=G,t.nfc=B,t.nfd=M,t.safe_str_from_cps=H,t.should_escape=$},735:(e,t,r)=>{"use strict";let n,i;r.d(t,{Z:()=>sJ});var s,a,o,l,c={};function u(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function d(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function h(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function f(e,t){d(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}r.r(c),r.d(c,{OG:()=>eH,My:()=>eN,Ph:()=>eD,lX:()=>eL,Id:()=>ez,fg:()=>eV,qj:()=>ej,aT:()=>eB,lq:()=>eU,z:()=>eF,Q5:()=>eK});let p=BigInt(0x100000000-1),g=BigInt(32),m=(e,t,r)=>e<<r|t>>>32-r,b=(e,t,r)=>t<<r|e>>>32-r,y=(e,t,r)=>t<<r-32|e>>>64-r,x=(e,t,r)=>e<<r-32|t>>>64-r,w="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,v=e=>e instanceof Uint8Array,A=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),E=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),k=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");function P(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),!v(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}(e,t)=>t.toString(16).padStart(2,"0");class S{clone(){return this._cloneInto()}}function I(e){let t=t=>e().update(P(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function T(e=32){if(w&&"function"==typeof w.getRandomValues)return w.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}let[_,C,O]=[[],[],[]],R=BigInt(0),N=BigInt(1),M=BigInt(2),B=BigInt(7),D=BigInt(256),L=BigInt(113);for(let e=0,t=N,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],_.push(2*(5*n+r)),C.push((e+1)*(e+2)/2%64);let i=R;for(let e=0;e<7;e++)(t=(t<<N^(t>>B)*L)%D)&M&&(i^=N<<(N<<BigInt(e))-N);O.push(i)}let[U,F]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:s,l:a}=function(e,t=!1){return t?{h:Number(e&p),l:Number(e>>g&p)}:{h:0|Number(e>>g&p),l:0|Number(e&p)}}(e[i],t);[r[i],n[i]]=[s,a]}return[r,n]}(O,!0),j=(e,t,r)=>r>32?y(e,t,r):m(e,t,r),z=(e,t,r)=>r>32?x(e,t,r):b(e,t,r);class H extends S{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,u(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=A(this.state)}keccak(){!function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,s=r[i],a=r[i+1],o=j(s,a,1)^r[n],l=z(s,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=C[r],s=j(t,i,n),a=z(t,i,n),o=_[r];t=e[o],i=e[o+1],e[o]=s,e[o+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=U[n],e[1]^=F[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){h(this);let{blockLen:t,state:r}=this,n=(e=P(e)).length;for(let i=0;i<n;){let s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){h(this,!1),d(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return u(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(f(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new H(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}let G=I(()=>new H(136,1,32));async function $(e){let t=Object.keys(e);return(await Promise.all(t.map(t=>Promise.resolve(e[t])))).reduce((e,r,n)=>(e[t[n]]=r,e),{})}function V(e,t,r){for(let n in t){let i=t[n],s=r?r[n]:null;s&&function(e,t,r){let n=t.split("|").map(e=>e.trim());for(let r=0;r<n.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let i=Error(`invalid value for type ${t}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${r}`,i.value=e,i}(i,s,n),Object.defineProperty(e,n,{enumerable:!0,value:i,writable:!1})}}function q(e,t){if(null==e)return"null";if(null==t&&(t=new Set),"object"==typeof e){if(t.has(e))return"[Circular]";t.add(e)}if(Array.isArray(e))return"[ "+e.map(e=>q(e,t)).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let n=0;n<e.length;n++)r+=t[e[n]>>4],r+=t[15&e[n]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return q(e.toJSON(),t);switch(typeof e){case"boolean":case"number":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let r=Object.keys(e);return r.sort(),"{ "+r.map(r=>`${q(r,t)}: ${q(e[r],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function K(e,t){return e&&e.code===t}function W(e){return K(e,"CALL_EXCEPTION")}function Q(e,t,r){let n,i=e;{let n=[];if(r){if("message"in r||"code"in r||"name"in r)throw Error(`value will overwrite populated values: ${q(r)}`);for(let e in r){if("shortMessage"===e)continue;let t=r[e];n.push(e+"="+q(t))}}n.push(`code=${t}`),n.push("version=6.14.4"),n.length&&(e+=" ("+n.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":n=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=RangeError(e);break;default:n=Error(e)}return V(n,{code:t}),r&&Object.assign(n,r),null==n.shortMessage&&V(n,{shortMessage:i}),n}function Z(e,t,r,n){if(!e)throw Q(t,r,n)}function J(e,t,r,n){Z(e,t,"INVALID_ARGUMENT",{argument:r,value:n})}function Y(e,t,r){null==r&&(r=""),r&&(r=": "+r),Z(e>=t,"missing argument"+r,"MISSING_ARGUMENT",{count:e,expectedCount:t}),Z(e<=t,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}let X=["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch(e){}return e},[]);function ee(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),Z(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function et(e,t,r){if(e instanceof Uint8Array)return r?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let t=new Uint8Array((e.length-2)/2),r=2;for(let n=0;n<t.length;n++)t[n]=parseInt(e.substring(r,r+2),16),r+=2;return t}J(!1,"invalid BytesLike value",t||"value",e)}function er(e,t){return et(e,t,!1)}function en(e,t){return et(e,t,!0)}function ei(e,t){return!!("string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/))&&("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0)}let es="0123456789abcdef";function ea(e){let t=er(e),r="0x";for(let e=0;e<t.length;e++){let n=t[e];r+=es[(240&n)>>4]+es[15&n]}return r}function eo(e){return"0x"+e.map(e=>ea(e).substring(2)).join("")}function el(e){return ei(e,!0)?(e.length-2)/2:er(e).length}function ec(e,t,r){let n=er(e);return null!=r&&r>n.length&&Z(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r}),ea(n.slice(null==t?0:t,null==r?n.length:r))}function eu(e,t,r){let n=er(e);Z(t>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:t,offset:t+1});let i=new Uint8Array(t);return i.fill(0),r?i.set(n,t-n.length):i.set(n,0),ea(i)}let ed=!1,eh=function(e){return G(e)},ef=eh;function ep(e){let t=er(e,"data");return ea(ef(t))}ep._=eh,ep.lock=function(){ed=!0},ep.register=function(e){if(ed)throw TypeError("keccak256 is locked");ef=e},Object.freeze(ep);let eg=BigInt(0),em=BigInt(36);function eb(e){let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);let n=er(ep(r));for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let ey={};for(let e=0;e<10;e++)ey[String(e)]=String(e);for(let e=0;e<26;e++)ey[String.fromCharCode(65+e)]=String(10+e);let ex=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function ew(e){if(J("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=eb(e);return J(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){J(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>ey[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e),"bad icap checksum","address",e);let t=(function(e){e=e.toLowerCase();let t=eg;for(let r=0;r<e.length;r++)t=t*em+ex[e[r]];return t})(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return eb("0x"+t)}J(!1,"invalid address","address",e)}class ev extends S{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=E(this.buffer)}update(e){h(this);let{view:t,buffer:r,blockLen:n}=this,i=(e=P(e)).length;for(let s=0;s<i;){let a=Math.min(n-this.pos,i-s);if(a===n){let t=E(e);for(;n<=i-s;s+=n)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){h(this),f(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(0xffffffff),a=Number(r>>i&s),o=Number(r&s),l=4*!!n,c=4*!n;e.setUint32(t+l,a,n),e.setUint32(t+c,o,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);let a=E(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=o/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)a.setUint32(4*e,c[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.length=n,e.pos=a,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}let eA=(e,t,r)=>e&t^~e&r,eE=(e,t,r)=>e&t^e&r^t&r,ek=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),eP=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),eS=new Uint32Array(64);class eI extends ev{constructor(){super(64,32,8,!1),this.A=0|eP[0],this.B=0|eP[1],this.C=0|eP[2],this.D=0|eP[3],this.E=0|eP[4],this.F=0|eP[5],this.G=0|eP[6],this.H=0|eP[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)eS[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=eS[e-15],r=eS[e-2],n=k(t,7)^k(t,18)^t>>>3,i=k(r,17)^k(r,19)^r>>>10;eS[e]=i+eS[e-7]+n+eS[e-16]|0}let{A:r,B:n,C:i,D:s,E:a,F:o,G:l,H:c}=this;for(let e=0;e<64;e++){let t=c+(k(a,6)^k(a,11)^k(a,25))+eA(a,o,l)+ek[e]+eS[e]|0,u=(k(r,2)^k(r,13)^k(r,22))+eE(r,n,i)|0;c=l,l=o,o=a,a=s+t|0,s=i,i=n,n=r,r=t+u|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,n,i,s,a,o,l,c)}roundClean(){eS.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let eT=I(()=>new eI),e_=(BigInt(0),BigInt(1)),eC=BigInt(2),eO=e=>e instanceof Uint8Array,eR=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function eN(e){if(!eO(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=eR[e[r]];return t}function eM(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function eB(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,i=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[t]=i}return r}function eD(e){return eM(eN(e))}function eL(e){if(!eO(e))throw Error("Uint8Array expected");return eM(eN(Uint8Array.from(e).reverse()))}function eU(e,t){return eB(e.toString(16).padStart(2*t,"0"))}function eF(e,t){return eU(e,t).reverse()}function ej(e,t,r){let n;if("string"==typeof t)try{n=eB(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(eO(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let i=n.length;if("number"==typeof r&&i!==r)throw Error(`${e} expected ${r} bytes, got ${i}`);return n}function ez(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!eO(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let eH=e=>(eC<<BigInt(e-1))-e_,eG=e=>new Uint8Array(e),e$=e=>Uint8Array.from(e);function eV(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=eG(e),i=eG(e),s=0,a=()=>{n.fill(1),i.fill(0),s=0},o=(...e)=>r(i,n,...e),l=(e=eG())=>{i=o(e$([0]),e),n=o(),0!==e.length&&(i=o(e$([1]),e),n=o())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=o()).slice();r.push(t),e+=n.length}return ez(...r)};return(e,t)=>{let r;for(a(),l(e);!(r=t(c()));)l();return a(),r}}let eq={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function eK(e,t,r={}){let n=(t,r,n)=>{let i=eq[r];if("function"!=typeof i)throw Error(`Invalid validator "${r}", expected function`);let s=e[t];if((!n||void 0!==s)&&!i(s,e))throw Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let eW=BigInt(0),eQ=BigInt(1),eZ=BigInt(2),eJ=BigInt(3),eY=BigInt(4),eX=BigInt(5),e0=BigInt(8);function e1(e,t){let r=e%t;return r>=eW?r:t+r}function e2(e,t,r){let n=e;for(;t-- >eW;)n*=n,n%=r;return n}function e3(e,t){if(e===eW||t<=eW)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=e1(e,t),n=t,i=eW,s=eQ,a=eQ,o=eW;for(;r!==eW;){let e=n/r,t=n%r,l=i-a*e,c=s-o*e;n=r,r=t,i=a,s=o,a=l,o=c}if(n!==eQ)throw Error("invert: does not exist");return e1(i,t)}BigInt(9),BigInt(16);let e4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function e6(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function e5(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function e8(e){let t=e5(e);return t+Math.ceil(t/2)}class e7 extends S{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");u(e.outputLen),u(e.blockLen)}(e);let r=P(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return h(this),this.iHash.update(e),this}digestInto(e){h(this),d(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let e9=(e,t,r)=>new e7(e,t).update(r).digest();e9.create=(e,t)=>new e7(e,t);let te=BigInt(0),tt=BigInt(1);function tr(e){return eK(e.Fp,e4.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),eK(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...e6(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}let{Ph:tn,aT:ti}=c,ts={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=ts;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:tn(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=ts,r="string"==typeof e?ti(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:s}=ts._parseInt(r.subarray(2)),{d:a,l:o}=ts._parseInt(s);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,a=i.length/2,o=r(s),l=r(a);return`30${r(a+s+4)}02${l}${i}02${o}${n}`}},ta=BigInt(0),to=BigInt(1),tl=(BigInt(2),BigInt(3)),tc=(BigInt(4),BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f")),tu=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),td=BigInt(1),th=BigInt(2),tf=(e,t)=>(e+t/th)/t,tp=function(e,t,r=!1,n={}){if(e<=eW)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:s}=e6(e,t);if(s>2048)throw Error("Field lengths over 2048 bytes are not supported");let a=function(e){if(e%eY===eJ){let t=(e+eQ)/eY;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%e0===eX){let t=(e-eX)/e0;return function(e,r){let n=e.mul(r,eZ),i=e.pow(n,t),s=e.mul(r,i),a=e.mul(e.mul(s,eZ),i),o=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(o),r))throw Error("Cannot find square root");return o}}return function(e){let t,r,n;let i=(e-eQ)/eZ;for(t=e-eQ,r=0;t%eZ===eW;t/=eZ,r++);for(n=eZ;n<e&&function(e,t,r){if(r<=eW||t<eW)throw Error("Expected power/modulo > 0");if(r===eQ)return eW;let n=eQ;for(;t>eW;)t&eQ&&(n=n*e%r),e=e*e%r,t>>=eQ;return n}(n,i,e)!==e-eQ;n++);if(1===r){let t=(e+eQ)/eY;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let s=(t+eQ)/eZ;return function(e,a){if(e.pow(a,i)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,n),t),c=e.pow(a,s),u=e.pow(a,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,eQ<<BigInt(o-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),o=t}return c}}(e)}(e),o=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:eH(i),ZERO:eW,ONE:eQ,create:t=>e1(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return eW<=t&&t<e},is0:e=>e===eW,isOdd:e=>(e&eQ)===eQ,neg:t=>e1(-t,e),eql:(e,t)=>e===t,sqr:t=>e1(t*t,e),add:(t,r)=>e1(t+r,e),sub:(t,r)=>e1(t-r,e),mul:(t,r)=>e1(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<eW)throw Error("Expected power > 0");if(r===eW)return e.ONE;if(r===eQ)return t;let n=e.ONE,i=t;for(;r>eW;)r&eQ&&(n=e.mul(n,i)),i=e.sqr(i),r>>=eQ;return n})(o,e,t),div:(t,r)=>e1(t*e3(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>e3(t,e),sqrt:n.sqrt||(e=>a(o,e)),invertBatch:e=>(function(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r})(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?eF(e,s):eU(e,s),fromBytes:e=>{if(e.length!==s)throw Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?eL(e):eD(e)}});return Object.freeze(o)}(tc,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),o=BigInt(88),l=e*e*e%tc,c=l*l*e%tc,u=e2(c,t,tc)*c%tc,d=e2(u,t,tc)*c%tc,h=e2(d,th,tc)*l%tc,f=e2(h,n,tc)*h%tc,p=e2(f,i,tc)*f%tc,g=e2(p,a,tc)*p%tc,m=e2(g,o,tc)*g%tc,b=e2(m,a,tc)*p%tc,y=e2(b,t,tc)*c%tc,x=e2(y,s,tc)*f%tc,w=e2(x,r,tc)*l%tc,v=e2(w,th,tc);if(!tp.eql(tp.sqr(v),e))throw Error("Cannot find square root");return v}}),tg=function(e,t){let r=t=>(function(e){let t=function(e){let t=tr(e);return eK(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function a(e){return e1(e,n)}let{ProjectivePoint:o,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:u}=function(e){let t=function(e){let t=tr(e);eK(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{let i=t.toAffine();return ez(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){let{a:n,b:i}=t,s=r.sqr(e),a=r.mul(s,e);return r.add(r.add(a,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw Error("bad generator point: equation left != right");function a(e){return"bigint"==typeof e&&ta<e&&e<t.n}function o(e){if(!a(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:s,n:a}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=eN(e)),"string"!=typeof e||!n.includes(e.length))throw Error("Invalid key");e=e.padStart(2*i,"0")}try{r="bigint"==typeof e?e:eD(ej("private key",e,i))}catch(t){throw Error(`private key must be ${i} bytes, hex or bigint, not ${typeof e}`)}return s&&(r=e1(r,a)),o(r),r}let c=new Map;function u(e){if(!(e instanceof d))throw Error("ProjectivePoint expected")}class d{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof d)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?d.ZERO:new d(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){let t=d.fromAffine(i(ej("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw Error("bad point: x or y not FE");let i=r.sqr(n),a=s(e);if(!r.eql(i,a))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:n,pz:i}=this,{px:s,py:a,pz:o}=e,l=r.eql(r.mul(t,o),r.mul(s,i)),c=r.eql(r.mul(n,o),r.mul(a,i));return l&&c}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,tl),{px:s,py:a,pz:o}=this,l=r.ZERO,c=r.ZERO,u=r.ZERO,h=r.mul(s,s),f=r.mul(a,a),p=r.mul(o,o),g=r.mul(s,a);return g=r.add(g,g),u=r.mul(s,o),u=r.add(u,u),l=r.mul(e,u),c=r.mul(i,p),c=r.add(l,c),l=r.sub(f,c),c=r.add(f,c),c=r.mul(l,c),l=r.mul(g,l),u=r.mul(i,u),p=r.mul(e,p),g=r.sub(h,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(h,h),h=r.add(u,h),h=r.add(h,p),h=r.mul(h,g),c=r.add(c,h),p=r.mul(a,o),p=r.add(p,p),h=r.mul(p,g),l=r.sub(l,h),u=r.mul(p,f),u=r.add(u,u),new d(l,c,u=r.add(u,u))}add(e){u(e);let{px:n,py:i,pz:s}=this,{px:a,py:o,pz:l}=e,c=r.ZERO,h=r.ZERO,f=r.ZERO,p=t.a,g=r.mul(t.b,tl),m=r.mul(n,a),b=r.mul(i,o),y=r.mul(s,l),x=r.add(n,i),w=r.add(a,o);x=r.mul(x,w),w=r.add(m,b),x=r.sub(x,w),w=r.add(n,s);let v=r.add(a,l);return w=r.mul(w,v),v=r.add(m,y),w=r.sub(w,v),v=r.add(i,s),c=r.add(o,l),v=r.mul(v,c),c=r.add(b,y),v=r.sub(v,c),f=r.mul(p,w),c=r.mul(g,y),f=r.add(c,f),c=r.sub(b,f),f=r.add(b,f),h=r.mul(c,f),b=r.add(m,m),b=r.add(b,m),y=r.mul(p,y),w=r.mul(g,w),b=r.add(b,y),y=r.sub(m,y),y=r.mul(p,y),w=r.add(w,y),m=r.mul(b,w),h=r.add(h,m),m=r.mul(v,w),c=r.mul(x,c),c=r.sub(c,m),m=r.mul(x,b),f=r.mul(v,f),new d(c,h,f=r.add(f,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,c,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)})}multiplyUnsafe(e){let n=d.ZERO;if(e===ta)return n;if(o(e),e===to)return this;let{endo:i}=t;if(!i)return f.unsafeLadder(this,e);let{k1neg:s,k1:a,k2neg:l,k2:c}=i.splitScalar(e),u=n,h=n,p=this;for(;a>ta||c>ta;)a&to&&(u=u.add(p)),c&to&&(h=h.add(p)),p=p.double(),a>>=to,c>>=to;return s&&(u=u.negate()),l&&(h=h.negate()),h=new d(r.mul(h.px,i.beta),h.py,h.pz),u.add(h)}multiply(e){let n,i;o(e);let{endo:s}=t;if(s){let{k1neg:t,k1:a,k2neg:o,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(a),{p:h,f:p}=this.wNAF(l);c=f.constTimeNegate(t,c),h=f.constTimeNegate(o,h),h=new d(r.mul(h.px,s.beta),h.py,h.pz),n=c.add(h),i=u.add(p)}else{let{p:t,f:r}=this.wNAF(e);n=t,i=r}return d.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=d.BASE,i=(e,t)=>t!==ta&&t!==to&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){let{px:t,py:n,pz:i}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(i));let a=r.mul(t,e),o=r.mul(n,e),l=r.mul(i,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:a,y:o}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===to)return!0;if(r)return r(d,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===to?this:r?r(d,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(d,this,e)}toHex(e=!0){return eN(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);let h=t.nBitLength,f=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>te;)r&tt&&(n=n.add(i)),i=i.double(),r>>=tt;return n},precomputeWindow(e,t){let{windows:r,windowSize:i}=n(t),s=[],a=e,o=a;for(let e=0;e<r;e++){o=a,s.push(o);for(let e=1;e<i;e++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(t,i,s){let{windows:a,windowSize:o}=n(t),l=e.ZERO,c=e.BASE,u=BigInt(2**t-1),d=2**t,h=BigInt(t);for(let e=0;e<a;e++){let t=e*o,n=Number(s&u);s>>=h,n>o&&(n-=d,s+=tt);let a=t+Math.abs(n)-1,f=e%2!=0,p=n<0;0===n?c=c.add(r(f,i[t])):l=l.add(r(p,i[a]))}return{p:l,f:c}},wNAFCached(e,t,r,n){let i=e._WINDOW_SIZE||1,s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,n(s))),this.wNAF(i,s,r)}}}(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:a}}({...t,toBytes(e,t,n){let i=t.toAffine(),s=r.toBytes(i.x),a=ez;return n?a(Uint8Array.from([t.hasEvenY()?2:3]),s):a(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){let t=e.length,n=e[0],a=e.subarray(1);if(t===i&&(2===n||3===n)){let e=eD(a);if(!(ta<e&&e<r.ORDER))throw Error("Point is not on curve");let t=c(e),i=r.sqrt(t);return(1&n)==1!=((i&to)===to)&&(i=r.neg(i)),{x:e,y:i}}if(t===s&&4===n)return{x:r.fromBytes(a.subarray(0,r.BYTES)),y:r.fromBytes(a.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),d=e=>eN(eU(e,t.nByteLength)),h=(e,t,r)=>eD(e.slice(t,r));class f{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new f(h(e=ej("compactSignature",e,2*r),0,r),h(e,r,2*r))}static fromDER(e){let{r:t,s:r}=ts.toSig(ej("DER",e));return new f(t,r)}assertValidity(){if(!u(this.r))throw Error("r must be 0 < r < CURVE.n");if(!u(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new f(this.r,this.s,e)}recoverPublicKey(e){let{r:i,s,recovery:l}=this,c=m(ej("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?i+t.n:i;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let h=(1&l)==0?"02":"03",f=o.fromHex(h+d(u)),p=e3(u,n),g=a(-c*p),b=a(s*p),y=o.BASE.multiplyAndAddUnsafe(f,g,b);if(!y)throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return this.s>n>>to}normalizeS(){return this.hasHighS()?new f(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return eB(this.toDERHex())}toDERHex(){return ts.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return eB(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}function p(e){let t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof o}let g=t.bits2int||function(e){let r=eD(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},m=t.bits2int_modN||function(e){return a(g(e))},b=eH(t.nBitLength);function y(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(ta<=e&&e<b))throw Error(`bigint expected < 2^${t.nBitLength}`);return eU(e,t.nByteLength)}let x={lowS:t.lowS,prehash:!1},w={lowS:t.lowS,prehash:!1};return o.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return o.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(p(e))throw Error("first arg must be private key");if(!p(t))throw Error("second arg must be public key");return o.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,i,s=x){let{seed:c,k2sig:d}=function(e,i,s=x){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:d}=t,{lowS:h,prehash:p,extraEntropy:b}=s;null==h&&(h=!0),e=ej("msgHash",e),p&&(e=ej("prehashed msgHash",c(e)));let w=m(e),v=l(i),A=[y(v),y(w)];if(null!=b){let e=!0===b?d(r.BYTES):b;A.push(ej("extraEntropy",e))}return{seed:ez(...A),k2sig:function(e){let t=g(e);if(!u(t))return;let r=e3(t,n),i=o.BASE.multiply(t).toAffine(),s=a(i.x);if(s===ta)return;let l=a(r*a(w+s*v));if(l===ta)return;let c=2*(i.x!==s)|Number(i.y&to),d=l;if(h&&l>n>>to){var p;d=(p=l)>n>>to?a(-p):p,c^=1}return new f(s,d,c)}}}(e,i,s);return eV(t.hash.outputLen,t.nByteLength,t.hmac)(c,d)},verify:function(e,r,i,s=w){let l,c;if(r=ej("msgHash",r),i=ej("publicKey",i),"strict"in s)throw Error("options.strict was renamed to lowS");let{lowS:u,prehash:d}=s;try{if("string"==typeof e||e instanceof Uint8Array)try{c=f.fromDER(e)}catch(t){if(!(t instanceof ts.Err))throw t;c=f.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:r}=e;c=new f(t,r)}else throw Error("PARSE");l=o.fromHex(i)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&c.hasHighS())return!1;d&&(r=t.hash(r));let{r:h,s:p}=c,g=m(r),b=e3(p,n),y=a(g*b),x=a(h*b),v=o.BASE.multiplyAndAddUnsafe(l,y,x)?.toAffine();return!!v&&a(v.x)===h},ProjectivePoint:o,Signature:f,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=e8(t.n);return function(e,t,r=!1){let n=e.length,i=e5(t),s=e8(t);if(n<16||n<s||n>1024)throw Error(`expected ${s}-1024 bytes of input, got ${n}`);let a=e1(r?eD(e):eL(e),t-eQ)+eQ;return r?eF(a,i):eU(a,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=o.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>e9(t,e,function(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!v(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}(...r)),randomBytes:T});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:tp,n:tu,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-td*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),s=tf(t*e,tu),a=tf(-r*e,tu),o=e1(e-s*t-a*n,tu),l=e1(-s*r-a*t,tu),c=o>i,u=l>i;if(c&&(o=tu-o),u&&(l=tu-l),o>i||l>i)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:o,k2neg:u,k2:l}}}},eT),tm=BigInt(0),tb={},ty=e=>e.toRawBytes(!0).slice(1),tx=e=>mod(e,tu),tw=tg.ProjectivePoint,tv=BigInt(0),tA=BigInt(1);function tE(e,t){return tP(e,"value")&(tA<<BigInt(tT(t,"bits")))-tA}function tk(e,t){switch(typeof e){case"bigint":return e;case"number":return J(Number.isInteger(e),"underflow",t||"value",e),J(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");if("-"===e[0]&&"-"!==e[1])return-BigInt(e.substring(1));return BigInt(e)}catch(r){J(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}J(!1,"invalid BigNumberish value",t||"value",e)}function tP(e,t){let r=tk(e,t);return Z(r>=tv,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}let tS="0123456789abcdef";function tI(e){if(e instanceof Uint8Array){let t="0x0";for(let r of e)t+=tS[r>>4],t+=tS[15&r];return BigInt(t)}return tk(e)}function tT(e,t){switch(typeof e){case"bigint":return J(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),Number(e);case"number":return J(Number.isInteger(e),"underflow",t||"value",e),J(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return tT(BigInt(e),t)}catch(r){J(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}J(!1,"invalid numeric value",t||"value",e)}function t_(e,t){let r=tP(e,"value").toString(16);if(null==t)r.length%2&&(r="0"+r);else{let n=tT(t,"width");for(Z(2*n>=r.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<2*n;)r="0"+r}return"0x"+r}function tC(e){let t=tP(e,"value");if(t===tv)return new Uint8Array([]);let r=t.toString(16);r.length%2&&(r="0"+r);let n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){let t=2*e;n[e]=parseInt(r.substring(t,t+2),16)}return n}let tO="0x0000000000000000000000000000000000000000000000000000000000000000",tR=BigInt(0),tN=BigInt(1),tM=BigInt(2),tB=BigInt(27),tD=BigInt(28),tL=BigInt(35),tU={};function tF(e){return eu(tC(e),32,!0)}class tj{#e;#t;#r;#n;get r(){return this.#e}set r(e){J(32===el(e),"invalid r","value",e),this.#e=ea(e)}get s(){return this.#t}set s(e){J(32===el(e),"invalid s","value",e);let t=ea(e);J(8>parseInt(t.substring(0,3)),"non-canonical s","value",t),this.#t=t}get v(){return this.#r}set v(e){let t=tT(e,"value");J(27===t||28===t,"invalid v","v",e),this.#r=t}get networkV(){return this.#n}get legacyChainId(){let e=this.networkV;return null==e?null:tj.getChainId(e)}get yParity(){return+(27!==this.v)}get yParityAndS(){let e=er(this.s);return this.yParity&&(e[0]|=128),ea(e)}get compactSerialized(){return eo([this.r,this.yParityAndS])}get serialized(){return eo([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,n){ee(e,tU,"Signature"),this.#e=t,this.#t=r,this.#r=n,this.#n=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let e=new tj(tU,this.r,this.s,this.v);return this.networkV&&(e.#n=this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){let t=tk(e,"v");return t==tB||t==tD?tR:(J(t>=tL,"invalid EIP-155 v","v",e),(t-tL)/tM)}static getChainIdV(e,t){return tk(e)*tM+BigInt(35+t-27)}static getNormalizedV(e){let t=tk(e);return t===tR||t===tB?27:t===tN||t===tD?28:(J(t>=tL,"invalid v","v",e),t&tN?27:28)}static from(e){function t(t,r){J(t,r,"signature",e)}if(null==e)return new tj(tU,tO,tO,27);if("string"==typeof e){let r=er(e,"signature");if(64===r.length){let e=ea(r.slice(0,32)),t=r.slice(32,64),n=128&t[0]?28:27;return t[0]&=127,new tj(tU,e,ea(t),n)}if(65===r.length){let e=ea(r.slice(0,32)),n=r.slice(32,64);t((128&n[0])==0,"non-canonical s");let i=tj.getNormalizedV(r[64]);return new tj(tU,e,ea(n),i)}t(!1,"invalid raw signature length")}if(e instanceof tj)return e.clone();let r=e.r;t(null!=r,"missing r");let n=tF(r),i=function(e,r){if(null!=e)return tF(e);if(null!=r){t(ei(r,32),"invalid yParityAndS");let e=er(r);return e[0]&=127,ea(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t((128&er(i)[0])==0,"non-canonical s");let{networkV:s,v:a}=function(e,r,n){if(null!=e){let t=tk(e);return{networkV:t>=tL?t:void 0,v:tj.getNormalizedV(t)}}if(null!=r)return t(ei(r,32),"invalid yParityAndS"),{v:128&er(r)[0]?28:27};if(null!=n){switch(tT(n,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),o=new tj(tU,n,i,a);return s&&(o.#n=s),t(null==e.yParity||tT(e.yParity,"sig.yParity")===o.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===o.yParityAndS,"yParityAndS mismatch"),o}}class tz{#i;constructor(e){J(32===el(e),"invalid private key","privateKey","[REDACTED]"),this.#i=ea(e)}get privateKey(){return this.#i}get publicKey(){return tz.computePublicKey(this.#i)}get compressedPublicKey(){return tz.computePublicKey(this.#i,!0)}sign(e){J(32===el(e),"invalid digest length","digest",e);let t=tg.sign(en(e),en(this.#i),{lowS:!0});return tj.from({r:t_(t.r,32),s:t_(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=tz.computePublicKey(e);return ea(tg.getSharedSecret(en(this.#i),er(t),!1))}static computePublicKey(e,t){let r=er(e,"key");if(32===r.length)return ea(tg.getPublicKey(r,!!t));if(64===r.length){let e=new Uint8Array(65);e[0]=4,e.set(r,1),r=e}return ea(tg.ProjectivePoint.fromHex(r).toRawBytes(t))}static recoverPublicKey(e,t){J(32===el(e),"invalid digest length","digest",e);let r=tj.from(t),n=tg.Signature.fromCompact(en(eo([r.r,r.s]))),i=(n=n.addRecoveryBit(r.yParity)).recoverPublicKey(en(e));return J(null!=i,"invalid signature for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,r){let n=tg.ProjectivePoint.fromHex(tz.computePublicKey(e).substring(2)),i=tg.ProjectivePoint.fromHex(tz.computePublicKey(t).substring(2));return"0x"+n.add(i).toHex(!!r)}}function tH(e,t,r,n,i){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return"OVERRUN"===e?r.length-t-1:0}let tG=Object.freeze({error:function(e,t,r,n,i){J(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:tH,replace:function(e,t,r,n,i){return"OVERLONG"===e?(J("number"==typeof i,"invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),tH(e,t,r,n,i))}});function t$(e,t){if(J("string"==typeof e,"invalid string value","str",e),null!=t)Z(X.indexOf(t)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:t}}),e=e.normalize(t);let r=[];for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if((64512&n)==55296){t++;let i=e.charCodeAt(t);J(t<e.length&&(64512&i)==56320,"invalid surrogate pair","str",e);let s=65536+((1023&n)<<10)+(1023&i);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return new Uint8Array(r)}function tV(e,t){var r,n,i;let s;return"string"==typeof(r=e)&&(r=t$(r)),n=ep(eo([t$("\x19Ethereum Signed Message:\n"),t$(String(r.length)),r])),ew(ep("0x"+("string"==typeof(i=tz.recoverPublicKey(n,t))?tz.computePublicKey(i,!1):i.publicKey).substring(4)).substring(26))}!function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(s||(s={})),(a||(a={})).mergeShapes=(e,t)=>({...e,...t});let tq=s.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tK=e=>{switch(typeof e){case"undefined":return tq.undefined;case"string":return tq.string;case"number":return Number.isNaN(e)?tq.nan:tq.number;case"boolean":return tq.boolean;case"function":return tq.function;case"bigint":return tq.bigint;case"symbol":return tq.symbol;case"object":if(Array.isArray(e))return tq.array;if(null===e)return tq.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return tq.promise;if("undefined"!=typeof Map&&e instanceof Map)return tq.map;if("undefined"!=typeof Set&&e instanceof Set)return tq.set;if("undefined"!=typeof Date&&e instanceof Date)return tq.date;return tq.object;default:return tq.unknown}},tW=s.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class tQ extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof tQ))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,s.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}tQ.create=e=>new tQ(e);let tZ=(e,t)=>{let r;switch(e.code){case tW.invalid_type:r=e.received===tq.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case tW.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,s.jsonStringifyReplacer)}`;break;case tW.unrecognized_keys:r=`Unrecognized key(s) in object: ${s.joinValues(e.keys,", ")}`;break;case tW.invalid_union:r="Invalid input";break;case tW.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${s.joinValues(e.options)}`;break;case tW.invalid_enum_value:r=`Invalid enum value. Expected ${s.joinValues(e.options)}, received '${e.received}'`;break;case tW.invalid_arguments:r="Invalid function arguments";break;case tW.invalid_return_type:r="Invalid function return type";break;case tW.invalid_date:r="Invalid date";break;case tW.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:s.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case tW.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case tW.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case tW.custom:r="Invalid input";break;case tW.invalid_intersection_types:r="Intersection results could not be merged";break;case tW.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case tW.not_finite:r="Number must be finite";break;default:r=t.defaultError,s.assertNever(e)}return{message:r}},tJ=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}};function tY(e,t){let r=tJ({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,tZ,tZ==tZ?void 0:tZ].filter(e=>!!e)});e.common.issues.push(r)}class tX{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return t0;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return tX.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return t0;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let t0=Object.freeze({status:"aborted"}),t1=e=>({status:"dirty",value:e}),t2=e=>({status:"valid",value:e}),t3=e=>"aborted"===e.status,t4=e=>"dirty"===e.status,t6=e=>"valid"===e.status,t5=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(o||(o={}));class t8{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let t7=(e,t)=>{if(t6(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new tQ(e.common.issues);return this._error=t,this._error}}};function t9(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??i.defaultError}:void 0===i.data?{message:s??n??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:s??r??i.defaultError}},description:i}}class re{get description(){return this._def.description}_getType(e){return tK(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:tK(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new tX,ctx:{common:e.parent.common,data:e.data,parsedType:tK(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(t5(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tK(e)},n=this._parseSync({data:e,path:r.path,parent:r});return t7(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tK(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return t6(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>t6(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tK(e)},n=this._parse({data:e,path:r.path,parent:r});return t7(r,await (t5(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),s=()=>n.addIssue({code:tW.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new rK({schema:this,typeName:l.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return rW.create(this,this._def)}nullable(){return rQ.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return rC.create(this)}promise(){return rq.create(this,this._def)}or(e){return rR.create([this,e],this._def)}and(e){return rB.create(this,e,this._def)}transform(e){return new rK({...t9(this._def),schema:this,typeName:l.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new rZ({...t9(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:l.ZodDefault})}brand(){return new rX({typeName:l.ZodBranded,type:this,...t9(this._def)})}catch(e){return new rJ({...t9(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:l.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return r0.create(this,e)}readonly(){return r1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let rt=/^c[^\s-]{8,}$/i,rr=/^[0-9a-z]+$/,rn=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ri=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,rs=/^[a-z0-9_-]{21}$/i,ra=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ro=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,rl=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,rc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ru=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,rd=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,rh=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rf=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,rp=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,rg="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",rm=RegExp(`^${rg}$`);function rb(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}class ry extends re{_parse(e){var t,r,i,a;let o;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==tq.string){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.string,received:t.parsedType}),t0}let l=new tX;for(let c of this._def.checks)if("min"===c.kind)e.data.length<c.value&&(tY(o=this._getOrReturnCtx(e,o),{code:tW.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("max"===c.kind)e.data.length>c.value&&(tY(o=this._getOrReturnCtx(e,o),{code:tW.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),l.dirty());else if("length"===c.kind){let t=e.data.length>c.value,r=e.data.length<c.value;(t||r)&&(o=this._getOrReturnCtx(e,o),t?tY(o,{code:tW.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):r&&tY(o,{code:tW.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),l.dirty())}else if("email"===c.kind)rl.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"email",code:tW.invalid_string,message:c.message}),l.dirty());else if("emoji"===c.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"emoji",code:tW.invalid_string,message:c.message}),l.dirty());else if("uuid"===c.kind)ri.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"uuid",code:tW.invalid_string,message:c.message}),l.dirty());else if("nanoid"===c.kind)rs.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"nanoid",code:tW.invalid_string,message:c.message}),l.dirty());else if("cuid"===c.kind)rt.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"cuid",code:tW.invalid_string,message:c.message}),l.dirty());else if("cuid2"===c.kind)rr.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"cuid2",code:tW.invalid_string,message:c.message}),l.dirty());else if("ulid"===c.kind)rn.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"ulid",code:tW.invalid_string,message:c.message}),l.dirty());else if("url"===c.kind)try{new URL(e.data)}catch{tY(o=this._getOrReturnCtx(e,o),{validation:"url",code:tW.invalid_string,message:c.message}),l.dirty()}else"regex"===c.kind?(c.regex.lastIndex=0,c.regex.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"regex",code:tW.invalid_string,message:c.message}),l.dirty())):"trim"===c.kind?e.data=e.data.trim():"includes"===c.kind?e.data.includes(c.value,c.position)||(tY(o=this._getOrReturnCtx(e,o),{code:tW.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),l.dirty()):"toLowerCase"===c.kind?e.data=e.data.toLowerCase():"toUpperCase"===c.kind?e.data=e.data.toUpperCase():"startsWith"===c.kind?e.data.startsWith(c.value)||(tY(o=this._getOrReturnCtx(e,o),{code:tW.invalid_string,validation:{startsWith:c.value},message:c.message}),l.dirty()):"endsWith"===c.kind?e.data.endsWith(c.value)||(tY(o=this._getOrReturnCtx(e,o),{code:tW.invalid_string,validation:{endsWith:c.value},message:c.message}),l.dirty()):"datetime"===c.kind?(function(e){let t=`${rg}T${rb(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)})(c).test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{code:tW.invalid_string,validation:"datetime",message:c.message}),l.dirty()):"date"===c.kind?rm.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{code:tW.invalid_string,validation:"date",message:c.message}),l.dirty()):"time"===c.kind?RegExp(`^${rb(c)}$`).test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{code:tW.invalid_string,validation:"time",message:c.message}),l.dirty()):"duration"===c.kind?ro.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"duration",code:tW.invalid_string,message:c.message}),l.dirty()):"ip"===c.kind?(t=e.data,!(("v4"===(r=c.version)||!r)&&rc.test(t)||("v6"===r||!r)&&rd.test(t))&&(tY(o=this._getOrReturnCtx(e,o),{validation:"ip",code:tW.invalid_string,message:c.message}),l.dirty())):"jwt"===c.kind?!function(e,t){if(!ra.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)return!1;return!0}catch{return!1}}(e.data,c.alg)&&(tY(o=this._getOrReturnCtx(e,o),{validation:"jwt",code:tW.invalid_string,message:c.message}),l.dirty()):"cidr"===c.kind?(i=e.data,!(("v4"===(a=c.version)||!a)&&ru.test(i)||("v6"===a||!a)&&rh.test(i))&&(tY(o=this._getOrReturnCtx(e,o),{validation:"cidr",code:tW.invalid_string,message:c.message}),l.dirty())):"base64"===c.kind?rf.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"base64",code:tW.invalid_string,message:c.message}),l.dirty()):"base64url"===c.kind?rp.test(e.data)||(tY(o=this._getOrReturnCtx(e,o),{validation:"base64url",code:tW.invalid_string,message:c.message}),l.dirty()):s.assertNever(c);return{status:l.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:tW.invalid_string,...o.errToObj(r)})}_addCheck(e){return new ry({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...o.errToObj(e)})}url(e){return this._addCheck({kind:"url",...o.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...o.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...o.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...o.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...o.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...o.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...o.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...o.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...o.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...o.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...o.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...o.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...o.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...o.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...o.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...o.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...o.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...o.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...o.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...o.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...o.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...o.errToObj(t)})}nonempty(e){return this.min(1,o.errToObj(e))}trim(){return new ry({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ry({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ry({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ry.create=e=>new ry({checks:[],typeName:l.ZodString,coerce:e?.coerce??!1,...t9(e)});class rx extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==tq.number){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.number,received:t.parsedType}),t0}let r=new tX;for(let n of this._def.checks)"int"===n.kind?s.isInteger(e.data)||(tY(t=this._getOrReturnCtx(e,t),{code:tW.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(tY(t=this._getOrReturnCtx(e,t),{code:tW.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(tY(t=this._getOrReturnCtx(e,t),{code:tW.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}(e.data,n.value)&&(tY(t=this._getOrReturnCtx(e,t),{code:tW.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(tY(t=this._getOrReturnCtx(e,t),{code:tW.not_finite,message:n.message}),r.dirty()):s.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,o.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.toString(t))}setLimit(e,t,r,n){return new rx({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:o.toString(n)}]})}_addCheck(e){return new rx({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:o.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:o.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:o.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:o.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:o.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:o.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:o.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:o.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&s.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}rx.create=e=>new rx({checks:[],typeName:l.ZodNumber,coerce:e?.coerce||!1,...t9(e)});class rw extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==tq.bigint)return this._getInvalidInput(e);let r=new tX;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(tY(t=this._getOrReturnCtx(e,t),{code:tW.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(tY(t=this._getOrReturnCtx(e,t),{code:tW.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(tY(t=this._getOrReturnCtx(e,t),{code:tW.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):s.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.bigint,received:t.parsedType}),t0}gte(e,t){return this.setLimit("min",e,!0,o.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.toString(t))}setLimit(e,t,r,n){return new rw({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:o.toString(n)}]})}_addCheck(e){return new rw({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:o.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:o.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:o.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:o.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}rw.create=e=>new rw({checks:[],typeName:l.ZodBigInt,coerce:e?.coerce??!1,...t9(e)});class rv extends re{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==tq.boolean){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.boolean,received:t.parsedType}),t0}return t2(e.data)}}rv.create=e=>new rv({typeName:l.ZodBoolean,coerce:e?.coerce||!1,...t9(e)});class rA extends re{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==tq.date){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.date,received:t.parsedType}),t0}if(Number.isNaN(e.data.getTime()))return tY(this._getOrReturnCtx(e),{code:tW.invalid_date}),t0;let r=new tX;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(tY(t=this._getOrReturnCtx(e,t),{code:tW.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(tY(t=this._getOrReturnCtx(e,t),{code:tW.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):s.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new rA({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:o.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:o.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}rA.create=e=>new rA({checks:[],coerce:e?.coerce||!1,typeName:l.ZodDate,...t9(e)});class rE extends re{_parse(e){if(this._getType(e)!==tq.symbol){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.symbol,received:t.parsedType}),t0}return t2(e.data)}}rE.create=e=>new rE({typeName:l.ZodSymbol,...t9(e)});class rk extends re{_parse(e){if(this._getType(e)!==tq.undefined){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.undefined,received:t.parsedType}),t0}return t2(e.data)}}rk.create=e=>new rk({typeName:l.ZodUndefined,...t9(e)});class rP extends re{_parse(e){if(this._getType(e)!==tq.null){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.null,received:t.parsedType}),t0}return t2(e.data)}}rP.create=e=>new rP({typeName:l.ZodNull,...t9(e)});class rS extends re{constructor(){super(...arguments),this._any=!0}_parse(e){return t2(e.data)}}rS.create=e=>new rS({typeName:l.ZodAny,...t9(e)});class rI extends re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return t2(e.data)}}rI.create=e=>new rI({typeName:l.ZodUnknown,...t9(e)});class rT extends re{_parse(e){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.never,received:t.parsedType}),t0}}rT.create=e=>new rT({typeName:l.ZodNever,...t9(e)});class r_ extends re{_parse(e){if(this._getType(e)!==tq.undefined){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.void,received:t.parsedType}),t0}return t2(e.data)}}r_.create=e=>new r_({typeName:l.ZodVoid,...t9(e)});class rC extends re{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==tq.array)return tY(t,{code:tW.invalid_type,expected:tq.array,received:t.parsedType}),t0;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(tY(t,{code:e?tW.too_big:tW.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(tY(t,{code:tW.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(tY(t,{code:tW.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new t8(t,e,t.path,r)))).then(e=>tX.mergeArray(r,e));let i=[...t.data].map((e,r)=>n.type._parseSync(new t8(t,e,t.path,r)));return tX.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new rC({...this._def,minLength:{value:e,message:o.toString(t)}})}max(e,t){return new rC({...this._def,maxLength:{value:e,message:o.toString(t)}})}length(e,t){return new rC({...this._def,exactLength:{value:e,message:o.toString(t)}})}nonempty(e){return this.min(1,e)}}rC.create=(e,t)=>new rC({type:e,minLength:null,maxLength:null,exactLength:null,typeName:l.ZodArray,...t9(t)});class rO extends re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=s.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==tq.object){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.object,received:t.parsedType}),t0}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof rT&&"strip"===this._def.unknownKeys))for(let e in r.data)i.includes(e)||s.push(e);let a=[];for(let e of i){let t=n[e],i=r.data[e];a.push({key:{status:"valid",value:e},value:t._parse(new t8(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof rT){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of s)a.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(tY(r,{code:tW.unrecognized_keys,keys:s}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of s){let n=r.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new t8(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>tX.mergeObjectSync(t,e)):tX.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return o.errToObj,new rO({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:o.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new rO({...this._def,unknownKeys:"strip"})}passthrough(){return new rO({...this._def,unknownKeys:"passthrough"})}extend(e){return new rO({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new rO({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:l.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new rO({...this._def,catchall:e})}pick(e){let t={};for(let r of s.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new rO({...this._def,shape:()=>t})}omit(e){let t={};for(let r of s.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new rO({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof rO){let r={};for(let n in t.shape){let i=t.shape[n];r[n]=rW.create(e(i))}return new rO({...t._def,shape:()=>r})}if(t instanceof rC)return new rC({...t._def,type:e(t.element)});if(t instanceof rW)return rW.create(e(t.unwrap()));if(t instanceof rQ)return rQ.create(e(t.unwrap()));if(t instanceof rD)return rD.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of s.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new rO({...this._def,shape:()=>t})}required(e){let t={};for(let r of s.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof rW;)e=e._def.innerType;t[r]=e}return new rO({...this._def,shape:()=>t})}keyof(){return rG(s.objectKeys(this.shape))}}rO.create=(e,t)=>new rO({shape:()=>e,unknownKeys:"strip",catchall:rT.create(),typeName:l.ZodObject,...t9(t)}),rO.strictCreate=(e,t)=>new rO({shape:()=>e,unknownKeys:"strict",catchall:rT.create(),typeName:l.ZodObject,...t9(t)}),rO.lazycreate=(e,t)=>new rO({shape:e,unknownKeys:"strip",catchall:rT.create(),typeName:l.ZodObject,...t9(t)});class rR extends re{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new tQ(e.ctx.common.issues));return tY(t,{code:tW.invalid_union,unionErrors:r}),t0});{let e;let n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new tQ(e));return tY(t,{code:tW.invalid_union,unionErrors:i}),t0}}get options(){return this._def.options}}rR.create=(e,t)=>new rR({options:e,typeName:l.ZodUnion,...t9(t)});let rN=e=>{if(e instanceof rz)return rN(e.schema);if(e instanceof rK)return rN(e.innerType());if(e instanceof rH)return[e.value];if(e instanceof r$)return e.options;if(e instanceof rV)return s.objectValues(e.enum);else if(e instanceof rZ)return rN(e._def.innerType);else if(e instanceof rk)return[void 0];else if(e instanceof rP)return[null];else if(e instanceof rW)return[void 0,...rN(e.unwrap())];else if(e instanceof rQ)return[null,...rN(e.unwrap())];else if(e instanceof rX)return rN(e.unwrap());else if(e instanceof r1)return rN(e.unwrap());else if(e instanceof rJ)return rN(e._def.innerType);else return[]};class rM extends re{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==tq.object)return tY(t,{code:tW.invalid_type,expected:tq.object,received:t.parsedType}),t0;let r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(tY(t,{code:tW.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),t0)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=rN(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new rM({typeName:l.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...t9(r)})}}class rB extends re{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(t3(e)||t3(n))return t0;let i=function e(t,r){let n=tK(t),i=tK(r);if(t===r)return{valid:!0,data:t};if(n===tq.object&&i===tq.object){let n=s.objectKeys(r),i=s.objectKeys(t).filter(e=>-1!==n.indexOf(e)),a={...t,...r};for(let n of i){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1};a[n]=i.data}return{valid:!0,data:a}}if(n===tq.array&&i===tq.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let s=e(t[i],r[i]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}if(n===tq.date&&i===tq.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,n.value);return i.valid?((t4(e)||t4(n))&&t.dirty(),{status:t.value,value:i.data}):(tY(r,{code:tW.invalid_intersection_types}),t0)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}rB.create=(e,t,r)=>new rB({left:e,right:t,typeName:l.ZodIntersection,...t9(r)});class rD extends re{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tq.array)return tY(r,{code:tW.invalid_type,expected:tq.array,received:r.parsedType}),t0;if(r.data.length<this._def.items.length)return tY(r,{code:tW.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t0;!this._def.rest&&r.data.length>this._def.items.length&&(tY(r,{code:tW.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new t8(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>tX.mergeArray(t,e)):tX.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new rD({...this._def,rest:e})}}rD.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new rD({items:e,typeName:l.ZodTuple,rest:null,...t9(t)})};class rL extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tq.object)return tY(r,{code:tW.invalid_type,expected:tq.object,received:r.parsedType}),t0;let n=[],i=this._def.keyType,s=this._def.valueType;for(let e in r.data)n.push({key:i._parse(new t8(r,e,r.path,e)),value:s._parse(new t8(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?tX.mergeObjectAsync(t,n):tX.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new rL(t instanceof re?{keyType:e,valueType:t,typeName:l.ZodRecord,...t9(r)}:{keyType:ry.create(),valueType:e,typeName:l.ZodRecord,...t9(t)})}}class rU extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tq.map)return tY(r,{code:tW.invalid_type,expected:tq.map,received:r.parsedType}),t0;let n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([e,t],s)=>({key:n._parse(new t8(r,e,r.path,[s,"key"])),value:i._parse(new t8(r,t,r.path,[s,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of s){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return t0;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of s){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return t0;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}rU.create=(e,t,r)=>new rU({valueType:t,keyType:e,typeName:l.ZodMap,...t9(r)});class rF extends re{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==tq.set)return tY(r,{code:tW.invalid_type,expected:tq.set,received:r.parsedType}),t0;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(tY(r,{code:tW.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(tY(r,{code:tW.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function s(e){let r=new Set;for(let n of e){if("aborted"===n.status)return t0;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let a=[...r.data.values()].map((e,t)=>i._parse(new t8(r,e,r.path,t)));return r.common.async?Promise.all(a).then(e=>s(e)):s(a)}min(e,t){return new rF({...this._def,minSize:{value:e,message:o.toString(t)}})}max(e,t){return new rF({...this._def,maxSize:{value:e,message:o.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}rF.create=(e,t)=>new rF({valueType:e,minSize:null,maxSize:null,typeName:l.ZodSet,...t9(t)});class rj extends re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==tq.function)return tY(t,{code:tW.invalid_type,expected:tq.function,received:t.parsedType}),t0;function r(e,r){return tJ({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tZ,tZ].filter(e=>!!e),issueData:{code:tW.invalid_arguments,argumentsError:r}})}function n(e,r){return tJ({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,tZ,tZ].filter(e=>!!e),issueData:{code:tW.invalid_return_type,returnTypeError:r}})}let i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof rq){let e=this;return t2(async function(...t){let a=new tQ([]),o=await e._def.args.parseAsync(t,i).catch(e=>{throw a.addIssue(r(t,e)),a}),l=await Reflect.apply(s,this,o);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw a.addIssue(n(l,e)),a})})}{let e=this;return t2(function(...t){let a=e._def.args.safeParse(t,i);if(!a.success)throw new tQ([r(t,a.error)]);let o=Reflect.apply(s,this,a.data),l=e._def.returns.safeParse(o,i);if(!l.success)throw new tQ([n(o,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rj({...this._def,args:rD.create(e).rest(rI.create())})}returns(e){return new rj({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new rj({args:e||rD.create([]).rest(rI.create()),returns:t||rI.create(),typeName:l.ZodFunction,...t9(r)})}}class rz extends re{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}rz.create=(e,t)=>new rz({getter:e,typeName:l.ZodLazy,...t9(t)});class rH extends re{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return tY(t,{received:t.data,code:tW.invalid_literal,expected:this._def.value}),t0}return{status:"valid",value:e.data}}get value(){return this._def.value}}function rG(e,t){return new r$({values:e,typeName:l.ZodEnum,...t9(t)})}rH.create=(e,t)=>new rH({value:e,typeName:l.ZodLiteral,...t9(t)});class r$ extends re{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return tY(t,{expected:s.joinValues(r),received:t.parsedType,code:tW.invalid_type}),t0}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return tY(t,{received:t.data,code:tW.invalid_enum_value,options:r}),t0}return t2(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return r$.create(e,{...this._def,...t})}exclude(e,t=this._def){return r$.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}r$.create=rG;class rV extends re{_parse(e){let t=s.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==tq.string&&r.parsedType!==tq.number){let e=s.objectValues(t);return tY(r,{expected:s.joinValues(e),received:r.parsedType,code:tW.invalid_type}),t0}if(this._cache||(this._cache=new Set(s.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=s.objectValues(t);return tY(r,{received:r.data,code:tW.invalid_enum_value,options:e}),t0}return t2(e.data)}get enum(){return this._def.values}}rV.create=(e,t)=>new rV({values:e,typeName:l.ZodNativeEnum,...t9(t)});class rq extends re{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==tq.promise&&!1===t.common.async?(tY(t,{code:tW.invalid_type,expected:tq.promise,received:t.parsedType}),t0):t2((t.parsedType===tq.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}rq.create=(e,t)=>new rq({type:e,typeName:l.ZodPromise,...t9(t)});class rK extends re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===l.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{tY(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return t0;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?t0:"dirty"===n.status||"dirty"===t.value?t1(n.value):n});{if("aborted"===t.value)return t0;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?t0:"dirty"===n.status||"dirty"===t.value?t1(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?t0:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?t0:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>t6(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):t0);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!t6(e))return t0;let s=n.transform(e.value,i);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}s.assertNever(n)}}rK.create=(e,t,r)=>new rK({schema:e,typeName:l.ZodEffects,effect:t,...t9(r)}),rK.createWithPreprocess=(e,t,r)=>new rK({schema:t,effect:{type:"preprocess",transform:e},typeName:l.ZodEffects,...t9(r)});class rW extends re{_parse(e){return this._getType(e)===tq.undefined?t2(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rW.create=(e,t)=>new rW({innerType:e,typeName:l.ZodOptional,...t9(t)});class rQ extends re{_parse(e){return this._getType(e)===tq.null?t2(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rQ.create=(e,t)=>new rQ({innerType:e,typeName:l.ZodNullable,...t9(t)});class rZ extends re{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===tq.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}rZ.create=(e,t)=>new rZ({innerType:e,typeName:l.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...t9(t)});class rJ extends re{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return t5(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new tQ(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new tQ(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rJ.create=(e,t)=>new rJ({innerType:e,typeName:l.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...t9(t)});class rY extends re{_parse(e){if(this._getType(e)!==tq.nan){let t=this._getOrReturnCtx(e);return tY(t,{code:tW.invalid_type,expected:tq.nan,received:t.parsedType}),t0}return{status:"valid",value:e.data}}}rY.create=e=>new rY({typeName:l.ZodNaN,...t9(e)}),Symbol("zod_brand");class rX extends re{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class r0 extends re{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?t0:"dirty"===e.status?(t.dirty(),t1(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?t0:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new r0({in:e,out:t,typeName:l.ZodPipeline})}}class r1 extends re{_parse(e){let t=this._def.innerType._parse(e),r=e=>(t6(e)&&(e.value=Object.freeze(e.value)),e);return t5(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}r1.create=(e,t)=>new r1({innerType:e,typeName:l.ZodReadonly,...t9(t)}),rO.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(l||(l={}));let r2=ry.create,r3=rx.create;rY.create,rw.create;let r4=rv.create;rA.create,rE.create,rk.create,rP.create;let r6=rS.create;rI.create,rT.create,r_.create;let r5=rC.create,r8=rO.create;rO.strictCreate;let r7=rR.create,r9=rM.create;rB.create,rD.create,rL.create,rU.create,rF.create;let ne=rj.create;rz.create;let nt=rH.create,nr=r$.create;rV.create;let nn=rq.create;rK.create,rW.create,rQ.create,rK.createWithPreprocess,r0.create;let ni=nr(["eq","gt","gte","lt","lte"]),ns=r8({value:r2(),compareType:ni}),na=r8({contractAddress:r2(),value:r2(),compareType:ni}),no=r8({tokenAddress:r2(),value:r2(),compareType:ni}),nl=r8({value:r2(),compareType:ni}),nc=r8({nftAddress:r2()}),nu=r8({nftAddress:r2(),tokenId:r2()}),nd=r8({}),nh=r8({}),nf=r8({contractAddress:r2(),functionName:r2(),abi:r5(r6()),requiredResult:r6(),compareType:ni}),np=r8({name:r2(),success:r4(),error:r2().optional()}),ng=ne().args(r2().optional()).returns(r7([np,nn(np)])),nm=r9("type",[r8({type:nt("walletBalance"),chainId:r2(),params:ns}),r8({type:nt("contractBalance"),chainId:r2(),params:na}),r8({type:nt("erc20Balance"),chainId:r2(),params:no}),r8({type:nt("numTransactions"),chainId:r2(),params:nl}),r8({type:nt("hasNFT"),chainId:r2(),params:nc}),r8({type:nt("hasNFTTokenId"),chainId:r2(),params:nu}),r8({type:nt("addressIsContract"),chainId:r2(),params:nd}),r8({type:nt("addressIsEOA"),chainId:r2(),params:nh}),r8({type:nt("callContract"),chainId:r2(),params:nf}),r8({type:nt("custom"),chainId:r2(),params:r8({})})]);r8({rule:ng,definition:nm}),r5(nm);let nb={};function ny(e,t){let r=!1;return t<0&&(r=!0,t*=-1),new nv(nb,`${r?"":"u"}int${t}`,e,{signed:r,width:t})}function nx(e,t){return new nv(nb,`bytes${t||""}`,e,{size:t})}let nw=Symbol.for("_ethers_typed");class nv{type;value;#s;_typedSymbol;constructor(e,t,r,n){null==n&&(n=null),ee(nb,e,"Typed"),V(this,{_typedSymbol:nw,type:t,value:r}),this.#s=n,this.format()}format(){if("array"===this.type||"dynamicArray"===this.type)throw Error("");return"tuple"===this.type?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#s}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#s?-1:!1===this.#s?this.value.length:null}static from(e,t){return new nv(nb,e,t)}static uint8(e){return ny(e,8)}static uint16(e){return ny(e,16)}static uint24(e){return ny(e,24)}static uint32(e){return ny(e,32)}static uint40(e){return ny(e,40)}static uint48(e){return ny(e,48)}static uint56(e){return ny(e,56)}static uint64(e){return ny(e,64)}static uint72(e){return ny(e,72)}static uint80(e){return ny(e,80)}static uint88(e){return ny(e,88)}static uint96(e){return ny(e,96)}static uint104(e){return ny(e,104)}static uint112(e){return ny(e,112)}static uint120(e){return ny(e,120)}static uint128(e){return ny(e,128)}static uint136(e){return ny(e,136)}static uint144(e){return ny(e,144)}static uint152(e){return ny(e,152)}static uint160(e){return ny(e,160)}static uint168(e){return ny(e,168)}static uint176(e){return ny(e,176)}static uint184(e){return ny(e,184)}static uint192(e){return ny(e,192)}static uint200(e){return ny(e,200)}static uint208(e){return ny(e,208)}static uint216(e){return ny(e,216)}static uint224(e){return ny(e,224)}static uint232(e){return ny(e,232)}static uint240(e){return ny(e,240)}static uint248(e){return ny(e,248)}static uint256(e){return ny(e,256)}static uint(e){return ny(e,256)}static int8(e){return ny(e,-8)}static int16(e){return ny(e,-16)}static int24(e){return ny(e,-24)}static int32(e){return ny(e,-32)}static int40(e){return ny(e,-40)}static int48(e){return ny(e,-48)}static int56(e){return ny(e,-56)}static int64(e){return ny(e,-64)}static int72(e){return ny(e,-72)}static int80(e){return ny(e,-80)}static int88(e){return ny(e,-88)}static int96(e){return ny(e,-96)}static int104(e){return ny(e,-104)}static int112(e){return ny(e,-112)}static int120(e){return ny(e,-120)}static int128(e){return ny(e,-128)}static int136(e){return ny(e,-136)}static int144(e){return ny(e,-144)}static int152(e){return ny(e,-152)}static int160(e){return ny(e,-160)}static int168(e){return ny(e,-168)}static int176(e){return ny(e,-176)}static int184(e){return ny(e,-184)}static int192(e){return ny(e,-192)}static int200(e){return ny(e,-200)}static int208(e){return ny(e,-208)}static int216(e){return ny(e,-216)}static int224(e){return ny(e,-224)}static int232(e){return ny(e,-232)}static int240(e){return ny(e,-240)}static int248(e){return ny(e,-248)}static int256(e){return ny(e,-256)}static int(e){return ny(e,-256)}static bytes1(e){return nx(e,1)}static bytes2(e){return nx(e,2)}static bytes3(e){return nx(e,3)}static bytes4(e){return nx(e,4)}static bytes5(e){return nx(e,5)}static bytes6(e){return nx(e,6)}static bytes7(e){return nx(e,7)}static bytes8(e){return nx(e,8)}static bytes9(e){return nx(e,9)}static bytes10(e){return nx(e,10)}static bytes11(e){return nx(e,11)}static bytes12(e){return nx(e,12)}static bytes13(e){return nx(e,13)}static bytes14(e){return nx(e,14)}static bytes15(e){return nx(e,15)}static bytes16(e){return nx(e,16)}static bytes17(e){return nx(e,17)}static bytes18(e){return nx(e,18)}static bytes19(e){return nx(e,19)}static bytes20(e){return nx(e,20)}static bytes21(e){return nx(e,21)}static bytes22(e){return nx(e,22)}static bytes23(e){return nx(e,23)}static bytes24(e){return nx(e,24)}static bytes25(e){return nx(e,25)}static bytes26(e){return nx(e,26)}static bytes27(e){return nx(e,27)}static bytes28(e){return nx(e,28)}static bytes29(e){return nx(e,29)}static bytes30(e){return nx(e,30)}static bytes31(e){return nx(e,31)}static bytes32(e){return nx(e,32)}static address(e){return new nv(nb,"address",e)}static bool(e){return new nv(nb,"bool",!!e)}static bytes(e){return new nv(nb,"bytes",e)}static string(e){return new nv(nb,"string",e)}static array(e,t){throw Error("not implemented yet")}static tuple(e,t){throw Error("not implemented yet")}static overrides(e){return new nv(nb,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===nw}static dereference(e,t){if(nv.isTyped(e)){if(e.type!==t)throw Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}function nA(e){return ep(t$(e))}let nE=new Uint8Array(32),nk=["then"],nP={},nS=new WeakMap;function nI(e){return nS.get(e)}function nT(e,t){let r=Error(`deferred error during ABI decoding triggered accessing ${e}`);throw r.error=t,r}class n_ extends Array{#a;constructor(...e){var t,r;let n=e[0],i=e[1],s=(e[2]||[]).slice(),a=!0;n!==nP&&(i=e,s=[],a=!1),super(i.length),i.forEach((e,t)=>{this[t]=e});let o=s.reduce((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e),new Map);if(t=Object.freeze(i.map((e,t)=>{let r=s[t];return null!=r&&1===o.get(r)?r:null})),nS.set(this,t),this.#a=[],null==this.#a&&this.#a,!a)return;Object.freeze(this);let l=new Proxy(this,{get:(e,t,r)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){let r=tT(t,"%index");if(r<0||r>=this.length)throw RangeError("out of result range");let n=e[r];return n instanceof Error&&nT(`index ${r}`,n),n}if(nk.indexOf(t)>=0)return Reflect.get(e,t,r);let n=e[t];if(n instanceof Function)return function(...t){return n.apply(this===r?e:this,t)};if(!(t in e))return e.getValue.apply(this===r?e:this,[t])}return Reflect.get(e,t,r)}});return r=nI(this),nS.set(l,r),l}toArray(e){let t=[];return this.forEach((r,n)=>{r instanceof Error&&nT(`index ${n}`,r),e&&r instanceof n_&&(r=r.toArray(e)),t.push(r)}),t}toObject(e){let t=nI(this);return t.reduce((r,n,i)=>(Z(null!=n,`value at index ${i} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),function e(t,r,n){return t.indexOf(null)>=0?r.map((t,r)=>t instanceof n_?e(nI(t),t,n):t):t.reduce((t,i,s)=>{let a=r.getValue(i);return i in t||(n&&a instanceof n_&&(a=e(nI(a),a,n)),t[i]=a),t},{})}(t,this,e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);let r=nI(this),n=[],i=[];for(let s=e;s<t;s++)n.push(this[s]),i.push(r[s]);return new n_(nP,n,i)}filter(e,t){let r=nI(this),n=[],i=[];for(let s=0;s<this.length;s++){let a=this[s];a instanceof Error&&nT(`index ${s}`,a),e.call(t,a,s,this)&&(n.push(a),i.push(r[s]))}return new n_(nP,n,i)}map(e,t){let r=[];for(let n=0;n<this.length;n++){let i=this[n];i instanceof Error&&nT(`index ${n}`,i),r.push(e.call(t,i,n,this))}return r}getValue(e){let t=nI(this).indexOf(e);if(-1===t)return;let r=this[t];return r instanceof Error&&nT(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,t){return new n_(nP,e,t)}}function nC(e){let t=tC(e);return Z(t.length<=32,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:32,offset:t.length}),32!==t.length&&(t=en(eo([nE.slice(t.length%32),t]))),t}class nO{name;type;localName;dynamic;constructor(e,t,r,n){V(this,{name:e,type:t,localName:r,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){J(!1,e,this.localName,t)}}class nR{#o;#l;constructor(){this.#o=[],this.#l=0}get data(){return eo(this.#o)}get length(){return this.#l}#c(e){return this.#o.push(e),this.#l+=e.length,e.length}appendWriter(e){return this.#c(en(e.data))}writeBytes(e){let t=en(e),r=t.length%32;return r&&(t=en(eo([t,nE.slice(r)]))),this.#c(t)}writeValue(e){return this.#c(nC(e))}writeUpdatableValue(){let e=this.#o.length;return this.#o.push(nE),this.#l+=32,t=>{this.#o[e]=nC(t)}}}class nN{allowLoose;#o;#u;#d;#h;#f;constructor(e,t,r){V(this,{allowLoose:!!t}),this.#o=en(e),this.#d=0,this.#h=null,this.#f=null!=r?r:1024,this.#u=0}get data(){return ea(this.#o)}get dataLength(){return this.#o.length}get consumed(){return this.#u}get bytes(){return new Uint8Array(this.#o)}#p(e){if(this.#h)return this.#h.#p(e);this.#d+=e,Z(this.#f<1||this.#d<=this.#f*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#f} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:en(this.#o),offset:this.#u,length:e,info:{bytesRead:this.#d,dataLength:this.dataLength}})}#g(e,t,r){let n=32*Math.ceil(t/32);return this.#u+n>this.#o.length&&(this.allowLoose&&r&&this.#u+t<=this.#o.length?n=t:Z(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:en(this.#o),length:this.#o.length,offset:this.#u+n})),this.#o.slice(this.#u,this.#u+n)}subReader(e){let t=new nN(this.#o.slice(this.#u+e),this.allowLoose,this.#f);return t.#h=this,t}readBytes(e,t){let r=this.#g(0,e,!!t);return this.#p(e),this.#u+=r.length,r.slice(0,e)}readValue(){return tI(this.readBytes(32))}readIndex(){return tT(tI(this.readBytes(32)))}}class nM extends nO{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=nv.dereference(t,"string");try{r=ew(r)}catch(e){return this._throwError(e.message,t)}return e.writeValue(r)}decode(e){return ew(t_(e.readValue(),20))}}class nB extends nO{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function nD(e,t,r){let n=[];if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map(t=>{let n=t.localName;return Z(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),Z(!e[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),e[n]=!0,r[n]})}else J(!1,"invalid tuple value","tuple",r);J(t.length===n.length,"types/value length mismatch","tuple",r);let i=new nR,s=new nR,a=[];t.forEach((e,t)=>{let r=n[t];if(e.dynamic){let t=s.length;e.encode(s,r);let n=i.writeUpdatableValue();a.push(e=>{n(e+t)})}else e.encode(i,r)}),a.forEach(e=>{e(i.length)});let o=e.appendWriter(i);return o+e.appendWriter(s)}function nL(e,t){let r=[],n=[],i=e.subReader(0);return t.forEach(t=>{let s=null;if(t.dynamic){let r=e.readIndex(),n=i.subReader(r);try{s=t.decode(n)}catch(e){if(K(e,"BUFFER_OVERRUN"))throw e;(s=e).baseType=t.name,s.name=t.localName,s.type=t.type}}else try{s=t.decode(e)}catch(e){if(K(e,"BUFFER_OVERRUN"))throw e;(s=e).baseType=t.name,s.name=t.localName,s.type=t.type}if(void 0==s)throw Error("investigate");r.push(s),n.push(t.localName||null)}),n_.fromItems(r,n)}class nU extends nO{coder;length;constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),V(this,{coder:e,length:t})}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){let r=nv.dereference(t,"array");Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;-1===n&&(n=r.length,e.writeValue(r.length)),Y(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let e=0;e<r.length;e++)i.push(this.coder);return nD(e,i,r)}decode(e){let t=this.length;-1===t&&Z(32*(t=e.readIndex())<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:32*t,length:e.dataLength});let r=[];for(let e=0;e<t;e++)r.push(new nB(this.coder));return nL(e,r)}}class nF extends nO{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){let r=nv.dereference(t,"bool");return e.writeValue(+!!r)}decode(e){return!!e.readValue()}}class nj extends nO{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=en(t);let r=e.writeValue(t.length);return r+e.writeBytes(t)}decode(e){return e.readBytes(e.readIndex(),!0)}}class nz extends nj{constructor(e){super("bytes",e)}decode(e){return ea(super.decode(e))}}class nH extends nO{size;constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),V(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=en(nv.dereference(t,this.type));return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return ea(e.readBytes(this.size))}}let nG=new Uint8Array([]);class n$ extends nO{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(nG)}decode(e){return e.readBytes(0),null}}let nV=BigInt(0),nq=BigInt(1),nK=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class nW extends nO{size;signed;constructor(e,t,r){let n=(t?"int":"uint")+8*e;super(n,n,r,!1),V(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=tk(nv.dereference(t,this.type)),n=tE(nK,256);if(this.signed){let e=tE(n,8*this.size-1);(r>e||r<-(e+nq))&&this._throwError("value out-of-bounds",t),r=function(e,t){let r=tk(e,"value"),n=BigInt(tT(256,"width")),i=tA<<n-tA;return r<tv?(Z((r=-r)<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~r&(tA<<n)-tA)+tA):(Z(r<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),r)}(r,256)}else(r<nV||r>tE(n,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(r)}decode(e){let t=tE(e.readValue(),8*this.size);return this.signed&&(t=function(e,t){let r=tP(e,"value"),n=BigInt(tT(t,"width"));return(Z(r>>n===tv,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),r>>n-tA)?-((~r&(tA<<n)-tA)+tA):r}(t,8*this.size)),t}}class nQ extends nj{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,t$(nv.dereference(t,"string")))}decode(e){var t;return(function(e,t){null==t&&(t=tG.error);let r=er(e,"bytes"),n=[],i=0;for(;i<r.length;){let e=r[i++];if(e>>7==0){n.push(e);continue}let s=null,a=null;if((224&e)==192)s=1,a=127;else if((240&e)==224)s=2,a=2047;else if((248&e)==240)s=3,a=65535;else{(192&e)==128?i+=t("UNEXPECTED_CONTINUE",i-1,r,n):i+=t("BAD_PREFIX",i-1,r,n);continue}if(i-1+s>=r.length){i+=t("OVERRUN",i-1,r,n);continue}let o=e&(1<<8-s-1)-1;for(let e=0;e<s;e++){let e=r[i];if((192&e)!=128){i+=t("MISSING_CONTINUE",i,r,n),o=null;break}o=o<<6|63&e,i++}if(null!==o){if(o>1114111){i+=t("OUT_OF_RANGE",i-1-s,r,n,o);continue}if(o>=55296&&o<=57343){i+=t("UTF16_SURROGATE",i-1-s,r,n,o);continue}if(o<=a){i+=t("OVERLONG",i-1-s,r,n,o);continue}n.push(o)}}return n})(super.decode(e),void 0).map(e=>e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10&1023)+55296,(1023&e)+56320)).join("")}}class nZ extends nO{coders;constructor(e,t){let r=!1,n=[];e.forEach(e=>{e.dynamic&&(r=!0),n.push(e.type)}),super("tuple","tuple("+n.join(",")+")",t,r),V(this,{coders:Object.freeze(e.slice())})}defaultValue(){let e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});let t=this.coders.reduce((e,t)=>{let r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let i=r.localName;if(i&&1===t[i])"length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n])}),Object.freeze(e)}encode(e,t){let r=nv.dereference(t,"tuple");return nD(e,this.coders,r)}decode(e){return nL(e,this.coders)}}function nJ(e){let t=new Set;return e.forEach(e=>t.add(e)),Object.freeze(t)}let nY=nJ("external public payable override".split(" ")),nX="constant external internal payable private public pure view override",n0=nJ(nX.split(" ")),n1="constructor error event fallback function receive struct",n2=nJ(n1.split(" ")),n3="calldata memory storage payable indexed",n4=nJ(n3.split(" ")),n6=nJ([n1,n3,"tuple returns",nX].join(" ").split(" ")),n5={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},n8=RegExp("^(\\s*)"),n7=RegExp("^([0-9]+)"),n9=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),ie=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),it=RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class ir{#u;#m;get offset(){return this.#u}get length(){return this.#m.length-this.#u}constructor(e){this.#u=0,this.#m=e.slice()}clone(){return new ir(this.#m)}reset(){this.#u=0}#b(e=0,t=0){return new ir(this.#m.slice(e,t).map(t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e}))))}popKeyword(e){let t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){let t=this.peek();throw Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=this.#b(this.#u+1,e.match+1);return this.#u=e.match+1,t}popParams(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=[];for(;this.#u<e.match-1;){let e=this.peek().linkNext;t.push(this.#b(this.#u+1,e)),this.#u=e}return this.#u=e.match+1,t}peek(){if(this.#u>=this.#m.length)throw Error("out-of-bounds");return this.#m[this.#u]}peekKeyword(e){let t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;let t=this.peek();return t.type===e?t.text:null}pop(){let e=this.peek();return this.#u++,e}toString(){let e=[];for(let t=this.#u;t<this.#m.length;t++){let r=this.#m[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function ii(e){let t=[],r=t=>{let r=s<e.length?JSON.stringify(e[s]):"$EOI";throw Error(`invalid token ${r} at ${s}: ${t}`)},n=[],i=[],s=0;for(;s<e.length;){let a=e.substring(s),o=a.match(n8);o&&(s+=o[1].length,a=e.substring(s));let l={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(l);let c=n5[a[0]]||"";if(c){if(l.type=c,l.text=a[0],s++,"OPEN_PAREN"===c)n.push(t.length-1),i.push(t.length-1);else if("CLOSE_PAREN"==c)0===n.length&&r("no matching open bracket"),l.match=n.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1;else if("COMMA"===c)l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1,i.push(t.length-1);else if("OPEN_BRACKET"===c)l.type="BRACKET";else if("CLOSE_BRACKET"===c){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){let r=t.pop().text;e=r+e,t[t.length-1].value=tT(r)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw Error("missing opening bracket");t[t.length-1].text+=e}continue}if(o=a.match(n9)){if(l.text=o[1],s+=l.text.length,n6.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(it)){l.type="TYPE";continue}l.type="ID";continue}if(o=a.match(n7)){l.text=o[1],l.type="NUMBER",s+=l.text.length;continue}throw Error(`unexpected token ${JSON.stringify(a[0])} at position ${s}`)}return new ir(t.map(e=>Object.freeze(e)))}function is(e,t){let r=[];for(let n in t.keys())e.has(n)&&r.push(n);if(r.length>1)throw Error(`conflicting types: ${r.join(", ")}`)}function ia(e,t){if(t.peekKeyword(n2)){let r=t.pop().text;if(r!==e)throw Error(`expected ${e}, got ${r}`)}return t.popType("ID")}function io(e,t){let r=new Set;for(;;){let n=e.peekType("KEYWORD");if(null==n||t&&!t.has(n))break;if(e.pop(),r.has(n))throw Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function il(e){let t=io(e,n0);return(is(t,nJ("constant payable nonpayable".split(" "))),is(t,nJ("pure view payable nonpayable".split(" "))),t.has("view"))?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function ic(e,t){return e.popParams().map(e=>ik.from(e,t))}function iu(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return tk(e.pop().text);throw Error("invalid gas")}return null}function id(e){if(e.length)throw Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}let ih=new RegExp(/^(.*)\[([0-9]*)\]$/);function ip(e){let t=e.match(it);if(J(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){let r=parseInt(t[2]);J(0!==r&&r<=32,"invalid bytes length","type",e)}else if(t[3]){let r=parseInt(t[3]);J(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",e)}return e}let ig={},im=Symbol.for("_ethers_internal"),ib="_ParamTypeInternal",iy="_ErrorInternal",ix="_EventInternal",iw="_ConstructorInternal",iv="_FallbackInternal",iA="_FunctionInternal",iE="_StructInternal";class ik{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,r,n,i,s,a,o){if(ee(e,ig,"ParamType"),Object.defineProperty(this,im,{value:ib}),s&&(s=Object.freeze(s.slice())),"array"===n){if(null==a||null==o)throw Error("")}else if(null!=a||null!=o)throw Error("");if("tuple"===n){if(null==s)throw Error("")}else if(null!=s)throw Error("");V(this,{name:t,type:r,baseType:n,indexed:i,components:s,arrayLength:a,arrayChildren:o})}format(e){if(null==e&&(e="sighash"),"json"===e){let t=this.name||"";if(this.isArray()){let e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}let r={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(t=>t.format(e)).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw Error("array is wrong length");let r=this;return e.map(e=>r.arrayChildren.walk(e,t))}if(this.isTuple()){if(!Array.isArray(e))throw Error("invalid tuple value");if(e.length!==this.components.length)throw Error("array is wrong length");let r=this;return e.map((e,n)=>r.components[n].walk(e,t))}return t(this.type,e)}#y(e,t,r,n){if(this.isArray()){if(!Array.isArray(t))throw Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw Error("array is wrong length");let i=this.arrayChildren,s=t.slice();s.forEach((t,n)=>{i.#y(e,t,r,e=>{s[n]=e})}),n(s);return}if(this.isTuple()){let i;let s=this.components;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!=typeof t)throw Error("invalid tuple value");i=s.map(e=>{if(!e.name)throw Error("cannot use object value with unnamed components");if(!(e.name in t))throw Error(`missing value for component ${e.name}`);return t[e.name]})}if(i.length!==this.components.length)throw Error("array is wrong length");i.forEach((t,n)=>{s[n].#y(e,t,r,e=>{i[n]=e})}),n(i);return}let i=r(this.type,t);i.then?e.push(async function(){n(await i)}()):n(i)}async walkAsync(e,t){let r=[],n=[e];return this.#y(r,e,t,e=>{n[0]=e}),r.length&&await Promise.all(r),n[0]}static from(e,t){if(ik.isParamType(e))return e;if("string"==typeof e)try{return ik.from(ii(e),t)}catch(t){J(!1,"invalid param type","obj",e)}else if(e instanceof ir){let r="",n="",i=null;io(e,nJ(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(n="tuple",i=e.popParams().map(e=>ik.from(e)),r=`tuple(${i.map(e=>e.format()).join(",")})`):n=r=ip(e.popType("TYPE"));let s=null,a=null;for(;e.length&&e.peekType("BRACKET");){let t=e.pop();s=new ik(ig,"",r,n,null,i,a,s),a=t.value,r+=t.text,n="array",i=null}let o=null;if(io(e,n4).has("indexed")){if(!t)throw Error("");o=!0}let l=e.peekType("ID")?e.pop().text:"";if(e.length)throw Error("leftover tokens");return new ik(ig,l,r,n,o,i,a,s)}let r=e.name;J(!r||"string"==typeof r&&r.match(ie),"invalid name","obj.name",r);let n=e.indexed;null!=n&&(J(t,"parameter cannot be indexed","obj.indexed",e.indexed),n=!!n);let i=e.type,s=i.match(ih);if(s){let t=parseInt(s[2]||"-1"),a=ik.from({type:s[1],components:e.components});return new ik(ig,r||"",i,"array",n,null,t,a)}if("tuple"===i||i.startsWith("tuple(")||i.startsWith("(")){let t=null!=e.components?e.components.map(e=>ik.from(e)):null;return new ik(ig,r||"",i,"tuple",n,t,null,null)}return new ik(ig,r||"",i=ip(e.type),i,n,null,null,null)}static isParamType(e){return e&&e[im]===ib}}class iP{type;inputs;constructor(e,t,r){ee(e,ig,"Fragment"),V(this,{type:t,inputs:r=Object.freeze(r.slice())})}static from(e){if("string"==typeof e){try{iP.from(JSON.parse(e))}catch(e){}return iP.from(ii(e))}if(e instanceof ir)switch(e.peekKeyword(n2)){case"constructor":return iC.from(e);case"error":return iT.from(e);case"event":return i_.from(e);case"fallback":case"receive":return iO.from(e);case"function":return iR.from(e);case"struct":return iN.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return iC.from(e);case"error":return iT.from(e);case"event":return i_.from(e);case"fallback":case"receive":return iO.from(e);case"function":return iR.from(e);case"struct":return iN.from(e)}Z(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}J(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return iC.isFragment(e)}static isError(e){return iT.isFragment(e)}static isEvent(e){return i_.isFragment(e)}static isFunction(e){return iR.isFragment(e)}static isStruct(e){return iN.isFragment(e)}}class iS extends iP{name;constructor(e,t,r,n){super(e,t,n),J("string"==typeof r&&r.match(ie),"invalid identifier","name",r),n=Object.freeze(n.slice()),V(this,{name:r})}}function iI(e,t){return"("+t.map(t=>t.format(e)).join("full"===e?", ":",")+")"}class iT extends iS{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,im,{value:iy})}get selector(){return nA(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+iI(e,this.inputs)),t.join(" ")}static from(e){if(iT.isFragment(e))return e;if("string"==typeof e)return iT.from(ii(e));if(e instanceof ir){let t=ia("error",e),r=ic(e);return id(e),new iT(ig,t,r)}return new iT(ig,e.name,e.inputs?e.inputs.map(ik.from):[])}static isFragment(e){return e&&e[im]===iy}}class i_ extends iS{anonymous;constructor(e,t,r,n){super(e,"event",t,r),Object.defineProperty(this,im,{value:ix}),V(this,{anonymous:n})}get topicHash(){return nA(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+iI(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return new i_(ig,e,t=(t||[]).map(e=>ik.from(e)),!1).topicHash}static from(e){if(i_.isFragment(e))return e;if("string"==typeof e)try{return i_.from(ii(e))}catch(t){J(!1,"invalid event fragment","obj",e)}else if(e instanceof ir){let t=ia("event",e),r=ic(e,!0),n=!!io(e,nJ(["anonymous"])).has("anonymous");return id(e),new i_(ig,t,r,n)}return new i_(ig,e.name,e.inputs?e.inputs.map(e=>ik.from(e,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[im]===ix}}class iC extends iP{payable;gas;constructor(e,t,r,n,i){super(e,t,r),Object.defineProperty(this,im,{value:iw}),V(this,{payable:n,gas:i})}format(e){if(Z(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[`constructor${iI(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(iC.isFragment(e))return e;if("string"==typeof e)try{return iC.from(ii(e))}catch(t){J(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof ir){io(e,nJ(["constructor"]));let t=ic(e),r=!!io(e,nY).has("payable"),n=iu(e);return id(e),new iC(ig,"constructor",t,r,n)}return new iC(ig,"constructor",e.inputs?e.inputs.map(ik.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[im]===iw}}class iO extends iP{payable;constructor(e,t,r){super(e,"fallback",t),Object.defineProperty(this,im,{value:iv}),V(this,{payable:r})}format(e){let t=0===this.inputs.length?"receive":"fallback";return"json"===e?JSON.stringify({type:t,stateMutability:this.payable?"payable":"nonpayable"}):`${t}()${this.payable?" payable":""}`}static from(e){if(iO.isFragment(e))return e;if("string"==typeof e)try{return iO.from(ii(e))}catch(t){J(!1,"invalid fallback fragment","obj",e)}else if(e instanceof ir){let t=e.toString();if(J(e.peekKeyword(nJ(["fallback","receive"])),"type must be fallback or receive","obj",t),"receive"===e.popKeyword(nJ(["fallback","receive"]))){let t=ic(e);return J(0===t.length,"receive cannot have arguments","obj.inputs",t),io(e,nJ(["payable"])),id(e),new iO(ig,[],!0)}let r=ic(e);r.length?J(1===r.length&&"bytes"===r[0].type,"invalid fallback inputs","obj.inputs",r.map(e=>e.format("minimal")).join(", ")):r=[ik.from("bytes")];let n=il(e);if(J("nonpayable"===n||"payable"===n,"fallback cannot be constants","obj.stateMutability",n),io(e,nJ(["returns"])).has("returns")){let t=ic(e);J(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map(e=>e.format("minimal")).join(", "))}return id(e),new iO(ig,r,"payable"===n)}return"receive"===e.type?new iO(ig,[],!0):"fallback"===e.type?new iO(ig,[ik.from("bytes")],"payable"===e.stateMutability):void J(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[im]===iv}}class iR extends iS{constant;outputs;stateMutability;payable;gas;constructor(e,t,r,n,i,s){super(e,"function",t,n),Object.defineProperty(this,im,{value:iA}),V(this,{constant:"view"===r||"pure"===r,gas:s,outputs:i=Object.freeze(i.slice()),payable:"payable"===r,stateMutability:r})}get selector(){return nA(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+iI(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(iI(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return new iR(ig,e,"view",t=(t||[]).map(e=>ik.from(e)),[],null).selector}static from(e){if(iR.isFragment(e))return e;if("string"==typeof e)try{return iR.from(ii(e))}catch(t){J(!1,"invalid function fragment","obj",e)}else if(e instanceof ir){let t=ia("function",e),r=ic(e),n=il(e),i=[];io(e,nJ(["returns"])).has("returns")&&(i=ic(e));let s=iu(e);return id(e),new iR(ig,t,n,r,i,s)}let t=e.stateMutability;return null!=t||(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new iR(ig,e.name,t,e.inputs?e.inputs.map(ik.from):[],e.outputs?e.outputs.map(ik.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[im]===iA}}class iN extends iS{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,im,{value:iE})}format(){throw Error("@TODO")}static from(e){if("string"==typeof e)try{return iN.from(ii(e))}catch(t){J(!1,"invalid struct fragment","obj",e)}else if(e instanceof ir){let t=ia("struct",e),r=ic(e);return id(e),new iN(ig,t,r)}return new iN(ig,e.name,e.inputs?e.inputs.map(ik.from):[])}static isFragment(e){return e&&e[im]===iE}}let iM=new Map;iM.set(0,"GENERIC_PANIC"),iM.set(1,"ASSERT_FALSE"),iM.set(17,"OVERFLOW"),iM.set(18,"DIVIDE_BY_ZERO"),iM.set(33,"ENUM_RANGE_ERROR"),iM.set(34,"BAD_STORAGE_DATA"),iM.set(49,"STACK_UNDERFLOW"),iM.set(50,"ARRAY_RANGE_ERROR"),iM.set(65,"OUT_OF_MEMORY"),iM.set(81,"UNINITIALIZED_FUNCTION_CALL");let iB=new RegExp(/^bytes([0-9]*)$/),iD=new RegExp(/^(u?int)([0-9]*)$/),iL=null,iU=1024;class iF{#x(e){if(e.isArray())return new nU(this.#x(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new nZ(e.components.map(e=>this.#x(e)),e.name);switch(e.baseType){case"address":return new nM(e.name);case"bool":return new nF(e.name);case"string":return new nQ(e.name);case"bytes":return new nz(e.name);case"":return new n$(e.name)}let t=e.type.match(iD);if(t){let r=parseInt(t[2]||"256");return J(0!==r&&r<=256&&r%8==0,"invalid "+t[1]+" bit length","param",e),new nW(r/8,"int"===t[1],e.name)}if(t=e.type.match(iB)){let r=parseInt(t[1]);return J(0!==r&&r<=32,"invalid bytes length","param",e),new nH(r,e.name)}J(!1,"invalid type","type",e.type)}getDefaultValue(e){return new nZ(e.map(e=>this.#x(ik.from(e))),"_").defaultValue()}encode(e,t){Y(t.length,e.length,"types/values length mismatch");let r=new nZ(e.map(e=>this.#x(ik.from(e))),"_"),n=new nR;return r.encode(n,t),n.data}decode(e,t,r){return new nZ(e.map(e=>this.#x(ik.from(e))),"_").decode(new nN(t,r,iU))}static _setDefaultMaxInflation(e){J("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),iU=e}static defaultAbiCoder(){return null==iL&&(iL=new iF),iL}static getBuiltinCallException(e,t,r){return function(e,t,r,n){let i="missing revert data",s=null,a=null;if(r){i="execution reverted";let e=er(r);if(r=ea(r),0===e.length)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(e.length%32!=4)i+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===ea(e.slice(0,4)))try{s=n.decode(["string"],e.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch(e){i+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===ea(e.slice(0,4)))try{let t=Number(n.decode(["uint256"],e.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[t]},s=`Panic due to ${iM.get(t)||"UNKNOWN"}(${t})`,i+=`: ${s}`}catch(e){i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}let o={to:t.to?ew(t.to):null,data:t.data||"0x"};return t.from&&(o.from=ew(t.from)),Q(i,"CALL_EXCEPTION",{action:e,data:r,reason:s,transaction:o,invocation:null,revert:a})}(e,t,r,iF.defaultAbiCoder())}}class ij{fragment;name;signature;topic;args;constructor(e,t,r){let n=e.name,i=e.format();V(this,{fragment:e,name:n,signature:i,topic:t,args:r})}}class iz{fragment;name;args;signature;selector;value;constructor(e,t,r,n){let i=e.name,s=e.format();V(this,{fragment:e,name:i,args:r,signature:s,selector:t,value:n})}}class iH{fragment;name;args;signature;selector;constructor(e,t,r){let n=e.name,i=e.format();V(this,{fragment:e,name:n,args:r,signature:i,selector:t})}}class iG{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){V(this,{hash:e,_isIndexed:!0})}}let i$={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},iV={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&i$[e.toString()]&&(t=i$[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class iq{fragments;deploy;fallback;receive;#w;#v;#A;#E;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#A=new Map,this.#w=new Map,this.#v=new Map;let r=[];for(let e of t)try{r.push(iP.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}V(this,{fragments:Object.freeze(r)});let n=null,i=!1;this.#E=this.getAbiCoder(),this.fragments.forEach((e,t)=>{let r;switch(e.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}V(this,{deploy:e});return;case"fallback":0===e.inputs.length?i=!0:(J(!n||e.payable!==n.payable,"conflicting fallback fragments",`fragments[${t}]`,e),i=(n=e).payable);return;case"function":r=this.#A;break;case"event":r=this.#v;break;case"error":r=this.#w;break;default:return}let s=e.format();!r.has(s)&&r.set(s,e)}),this.deploy||V(this,{deploy:iC.from("constructor()")}),V(this,{fallback:n,receive:i})}format(e){let t=e?"minimal":"full";return this.fragments.map(e=>e.format(t))}formatJson(){return JSON.stringify(this.fragments.map(e=>e.format("json")).map(e=>JSON.parse(e)))}getAbiCoder(){return iF.defaultAbiCoder()}#k(e,t,r){if(ei(e)){let t=e.toLowerCase();for(let e of this.#A.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let n=[];for(let[t,r]of this.#A)t.split("(")[0]===e&&n.push(r);if(t){let e=t.length>0?t[t.length-1]:null,r=t.length,i=!0;nv.isTyped(e)&&"overrides"===e.type&&(i=!1,r--);for(let e=n.length-1;e>=0;e--){let t=n[e].inputs.length;t===r||i&&t===r-1||n.splice(e,1)}for(let e=n.length-1;e>=0;e--){let r=n[e].inputs;for(let i=0;i<t.length;i++)if(nv.isTyped(t[i])){if(i>=r.length){if("overrides"===t[i].type)continue;n.splice(e,1);break}if(t[i].type!==r[i].baseType){n.splice(e,1);break}}}}if(1===n.length&&t&&t.length!==n[0].inputs.length){let e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&n.splice(0,1)}if(0===n.length)return null;if(n.length>1&&r){let t=n.map(e=>JSON.stringify(e.format())).join(", ");J(!1,`ambiguous function description (i.e. matches ${t})`,"key",e)}return n[0]}let n=this.#A.get(iR.from(e).format());return n||null}getFunctionName(e){let t=this.#k(e,null,!1);return J(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#k(e,null,!1)}getFunction(e,t){return this.#k(e,t||null,!0)}forEachFunction(e){let t=Array.from(this.#A.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#A.get(n),r)}}#P(e,t,r){if(ei(e)){let t=e.toLowerCase();for(let e of this.#v.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){let n=[];for(let[t,r]of this.#v)t.split("(")[0]===e&&n.push(r);if(t){for(let e=n.length-1;e>=0;e--)n[e].inputs.length<t.length&&n.splice(e,1);for(let e=n.length-1;e>=0;e--){let r=n[e].inputs;for(let i=0;i<t.length;i++)if(nv.isTyped(t[i])&&t[i].type!==r[i].baseType){n.splice(e,1);break}}}if(0===n.length)return null;if(n.length>1&&r){let t=n.map(e=>JSON.stringify(e.format())).join(", ");J(!1,`ambiguous event description (i.e. matches ${t})`,"key",e)}return n[0]}let n=this.#v.get(i_.from(e).format());return n||null}getEventName(e){let t=this.#P(e,null,!1);return J(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#P(e,null,!1)}getEvent(e,t){return this.#P(e,t||null,!0)}forEachEvent(e){let t=Array.from(this.#v.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#v.get(n),r)}}getError(e,t){if(ei(e)){let t=e.toLowerCase();if(iV[t])return iT.from(iV[t].signature);for(let e of this.#w.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let t=[];for(let[r,n]of this.#w)r.split("(")[0]===e&&t.push(n);if(0===t.length)return"Error"===e?iT.from("error Error(string)"):"Panic"===e?iT.from("error Panic(uint256)"):null;if(t.length>1){let r=t.map(e=>JSON.stringify(e.format())).join(", ");J(!1,`ambiguous error description (i.e. ${r})`,"name",e)}return t[0]}if("Error(string)"===(e=iT.from(e).format()))return iT.from("error Error(string)");if("Panic(uint256)"===e)return iT.from("error Panic(uint256)");let r=this.#w.get(e);return r||null}forEachError(e){let t=Array.from(this.#w.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#w.get(n),r)}}_decodeParams(e,t){return this.#E.decode(e,t)}_encodeParams(e,t){return this.#E.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);J(t,"unknown error","fragment",e),e=t}return J(ec(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,ec(t,4))}encodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);J(t,"unknown error","fragment",e),e=t}return eo([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);J(t,"unknown function","fragment",e),e=t}return J(ec(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,ec(t,4))}encodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);J(t,"unknown function","fragment",e),e=t}return eo([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);J(t,"unknown function","fragment",e),e=t}let r="invalid length for result data",n=en(t);if(n.length%32==0)try{return this.#E.decode(e.outputs,n)}catch(e){r="could not decode result data"}Z(!1,r,"BAD_DATA",{value:ea(n),info:{method:e.name,signature:e.format()}})}makeError(e,t){let r=er(e,"data"),n=iF.getBuiltinCallException("call",t,r);if(n.message.startsWith("execution reverted (unknown custom error)")){let e=ea(r.slice(0,4)),t=this.getError(e);if(t)try{let e=this.#E.decode(t.inputs,r.slice(4));n.revert={name:t.name,signature:t.format(),args:e},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch(e){n.message="execution reverted (coult not decode custom error)"}}let i=this.parseTransaction(t);return i&&(n.invocation={method:i.name,signature:i.signature,args:i.args}),n}encodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);J(t,"unknown function","fragment",e),e=t}return ea(this.#E.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){let t=this.getEvent(e);J(t,"unknown event","eventFragment",e),e=t}Z(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});let r=[];e.anonymous||r.push(e.topicHash);let n=(e,t)=>"string"===e.type?nA(t):"bytes"===e.type?ep(ea(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=t_(t):e.type.match(/^bytes/)?t=eu(t,32,!1):"address"===e.type&&this.#E.encode(["address"],[t]),eu(ea(t),32,!0));for(t.forEach((t,i)=>{let s=e.inputs[i];if(!s.indexed){J(null==t,"cannot filter non-indexed parameters; must be null","contract."+s.name,t);return}null==t?r.push(null):"array"===s.baseType||"tuple"===s.baseType?J(!1,"filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?r.push(t.map(e=>n(s,e))):r.push(n(s,t))});r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){if("string"==typeof e){let t=this.getEvent(e);J(t,"unknown event","eventFragment",e),e=t}let r=[],n=[],i=[];return e.anonymous||r.push(e.topicHash),J(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((e,s)=>{let a=t[s];if(e.indexed){if("string"===e.type)r.push(nA(a));else if("bytes"===e.type)r.push(ep(a));else if("tuple"===e.baseType||"array"===e.baseType)throw Error("not implemented");else r.push(this.#E.encode([e.type],[a]))}else n.push(e),i.push(a)}),{data:this.#E.encode(n,i),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e){let t=this.getEvent(e);J(t,"unknown event","eventFragment",e),e=t}if(null!=r&&!e.anonymous){let t=e.topicHash;J(ei(r[0],32)&&r[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}let n=[],i=[],s=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(ik.from({type:"bytes32",name:e.name})),s.push(!0)):(n.push(e),s.push(!1)):(i.push(e),s.push(!1))});let a=null!=r?this.#E.decode(n,eo(r)):null,o=this.#E.decode(i,t,!0),l=[],c=[],u=0,d=0;return e.inputs.forEach((e,t)=>{let r=null;if(e.indexed){if(null==a)r=new iG(null);else if(s[t])r=new iG(a[d++]);else try{r=a[d++]}catch(e){r=e}}else try{r=o[u++]}catch(e){r=e}l.push(r),c.push(e.name||null)}),n_.fromItems(l,c)}parseTransaction(e){let t=er(e.data,"tx.data"),r=tk(null!=e.value?e.value:0,"tx.value"),n=this.getFunction(ea(t.slice(0,4)));if(!n)return null;let i=this.#E.decode(n.inputs,t.slice(4));return new iz(n,n.selector,i,r)}parseCallResult(e){throw Error("@TODO")}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new ij(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){let t=ea(e),r=this.getError(ec(t,0,4));if(!r)return null;let n=this.#E.decode(r.inputs,ec(t,4));return new iH(r,r.selector,n)}static from(e){return e instanceof iq?e:new iq("string"==typeof e?JSON.parse(e):"function"==typeof e.formatJson?e.formatJson():"function"==typeof e.format?e.format("json"):e)}}function iK(e){return e&&"function"==typeof e.getAddress}async function iW(e,t){let r=await t;return(null==r||"0x0000000000000000000000000000000000000000"===r)&&(Z("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),J(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),ew(r)}function iQ(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?ew(e):(Z(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),iW(e,t.resolveName(e))):iK(e)?iW(e,e.getAddress()):e&&"function"==typeof e.then?iW(e,e):void J(!1,"unsupported addressable value","target",e)}function iZ(e,t){return{address:ew(e),storageKeys:t.map((e,t)=>(J(ei(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase()))}}let iJ=BigInt(0);function iY(e){return null==e?null:e.toString()}Symbol.iterator;class iX{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;let r=Object.freeze(e.topics.slice());V(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){let{address:e,blockHash:t,blockNumber:r,data:n,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:n,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:l}}async getBlock(){let e=await this.provider.getBlock(this.blockHash);return Z(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){let e=await this.provider.getTransaction(this.transactionHash);return Z(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){let e=await this.provider.getTransactionReceipt(this.transactionHash);return Z(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){var e;return e=this,{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}}class i0{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#S;constructor(e,t){this.#S=Object.freeze(e.logs.map(e=>new iX(e,t)));let r=iJ;null!=e.effectiveGasPrice?r=e.effectiveGasPrice:null!=e.gasPrice&&(r=e.gasPrice),V(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#S}toJSON(){let{to:e,from:t,contractAddress:r,hash:n,index:i,blockHash:s,blockNumber:a,logsBloom:o,logs:l,status:c,root:u}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:a,contractAddress:r,cumulativeGasUsed:iY(this.cumulativeGasUsed),from:t,gasPrice:iY(this.gasPrice),blobGasUsed:iY(this.blobGasUsed),blobGasPrice:iY(this.blobGasPrice),gasUsed:iY(this.gasUsed),hash:n,index:i,logs:l,logsBloom:o,root:u,status:c,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let e=await this.provider.getBlock(this.blockHash);if(null==e)throw Error("TODO");return e}async getTransaction(){let e=await this.provider.getTransaction(this.hash);if(null==e)throw Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return i3(this)}reorderedEvent(e){return Z(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),i2(this,e)}}class i1{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#I;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.authorizationList=null!=e.authorizationList?e.authorizationList:null,this.#I=-1}toJSON(){let{blockNumber:e,blockHash:t,index:r,hash:n,type:i,to:s,from:a,nonce:o,data:l,signature:c,accessList:u,blobVersionedHashes:d}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:e,blockHash:t,blobVersionedHashes:d,chainId:iY(this.chainId),data:l,from:a,gasLimit:iY(this.gasLimit),gasPrice:iY(this.gasPrice),hash:n,maxFeePerGas:iY(this.maxFeePerGas),maxPriorityFeePerGas:iY(this.maxPriorityFeePerGas),maxFeePerBlobGas:iY(this.maxFeePerBlobGas),nonce:o,signature:c,to:s,index:r,type:i,value:iY(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){let t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;let t=this.provider.getBlock(e);if(null==t)throw Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){let{tx:e,blockNumber:t}=await $({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){let r=null==e?1:e,n=null==t?0:t,i=this.#I,s=-1,a=-1===i,o=async()=>{if(a)return null;let{blockNumber:e,nonce:t}=await $({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce){i=e;return}if(a)return null;let n=await this.getTransaction();if(!n||null==n.blockNumber)for(-1===s&&(s=i-3)<this.#I&&(s=this.#I);s<=e;){if(a)return null;let t=await this.provider.getBlock(s,!0);if(null==t)break;for(let e of t)if(e===this.hash)return;for(let n=0;n<t.length;n++){let s=await t.getTransaction(n);if(s.from===this.from&&s.nonce===this.nonce){if(a)return null;let t=await this.provider.getTransactionReceipt(s.hash);if(null==t||e-t.blockNumber+1<r)return;let n="replaced";s.data===this.data&&s.to===this.to&&s.value===this.value?n="repriced":"0x"===s.data&&s.from===s.to&&s.value===iJ&&(n="cancelled"),Z(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===n||"cancelled"===n,reason:n,replacement:s.replaceableTransaction(i),hash:s.hash,receipt:t})}}s++}},l=e=>{if(null==e||0!==e.status)return e;Z(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},c=await this.provider.getTransactionReceipt(this.hash);if(0===r)return l(c);if(c){if(1===r||await c.confirmations()>=r)return l(c)}else if(await o(),0===r)return null;let u=new Promise((e,t)=>{let s=[],c=()=>{s.forEach(e=>e())};if(s.push(()=>{a=!0}),n>0){let e=setTimeout(()=>{c(),t(Q("wait for transaction timeout","TIMEOUT"))},n);s.push(()=>{clearTimeout(e)})}let u=async n=>{if(await n.confirmations()>=r){c();try{e(l(n))}catch(e){t(e)}}};if(s.push(()=>{this.provider.off(this.hash,u)}),this.provider.on(this.hash,u),i>=0){let e=async()=>{try{await o()}catch(e){if(K(e,"TRANSACTION_REPLACED")){c(),t(e);return}}a||this.provider.once("block",e)};s.push(()=>{this.provider.off("block",e)}),this.provider.once("block",e)}});return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return Z(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),i3(this)}reorderedEvent(e){return Z(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Z(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),i2(this,e)}replaceableTransaction(e){J(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);let t=new i1(this,this.provider);return t.#I=e,t}}function i2(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function i3(e){return{orphan:"drop-transaction",tx:e}}class i4{filter;emitter;#T;constructor(e,t,r){this.#T=t,V(this,{emitter:e,filter:r})}async removeListener(){null!=this.#T&&await this.emitter.off(this.filter,this.#T)}}class i6 extends iX{interface;fragment;args;constructor(e,t,r){super(e,e.provider),V(this,{args:t.decodeEventLog(r,e.data,e.topics),fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class i5 extends iX{error;constructor(e,t){super(e,e.provider),V(this,{error:t})}}class i8 extends i0{#_;constructor(e,t,r){super(r,t),this.#_=e}get logs(){return super.logs.map(e=>{let t=e.topics.length?this.#_.getEvent(e.topics[0]):null;if(t)try{return new i6(e,this.#_,t)}catch(t){return new i5(e,t)}return e})}}class i7 extends i1{#_;constructor(e,t,r){super(r,t),this.#_=e}async wait(e,t){let r=await super.wait(e,t);return null==r?null:new i8(this.#_,this.provider,r)}}class i9 extends i4{log;constructor(e,t,r,n){super(e,t,r),V(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class se extends i9{constructor(e,t,r,n,i){super(e,t,r,new i6(i,e.interface,n)),V(this,{args:e.interface.decodeEventLog(n,this.log.data,this.log.topics),fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}let st=BigInt(0);function sr(e){return e&&"function"==typeof e.call}function sn(e){return e&&"function"==typeof e.estimateGas}function si(e){return e&&"function"==typeof e.resolveName}function ss(e){return e&&"function"==typeof e.sendTransaction}function sa(e){if(null!=e){if(si(e))return e;if(e.provider)return e.provider}}class so{#C;fragment;constructor(e,t,r){if(V(this,{fragment:t}),t.inputs.length<r.length)throw Error("too many arguments");let n=sl(e.runner,"resolveName"),i=si(n)?n:null;this.#C=async function(){let n=await Promise.all(t.inputs.map((e,t)=>null==r[t]?null:e.walkAsync(r[t],(e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map(e=>iQ(e,i))):iQ(t,i):t)));return e.interface.encodeFilterTopics(t,n)}()}getTopicFilter(){return this.#C}}function sl(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function sc(e){return null==e?null:e.provider||null}async function su(e,t){let r=nv.dereference(e,"overrides");J("object"==typeof r,"invalid overrides parameter","overrides",e);let n=function(e){let t={};for(let r of(e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=ea(e.data)),"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/)))r in e&&null!=e[r]&&(t[r]=tk(e[r],`request.${r}`));for(let r of"type,nonce".split(/,/))r in e&&null!=e[r]&&(t[r]=tT(e[r],`request.${r}`));return e.accessList&&(t.accessList=function(e){if(Array.isArray(e))return e.map((t,r)=>Array.isArray(t)?(J(2===t.length,"invalid slot set",`value[${r}]`,t),iZ(t[0],t[1])):(J(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),iZ(t.address,t.storageKeys)));J(null!=e&&"object"==typeof e,"invalid access list","value",e);let t=Object.keys(e).map(t=>{let r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return iZ(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}(e.accessList)),e.authorizationList&&(t.authorizationList=e.authorizationList.slice()),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(e=>ei(e,!0)||e instanceof Uint8Array?ea(e):Object.assign({},e))),t}(r);return J(null==n.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),J(null==n.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function sd(e,t,r){let n=sl(e,"resolveName"),i=si(n)?n:null;return await Promise.all(t.map((e,t)=>e.walkAsync(r[t],(e,t)=>(t=nv.dereference(t,e),"address"===e)?iQ(t,i):t)))}let sh=Symbol.for("_ethersInternal_contract"),sf=new WeakMap;function sp(e){return sf.get(e[sh])}async function sg(e,t){let r;let n=null;if(Array.isArray(t)){let n=function(t){if(ei(t,32))return t;let r=e.interface.getEvent(t);return J(r,"unknown fragment","name",t),r.topicHash};r=t.map(e=>null==e?null:Array.isArray(e)?e.map(n):n(e))}else if("*"===t)r=[null];else if("string"==typeof t)ei(t,32)?r=[t]:(J(n=e.interface.getEvent(t),"unknown fragment","event",t),r=[n.topicHash]);else t&&"object"==typeof t&&"getTopicFilter"in t&&"function"==typeof t.getTopicFilter&&t.fragment?r=await t.getTopicFilter():"fragment"in t?r=[(n=t.fragment).topicHash]:J(!1,"unknown event name","event",t);return{fragment:n,tag:(r=r.map(e=>{if(null==e)return null;if(Array.isArray(e)){let t=Array.from(new Set(e.map(e=>e.toLowerCase())).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})).map(e=>null==e?"null":Array.isArray(e)?e.join("|"):e).join("&"),topics:r}}async function sm(e,t){let{subs:r}=sp(e);return r.get((await sg(e,t)).tag)||null}async function sb(e,t,r){let n=sc(e.runner);Z(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});let{fragment:i,tag:s,topics:a}=await sg(e,r),{addr:o,subs:l}=sp(e),c=l.get(s);if(!c){let t={address:o||e,topics:a},u=t=>{let n=i;if(null==n)try{n=e.interface.getEvent(t.topics[0])}catch(e){}if(n){let s=n,a=i?e.interface.decodeEventLog(i,t.data,t.topics):[];sw(e,r,a,n=>new se(e,n,r,s,t))}else sw(e,r,[],n=>new i9(e,n,r,t))},d=[];c={tag:s,listeners:[],start:()=>{!d.length&&d.push(n.on(t,u))},stop:async()=>{if(0==d.length)return;let e=d;d=[],await Promise.all(e),n.off(t,u)}},l.set(s,c)}return c}let sy=Promise.resolve();async function sx(e,t,r,n){await sy;let i=await sm(e,t);if(!i)return!1;let s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:t,once:i})=>{let s=Array.from(r);n&&s.push(n(i?null:t));try{t.call(e,...s)}catch(e){}return!i}),0===i.listeners.length&&(i.stop(),sp(e).subs.delete(i.tag)),s>0}async function sw(e,t,r,n){try{await sy}catch(e){}let i=sx(e,t,r,n);return sy=i,await i}let sv=["then"];class sA{target;interface;runner;filters;[sh];fallback;constructor(e,t,r,n){var i;let s;J("string"==typeof e||iK(e),"invalid value for Contract target","target",e),null==r&&(r=null);let a=iq.from(t);V(this,{target:e,runner:r,interface:a}),Object.defineProperty(this,sh,{value:{}});let o=null,l=null;if(n){let e=sc(r);l=new i7(this.interface,e,n)}let c=new Map;if("string"==typeof e){if(ei(e))o=e,s=Promise.resolve(e);else{let t=sl(r,"resolveName");if(!si(t))throw Q("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});s=t.resolveName(e).then(t=>{if(null==t)throw Q("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return sp(this).addr=t,t})}}else s=e.getAddress().then(e=>{if(null==e)throw Error("TODO");return sp(this).addr=e,e});return i={addrPromise:s,addr:o,deployTx:l,subs:c},sf.set(this[sh],i),V(this,{filters:new Proxy({},{get:(e,t,r)=>{if("symbol"==typeof t||sv.indexOf(t)>=0)return Reflect.get(e,t,r);try{return this.getEvent(t)}catch(e){if(!K(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>sv.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))})}),V(this,{fallback:a.receive||a.fallback?function(e){let t=async function(t){let r=await su(t,["data"]);r.to=await e.getAddress(),r.from&&(r.from=await iQ(r.from,sa(e.runner)));let n=e.interface,i=tk(r.value||st,"overrides.value")===st,s="0x"===(r.data||"0x");return!n.fallback||n.fallback.payable||!n.receive||s||i||J(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),J(n.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data),J(n.receive||n.fallback&&n.fallback.payable||i,"cannot send value to non-payable fallback","overrides.value",r.value),J(n.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){let n=sl(e.runner,"call");Z(sr(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let i=await t(r);try{return await n.call(i)}catch(t){if(W(t)&&t.data)throw e.interface.makeError(t.data,i);throw t}},n=async function(r){let n=e.runner;Z(ss(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let i=await n.sendTransaction(await t(r)),s=sc(e.runner);return new i7(e.interface,s,i)},i=async function(r){let n=sl(e.runner,"estimateGas");return Z(sn(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await t(r))},s=async e=>await n(e);return V(s,{_contract:e,estimateGas:i,populateTransaction:t,send:n,staticCall:r}),s}(this):null}),new Proxy(this,{get:(e,t,r)=>{if("symbol"==typeof t||t in e||sv.indexOf(t)>=0)return Reflect.get(e,t,r);try{return e.getFunction(t)}catch(e){if(!K(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||sv.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new sA(this.target,this.interface,e)}attach(e){return new sA(e,this.interface,this.runner)}async getAddress(){return await sp(this).addrPromise}async getDeployedCode(){let e=sc(this.runner);Z(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){let e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;let t=sc(this.runner);return Z(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((e,r)=>{let n=async()=>{try{let r=await this.getDeployedCode();if(null!=r)return e(this);t.once("block",n)}catch(e){r(e)}};n()})}deploymentTransaction(){return sp(this).deployTx}getFunction(e){return"string"!=typeof e&&(e=e.format()),function(e,t){let r=function(...r){let n=e.interface.getFunction(t,r);return Z(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),n},n=async function(...t){let n=r(...t),i={};if(n.inputs.length+1===t.length&&(i=await su(t.pop())).from&&(i.from=await iQ(i.from,sa(e.runner))),n.inputs.length!==t.length)throw Error("internal error: fragment inputs doesn't match arguments; should not happen");let s=await sd(e.runner,n.inputs,t);return Object.assign({},i,await $({to:e.getAddress(),data:e.interface.encodeFunctionData(n,s)}))},i=async function(...e){let t=await o(...e);return 1===t.length?t[0]:t},s=async function(...t){let r=e.runner;Z(ss(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let i=await r.sendTransaction(await n(...t)),s=sc(e.runner);return new i7(e.interface,s,i)},a=async function(...t){let r=sl(e.runner,"estimateGas");return Z(sn(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await n(...t))},o=async function(...t){let i=sl(e.runner,"call");Z(sr(i),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let s=await n(...t),a="0x";try{a=await i.call(s)}catch(t){if(W(t)&&t.data)throw e.interface.makeError(t.data,s);throw t}let o=r(...t);return e.interface.decodeFunctionResult(o,a)},l=async(...e)=>r(...e).constant?await i(...e):await s(...e);return V(l,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:r,estimateGas:a,populateTransaction:n,send:s,staticCall:i,staticCallResult:o}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getFunction(t);return Z(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),l}(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){let r=function(...r){let n=e.interface.getEvent(t,r);return Z(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),n},n=function(...t){return new so(e,r(...t),t)};return V(n,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:r}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getEvent(t);return Z(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),n}(this,e)}async queryTransaction(e){throw Error("@TODO")}async queryFilter(e,t,r){null==t&&(t=0),null==r&&(r="latest");let{addr:n,addrPromise:i}=sp(this),s=n||await i,{fragment:a,topics:o}=await sg(this,e),l={address:s,topics:o,fromBlock:t,toBlock:r},c=sc(this.runner);return Z(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await c.getLogs(l)).map(e=>{let t=a;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new i6(e,this.interface,t)}catch(t){return new i5(e,t)}return new iX(e,c)})}async on(e,t){let r=await sb(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){let r=await sb(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await sw(this,e,t,null)}async listenerCount(e){if(e){let t=await sm(this,e);return t?t.listeners.length:0}let{subs:t}=sp(this),r=0;for(let{listeners:e}of t.values())r+=e.length;return r}async listeners(e){if(e){let t=await sm(this,e);return t?t.listeners.map(({listener:e})=>e):[]}let{subs:t}=sp(this),r=[];for(let{listeners:e}of t.values())r=r.concat(e.map(({listener:e})=>e));return r}async off(e,t){let r=await sm(this,e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return(null==t||0===r.listeners.length)&&(r.stop(),sp(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){let t=await sm(this,e);if(!t)return this;t.stop(),sp(this).subs.delete(t.tag)}else{let{subs:e}=sp(this);for(let{tag:t,stop:r}of e.values())r(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends sA{constructor(t,r=null){super(t,e,r)}}return t}static from(e,t,r){return null==r&&(r=null),new this(e,t,r)}}function sE(){return sA}class sk extends sE(){}function sP(e,t){let r=e.find(e=>e.chainId===t);return r?.provider}function sS(){let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}class sI extends Error{type;code;constructor(e,t,r){super(e??"The operation was aborted"),this.type="aborted",this.name=r??"AbortError",this.code=t??"ABORT_ERR"}}async function sT(e,t,r){let n;if(null==t)return e;if(t.aborted)return e.catch(()=>{}),Promise.reject(new sI(r?.errorMessage,r?.errorCode,r?.errorName));let i=new sI(r?.errorMessage,r?.errorCode,r?.errorName);try{return await Promise.race([e,new Promise((e,r)=>{n=()=>{r(i)},t.addEventListener("abort",n)})])}finally{null!=n&&t.removeEventListener("abort",n)}}class s_{readNext;haveNext;ended;nextResult;error;constructor(){this.ended=!1,this.readNext=sS(),this.haveNext=sS()}[Symbol.asyncIterator](){return this}async next(){if(null==this.nextResult&&await this.haveNext.promise,null==this.nextResult)throw Error("HaveNext promise resolved but nextResult was undefined");let e=this.nextResult;return this.nextResult=void 0,this.readNext.resolve(),this.readNext=sS(),e}async throw(e){return this.ended=!0,this.error=e,null!=e&&(this.haveNext.promise.catch(()=>{}),this.haveNext.reject(e)),{done:!0,value:void 0}}async return(){let e={done:!0,value:void 0};return this.ended=!0,this.nextResult=e,this.haveNext.resolve(),e}async push(e,t){await this._push(e,t)}async end(e,t){null!=e?await this.throw(e):await this._push(void 0,t)}async _push(e,t){if(null!=e&&this.ended)throw this.error??Error("Cannot push value onto an ended pushable");for(;null!=this.nextResult;)await this.readNext.promise;null!=e?this.nextResult={done:!1,value:e}:(this.ended=!0,this.nextResult={done:!0,value:void 0}),this.haveNext.resolve(),this.haveNext=sS(),await sT(this.readNext.promise,t?.signal,t)}}function sC(e=0){return new Uint8Array(e)}function sO(e=0){return new Uint8Array(e)}function sR(e,t){null==t&&(t=e.reduce((e,t)=>e+t.length,0));let r=sO(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return r}let sN=Symbol.for("@achingbrain/uint8arraylist");function sM(e,t){if(null==t||t<0)throw RangeError("index is out of bounds");let r=0;for(let n of e){let e=r+n.byteLength;if(t<e)return{buf:n,index:t-r};r=e}throw RangeError("index is out of bounds")}class sB{bufs;length;[sN]=!0;constructor(...e){this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let t=0;for(let r of e)if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.push(r);else{if(r?.[sN])t+=r.byteLength,this.bufs.push(...r.bufs);else throw Error("Could not append value, must be an Uint8Array or a Uint8ArrayList")}this.length+=t}prepend(...e){this.prependAll(e)}prependAll(e){let t=0;for(let r of e.reverse())if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.unshift(r);else{if(r?.[sN])t+=r.byteLength,this.bufs.unshift(...r.bufs);else throw Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList")}this.length+=t}get(e){let t=sM(this.bufs,e);return t.buf[t.index]}set(e,t){let r=sM(this.bufs,e);r.buf[r.index]=t}write(e,t=0){if(e instanceof Uint8Array)for(let r=0;r<e.length;r++)this.set(t+r,e[r]);else{if(e?.[sN])for(let r=0;r<e.length;r++)this.set(t+r,e.get(r));else throw Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}}consume(e){if(!Number.isNaN(e=Math.trunc(e))&&!(e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,t){let{bufs:r,length:n}=this._subList(e,t);return sR(r,n)}subarray(e,t){let{bufs:r,length:n}=this._subList(e,t);return 1===r.length?r[0]:sR(r,n)}sublist(e,t){let{bufs:r,length:n}=this._subList(e,t),i=new sB;return i.length=n,i.bufs=[...r],i}_subList(e,t){if(e=e??0,t=t??this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(0===e&&t===this.length)return{bufs:this.bufs,length:this.length};let r=[],n=0;for(let i=0;i<this.bufs.length;i++){let s=this.bufs[i],a=n,o=a+s.byteLength;if(n=o,e>=o)continue;let l=e>=a&&e<o,c=t>a&&t<=o;if(l&&c){if(e===a&&t===o){r.push(s);break}let n=e-a;r.push(s.subarray(n,n+(t-e)));break}if(l){if(0===e){r.push(s);continue}r.push(s.subarray(e-a));continue}if(c){if(t===o){r.push(s);break}r.push(s.subarray(0,t-a));break}r.push(s)}return{bufs:r,length:t-e}}indexOf(e,t=0){let r;if(!e?.[sN]&&!(e instanceof Uint8Array))throw TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(isNaN(t=Number(t??0))&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;let i=n.byteLength;if(0===i)throw TypeError("search must be at least 1 byte long");let s=new Int32Array(256);for(let e=0;e<256;e++)s[e]=-1;for(let e=0;e<i;e++)s[n[e]]=e;let a=this.byteLength-n.byteLength,o=n.byteLength-1;for(let e=t;e<=a;e+=r){r=0;for(let t=o;t>=0;t--){let i=this.get(e+t);if(n[t]!==i){r=Math.max(1,t-s[i]);break}}if(0===r)return e}return -1}getInt8(e){let t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(e,t){let r=sO(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt8(0,t),this.write(r,e)}getInt16(e,t){let r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt16(0,t)}setInt16(e,t,r){let n=sC(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt16(0,t,r),this.write(n,e)}getInt32(e,t){let r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt32(0,t)}setInt32(e,t,r){let n=sC(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt32(0,t,r),this.write(n,e)}getBigInt64(e,t){let r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigInt64(0,t)}setBigInt64(e,t,r){let n=sC(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigInt64(0,t,r),this.write(n,e)}getUint8(e){let t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(e,t){let r=sO(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint8(0,t),this.write(r,e)}getUint16(e,t){let r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,t)}setUint16(e,t,r){let n=sC(2);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint16(0,t,r),this.write(n,e)}getUint32(e,t){let r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint32(0,t)}setUint32(e,t,r){let n=sC(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,t,r),this.write(n,e)}getBigUint64(e,t){let r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigUint64(0,t)}setBigUint64(e,t,r){let n=sC(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setBigUint64(0,t,r),this.write(n,e)}getFloat32(e,t){let r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(0,t)}setFloat32(e,t,r){let n=sC(4);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat32(0,t,r),this.write(n,e)}getFloat64(e,t){let r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(0,t)}setFloat64(e,t,r){let n=sC(8);new DataView(n.buffer,n.byteOffset,n.byteLength).setFloat64(0,t,r),this.write(n,e)}equals(e){if(null==e||!(e instanceof sB)||e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){let r=new sB;return r.bufs=e,null==t&&(t=e.reduce((e,t)=>e+t.byteLength,0)),r.length=t,r}}class sD extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"}function sL(e){if(e<128)return 1;if(e<16384)return 2;if(e<2097152)return 3;if(e<0x10000000)return 4;if(e<0x800000000)return 5;if(e<0x40000000000)return 6;if(e<0x2000000000000)return 7;if(null!=Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw RangeError("Could not encode varint");return 8}function sU(e,t,r=0){return(null==t&&(t=sO(sL(e))),t instanceof Uint8Array)?function(e,t,r=0){switch(sL(e)){case 8:t[r++]=255&e|128,e/=128;case 7:t[r++]=255&e|128,e/=128;case 6:t[r++]=255&e|128,e/=128;case 5:t[r++]=255&e|128,e/=128;case 4:t[r++]=255&e|128,e>>>=7;case 3:t[r++]=255&e|128,e>>>=7;case 2:t[r++]=255&e|128,e>>>=7;case 1:t[r++]=255&e,e>>>=7;break;default:throw Error("unreachable")}return t}(e,t,r):function(e,t,r=0){switch(sL(e)){case 8:t.set(r++,255&e|128),e/=128;case 7:t.set(r++,255&e|128),e/=128;case 6:t.set(r++,255&e|128),e/=128;case 5:t.set(r++,255&e|128),e/=128;case 4:t.set(r++,255&e|128),e>>>=7;case 3:t.set(r++,255&e|128),e>>>=7;case 2:t.set(r++,255&e|128),e>>>=7;case 1:t.set(r++,255&e),e>>>=7;break;default:throw Error("unreachable")}return t}(e,t,r)}function sF(e,t=0){return e instanceof Uint8Array?function(e,t){let r,n=e[t];if(r=0+(127&n),n<128||(r+=(127&(n=e[t+1]))<<7,n<128)||(r+=(127&(n=e[t+2]))<<14,n<128)||(r+=(127&(n=e[t+3]))<<21,n<128)||(r+=(127&(n=e[t+4]))*0x10000000,n<128)||(r+=(127&(n=e[t+5]))*0x800000000,n<128)||(r+=(127&(n=e[t+6]))*0x40000000000,n<128)||(r+=(127&(n=e[t+7]))*0x2000000000000,n<128))return r;throw RangeError("Could not decode varint")}(e,t):function(e,t){let r,n=e.get(t);if(r=0+(127&n),n<128||(r+=(127&(n=e.get(t+1)))<<7,n<128)||(r+=(127&(n=e.get(t+2)))<<14,n<128)||(r+=(127&(n=e.get(t+3)))<<21,n<128)||(r+=(127&(n=e.get(t+4)))*0x10000000,n<128)||(r+=(127&(n=e.get(t+5)))*0x800000000,n<128)||(r+=(127&(n=e.get(t+6)))*0x40000000000,n<128)||(r+=(127&(n=e.get(t+7)))*0x2000000000000,n<128))return r;throw RangeError("Could not decode varint")}(e,t)}class sj extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"}class sz extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"}class sH extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"}function sG(e,t={}){let r=function(e,t){let r=new s_;e.sink(r).catch(async e=>{await r.end(e)}),e.sink=async e=>{for await(let t of e)await r.push(t);await r.end()};let n=e.source;null!=e.source[Symbol.iterator]?n=e.source[Symbol.iterator]():null!=e.source[Symbol.asyncIterator]&&(n=e.source[Symbol.asyncIterator]());let i=new sB;return{read:async e=>{if(e?.signal?.throwIfAborted(),e?.bytes==null){let{done:t,value:r}=await sT(n.next(),e?.signal);return!0===t?null:r}for(;i.byteLength<e.bytes;){let{value:t,done:r}=await sT(n.next(),e?.signal);if(!0===r)throw new sD("unexpected end of input");i.append(t)}let t=i.sublist(0,e.bytes);return i.consume(e.bytes),t},write:async(e,t)=>{t?.signal?.throwIfAborted(),e instanceof Uint8Array?await r.push(e,t):await r.push(e.subarray(),t)},unwrap:()=>{if(i.byteLength>0){let r=e.source;e.source=async function*(){t?.yieldBytes===!1?yield i:yield*i,yield*r}()}return e}}}(e,t);null!=t.maxDataLength&&null==t.maxLengthLength&&(t.maxLengthLength=sL(t.maxDataLength));let n=t?.lengthDecoder??sF,i=t?.lengthEncoder??sU;return{read:async e=>{let i=-1,s=new sB;for(;;){s.append(await r.read({...e,bytes:1}));try{i=n(s)}catch(e){if(e instanceof RangeError)continue;throw e}if(i<0)throw new sj("Invalid message length");if(t?.maxLengthLength!=null&&s.byteLength>t.maxLengthLength)throw new sH("message length length too long");if(i>-1)break}if(t?.maxDataLength!=null&&i>t.maxDataLength)throw new sz("message length too long");return r.read({...e,bytes:i})},write:async(e,t)=>{await r.write(new sB(i(e.byteLength),e),t)},writeV:async(e,t)=>{let n=new sB(...e.flatMap(e=>[i(e.byteLength),e]));await r.write(n,t)},unwrap:()=>r.unwrap()}}let s$=new Uint8Array(16);function sV(){if(!i){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");i=crypto.getRandomValues.bind(crypto)}return i(s$)}let sq=[];for(let e=0;e<256;++e)sq.push((e+256).toString(16).slice(1));let sK={};function sW(e,t,r,n,i=0){if(e.length<16)throw Error("Random bytes length must be >= 16");if(n){if(i<0||i+16>n.length)throw RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`)}else n=new Uint8Array(16),i=0;return t??=Date.now(),r??=127*e[6]<<24|e[7]<<16|e[8]<<8|e[9],n[i++]=t/0x10000000000&255,n[i++]=t/0x100000000&255,n[i++]=t/0x1000000&255,n[i++]=t/65536&255,n[i++]=t/256&255,n[i++]=255&t,n[i++]=112|r>>>28&15,n[i++]=r>>>20&255,n[i++]=128|r>>>14&63,n[i++]=r>>>6&255,n[i++]=r<<2&255|3&e[10],n[i++]=e[11],n[i++]=e[12],n[i++]=e[13],n[i++]=e[14],n[i++]=e[15],n}let sQ=function(e,t,r){let n;if(e)n=sW(e.random??e.rng?.()??sV(),e.msecs,e.seq,t,r);else{var i,s,a;let e=Date.now(),o=sV();i=sK,s=e,a=o,i.msecs??=-1/0,i.seq??=0,s>i.msecs?(i.seq=a[6]<<23|a[7]<<16|a[8]<<8|a[9],i.msecs=s):(i.seq=i.seq+1|0,0===i.seq&&i.msecs++),n=sW(o,sK.msecs,sK.seq,t,r)}return t??function(e,t=0){return(sq[e[t+0]]+sq[e[t+1]]+sq[e[t+2]]+sq[e[t+3]]+"-"+sq[e[t+4]]+sq[e[t+5]]+"-"+sq[e[t+6]]+sq[e[t+7]]+"-"+sq[e[t+8]]+sq[e[t+9]]+"-"+sq[e[t+10]]+sq[e[t+11]]+sq[e[t+12]]+sq[e[t+13]]+sq[e[t+14]]+sq[e[t+15]]).toLowerCase()}(n)};class sZ{protocol;components;started;timeout;maxInboundStreams;maxOutboundStreams;runOnLimitedConnection;log;decoratedConnections;connectionAccounts=new Map;evmRuleEngine;signer;clockDrift;withAttestation;attestationTemplateString;attestationSignature="";attestationSignerAddress="";attestationDomain;constructor(e,t){if(this.components=e,this.log=e.logger.forComponent("libp2p:middleware-evm"),this.started=!1,this.protocol=`/${t.protocolPrefix??"mw"}/evm/0.0.1`,this.timeout=t.timeout??1e4,this.maxInboundStreams=t.maxInboundStreams??3,this.maxOutboundStreams=t.maxOutboundStreams??3,this.runOnLimitedConnection=t.runOnLimitedConnection??!0,this.clockDrift=t.clockDrift??3e5,this.signer=t.signer,this.withAttestation=t.withAttestation??!0,this.attestationTemplateString=t.attestationString??"Attestation\r\n${address} is my ${domain} wallet.",this.attestationDomain=t.attestationDomain??null,this.withAttestation&&null==this.attestationDomain)throw Error("attestationDomain required when withAttestation is true");if(this.attestationSignature=t.attestationSignature??"",this.attestationSignerAddress=t.attestationSignerAddress??"",null==t.evmRuleEngine)throw Error("EVM engine required");this.evmRuleEngine=t.evmRuleEngine,this.decoratedConnections=new Set,this.handle=this.handle.bind(this),this.handler=this.handler.bind(this)}[Symbol.toStringTag]="libp2p-middleware-evm";async start(){if(!this.started){try{this.components.registrar.getHandler(this.protocol),this.log(`Protocol ${this.protocol} already registered, skipping`)}catch(e){if("UnhandledProtocolError"===e.name)await this.components.registrar.handle(this.protocol,this.handler,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnection}),this.log(`Registered handler for ${this.protocol}`);else throw e}this.log(`Started evm middleware with protocol ${this.protocol}`),this.started=!0}}async stop(){if(this.started){try{this.components.registrar.getHandler(this.protocol),await this.components.registrar.unhandle(this.protocol),this.log(`Unregistered handler for ${this.protocol}`)}catch(e){"UnhandledProtocolError"===e.name?this.log(`Protocol ${this.protocol} already unregistered, skipping`):this.log.error(`Error unregistering protocol ${this.protocol}: ${e.message}`)}this.decoratedConnections.clear(),this.started=!1,this.log("Stopped evm middleware")}}isStarted(){return this.started}isDecorated(e){return!!this.started&&this.decoratedConnections.has(e.id)}getAccountForConnection(e){return this.started?this.connectionAccounts.get(e.id)??null:null}wrappedRulesToSign(){return JSON.stringify({rules:this.evmRuleEngine.getRuleDefinitions(),timestamp:Date.now(),peerId:this.components.peerId.toString(),nonce:sQ()})}setAttestation(e){this.attestationSignature=e}getAttestation(){return this.attestationSignature}handler({stream:e,connection:t}){try{this.handle(e,t).catch(e=>{this.log("Error handling request",e)})}catch(e){this.log("Synchronous error in handler",e)}}async handle(e,t){this.log("Received evm middleware connection request",t.id,t.remotePeer.toString());try{let r=sG(e),n=new TextEncoder,i=new TextDecoder;this.log.trace("created lpstream");let s=this.wrappedRulesToSign();this.log.trace("wrappedRules",s);try{this.log("Sending EVM challenge to client"),await r.write(n.encode(s),{signal:AbortSignal.timeout(this.timeout)}),this.log.trace("EVM Challenge sent successfully to client")}catch(e){this.log.error("Error sending EVM challenge to client:",e.message),t.abort(Error("Error sending EVM challenge to client"));return}let a=null,o=null;try{this.log.trace("Reading response to challenge");let e=await r.read({signal:AbortSignal.timeout(this.timeout)});this.log("Read response",e);let n=i.decode(e.slice());a=tV(s,n),this.log("Recovered address:",a);let o=await this.evmRuleEngine.evaluate(a);if(!o.result){this.log.error("Failed EVM rule evaluation",o),t.abort(Error("Failed EVM rule evaluation"));return}}catch(e){this.log.error("Error reading response:",e.message),t.abort(Error("Error reading response"));return}if(this.withAttestation){let e=a;try{this.log.trace("Sending SEND_ATTEST"),await r.write(n.encode("SEND_ATTEST")),this.log.trace("Sent SEND_ATTEST"),this.log.trace("Waiting for attestation");let s=await r.read({signal:AbortSignal.timeout(this.timeout)});this.log.trace("Received attestation",s);let a=i.decode(s.slice()),l=r8({signature:r2(),onBehalfOf:r2().regex(/^0x[0-9a-fA-F]{40}$/,{message:"invalid Ethereum address"})}).safeParse(JSON.parse(a));if(!l.success){this.log.error("Invalid attestation payload",l.error),t.abort(Error("Invalid attestation payload"));return}let{signature:c,onBehalfOf:u}=l.data;if(null==this.attestationDomain){this.log.error("attestationDomain required when withAttestation is true");return}let d=this.attestationTemplateString.replace("${address}",e).replace("${domain}",this.attestationDomain);if(o=tV(d,c),this.log("recoveredAttestAddress",o),this.log("onBehalfOf",u),o!==u){this.log.error("Attestation failed - recovered address does not match onBehalfOf address"),t.abort(Error("Attestation failed - recovered address does not match onBehalfOf address"));return}}catch(e){console.log("attestation err",e),t.abort(Error("Attestation failed"));return}}try{if(this.withAttestation){if(!o)throw Error("recoveredAttestAddress is null");this.connectionAccounts.set(t.id,o)}this.decoratedConnections.add(t.id),this.log.trace(`Connection ${t.id} middleware negotiated successfully, sending OK`),await r.write(n.encode("OK"),{signal:AbortSignal.timeout(this.timeout)}),this.log.trace("Sent OK to client, closing stream"),await e.close()}catch(e){this.log.error("Error sending challenge to client:",e.message),t.abort(Error("Error sending challenge to client"))}}catch(e){this.log.error("Error handling request",e)}}async decorate(e,t,r){if(this.log.trace("Decorate attempt for connection:",t.id),!this.started)return this.log.error("middleware not started"),!1;if(this.isDecorated(t))return this.log.trace("Connection middleware already applied:",t.id),!0;this.log(`Initiating middleware for connection ${t.id}`);let n=new TextEncoder,i=new TextDecoder;try{this.log.trace("Opening EVM stream to peer",t.remotePeer.toString(),"on protocol",this.protocol);let e=await t.newStream(this.protocol,{signal:AbortSignal.timeout(this.timeout)}),r=sG(e);try{this.log.trace("Waiting to receive challenge from server...");let s=await r.read({signal:AbortSignal.timeout(this.timeout)}),a=i.decode(s.slice());this.log(`Received challenge from server: [${a}] (length: ${a.length})`);let o=r8({rules:r5(nm),timestamp:r3().refine(e=>{let t=Date.now();return Math.abs(t-e)<=this.clockDrift},{message:`Timestamp must be within \xb1${this.clockDrift}ms of the current time.`}),peerId:r2().refine(e=>e===t.remotePeer.toString(),{message:"Peer ID must be a valid PeerId"}),nonce:r2().uuid()}).safeParse(JSON.parse(a));if(!o.success)return this.log.error(o.error),t.abort(Error("challenge failed validation")),!1;let l=o.data;if(!this.evmRuleEngine.validateRules(l.rules))return this.log.error("Error validation challenge"),t.abort(Error("Error validating challenge")),!1;let c=await this.signer.signMessage(a);this.log(`Signed message : ${c}`);try{await r.write(n.encode(c),{signal:AbortSignal.timeout(this.timeout)}),this.log("Response sent successfully to server")}catch(e){return this.log.error("Error sending response to server:",e.message),t.abort(Error("Error sending response to server")),!1}try{let s=await r.read({signal:AbortSignal.timeout(this.timeout)});this.log("Read challenge ok or attest");let a=i.decode(s.slice());if(this.withAttestation){if("SEND_ATTEST"!==a)return this.log.error("expected SEND_ATTEST, got:",a),t.abort(Error("expected SEND_ATTEST")),!1;if(""===this.attestationSignature)return this.log.error("attestation not set"),t.abort(Error("attestation not set")),!1;this.log.trace("Sending attestation");let e={signature:this.attestationSignature,onBehalfOf:this.attestationSignerAddress};await r.write(n.encode(JSON.stringify(e)),{signal:AbortSignal.timeout(this.timeout)}),this.log.trace("Sent attestation"),this.log.trace("Waiting for attestation ok");let s=await r.read({signal:AbortSignal.timeout(this.timeout)});if(this.log("Got attestion response"),"OK"!==i.decode(s.slice()))return this.log.error("reading challenge ok failed"),t.abort(Error("reading challenge ok failed")),!1}else if("OK"!==i.decode(s.slice()))return this.log.error("reading challenge ok failed"),t.abort(Error("reading challenge ok failed")),!1;return this.decoratedConnections.add(t.id),await e.close(),!0}catch(e){return this.log.error("Error reading response from server:",e.message),t.abort(Error("Error reading response from server")),!1}}catch(e){return this.log.error("Error sending response to server:",e.message),t.abort(Error("Error sending response to server")),!1}}catch(e){return this.log.error("Middleware error for connection",t.id,e),t.abort(e),!1}}}function sJ(e){return t=>new sZ(t,e)}},803:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullCoder=void 0;let n=r(2884),i=new Uint8Array([]);class s extends n.Coder{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(i)}decode(e){return e.readBytes(0),null}}t.NullCoder=s},832:(e,t,r)=>{"use strict";r.d(t,{V:()=>c});var n=r(9982),i=r(8616);let s={};function a(e,t){let r=!1;return t<0&&(r=!0,t*=-1),new c(s,`${r?"":"u"}int${t}`,e,{signed:r,width:t})}function o(e,t){return new c(s,`bytes${t||""}`,e,{size:t})}let l=Symbol.for("_ethers_typed");class c{type;value;#s;_typedSymbol;constructor(e,t,r,a){null==a&&(a=null),(0,n.gk)(s,e,"Typed"),(0,i.n)(this,{_typedSymbol:l,type:t,value:r}),this.#s=a,this.format()}format(){if("array"===this.type||"dynamicArray"===this.type)throw Error("");return"tuple"===this.type?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#s}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#s?-1:!1===this.#s?this.value.length:null}static from(e,t){return new c(s,e,t)}static uint8(e){return a(e,8)}static uint16(e){return a(e,16)}static uint24(e){return a(e,24)}static uint32(e){return a(e,32)}static uint40(e){return a(e,40)}static uint48(e){return a(e,48)}static uint56(e){return a(e,56)}static uint64(e){return a(e,64)}static uint72(e){return a(e,72)}static uint80(e){return a(e,80)}static uint88(e){return a(e,88)}static uint96(e){return a(e,96)}static uint104(e){return a(e,104)}static uint112(e){return a(e,112)}static uint120(e){return a(e,120)}static uint128(e){return a(e,128)}static uint136(e){return a(e,136)}static uint144(e){return a(e,144)}static uint152(e){return a(e,152)}static uint160(e){return a(e,160)}static uint168(e){return a(e,168)}static uint176(e){return a(e,176)}static uint184(e){return a(e,184)}static uint192(e){return a(e,192)}static uint200(e){return a(e,200)}static uint208(e){return a(e,208)}static uint216(e){return a(e,216)}static uint224(e){return a(e,224)}static uint232(e){return a(e,232)}static uint240(e){return a(e,240)}static uint248(e){return a(e,248)}static uint256(e){return a(e,256)}static uint(e){return a(e,256)}static int8(e){return a(e,-8)}static int16(e){return a(e,-16)}static int24(e){return a(e,-24)}static int32(e){return a(e,-32)}static int40(e){return a(e,-40)}static int48(e){return a(e,-48)}static int56(e){return a(e,-56)}static int64(e){return a(e,-64)}static int72(e){return a(e,-72)}static int80(e){return a(e,-80)}static int88(e){return a(e,-88)}static int96(e){return a(e,-96)}static int104(e){return a(e,-104)}static int112(e){return a(e,-112)}static int120(e){return a(e,-120)}static int128(e){return a(e,-128)}static int136(e){return a(e,-136)}static int144(e){return a(e,-144)}static int152(e){return a(e,-152)}static int160(e){return a(e,-160)}static int168(e){return a(e,-168)}static int176(e){return a(e,-176)}static int184(e){return a(e,-184)}static int192(e){return a(e,-192)}static int200(e){return a(e,-200)}static int208(e){return a(e,-208)}static int216(e){return a(e,-216)}static int224(e){return a(e,-224)}static int232(e){return a(e,-232)}static int240(e){return a(e,-240)}static int248(e){return a(e,-248)}static int256(e){return a(e,-256)}static int(e){return a(e,-256)}static bytes1(e){return o(e,1)}static bytes2(e){return o(e,2)}static bytes3(e){return o(e,3)}static bytes4(e){return o(e,4)}static bytes5(e){return o(e,5)}static bytes6(e){return o(e,6)}static bytes7(e){return o(e,7)}static bytes8(e){return o(e,8)}static bytes9(e){return o(e,9)}static bytes10(e){return o(e,10)}static bytes11(e){return o(e,11)}static bytes12(e){return o(e,12)}static bytes13(e){return o(e,13)}static bytes14(e){return o(e,14)}static bytes15(e){return o(e,15)}static bytes16(e){return o(e,16)}static bytes17(e){return o(e,17)}static bytes18(e){return o(e,18)}static bytes19(e){return o(e,19)}static bytes20(e){return o(e,20)}static bytes21(e){return o(e,21)}static bytes22(e){return o(e,22)}static bytes23(e){return o(e,23)}static bytes24(e){return o(e,24)}static bytes25(e){return o(e,25)}static bytes26(e){return o(e,26)}static bytes27(e){return o(e,27)}static bytes28(e){return o(e,28)}static bytes29(e){return o(e,29)}static bytes30(e){return o(e,30)}static bytes31(e){return o(e,31)}static bytes32(e){return o(e,32)}static address(e){return new c(s,"address",e)}static bool(e){return new c(s,"bool",!!e)}static bytes(e){return new c(s,"bytes",e)}static string(e){return new c(s,"string",e)}static array(e,t){throw Error("not implemented yet")}static tuple(e,t){throw Error("not implemented yet")}static overrides(e){return new c(s,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===l}static dereference(e,t){if(c.isTyped(e)){if(e.type!==t)throw Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}},840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatTransactionResponse=t.formatTransactionReceipt=t.formatReceiptLog=t.formatBlock=t.formatLog=t.formatUint256=t.formatHash=t.formatData=t.formatBoolean=t.object=t.arrayOf=t.allowNull=void 0;let n=r(9111),i=r(6870),s=r(2984),a=r(8662),o=BigInt(0);function l(e,t){return function(r){return null==r?t:e(r)}}function c(e,t){return r=>{if(t&&null==r)return null;if(!Array.isArray(r))throw Error("not an array");return r.map(t=>e(t))}}function u(e,t){return r=>{let n={};for(let i in e){let s=i;if(t&&i in t&&!(s in r)){for(let e of t[i])if(e in r){s=e;break}}try{let t=e[i](r[s]);void 0!==t&&(n[i]=t)}catch(t){let e=t instanceof Error?t.message:"not-an-error";(0,a.assert)(!1,`invalid value for value.${i} (${e})`,"BAD_DATA",{value:r})}}return n}}function d(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}(0,a.assertArgument)(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)}function h(e){return(0,a.assertArgument)((0,a.isHexString)(e,!0),"invalid data","value",e),e}function f(e){return(0,a.assertArgument)((0,a.isHexString)(e,32),"invalid hash","value",e),e}t.allowNull=l,t.arrayOf=c,t.object=u,t.formatBoolean=d,t.formatData=h,t.formatHash=f,t.formatUint256=function(e){if(!(0,a.isHexString)(e))throw Error("invalid uint256");return(0,a.zeroPadValue)(e,32)};let p=u({address:n.getAddress,blockHash:f,blockNumber:a.getNumber,data:h,index:a.getNumber,removed:l(d,!1),topics:c(f),transactionHash:f,transactionIndex:a.getNumber},{index:["logIndex"]});t.formatLog=function(e){return p(e)};let g=u({hash:l(f),parentHash:f,parentBeaconBlockRoot:l(f,null),number:a.getNumber,timestamp:a.getNumber,nonce:l(h),difficulty:a.getBigInt,gasLimit:a.getBigInt,gasUsed:a.getBigInt,stateRoot:l(f,null),receiptsRoot:l(f,null),blobGasUsed:l(a.getBigInt,null),excessBlobGas:l(a.getBigInt,null),miner:l(n.getAddress),prevRandao:l(f,null),extraData:h,baseFeePerGas:l(a.getBigInt)},{prevRandao:["mixHash"]});t.formatBlock=function(e){let t=g(e);return t.transactions=e.transactions.map(e=>"string"==typeof e?e:x(e)),t};let m=u({transactionIndex:a.getNumber,blockNumber:a.getNumber,transactionHash:f,address:n.getAddress,topics:c(f),data:h,index:a.getNumber,blockHash:f},{index:["logIndex"]});function b(e){return m(e)}t.formatReceiptLog=b;let y=u({to:l(n.getAddress,null),from:l(n.getAddress,null),contractAddress:l(n.getAddress,null),index:a.getNumber,root:l(a.hexlify),gasUsed:a.getBigInt,blobGasUsed:l(a.getBigInt,null),logsBloom:l(h),blockHash:f,hash:f,logs:c(b),blockNumber:a.getNumber,cumulativeGasUsed:a.getBigInt,effectiveGasPrice:l(a.getBigInt),blobGasPrice:l(a.getBigInt,null),status:l(a.getNumber),type:l(a.getNumber,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function x(e){e.to&&(0,a.getBigInt)(e.to)===o&&(e.to="0x0000000000000000000000000000000000000000");let t=u({hash:f,index:l(a.getNumber,void 0),type:e=>"0x"===e||null==e?0:(0,a.getNumber)(e),accessList:l(s.accessListify,null),blobVersionedHashes:l(c(f,!0),null),authorizationList:l(c(e=>{let t;if(e.signature)t=e.signature;else{let r=e.yParity;"0x1b"===r?r=0:"0x1c"===r&&(r=1),t=Object.assign({},e,{yParity:r})}return{address:(0,n.getAddress)(e.address),chainId:(0,a.getBigInt)(e.chainId),nonce:(0,a.getBigInt)(e.nonce),signature:i.Signature.from(t)}},!1),null),blockHash:l(f,null),blockNumber:l(a.getNumber,null),transactionIndex:l(a.getNumber,null),from:n.getAddress,gasPrice:l(a.getBigInt),maxPriorityFeePerGas:l(a.getBigInt),maxFeePerGas:l(a.getBigInt),maxFeePerBlobGas:l(a.getBigInt,null),gasLimit:a.getBigInt,to:l(n.getAddress,null),value:a.getBigInt,nonce:a.getNumber,data:h,creates:l(n.getAddress,null),chainId:l(a.getBigInt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=(0,n.getCreateAddress)(t)),(1===e.type||2===e.type)&&null==e.accessList&&(t.accessList=[]),e.signature?t.signature=i.Signature.from(e.signature):t.signature=i.Signature.from(e),null==t.chainId){let e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&(0,a.getBigInt)(t.blockHash)===o&&(t.blockHash=null),t}t.formatTransactionReceipt=function(e){return y(e)},t.formatTransactionResponse=x},847:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(3804);function i(e){return e?.then!=null}let s=function(e,t){let r=0;if(null!=e[Symbol.asyncIterator])return async function*(){for await(let n of e){let e=t(n,r++);i(e)&&await e,yield n}}();let s=(0,n.A)(e),{value:a,done:o}=s.next();if(!0===o)return function*(){}();let l=t(a,r++);return"function"==typeof l?.then?async function*(){for(let e of(yield a,s)){let n=t(e,r++);i(n)&&await n,yield e}}():function*(){for(let e of(yield a,s))t(e,r++),yield e}()}},870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha512=t.sha256=void 0;let n=r(4006),i=r(8662),s=function(e){return(0,n.createHash)("sha256").update(e).digest()},a=function(e){return(0,n.createHash)("sha512").update(e).digest()},o=s,l=a,c=!1,u=!1;function d(e){let t=(0,i.getBytes)(e,"data");return(0,i.hexlify)(o(t))}function h(e){let t=(0,i.getBytes)(e,"data");return(0,i.hexlify)(l(t))}t.sha256=d,d._=s,d.lock=function(){c=!0},d.register=function(e){if(c)throw Error("sha256 is locked");o=e},Object.freeze(d),t.sha512=h,h._=a,h.lock=function(){u=!0},h.register=function(e){if(u)throw Error("sha512 is locked");l=e},Object.freeze(d)},907:(e,t,r)=>{e.exports={ast:r(7547),circular:r(961),ids:r(1331),parser:r(1222),stats:r(576),trace:r(9698),utils:r(2079),emitcss:r(5817),style:r(3110)}},936:(e,t,r)=>{"use strict";r.d(t,{$:()=>o});var n=r(4922),i=r(9982),s=r(8121);function a(e,t){return{address:(0,n.b)(e),storageKeys:t.map((e,t)=>((0,i.MR)((0,s.Lo)(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase()))}}function o(e){if(Array.isArray(e))return e.map((t,r)=>Array.isArray(t)?((0,i.MR)(2===t.length,"invalid slot set",`value[${r}]`,t),a(t[0],t[1])):((0,i.MR)(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),a(t.address,t.storageKeys)));(0,i.MR)(null!=e&&"object"==typeof e,"invalid access list","value",e);let t=Object.keys(e).map(t=>{let r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return a(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}},961:e=>{e.exports=function(){let e=-1,t=0;this.init=function(r){if("number"!=typeof r||r<=0)throw Error("circular-buffer.js: init: circular buffer size must an integer > 0");t=Math.ceil(r),e=-1},this.increment=function(){return((e+=1)+t)%t},this.maxSize=function(){return t},this.items=function(){return e+1},this.getListIndex=function(r){return -1===e||r<0||r>e||e-r>=t?-1:(r+t)%t},this.forEach=function(r){if(-1!==e){if(e<t){for(let t=0;t<=e;t+=1)r(t,t);return}for(let n=e-t+1;n<=e;n+=1)r((n+t)%t,n)}}}},1015:e=>{"use strict";function t(e,t){var t=t||{};this._capacity=t.capacity,this._head=0,this._tail=0,Array.isArray(e)?this._fromArray(e):(this._capacityMask=3,this._list=[,,,,])}t.prototype.peekAt=function(e){var t=e;if(t===(0|t)){var r=this.size();if(!(t>=r)&&!(t<-r))return t<0&&(t+=r),t=this._head+t&this._capacityMask,this._list[t]}},t.prototype.get=function(e){return this.peekAt(e)},t.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},t.prototype.peekFront=function(){return this.peek()},t.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(t.prototype,"length",{get:function(){return this.size()}}),t.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.unshift=function(e){if(0==arguments.length)return this.size();var t=this._list.length;return(this._head=this._head-1+t&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail)?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.shift=function(){var e=this._head;if(e!==this._tail){var t=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),t}},t.prototype.push=function(e){if(0==arguments.length)return this.size();var t=this._tail;return(this._list[t]=e,this._tail=t+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail)?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},t.prototype.pop=function(){var e=this._tail;if(e!==this._head){var t=this._list.length;this._tail=e-1+t&this._capacityMask;var r=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=t>>>2&&this._shrinkArray(),r}},t.prototype.removeOne=function(e){var t,r=e;if(r===(0|r)&&this._head!==this._tail){var n=this.size(),i=this._list.length;if(!(r>=n)&&!(r<-n)){r<0&&(r+=n),r=this._head+r&this._capacityMask;var s=this._list[r];if(e<n/2){for(t=e;t>0;t--)this._list[r]=this._list[r=r-1+i&this._capacityMask];this._list[r]=void 0,this._head=this._head+1+i&this._capacityMask}else{for(t=n-1-e;t>0;t--)this._list[r]=this._list[r=r+1+i&this._capacityMask];this._list[r]=void 0,this._tail=this._tail-1+i&this._capacityMask}return s}}},t.prototype.remove=function(e,t){var r,n,i=e,s=t;if(i===(0|i)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(i>=a)&&!(i<-a)&&!(t<1)){if(i<0&&(i+=a),1===t||!t)return(r=[,])[0]=this.removeOne(i),r;if(0===i&&i+t>=a)return r=this.toArray(),this.clear(),r;for(i+t>a&&(t=a-i),r=Array(t),n=0;n<t;n++)r[n]=this._list[this._head+i+n&this._capacityMask];if(i=this._head+i&this._capacityMask,e+t===a){for(this._tail=this._tail-t+o&this._capacityMask,n=t;n>0;n--)this._list[i=i+1+o&this._capacityMask]=void 0;return r}if(0===e){for(this._head=this._head+t+o&this._capacityMask,n=t-1;n>0;n--)this._list[i=i+1+o&this._capacityMask]=void 0;return r}if(i<a/2){for(this._head=this._head+e+t+o&this._capacityMask,n=e;n>0;n--)this.unshift(this._list[i=i-1+o&this._capacityMask]);for(i=this._head-1+o&this._capacityMask;s>0;)this._list[i=i-1+o&this._capacityMask]=void 0,s--;e<0&&(this._tail=i)}else{for(this._tail=i,i=i+t+o&this._capacityMask,n=a-(t+e);n>0;n--)this.push(this._list[i++]);for(i=this._tail;s>0;)this._list[i=i+1+o&this._capacityMask]=void 0,s--}return this._head<2&&this._tail>1e4&&this._tail<=o>>>2&&this._shrinkArray(),r}}},t.prototype.splice=function(e,t){var r=e;if(r===(0|r)){var n=this.size();if(r<0&&(r+=n),!(r>n)){if(!(arguments.length>2))return this.remove(r,t);var i,s,a,o=arguments.length,l=this._list.length,c=2;if(!n||r<n/2){for(i=0,s=Array(r);i<r;i++)s[i]=this._list[this._head+i&this._capacityMask];for(0===t?(a=[],r>0&&(this._head=this._head+r+l&this._capacityMask)):(a=this.remove(r,t),this._head=this._head+r+l&this._capacityMask);o>c;)this.unshift(arguments[--o]);for(i=r;i>0;i--)this.unshift(s[i-1])}else{var u=(s=Array(n-(r+t))).length;for(i=0;i<u;i++)s[i]=this._list[this._head+r+t+i&this._capacityMask];for(0===t?(a=[],r!=n&&(this._tail=this._head+r+l&this._capacityMask)):(a=this.remove(r,t),this._tail=this._tail-u+l&this._capacityMask);c<o;)this.push(arguments[c++]);for(i=0;i<u;i++)this.push(s[i])}return a}}},t.prototype.clear=function(){this._list=Array(this._list.length),this._head=0,this._tail=0},t.prototype.isEmpty=function(){return this._head===this._tail},t.prototype.toArray=function(){return this._copyArray(!1)},t.prototype._fromArray=function(e){var t=e.length,r=this._nextPowerOf2(t);this._list=Array(r),this._capacityMask=r-1,this._tail=t;for(var n=0;n<t;n++)this._list[n]=e[n]},t.prototype._copyArray=function(e,t){var r,n=this._list,i=n.length,s=this.length;if((t|=s)==s&&this._head<this._tail)return this._list.slice(this._head,this._tail);var a=Array(t),o=0;if(e||this._head>this._tail){for(r=this._head;r<i;r++)a[o++]=n[r];for(r=0;r<this._tail;r++)a[o++]=n[r]}else for(r=this._head;r<this._tail;r++)a[o++]=n[r];return a},t.prototype._growArray=function(){if(0!=this._head){var e=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=e}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},t.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.prototype._nextPowerOf2=function(e){return Math.max(1<<Math.log(e)/Math.log(2)+1,4)},e.exports=t},1070:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i,e:()=>n});let n=Symbol.for("@libp2p/peer-id");function i(e){return!!e?.[n]}},1090:(e,t,r)=>{"use strict";r.d(t,{v:()=>s});let n=(...e)=>e.map(e=>e?.trim?.()).filter(Boolean).join(" "),i=/^on[A-Z]/;function s(...e){let t={};for(let r of e){for(let e in t){if(i.test(e)&&"function"==typeof t[e]&&"function"==typeof r[e]){t[e]=function(...e){return function(...t){e.forEach(e=>e?.(...t))}}(t[e],r[e]);continue}if("className"===e||"class"===e){t[e]=n(t[e],r[e]);continue}if("style"===e){t[e]=Object.assign({},t[e]??{},r[e]??{});continue}t[e]=void 0!==r[e]?r[e]:t[e]}for(let e in r)void 0===t[e]&&(t[e]=r[e])}return t}},1108:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(3525),i=r(1970);function s(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}let a=s("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),o=s("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=(0,i.K)(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),l={utf8:a,"utf-8":a,hex:n.Fo.base16,latin1:o,ascii:o,binary:o,...n.Fo}},1113:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.add=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=t.split=t.fromBig=void 0;let r=BigInt(0x100000000-1),n=BigInt(32);function i(e,t=!1){return t?{h:Number(e&r),l:Number(e>>n&r)}:{h:0|Number(e>>n&r),l:0|Number(e&r)}}function s(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let s=0;s<e.length;s++){let{h:a,l:o}=i(e[s],t);[r[s],n[s]]=[a,o]}return[r,n]}t.fromBig=i,t.split=s;let a=(e,t)=>BigInt(e>>>0)<<n|BigInt(t>>>0);t.toBig=a;let o=(e,t,r)=>e>>>r;t.shrSH=o;let l=(e,t,r)=>e<<32-r|t>>>r;t.shrSL=l;let c=(e,t,r)=>e>>>r|t<<32-r;t.rotrSH=c;let u=(e,t,r)=>e<<32-r|t>>>r;t.rotrSL=u;let d=(e,t,r)=>e<<64-r|t>>>r-32;t.rotrBH=d;let h=(e,t,r)=>e>>>r-32|t<<64-r;t.rotrBL=h;let f=(e,t)=>t;t.rotr32H=f;let p=(e,t)=>e;t.rotr32L=p;let g=(e,t,r)=>e<<r|t>>>32-r;t.rotlSH=g;let m=(e,t,r)=>t<<r|e>>>32-r;t.rotlSL=m;let b=(e,t,r)=>t<<r-32|e>>>64-r;t.rotlBH=b;let y=(e,t,r)=>e<<r-32|t>>>64-r;function x(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/0x100000000|0)|0,l:0|i}}t.rotlBL=y,t.add=x;let w=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);t.add3L=w;let v=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0;t.add3H=v;let A=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);t.add4L=A;let E=(e,t,r,n,i)=>t+r+n+i+(e/0x100000000|0)|0;t.add4H=E;let k=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0);t.add5L=k;let P=(e,t,r,n,i,s)=>t+r+n+i+s+(e/0x100000000|0)|0;t.add5H=P,t.default={fromBig:i,split:s,toBig:a,shrSH:o,shrSL:l,rotrSH:c,rotrSL:u,rotrBH:d,rotrBL:h,rotr32H:f,rotr32L:p,rotlSH:g,rotlSL:m,rotlBH:b,rotlBL:y,add:x,add3L:w,add3H:v,add4L:A,add4H:E,add5H:P,add5L:k}},1124:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessagePrefix=t.EtherSymbol=void 0,t.EtherSymbol="Ξ",t.MessagePrefix="\x19Ethereum Signed Message:\n"},1131:(e,t,r)=>{"use strict";r.d(t,{fO:()=>o,eX:()=>l});var n=r(5367);parseInt("0xFFFF",16);let i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);function s(e,t){16===t.length&&4===e.length&&function(e,t,r){let n=0;for(let t of e)if(!(n<0)){if(n>11)break;if(255!==t)return!1;n++}return!0}(t,0,0)&&(t=t.slice(12)),4===t.length&&16===e.length&&function(e,t,r,n){let i=0;for(let r of e)if(!(i<0)){if(i>11)break;if(r!==t[i])return!1;i++}return!0}(e,i,0,0)&&(e=e.slice(12));let r=e.length;if(r!=t.length)throw Error("Failed to mask ip");let n=new Uint8Array(r);for(let i=0;i<r;i++)n[i]=e[i]&t[i];return n}function a(e,t){if(32!==t&&128!==t||e<0||e>t)throw Error("Invalid CIDR mask");let r=t/8,n=new Uint8Array(r);for(let t=0;t<r;t++){if(e>=8){n[t]=255,e-=8;continue}n[t]=255-(255>>e),e=0}return n}class o{constructor(e,t){if(null==t)({network:this.network,mask:this.mask}=function(e){let[t,r]=e.split("/");if(!t||!r)throw Error("Failed to parse given CIDR: "+e);let i=4,o=(0,n.vm)(t);if(null==o&&(i=16,null==(o=(0,n.JI)(t))))throw Error("Failed to parse given CIDR: "+e);let l=parseInt(r,10);if(Number.isNaN(l)||String(l).length!==r.length||l<0||l>8*i)throw Error("Failed to parse given CIDR: "+e);let c=a(l,8*i);return{network:s(o,c),mask:c}}(e));else{let r=(0,n.do)(e);if(null==r)throw Error("Failed to parse network");let i=parseInt(t=String(t),10);if(Number.isNaN(i)||String(i).length!==t.length||i<0||i>8*r.length){let e=(0,n.do)(t);if(null==e)throw Error("Failed to parse mask");this.mask=e}else this.mask=a(i,8*r.length);this.network=s(r,this.mask)}}contains(e){return function(e,t){if("string"==typeof t&&(t=(0,n.do)(t)),null==t)throw Error("Invalid ip");if(t.length!==e.network.length)return!1;for(let r=0;r<t.length;r++)if((e.network[r]&e.mask[r])!=(t[r]&e.mask[r]))return!1;return!0}({network:this.network,mask:this.mask},e)}toString(){let e=function(e){let t=0;for(let[r,n]of e.entries()){if(255===n){t+=8;continue}for(;(128&n)!=0;)t++,n<<=1;if((128&n)!=0)return -1;for(let t=r+1;t<e.length;t++)if(0!=e[t])return -1;break}return t}(this.mask),t=-1!==e?String(e):function(e){let t="0x";for(let r of e)t+=(r>>4).toString(16)+(15&r).toString(16);return t}(this.mask);return function(e){switch(e.length){case 4:return e.join(".");case 16:{let t=[];for(let r=0;r<e.length;r++)r%2==0&&t.push(e[r].toString(16).padStart(2,"0")+e[r+1].toString(16).padStart(2,"0"));return t.join(":")}default:throw Error("Invalid ip length")}}(this.network)+"/"+t}}function l(e,t){return new o(e).contains(t)}},1138:(e,t,r)=>{"use strict";r.d(t,{D4:()=>l,OY:()=>i,Sb:()=>a,lF:()=>o,mD:()=>s});var n=r(1970);function i(e){if(e<128)return 1;if(e<16384)return 2;if(e<2097152)return 3;if(e<0x10000000)return 4;if(e<0x800000000)return 5;if(e<0x40000000000)return 6;if(e<0x2000000000000)return 7;if(null!=Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw RangeError("Could not encode varint");return 8}function s(e,t,r=0){switch(i(e)){case 8:t[r++]=255&e|128,e/=128;case 7:t[r++]=255&e|128,e/=128;case 6:t[r++]=255&e|128,e/=128;case 5:t[r++]=255&e|128,e/=128;case 4:t[r++]=255&e|128,e>>>=7;case 3:t[r++]=255&e|128,e>>>=7;case 2:t[r++]=255&e|128,e>>>=7;case 1:t[r++]=255&e,e>>>=7;break;default:throw Error("unreachable")}return t}function a(e,t){let r,n=e[t];if(r=0+(127&n),n<128||(r+=(127&(n=e[t+1]))<<7,n<128)||(r+=(127&(n=e[t+2]))<<14,n<128)||(r+=(127&(n=e[t+3]))<<21,n<128)||(r+=(127&(n=e[t+4]))*0x10000000,n<128)||(r+=(127&(n=e[t+5]))*0x800000000,n<128)||(r+=(127&(n=e[t+6]))*0x40000000000,n<128)||(r+=(127&(n=e[t+7]))*0x2000000000000,n<128))return r;throw RangeError("Could not decode varint")}function o(e,t,r=0){return(null==t&&(t=(0,n.K)(i(e))),t instanceof Uint8Array)?s(e,t,r):function(e,t,r=0){switch(i(e)){case 8:t.set(r++,255&e|128),e/=128;case 7:t.set(r++,255&e|128),e/=128;case 6:t.set(r++,255&e|128),e/=128;case 5:t.set(r++,255&e|128),e/=128;case 4:t.set(r++,255&e|128),e>>>=7;case 3:t.set(r++,255&e|128),e>>>=7;case 2:t.set(r++,255&e|128),e>>>=7;case 1:t.set(r++,255&e),e>>>=7;break;default:throw Error("unreachable")}return t}(e,t,r)}function l(e,t=0){return e instanceof Uint8Array?a(e,t):function(e,t){let r,n=e.get(t);if(r=0+(127&n),n<128||(r+=(127&(n=e.get(t+1)))<<7,n<128)||(r+=(127&(n=e.get(t+2)))<<14,n<128)||(r+=(127&(n=e.get(t+3)))<<21,n<128)||(r+=(127&(n=e.get(t+4)))*0x10000000,n<128)||(r+=(127&(n=e.get(t+5)))*0x800000000,n<128)||(r+=(127&(n=e.get(t+6)))*0x40000000000,n<128)||(r+=(127&(n=e.get(t+7)))*0x2000000000000,n<128))return r;throw RangeError("Could not decode varint")}(e,t)}},1222:(e,t,r)=>{e.exports=function(){let e,t,n,i,s;let a=r(1331),o=r(2079),l="parser.js: ",c=this;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let u=null,d=null,h=0,f=0,p=0,g=null,m=null,b=null,y=null,x=null,w=0,v=1/0,A=1/0,E=function(t,r,n){let s=`${l}evaluateRule(): `;if(t>=b.length)throw Error(`${s}rule index: ${t} out of range`);if(r>=i)throw Error(`${s}phrase index: ${r} out of range`);let{length:o}=u;u.push({type:a.RNM,index:t}),e(o,r,n),u.pop()},k=function(t,r,n){let s=`${l}evaluateUdt(): `;if(t>=y.length)throw Error(`${s}udt index: ${t} out of range`);if(r>=i)throw Error(`${s}phrase index: ${r} out of range`);let{length:o}=u;u.push({type:a.UDT,empty:y[t].empty,index:t}),e(o,r,n),u.pop()},P=function(){h=0,f=0,p=0,w=0,s=[{lookAround:a.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],b=null,y=null,d=null,t=0,n=0,i=0,g=null,m=null,x=null,u=null},S=function(){let e=[],t=function(){let t=e[e.length-1],r={};for(let e in t)r[e]=t[e];return r};this.push=function(){e.push(t())},this.pop=function(t){let r=t;if(r||(r=e.length-1),r<1||r>e.length)throw Error(`${l}backRef.pop(): bad length: ${r}`);return e.length=r,e[e.length-1]},this.length=function(){return e.length},this.savePhrase=function(t,r,n){e[e.length-1][t]={phraseIndex:r,phraseLength:n}},this.getPhrase=function(t){return e[e.length-1][t]},function(){let t={};b.forEach(e=>{e.isBkr&&(t[e.lower]=null)}),y.length>0&&y.forEach(e=>{e.isBkr&&(t[e.lower]=null)}),e.push(t)}()},I=function(){let e=this;this.state=a.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=s[s.length-1],this.uFrame=new S,this.pFrame=new S,this.evaluateRule=E,this.evaluateUdt=k,this.refresh=function(){e.state=a.ACTIVE,e.phraseLength=0,e.lookAround=s[s.length-1]}},T=function(){return s[s.length-1]},_=function(){return s.length>1},C=function(){let e=`${l}initializeAst(): `;for(;;){if(void 0===c.ast){c.ast=null;break}if(null===c.ast)break;if("astObject"!==c.ast.astObject)throw Error(`${e}ast object not recognized`);break}null!==c.ast&&c.ast.init(b,y,d)},O=function(){let e=`${l}initializeTrace(): `;for(;;){if(void 0===c.trace){c.trace=null;break}if(null===c.trace)break;if("traceObject"!==c.trace.traceObject)throw Error(`${e}trace object not recognized`);break}null!==c.trace&&c.trace.init(b,y,d)},R=function(){let e=`${l}initializeStats(): `;for(;;){if(void 0===c.stats){c.stats=null;break}if(null===c.stats)break;if("statsObject"!==c.stats.statsObject)throw Error(`${e}stats object not recognized`);break}null!==c.stats&&c.stats.init(b,y)},N=function(e){let t=`${l}initializeGrammar(): `;if(!e)throw Error(`${t}grammar object undefined`);if("grammarObject"!==e.grammarObject)throw Error(`${t}bad grammar object`);b=e.rules,y=e.udts},M=function(e){let t=`${l}initializeStartRule(): `,r=null;if("number"==typeof e){if(e>=b.length)throw Error(`${t}start rule index too large: max: ${b.length}: index: ${e}`);r=e}else if("string"==typeof e){let n=e.toLowerCase();for(let e=0;e<b.length;e+=1)if(n===b[e].lower){r=b[e].index;break}if(null===r)throw Error(`${t}start rule name '${e}' not recognized`)}else throw Error(`${t}type of start rule '${typeof e}' not recognized`);return r},B=function(e,r,s){let a=`${l}initializeInputChars(): `,c=e,u=r,h=s;if(void 0===c)throw Error(`${a}input string is undefined`);if(null===c)throw Error(`${a}input string is null`);if("string"==typeof c)c=o.stringToChars(c);else if(!Array.isArray(c))throw Error(`${a}input string is not a string or array`);if(c.length>0&&"number"!=typeof c[0])throw Error(`${a}input string not an array of integers`);if("number"!=typeof u)u=0;else if((u=Math.floor(u))<0||u>c.length)throw Error(`${a}input beginning index out of range: ${u}`);if("number"!=typeof h)h=c.length-u;else if((h=Math.floor(h))<0||h>c.length-u)throw Error(`${a}input length out of range: ${h}`);d=c,i=(t=u)+(n=h)},D=function(){let e,t;let r=`${l}initializeCallbacks(): `;for(e=0,g=[],m=[];e<b.length;e+=1)g[e]=null;for(e=0;e<y.length;e+=1)m[e]=null;let n=[];for(e=0;e<b.length;e+=1)n.push(b[e].lower);for(e=0;e<y.length;e+=1)n.push(y[e].lower);for(let i in c.callbacks){if((e=n.indexOf(i.toLowerCase()))<0)throw Error(`${r}syntax callback '${i}' not a rule or udt name`);if((t=c.callbacks[i])||(t=null),"function"==typeof t||null===t)e<b.length?g[e]=t:m[e-b.length]=t;else throw Error(`${r}syntax callback[${i}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(e=0;e<y.length;e+=1)if(null===m[e])throw Error(`${r}all UDT callbacks must be defined. UDT callback[${y[e].lower}] not a function reference`)};this.setMaxTreeDepth=function(e){if("number"!=typeof e||(v=Math.floor(e))<=0)throw Error(`parser: max tree depth must be integer > 0: ${e}`)},this.setMaxNodeHits=function(e){if("number"!=typeof e||(A=Math.floor(e))<=0)throw Error(`parser: max node hits must be integer > 0: ${e}`)};let L=function(r,s,o){let c;let h=`${l}parse(): `;N(r);let g=M(s);D(),O(),R(),C();let m=new I;switch(null!=o&&(x=o),u=[{type:a.RNM,index:g}],e(0,t,m),u=null,m.state){case a.ACTIVE:throw Error(`${h}final state should never be 'ACTIVE'`);case a.NOMATCH:c=!1;break;case a.EMPTY:case a.MATCH:c=m.phraseLength===n;break;default:throw Error("unrecognized state")}return{success:c,state:m.state,length:n,matched:m.phraseLength,maxMatched:w,maxTreeDepth:f,nodeHits:p,inputLength:d.length,subBegin:t,subEnd:i,subLength:n}};this.parseSubstring=function(e,t,r,n,i,s){return P(),B(r,n,i),L(e,t,s)},this.parse=function(e,t,r,n){return P(),B(r,0,r.length),L(e,t,n)};let U=function(t,r,n){let i=u[t];for(let t=0;t<i.children.length&&(e(i.children[t],r,n),n.state===a.NOMATCH);t+=1);},F=function(t,r,n){let i,s,o,l;let d=u[t],h=n.uFrame.length(),f=n.pFrame.length();c.ast&&(s=c.ast.getLength()),i=!0,o=r,l=0;for(let t=0;t<d.children.length;t+=1){if(e(d.children[t],o,n),n.state===a.NOMATCH){i=!1;break}o+=n.phraseLength,l+=n.phraseLength}i?(n.state=0===l?a.EMPTY:a.MATCH,n.phraseLength=l):(n.state=a.NOMATCH,n.phraseLength=0,n.uFrame.pop(h),n.pFrame.pop(f),c.ast&&c.ast.setLength(s))},j=function(t,r,n){let s,o,l,d;let h=u[t];if(0===h.max){n.state=a.EMPTY,n.phraseLength=0;return}o=r,l=0,d=0;let f=n.uFrame.length(),p=n.pFrame.length();for(c.ast&&(s=c.ast.getLength());!(o>=i)&&(e(t+1,o,n),n.state!==a.NOMATCH&&n.state!==a.EMPTY&&(d+=1,l+=n.phraseLength,o+=n.phraseLength,d!==h.max)););n.state===a.EMPTY?(n.state=0===l?a.EMPTY:a.MATCH,n.phraseLength=l):d>=h.min?(n.state=0===l?a.EMPTY:a.MATCH,n.phraseLength=l):(n.state=a.NOMATCH,n.phraseLength=0,n.uFrame.pop(f),n.pFrame.pop(p),c.ast&&c.ast.setLength(s))},z=function(e,t,r,n){if(t.phraseLength>r){let n=`${l}opRNM(${e.name}): callback function error: `;throw Error(n+=`sysData.phraseLength: ${t.phraseLength} must be <= remaining chars: ${r}`)}switch(t.state){case a.ACTIVE:if(!0!==n)throw Error(`${l}opRNM(${e.name}): callback function return error. ACTIVE state not allowed.`);break;case a.EMPTY:t.phraseLength=0;break;case a.MATCH:0===t.phraseLength&&(t.state=a.EMPTY);break;case a.NOMATCH:t.phraseLength=0;break;default:throw Error(`${l}opRNM(${e.name}): callback function return error. Unrecognized return state: ${t.state}`)}},H=function(t,r,n){let s,o,l,h,f,p;let m=u[t],y=b[m.index],w=g[y.index],v=!_();if(v&&((o=c.ast&&c.ast.ruleDefined(m.index))&&(s=c.ast.getLength(),c.ast.down(m.index,b[m.index].name)),h=n.uFrame.length(),f=n.pFrame.length(),n.uFrame.push(),n.pFrame.push(),p=n.pFrame,n.pFrame=new S),null===w)l=u,u=y.opcodes,e(0,r,n),u=l;else{let t=i-r;n.ruleIndex=y.index,w(n,d,r,x),z(y,n,t,!0),n.state===a.ACTIVE&&(l=u,u=y.opcodes,e(0,r,n),u=l,n.ruleIndex=y.index,w(n,d,r,x),z(y,n,t,!1))}v&&(o&&(n.state===a.NOMATCH?c.ast.setLength(s):c.ast.up(m.index,y.name,r,n.phraseLength)),n.pFrame=p,n.state===a.NOMATCH?(n.uFrame.pop(h),n.pFrame.pop(f)):y.isBkr&&(n.pFrame.savePhrase(y.lower,r,n.phraseLength),n.uFrame.savePhrase(y.lower,r,n.phraseLength)))},G=function(e,t,r){if(t.phraseLength>r){let n=`${l}opUDT(${e.name}): callback function error: `;throw Error(n+=`sysData.phraseLength: ${t.phraseLength} must be <= remaining chars: ${r}`)}switch(t.state){case a.ACTIVE:throw Error(`${l}opUDT(${e.name}): callback function return error. ACTIVE state not allowed.`);case a.EMPTY:if(!1===e.empty)throw Error(`${l}opUDT(${e.name}): callback function return error. May not return EMPTY.`);t.phraseLength=0;break;case a.MATCH:if(0===t.phraseLength){if(!1===e.empty)throw Error(`${l}opUDT(${e.name}): callback function return error. May not return EMPTY.`);t.state=a.EMPTY}break;case a.NOMATCH:t.phraseLength=0;break;default:throw Error(`${l}opUDT(${e.name}): callback function return error. Unrecognized return state: ${t.state}`)}},$=function(e,t,r){let n,s,o,l,h,f;let p=u[e],g=y[p.index];r.UdtIndex=g.index;let w=!_();w&&((o=c.ast&&c.ast.udtDefined(p.index))&&(s=b.length+p.index,n=c.ast.getLength(),c.ast.down(s,g.name)),l=r.uFrame.length(),h=r.pFrame.length(),r.uFrame.push(),r.pFrame.push(),f=r.pFrame,r.pFrame=new S);let v=i-t;m[p.index](r,d,t,x),G(g,r,v),w&&(o&&(r.state===a.NOMATCH?c.ast.setLength(n):c.ast.up(s,g.name,t,r.phraseLength)),r.pFrame=f,r.state===a.NOMATCH?(r.uFrame.pop(l),r.pFrame.pop(h)):g.isBkr&&(r.pFrame.savePhrase(g.lower,t,r.phraseLength),r.uFrame.savePhrase(g.lower,t,r.phraseLength)))},V=function(r,o,l){s.push({lookAround:a.LOOKAROUND_AHEAD,anchor:o,charsEnd:i,charsLength:n}),i=d.length,n=d.length-t,e(r+1,o,l);let c=s.pop();switch(i=c.charsEnd,n=c.charsLength,l.phraseLength=0,l.state){case a.EMPTY:case a.MATCH:l.state=a.EMPTY;break;case a.NOMATCH:l.state=a.NOMATCH;break;default:throw Error(`opAND: invalid state ${l.state}`)}},q=function(r,o,l){s.push({lookAround:a.LOOKAROUND_AHEAD,anchor:o,charsEnd:i,charsLength:n}),i=d.length,n=d.length-t,e(r+1,o,l);let c=s.pop();switch(i=c.charsEnd,n=c.charsLength,l.phraseLength=0,l.state){case a.EMPTY:case a.MATCH:l.state=a.NOMATCH;break;case a.NOMATCH:l.state=a.EMPTY;break;default:throw Error(`opNOT: invalid state ${l.state}`)}},K=function(e,t,r){let n=u[e];r.state=a.NOMATCH,t<i&&n.min<=d[t]&&d[t]<=n.max&&(r.state=a.MATCH,r.phraseLength=1)},W=function(e,t,r){let n;let s=u[e],o=s.string.length;if(r.state=a.NOMATCH,t+o<=i){for(n=0;n<o;n+=1)if(d[t+n]!==s.string[n])return;r.state=a.MATCH,r.phraseLength=o}},Q=function(e,t,r){let n,s;let o=u[e];r.state=a.NOMATCH;let l=o.string.length;if(0===l){r.state=a.EMPTY;return}if(t+l<=i){for(n=0;n<l;n+=1)if((s=d[t+n])>=65&&s<=90&&(s+=32),s!==o.string[n])return;r.state=a.MATCH,r.phraseLength=l}},Z=function(e,t,r){r.state=a.NOMATCH,r.phraseLength=0,r.state=0===t?a.EMPTY:a.NOMATCH},J=function(e,t,r){r.state=a.NOMATCH,r.phraseLength=0,r.state=t===d.length?a.EMPTY:a.NOMATCH},Y=function(e,t,r){let n,s,o,l;let c=u[e];r.state=a.NOMATCH,l=c.index<b.length?b[c.index].lower:y[c.index-b.length].lower;let h=c.bkrMode===a.BKR_MODE_PM?r.pFrame.getPhrase(l):r.uFrame.getPhrase(l),f=c.bkrCase===a.BKR_MODE_CI;if(null===h)return;let p=h.phraseIndex,g=h.phraseLength;if(0===g){r.state=a.EMPTY;return}if(t+g<=i){if(f){for(n=0;n<g;n+=1)if(s=d[t+n],o=d[p+n],s>=65&&s<=90&&(s+=32),o>=65&&o<=90&&(o+=32),s!==o)return;r.state=a.MATCH,r.phraseLength=g}else for(n=0;n<g;n+=1)if((s=d[t+n])!==(o=d[p+n]))return;r.state=a.MATCH,r.phraseLength=g}},X=function(t,r,n){switch(s.push({lookAround:a.LOOKAROUND_BEHIND,anchor:r}),e(t+1,r,n),s.pop(),n.phraseLength=0,n.state){case a.EMPTY:case a.MATCH:n.state=a.EMPTY;break;case a.NOMATCH:n.state=a.NOMATCH;break;default:throw Error(`opBKA: invalid state ${n.state}`)}},ee=function(t,r,n){switch(s.push({lookAround:a.LOOKAROUND_BEHIND,anchor:r}),e(t+1,r,n),s.pop(),n.phraseLength=0,n.state){case a.EMPTY:case a.MATCH:n.state=a.NOMATCH;break;case a.NOMATCH:n.state=a.EMPTY;break;default:throw Error(`opBKN: invalid state ${n.state}`)}},et=function(t,r,n){let i,s,o,l;let d=u[t],h=n.uFrame.length(),f=n.pFrame.length();c.ast&&(s=c.ast.getLength()),i=!0,o=r,l=0;for(let t=d.children.length-1;t>=0;t-=1)if(e(d.children[t],o,n),o-=n.phraseLength,l+=n.phraseLength,n.state===a.NOMATCH){i=!1;break}i?(n.state=0===l?a.EMPTY:a.MATCH,n.phraseLength=l):(n.state=a.NOMATCH,n.phraseLength=0,n.uFrame.pop(h),n.pFrame.pop(f),c.ast&&c.ast.setLength(s))},er=function(t,r,n){let i,s,o,l;let d=u[t];s=r,o=0,l=0;let h=n.uFrame.length(),f=n.pFrame.length();for(c.ast&&(i=c.ast.getLength());!(s<=0)&&(e(t+1,s,n),n.state!==a.NOMATCH&&n.state!==a.EMPTY&&(l+=1,o+=n.phraseLength,s-=n.phraseLength,l!==d.max)););n.state===a.EMPTY?(n.state=0===o?a.EMPTY:a.MATCH,n.phraseLength=o):l>=d.min?(n.state=0===o?a.EMPTY:a.MATCH,n.phraseLength=o):(n.state=a.NOMATCH,n.phraseLength=0,n.uFrame.pop(h),n.pFrame.pop(f),c.ast&&c.ast.setLength(i))},en=function(e,t,r){let n=u[e];if(r.state=a.NOMATCH,r.phraseLength=0,t>0){let e=d[t-1];n.min<=e&&e<=n.max&&(r.state=a.MATCH,r.phraseLength=1)}},ei=function(e,t,r){let n;let i=u[e];r.state=a.NOMATCH;let s=i.string.length,o=t-s;if(o>=0){for(n=0;n<s;n+=1)if(d[o+n]!==i.string[n])return;r.state=a.MATCH,r.phraseLength=s}},es=function(e,t,r){let n;let i=u[e];r.state=a.NOMATCH;let s=i.string.length;if(0===s){r.state=a.EMPTY;return}let o=t-s;if(o>=0){for(let e=0;e<s;e+=1)if((n=d[o+e])>=65&&n<=90&&(n+=32),n!==i.string[e])return;r.state=a.MATCH,r.phraseLength=s}},ea=function(e,t,r){let n,i,s,o;let l=u[e];r.state=a.NOMATCH,r.phraseLength=0,o=l.index<b.length?b[l.index].lower:y[l.index-b.length].lower;let c=l.bkrMode===a.BKR_MODE_PM?r.pFrame.getPhrase(o):r.uFrame.getPhrase(o),h=l.bkrCase===a.BKR_MODE_CI;if(null===c)return;let f=c.phraseIndex,p=c.phraseLength;if(0===p){r.state=a.EMPTY,r.phraseLength=0;return}let g=t-p;if(g>=0){if(h){for(n=0;n<p;n+=1)if(i=d[g+n],s=d[f+n],i>=65&&i<=90&&(i+=32),s>=65&&s<=90&&(s+=32),i!==s)return;r.state=a.MATCH,r.phraseLength=p}else for(n=0;n<p;n+=1)if((i=d[g+n])!==(s=d[f+n]))return;r.state=a.MATCH,r.phraseLength=p}};e=function(e,t,r){let n=!0,i=u[e];if((p+=1)>A)throw Error(`parser: maximum number of node hits exceeded: ${A}`);if((h+=1)>f&&(f=h)>v)throw Error(`parser: maximum parse tree depth exceeded: ${v}`);if(r.refresh(),null!==c.trace){let e=T();c.trace.down(i,r.state,t,r.phraseLength,e.anchor,e.lookAround)}if(s[s.length-1].lookAround===a.LOOKAROUND_BEHIND)switch(i.type){case a.ALT:U(e,t,r);break;case a.CAT:et(e,t,r);break;case a.REP:er(e,t,r);break;case a.RNM:H(e,t,r);break;case a.UDT:$(e,t,r);break;case a.AND:V(e,t,r);break;case a.NOT:q(e,t,r);break;case a.TRG:en(e,t,r);break;case a.TBS:ei(e,t,r);break;case a.TLS:es(e,t,r);break;case a.BKR:ea(e,t,r);break;case a.BKA:X(e,t,r);break;case a.BKN:ee(e,t,r);break;case a.ABG:Z(e,t,r);break;case a.AEN:J(e,t,r);break;default:n=!1}else switch(i.type){case a.ALT:U(e,t,r);break;case a.CAT:F(e,t,r);break;case a.REP:j(e,t,r);break;case a.RNM:H(e,t,r);break;case a.UDT:$(e,t,r);break;case a.AND:V(e,t,r);break;case a.NOT:q(e,t,r);break;case a.TRG:K(e,t,r);break;case a.TBS:W(e,t,r);break;case a.TLS:Q(e,t,r);break;case a.BKR:Y(e,t,r);break;case a.BKA:X(e,t,r);break;case a.BKN:ee(e,t,r);break;case a.ABG:Z(e,t,r);break;case a.AEN:J(e,t,r);break;default:n=!1}if(!_()&&t+r.phraseLength>w&&(w=t+r.phraseLength),null!==c.stats&&c.stats.collect(i,r),null!==c.trace){let e=T();c.trace.up(i,r.state,t,r.phraseLength,e.anchor,e.lookAround)}return h-=1,n}}},1252:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pkcs7Strip=t.pkcs7Pad=t.OFB=t.ECB=t.CTR=t.CFB=t.CBC=t.ModeOfOperation=t.AES=void 0;var n=r(2099);Object.defineProperty(t,"AES",{enumerable:!0,get:function(){return n.AES}});var i=r(5383);Object.defineProperty(t,"ModeOfOperation",{enumerable:!0,get:function(){return i.ModeOfOperation}});var s=r(2776);Object.defineProperty(t,"CBC",{enumerable:!0,get:function(){return s.CBC}});var a=r(679);Object.defineProperty(t,"CFB",{enumerable:!0,get:function(){return a.CFB}});var o=r(617);Object.defineProperty(t,"CTR",{enumerable:!0,get:function(){return o.CTR}});var l=r(5116);Object.defineProperty(t,"ECB",{enumerable:!0,get:function(){return l.ECB}});var c=r(555);Object.defineProperty(t,"OFB",{enumerable:!0,get:function(){return c.OFB}});var u=r(8249);Object.defineProperty(t,"pkcs7Pad",{enumerable:!0,get:function(){return u.pkcs7Pad}}),Object.defineProperty(t,"pkcs7Strip",{enumerable:!0,get:function(){return u.pkcs7Strip}})},1295:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,B4:()=>l,P5:()=>o,WM:()=>c,im:()=>u,lD:()=>a});let n=BigInt(0x100000000-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function a(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){let{h:a,l:o}=s(e[i],t);[r[i],n[i]]=[a,o]}return[r,n]}let o=(e,t,r)=>e<<r|t>>>32-r,l=(e,t,r)=>t<<r|e>>>32-r,c=(e,t,r)=>t<<r-32|e>>>64-r,u=(e,t,r)=>e<<r-32|t>>>64-r,d={fromBig:s,split:a,toBig:(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:o,rotlSL:l,rotlBH:c,rotlBL:u,add:function(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/0x100000000|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/0x100000000|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/0x100000000|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)}},1331:e=>{e.exports={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}},1370:(e,t)=>{"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,s=l(e),a=s[0],o=s[1],c=new i((a+o)*3/4-o),u=0,d=o>0?a-4:a;for(r=0;r<d;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[u++]=255&t),1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],a=0,o=n-i;a<o;a+=16383)s.push(function(e,t,n){for(var i,s=[],a=t;a<n;a+=3)i=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[i>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}(e,a,a+16383>o?o:a+16383));return 1===i?s.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&s.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=s.length;a<o;++a)r[a]=s[a],n[s.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},1414:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});var n=r(5364),i=r(6269);class s extends i.Vw{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.O8)(this.buffer)}update(e){(0,n.t2)(this);let{view:t,buffer:r,blockLen:s}=this,a=(e=(0,i.ZJ)(e)).length;for(let n=0;n<a;){let o=Math.min(s-this.pos,a-n);if(o===s){let t=(0,i.O8)(e);for(;s<=a-n;n+=s)this.process(t,n);continue}r.set(e.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.t2)(this),(0,n.CG)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let e=o;e<s;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(0xffffffff),a=Number(r>>i&s),o=Number(r&s),l=4*!!n,c=4*!n;e.setUint32(t+l,a,n),e.setUint32(t+c,o,n)}(r,s-8,BigInt(8*this.length),a),this.process(r,0);let l=(0,i.O8)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)l.setUint32(4*e,d[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.length=n,e.pos=a,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}},1417:e=>{function t(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,a=(e[s]||0)+1;e[s]=a,a>=r&&(t=i,r=a)}return t}},1432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.solidityPackedSha256=t.solidityPackedKeccak256=t.solidityPacked=void 0;let n=r(9111),i=r(6870),s=r(8662),a=RegExp("^bytes([0-9]+)$"),o=RegExp("^(u?int)([0-9]*)$"),l=RegExp("^(.*)\\[([0-9]*)\\]$");function c(e,t){(0,s.assertArgument)(e.length===t.length,"wrong number of values; expected ${ types.length }","values",t);let r=[];return e.forEach(function(e,i){r.push(function e(t,r,i){switch(t){case"address":if(i)return(0,s.getBytes)((0,s.zeroPadValue)(r,32));return(0,s.getBytes)((0,n.getAddress)(r));case"string":return(0,s.toUtf8Bytes)(r);case"bytes":return(0,s.getBytes)(r);case"bool":if(r=r?"0x01":"0x00",i)return(0,s.getBytes)((0,s.zeroPadValue)(r,32));return(0,s.getBytes)(r)}let c=t.match(o);if(c){let e="int"===c[1],n=parseInt(c[2]||"256");return(0,s.assertArgument)((!c[2]||c[2]===String(n))&&n%8==0&&0!==n&&n<=256,"invalid number type","type",t),i&&(n=256),e&&(r=(0,s.toTwos)(r,n)),(0,s.getBytes)((0,s.zeroPadValue)((0,s.toBeArray)(r),n/8))}if(c=t.match(a)){let e=parseInt(c[1]);return((0,s.assertArgument)(String(e)===c[1]&&0!==e&&e<=32,"invalid bytes type","type",t),(0,s.assertArgument)((0,s.dataLength)(r)===e,`invalid value for ${t}`,"value",r),i)?(0,s.getBytes)((0,s.zeroPadBytes)(r,32)):r}if((c=t.match(l))&&Array.isArray(r)){let n=c[1],i=parseInt(c[2]||String(r.length));(0,s.assertArgument)(i===r.length,`invalid array length for ${t}`,"value",r);let a=[];return r.forEach(function(t){a.push(e(n,t,!0))}),(0,s.getBytes)((0,s.concat)(a))}(0,s.assertArgument)(!1,"invalid type","type",t)}(e,t[i]))}),(0,s.hexlify)((0,s.concat)(r))}t.solidityPacked=c,t.solidityPackedKeccak256=function(e,t){return(0,i.keccak256)(c(e,t))},t.solidityPackedSha256=function(e,t){return(0,i.sha256)(c(e,t))}},1436:(e,t,r)=>{"use strict";function n(e){return null!=e&&"function"==typeof e.start&&"function"==typeof e.stop}async function i(...e){let t=[];for(let r of e)n(r)&&t.push(r);await Promise.all(t.map(async e=>{null!=e.beforeStart&&await e.beforeStart()})),await Promise.all(t.map(async e=>{await e.start()})),await Promise.all(t.map(async e=>{null!=e.afterStart&&await e.afterStart()}))}async function s(...e){let t=[];for(let r of e)n(r)&&t.push(r);await Promise.all(t.map(async e=>{null!=e.beforeStop&&await e.beforeStop()})),await Promise.all(t.map(async e=>{await e.stop()})),await Promise.all(t.map(async e=>{null!=e.afterStop&&await e.afterStop()}))}r.d(t,{ds:()=>s,ni:()=>i,nw:()=>n})},1456:(e,t,r)=>{"use strict";r.d(t,{Ab:()=>u,Dg:()=>f,JJ:()=>l,Ro:()=>g,ST:()=>o,WZ:()=>p,c4:()=>b,dK:()=>c,nD:()=>y,up:()=>m});var n=r(8121),i=r(9982);let s=BigInt(0),a=BigInt(1);function o(e,t){let r=d(e,"value"),n=BigInt(p(t,"width"));return((0,i.vA)(r>>n===s,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),r>>n-a)?-((~r&(a<<n)-a)+a):r}function l(e,t){let r=u(e,"value"),n=BigInt(p(t,"width")),o=a<<n-a;return r<s?(r=-r,(0,i.vA)(r<=o,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~r&(a<<n)-a)+a):((0,i.vA)(r<o,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),r)}function c(e,t){return d(e,"value")&(a<<BigInt(p(t,"bits")))-a}function u(e,t){switch(typeof e){case"bigint":return e;case"number":return(0,i.MR)(Number.isInteger(e),"underflow",t||"value",e),(0,i.MR)(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");if("-"===e[0]&&"-"!==e[1])return-BigInt(e.substring(1));return BigInt(e)}catch(r){(0,i.MR)(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}(0,i.MR)(!1,"invalid BigNumberish value",t||"value",e)}function d(e,t){let r=u(e,t);return(0,i.vA)(r>=s,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}let h="0123456789abcdef";function f(e){if(e instanceof Uint8Array){let t="0x0";for(let r of e)t+=h[r>>4],t+=h[15&r];return BigInt(t)}return u(e)}function p(e,t){switch(typeof e){case"bigint":return(0,i.MR)(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),Number(e);case"number":return(0,i.MR)(Number.isInteger(e),"underflow",t||"value",e),(0,i.MR)(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return p(BigInt(e),t)}catch(r){(0,i.MR)(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}(0,i.MR)(!1,"invalid numeric value",t||"value",e)}function g(e){return p(f(e))}function m(e,t){let r=d(e,"value").toString(16);if(null==t)r.length%2&&(r="0"+r);else{let n=p(t,"width");for((0,i.vA)(2*n>=r.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<2*n;)r="0"+r}return"0x"+r}function b(e){let t=d(e,"value");if(t===s)return new Uint8Array([]);let r=t.toString(16);r.length%2&&(r="0"+r);let n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){let t=2*e;n[e]=parseInt(r.substring(t,t+2),16)}return n}function y(e){let t=(0,n.c$)((0,n.f)(e)?e:b(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}},1546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wordlists=t.WordlistOwlA=t.WordlistOwl=t.LangEn=t.Wordlist=void 0;var n=r(4326);Object.defineProperty(t,"Wordlist",{enumerable:!0,get:function(){return n.Wordlist}});var i=r(5250);Object.defineProperty(t,"LangEn",{enumerable:!0,get:function(){return i.LangEn}});var s=r(9313);Object.defineProperty(t,"WordlistOwl",{enumerable:!0,get:function(){return s.WordlistOwl}});var a=r(5428);Object.defineProperty(t,"WordlistOwlA",{enumerable:!0,get:function(){return a.WordlistOwlA}});var o=r(8410);Object.defineProperty(t,"wordlists",{enumerable:!0,get:function(){return o.wordlists}})},1555:(e,t,r)=>{"use strict";r.d(t,{a:()=>n});let n=(0,r(7175).B)("div");n.displayName="Box"},1576:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHA2=void 0;let n=r(3810),i=r(5636);class s extends i.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.createView)(this.buffer)}update(e){(0,n.exists)(this);let{view:t,buffer:r,blockLen:s}=this,a=(e=(0,i.toBytes)(e)).length;for(let n=0;n<a;){let o=Math.min(s-this.pos,a-n);if(o===s){let t=(0,i.createView)(e);for(;s<=a-n;n+=s)this.process(t,n);continue}r.set(e.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.exists)(this),(0,n.output)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:a}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let e=o;e<s;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(0xffffffff),a=Number(r>>i&s),o=Number(r&s),l=4*!!n,c=4*!n;e.setUint32(t+l,a,n),e.setUint32(t+c,o,n)}(r,s-8,BigInt(8*this.length),a),this.process(r,0);let l=(0,i.createView)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)l.setUint32(4*e,d[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.length=n,e.pos=a,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}t.SHA2=s},1633:(e,t,r)=>{e.exports={RBTree:r(2887),BinTree:r(4772)}},1643:(e,t,r)=>{"use strict";r.d(t,{Ny:()=>o});var n=r(9608);class i{buffer;mask;top;btm;next;constructor(e){if(!(e>0)||(e-1&e)!=0)throw Error("Max size for a FixedFIFO should be a power of two");this.buffer=Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return void 0===this.buffer[this.top]&&(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(void 0!==e)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return void 0===this.buffer[this.btm]}}class s{size;hwm;head;tail;constructor(e={}){this.hwm=e.splitLimit??16,this.head=new i(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let t=this.head;this.head=t.next=new i(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(void 0===e&&null!=this.tail.next){let t=this.tail.next;this.tail.next=null,this.tail=t,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}}class a extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.code=t??"ABORT_ERR"}}function o(e={}){return function(e,t){let r,i,o;let l=(t=t??{}).onEnd,c=new s,u=(0,n.A)(),d=e=>null!=i?i(e):(c.push(e),r),h=e=>(c=new s,null!=i)?i({error:e}):(c.push({error:e}),r),f=e=>{if(o)return r;if(t?.objectMode!==!0&&e?.byteLength==null)throw Error("objectMode was not true but tried to push non-Uint8Array value");return d({done:!1,value:e})},p=e=>o?r:(o=!0,null!=e?h(e):d({done:!0}));if(r={[Symbol.asyncIterator](){return this},next:async()=>{try{if(!c.isEmpty())return e(c);if(o)return{done:!0};return await new Promise((t,n)=>{i=s=>{i=null,c.push(s);try{t(e(c))}catch(e){n(e)}return r}})}finally{c.isEmpty()&&queueMicrotask(()=>{u.resolve(),u=(0,n.A)()})}},return:()=>(c=new s,p(),{done:!0}),throw:e=>(p(e),{done:!0}),push:f,end:p,get readableLength(){return c.size},onEmpty:async e=>{let t,r;let n=e?.signal;if(n?.throwIfAborted(),!c.isEmpty()){null!=n&&(t=new Promise((e,t)=>{r=()=>{t(new a)},n.addEventListener("abort",r)}));try{await Promise.race([u.promise,t])}finally{null!=r&&null!=n&&n?.removeEventListener("abort",r)}}}},null==l)return r;let g=r;return r={[Symbol.asyncIterator](){return this},next:()=>g.next(),throw:e=>(g.throw(e),null!=l&&(l(e),l=void 0),{done:!0}),return:()=>(g.return(),null!=l&&(l(),l=void 0),{done:!0}),push:f,end:e=>(g.end(e),null!=l&&(l(e),l=void 0),r),get readableLength(){return g.readableLength},onEmpty:e=>g.onEmpty(e)}}(e=>{let t=e.shift();if(null==t)return{done:!0};if(null!=t.error)throw t.error;return{done:!0===t.done,value:t.value}},e)}},1680:(e,t,r)=>{"use strict";r.d(t,{Az:()=>k,jD:()=>E,Ug:()=>A,sR:()=>v,XL:()=>w});var n=r(4892),i=r(9827),s=r(5839),a=r(9700),o=r(4057),l=r(3315),c=r(6572),u=r(6054),d=r(1070),h=r(6552),f=r(9865);let p=Symbol.for("nodejs.util.inspect.custom");class g{type;multihash;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[d.e]=!0;toString(){return null==this.string&&(this.string=s.base58btc.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return a.TO.createV1(114,this.multihash)}toJSON(){return this.toString()}equals(e){if(null==e)return!1;if(e instanceof Uint8Array)return(0,h.a)(this.multihash.bytes,e);if("string"==typeof e)return this.toString()===e;if(e?.toMultihash()?.bytes!=null)return(0,h.a)(this.multihash.bytes,e.toMultihash().bytes);throw Error("not valid Id")}[p](){return`PeerId(${this.toString()})`}}class m extends g{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}}class b extends g{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.publicKey}}class y extends g{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.publicKey}}class x{type="url";multihash;publicKey;url;constructor(e){this.url=e.toString(),this.multihash=l.identity.digest((0,f.s)(this.url))}[p](){return`PeerId(${this.url})`}[d.e]=!0;toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return a.TO.createV1(2336,this.toMultihash())}toJSON(){return this.toString()}equals(e){return null!=e&&(e instanceof Uint8Array&&(e=(0,u.d)(e)),e.toString()===this.toString())}}function w(e,t){let r;if("1"===e.charAt(0)||"Q"===e.charAt(0))r=o.D4(s.base58btc.decode(`z${e}`));else{if(e.startsWith("k51qzi5uqu5")||e.startsWith("kzwfwjn5ji4")||e.startsWith("k2k4r8")||e.startsWith("bafz"))return k(a.TO.parse(e));if(null==t)throw new i.gG('Please pass a multibase decoder for strings that do not start with "1" or "Q"');r=o.D4(t.decode(e))}return E(r)}function v(e){if("Ed25519"===e.type)return new b({multihash:e.toCID().multihash,publicKey:e});if("secp256k1"===e.type)return new y({multihash:e.toCID().multihash,publicKey:e});if("RSA"===e.type)return new m({multihash:e.toCID().multihash,publicKey:e});throw new i.$q}function A(e){return v(e.publicKey)}function E(e){if(e.code===c.sha256.code)return new m({multihash:e});if(e.code===l.identity.code)try{let t=(0,n.Sq)(e);if("Ed25519"===t.type)return new b({multihash:e,publicKey:t});if("secp256k1"===t.type)return new y({multihash:e,publicKey:t})}catch(t){return new x(new URL((0,u.d)(e.digest)))}throw new i.$V("Supplied PeerID Multihash is invalid")}function k(e){if(e?.multihash==null||null==e.version||1===e.version&&114!==e.code&&2336!==e.code)throw new i.sY("Supplied PeerID CID is invalid");return 2336===e.code?new x(new URL((0,u.d)(e.multihash.digest))):E(e.multihash)}},1725:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SiweMessage=void 0;let n=r(4122),i=r(2513),s=r(3679),a=r(6235);class o{constructor(e){if("string"==typeof e){let t=new n.ParsedMessage(e);this.scheme=t.scheme,this.domain=t.domain,this.address=t.address,this.statement=t.statement,this.uri=t.uri,this.version=t.version,this.nonce=t.nonce,this.issuedAt=t.issuedAt,this.expirationTime=t.expirationTime,this.notBefore=t.notBefore,this.requestId=t.requestId,this.chainId=t.chainId,this.resources=t.resources}else this.scheme=null==e?void 0:e.scheme,this.domain=e.domain,this.address=e.address,this.statement=null==e?void 0:e.statement,this.uri=e.uri,this.version=e.version,this.chainId=e.chainId,this.nonce=e.nonce,this.issuedAt=null==e?void 0:e.issuedAt,this.expirationTime=null==e?void 0:e.expirationTime,this.notBefore=null==e?void 0:e.notBefore,this.requestId=null==e?void 0:e.requestId,this.resources=null==e?void 0:e.resources,"string"==typeof this.chainId&&(this.chainId=(0,n.parseIntegerNumber)(this.chainId)),this.nonce=this.nonce||(0,a.generateNonce)(),new n.ParsedMessage(this.prepareMessage())}toMessage(){let e=this.scheme?`${this.scheme}://${this.domain}`:this.domain,t=`${e} wants you to sign in with your Ethereum account:`,r=`URI: ${this.uri}`,n=[t,this.address].join("\n"),i=`Version: ${this.version}`;this.nonce||(this.nonce=(0,a.generateNonce)());let s=[r,i,"Chain ID: "+this.chainId,`Nonce: ${this.nonce}`];if(this.issuedAt=this.issuedAt||new Date().toISOString(),s.push(`Issued At: ${this.issuedAt}`),this.expirationTime){let e=`Expiration Time: ${this.expirationTime}`;s.push(e)}this.notBefore&&s.push(`Not Before: ${this.notBefore}`),this.requestId&&s.push(`Request ID: ${this.requestId}`),this.resources&&s.push(["Resources:",...this.resources.map(e=>`- ${e}`)].join("\n"));let o=s.join("\n");return n=[n,this.statement].join("\n\n"),void 0!==this.statement&&(n+="\n"),[n,o].join("\n")}prepareMessage(){let e;return this.version,e=this.toMessage()}async verify(e,t={suppressExceptions:!1}){return new Promise((r,n)=>{var o,l,c;let u,d;let h=e=>t.suppressExceptions?r(e):n(e),f=(0,a.checkInvalidKeys)(e,s.VerifyParamsKeys);f.length>0&&h({success:!1,data:this,error:Error(`${f.join(", ")} is/are not valid key(s) for VerifyParams.`)});let p=(0,a.checkInvalidKeys)(t,s.VerifyOptsKeys);p.length>0&&h({success:!1,data:this,error:Error(`${p.join(", ")} is/are not valid key(s) for VerifyOpts.`)});let{signature:g,scheme:m,domain:b,nonce:y,time:x}=e;m&&m!==this.scheme&&h({success:!1,data:this,error:new s.SiweError(s.SiweErrorType.SCHEME_MISMATCH,m,this.scheme)}),b&&b!==this.domain&&h({success:!1,data:this,error:new s.SiweError(s.SiweErrorType.DOMAIN_MISMATCH,b,this.domain)}),y&&y!==this.nonce&&h({success:!1,data:this,error:new s.SiweError(s.SiweErrorType.NONCE_MISMATCH,y,this.nonce)});let w=new Date(x||new Date);if(this.expirationTime){let e=new Date(this.expirationTime);w.getTime()>=e.getTime()&&h({success:!1,data:this,error:new s.SiweError(s.SiweErrorType.EXPIRED_MESSAGE,`${w.toISOString()} < ${e.toISOString()}`,`${w.toISOString()} >= ${e.toISOString()}`)})}if(this.notBefore){let e=new Date(this.notBefore);w.getTime()<e.getTime()&&h({success:!1,data:this,error:new s.SiweError(s.SiweErrorType.NOT_YET_VALID_MESSAGE,`${w.toISOString()} >= ${e.toISOString()}`,`${w.toISOString()} < ${e.toISOString()}`)})}try{u=this.prepareMessage()}catch(e){h({success:!1,data:this,error:e})}try{d=(0,i.verifyMessage)(u,g)}catch(e){console.error(e)}if(d===this.address)return r({success:!0,data:this});{let n=(0,a.checkContractWalletSignature)(this,g,t.provider).then(e=>e?{success:!0,data:this}:{success:!1,data:this,error:new s.SiweError(s.SiweErrorType.INVALID_SIGNATURE,d,`Resolved address to be ${this.address}`)}).catch(e=>({success:!1,data:this,error:e}));Promise.all([n,null===(c=null===(l=null===(o=null==t?void 0:t.verificationFallback)||void 0===o?void 0:o.call(t,e,t,this,n))||void 0===l?void 0:l.then(e=>e))||void 0===c?void 0:c.catch(e=>e)]).then(([e,t])=>{if(t){if(t.success)return r(t);h(t)}else{if(e.success)return r(e);h(e)}})}})}}t.SiweMessage=o},1735:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBytes32String=t.encodeBytes32String=void 0;let n=r(8662);t.encodeBytes32String=function(e){let t=(0,n.toUtf8Bytes)(e);if(t.length>31)throw Error("bytes32 string must be less than 32 bytes");return(0,n.zeroPadBytes)(t,32)},t.decodeBytes32String=function(e){let t=(0,n.getBytes)(e,"bytes");if(32!==t.length)throw Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw Error("invalid bytes32 string - no null terminator");let r=31;for(;0===t[r-1];)r--;return(0,n.toUtf8String)(t.slice(0,r))}},1774:(e,t,r)=>{"use strict";function n(e){if(null!=e){if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"==typeof e.next)return e}throw Error("argument is not an iterator or iterable")}r.d(t,{h:()=>n})},1813:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=void 0,t.keccakP=x;let n=r(272),i=r(5603),s=BigInt(0),a=BigInt(1),o=BigInt(2),l=BigInt(7),c=BigInt(256),u=BigInt(113),d=[],h=[],f=[];for(let e=0,t=a,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],d.push(2*(5*n+r)),h.push((e+1)*(e+2)/2%64);let i=s;for(let e=0;e<7;e++)(t=(t<<a^(t>>l)*u)%c)&o&&(i^=a<<(a<<BigInt(e))-a);f.push(i)}let p=(0,n.split)(f,!0),g=p[0],m=p[1],b=(e,t,r)=>r>32?(0,n.rotlBH)(e,t,r):(0,n.rotlSH)(e,t,r),y=(e,t,r)=>r>32?(0,n.rotlBL)(e,t,r):(0,n.rotlSL)(e,t,r);function x(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,s=r[i],a=r[i+1],o=b(s,a,1)^r[n],l=y(s,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=h[r],s=b(t,i,n),a=y(t,i,n),o=d[r];t=e[o],i=e[o+1],e[o]=s,e[o+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=g[n],e[1]^=m[n]}(0,i.clean)(r)}class w extends i.Hash{constructor(e,t,r,n=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=s,(0,i.anumber)(r),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,i.swap32IfBE)(this.state32),x(this.state32,this.rounds),(0,i.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(e){(0,i.aexists)(this),e=(0,i.toBytes)(e),(0,i.abytes)(e);let{blockLen:t,state:r}=this,n=e.length;for(let i=0;i<n;){let s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,i.aexists)(this,!1),(0,i.abytes)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,i.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,i.aoutput)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,i.clean)(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new w(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}t.Keccak=w;let v=(e,t,r)=>(0,i.createHasher)(()=>new w(t,e,r));t.sha3_224=v(6,144,28),t.sha3_256=v(6,136,32),t.sha3_384=v(6,104,48),t.sha3_512=v(6,72,64),t.keccak_224=v(1,144,28),t.keccak_256=v(1,136,32),t.keccak_384=v(1,104,48),t.keccak_512=v(1,72,64);let A=(e,t,r)=>(0,i.createXOFer)((n={})=>new w(t,e,void 0===n.dkLen?r:n.dkLen,!0));t.shake128=A(31,168,16),t.shake256=A(31,136,32)},1819:(e,t,r)=>{"use strict";r.d(t,{$C:()=>s,tG:()=>o});var n=r(9982),i=r(4922);function s(e){return e&&"function"==typeof e.getAddress}async function a(e,t){let r=await t;return(null==r||"0x0000000000000000000000000000000000000000"===r)&&((0,n.vA)("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),(0,n.MR)(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),(0,i.b)(r)}function o(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?(0,i.b)(e):((0,n.vA)(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),a(e,t.resolveName(e))):s(e)?a(e,e.getAddress()):e&&"function"==typeof e.then?a(e,e):void(0,n.MR)(!1,"unsupported addressable value","target",e)}},1842:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZeroAddress=void 0,t.ZeroAddress="0x0000000000000000000000000000000000000000"},1857:(e,t,r)=>{"use strict";r.d(t,{J9:()=>d,VS:()=>h,eB:()=>f,tG:()=>p,uI:()=>m,z5:()=>g});var n=r(8616),i=r(8121),s=r(1456),a=r(9982),o=r(936);let l=BigInt(0);function c(e){return null==e?null:e}function u(e){return null==e?null:e.toString()}class d{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,r){(0,n.n)(this,{gasPrice:c(e),maxFeePerGas:c(t),maxPriorityFeePerGas:c(r)})}toJSON(){let{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:u(e),maxFeePerGas:u(t),maxPriorityFeePerGas:u(r)}}}function h(e){let t={};for(let r of(e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=(0,i.c$)(e.data)),"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/)))r in e&&null!=e[r]&&(t[r]=(0,s.Ab)(e[r],`request.${r}`));for(let r of"type,nonce".split(/,/))r in e&&null!=e[r]&&(t[r]=(0,s.WZ)(e[r],`request.${r}`));return e.accessList&&(t.accessList=(0,o.$)(e.accessList)),e.authorizationList&&(t.authorizationList=e.authorizationList.slice()),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(e=>(0,i.f)(e)?(0,i.c$)(e):Object.assign({},e))),t}class f{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#O;constructor(e,t){this.#O=e.transactions.map(e=>"string"!=typeof e?new m(e,t):e),(0,n.n)(this,{provider:t,hash:c(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:c(e.prevRandao),extraData:e.extraData,baseFeePerGas:c(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#O.map(e=>"string"==typeof e?e:e.hash)}get prefetchedTransactions(){let e=this.#O.slice();return 0===e.length?[]:((0,a.vA)("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){let{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:n,gasUsed:i,hash:s,miner:a,prevRandao:o,nonce:l,number:c,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:m}=this;return{_type:"Block",baseFeePerGas:u(e),difficulty:u(t),extraData:r,gasLimit:u(n),gasUsed:u(i),blobGasUsed:u(this.blobGasUsed),excessBlobGas:u(this.excessBlobGas),hash:s,miner:a,prevRandao:o,nonce:l,number:c,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:m}}[Symbol.iterator](){let e=0,t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#O.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#O[e];else{let r=e.toLowerCase();for(let e of this.#O){if("string"==typeof e){if(e!==r)continue;t=e;break}if(e.hash===r){t=e;break}}}if(null==t)throw Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){let t=this.prefetchedTransactions;if("number"==typeof e)return t[e];for(let r of(e=e.toLowerCase(),t))if(r.hash===e)return r;(0,a.MR)(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){var e;if(!this.isMined())throw Error("");return e=this,{orphan:"drop-block",hash:e.hash,number:e.number}}}class p{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;let r=Object.freeze(e.topics.slice());(0,n.n)(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){let{address:e,blockHash:t,blockNumber:r,data:n,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:n,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:l}}async getBlock(){let e=await this.provider.getBlock(this.blockHash);return(0,a.vA)(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){let e=await this.provider.getTransaction(this.transactionHash);return(0,a.vA)(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){let e=await this.provider.getTransactionReceipt(this.transactionHash);return(0,a.vA)(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){var e;return e=this,{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}}class g{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#S;constructor(e,t){this.#S=Object.freeze(e.logs.map(e=>new p(e,t)));let r=l;null!=e.effectiveGasPrice?r=e.effectiveGasPrice:null!=e.gasPrice&&(r=e.gasPrice),(0,n.n)(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#S}toJSON(){let{to:e,from:t,contractAddress:r,hash:n,index:i,blockHash:s,blockNumber:a,logsBloom:o,logs:l,status:c,root:d}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:a,contractAddress:r,cumulativeGasUsed:u(this.cumulativeGasUsed),from:t,gasPrice:u(this.gasPrice),blobGasUsed:u(this.blobGasUsed),blobGasPrice:u(this.blobGasPrice),gasUsed:u(this.gasUsed),hash:n,index:i,logs:l,logsBloom:o,root:d,status:c,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let e=await this.provider.getBlock(this.blockHash);if(null==e)throw Error("TODO");return e}async getTransaction(){let e=await this.provider.getTransaction(this.hash);if(null==e)throw Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return y(this)}reorderedEvent(e){return(0,a.vA)(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),b(this,e)}}class m{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#I;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.authorizationList=null!=e.authorizationList?e.authorizationList:null,this.#I=-1}toJSON(){let{blockNumber:e,blockHash:t,index:r,hash:n,type:i,to:s,from:a,nonce:o,data:l,signature:c,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:t,blobVersionedHashes:h,chainId:u(this.chainId),data:l,from:a,gasLimit:u(this.gasLimit),gasPrice:u(this.gasPrice),hash:n,maxFeePerGas:u(this.maxFeePerGas),maxPriorityFeePerGas:u(this.maxPriorityFeePerGas),maxFeePerBlobGas:u(this.maxFeePerBlobGas),nonce:o,signature:c,to:s,index:r,type:i,value:u(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){let t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;let t=this.provider.getBlock(e);if(null==t)throw Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){let{tx:e,blockNumber:t}=await (0,n.k)({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){let r=null==e?1:e,i=null==t?0:t,s=this.#I,o=-1,c=-1===s,u=async()=>{if(c)return null;let{blockNumber:e,nonce:t}=await (0,n.k)({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce){s=e;return}if(c)return null;let i=await this.getTransaction();if(!i||null==i.blockNumber)for(-1===o&&(o=s-3)<this.#I&&(o=this.#I);o<=e;){if(c)return null;let t=await this.provider.getBlock(o,!0);if(null==t)break;for(let e of t)if(e===this.hash)return;for(let n=0;n<t.length;n++){let i=await t.getTransaction(n);if(i.from===this.from&&i.nonce===this.nonce){if(c)return null;let t=await this.provider.getTransactionReceipt(i.hash);if(null==t||e-t.blockNumber+1<r)return;let n="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?n="repriced":"0x"===i.data&&i.from===i.to&&i.value===l&&(n="cancelled"),(0,a.vA)(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===n||"cancelled"===n,reason:n,replacement:i.replaceableTransaction(s),hash:i.hash,receipt:t})}}o++}},d=e=>{if(null==e||0!==e.status)return e;(0,a.vA)(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},h=await this.provider.getTransactionReceipt(this.hash);if(0===r)return d(h);if(h){if(1===r||await h.confirmations()>=r)return d(h)}else if(await u(),0===r)return null;let f=new Promise((e,t)=>{let n=[],o=()=>{n.forEach(e=>e())};if(n.push(()=>{c=!0}),i>0){let e=setTimeout(()=>{o(),t((0,a.xz)("wait for transaction timeout","TIMEOUT"))},i);n.push(()=>{clearTimeout(e)})}let l=async n=>{if(await n.confirmations()>=r){o();try{e(d(n))}catch(e){t(e)}}};if(n.push(()=>{this.provider.off(this.hash,l)}),this.provider.on(this.hash,l),s>=0){let e=async()=>{try{await u()}catch(e){if((0,a.bJ)(e,"TRANSACTION_REPLACED")){o(),t(e);return}}c||this.provider.once("block",e)};n.push(()=>{this.provider.off("block",e)}),this.provider.once("block",e)}});return await f}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return(0,a.vA)(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),y(this)}reorderedEvent(e){return(0,a.vA)(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),(0,a.vA)(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),b(this,e)}replaceableTransaction(e){(0,a.MR)(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);let t=new m(this,this.provider);return t.#I=e,t}}function b(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function y(e){return{orphan:"drop-transaction",tx:e}}},1887:(e,t,r)=>{"use strict";var n;r.d(t,{G$:()=>s,rv:()=>i,sG:()=>o,z8:()=>n});let i="StrictSign",s="StrictNoSign";!function(e){e.Accept="accept",e.Ignore="ignore",e.Reject="reject"}(n||(n={}));let a=Symbol.for("@libp2p/pubsub");function o(e){return!!e?.[a]}},1896:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(9608);let i=globalThis.CustomEvent??Event;async function*s(e,t={}){let r,a=t.concurrency??1/0;a<1&&(a=1/0);let o=t.ordered??!1,l=new EventTarget,c=[],u=(0,n.A)(),d=(0,n.A)(),h=!1,f=!1;function p(){return o?c[0]?.done:!!c.find(e=>e.done)}for(l.addEventListener("task-complete",()=>{d.resolve()}),Promise.resolve().then(async()=>{try{for await(let t of e){if(c.length===a&&(u=(0,n.A)(),await u.promise),f)break;let e={done:!1};c.push(e),t().then(t=>{e.done=!0,e.ok=!0,e.value=t,l.dispatchEvent(new i("task-complete"))},t=>{e.done=!0,e.err=t,l.dispatchEvent(new i("task-complete"))})}h=!0,l.dispatchEvent(new i("task-complete"))}catch(e){r=e,l.dispatchEvent(new i("task-complete"))}});;){if(p()||(d=(0,n.A)(),await d.promise),null!=r||(o?yield*function*(){for(;c.length>0&&c[0].done;){let e=c[0];if(c.shift(),e.ok)yield e.value;else throw f=!0,u.resolve(),e.err;u.resolve()}}():yield*function*(){for(;p();)for(let e=0;e<c.length;e++)if(c[e].done){let t=c[e];if(c.splice(e,1),e--,t.ok)yield t.value;else throw f=!0,u.resolve(),t.err;u.resolve()}}(),null!=r))throw r;if(h&&0===c.length)break}}},1925:(e,t,r)=>{let{Buffer:n}=r(2909),i=r(3639),s="UTF8",a="UTF16",o="UTF16BE",l="UTF16LE",c="UTF32",u="UTF32BE",d="UTF32LE",h="UINT7",f="ASCII",p="BINARY",g="UINT8",m="UINT16",b="UINT16LE",y="UINT16BE",x="UINT32",w="UINT32LE",v="UINT32BE",A="ESCAPED",E="STRING",k=function(e){e.type=s;let t=e.data;e.bom=0,t.length>=3&&239===t[0]&&187===t[1]&&191===t[2]&&(e.bom=3)},P=function(e){let t=e.data;switch(e.bom=0,e.type){case a:e.type=o,t.length>=2&&(254===t[0]&&255===t[1]?e.bom=2:255===t[0]&&254===t[1]&&(e.type=l,e.bom=2));break;case o:if(e.type=o,t.length>=2){if(254===t[0]&&255===t[1])e.bom=2;else if(255===t[0]&&254===t[1])throw TypeError(`src type: "${o}" specified but BOM is for "${l}"`)}break;case l:if(e.type=l,t.length>=0){if(254===t[0]&&255===t[1])throw TypeError(`src type: "${l}" specified but BOM is for "${o}"`);255===t[0]&&254===t[1]&&(e.bom=2)}break;default:throw TypeError(`UTF16 BOM: src type "${e.type}" unrecognized`)}},S=function(e){let t=e.data;switch(e.bom=0,e.type){case c:e.type=u,t.length>=4&&(0===t[0]&&0===t[1]&&254===t[2]&&255===t[3]&&(e.bom=4),255===t[0]&&254===t[1]&&0===t[2]&&0===t[3]&&(e.type=d,e.bom=4));break;case u:if(e.type=u,t.length>=4&&(0===t[0]&&0===t[1]&&254===t[2]&&255===t[3]&&(e.bom=4),255===t[0]&&254===t[1]&&0===t[2]&&0===t[3]))throw TypeError(`src type: ${u} specified but BOM is for ${d}"`);break;case d:if(e.type=d,t.length>=4){if(0===t[0]&&0===t[1]&&254===t[2]&&255===t[3])throw TypeError(`src type: "${d}" specified but BOM is for "${u}"`);255===t[0]&&254===t[1]&&0===t[2]&&0===t[3]&&(e.bom=4)}break;default:throw TypeError(`UTF32 BOM: src type "${e.type}" unrecognized`)}},I=function(e,t){let r=function(e){let t={type:"",base64:!1},r=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(e);return r&&(r[2]&&(t.type=r[2].toUpperCase()),r[1]&&(t.base64=!0)),t}(e.toUpperCase());if(r.base64){if(r.type===E)throw TypeError(`type: "${e} "BASE64:" prefix not allowed with type ${E}`);if(n.isBuffer(t))r.data=i.base64.decode(t);else if("string"==typeof t){let e=n.from(t,"ascii");r.data=i.base64.decode(e)}else throw TypeError(`type: "${e} unrecognized data type: typeof(data): ${typeof t}`)}else r.data=t;switch(r.type){case s:k(r);break;case a:case o:case l:P(r);break;case c:case u:case d:S(r);break;case m:r.type=y;break;case x:r.type=v;break;case f:r.type=h;break;case p:r.type=g;break;case h:case g:case b:case y:case w:case v:case E:case A:break;default:throw TypeError(`type: "${e}" not recognized`)}if(r.type===E){if("string"!=typeof r.data)throw TypeError(`type: "${e}" but data is not a string`)}else if(!n.isBuffer(r.data))throw TypeError(`type: "${e}" but data is not a Buffer`);return r},T=function(e,t){if(!Array.isArray(t))throw TypeError(`dst chars: not array: "${typeof t}`);if("string"!=typeof e)throw TypeError(`dst type: not string: "${typeof e}`);let r=function(e){let t,r;let n={crlf:!1,lf:!1,base64:!1,type:""};for(;;){if(r=e,"CRLF:"===(t=e.slice(0,5))){n.crlf=!0,r=e.slice(5);break}"LF:"===(t=e.slice(0,3))&&(n.lf=!0,r=e.slice(3));break}return 1===(t=r.split(":")).length?n.type=t[0]:2===t.length&&"BASE64"===t[1]&&(n.base64=!0,n.type=t[0]),n}(e.toUpperCase());switch(r.type){case s:case o:case l:case u:case d:case h:case g:case b:case y:case w:case v:case A:break;case E:if(r.base64)throw TypeError(`":BASE64" suffix not allowed with type ${E}`);break;case f:r.type=h;break;case p:r.type=g;break;case a:r.type=o;break;case c:r.type=u;break;case m:r.type=y;break;case x:r.type=v;break;default:throw TypeError(`dst type unrecognized: "${e}" : must have form [crlf:|lf:]type[:base64]`)}return r},_=function(e,t){switch(e){case s:return i.utf8.encode(t);case o:return i.utf16be.encode(t);case l:return i.utf16le.encode(t);case u:return i.utf32be.encode(t);case d:return i.utf32le.encode(t);case h:return i.uint7.encode(t);case g:return i.uint8.encode(t);case y:return i.uint16be.encode(t);case b:return i.uint16le.encode(t);case v:return i.uint32be.encode(t);case w:return i.uint32le.encode(t);case E:return i.string.encode(t);case A:return i.escaped.encode(t);default:throw TypeError(`encode type "${e}" not recognized`)}},C=function(e){switch(e.type){case s:return i.utf8.decode(e.data,e.bom);case l:return i.utf16le.decode(e.data,e.bom);case o:return i.utf16be.decode(e.data,e.bom);case u:return i.utf32be.decode(e.data,e.bom);case d:return i.utf32le.decode(e.data,e.bom);case h:return i.uint7.decode(e.data);case g:return i.uint8.decode(e.data);case y:return i.uint16be.decode(e.data);case b:return i.uint16le.decode(e.data);case v:return i.uint32be.decode(e.data);case w:return i.uint32le.decode(e.data);case E:return i.string.decode(e.data);case A:return i.escaped.decode(e.data);default:throw TypeError(`decode type "${e.type}" not recognized`)}};t.decode=function(e,t){return C(I(e,t))},t.encode=function(e,t){let r,n;let s=T(e,t);return s.crlf?(r=i.lineEnds.crlf(t),n=_(s.type,r)):s.lf?(r=i.lineEnds.lf(t),n=_(s.type,r)):n=_(s.type,t),s.base64&&(n=i.base64.encode(n)),n},t.convert=function(e,r,n){return t.encode(n,t.decode(e,r))}},1970:(e,t,r)=>{"use strict";function n(e=0){return new Uint8Array(e)}function i(e=0){return new Uint8Array(e)}r.d(t,{K:()=>i,c:()=>n})},1990:(e,t,r)=>{"use strict";r.d(t,{Ci:()=>n,Xn:()=>a,gG:()=>s,yI:()=>i});class n extends Error{static name="InvalidMultiaddrError";name="InvalidMultiaddrError"}class i extends Error{static name="ValidationError";name="ValidationError"}class s extends Error{static name="InvalidParametersError";name="InvalidParametersError"}class a extends Error{static name="UnknownProtocolError";name="UnknownProtocolError"}},2079:(e,t,r)=>{let n=r(3110),i=r(1925),s=r(5817),a=r(1331),o="utilities.js: ",l=function(e,t,r){let n;let i=t;for(;;){if(e<=0){i=0,n=0;break}if("number"!=typeof i){i=0,n=e;break}if(i>=e){i=e,n=e;break}if("number"!=typeof r){n=e;break}(n=i+r)>e&&(n=e);break}return{beg:i,end:n}};t.htmlToPage=function(e,t){if("string"!=typeof e)throw Error(`${o}htmlToPage: input HTML is not a string`);let r="";return r+="<!DOCTYPE html>\n",r+='<html lang="en">\n',r+="<head>\n",r+='<meta charset="utf-8">\n',r+=`<title>${"string"!=typeof t?"htmlToPage":t}</title>
`,r+="<style>\n",r+=s(),r+="</style>\n",r+="</head>\n<body>\n",r+=`<p>${new Date}</p>
`,r+=e,r+="</body>\n</html>\n"},t.parserResultToHtml=function(e,t){let r,i,s=null;"string"==typeof t&&""!==t&&(s=t),r=!0===e.success?`<span class="${n.CLASS_MATCH}">true</span>`:`<span class="${n.CLASS_NOMATCH}">false</span>`,i=e.state===a.EMPTY?`<span class="${n.CLASS_EMPTY}">EMPTY</span>`:e.state===a.MATCH?`<span class="${n.CLASS_MATCH}">MATCH</span>`:e.state===a.NOMATCH?`<span class="${n.CLASS_NOMATCH}">NOMATCH</span>`:`<span class="${n.CLASS_NOMATCH}">unrecognized</span>`;let o="";return o+=`<table class="${n.CLASS_STATE}">
`,s&&(o+=`<caption>${s}</caption>
`),o+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
<tr><td>parser success</td><td>${r}</td>
<td><span class="${n.CLASS_MATCH}">true</span> if the parse succeeded,
 <span class="${n.CLASS_NOMATCH}">false</span> otherwise<br><i>NOTE: for success, entire string must be matched</i></td></tr>
<tr><td>parser state</td><td>${i}</td>
<td><span class="${n.CLASS_EMPTY}">EMPTY</span>, <span class="${n.CLASS_MATCH}">MATCH</span> or 
<span class="${n.CLASS_NOMATCH}">NOMATCH</span></td></tr>
<tr><td>string length</td><td>${e.length}</td><td>length of the input (sub)string</td></tr>
<tr><td>matched length</td><td>${e.matched}</td><td>number of input string characters matched</td></tr>
<tr><td>max matched</td><td>${e.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
<tr><td>max tree depth</td><td>${e.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
<tr><td>node hits</td><td>${e.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
<tr><td>input length</td><td>${e.inputLength}</td><td>length of full input string</td></tr>
<tr><td>sub-string begin</td><td>${e.subBegin}</td><td>sub-string first character index</td></tr>
<tr><td>sub-string end</td><td>${e.subEnd}</td><td>sub-string end-of-string index</td></tr>
<tr><td>sub-string length</td><td>${e.subLength}</td><td>sub-string length</td></tr>
</table>
`},t.charsToString=function(e,t,r){let n,s;if("number"==typeof t){if(t>=e.length)return"";n=t<0?0:t}else n=0;if("number"==typeof r){if(r<=0)return"";s=r>e.length-n?e.length:n+r}else s=e.length;return n<s?i.encode("UTF16LE",e.slice(n,s)).toString("utf16le"):""},t.stringToChars=function(e){return i.decode("STRING",e)},t.opcodeToString=function(e){let t="unknown";switch(e){case a.ALT:t="ALT";break;case a.CAT:t="CAT";break;case a.RNM:t="RNM";break;case a.UDT:t="UDT";break;case a.AND:t="AND";break;case a.NOT:t="NOT";break;case a.REP:t="REP";break;case a.TRG:t="TRG";break;case a.TBS:t="TBS";break;case a.TLS:t="TLS";break;case a.BKR:t="BKR";break;case a.BKA:t="BKA";break;case a.BKN:t="BKN";break;case a.ABG:t="ABG";break;case a.AEN:t="AEN";break;default:throw Error("unrecognized opcode")}return t},t.stateToString=function(e){let t="unknown";switch(e){case a.ACTIVE:t="ACTIVE";break;case a.MATCH:t="MATCH";break;case a.EMPTY:t="EMPTY";break;case a.NOMATCH:t="NOMATCH";break;default:throw Error("unrecognized state")}return t},t.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],t.charToHex=function(e){let t=e.toString(16).toUpperCase();switch(t.length){case 1:case 3:case 7:t=`0${t}`;break;case 2:case 6:t=`00${t}`;break;case 4:break;case 5:t=`000${t}`;break;default:throw Error("unrecognized option")}return t},t.charsToDec=function(e,t,r){let n="";if(!Array.isArray(e))throw Error(`${o}charsToDec: input must be an array of integers`);let i=l(e.length,t,r);if(i.end>i.beg){n+=e[i.beg];for(let t=i.beg+1;t<i.end;t+=1)n+=`,${e[t]}`}return n},t.charsToHex=function(e,r,n){let i="";if(!Array.isArray(e))throw Error(`${o}charsToHex: input must be an array of integers`);let s=l(e.length,r,n);if(s.end>s.beg){i+=`\\x${t.charToHex(e[s.beg])}`;for(let r=s.beg+1;r<s.end;r+=1)i+=`,\\x${t.charToHex(e[r])}`}return i},t.charsToHtmlEntities=function(e,t,r){let n="";if(!Array.isArray(e))throw Error(`${o}charsToHex: input must be an array of integers`);let i=l(e.length,t,r);if(i.end>i.beg)for(let t=i.beg;t<i.end;t+=1)n+=`&#x${e[t].toString(16)};`;return n},t.charsToUnicode=function(e,r,n){let i="";if(!Array.isArray(e))throw Error(`${o}charsToUnicode: input must be an array of integers`);let s=l(e.length,r,n);if(s.end>s.beg)for(let r=s.beg;r<s.end;r+=1){var a;+((a=e[r])>=55296&&a<=57343||a>1114111)?i+=` U+${t.charToHex(e[r])}`:i+=`&#${e[r]};`}return i},t.charsToJsUnicode=function(e,r,n){let i="";if(!Array.isArray(e))throw Error(`${o}charsToJsUnicode: input must be an array of integers`);let s=l(e.length,r,n);if(s.end>s.beg){i+=`\\u${t.charToHex(e[s.beg])}`;for(let r=s.beg+1;r<s.end;r+=1)i+=`,\\u${t.charToHex(e[r])}`}return i},t.charsToAscii=function(e,r,n){let i="";if(!Array.isArray(e))throw Error(`${o}charsToAscii: input must be an array of integers`);let s=l(e.length,r,n);for(let r=s.beg;r<s.end;r+=1){let n=e[r];n>=32&&n<=126?i+=String.fromCharCode(n):i+=`\\x${t.charToHex(n)}`}return i},t.charsToAsciiHtml=function(e,r,i){let s;if(!Array.isArray(e))throw Error(`${o}charsToAsciiHtml: input must be an array of integers`);let a="",c=l(e.length,r,i);for(let r=c.beg;r<c.end;r+=1)(s=e[r])<32||127===s?a+=`<span class="${n.CLASS_CTRLCHAR}">${t.asciiChars[s]}</span>`:s>127?a+=`<span class="${n.CLASS_CTRLCHAR}">U+${t.charToHex(s)}</span>`:a+=t.asciiChars[s];return a},t.stringToAsciiHtml=function(e){let t=i.decode("STRING",e);return this.charsToAsciiHtml(t)}},2082:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHasher=t.isogenyMap=t.hash_to_field=t.expand_message_xof=t.expand_message_xmd=void 0;let n=r(7296),i=r(4075),s=i.bytesToNumberBE;function a(e,t){if(e<0||e>=1<<8*t)throw Error(`bad I2OSP call: value=${e} length=${t}`);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function o(e){if(!(e instanceof Uint8Array))throw Error("Uint8Array expected")}function l(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function c(e,t,r,n){o(e),o(t),l(r),t.length>255&&(t=n((0,i.concatBytes)((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:s,blockLen:c}=n,u=Math.ceil(r/s);if(u>255)throw Error("Invalid xmd length");let d=(0,i.concatBytes)(t,a(t.length,1)),h=a(0,c),f=a(r,2),p=Array(u),g=n((0,i.concatBytes)(h,e,f,a(0,1),d));p[0]=n((0,i.concatBytes)(g,a(1,1),d));for(let e=1;e<=u;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(g,p[e-1]),a(e+1,1),d];p[e]=n((0,i.concatBytes)(...t))}return(0,i.concatBytes)(...p).slice(0,r)}function u(e,t,r,n,s){if(o(e),o(t),l(r),t.length>255){let e=Math.ceil(2*n/8);t=s.create({dkLen:e}).update((0,i.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return s.create({dkLen:r}).update(e).update(a(r,2)).update(t).update(a(t.length,1)).digest()}function d(e,t,r){let a;(0,i.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:d,k:h,m:f,hash:p,expand:g,DST:m}=r;o(e),l(t);let b=function(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return(0,i.utf8ToBytes)(e);throw Error("DST must be Uint8Array or string")}(m),y=Math.ceil((d.toString(2).length+h)/8),x=t*f*y;if("xmd"===g)a=c(e,b,x,p);else if("xof"===g)a=u(e,b,x,h,p);else if("_internal_pass"===g)a=e;else throw Error('expand must be "xmd" or "xof"');let w=Array(t);for(let e=0;e<t;e++){let t=Array(f);for(let r=0;r<f;r++){let i=y*(r+e*f),o=a.subarray(i,i+y);t[r]=(0,n.mod)(s(o),d)}w[e]=t}return w}t.expand_message_xmd=c,t.expand_message_xof=u,t.hash_to_field=d,t.isogenyMap=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[i,s,a,o]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));return t=e.div(i,s),n=e.mul(n,e.div(a,o)),{x:t,y:n}}},t.createHasher=function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(n,i){let s=d(n,2,{...r,DST:r.DST,...i}),a=e.fromAffine(t(s[0])),o=e.fromAffine(t(s[1])),l=a.add(o).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,i){let s=d(n,1,{...r,DST:r.encodeDST,...i}),a=e.fromAffine(t(s[0])).clearCofactor();return a.assertValidity(),a}}}},2090:(e,t,r)=>{"use strict";r.d(t,{NZ:()=>Y});var n=r(832),i=r(3683),s=r(4453),a=r(8616),o=r(9982),l=r(8121),c=r(1456),u=r(2783),d=r(2241),h=r(7937);class f{fragment;name;signature;topic;args;constructor(e,t,r){let n=e.name,i=e.format();(0,a.n)(this,{fragment:e,name:n,signature:i,topic:t,args:r})}}class p{fragment;name;args;signature;selector;value;constructor(e,t,r,n){let i=e.name,s=e.format();(0,a.n)(this,{fragment:e,name:i,args:r,signature:s,selector:t,value:n})}}class g{fragment;name;args;signature;selector;constructor(e,t,r){let n=e.name,i=e.format();(0,a.n)(this,{fragment:e,name:n,args:r,signature:i,selector:t})}}class m{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){(0,a.n)(this,{hash:e,_isIndexed:!0})}}let b={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},y={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&b[e.toString()]&&(t=b[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class x{fragments;deploy;fallback;receive;#w;#v;#A;#E;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#A=new Map,this.#w=new Map,this.#v=new Map;let r=[];for(let e of t)try{r.push(h.FK.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}(0,a.n)(this,{fragments:Object.freeze(r)});let n=null,i=!1;this.#E=this.getAbiCoder(),this.fragments.forEach((e,t)=>{let r;switch(e.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}(0,a.n)(this,{deploy:e});return;case"fallback":0===e.inputs.length?i=!0:((0,o.MR)(!n||e.payable!==n.payable,"conflicting fallback fragments",`fragments[${t}]`,e),i=(n=e).payable);return;case"function":r=this.#A;break;case"event":r=this.#v;break;case"error":r=this.#w;break;default:return}let s=e.format();!r.has(s)&&r.set(s,e)}),this.deploy||(0,a.n)(this,{deploy:h.Pw.from("constructor()")}),(0,a.n)(this,{fallback:n,receive:i})}format(e){let t=e?"minimal":"full";return this.fragments.map(e=>e.format(t))}formatJson(){return JSON.stringify(this.fragments.map(e=>e.format("json")).map(e=>JSON.parse(e)))}getAbiCoder(){return u.y.defaultAbiCoder()}#k(e,t,r){if((0,l.Lo)(e)){let t=e.toLowerCase();for(let e of this.#A.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let i=[];for(let[t,r]of this.#A)t.split("(")[0]===e&&i.push(r);if(t){let e=t.length>0?t[t.length-1]:null,r=t.length,s=!0;n.V.isTyped(e)&&"overrides"===e.type&&(s=!1,r--);for(let e=i.length-1;e>=0;e--){let t=i[e].inputs.length;t===r||s&&t===r-1||i.splice(e,1)}for(let e=i.length-1;e>=0;e--){let r=i[e].inputs;for(let s=0;s<t.length;s++)if(n.V.isTyped(t[s])){if(s>=r.length){if("overrides"===t[s].type)continue;i.splice(e,1);break}if(t[s].type!==r[s].baseType){i.splice(e,1);break}}}}if(1===i.length&&t&&t.length!==i[0].inputs.length){let e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&i.splice(0,1)}if(0===i.length)return null;if(i.length>1&&r){let t=i.map(e=>JSON.stringify(e.format())).join(", ");(0,o.MR)(!1,`ambiguous function description (i.e. matches ${t})`,"key",e)}return i[0]}let i=this.#A.get(h.hc.from(e).format());return i||null}getFunctionName(e){let t=this.#k(e,null,!1);return(0,o.MR)(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#k(e,null,!1)}getFunction(e,t){return this.#k(e,t||null,!0)}forEachFunction(e){let t=Array.from(this.#A.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#A.get(n),r)}}#P(e,t,r){if((0,l.Lo)(e)){let t=e.toLowerCase();for(let e of this.#v.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){let i=[];for(let[t,r]of this.#v)t.split("(")[0]===e&&i.push(r);if(t){for(let e=i.length-1;e>=0;e--)i[e].inputs.length<t.length&&i.splice(e,1);for(let e=i.length-1;e>=0;e--){let r=i[e].inputs;for(let s=0;s<t.length;s++)if(n.V.isTyped(t[s])&&t[s].type!==r[s].baseType){i.splice(e,1);break}}}if(0===i.length)return null;if(i.length>1&&r){let t=i.map(e=>JSON.stringify(e.format())).join(", ");(0,o.MR)(!1,`ambiguous event description (i.e. matches ${t})`,"key",e)}return i[0]}let i=this.#v.get(h.Zp.from(e).format());return i||null}getEventName(e){let t=this.#P(e,null,!1);return(0,o.MR)(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#P(e,null,!1)}getEvent(e,t){return this.#P(e,t||null,!0)}forEachEvent(e){let t=Array.from(this.#v.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#v.get(n),r)}}getError(e,t){if((0,l.Lo)(e)){let t=e.toLowerCase();if(y[t])return h.bp.from(y[t].signature);for(let e of this.#w.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let t=[];for(let[r,n]of this.#w)r.split("(")[0]===e&&t.push(n);if(0===t.length)return"Error"===e?h.bp.from("error Error(string)"):"Panic"===e?h.bp.from("error Panic(uint256)"):null;if(t.length>1){let r=t.map(e=>JSON.stringify(e.format())).join(", ");(0,o.MR)(!1,`ambiguous error description (i.e. ${r})`,"name",e)}return t[0]}if("Error(string)"===(e=h.bp.from(e).format()))return h.bp.from("error Error(string)");if("Panic(uint256)"===e)return h.bp.from("error Panic(uint256)");let r=this.#w.get(e);return r||null}forEachError(e){let t=Array.from(this.#w.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#w.get(n),r)}}_decodeParams(e,t){return this.#E.decode(e,t)}_encodeParams(e,t){return this.#E.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);(0,o.MR)(t,"unknown error","fragment",e),e=t}return(0,o.MR)((0,l.ZG)(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,(0,l.ZG)(t,4))}encodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);(0,o.MR)(t,"unknown error","fragment",e),e=t}return(0,l.xW)([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,o.MR)(t,"unknown function","fragment",e),e=t}return(0,o.MR)((0,l.ZG)(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,(0,l.ZG)(t,4))}encodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,o.MR)(t,"unknown function","fragment",e),e=t}return(0,l.xW)([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,o.MR)(t,"unknown function","fragment",e),e=t}let r="invalid length for result data",n=(0,l.Lm)(t);if(n.length%32==0)try{return this.#E.decode(e.outputs,n)}catch(e){r="could not decode result data"}(0,o.vA)(!1,r,"BAD_DATA",{value:(0,l.c$)(n),info:{method:e.name,signature:e.format()}})}makeError(e,t){let r=(0,l.q5)(e,"data"),n=u.y.getBuiltinCallException("call",t,r);if(n.message.startsWith("execution reverted (unknown custom error)")){let e=(0,l.c$)(r.slice(0,4)),t=this.getError(e);if(t)try{let e=this.#E.decode(t.inputs,r.slice(4));n.revert={name:t.name,signature:t.format(),args:e},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch(e){n.message="execution reverted (coult not decode custom error)"}}let i=this.parseTransaction(t);return i&&(n.invocation={method:i.name,signature:i.signature,args:i.args}),n}encodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,o.MR)(t,"unknown function","fragment",e),e=t}return(0,l.c$)(this.#E.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){let t=this.getEvent(e);(0,o.MR)(t,"unknown event","eventFragment",e),e=t}(0,o.vA)(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});let r=[];e.anonymous||r.push(e.topicHash);let n=(e,t)=>"string"===e.type?(0,s.id)(t):"bytes"===e.type?(0,i.S)((0,l.c$)(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=(0,c.up)(t):e.type.match(/^bytes/)?t=(0,l.X_)(t,32):"address"===e.type&&this.#E.encode(["address"],[t]),(0,l.nx)((0,l.c$)(t),32));for(t.forEach((t,i)=>{let s=e.inputs[i];if(!s.indexed){(0,o.MR)(null==t,"cannot filter non-indexed parameters; must be null","contract."+s.name,t);return}null==t?r.push(null):"array"===s.baseType||"tuple"===s.baseType?(0,o.MR)(!1,"filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?r.push(t.map(e=>n(s,e))):r.push(n(s,t))});r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){if("string"==typeof e){let t=this.getEvent(e);(0,o.MR)(t,"unknown event","eventFragment",e),e=t}let r=[],n=[],a=[];return e.anonymous||r.push(e.topicHash),(0,o.MR)(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((e,o)=>{let l=t[o];if(e.indexed){if("string"===e.type)r.push((0,s.id)(l));else if("bytes"===e.type)r.push((0,i.S)(l));else if("tuple"===e.baseType||"array"===e.baseType)throw Error("not implemented");else r.push(this.#E.encode([e.type],[l]))}else n.push(e),a.push(l)}),{data:this.#E.encode(n,a),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e){let t=this.getEvent(e);(0,o.MR)(t,"unknown event","eventFragment",e),e=t}if(null!=r&&!e.anonymous){let t=e.topicHash;(0,o.MR)((0,l.Lo)(r[0],32)&&r[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}let n=[],i=[],s=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(h.aX.from({type:"bytes32",name:e.name})),s.push(!0)):(n.push(e),s.push(!1)):(i.push(e),s.push(!1))});let a=null!=r?this.#E.decode(n,(0,l.xW)(r)):null,c=this.#E.decode(i,t,!0),u=[],f=[],p=0,g=0;return e.inputs.forEach((e,t)=>{let r=null;if(e.indexed){if(null==a)r=new m(null);else if(s[t])r=new m(a[g++]);else try{r=a[g++]}catch(e){r=e}}else try{r=c[p++]}catch(e){r=e}u.push(r),f.push(e.name||null)}),d.Q7.fromItems(u,f)}parseTransaction(e){let t=(0,l.q5)(e.data,"tx.data"),r=(0,c.Ab)(null!=e.value?e.value:0,"tx.value"),n=this.getFunction((0,l.c$)(t.slice(0,4)));if(!n)return null;let i=this.#E.decode(n.inputs,t.slice(4));return new p(n,n.selector,i,r)}parseCallResult(e){throw Error("@TODO")}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new f(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){let t=(0,l.c$)(e),r=this.getError((0,l.ZG)(t,0,4));if(!r)return null;let n=this.#E.decode(r.inputs,(0,l.ZG)(t,4));return new g(r,r.selector,n)}static from(e){return e instanceof x?e:new x("string"==typeof e?JSON.parse(e):"function"==typeof e.formatJson?e.formatJson():"function"==typeof e.format?e.format("json"):e)}}var w=r(1819),v=r(1857),A=r(6420);class E extends v.tG{interface;fragment;args;constructor(e,t,r){super(e,e.provider);let n=t.decodeEventLog(r,e.data,e.topics);(0,a.n)(this,{args:n,fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class k extends v.tG{error;constructor(e,t){super(e,e.provider),(0,a.n)(this,{error:t})}}class P extends v.z5{#_;constructor(e,t,r){super(r,t),this.#_=e}get logs(){return super.logs.map(e=>{let t=e.topics.length?this.#_.getEvent(e.topics[0]):null;if(t)try{return new E(e,this.#_,t)}catch(t){return new k(e,t)}return e})}}class S extends v.uI{#_;constructor(e,t,r){super(r,t),this.#_=e}async wait(e,t){let r=await super.wait(e,t);return null==r?null:new P(this.#_,this.provider,r)}}class I extends A.z{log;constructor(e,t,r,n){super(e,t,r),(0,a.n)(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class T extends I{constructor(e,t,r,n,i){super(e,t,r,new E(i,e.interface,n));let s=e.interface.decodeEventLog(n,this.log.data,this.log.topics);(0,a.n)(this,{args:s,fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}let _=BigInt(0);function C(e){return e&&"function"==typeof e.call}function O(e){return e&&"function"==typeof e.estimateGas}function R(e){return e&&"function"==typeof e.resolveName}function N(e){return e&&"function"==typeof e.sendTransaction}function M(e){if(null!=e){if(R(e))return e;if(e.provider)return e.provider}}class B{#C;fragment;constructor(e,t,r){if((0,a.n)(this,{fragment:t}),t.inputs.length<r.length)throw Error("too many arguments");let n=D(e.runner,"resolveName"),i=R(n)?n:null;this.#C=async function(){let n=await Promise.all(t.inputs.map((e,t)=>null==r[t]?null:e.walkAsync(r[t],(e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map(e=>(0,w.tG)(e,i))):(0,w.tG)(t,i):t)));return e.interface.encodeFilterTopics(t,n)}()}getTopicFilter(){return this.#C}}function D(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function L(e){return null==e?null:e.provider||null}async function U(e,t){let r=n.V.dereference(e,"overrides");(0,o.MR)("object"==typeof r,"invalid overrides parameter","overrides",e);let i=(0,v.VS)(r);return(0,o.MR)(null==i.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",i.to),(0,o.MR)(null==i.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",i.data),i.from&&(i.from=i.from),i}async function F(e,t,r){let i=D(e,"resolveName"),s=R(i)?i:null;return await Promise.all(t.map((e,t)=>e.walkAsync(r[t],(e,t)=>(t=n.V.dereference(t,e),"address"===e)?(0,w.tG)(t,s):t)))}let j=Symbol.for("_ethersInternal_contract"),z=new WeakMap;function H(e){return z.get(e[j])}async function G(e,t){let r;let n=null;if(Array.isArray(t)){let n=function(t){if((0,l.Lo)(t,32))return t;let r=e.interface.getEvent(t);return(0,o.MR)(r,"unknown fragment","name",t),r.topicHash};r=t.map(e=>null==e?null:Array.isArray(e)?e.map(n):n(e))}else if("*"===t)r=[null];else if("string"==typeof t)(0,l.Lo)(t,32)?r=[t]:(n=e.interface.getEvent(t),(0,o.MR)(n,"unknown fragment","event",t),r=[n.topicHash]);else t&&"object"==typeof t&&"getTopicFilter"in t&&"function"==typeof t.getTopicFilter&&t.fragment?r=await t.getTopicFilter():"fragment"in t?r=[(n=t.fragment).topicHash]:(0,o.MR)(!1,"unknown event name","event",t);return{fragment:n,tag:(r=r.map(e=>{if(null==e)return null;if(Array.isArray(e)){let t=Array.from(new Set(e.map(e=>e.toLowerCase())).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})).map(e=>null==e?"null":Array.isArray(e)?e.join("|"):e).join("&"),topics:r}}async function $(e,t){let{subs:r}=H(e);return r.get((await G(e,t)).tag)||null}async function V(e,t,r){let n=L(e.runner);(0,o.vA)(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});let{fragment:i,tag:s,topics:a}=await G(e,r),{addr:l,subs:c}=H(e),u=c.get(s);if(!u){let t={address:l||e,topics:a},o=t=>{let n=i;if(null==n)try{n=e.interface.getEvent(t.topics[0])}catch(e){}if(n){let s=n,a=i?e.interface.decodeEventLog(i,t.data,t.topics):[];W(e,r,a,n=>new T(e,n,r,s,t))}else W(e,r,[],n=>new I(e,n,r,t))},d=[];u={tag:s,listeners:[],start:()=>{!d.length&&d.push(n.on(t,o))},stop:async()=>{if(0==d.length)return;let e=d;d=[],await Promise.all(e),n.off(t,o)}},c.set(s,u)}return u}let q=Promise.resolve();async function K(e,t,r,n){await q;let i=await $(e,t);if(!i)return!1;let s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:t,once:i})=>{let s=Array.from(r);n&&s.push(n(i?null:t));try{t.call(e,...s)}catch(e){}return!i}),0===i.listeners.length&&(i.stop(),H(e).subs.delete(i.tag)),s>0}async function W(e,t,r,n){try{await q}catch(e){}let i=K(e,t,r,n);return q=i,await i}let Q=["then"];class Z{target;interface;runner;filters;[j];fallback;constructor(e,t,r,n){var i;let s;(0,o.MR)("string"==typeof e||(0,w.$C)(e),"invalid value for Contract target","target",e),null==r&&(r=null);let u=x.from(t);(0,a.n)(this,{target:e,runner:r,interface:u}),Object.defineProperty(this,j,{value:{}});let d=null,h=null;if(n){let e=L(r);h=new S(this.interface,e,n)}let f=new Map;if("string"==typeof e){if((0,l.Lo)(e))d=e,s=Promise.resolve(e);else{let t=D(r,"resolveName");if(!R(t))throw(0,o.xz)("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});s=t.resolveName(e).then(t=>{if(null==t)throw(0,o.xz)("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return H(this).addr=t,t})}}else s=e.getAddress().then(e=>{if(null==e)throw Error("TODO");return H(this).addr=e,e});i={addrPromise:s,addr:d,deployTx:h,subs:f},z.set(this[j],i);let p=new Proxy({},{get:(e,t,r)=>{if("symbol"==typeof t||Q.indexOf(t)>=0)return Reflect.get(e,t,r);try{return this.getEvent(t)}catch(e){if(!(0,o.bJ)(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>Q.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return(0,a.n)(this,{filters:p}),(0,a.n)(this,{fallback:u.receive||u.fallback?function(e){let t=async function(t){let r=await U(t,["data"]);r.to=await e.getAddress(),r.from&&(r.from=await (0,w.tG)(r.from,M(e.runner)));let n=e.interface,i=(0,c.Ab)(r.value||_,"overrides.value")===_,s="0x"===(r.data||"0x");!n.fallback||n.fallback.payable||!n.receive||s||i||(0,o.MR)(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),(0,o.MR)(n.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data);let a=n.receive||n.fallback&&n.fallback.payable;return(0,o.MR)(a||i,"cannot send value to non-payable fallback","overrides.value",r.value),(0,o.MR)(n.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){let n=D(e.runner,"call");(0,o.vA)(C(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let i=await t(r);try{return await n.call(i)}catch(t){if((0,o.E)(t)&&t.data)throw e.interface.makeError(t.data,i);throw t}},n=async function(r){let n=e.runner;(0,o.vA)(N(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let i=await n.sendTransaction(await t(r)),s=L(e.runner);return new S(e.interface,s,i)},i=async function(r){let n=D(e.runner,"estimateGas");return(0,o.vA)(O(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await t(r))},s=async e=>await n(e);return(0,a.n)(s,{_contract:e,estimateGas:i,populateTransaction:t,send:n,staticCall:r}),s}(this):null}),new Proxy(this,{get:(e,t,r)=>{if("symbol"==typeof t||t in e||Q.indexOf(t)>=0)return Reflect.get(e,t,r);try{return e.getFunction(t)}catch(e){if(!(0,o.bJ)(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||Q.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new Z(this.target,this.interface,e)}attach(e){return new Z(e,this.interface,this.runner)}async getAddress(){return await H(this).addrPromise}async getDeployedCode(){let e=L(this.runner);(0,o.vA)(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){let e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;let t=L(this.runner);return(0,o.vA)(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((e,r)=>{let n=async()=>{try{let r=await this.getDeployedCode();if(null!=r)return e(this);t.once("block",n)}catch(e){r(e)}};n()})}deploymentTransaction(){return H(this).deployTx}getFunction(e){return"string"!=typeof e&&(e=e.format()),function(e,t){let r=function(...r){let n=e.interface.getFunction(t,r);return(0,o.vA)(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),n},n=async function(...t){let n=r(...t),i={};if(n.inputs.length+1===t.length&&(i=await U(t.pop())).from&&(i.from=await (0,w.tG)(i.from,M(e.runner))),n.inputs.length!==t.length)throw Error("internal error: fragment inputs doesn't match arguments; should not happen");let s=await F(e.runner,n.inputs,t);return Object.assign({},i,await (0,a.k)({to:e.getAddress(),data:e.interface.encodeFunctionData(n,s)}))},i=async function(...e){let t=await c(...e);return 1===t.length?t[0]:t},s=async function(...t){let r=e.runner;(0,o.vA)(N(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let i=await r.sendTransaction(await n(...t)),s=L(e.runner);return new S(e.interface,s,i)},l=async function(...t){let r=D(e.runner,"estimateGas");return(0,o.vA)(O(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await n(...t))},c=async function(...t){let i=D(e.runner,"call");(0,o.vA)(C(i),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let s=await n(...t),a="0x";try{a=await i.call(s)}catch(t){if((0,o.E)(t)&&t.data)throw e.interface.makeError(t.data,s);throw t}let l=r(...t);return e.interface.decodeFunctionResult(l,a)},u=async(...e)=>r(...e).constant?await i(...e):await s(...e);return(0,a.n)(u,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:r,estimateGas:l,populateTransaction:n,send:s,staticCall:i,staticCallResult:c}),Object.defineProperty(u,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getFunction(t);return(0,o.vA)(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),u}(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){let r=function(...r){let n=e.interface.getEvent(t,r);return(0,o.vA)(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),n},n=function(...t){return new B(e,r(...t),t)};return(0,a.n)(n,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:r}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getEvent(t);return(0,o.vA)(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),n}(this,e)}async queryTransaction(e){throw Error("@TODO")}async queryFilter(e,t,r){null==t&&(t=0),null==r&&(r="latest");let{addr:n,addrPromise:i}=H(this),s=n||await i,{fragment:a,topics:l}=await G(this,e),c={address:s,topics:l,fromBlock:t,toBlock:r},u=L(this.runner);return(0,o.vA)(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(c)).map(e=>{let t=a;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new E(e,this.interface,t)}catch(t){return new k(e,t)}return new v.tG(e,u)})}async on(e,t){let r=await V(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){let r=await V(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await W(this,e,t,null)}async listenerCount(e){if(e){let t=await $(this,e);return t?t.listeners.length:0}let{subs:t}=H(this),r=0;for(let{listeners:e}of t.values())r+=e.length;return r}async listeners(e){if(e){let t=await $(this,e);return t?t.listeners.map(({listener:e})=>e):[]}let{subs:t}=H(this),r=[];for(let{listeners:e}of t.values())r=r.concat(e.map(({listener:e})=>e));return r}async off(e,t){let r=await $(this,e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return(null==t||0===r.listeners.length)&&(r.stop(),H(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){let t=await $(this,e);if(!t)return this;t.stop(),H(this).subs.delete(t.tag)}else{let{subs:e}=H(this);for(let{tag:t,stop:r}of e.values())r(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends Z{constructor(t,r=null){super(t,e,r)}}return t}static from(e,t,r){return null==r&&(r=null),new this(e,t,r)}}function J(){return Z}class Y extends J(){}},2097:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toUtf8CodePoints=t.toUtf8String=t.toUtf8Bytes=t.Utf8ErrorFuncs=void 0;let n=r(4306),i=r(7073);function s(e,t,r,n,i){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return"OVERRUN"===e?r.length-t-1:0}function a(e,r){null==r&&(r=t.Utf8ErrorFuncs.error);let i=(0,n.getBytes)(e,"bytes"),s=[],a=0;for(;a<i.length;){let e=i[a++];if(e>>7==0){s.push(e);continue}let t=null,n=null;if((224&e)==192)t=1,n=127;else if((240&e)==224)t=2,n=2047;else if((248&e)==240)t=3,n=65535;else{(192&e)==128?a+=r("UNEXPECTED_CONTINUE",a-1,i,s):a+=r("BAD_PREFIX",a-1,i,s);continue}if(a-1+t>=i.length){a+=r("OVERRUN",a-1,i,s);continue}let o=e&(1<<8-t-1)-1;for(let e=0;e<t;e++){let e=i[a];if((192&e)!=128){a+=r("MISSING_CONTINUE",a,i,s),o=null;break}o=o<<6|63&e,a++}if(null!==o){if(o>1114111){a+=r("OUT_OF_RANGE",a-1-t,i,s,o);continue}if(o>=55296&&o<=57343){a+=r("UTF16_SURROGATE",a-1-t,i,s,o);continue}if(o<=n){a+=r("OVERLONG",a-1-t,i,s,o);continue}s.push(o)}}return s}function o(e,t){(0,i.assertArgument)("string"==typeof e,"invalid string value","str",e),null!=t&&((0,i.assertNormalize)(t),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if((64512&n)==55296){t++;let s=e.charCodeAt(t);(0,i.assertArgument)(t<e.length&&(64512&s)==56320,"invalid surrogate pair","str",e);let a=65536+((1023&n)<<10)+(1023&s);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return new Uint8Array(r)}t.Utf8ErrorFuncs=Object.freeze({error:function(e,t,r,n,s){(0,i.assertArgument)(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:s,replace:function(e,t,r,n,a){return"OVERLONG"===e?((0,i.assertArgument)("number"==typeof a,"invalid bad code point for replacement","badCodepoint",a),n.push(a),0):(n.push(65533),s(e,t,r,n,a))}}),t.toUtf8Bytes=o,t.toUtf8String=function(e,t){return a(e,t).map(e=>e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10&1023)+55296,(1023&e)+56320)).join("")},t.toUtf8CodePoints=function(e,t){return a(o(e,t))}},2099:function(e,t){"use strict";var r,n,i,s=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};Object.defineProperty(t,"__esModule",{value:!0}),t.AES=void 0;let o={16:10,24:12,32:14},l=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],c=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],u=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],d=[0xc66363a5,0xf87c7c84,0xee777799,0xf67b7b8d,0xfff2f20d,0xd66b6bbd,0xde6f6fb1,0x91c5c554,0x60303050,0x2010103,0xce6767a9,0x562b2b7d,0xe7fefe19,0xb5d7d762,0x4dababe6,0xec76769a,0x8fcaca45,0x1f82829d,0x89c9c940,0xfa7d7d87,0xeffafa15,0xb25959eb,0x8e4747c9,0xfbf0f00b,0x41adadec,0xb3d4d467,0x5fa2a2fd,0x45afafea,0x239c9cbf,0x53a4a4f7,0xe4727296,0x9bc0c05b,0x75b7b7c2,0xe1fdfd1c,0x3d9393ae,0x4c26266a,0x6c36365a,0x7e3f3f41,0xf5f7f702,0x83cccc4f,0x6834345c,0x51a5a5f4,0xd1e5e534,0xf9f1f108,0xe2717193,0xabd8d873,0x62313153,0x2a15153f,0x804040c,0x95c7c752,0x46232365,0x9dc3c35e,0x30181828,0x379696a1,0xa05050f,0x2f9a9ab5,0xe070709,0x24121236,0x1b80809b,0xdfe2e23d,0xcdebeb26,0x4e272769,0x7fb2b2cd,0xea75759f,0x1209091b,0x1d83839e,0x582c2c74,0x341a1a2e,0x361b1b2d,0xdc6e6eb2,0xb45a5aee,0x5ba0a0fb,0xa45252f6,0x763b3b4d,0xb7d6d661,0x7db3b3ce,0x5229297b,0xdde3e33e,0x5e2f2f71,0x13848497,0xa65353f5,0xb9d1d168,0,0xc1eded2c,0x40202060,0xe3fcfc1f,0x79b1b1c8,0xb65b5bed,0xd46a6abe,0x8dcbcb46,0x67bebed9,0x7239394b,0x944a4ade,0x984c4cd4,0xb05858e8,0x85cfcf4a,0xbbd0d06b,0xc5efef2a,0x4faaaae5,0xedfbfb16,0x864343c5,0x9a4d4dd7,0x66333355,0x11858594,0x8a4545cf,0xe9f9f910,0x4020206,0xfe7f7f81,0xa05050f0,0x783c3c44,0x259f9fba,0x4ba8a8e3,0xa25151f3,0x5da3a3fe,0x804040c0,0x58f8f8a,0x3f9292ad,0x219d9dbc,0x70383848,0xf1f5f504,0x63bcbcdf,0x77b6b6c1,0xafdada75,0x42212163,0x20101030,0xe5ffff1a,0xfdf3f30e,0xbfd2d26d,0x81cdcd4c,0x180c0c14,0x26131335,0xc3ecec2f,0xbe5f5fe1,0x359797a2,0x884444cc,0x2e171739,0x93c4c457,0x55a7a7f2,0xfc7e7e82,0x7a3d3d47,0xc86464ac,0xba5d5de7,0x3219192b,0xe6737395,0xc06060a0,0x19818198,0x9e4f4fd1,0xa3dcdc7f,0x44222266,0x542a2a7e,0x3b9090ab,0xb888883,0x8c4646ca,0xc7eeee29,0x6bb8b8d3,0x2814143c,0xa7dede79,0xbc5e5ee2,0x160b0b1d,0xaddbdb76,0xdbe0e03b,0x64323256,0x743a3a4e,0x140a0a1e,0x924949db,0xc06060a,0x4824246c,0xb85c5ce4,0x9fc2c25d,0xbdd3d36e,0x43acacef,0xc46262a6,0x399191a8,0x319595a4,0xd3e4e437,0xf279798b,0xd5e7e732,0x8bc8c843,0x6e373759,0xda6d6db7,0x18d8d8c,0xb1d5d564,0x9c4e4ed2,0x49a9a9e0,0xd86c6cb4,0xac5656fa,0xf3f4f407,0xcfeaea25,0xca6565af,0xf47a7a8e,0x47aeaee9,0x10080818,0x6fbabad5,0xf0787888,0x4a25256f,0x5c2e2e72,0x381c1c24,0x57a6a6f1,0x73b4b4c7,0x97c6c651,0xcbe8e823,0xa1dddd7c,0xe874749c,0x3e1f1f21,0x964b4bdd,0x61bdbddc,0xd8b8b86,0xf8a8a85,0xe0707090,0x7c3e3e42,0x71b5b5c4,0xcc6666aa,0x904848d8,0x6030305,0xf7f6f601,0x1c0e0e12,0xc26161a3,0x6a35355f,0xae5757f9,0x69b9b9d0,0x17868691,0x99c1c158,0x3a1d1d27,0x279e9eb9,0xd9e1e138,0xebf8f813,0x2b9898b3,0x22111133,0xd26969bb,0xa9d9d970,0x78e8e89,0x339494a7,0x2d9b9bb6,0x3c1e1e22,0x15878792,0xc9e9e920,0x87cece49,0xaa5555ff,0x50282878,0xa5dfdf7a,0x38c8c8f,0x59a1a1f8,0x9898980,0x1a0d0d17,0x65bfbfda,0xd7e6e631,0x844242c6,0xd06868b8,0x824141c3,0x299999b0,0x5a2d2d77,0x1e0f0f11,0x7bb0b0cb,0xa85454fc,0x6dbbbbd6,0x2c16163a],h=[0xa5c66363,0x84f87c7c,0x99ee7777,0x8df67b7b,0xdfff2f2,0xbdd66b6b,0xb1de6f6f,0x5491c5c5,0x50603030,0x3020101,0xa9ce6767,0x7d562b2b,0x19e7fefe,0x62b5d7d7,0xe64dabab,0x9aec7676,0x458fcaca,0x9d1f8282,0x4089c9c9,0x87fa7d7d,0x15effafa,0xebb25959,0xc98e4747,0xbfbf0f0,0xec41adad,0x67b3d4d4,0xfd5fa2a2,0xea45afaf,0xbf239c9c,0xf753a4a4,0x96e47272,0x5b9bc0c0,0xc275b7b7,0x1ce1fdfd,0xae3d9393,0x6a4c2626,0x5a6c3636,0x417e3f3f,0x2f5f7f7,0x4f83cccc,0x5c683434,0xf451a5a5,0x34d1e5e5,0x8f9f1f1,0x93e27171,0x73abd8d8,0x53623131,0x3f2a1515,0xc080404,0x5295c7c7,0x65462323,0x5e9dc3c3,0x28301818,0xa1379696,0xf0a0505,0xb52f9a9a,0x90e0707,0x36241212,0x9b1b8080,0x3ddfe2e2,0x26cdebeb,0x694e2727,0xcd7fb2b2,0x9fea7575,0x1b120909,0x9e1d8383,0x74582c2c,0x2e341a1a,0x2d361b1b,0xb2dc6e6e,0xeeb45a5a,0xfb5ba0a0,0xf6a45252,0x4d763b3b,0x61b7d6d6,0xce7db3b3,0x7b522929,0x3edde3e3,0x715e2f2f,0x97138484,0xf5a65353,0x68b9d1d1,0,0x2cc1eded,0x60402020,0x1fe3fcfc,0xc879b1b1,0xedb65b5b,0xbed46a6a,0x468dcbcb,0xd967bebe,0x4b723939,0xde944a4a,0xd4984c4c,0xe8b05858,0x4a85cfcf,0x6bbbd0d0,0x2ac5efef,0xe54faaaa,0x16edfbfb,0xc5864343,0xd79a4d4d,0x55663333,0x94118585,0xcf8a4545,0x10e9f9f9,0x6040202,0x81fe7f7f,0xf0a05050,0x44783c3c,0xba259f9f,0xe34ba8a8,0xf3a25151,0xfe5da3a3,0xc0804040,0x8a058f8f,0xad3f9292,0xbc219d9d,0x48703838,0x4f1f5f5,0xdf63bcbc,0xc177b6b6,0x75afdada,0x63422121,0x30201010,0x1ae5ffff,0xefdf3f3,0x6dbfd2d2,0x4c81cdcd,0x14180c0c,0x35261313,0x2fc3ecec,0xe1be5f5f,0xa2359797,0xcc884444,0x392e1717,0x5793c4c4,0xf255a7a7,0x82fc7e7e,0x477a3d3d,0xacc86464,0xe7ba5d5d,0x2b321919,0x95e67373,0xa0c06060,0x98198181,0xd19e4f4f,0x7fa3dcdc,0x66442222,0x7e542a2a,0xab3b9090,0x830b8888,0xca8c4646,0x29c7eeee,0xd36bb8b8,0x3c281414,0x79a7dede,0xe2bc5e5e,0x1d160b0b,0x76addbdb,0x3bdbe0e0,0x56643232,0x4e743a3a,0x1e140a0a,0xdb924949,0xa0c0606,0x6c482424,0xe4b85c5c,0x5d9fc2c2,0x6ebdd3d3,0xef43acac,0xa6c46262,0xa8399191,0xa4319595,0x37d3e4e4,0x8bf27979,0x32d5e7e7,0x438bc8c8,0x596e3737,0xb7da6d6d,0x8c018d8d,0x64b1d5d5,0xd29c4e4e,0xe049a9a9,0xb4d86c6c,0xfaac5656,0x7f3f4f4,0x25cfeaea,0xafca6565,0x8ef47a7a,0xe947aeae,0x18100808,0xd56fbaba,0x88f07878,0x6f4a2525,0x725c2e2e,0x24381c1c,0xf157a6a6,0xc773b4b4,0x5197c6c6,0x23cbe8e8,0x7ca1dddd,0x9ce87474,0x213e1f1f,0xdd964b4b,0xdc61bdbd,0x860d8b8b,0x850f8a8a,0x90e07070,0x427c3e3e,0xc471b5b5,0xaacc6666,0xd8904848,0x5060303,0x1f7f6f6,0x121c0e0e,0xa3c26161,0x5f6a3535,0xf9ae5757,0xd069b9b9,0x91178686,0x5899c1c1,0x273a1d1d,0xb9279e9e,0x38d9e1e1,0x13ebf8f8,0xb32b9898,0x33221111,0xbbd26969,0x70a9d9d9,0x89078e8e,0xa7339494,0xb62d9b9b,0x223c1e1e,0x92158787,0x20c9e9e9,0x4987cece,0xffaa5555,0x78502828,0x7aa5dfdf,0x8f038c8c,0xf859a1a1,0x80098989,0x171a0d0d,0xda65bfbf,0x31d7e6e6,0xc6844242,0xb8d06868,0xc3824141,0xb0299999,0x775a2d2d,0x111e0f0f,0xcb7bb0b0,0xfca85454,0xd66dbbbb,0x3a2c1616],f=[0x63a5c663,0x7c84f87c,0x7799ee77,0x7b8df67b,0xf20dfff2,0x6bbdd66b,0x6fb1de6f,0xc55491c5,0x30506030,0x1030201,0x67a9ce67,0x2b7d562b,0xfe19e7fe,0xd762b5d7,0xabe64dab,0x769aec76,0xca458fca,0x829d1f82,0xc94089c9,0x7d87fa7d,0xfa15effa,0x59ebb259,0x47c98e47,0xf00bfbf0,0xadec41ad,0xd467b3d4,0xa2fd5fa2,0xafea45af,0x9cbf239c,0xa4f753a4,0x7296e472,0xc05b9bc0,0xb7c275b7,0xfd1ce1fd,0x93ae3d93,0x266a4c26,0x365a6c36,0x3f417e3f,0xf702f5f7,0xcc4f83cc,0x345c6834,0xa5f451a5,0xe534d1e5,0xf108f9f1,0x7193e271,0xd873abd8,0x31536231,0x153f2a15,0x40c0804,0xc75295c7,0x23654623,0xc35e9dc3,0x18283018,0x96a13796,0x50f0a05,0x9ab52f9a,0x7090e07,0x12362412,0x809b1b80,0xe23ddfe2,0xeb26cdeb,0x27694e27,0xb2cd7fb2,0x759fea75,0x91b1209,0x839e1d83,0x2c74582c,0x1a2e341a,0x1b2d361b,0x6eb2dc6e,0x5aeeb45a,0xa0fb5ba0,0x52f6a452,0x3b4d763b,0xd661b7d6,0xb3ce7db3,0x297b5229,0xe33edde3,0x2f715e2f,0x84971384,0x53f5a653,0xd168b9d1,0,0xed2cc1ed,0x20604020,0xfc1fe3fc,0xb1c879b1,0x5bedb65b,0x6abed46a,0xcb468dcb,0xbed967be,0x394b7239,0x4ade944a,0x4cd4984c,0x58e8b058,0xcf4a85cf,0xd06bbbd0,0xef2ac5ef,0xaae54faa,0xfb16edfb,0x43c58643,0x4dd79a4d,0x33556633,0x85941185,0x45cf8a45,0xf910e9f9,0x2060402,0x7f81fe7f,0x50f0a050,0x3c44783c,0x9fba259f,0xa8e34ba8,0x51f3a251,0xa3fe5da3,0x40c08040,0x8f8a058f,0x92ad3f92,0x9dbc219d,0x38487038,0xf504f1f5,0xbcdf63bc,0xb6c177b6,0xda75afda,0x21634221,0x10302010,0xff1ae5ff,0xf30efdf3,0xd26dbfd2,0xcd4c81cd,0xc14180c,0x13352613,0xec2fc3ec,0x5fe1be5f,0x97a23597,0x44cc8844,0x17392e17,0xc45793c4,0xa7f255a7,0x7e82fc7e,0x3d477a3d,0x64acc864,0x5de7ba5d,0x192b3219,0x7395e673,0x60a0c060,0x81981981,0x4fd19e4f,0xdc7fa3dc,0x22664422,0x2a7e542a,0x90ab3b90,0x88830b88,0x46ca8c46,0xee29c7ee,0xb8d36bb8,0x143c2814,0xde79a7de,0x5ee2bc5e,0xb1d160b,0xdb76addb,0xe03bdbe0,0x32566432,0x3a4e743a,0xa1e140a,0x49db9249,0x60a0c06,0x246c4824,0x5ce4b85c,0xc25d9fc2,0xd36ebdd3,0xacef43ac,0x62a6c462,0x91a83991,0x95a43195,0xe437d3e4,0x798bf279,0xe732d5e7,0xc8438bc8,0x37596e37,0x6db7da6d,0x8d8c018d,0xd564b1d5,0x4ed29c4e,0xa9e049a9,0x6cb4d86c,0x56faac56,0xf407f3f4,0xea25cfea,0x65afca65,0x7a8ef47a,0xaee947ae,0x8181008,0xbad56fba,0x7888f078,0x256f4a25,0x2e725c2e,0x1c24381c,0xa6f157a6,0xb4c773b4,0xc65197c6,0xe823cbe8,0xdd7ca1dd,0x749ce874,0x1f213e1f,0x4bdd964b,0xbddc61bd,0x8b860d8b,0x8a850f8a,0x7090e070,0x3e427c3e,0xb5c471b5,0x66aacc66,0x48d89048,0x3050603,0xf601f7f6,0xe121c0e,0x61a3c261,0x355f6a35,0x57f9ae57,0xb9d069b9,0x86911786,0xc15899c1,0x1d273a1d,0x9eb9279e,0xe138d9e1,0xf813ebf8,0x98b32b98,0x11332211,0x69bbd269,0xd970a9d9,0x8e89078e,0x94a73394,0x9bb62d9b,0x1e223c1e,0x87921587,0xe920c9e9,0xce4987ce,0x55ffaa55,0x28785028,0xdf7aa5df,0x8c8f038c,0xa1f859a1,0x89800989,0xd171a0d,0xbfda65bf,0xe631d7e6,0x42c68442,0x68b8d068,0x41c38241,0x99b02999,0x2d775a2d,0xf111e0f,0xb0cb7bb0,0x54fca854,0xbbd66dbb,0x163a2c16],p=[0x6363a5c6,0x7c7c84f8,0x777799ee,0x7b7b8df6,0xf2f20dff,0x6b6bbdd6,0x6f6fb1de,0xc5c55491,0x30305060,0x1010302,0x6767a9ce,0x2b2b7d56,0xfefe19e7,0xd7d762b5,0xababe64d,0x76769aec,0xcaca458f,0x82829d1f,0xc9c94089,0x7d7d87fa,0xfafa15ef,0x5959ebb2,0x4747c98e,0xf0f00bfb,0xadadec41,0xd4d467b3,0xa2a2fd5f,0xafafea45,0x9c9cbf23,0xa4a4f753,0x727296e4,0xc0c05b9b,0xb7b7c275,0xfdfd1ce1,0x9393ae3d,0x26266a4c,0x36365a6c,0x3f3f417e,0xf7f702f5,0xcccc4f83,0x34345c68,0xa5a5f451,0xe5e534d1,0xf1f108f9,0x717193e2,0xd8d873ab,0x31315362,0x15153f2a,0x4040c08,0xc7c75295,0x23236546,0xc3c35e9d,0x18182830,0x9696a137,0x5050f0a,0x9a9ab52f,0x707090e,0x12123624,0x80809b1b,0xe2e23ddf,0xebeb26cd,0x2727694e,0xb2b2cd7f,0x75759fea,0x9091b12,0x83839e1d,0x2c2c7458,0x1a1a2e34,0x1b1b2d36,0x6e6eb2dc,0x5a5aeeb4,0xa0a0fb5b,0x5252f6a4,0x3b3b4d76,0xd6d661b7,0xb3b3ce7d,0x29297b52,0xe3e33edd,0x2f2f715e,0x84849713,0x5353f5a6,0xd1d168b9,0,0xeded2cc1,0x20206040,0xfcfc1fe3,0xb1b1c879,0x5b5bedb6,0x6a6abed4,0xcbcb468d,0xbebed967,0x39394b72,0x4a4ade94,0x4c4cd498,0x5858e8b0,0xcfcf4a85,0xd0d06bbb,0xefef2ac5,0xaaaae54f,0xfbfb16ed,0x4343c586,0x4d4dd79a,0x33335566,0x85859411,0x4545cf8a,0xf9f910e9,0x2020604,0x7f7f81fe,0x5050f0a0,0x3c3c4478,0x9f9fba25,0xa8a8e34b,0x5151f3a2,0xa3a3fe5d,0x4040c080,0x8f8f8a05,0x9292ad3f,0x9d9dbc21,0x38384870,0xf5f504f1,0xbcbcdf63,0xb6b6c177,0xdada75af,0x21216342,0x10103020,0xffff1ae5,0xf3f30efd,0xd2d26dbf,0xcdcd4c81,0xc0c1418,0x13133526,0xecec2fc3,0x5f5fe1be,0x9797a235,0x4444cc88,0x1717392e,0xc4c45793,0xa7a7f255,0x7e7e82fc,0x3d3d477a,0x6464acc8,0x5d5de7ba,0x19192b32,0x737395e6,0x6060a0c0,0x81819819,0x4f4fd19e,0xdcdc7fa3,0x22226644,0x2a2a7e54,0x9090ab3b,0x8888830b,0x4646ca8c,0xeeee29c7,0xb8b8d36b,0x14143c28,0xdede79a7,0x5e5ee2bc,0xb0b1d16,0xdbdb76ad,0xe0e03bdb,0x32325664,0x3a3a4e74,0xa0a1e14,0x4949db92,0x6060a0c,0x24246c48,0x5c5ce4b8,0xc2c25d9f,0xd3d36ebd,0xacacef43,0x6262a6c4,0x9191a839,0x9595a431,0xe4e437d3,0x79798bf2,0xe7e732d5,0xc8c8438b,0x3737596e,0x6d6db7da,0x8d8d8c01,0xd5d564b1,0x4e4ed29c,0xa9a9e049,0x6c6cb4d8,0x5656faac,0xf4f407f3,0xeaea25cf,0x6565afca,0x7a7a8ef4,0xaeaee947,0x8081810,0xbabad56f,0x787888f0,0x25256f4a,0x2e2e725c,0x1c1c2438,0xa6a6f157,0xb4b4c773,0xc6c65197,0xe8e823cb,0xdddd7ca1,0x74749ce8,0x1f1f213e,0x4b4bdd96,0xbdbddc61,0x8b8b860d,0x8a8a850f,0x707090e0,0x3e3e427c,0xb5b5c471,0x6666aacc,0x4848d890,0x3030506,0xf6f601f7,0xe0e121c,0x6161a3c2,0x35355f6a,0x5757f9ae,0xb9b9d069,0x86869117,0xc1c15899,0x1d1d273a,0x9e9eb927,0xe1e138d9,0xf8f813eb,0x9898b32b,0x11113322,0x6969bbd2,0xd9d970a9,0x8e8e8907,0x9494a733,0x9b9bb62d,0x1e1e223c,0x87879215,0xe9e920c9,0xcece4987,0x5555ffaa,0x28287850,0xdfdf7aa5,0x8c8c8f03,0xa1a1f859,0x89898009,0xd0d171a,0xbfbfda65,0xe6e631d7,0x4242c684,0x6868b8d0,0x4141c382,0x9999b029,0x2d2d775a,0xf0f111e,0xb0b0cb7b,0x5454fca8,0xbbbbd66d,0x16163a2c],g=[0x51f4a750,0x7e416553,0x1a17a4c3,0x3a275e96,0x3bab6bcb,0x1f9d45f1,0xacfa58ab,0x4be30393,0x2030fa55,0xad766df6,0x88cc7691,0xf5024c25,0x4fe5d7fc,0xc52acbd7,0x26354480,0xb562a38f,0xdeb15a49,0x25ba1b67,0x45ea0e98,0x5dfec0e1,0xc32f7502,0x814cf012,0x8d4697a3,0x6bd3f9c6,0x38f5fe7,0x15929c95,0xbf6d7aeb,0x955259da,0xd4be832d,0x587421d3,0x49e06929,0x8ec9c844,0x75c2896a,0xf48e7978,0x99583e6b,0x27b971dd,0xbee14fb6,0xf088ad17,0xc920ac66,0x7dce3ab4,0x63df4a18,0xe51a3182,0x97513360,0x62537f45,0xb16477e0,0xbb6bae84,0xfe81a01c,0xf9082b94,0x70486858,0x8f45fd19,0x94de6c87,0x527bf8b7,0xab73d323,0x724b02e2,0xe31f8f57,0x6655ab2a,0xb2eb2807,0x2fb5c203,0x86c57b9a,0xd33708a5,0x302887f2,0x23bfa5b2,0x2036aba,0xed16825c,0x8acf1c2b,0xa779b492,0xf307f2f0,0x4e69e2a1,0x65daf4cd,0x605bed5,0xd134621f,0xc4a6fe8a,0x342e539d,0xa2f355a0,0x58ae132,0xa4f6eb75,0xb83ec39,0x4060efaa,0x5e719f06,0xbd6e1051,0x3e218af9,0x96dd063d,0xdd3e05ae,0x4de6bd46,0x91548db5,0x71c45d05,0x406d46f,0x605015ff,0x1998fb24,0xd6bde997,0x894043cc,0x67d99e77,0xb0e842bd,0x7898b88,0xe7195b38,0x79c8eedb,0xa17c0a47,0x7c420fe9,0xf8841ec9,0,0x9808683,0x322bed48,0x1e1170ac,0x6c5a724e,0xfd0efffb,0xf853856,0x3daed51e,0x362d3927,0xa0fd964,0x685ca621,0x9b5b54d1,0x24362e3a,0xc0a67b1,0x9357e70f,0xb4ee96d2,0x1b9b919e,0x80c0c54f,0x61dc20a2,0x5a774b69,0x1c121a16,0xe293ba0a,0xc0a02ae5,0x3c22e043,0x121b171d,0xe090d0b,0xf28bc7ad,0x2db6a8b9,0x141ea9c8,0x57f11985,0xaf75074c,0xee99ddbb,0xa37f60fd,0xf701269f,0x5c72f5bc,0x44663bc5,0x5bfb7e34,0x8b432976,0xcb23c6dc,0xb6edfc68,0xb8e4f163,0xd731dcca,0x42638510,0x13972240,0x84c61120,0x854a247d,0xd2bb3df8,0xaef93211,0xc729a16d,0x1d9e2f4b,0xdcb230f3,0xd8652ec,0x77c1e3d0,0x2bb3166c,0xa970b999,0x119448fa,0x47e96422,0xa8fc8cc4,0xa0f03f1a,0x567d2cd8,0x223390ef,0x87494ec7,0xd938d1c1,0x8ccaa2fe,0x98d40b36,0xa6f581cf,0xa57ade28,0xdab78e26,0x3fadbfa4,0x2c3a9de4,0x5078920d,0x6a5fcc9b,0x547e4662,0xf68d13c2,0x90d8b8e8,0x2e39f75e,0x82c3aff5,0x9f5d80be,0x69d0937c,0x6fd52da9,0xcf2512b3,0xc8ac993b,0x10187da7,0xe89c636e,0xdb3bbb7b,0xcd267809,0x6e5918f4,0xec9ab701,0x834f9aa8,0xe6956e65,0xaaffe67e,0x21bccf08,0xef15e8e6,0xbae79bd9,0x4a6f36ce,0xea9f09d4,0x29b07cd6,0x31a4b2af,0x2a3f2331,0xc6a59430,0x35a266c0,0x744ebc37,0xfc82caa6,0xe090d0b0,0x33a7d815,0xf104984a,0x41ecdaf7,0x7fcd500e,0x1791f62f,0x764dd68d,0x43efb04d,0xccaa4d54,0xe49604df,0x9ed1b5e3,0x4c6a881b,0xc12c1fb8,0x4665517f,0x9d5eea04,0x18c355d,0xfa877473,0xfb0b412e,0xb3671d5a,0x92dbd252,0xe9105633,0x6dd64713,0x9ad7618c,0x37a10c7a,0x59f8148e,0xeb133c89,0xcea927ee,0xb761c935,0xe11ce5ed,0x7a47b13c,0x9cd2df59,0x55f2733f,0x1814ce79,0x73c737bf,0x53f7cdea,0x5ffdaa5b,0xdf3d6f14,0x7844db86,0xcaaff381,0xb968c43e,0x3824342c,0xc2a3405f,0x161dc372,0xbce2250c,0x283c498b,0xff0d9541,0x39a80171,0x80cb3de,0xd8b4e49c,0x6456c190,0x7bcb8461,0xd532b670,0x486c5c74,0xd0b85742],m=[0x5051f4a7,0x537e4165,0xc31a17a4,0x963a275e,0xcb3bab6b,0xf11f9d45,0xabacfa58,0x934be303,0x552030fa,0xf6ad766d,0x9188cc76,0x25f5024c,0xfc4fe5d7,0xd7c52acb,0x80263544,0x8fb562a3,0x49deb15a,0x6725ba1b,0x9845ea0e,0xe15dfec0,0x2c32f75,0x12814cf0,0xa38d4697,0xc66bd3f9,0xe7038f5f,0x9515929c,0xebbf6d7a,0xda955259,0x2dd4be83,0xd3587421,0x2949e069,0x448ec9c8,0x6a75c289,0x78f48e79,0x6b99583e,0xdd27b971,0xb6bee14f,0x17f088ad,0x66c920ac,0xb47dce3a,0x1863df4a,0x82e51a31,0x60975133,0x4562537f,0xe0b16477,0x84bb6bae,0x1cfe81a0,0x94f9082b,0x58704868,0x198f45fd,0x8794de6c,0xb7527bf8,0x23ab73d3,0xe2724b02,0x57e31f8f,0x2a6655ab,0x7b2eb28,0x32fb5c2,0x9a86c57b,0xa5d33708,0xf2302887,0xb223bfa5,0xba02036a,0x5ced1682,0x2b8acf1c,0x92a779b4,0xf0f307f2,0xa14e69e2,0xcd65daf4,0xd50605be,0x1fd13462,0x8ac4a6fe,0x9d342e53,0xa0a2f355,0x32058ae1,0x75a4f6eb,0x390b83ec,0xaa4060ef,0x65e719f,0x51bd6e10,0xf93e218a,0x3d96dd06,0xaedd3e05,0x464de6bd,0xb591548d,0x571c45d,0x6f0406d4,0xff605015,0x241998fb,0x97d6bde9,0xcc894043,0x7767d99e,0xbdb0e842,0x8807898b,0x38e7195b,0xdb79c8ee,0x47a17c0a,0xe97c420f,0xc9f8841e,0,0x83098086,0x48322bed,0xac1e1170,0x4e6c5a72,0xfbfd0eff,0x560f8538,0x1e3daed5,0x27362d39,0x640a0fd9,0x21685ca6,0xd19b5b54,0x3a24362e,0xb10c0a67,0xf9357e7,0xd2b4ee96,0x9e1b9b91,0x4f80c0c5,0xa261dc20,0x695a774b,0x161c121a,0xae293ba,0xe5c0a02a,0x433c22e0,0x1d121b17,0xb0e090d,0xadf28bc7,0xb92db6a8,0xc8141ea9,0x8557f119,0x4caf7507,0xbbee99dd,0xfda37f60,0x9ff70126,0xbc5c72f5,0xc544663b,0x345bfb7e,0x768b4329,0xdccb23c6,0x68b6edfc,0x63b8e4f1,0xcad731dc,0x10426385,0x40139722,0x2084c611,0x7d854a24,0xf8d2bb3d,0x11aef932,0x6dc729a1,0x4b1d9e2f,0xf3dcb230,0xec0d8652,0xd077c1e3,0x6c2bb316,0x99a970b9,0xfa119448,0x2247e964,0xc4a8fc8c,0x1aa0f03f,0xd8567d2c,0xef223390,0xc787494e,0xc1d938d1,0xfe8ccaa2,0x3698d40b,0xcfa6f581,0x28a57ade,0x26dab78e,0xa43fadbf,0xe42c3a9d,0xd507892,0x9b6a5fcc,0x62547e46,0xc2f68d13,0xe890d8b8,0x5e2e39f7,0xf582c3af,0xbe9f5d80,0x7c69d093,0xa96fd52d,0xb3cf2512,0x3bc8ac99,0xa710187d,0x6ee89c63,0x7bdb3bbb,0x9cd2678,0xf46e5918,0x1ec9ab7,0xa8834f9a,0x65e6956e,0x7eaaffe6,0x821bccf,0xe6ef15e8,0xd9bae79b,0xce4a6f36,0xd4ea9f09,0xd629b07c,0xaf31a4b2,0x312a3f23,0x30c6a594,0xc035a266,0x37744ebc,0xa6fc82ca,0xb0e090d0,0x1533a7d8,0x4af10498,0xf741ecda,0xe7fcd50,0x2f1791f6,0x8d764dd6,0x4d43efb0,0x54ccaa4d,0xdfe49604,0xe39ed1b5,0x1b4c6a88,0xb8c12c1f,0x7f466551,0x49d5eea,0x5d018c35,0x73fa8774,0x2efb0b41,0x5ab3671d,0x5292dbd2,0x33e91056,0x136dd647,0x8c9ad761,0x7a37a10c,0x8e59f814,0x89eb133c,0xeecea927,0x35b761c9,0xede11ce5,0x3c7a47b1,0x599cd2df,0x3f55f273,0x791814ce,0xbf73c737,0xea53f7cd,0x5b5ffdaa,0x14df3d6f,0x867844db,0x81caaff3,0x3eb968c4,0x2c382434,0x5fc2a340,0x72161dc3,0xcbce225,0x8b283c49,0x41ff0d95,0x7139a801,0xde080cb3,0x9cd8b4e4,0x906456c1,0x617bcb84,0x70d532b6,0x74486c5c,0x42d0b857],b=[0xa75051f4,0x65537e41,0xa4c31a17,0x5e963a27,0x6bcb3bab,0x45f11f9d,0x58abacfa,0x3934be3,0xfa552030,0x6df6ad76,0x769188cc,0x4c25f502,0xd7fc4fe5,0xcbd7c52a,0x44802635,0xa38fb562,0x5a49deb1,0x1b6725ba,0xe9845ea,0xc0e15dfe,0x7502c32f,0xf012814c,0x97a38d46,0xf9c66bd3,0x5fe7038f,0x9c951592,0x7aebbf6d,0x59da9552,0x832dd4be,0x21d35874,0x692949e0,0xc8448ec9,0x896a75c2,0x7978f48e,1047239e3,0x71dd27b9,0x4fb6bee1,0xad17f088,0xac66c920,0x3ab47dce,0x4a1863df,0x3182e51a,0x33609751,0x7f456253,0x77e0b164,0xae84bb6b,0xa01cfe81,0x2b94f908,0x68587048,0xfd198f45,0x6c8794de,0xf8b7527b,0xd323ab73,0x2e2724b,0x8f57e31f,0xab2a6655,0x2807b2eb,0xc2032fb5,0x7b9a86c5,0x8a5d337,0x87f23028,0xa5b223bf,0x6aba0203,0x825ced16,0x1c2b8acf,0xb492a779,0xf2f0f307,0xe2a14e69,0xf4cd65da,0xbed50605,0x621fd134,0xfe8ac4a6,0x539d342e,0x55a0a2f3,0xe132058a,0xeb75a4f6,0xec390b83,0xefaa4060,0x9f065e71,0x1051bd6e,0x8af93e21,0x63d96dd,0x5aedd3e,0xbd464de6,0x8db59154,0x5d0571c4,0xd46f0406,0x15ff6050,0xfb241998,0xe997d6bd,0x43cc8940,0x9e7767d9,0x42bdb0e8,0x8b880789,0x5b38e719,0xeedb79c8,0xa47a17c,0xfe97c42,0x1ec9f884,0,0x86830980,0xed48322b,0x70ac1e11,0x724e6c5a,0xfffbfd0e,0x38560f85,0xd51e3dae,0x3927362d,0xd9640a0f,0xa621685c,0x54d19b5b,0x2e3a2436,0x67b10c0a,0xe70f9357,0x96d2b4ee,0x919e1b9b,0xc54f80c0,0x20a261dc,0x4b695a77,0x1a161c12,0xba0ae293,0x2ae5c0a0,0xe0433c22,0x171d121b,0xd0b0e09,0xc7adf28b,0xa8b92db6,0xa9c8141e,0x198557f1,0x74caf75,0xddbbee99,0x60fda37f,0x269ff701,0xf5bc5c72,0x3bc54466,0x7e345bfb,0x29768b43,0xc6dccb23,0xfc68b6ed,0xf163b8e4,0xdccad731,0x85104263,0x22401397,0x112084c6,0x247d854a,0x3df8d2bb,0x3211aef9,0xa16dc729,0x2f4b1d9e,0x30f3dcb2,0x52ec0d86,0xe3d077c1,0x166c2bb3,0xb999a970,0x48fa1194,0x642247e9,0x8cc4a8fc,0x3f1aa0f0,0x2cd8567d,0x90ef2233,0x4ec78749,0xd1c1d938,0xa2fe8cca,0xb3698d4,0x81cfa6f5,0xde28a57a,0x8e26dab7,0xbfa43fad,0x9de42c3a,0x920d5078,0xcc9b6a5f,0x4662547e,0x13c2f68d,0xb8e890d8,0xf75e2e39,0xaff582c3,0x80be9f5d,0x937c69d0,0x2da96fd5,0x12b3cf25,0x993bc8ac,0x7da71018,0x636ee89c,0xbb7bdb3b,0x7809cd26,0x18f46e59,0xb701ec9a,0x9aa8834f,0x6e65e695,0xe67eaaff,0xcf0821bc,0xe8e6ef15,0x9bd9bae7,0x36ce4a6f,0x9d4ea9f,0x7cd629b0,0xb2af31a4,0x23312a3f,0x9430c6a5,0x66c035a2,0xbc37744e,0xcaa6fc82,0xd0b0e090,0xd81533a7,0x984af104,0xdaf741ec,0x500e7fcd,0xf62f1791,0xd68d764d,0xb04d43ef,0x4d54ccaa,0x4dfe496,0xb5e39ed1,0x881b4c6a,0x1fb8c12c,0x517f4665,0xea049d5e,0x355d018c,0x7473fa87,0x412efb0b,0x1d5ab367,0xd25292db,0x5633e910,0x47136dd6,0x618c9ad7,0xc7a37a1,0x148e59f8,0x3c89eb13,0x27eecea9,0xc935b761,0xe5ede11c,0xb13c7a47,0xdf599cd2,0x733f55f2,0xce791814,0x37bf73c7,0xcdea53f7,0xaa5b5ffd,0x6f14df3d,0xdb867844,0xf381caaf,0xc43eb968,0x342c3824,0x405fc2a3,0xc372161d,0x250cbce2,0x498b283c,0x9541ff0d,0x17139a8,0xb3de080c,0xe49cd8b4,0xc1906456,0x84617bcb,0xb670d532,0x5c74486c,0x5742d0b8],y=[0xf4a75051,0x4165537e,0x17a4c31a,0x275e963a,0xab6bcb3b,0x9d45f11f,0xfa58abac,0xe303934b,0x30fa5520,0x766df6ad,0xcc769188,0x24c25f5,0xe5d7fc4f,0x2acbd7c5,0x35448026,0x62a38fb5,0xb15a49de,0xba1b6725,0xea0e9845,0xfec0e15d,0x2f7502c3,0x4cf01281,0x4697a38d,0xd3f9c66b,0x8f5fe703,0x929c9515,0x6d7aebbf,0x5259da95,0xbe832dd4,0x7421d358,0xe0692949,0xc9c8448e,0xc2896a75,0x8e7978f4,0x583e6b99,0xb971dd27,0xe14fb6be,0x88ad17f0,0x20ac66c9,0xce3ab47d,0xdf4a1863,0x1a3182e5,0x51336097,0x537f4562,0x6477e0b1,0x6bae84bb,0x81a01cfe,0x82b94f9,0x48685870,0x45fd198f,0xde6c8794,0x7bf8b752,0x73d323ab,0x4b02e272,0x1f8f57e3,0x55ab2a66,0xeb2807b2,0xb5c2032f,0xc57b9a86,0x3708a5d3,679998e3,0xbfa5b223,0x36aba02,0x16825ced,0xcf1c2b8a,0x79b492a7,0x7f2f0f3,0x69e2a14e,0xdaf4cd65,0x5bed506,0x34621fd1,0xa6fe8ac4,0x2e539d34,0xf355a0a2,0x8ae13205,0xf6eb75a4,0x83ec390b,0x60efaa40,0x719f065e,0x6e1051bd,0x218af93e,0xdd063d96,0x3e05aedd,0xe6bd464d,0x548db591,0xc45d0571,0x6d46f04,0x5015ff60,0x98fb2419,0xbde997d6,0x4043cc89,0xd99e7767,0xe842bdb0,0x898b8807,0x195b38e7,0xc8eedb79,0x7c0a47a1,0x420fe97c,0x841ec9f8,0,0x80868309,0x2bed4832,0x1170ac1e,0x5a724e6c,0xefffbfd,0x8538560f,0xaed51e3d,0x2d392736,0xfd9640a,0x5ca62168,0x5b54d19b,0x362e3a24,0xa67b10c,0x57e70f93,0xee96d2b4,0x9b919e1b,0xc0c54f80,0xdc20a261,0x774b695a,0x121a161c,0x93ba0ae2,0xa02ae5c0,0x22e0433c,0x1b171d12,0x90d0b0e,0x8bc7adf2,0xb6a8b92d,0x1ea9c814,0xf1198557,0x75074caf,0x99ddbbee,0x7f60fda3,0x1269ff7,0x72f5bc5c,0x663bc544,0xfb7e345b,0x4329768b,0x23c6dccb,0xedfc68b6,0xe4f163b8,0x31dccad7,0x63851042,0x97224013,0xc6112084,0x4a247d85,0xbb3df8d2,0xf93211ae,0x29a16dc7,0x9e2f4b1d,0xb230f3dc,0x8652ec0d,0xc1e3d077,0xb3166c2b,0x70b999a9,0x9448fa11,0xe9642247,0xfc8cc4a8,0xf03f1aa0,0x7d2cd856,0x3390ef22,0x494ec787,0x38d1c1d9,0xcaa2fe8c,0xd40b3698,0xf581cfa6,0x7ade28a5,0xb78e26da,0xadbfa43f,0x3a9de42c,0x78920d50,0x5fcc9b6a,0x7e466254,0x8d13c2f6,0xd8b8e890,0x39f75e2e,0xc3aff582,0x5d80be9f,0xd0937c69,0xd52da96f,0x2512b3cf,0xac993bc8,0x187da710,0x9c636ee8,0x3bbb7bdb,0x267809cd,0x5918f46e,0x9ab701ec,0x4f9aa883,0x956e65e6,0xffe67eaa,0xbccf0821,0x15e8e6ef,0xe79bd9ba,0x6f36ce4a,0x9f09d4ea,0xb07cd629,0xa4b2af31,0x3f23312a,0xa59430c6,0xa266c035,0x4ebc3774,0x82caa6fc,0x90d0b0e0,0xa7d81533,0x4984af1,0xecdaf741,0xcd500e7f,0x91f62f17,0x4dd68d76,0xefb04d43,0xaa4d54cc,0x9604dfe4,0xd1b5e39e,0x6a881b4c,0x2c1fb8c1,0x65517f46,0x5eea049d,0x8c355d01,0x877473fa,0xb412efb,0x671d5ab3,0xdbd25292,0x105633e9,0xd647136d,0xd7618c9a,0xa10c7a37,0xf8148e59,0x133c89eb,0xa927eece,0x61c935b7,0x1ce5ede1,0x47b13c7a,0xd2df599c,0xf2733f55,0x14ce7918,0xc737bf73,0xf7cdea53,0xfdaa5b5f,0x3d6f14df,0x44db8678,0xaff381ca,0x68c43eb9,0x24342c38,0xa3405fc2,0x1dc37216,0xe2250cbc,0x3c498b28,0xd9541ff,0xa8017139,0xcb3de08,0xb4e49cd8,0x56c19064,0xcb84617b,0x32b670d5,0x6c5c7448,0xb85742d0],x=[0,0xe090d0b,0x1c121a16,0x121b171d,0x3824342c,0x362d3927,0x24362e3a,0x2a3f2331,0x70486858,0x7e416553,0x6c5a724e,0x62537f45,0x486c5c74,0x4665517f,0x547e4662,0x5a774b69,0xe090d0b0,0xee99ddbb,0xfc82caa6,0xf28bc7ad,0xd8b4e49c,0xd6bde997,0xc4a6fe8a,0xcaaff381,0x90d8b8e8,0x9ed1b5e3,0x8ccaa2fe,0x82c3aff5,0xa8fc8cc4,0xa6f581cf,0xb4ee96d2,0xbae79bd9,0xdb3bbb7b,0xd532b670,0xc729a16d,0xc920ac66,0xe31f8f57,0xed16825c,0xff0d9541,0xf104984a,0xab73d323,0xa57ade28,0xb761c935,0xb968c43e,0x9357e70f,0x9d5eea04,0x8f45fd19,0x814cf012,0x3bab6bcb,0x35a266c0,0x27b971dd,0x29b07cd6,0x38f5fe7,0xd8652ec,0x1f9d45f1,0x119448fa,0x4be30393,0x45ea0e98,0x57f11985,0x59f8148e,0x73c737bf,0x7dce3ab4,0x6fd52da9,0x61dc20a2,0xad766df6,0xa37f60fd,0xb16477e0,0xbf6d7aeb,0x955259da,0x9b5b54d1,0x894043cc,0x87494ec7,0xdd3e05ae,0xd33708a5,0xc12c1fb8,0xcf2512b3,0xe51a3182,0xeb133c89,0xf9082b94,0xf701269f,0x4de6bd46,0x43efb04d,0x51f4a750,0x5ffdaa5b,0x75c2896a,0x7bcb8461,0x69d0937c,0x67d99e77,0x3daed51e,0x33a7d815,0x21bccf08,0x2fb5c203,0x58ae132,0xb83ec39,0x1998fb24,0x1791f62f,0x764dd68d,0x7844db86,0x6a5fcc9b,0x6456c190,0x4e69e2a1,0x4060efaa,0x527bf8b7,0x5c72f5bc,0x605bed5,0x80cb3de,0x1a17a4c3,0x141ea9c8,0x3e218af9,0x302887f2,0x223390ef,0x2c3a9de4,0x96dd063d,0x98d40b36,0x8acf1c2b,0x84c61120,0xaef93211,0xa0f03f1a,0xb2eb2807,0xbce2250c,0xe6956e65,0xe89c636e,0xfa877473,0xf48e7978,0xdeb15a49,0xd0b85742,0xc2a3405f,0xccaa4d54,0x41ecdaf7,0x4fe5d7fc,0x5dfec0e1,0x53f7cdea,0x79c8eedb,0x77c1e3d0,0x65daf4cd,0x6bd3f9c6,0x31a4b2af,0x3fadbfa4,0x2db6a8b9,0x23bfa5b2,0x9808683,0x7898b88,0x15929c95,0x1b9b919e,0xa17c0a47,0xaf75074c,0xbd6e1051,0xb3671d5a,0x99583e6b,0x97513360,0x854a247d,0x8b432976,0xd134621f,0xdf3d6f14,0xcd267809,0xc32f7502,0xe9105633,0xe7195b38,0xf5024c25,0xfb0b412e,0x9ad7618c,0x94de6c87,0x86c57b9a,0x88cc7691,0xa2f355a0,0xacfa58ab,0xbee14fb6,0xb0e842bd,0xea9f09d4,0xe49604df,0xf68d13c2,0xf8841ec9,0xd2bb3df8,0xdcb230f3,0xcea927ee,0xc0a02ae5,0x7a47b13c,0x744ebc37,0x6655ab2a,0x685ca621,0x42638510,0x4c6a881b,0x5e719f06,0x5078920d,0xa0fd964,0x406d46f,0x161dc372,0x1814ce79,0x322bed48,0x3c22e043,0x2e39f75e,0x2030fa55,0xec9ab701,0xe293ba0a,0xf088ad17,0xfe81a01c,0xd4be832d,0xdab78e26,0xc8ac993b,0xc6a59430,0x9cd2df59,0x92dbd252,0x80c0c54f,0x8ec9c844,0xa4f6eb75,0xaaffe67e,0xb8e4f163,0xb6edfc68,0xc0a67b1,0x2036aba,0x10187da7,0x1e1170ac,0x342e539d,0x3a275e96,0x283c498b,0x26354480,0x7c420fe9,0x724b02e2,0x605015ff,0x6e5918f4,0x44663bc5,0x4a6f36ce,0x587421d3,0x567d2cd8,0x37a10c7a,0x39a80171,0x2bb3166c,0x25ba1b67,0xf853856,0x18c355d,0x13972240,0x1d9e2f4b,0x47e96422,0x49e06929,0x5bfb7e34,0x55f2733f,0x7fcd500e,0x71c45d05,0x63df4a18,0x6dd64713,0xd731dcca,0xd938d1c1,0xcb23c6dc,0xc52acbd7,0xef15e8e6,0xe11ce5ed,0xf307f2f0,0xfd0efffb,0xa779b492,0xa970b999,0xbb6bae84,0xb562a38f,0x9f5d80be,0x91548db5,0x834f9aa8,0x8d4697a3],w=[0,0xb0e090d,0x161c121a,0x1d121b17,0x2c382434,0x27362d39,0x3a24362e,0x312a3f23,0x58704868,0x537e4165,0x4e6c5a72,0x4562537f,0x74486c5c,0x7f466551,0x62547e46,0x695a774b,0xb0e090d0,0xbbee99dd,0xa6fc82ca,0xadf28bc7,0x9cd8b4e4,0x97d6bde9,0x8ac4a6fe,0x81caaff3,0xe890d8b8,0xe39ed1b5,0xfe8ccaa2,0xf582c3af,0xc4a8fc8c,0xcfa6f581,0xd2b4ee96,0xd9bae79b,0x7bdb3bbb,0x70d532b6,0x6dc729a1,0x66c920ac,0x57e31f8f,0x5ced1682,0x41ff0d95,0x4af10498,0x23ab73d3,0x28a57ade,0x35b761c9,0x3eb968c4,0xf9357e7,0x49d5eea,0x198f45fd,0x12814cf0,0xcb3bab6b,0xc035a266,0xdd27b971,0xd629b07c,0xe7038f5f,0xec0d8652,0xf11f9d45,0xfa119448,0x934be303,0x9845ea0e,0x8557f119,0x8e59f814,0xbf73c737,0xb47dce3a,0xa96fd52d,0xa261dc20,0xf6ad766d,0xfda37f60,0xe0b16477,0xebbf6d7a,0xda955259,0xd19b5b54,0xcc894043,0xc787494e,0xaedd3e05,0xa5d33708,0xb8c12c1f,0xb3cf2512,0x82e51a31,0x89eb133c,0x94f9082b,0x9ff70126,0x464de6bd,0x4d43efb0,0x5051f4a7,0x5b5ffdaa,0x6a75c289,0x617bcb84,0x7c69d093,0x7767d99e,0x1e3daed5,0x1533a7d8,0x821bccf,0x32fb5c2,0x32058ae1,0x390b83ec,0x241998fb,0x2f1791f6,0x8d764dd6,0x867844db,0x9b6a5fcc,0x906456c1,0xa14e69e2,0xaa4060ef,0xb7527bf8,0xbc5c72f5,0xd50605be,0xde080cb3,0xc31a17a4,0xc8141ea9,0xf93e218a,0xf2302887,0xef223390,0xe42c3a9d,0x3d96dd06,0x3698d40b,0x2b8acf1c,0x2084c611,0x11aef932,0x1aa0f03f,0x7b2eb28,0xcbce225,0x65e6956e,0x6ee89c63,0x73fa8774,0x78f48e79,0x49deb15a,0x42d0b857,0x5fc2a340,0x54ccaa4d,0xf741ecda,0xfc4fe5d7,0xe15dfec0,0xea53f7cd,0xdb79c8ee,0xd077c1e3,0xcd65daf4,0xc66bd3f9,0xaf31a4b2,0xa43fadbf,0xb92db6a8,0xb223bfa5,0x83098086,0x8807898b,0x9515929c,0x9e1b9b91,0x47a17c0a,0x4caf7507,0x51bd6e10,0x5ab3671d,0x6b99583e,0x60975133,0x7d854a24,0x768b4329,0x1fd13462,0x14df3d6f,0x9cd2678,0x2c32f75,0x33e91056,0x38e7195b,0x25f5024c,0x2efb0b41,0x8c9ad761,0x8794de6c,0x9a86c57b,0x9188cc76,0xa0a2f355,0xabacfa58,0xb6bee14f,0xbdb0e842,0xd4ea9f09,0xdfe49604,0xc2f68d13,0xc9f8841e,0xf8d2bb3d,0xf3dcb230,0xeecea927,0xe5c0a02a,0x3c7a47b1,0x37744ebc,0x2a6655ab,0x21685ca6,0x10426385,0x1b4c6a88,0x65e719f,0xd507892,0x640a0fd9,0x6f0406d4,0x72161dc3,0x791814ce,0x48322bed,0x433c22e0,0x5e2e39f7,0x552030fa,0x1ec9ab7,0xae293ba,0x17f088ad,0x1cfe81a0,0x2dd4be83,0x26dab78e,0x3bc8ac99,0x30c6a594,0x599cd2df,0x5292dbd2,0x4f80c0c5,0x448ec9c8,0x75a4f6eb,0x7eaaffe6,0x63b8e4f1,0x68b6edfc,0xb10c0a67,0xba02036a,0xa710187d,0xac1e1170,0x9d342e53,0x963a275e,0x8b283c49,0x80263544,0xe97c420f,0xe2724b02,0xff605015,0xf46e5918,0xc544663b,0xce4a6f36,0xd3587421,0xd8567d2c,0x7a37a10c,0x7139a801,0x6c2bb316,0x6725ba1b,0x560f8538,0x5d018c35,0x40139722,0x4b1d9e2f,0x2247e964,0x2949e069,0x345bfb7e,0x3f55f273,0xe7fcd50,0x571c45d,0x1863df4a,0x136dd647,0xcad731dc,0xc1d938d1,0xdccb23c6,0xd7c52acb,0xe6ef15e8,0xede11ce5,0xf0f307f2,0xfbfd0eff,0x92a779b4,0x99a970b9,0x84bb6bae,0x8fb562a3,0xbe9f5d80,0xb591548d,0xa8834f9a,0xa38d4697],v=[0,0xd0b0e09,0x1a161c12,0x171d121b,0x342c3824,0x3927362d,0x2e3a2436,0x23312a3f,0x68587048,0x65537e41,0x724e6c5a,0x7f456253,0x5c74486c,0x517f4665,0x4662547e,0x4b695a77,0xd0b0e090,0xddbbee99,0xcaa6fc82,0xc7adf28b,0xe49cd8b4,0xe997d6bd,0xfe8ac4a6,0xf381caaf,0xb8e890d8,0xb5e39ed1,0xa2fe8cca,0xaff582c3,0x8cc4a8fc,0x81cfa6f5,0x96d2b4ee,0x9bd9bae7,0xbb7bdb3b,0xb670d532,0xa16dc729,0xac66c920,0x8f57e31f,0x825ced16,0x9541ff0d,0x984af104,0xd323ab73,0xde28a57a,0xc935b761,0xc43eb968,0xe70f9357,0xea049d5e,0xfd198f45,0xf012814c,0x6bcb3bab,0x66c035a2,0x71dd27b9,0x7cd629b0,0x5fe7038f,0x52ec0d86,0x45f11f9d,0x48fa1194,0x3934be3,0xe9845ea,0x198557f1,0x148e59f8,0x37bf73c7,0x3ab47dce,0x2da96fd5,0x20a261dc,0x6df6ad76,0x60fda37f,0x77e0b164,0x7aebbf6d,0x59da9552,0x54d19b5b,0x43cc8940,0x4ec78749,0x5aedd3e,0x8a5d337,0x1fb8c12c,0x12b3cf25,0x3182e51a,0x3c89eb13,0x2b94f908,0x269ff701,0xbd464de6,0xb04d43ef,0xa75051f4,0xaa5b5ffd,0x896a75c2,0x84617bcb,0x937c69d0,0x9e7767d9,0xd51e3dae,0xd81533a7,0xcf0821bc,0xc2032fb5,0xe132058a,0xec390b83,0xfb241998,0xf62f1791,0xd68d764d,0xdb867844,0xcc9b6a5f,0xc1906456,0xe2a14e69,0xefaa4060,0xf8b7527b,0xf5bc5c72,0xbed50605,0xb3de080c,0xa4c31a17,0xa9c8141e,0x8af93e21,0x87f23028,0x90ef2233,0x9de42c3a,0x63d96dd,0xb3698d4,0x1c2b8acf,0x112084c6,0x3211aef9,0x3f1aa0f0,0x2807b2eb,0x250cbce2,0x6e65e695,0x636ee89c,0x7473fa87,0x7978f48e,0x5a49deb1,0x5742d0b8,0x405fc2a3,0x4d54ccaa,0xdaf741ec,0xd7fc4fe5,0xc0e15dfe,0xcdea53f7,0xeedb79c8,0xe3d077c1,0xf4cd65da,0xf9c66bd3,0xb2af31a4,0xbfa43fad,0xa8b92db6,0xa5b223bf,0x86830980,0x8b880789,0x9c951592,0x919e1b9b,0xa47a17c,0x74caf75,0x1051bd6e,0x1d5ab367,1047239e3,0x33609751,0x247d854a,0x29768b43,0x621fd134,0x6f14df3d,0x7809cd26,0x7502c32f,0x5633e910,0x5b38e719,0x4c25f502,0x412efb0b,0x618c9ad7,0x6c8794de,0x7b9a86c5,0x769188cc,0x55a0a2f3,0x58abacfa,0x4fb6bee1,0x42bdb0e8,0x9d4ea9f,0x4dfe496,0x13c2f68d,0x1ec9f884,0x3df8d2bb,0x30f3dcb2,0x27eecea9,0x2ae5c0a0,0xb13c7a47,0xbc37744e,0xab2a6655,0xa621685c,0x85104263,0x881b4c6a,0x9f065e71,0x920d5078,0xd9640a0f,0xd46f0406,0xc372161d,0xce791814,0xed48322b,0xe0433c22,0xf75e2e39,0xfa552030,0xb701ec9a,0xba0ae293,0xad17f088,0xa01cfe81,0x832dd4be,0x8e26dab7,0x993bc8ac,0x9430c6a5,0xdf599cd2,0xd25292db,0xc54f80c0,0xc8448ec9,0xeb75a4f6,0xe67eaaff,0xf163b8e4,0xfc68b6ed,0x67b10c0a,0x6aba0203,0x7da71018,0x70ac1e11,0x539d342e,0x5e963a27,0x498b283c,0x44802635,0xfe97c42,0x2e2724b,0x15ff6050,0x18f46e59,0x3bc54466,0x36ce4a6f,0x21d35874,0x2cd8567d,0xc7a37a1,0x17139a8,0x166c2bb3,0x1b6725ba,0x38560f85,0x355d018c,0x22401397,0x2f4b1d9e,0x642247e9,0x692949e0,0x7e345bfb,0x733f55f2,0x500e7fcd,0x5d0571c4,0x4a1863df,0x47136dd6,0xdccad731,0xd1c1d938,0xc6dccb23,0xcbd7c52a,0xe8e6ef15,0xe5ede11c,0xf2f0f307,0xfffbfd0e,0xb492a779,0xb999a970,0xae84bb6b,0xa38fb562,0x80be9f5d,0x8db59154,0x9aa8834f,0x97a38d46],A=[0,0x90d0b0e,0x121a161c,0x1b171d12,0x24342c38,0x2d392736,0x362e3a24,0x3f23312a,0x48685870,0x4165537e,0x5a724e6c,0x537f4562,0x6c5c7448,0x65517f46,0x7e466254,0x774b695a,0x90d0b0e0,0x99ddbbee,0x82caa6fc,0x8bc7adf2,0xb4e49cd8,0xbde997d6,0xa6fe8ac4,0xaff381ca,0xd8b8e890,0xd1b5e39e,0xcaa2fe8c,0xc3aff582,0xfc8cc4a8,0xf581cfa6,0xee96d2b4,0xe79bd9ba,0x3bbb7bdb,0x32b670d5,0x29a16dc7,0x20ac66c9,0x1f8f57e3,0x16825ced,0xd9541ff,0x4984af1,0x73d323ab,0x7ade28a5,0x61c935b7,0x68c43eb9,0x57e70f93,0x5eea049d,0x45fd198f,0x4cf01281,0xab6bcb3b,0xa266c035,0xb971dd27,0xb07cd629,0x8f5fe703,0x8652ec0d,0x9d45f11f,0x9448fa11,0xe303934b,0xea0e9845,0xf1198557,0xf8148e59,0xc737bf73,0xce3ab47d,0xd52da96f,0xdc20a261,0x766df6ad,0x7f60fda3,0x6477e0b1,0x6d7aebbf,0x5259da95,0x5b54d19b,0x4043cc89,0x494ec787,0x3e05aedd,0x3708a5d3,0x2c1fb8c1,0x2512b3cf,0x1a3182e5,0x133c89eb,0x82b94f9,0x1269ff7,0xe6bd464d,0xefb04d43,0xf4a75051,0xfdaa5b5f,0xc2896a75,0xcb84617b,0xd0937c69,0xd99e7767,0xaed51e3d,0xa7d81533,0xbccf0821,0xb5c2032f,0x8ae13205,0x83ec390b,0x98fb2419,0x91f62f17,0x4dd68d76,0x44db8678,0x5fcc9b6a,0x56c19064,0x69e2a14e,0x60efaa40,0x7bf8b752,0x72f5bc5c,0x5bed506,0xcb3de08,0x17a4c31a,0x1ea9c814,0x218af93e,679998e3,0x3390ef22,0x3a9de42c,0xdd063d96,0xd40b3698,0xcf1c2b8a,0xc6112084,0xf93211ae,0xf03f1aa0,0xeb2807b2,0xe2250cbc,0x956e65e6,0x9c636ee8,0x877473fa,0x8e7978f4,0xb15a49de,0xb85742d0,0xa3405fc2,0xaa4d54cc,0xecdaf741,0xe5d7fc4f,0xfec0e15d,0xf7cdea53,0xc8eedb79,0xc1e3d077,0xdaf4cd65,0xd3f9c66b,0xa4b2af31,0xadbfa43f,0xb6a8b92d,0xbfa5b223,0x80868309,0x898b8807,0x929c9515,0x9b919e1b,0x7c0a47a1,0x75074caf,0x6e1051bd,0x671d5ab3,0x583e6b99,0x51336097,0x4a247d85,0x4329768b,0x34621fd1,0x3d6f14df,0x267809cd,0x2f7502c3,0x105633e9,0x195b38e7,0x24c25f5,0xb412efb,0xd7618c9a,0xde6c8794,0xc57b9a86,0xcc769188,0xf355a0a2,0xfa58abac,0xe14fb6be,0xe842bdb0,0x9f09d4ea,0x9604dfe4,0x8d13c2f6,0x841ec9f8,0xbb3df8d2,0xb230f3dc,0xa927eece,0xa02ae5c0,0x47b13c7a,0x4ebc3774,0x55ab2a66,0x5ca62168,0x63851042,0x6a881b4c,0x719f065e,0x78920d50,0xfd9640a,0x6d46f04,0x1dc37216,0x14ce7918,0x2bed4832,0x22e0433c,0x39f75e2e,0x30fa5520,0x9ab701ec,0x93ba0ae2,0x88ad17f0,0x81a01cfe,0xbe832dd4,0xb78e26da,0xac993bc8,0xa59430c6,0xd2df599c,0xdbd25292,0xc0c54f80,0xc9c8448e,0xf6eb75a4,0xffe67eaa,0xe4f163b8,0xedfc68b6,0xa67b10c,0x36aba02,0x187da710,0x1170ac1e,0x2e539d34,0x275e963a,0x3c498b28,0x35448026,0x420fe97c,0x4b02e272,0x5015ff60,0x5918f46e,0x663bc544,0x6f36ce4a,0x7421d358,0x7d2cd856,0xa10c7a37,0xa8017139,0xb3166c2b,0xba1b6725,0x8538560f,0x8c355d01,0x97224013,0x9e2f4b1d,0xe9642247,0xe0692949,0xfb7e345b,0xf2733f55,0xcd500e7f,0xc45d0571,0xdf4a1863,0xd647136d,0x31dccad7,0x38d1c1d9,0x23c6dccb,0x2acbd7c5,0x15e8e6ef,0x1ce5ede1,0x7f2f0f3,0xefffbfd,0x79b492a7,0x70b999a9,0x6bae84bb,0x62a38fb5,0x5d80be9f,0x548db591,0x4f9aa883,0x4697a38d];function E(e){let t=[];for(let r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}class k{get key(){return s(this,r,"f").slice()}constructor(e){let t;if(r.set(this,void 0),n.set(this,void 0),i.set(this,void 0),!(this instanceof k))throw Error("AES must be instanitated with `new`");a(this,r,new Uint8Array(e),"f");let u=o[this.key.length];if(null==u)throw TypeError("invalid key size (must be 16, 24 or 32 bytes)");a(this,i,[],"f"),a(this,n,[],"f");for(let e=0;e<=u;e++)s(this,i,"f").push([0,0,0,0]),s(this,n,"f").push([0,0,0,0]);let d=(u+1)*4,h=this.key.length/4,f=E(this.key);for(let e=0;e<h;e++)t=e>>2,s(this,i,"f")[t][e%4]=f[e],s(this,n,"f")[u-t][e%4]=f[e];let p=0,g=h,m;for(;g<d;){if(m=f[h-1],f[0]^=c[m>>16&255]<<24^c[m>>8&255]<<16^c[255&m]<<8^c[m>>24&255]^l[p]<<24,p+=1,8!=h)for(let e=1;e<h;e++)f[e]^=f[e-1];else{for(let e=1;e<h/2;e++)f[e]^=f[e-1];m=f[h/2-1],f[h/2]^=c[255&m]^c[m>>8&255]<<8^c[m>>16&255]<<16^c[m>>24&255]<<24;for(let e=h/2+1;e<h;e++)f[e]^=f[e-1]}let e=0,t,r;for(;e<h&&g<d;)t=g>>2,r=g%4,s(this,i,"f")[t][r]=f[e],s(this,n,"f")[u-t][r]=f[e++],g++}for(let e=1;e<u;e++)for(let t=0;t<4;t++)m=s(this,n,"f")[e][t],s(this,n,"f")[e][t]=x[m>>24&255]^w[m>>16&255]^v[m>>8&255]^A[255&m]}encrypt(e){if(16!=e.length)throw TypeError("invalid plaintext size (must be 16 bytes)");let t=s(this,i,"f").length-1,r=[0,0,0,0],n=E(e);for(let e=0;e<4;e++)n[e]^=s(this,i,"f")[0][e];for(let e=1;e<t;e++){for(let t=0;t<4;t++)r[t]=d[n[t]>>24&255]^h[n[(t+1)%4]>>16&255]^f[n[(t+2)%4]>>8&255]^p[255&n[(t+3)%4]]^s(this,i,"f")[e][t];n=r.slice()}let a=new Uint8Array(16),o=0;for(let e=0;e<4;e++)o=s(this,i,"f")[t][e],a[4*e]=(c[n[e]>>24&255]^o>>24)&255,a[4*e+1]=(c[n[(e+1)%4]>>16&255]^o>>16)&255,a[4*e+2]=(c[n[(e+2)%4]>>8&255]^o>>8)&255,a[4*e+3]=(c[255&n[(e+3)%4]]^o)&255;return a}decrypt(e){if(16!=e.length)throw TypeError("invalid ciphertext size (must be 16 bytes)");let t=s(this,n,"f").length-1,r=[0,0,0,0],i=E(e);for(let e=0;e<4;e++)i[e]^=s(this,n,"f")[0][e];for(let e=1;e<t;e++){for(let t=0;t<4;t++)r[t]=g[i[t]>>24&255]^m[i[(t+3)%4]>>16&255]^b[i[(t+2)%4]>>8&255]^y[255&i[(t+1)%4]]^s(this,n,"f")[e][t];i=r.slice()}let a=new Uint8Array(16),o=0;for(let e=0;e<4;e++)o=s(this,n,"f")[t][e],a[4*e]=(u[i[e]>>24&255]^o>>24)&255,a[4*e+1]=(u[i[(e+3)%4]>>16&255]^o>>16)&255,a[4*e+2]=(u[i[(e+2)%4]>>8&255]^o>>8)&255,a[4*e+3]=(u[255&i[(e+1)%4]]^o)&255;return a}}t.AES=k,r=new WeakMap,n=new WeakMap,i=new WeakMap},2131:(e,t,r)=>{"use strict";r.d(t,{y:()=>et});var n,i,s,a,o,l,c,u,d,h=r(3204),f=r(8981),p=r(1436),g=r(9827),m=r(3366);class b{filter;constructor(e,t){this.filter=(0,m.O)(e,t)}has(e){return this.filter.has(e.toMultihash().bytes)}add(e){this.filter.add(e.toMultihash().bytes)}remove(e){this.filter.remove?.(e.toMultihash().bytes)}}var y=r(1680),x=r(847),w=r(4113);function v(e){let{stream:t,remoteAddr:r,logger:n,onDataRead:i,onDataWrite:s}=e,a=n.forComponent("libp2p:stream:converter"),o=!1,l=!1,c=t.close.bind(t);t.close=async e=>{await c(e),f(!0)};let u=t.abort.bind(t);t.abort=e=>{u(e),f(!0)};let d=t.sink.bind(t);t.sink=async e=>{try{await d((0,w.F)(e,e=>(0,x.A)(e,e=>s?.(e))))}catch(e){"aborted"!==e.type&&a.error("%s error in sink",r,e)}finally{l=!0,f()}};let h={log:a,sink:t.sink,source:async function*(){try{for await(let e of t.source)i?.(e),yield e}finally{o=!0,f()}}(),remoteAddr:r,timeline:{open:Date.now(),close:void 0},close:t.close,abort:t.abort};function f(e){!0===e&&(o=!0,l=!0),o&&l&&null==h.timeline.close&&(h.timeline.close=Date.now())}return h}var A=r(3809),E=r(2706),k=r(7255),P=r(6676),S=r(4057),I=r(608),T=r(8516);let _=`${T.Q}-circuit-relay`;BigInt(131072);let C="/libp2p/circuit/relay/0.2.0/hop",O="/libp2p/circuit/relay/0.2.0/stop";var R=r(6038),N=r(1970);!function(e){var t,r;let n,i;(t=e.Type||(e.Type={})).RESERVE="RESERVE",t.CONNECT="CONNECT",t.STATUS="STATUS",(r=n||(n={}))[r.RESERVE=0]="RESERVE",r[r.CONNECT=1]="CONNECT",r[r.STATUS=2]="STATUS",(e.Type||(e.Type={})).codec=()=>(0,R.eG)(n),e.codec=()=>(null==i&&(i=(0,R.iU)((t,r,n={})=>{!1!==n.lengthDelimited&&r.fork(),null!=t.type&&(r.uint32(8),e.Type.codec().encode(t.type,r)),null!=t.peer&&(r.uint32(18),s.codec().encode(t.peer,r)),null!=t.reservation&&(r.uint32(26),a.codec().encode(t.reservation,r)),null!=t.limit&&(r.uint32(34),o.codec().encode(t.limit,r)),null!=t.status&&(r.uint32(40),l.codec().encode(t.status,r)),!1!==n.lengthDelimited&&r.ldelim()},(t,r,n={})=>{let i={},c=null==r?t.len:t.pos+r;for(;t.pos<c;){let r=t.uint32();switch(r>>>3){case 1:i.type=e.Type.codec().decode(t);break;case 2:i.peer=s.codec().decode(t,t.uint32(),{limits:n.limits?.peer});break;case 3:i.reservation=a.codec().decode(t,t.uint32(),{limits:n.limits?.reservation});break;case 4:i.limit=o.codec().decode(t,t.uint32(),{limits:n.limits?.limit});break;case 5:i.status=l.codec().decode(t);break;default:t.skipType(7&r)}}return i})),i),e.encode=t=>(0,R.mH)(t,e.codec()),e.decode=(t,r)=>(0,R.Y8)(t,e.codec(),r)}(n||(n={})),function(e){var t,r;let n,i;(t=e.Type||(e.Type={})).CONNECT="CONNECT",t.STATUS="STATUS",(r=n||(n={}))[r.CONNECT=0]="CONNECT",r[r.STATUS=1]="STATUS",(e.Type||(e.Type={})).codec=()=>(0,R.eG)(n),e.codec=()=>(null==i&&(i=(0,R.iU)((t,r,n={})=>{!1!==n.lengthDelimited&&r.fork(),null!=t.type&&(r.uint32(8),e.Type.codec().encode(t.type,r)),null!=t.peer&&(r.uint32(18),s.codec().encode(t.peer,r)),null!=t.limit&&(r.uint32(26),o.codec().encode(t.limit,r)),null!=t.status&&(r.uint32(32),l.codec().encode(t.status,r)),!1!==n.lengthDelimited&&r.ldelim()},(t,r,n={})=>{let i={},a=null==r?t.len:t.pos+r;for(;t.pos<a;){let r=t.uint32();switch(r>>>3){case 1:i.type=e.Type.codec().decode(t);break;case 2:i.peer=s.codec().decode(t,t.uint32(),{limits:n.limits?.peer});break;case 3:i.limit=o.codec().decode(t,t.uint32(),{limits:n.limits?.limit});break;case 4:i.status=l.codec().decode(t);break;default:t.skipType(7&r)}}return i})),i),e.encode=t=>(0,R.mH)(t,e.codec()),e.decode=(t,r)=>(0,R.Y8)(t,e.codec(),r)}(i||(i={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,R.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.id&&e.id.byteLength>0&&(t.uint32(10),t.bytes(e.id)),null!=e.addrs)for(let r of e.addrs)t.uint32(18),t.bytes(r);!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={id:(0,N.c)(0),addrs:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.id=e.bytes();break;case 2:if(r.limits?.addrs!=null&&n.addrs.length===r.limits.addrs)throw new R.zH('Decode error - map field "addrs" had too many elements');n.addrs.push(e.bytes());break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,R.mH)(t,e.codec()),e.decode=(t,r)=>(0,R.Y8)(t,e.codec(),r)}(s||(s={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,R.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.expire&&0n!==e.expire&&(t.uint32(8),t.uint64(e.expire)),null!=e.addrs)for(let r of e.addrs)t.uint32(18),t.bytes(r);null!=e.voucher&&(t.uint32(26),d.codec().encode(e.voucher,t)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={expire:0n,addrs:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.expire=e.uint64();break;case 2:if(r.limits?.addrs!=null&&n.addrs.length===r.limits.addrs)throw new R.zH('Decode error - map field "addrs" had too many elements');n.addrs.push(e.bytes());break;case 3:n.voucher=d.codec().decode(e,e.uint32(),{limits:r.limits?.voucher});break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,R.mH)(t,e.codec()),e.decode=(t,r)=>(0,R.Y8)(t,e.codec(),r)}(a||(a={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,R.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.duration&&(t.uint32(8),t.uint32(e.duration)),null!=e.data&&(t.uint32(16),t.uint64(e.data)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.duration=e.uint32();break;case 2:n.data=e.uint64();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,R.mH)(t,e.codec()),e.decode=(t,r)=>(0,R.Y8)(t,e.codec(),r)}(o||(o={})),function(e){e.UNUSED="UNUSED",e.OK="OK",e.RESERVATION_REFUSED="RESERVATION_REFUSED",e.RESOURCE_LIMIT_EXCEEDED="RESOURCE_LIMIT_EXCEEDED",e.PERMISSION_DENIED="PERMISSION_DENIED",e.CONNECTION_FAILED="CONNECTION_FAILED",e.NO_RESERVATION="NO_RESERVATION",e.MALFORMED_MESSAGE="MALFORMED_MESSAGE",e.UNEXPECTED_MESSAGE="UNEXPECTED_MESSAGE"}(l||(l={})),function(e){e[e.UNUSED=0]="UNUSED",e[e.OK=100]="OK",e[e.RESERVATION_REFUSED=200]="RESERVATION_REFUSED",e[e.RESOURCE_LIMIT_EXCEEDED=201]="RESOURCE_LIMIT_EXCEEDED",e[e.PERMISSION_DENIED=202]="PERMISSION_DENIED",e[e.CONNECTION_FAILED=203]="CONNECTION_FAILED",e[e.NO_RESERVATION=204]="NO_RESERVATION",e[e.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE",e[e.UNEXPECTED_MESSAGE=401]="UNEXPECTED_MESSAGE"}(c||(c={})),(l||(l={})).codec=()=>(0,R.eG)(c),function(e){let t;e.codec=()=>(null==t&&(t=(0,R.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.relay&&e.relay.byteLength>0&&(t.uint32(10),t.bytes(e.relay)),null!=e.peer&&e.peer.byteLength>0&&(t.uint32(18),t.bytes(e.peer)),null!=e.expiration&&0n!==e.expiration&&(t.uint32(24),t.uint64(e.expiration)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={relay:(0,N.c)(0),peer:(0,N.c)(0),expiration:0n},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.relay=e.bytes();break;case 2:n.peer=e.bytes();break;case 3:n.expiration=e.uint64();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,R.mH)(t,e.codec()),e.decode=(t,r)=>(0,R.Y8)(t,e.codec(),r)}(u||(u={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,R.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.publicKey&&e.publicKey.byteLength>0&&(t.uint32(10),t.bytes(e.publicKey)),null!=e.payloadType&&e.payloadType.byteLength>0&&(t.uint32(18),t.bytes(e.payloadType)),null!=e.payload&&(t.uint32(26),u.codec().encode(e.payload,t)),null!=e.signature&&e.signature.byteLength>0&&(t.uint32(42),t.bytes(e.signature)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={publicKey:(0,N.c)(0),payloadType:(0,N.c)(0),signature:(0,N.c)(0)},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.publicKey=e.bytes();break;case 2:n.payloadType=e.bytes();break;case 3:n.payload=u.codec().decode(e,e.uint32(),{limits:r.limits?.payload});break;case 5:n.signature=e.bytes();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,R.mH)(t,e.codec()),e.decode=(t,r)=>(0,R.Y8)(t,e.codec(),r)}(d||(d={}));var M=r(7243);function B(e){return Number(e*BigInt(1e3)-BigInt(new Date().getTime()))}r(9700),r(6572);class D{expires;bytes;constructor(e){e?.duration!=null&&e?.duration!==0&&(this.expires=Date.now()+1e3*e.duration),this.bytes=e?.data,0n===this.bytes&&(this.bytes=void 0),this.onData=this.onData.bind(this)}onData(e){null!=this.bytes&&(this.bytes-=BigInt(e.byteLength),this.bytes<0n&&(this.bytes=0n))}getLimits(){if(null==this.expires&&null==this.bytes)return;let e={};if(null!=this.bytes){let t=this;Object.defineProperty(e,"bytes",{get:()=>t.bytes})}if(null!=this.expires){let t=this;Object.defineProperty(e,"seconds",{get:()=>Math.round(((t.expires??0)-Date.now())/1e3)})}return e}}let L=(0,M.Sc)((0,M.Uo)(E.VO.matchers[0],(0,M.eu)("p2p-circuit"))),U=(0,M.Sc)((0,M.eu)("p2p-circuit"));var F=r(6264),j=r(8934),z=r(9141),H=r(6054);class G extends z.X{components;started;running;topologyId;log;discoveryController;filter;queue;constructor(e,t={}){super(),this.log=e.logger.forComponent("libp2p:circuit-relay:discover-relays"),this.components=e,this.started=!1,this.running=!1,this.filter=t.filter,this.discoveryController=new AbortController,(0,P.k)(1/0,this.discoveryController.signal),this.dialPeer=this.dialPeer.bind(this),this.onPeer=this.onPeer.bind(this)}isStarted(){return this.started}async start(){this.topologyId=await this.components.registrar.register(C,{filter:this.filter,onConnect:e=>{this.log.trace("discovered relay %p queue (length: %d, active %d)",e,this.queue?.size,this.queue?.running),this.safeDispatchEvent("relay:discover",{detail:e})}}),this.started=!0}stop(){null!=this.topologyId&&this.components.registrar.unregister(this.topologyId),this.running&&this.stopDiscovery(),this.started=!1}startDiscovery(){!this.running&&(this.log("start discovery"),this.running=!0,this.discoveryController=new AbortController,(0,P.k)(1/0,this.discoveryController.signal),this.components.events.addEventListener("peer:discovery",this.onPeer),Promise.resolve().then(async()=>{this.log("searching peer store for relays");let e=await this.components.peerStore.all({filters:[e=>e.protocols.includes(C)],orders:[()=>.5>Math.random()?1:-1,(e,t)=>{let r=$(e),n=$(t);return r>n?-1:+(n>r)}]});for(let t of e)this.log.trace("found relay peer %p in peer store",t.id),this.safeDispatchEvent("relay:discover",{detail:t.id});this.log("found %d relay peers in peer store",e.length);let t=this.queue=new F.w({concurrency:5});for await(let e of(this.log("start random walk"),this.components.randomWalk.walk({signal:this.discoveryController.signal}))){if(this.log.trace("found random peer %p",e.id),t.has(e.id)){this.log.trace("random peer %p was already in queue",e.id);continue}if(this.components.connectionManager.getConnections(e.id)?.length>0){this.log.trace("random peer %p was already connected",e.id);continue}if(!await this.components.connectionManager.isDialable(e.multiaddrs)){this.log.trace("random peer %p was not dialable",e.id,e.multiaddrs.map(e=>e.toString()));continue}t.queued>10&&(this.log.trace("wait for space in queue for %p",e.id),await t.onSizeLessThan(10,{signal:this.discoveryController.signal})),this.log("adding random peer %p to dial queue (length: %d, active %d)",e.id,t.size,t.running),t.add(this.dialPeer,{peerId:e.id,signal:this.discoveryController.signal}).catch(t=>{this.log.error("error opening connection to random peer %p",e.id,t)})}this.log("stop random walk"),await t.onIdle()}).catch(e=>{this.discoveryController.signal.aborted||this.log.error("failed when finding relays on the network",e)}))}stopDiscovery(){this.log("stop discovery"),this.running=!1,this.discoveryController?.abort(),this.queue?.clear(),this.components.events.removeEventListener("peer:discovery",this.onPeer)}onPeer(e){this.log.trace("maybe dialing discovered peer %p - %e",e.detail.id),this.maybeDialPeer(e).catch(t=>{this.log.trace("error dialing discovered peer %p - %e",e.detail.id,t)})}async maybeDialPeer(e){if(null==this.queue)return;let t=e.detail.id,r=e.detail.multiaddrs;if(this.queue.has(t)){this.log.trace("random peer %p was already in queue",t);return}if(this.components.connectionManager.getConnections(t)?.length>0){this.log.trace("random peer %p was already connected",t);return}if(!await this.components.connectionManager.isDialable(r)){this.log.trace("random peer %p was not dialable",t);return}this.queue?.add(this.dialPeer,{peerId:e.detail.id,signal:this.discoveryController.signal}).catch(t=>{this.log.error("error opening connection to discovered peer %p",e.detail.id,t)})}async dialPeer({peerId:e,signal:t}){let r=(0,j.J)([AbortSignal.timeout(5e3),t]);(0,P.k)(1/0,r);try{await this.components.connectionManager.openConnection(e,{signal:r})}finally{r.clear()}}}function $(e){let t=e.metadata.get("last-dial-success");return null==t?0:new Date((0,H.d)(t)).getTime()}class V extends z.X{connectionManager;addressManager;reservationStore;listeningAddrs;log;listenTimeout;reservationId;relay;constructor(e,t={}){super(),this.log=e.logger.forComponent("libp2p:circuit-relay:transport:listener"),this.connectionManager=e.connectionManager,this.addressManager=e.addressManager,this.reservationStore=e.reservationStore,this.listeningAddrs=[],this.listenTimeout=t.listenTimeout??2e3,this.reservationStore.addEventListener("relay:removed",this._onRemoveRelayPeer),this.reservationStore.addEventListener("relay:created-reservation",this._onAddRelayPeer)}_onRemoveRelayPeer=e=>{this.log("relay removed %p our relay %p",e.detail.relay,this.relay,this.relay?.equals(e.detail.relay)),this.relay?.equals(e.detail.relay)===!0&&(this.log("relay peer removed %p",e.detail.relay),this.listeningAddrs.forEach(e=>{this.addressManager.removeObservedAddr(e)}),this.listeningAddrs=[],this.safeDispatchEvent("listening"))};_onAddRelayPeer=e=>{let{details:t}=e.detail;"configured"!==t.type&&t.id===this.reservationId&&this.addedRelay(e.detail)};async listen(e){if(U.exactMatch(e))this.log("searching for circuit relay servers"),this.reservationId=this.reservationStore.reserveRelay();else if(L.exactMatch(e)){this.log("listen on specific relay server %a",e);let t=AbortSignal.timeout(this.listenTimeout);(0,P.k)(1/0,t);let r=e.decapsulate("/p2p-circuit"),n=await this.connectionManager.openConnection(r,{signal:t});if(!this.reservationStore.hasReservation(n.remotePeer)){this.log("making reservation on peer %p",n.remotePeer);let e=await this.reservationStore.addRelay(n.remotePeer,"configured");this.addedRelay(e)}}else throw new g.U7(`Could not listen on p2p-circuit address "${e}"`)}getAddrs(){return[...this.listeningAddrs.values()].flat()}updateAnnounceAddrs(){}async close(){this.reservationStore.cancelReservations(),this.listeningAddrs=[],this.reservationStore.removeEventListener("relay:removed",this._onRemoveRelayPeer),queueMicrotask(()=>{this.safeDispatchEvent("close")})}addedRelay(e){this.log("relay peer added %p",e.relay),this.relay=e.relay,this.listeningAddrs=e.details.reservation.addrs.map(e=>(0,A.HZ)(e).encapsulate("/p2p-circuit")),this.listeningAddrs.forEach(e=>{this.addressManager.confirmObservedAddr(e,{type:"transport"})}),queueMicrotask(()=>{this.safeDispatchEvent("listening")})}}var q=r(603);let K=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");class W extends Error{static name="HadEnoughRelaysError";name="HadEnoughRelaysError"}class Q extends Error{static name="DoubleRelayError";name="DoubleRelayError"}class Z extends Error{static name="RelayQueueFullError";name="RelayQueueFullError"}class J extends z.X{peerId;connectionManager;peerStore;events;reserveQueue;reservations;pendingReservations;maxReservationQueueLength;reservationCompletionTimeout;started;log;relayFilter;constructor(e,t){super(),this.log=e.logger.forComponent("libp2p:circuit-relay:transport:reservation-store"),this.peerId=e.peerId,this.connectionManager=e.connectionManager,this.peerStore=e.peerStore,this.events=e.events,this.reservations=new q.j,this.pendingReservations=[],this.maxReservationQueueLength=t?.maxReservationQueueLength??100,this.reservationCompletionTimeout=t?.reservationCompletionTimeout??2e3,this.started=!1,this.relayFilter=(0,m.O)(100),this.reserveQueue=new F.w({concurrency:t?.reservationConcurrency??1,metricName:"libp2p_relay_reservation_queue",metrics:e.metrics}),this.events.addEventListener("connection:close",e=>{null!=[...this.reservations.values()].find(t=>t.connection===e.detail.id)&&this.#R(e.detail.remotePeer).catch(t=>{this.log("could not remove relay %p - %e",e.detail,t)})})}isStarted(){return this.started}start(){this.started=!0}afterStart(){Promise.resolve().then(async()=>{let e=await this.peerStore.all({filters:[e=>e.tags.has(_)]});this.log("removing tag from %d old relays",e.length),await Promise.all(e.map(async e=>{await this.peerStore.merge(e.id,{tags:{[_]:void 0}})})),this.log("redialing %d old relays",e.length),await Promise.all(e.map(async e=>this.addRelay(e.id,"discovered"))),this.#N()}).catch(e=>{this.log.error(e)})}stop(){this.reserveQueue.clear(),this.reservations.forEach(({timeout:e})=>{clearTimeout(e)}),this.reservations.clear(),this.started=!1}reserveRelay(){let e=K();return this.pendingReservations.push(e),this.#N(),e}async addRelay(e,t){if(this.peerId.equals(e))throw this.log.trace("not trying to use self as relay"),new g.U7("Cannot use self as relay");if(this.reserveQueue.size>this.maxReservationQueueLength)throw new Z("The reservation queue is full");let r=this.reserveQueue.find(e);if(null!=r)return this.log.trace("potential relay peer %p is already in the reservation queue",e),r.join();if(this.relayFilter.has(e.toMultihash().bytes))throw new g.U7("The relay was previously invalid");return this.log.trace("try to reserve relay slot with %p",e),this.reserveQueue.add(async()=>{let r=Date.now();try{let r;let n=this.reservations.get(e);if(null!=n){let t=this.connectionManager.getConnections(e),r=!1;if(0===t.length&&this.log("already have relay reservation with %p but we are no longer connected",e),t.map(e=>e.id).includes(n.connection)&&(this.log("already have relay reservation with %p and the original connection is still open",e),r=!0),r&&B(n.reservation.expire)>6e5)return this.log("already have relay reservation with %p but we are still connected and it does not expire soon",e),{relay:e,details:n};await this.#R(e)}if("discovered"===t&&0===this.pendingReservations.length)throw new W("Not making reservation on discovered relay because we do not need any more relays");let i=AbortSignal.timeout(this.reservationCompletionTimeout);(0,P.k)(1/0,i);let s=await this.connectionManager.openConnection(e,{signal:i});if(E.uu.matches(s.remoteAddr))throw new Q("not creating reservation over relayed connection");let a=await this.#M(s,{signal:i}),o=B(a.expire);this.log("created reservation on relay peer %p, expiry date is %s",e,new Date(Date.now()+o).toString());let l=Math.min(Math.max(o-3e5,3e4),0x7fffffff),c=setTimeout(()=>{this.log("refresh reservation to relay %p",e),this.addRelay(e,t).catch(async t=>{this.log.error("could not refresh reservation to relay %p - %e",e,t),await this.#R(e)}).catch(t=>{this.log.error("could not remove expired reservation to relay %p - %e",e,t)})},l);if("discovered"===t){let e=this.pendingReservations.pop();if(null==e)throw new W("Made reservation on relay but did not need any more discovered relays");r={timeout:c,reservation:a,type:t,connection:s.id,id:e}}else r={timeout:c,reservation:a,type:t,connection:s.id};this.reservations.set(e,r),await this.peerStore.merge(e,{tags:{[_]:{value:1,ttl:o}}}),this.#N();let u={relay:e,details:r};return this.safeDispatchEvent("relay:created-reservation",{detail:u}),u}catch(n){throw("discovered"!==t||"HadEnoughRelaysError"!==n.name)&&this.log.error("could not reserve slot on %p after %dms - %e",e,Date.now()-r,n),("DialError"===n.name||"UnsupportedProtocolError"===n.name)&&this.relayFilter.add(e.toMultihash().bytes),this.#R(e).catch(t=>{this.log.error("could not remove reservation on %p after reserving slot failed - %e",e,t)}),n}},{peerId:e})}hasReservation(e){return this.reservations.has(e)}getReservation(e){return this.reservations.get(e)?.reservation}reservationCount(e){return null==e?this.reservations.size:[...this.reservations.values()].reduce((t,r)=>(r.type===e&&t++,t),0)}cancelReservations(){[...this.reservations.values()].forEach(e=>{clearTimeout(e.timeout)}),this.reservations.clear()}async #M(e,t){let r;t.signal?.throwIfAborted(),this.log("requesting reservation from %p",e.remotePeer);let i=await e.newStream(C,t),s=(0,k.z)(i).pb(n);this.log.trace("send RESERVE to %p",e.remotePeer),await s.write({type:n.Type.RESERVE},t);try{this.log.trace("reading response from %p",e.remotePeer),r=await s.read(t)}catch(e){throw i.abort(e),e}finally{"closed"!==i.status&&await i.close(t)}if(this.log.trace("read response %o",r),r.status===l.OK&&null!=r.reservation){let t=new Set;for(let n of(t.add(e.remoteAddr.toString()),r.reservation.addrs)){let r=(0,A.HZ)(n);null==r.getPeerId()&&(r=r.encapsulate(`/p2p/${e.remotePeer}`)),r=(0,A.HZ)(r.toString().replace(`/p2p/${e.remotePeer}/p2p/${e.remotePeer}`,`/p2p/${e.remotePeer}`)),t.add(r.toString())}return r.reservation.addrs=[...t].map(e=>(0,A.HZ)(e).bytes),r.reservation}let a=`reservation failed with status ${r.status??"undefined"}`;throw this.log.error(a),Error(a)}async #R(e){let t=this.reservations.get(e);null!=t&&(this.log("removing relay reservation with %p from local store",e),clearTimeout(t.timeout),this.reservations.delete(e),"discovered"===t.type&&this.pendingReservations.push(t.id),await this.peerStore.merge(e,{tags:{[_]:void 0}}),this.safeDispatchEvent("relay:removed",{detail:{relay:e,details:t}}),this.#N())}#N(){if(0===this.pendingReservations.length){this.log.trace("have discovered enough relays"),this.reserveQueue.clear(),this.safeDispatchEvent("relay:found-enough-relays");return}this.relayFilter=(0,m.O)(100),this.log("not discovered enough relays %d/%d",this.reservations.size,this.pendingReservations.length),this.safeDispatchEvent("relay:not-enough-relays")}}let Y=e=>{if(null==e.peer)return!1;try{e.peer.addrs.forEach(A.HZ)}catch{return!1}return!0},X={maxInboundStopStreams:300,maxOutboundStopStreams:300};class ee{discovery;registrar;peerStore;connectionManager;transportManager;peerId;upgrader;addressManager;connectionGater;reservationStore;logger;maxInboundStopStreams;maxOutboundStopStreams;started;log;shutdownController;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:circuit-relay:transport"),this.registrar=e.registrar,this.peerStore=e.peerStore,this.connectionManager=e.connectionManager,this.transportManager=e.transportManager,this.logger=e.logger,this.peerId=e.peerId,this.upgrader=e.upgrader,this.addressManager=e.addressManager,this.connectionGater=e.connectionGater,this.maxInboundStopStreams=t.maxInboundStopStreams??X.maxInboundStopStreams,this.maxOutboundStopStreams=t.maxOutboundStopStreams??X.maxOutboundStopStreams,this.shutdownController=new AbortController,this.discovery=new G(e,{filter:t.discoveryFilter??function(e,t=.001){return new b(4096,t)}(0,.001)}),this.discovery.addEventListener("relay:discover",e=>{this.reservationStore.addRelay(e.detail,"discovered").catch(t=>{"HadEnoughRelaysError"!==t.name&&"RelayQueueFullError"!==t.name&&this.log.error("could not add discovered relay %p",e.detail,t)})}),this.reservationStore=new J(e,t),this.reservationStore.addEventListener("relay:not-enough-relays",()=>{this.discovery?.startDiscovery()}),this.reservationStore.addEventListener("relay:found-enough-relays",()=>{this.discovery?.stopDiscovery()}),this.started=!1}[Symbol.toStringTag]="@libp2p/circuit-relay-v2-transport";[h.Ch]=["@libp2p/transport","@libp2p/circuit-relay-v2-transport"];get[h.VM](){return null!=this.discovery?["@libp2p/identify"]:[]}[f._J]=!0;isStarted(){return this.started}async start(){this.shutdownController=new AbortController,(0,P.k)(1/0,this.shutdownController.signal),await this.registrar.handle(O,e=>{let t=this.upgrader.createInboundAbortSignal(this.shutdownController.signal);this.onStop(e,t).catch(t=>{this.log.error("error while handling STOP protocol",t),e.stream.abort(t)}).finally(()=>{t.clear()})},{maxInboundStreams:this.maxInboundStopStreams,maxOutboundStreams:this.maxOutboundStopStreams,runOnLimitedConnection:!0}),await (0,p.ni)(this.discovery,this.reservationStore),this.started=!0}async stop(){this.shutdownController.abort(),await (0,p.ds)(this.discovery,this.reservationStore),await this.registrar.unhandle(O),this.started=!1}async dial(e,t){let r;if(1!==e.protoCodes().filter(e=>290===e).length){let t="Invalid circuit relay address";throw this.log.error(t,e),new g.zm(t)}let i=e.toString().split("/p2p-circuit"),s=(0,A.HZ)(i[0]),a=(0,A.HZ)(i[i.length-1]),o=s.getPeerId(),c=a.getPeerId();if(null==o||null==c){let t=`ircuit relay dial to ${e.toString()} failed as address did not have both relay and destination PeerIDs`;throw this.log.error(`c${t}`),new g.zm(`C${t}`)}let u=(0,y.XL)(o),d=(0,y.XL)(c),h=this.connectionManager.getConnections(u)[0];null==h?(await this.peerStore.merge(u,{multiaddrs:[s]}),t.onProgress?.(new I.j("circuit-relay:open-connection")),h=await this.connectionManager.openConnection(u,t)):t.onProgress?.(new I.j("circuit-relay:reuse-connection"));try{t.onProgress?.(new I.j("circuit-relay:open-hop-stream")),r=await h.newStream(C,t);let i=(0,k.z)(r),o=i.pb(n);t.onProgress?.(new I.j("circuit-relay:write-connect-message")),await o.write({type:n.Type.CONNECT,peer:{id:d.toMultihash().bytes,addrs:[(0,A.HZ)(a).bytes]}},t),t.onProgress?.(new I.j("circuit-relay:read-connect-response"));let c=await o.read(t);if(c.status!==l.OK)throw new g.L(`failed to connect via relay with status ${c?.status?.toString()??"undefined"}`);let u=new D(c.limit),f=v({stream:i.unwrap(),remoteAddr:e,localAddr:s.encapsulate(`/p2p-circuit/p2p/${this.peerId.toString()}`),logger:this.logger,onDataRead:u.onData,onDataWrite:u.onData});return this.log("new outbound relayed connection %a",f.remoteAddr),await this.upgrader.upgradeOutbound(f,{...t,limits:u.getLimits()})}catch(e){throw this.log.error("circuit relay dial to destination %p via relay %p failed",d,u,e),r?.abort(e),e}}createListener(e){return new V({peerId:this.peerId,connectionManager:this.connectionManager,addressManager:this.addressManager,reservationStore:this.reservationStore,logger:this.logger})}listenFilter(e){return(e=Array.isArray(e)?e:[e]).filter(e=>L.exactMatch(e)||U.exactMatch(e))}dialFilter(e){return(e=Array.isArray(e)?e:[e]).filter(e=>E.uu.exactMatch(e))}async onStop({connection:e,stream:t},r){if(!this.reservationStore.hasReservation(e.remotePeer))try{this.log("dialed via relay we did not have a reservation on, start listening on that relay address"),await this.transportManager.listen([e.remoteAddr.encapsulate("/p2p-circuit")])}catch(e){this.log.error("failed to listen on a relay peer we were dialed via but did not have a reservation on",e)}let n=(0,k.z)(t).pb(i),s=await n.read({signal:r});if(this.log("new circuit relay v2 stop stream from %p with type %s",e.remotePeer,s.type),s?.type===void 0){this.log.error("type was missing from circuit v2 stop protocol request from %s",e.remotePeer),await n.write({type:i.Type.STATUS,status:l.MALFORMED_MESSAGE},{signal:r}),await t.close();return}if(s.type!==i.Type.CONNECT){this.log.error("invalid stop connect request via peer %p",e.remotePeer),await n.write({type:i.Type.STATUS,status:l.UNEXPECTED_MESSAGE},{signal:r}),await t.close();return}if(!Y(s)){this.log.error("invalid stop connect request via peer %p",e.remotePeer),await n.write({type:i.Type.STATUS,status:l.MALFORMED_MESSAGE},{signal:r}),await t.close({signal:r});return}let a=(0,y.jD)(S.D4(s.peer.id));if(await this.connectionGater.denyInboundRelayedConnection?.(e.remotePeer,a)===!0){this.log.error("connection gater denied inbound relayed connection from %p",e.remotePeer),await n.write({type:i.Type.STATUS,status:l.PERMISSION_DENIED},{signal:r}),await t.close({signal:r});return}this.log.trace("sending success response to %p",e.remotePeer),await n.write({type:i.Type.STATUS,status:l.OK},{signal:r});let o=new D(s.limit),c=e.remoteAddr.encapsulate(`/p2p-circuit/p2p/${a.toString()}`),u=this.addressManager.getAddresses()[0],d=v({stream:n.unwrap().unwrap(),remoteAddr:c,localAddr:u,logger:this.logger,onDataRead:o.onData,onDataWrite:o.onData});this.log("new inbound relayed connection %a",d.remoteAddr),await this.upgrader.upgradeInbound(d,{limits:o.getLimits(),signal:r}),this.log("%s connection %a upgraded","inbound",d.remoteAddr)}}function et(e={}){return t=>new ee(t,e)}},2241:(e,t,r)=>{"use strict";r.d(t,{AU:()=>b,Q7:()=>p,Ue:()=>m,Yx:()=>o,mP:()=>y});var n=r(1456),i=r(9982),s=r(8121),a=r(8616);let o=32,l=new Uint8Array(32),c=["then"],u={},d=new WeakMap;function h(e){return d.get(e)}function f(e,t){let r=Error(`deferred error during ABI decoding triggered accessing ${e}`);throw r.error=t,r}class p extends Array{#a;constructor(...e){var t,r;let i=e[0],s=e[1],a=(e[2]||[]).slice(),o=!0;i!==u&&(s=e,a=[],o=!1),super(s.length),s.forEach((e,t)=>{this[t]=e});let l=a.reduce((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e),new Map);if(t=Object.freeze(s.map((e,t)=>{let r=a[t];return null!=r&&1===l.get(r)?r:null})),d.set(this,t),this.#a=[],null==this.#a&&this.#a,!o)return;Object.freeze(this);let p=new Proxy(this,{get:(e,t,r)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){let r=(0,n.WZ)(t,"%index");if(r<0||r>=this.length)throw RangeError("out of result range");let i=e[r];return i instanceof Error&&f(`index ${r}`,i),i}if(c.indexOf(t)>=0)return Reflect.get(e,t,r);let i=e[t];if(i instanceof Function)return function(...t){return i.apply(this===r?e:this,t)};if(!(t in e))return e.getValue.apply(this===r?e:this,[t])}return Reflect.get(e,t,r)}});return r=h(this),d.set(p,r),p}toArray(e){let t=[];return this.forEach((r,n)=>{r instanceof Error&&f(`index ${n}`,r),e&&r instanceof p&&(r=r.toArray(e)),t.push(r)}),t}toObject(e){let t=h(this);return t.reduce((r,n,s)=>((0,i.vA)(null!=n,`value at index ${s} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),function e(t,r,n){return t.indexOf(null)>=0?r.map((t,r)=>t instanceof p?e(h(t),t,n):t):t.reduce((t,i,s)=>{let a=r.getValue(i);return i in t||(n&&a instanceof p&&(a=e(h(a),a,n)),t[i]=a),t},{})}(t,this,e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);let r=h(this),n=[],i=[];for(let s=e;s<t;s++)n.push(this[s]),i.push(r[s]);return new p(u,n,i)}filter(e,t){let r=h(this),n=[],i=[];for(let s=0;s<this.length;s++){let a=this[s];a instanceof Error&&f(`index ${s}`,a),e.call(t,a,s,this)&&(n.push(a),i.push(r[s]))}return new p(u,n,i)}map(e,t){let r=[];for(let n=0;n<this.length;n++){let i=this[n];i instanceof Error&&f(`index ${n}`,i),r.push(e.call(t,i,n,this))}return r}getValue(e){let t=h(this).indexOf(e);if(-1===t)return;let r=this[t];return r instanceof Error&&f(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,t){return new p(u,e,t)}}function g(e){let t=(0,n.c4)(e);return(0,i.vA)(t.length<=o,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:o,offset:t.length}),t.length!==o&&(t=(0,s.Lm)((0,s.xW)([l.slice(t.length%o),t]))),t}class m{name;type;localName;dynamic;constructor(e,t,r,n){(0,a.n)(this,{name:e,type:t,localName:r,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){(0,i.MR)(!1,e,this.localName,t)}}class b{#o;#l;constructor(){this.#o=[],this.#l=0}get data(){return(0,s.xW)(this.#o)}get length(){return this.#l}#c(e){return this.#o.push(e),this.#l+=e.length,e.length}appendWriter(e){return this.#c((0,s.Lm)(e.data))}writeBytes(e){let t=(0,s.Lm)(e),r=t.length%o;return r&&(t=(0,s.Lm)((0,s.xW)([t,l.slice(r)]))),this.#c(t)}writeValue(e){return this.#c(g(e))}writeUpdatableValue(){let e=this.#o.length;return this.#o.push(l),this.#l+=o,t=>{this.#o[e]=g(t)}}}class y{allowLoose;#o;#u;#d;#h;#f;constructor(e,t,r){(0,a.n)(this,{allowLoose:!!t}),this.#o=(0,s.Lm)(e),this.#d=0,this.#h=null,this.#f=null!=r?r:1024,this.#u=0}get data(){return(0,s.c$)(this.#o)}get dataLength(){return this.#o.length}get consumed(){return this.#u}get bytes(){return new Uint8Array(this.#o)}#p(e){if(this.#h)return this.#h.#p(e);this.#d+=e,(0,i.vA)(this.#f<1||this.#d<=this.#f*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#f} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:(0,s.Lm)(this.#o),offset:this.#u,length:e,info:{bytesRead:this.#d,dataLength:this.dataLength}})}#g(e,t,r){let n=Math.ceil(t/o)*o;return this.#u+n>this.#o.length&&(this.allowLoose&&r&&this.#u+t<=this.#o.length?n=t:(0,i.vA)(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:(0,s.Lm)(this.#o),length:this.#o.length,offset:this.#u+n})),this.#o.slice(this.#u,this.#u+n)}subReader(e){let t=new y(this.#o.slice(this.#u+e),this.allowLoose,this.#f);return t.#h=this,t}readBytes(e,t){let r=this.#g(0,e,!!t);return this.#p(e),this.#u+=r.length,r.slice(0,e)}readValue(){return(0,n.Dg)(this.readBytes(o))}readIndex(){return(0,n.Ro)(this.readBytes(o))}}},2257:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeRlp=void 0;let n=r(4306);function i(e){let t=[];for(;e;)t.unshift(255&e),e>>=8;return t}let s="0123456789abcdef";t.encodeRlp=function(e){let t="0x";for(let r of function e(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(t){r=r.concat(e(t))}),r.length<=55)return r.unshift(192+r.length),r;let n=i(r.length);return n.unshift(247+n.length),n.concat(r)}let r=Array.prototype.slice.call((0,n.getBytes)(t,"object"));if(1===r.length&&r[0]<=127)return r;if(r.length<=55)return r.unshift(128+r.length),r;let s=i(r.length);return s.unshift(183+s.length),s.concat(r)}(e))t+=s[r>>4],t+=s[15&r];return t}},2277:(e,t,r)=>{"use strict";function n(e,t,r,i){var s=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(s,n.prototype),s.expected=t,s.found=r,s.location=i,s.name="SyntaxError",s}function i(e,t,r){return(r=r||" ",e.length>t)?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}function s(e,t){return(e<<t|e>>64n-t)&0xffffffffffffffffn}function a(e,t){return e*t&0xffffffffffffffffn}r.d(t,{d$:()=>M}),!function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(n,Error),n.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var r,n=null;for(r=0;r<e.length;r++)if(e[r].source===this.location.source){n=e[r].text.split(/\r\n|\n|\r/g);break}var s=this.location.start,a=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(s):s,o=this.location.source+":"+a.line+":"+a.column;if(n){var l=this.location.end,c=i("",a.line.toString().length," "),u=n[s.line-1],d=(s.line===l.line?l.column:u.length+1)-s.column||1;t+="\n --\x3e "+o+"\n"+c+" |\n"+a.line+" | "+u+"\n"+c+" | "+i("",s.column-1," ")+i("",d,"^")}else t+="\n at "+o}return t},n.buildMessage=function(e,t){var r={literal:function(e){return'"'+i(e.text)+'"'},class:function(e){var t=e.parts.map(function(e){return Array.isArray(e)?s(e[0])+"-"+s(e[1]):s(e)});return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function s(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(e){return"\\x0"+n(e)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(e){return"\\x"+n(e)})}function a(e){return r[e.type](e)}return"Expected "+function(e){var t,r,n=e.map(a);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+(t?'"'+i(t)+'"':"end of input")+" found."};let o=function(e){return function(){let t=BigInt(0xffffffffffffffffn&e),r=BigInt(e>>64n&0xffffffffffffffffn),n=a(s(a(t,5n),7n),9n);return r^=t,t=(s(t,24n)^r^r<<16n)&0xffffffffffffffffn,e=(r=s(r,37n))<<64n|t,n}}(0xa187eb39cdcaed8f31c4b365b102e01en),l=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>o()))),c=Array.from({length:8},()=>o()),u=Array.from({length:16},()=>o()),d=o(),h="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class f{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){let{color:r,piece:n,from:i,to:s,flags:a,captured:o,promotion:l}=t,c=_(i),u=_(s);for(let i in this.color=r,this.piece=n,this.from=c,this.to=u,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=c+u,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="",g)g[i]&a&&(this.flags+=p[i]);o&&(this.captured=o),l&&(this.promotion=l,this.lan+=l)}isCapture(){return this.flags.indexOf(p.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(p.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(p.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(p.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(p.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(p.BIG_PAWN)>-1}}let p={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},g={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},m={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},b={...m,WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},y={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},x={b:[16,32,17,15],w:[-16,-32,-17,-15]},w={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},v=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],A=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],E={p:1,n:2,b:4,r:8,q:16,k:32},k=["n","b","r","q"],P={k:g.KSIDE_CASTLE,q:g.QSIDE_CASTLE},S={w:[{square:y.a1,flag:g.QSIDE_CASTLE},{square:y.h1,flag:g.KSIDE_CASTLE}],b:[{square:y.a8,flag:g.QSIDE_CASTLE},{square:y.h8,flag:g.KSIDE_CASTLE}]},I={b:1,w:6};function T(e){return -1!=="0123456789".indexOf(e)}function _(e){let t=15&e,r=e>>4;return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function C(e){return"w"===e?"b":"w"}function O(e,t,r,n,i,s,a=g.NORMAL){let o=n>>4;if("p"===i&&(7===o||0===o))for(let o=0;o<k.length;o++){let l=k[o];e.push({color:t,from:r,to:n,piece:i,captured:s,promotion:l,flags:a|g.PROMOTION})}else e.push({color:t,from:r,to:n,piece:i,captured:s,flags:a})}function R(e){let t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return"p"}return"o"===(t=t.toLowerCase())?"k":t}function N(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class M{_board=Array(128);_turn="w";_header={};_kings={w:-1,b:-1};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=h,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=Array(128),this._kings={w:-1,b:-1},this._turn="w",this._castling={w:0,b:0},this._epSquare=-1,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...b},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:r=!1}={}){let n=e.split(/\s+/);if(n.length>=2&&n.length<6&&(e=n.concat(["-","-","0","1"].slice(-(6-n.length))).join(" ")),n=e.split(/\s+/),!t){let{ok:t,error:r}=function(e){let t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};let r=parseInt(t[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};let n=parseInt(t[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};let i=t[0].split("/");if(8!==i.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let e=0;e<i.length;e++){let t=0,r=!1;for(let n=0;n<i[e].length;n++)if(T(i[e][n])){if(r)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(i[e][n],10),r=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[e][n]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,r=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};for(let{color:e,regex:r}of[{color:"white",regex:/K/g},{color:"black",regex:/k/g}]){if(!r.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(r)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return Array.from(i[0]+i[7]).some(e=>"P"===e.toUpperCase())?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}(e);if(!t)throw Error(r)}let i=n[0],s=0;this.clear({preserveHeaders:r});for(let e=0;e<i.length;e++){let t=i.charAt(e);if("/"===t)s+=8;else if(T(t))s+=parseInt(t,10);else{let e=t<"a"?"w":"b";this._put({type:t.toLowerCase(),color:e},_(s)),s++}}this._turn=n[1],n[2].indexOf("K")>-1&&(this._castling.w|=g.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(this._castling.w|=g.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(this._castling.b|=g.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(this._castling.b|=g.QSIDE_CASTLE),this._epSquare="-"===n[3]?-1:y[n[3]],this._halfMoves=parseInt(n[4],10),this._moveNumber=parseInt(n[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,r="";for(let e=y.a8;e<=y.h1;e++){if(this._board[e]){t>0&&(r+=t,t=0);let{color:n,type:i}=this._board[e];r+="w"===n?i.toUpperCase():i.toLowerCase()}else t++;e+1&136&&(t>0&&(r+=t),e!==y.h1&&(r+="/"),t=0,e+=8)}let n="";this._castling.w&g.KSIDE_CASTLE&&(n+="K"),this._castling.w&g.QSIDE_CASTLE&&(n+="Q"),this._castling.b&g.KSIDE_CASTLE&&(n+="k"),this._castling.b&g.QSIDE_CASTLE&&(n+="q"),n=n||"-";let i="-";if(-1!==this._epSquare){if(e)i=_(this._epSquare);else{let e=this._epSquare+("w"===this._turn?16:-16);for(let t of[e+1,e-1]){if(136&t)continue;let e=this._turn;if(this._board[t]?.color===e&&this._board[t]?.type==="p"){this._makeMove({color:e,from:t,to:this._epSquare,piece:"p",captured:"p",flags:g.EP_CAPTURE});let r=!this._isKingAttacked(e);if(this._undoMove(),r){i=_(this._epSquare);break}}}}}return[r,this._turn,n,i,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;let{color:t,type:r}=this._board[e];return l[({w:0,b:1})[t]][({p:0,n:1,b:2,r:3,q:4,k:5})[r]][e]}_epKey(){return -1===this._epSquare?0n:c[7&this._epSquare]}_castlingKey(){return u[this._castling.w>>5|this._castling.b>>3]}_computeHash(){let e=0n;for(let t=y.a8;t<=y.h1;t++){if(136&t){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),"b"===this._turn&&(e^=d),e}_updateSetup(e){this._history.length>0||(e!==h?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(h)}get(e){return this._board[y[e]]}findPiece(e){let t=[];for(let r=y.a8;r<=y.h1;r++){if(136&r){r+=7;continue}this._board[r]&&this._board[r]?.color===e.color&&this._board[r].color===e.color&&this._board[r].type===e.type&&t.push(_(r))}return t}put({type:e,color:t},r){return!!this._put({type:e,color:t},r)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},r){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase())||!(r in y))return!1;let n=y[r];if("k"==e&&-1!=this._kings[t]&&this._kings[t]!=n)return!1;let i=this._board[n];return i&&"k"===i.type&&(this._kings[i.color]=-1),this._set(n,{type:e,color:t}),"k"===e&&(this._kings[t]=n),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){let t=this.get(e);return this._clear(y[e]),t&&"k"===t.type&&(this._kings[t.color]=-1),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();let e=this._board[y.e1]?.type==="k"&&this._board[y.e1]?.color==="w",t=this._board[y.e8]?.type==="k"&&this._board[y.e8]?.color==="b";e&&this._board[y.a1]?.type==="r"&&this._board[y.a1]?.color==="w"||(this._castling.w&=-65),e&&this._board[y.h1]?.type==="r"&&this._board[y.h1]?.color==="w"||(this._castling.w&=-33),t&&this._board[y.a8]?.type==="r"&&this._board[y.a8]?.color==="b"||(this._castling.b&=-65),t&&this._board[y.h8]?.type==="r"&&this._board[y.h8]?.color==="b"||(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(-1===this._epSquare)return;let e=this._epSquare+("w"===this._turn?-16:16),t=this._epSquare+("w"===this._turn?16:-16);if(null!==this._board[e]||null!==this._board[this._epSquare]||this._board[t]?.color!==C(this._turn)||this._board[t]?.type!=="p"){this._hash^=this._epKey(),this._epSquare=-1;return}[t+1,t-1].some(e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type==="p")||(this._hash^=this._epKey(),this._epSquare=-1)}_attacked(e,t,r){let n=[];for(let i=y.a8;i<=y.h1;i++){if(136&i){i+=7;continue}if(void 0===this._board[i]||this._board[i].color!==e)continue;let s=this._board[i],a=i-t;if(0===a)continue;let o=a+119;if(v[o]&E[s.type]){if("p"===s.type){if(a>0&&"w"===s.color||a<=0&&"b"===s.color){if(!r)return!0;n.push(_(i))}continue}if("n"===s.type||"k"===s.type){if(!r)return!0;n.push(_(i));continue}let e=A[o],l=i+e,c=!1;for(;l!==t;){if(null!=this._board[l]){c=!0;break}l+=e}if(!c){if(!r)return!0;n.push(_(i));continue}}}return!!r&&n}attackers(e,t){return t?this._attacked(t,y[e],!0):this._attacked(this._turn,y[e],!0)}_isKingAttacked(e){let t=this._kings[e];return -1!==t&&this._attacked(C(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,y[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){let e={b:0,n:0,r:0,q:0,k:0,p:0},t=[],r=0,n=0;for(let i=y.a8;i<=y.h1;i++){if(n=(n+1)%2,136&i){i+=7;continue}let s=this._board[i];s&&(e[s.type]=s.type in e?e[s.type]+1:1,"b"===s.type&&t.push(n),r++)}if(2===r||3===r&&(1===e.b||1===e.n))return!0;if(r===e.b+2){let e=0,r=t.length;for(let n=0;n<r;n++)e+=t[n];if(0===e||e===r)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:r}={}){let n=this._moves({square:t,piece:r});return e?n.map(e=>new f(this,e)):n.map(e=>this._moveToSan(e,n))}_moves({legal:e=!0,piece:t,square:r}={}){let n=r?r.toLowerCase():void 0,i=t?.toLowerCase(),s=[],a=this._turn,o=C(a),l=y.a8,c=y.h1,u=!1;if(n){if(!(n in y))return[];l=c=y[n],u=!0}for(let e=l;e<=c;e++){let t;if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===o)continue;let{type:r}=this._board[e];if("p"===r){if(i&&i!==r)continue;t=e+x[a][0],!this._board[t]&&(O(s,a,e,t,"p"),t=e+x[a][1],I[a]===e>>4&&!this._board[t]&&O(s,a,e,t,"p",void 0,g.BIG_PAWN));for(let r=2;r<4;r++)136&(t=e+x[a][r])||(this._board[t]?.color===o?O(s,a,e,t,"p",this._board[t].type,g.CAPTURE):t===this._epSquare&&O(s,a,e,t,"p","p",g.EP_CAPTURE))}else{if(i&&i!==r)continue;for(let n=0,i=w[r].length;n<i;n++){let i=w[r][n];for(t=e;!(136&(t+=i));){if(this._board[t]){if(this._board[t].color===a)break;O(s,a,e,t,r,this._board[t].type,g.CAPTURE);break}if(O(s,a,e,t,r),"n"===r||"k"===r)break}}}}if((void 0===i||"k"===i)&&(!u||c===this._kings[a])){if(this._castling[a]&g.KSIDE_CASTLE){let e=this._kings[a],t=e+2;this._board[e+1]||this._board[t]||this._attacked(o,this._kings[a])||this._attacked(o,e+1)||this._attacked(o,t)||O(s,a,this._kings[a],t,"k",void 0,g.KSIDE_CASTLE)}if(this._castling[a]&g.QSIDE_CASTLE){let e=this._kings[a],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(o,this._kings[a])||this._attacked(o,e-1)||this._attacked(o,t)||O(s,a,this._kings[a],t,"k",void 0,g.QSIDE_CASTLE)}}if(!e||-1===this._kings[a])return s;let d=[];for(let e=0,t=s.length;e<t;e++)this._makeMove(s[e]),this._isKingAttacked(a)||d.push(s[e]),this._undoMove();return d}move(e,{strict:t=!1}={}){let r=null;if("string"==typeof e)r=this._moveFromSan(e,t);else if(null===e)r=this._moveFromSan("--",t);else if("object"==typeof e){let t=this._moves();for(let n=0,i=t.length;n<i;n++)if(e.from===_(t[n].from)&&e.to===_(t[n].to)&&(!("promotion"in t[n])||e.promotion===t[n].promotion)){r=t[n];break}}if(!r){if("string"==typeof e)throw Error(`Invalid move: ${e}`);throw Error(`Invalid move: ${JSON.stringify(e)}`)}if(this.isCheck()&&r.flags&g.NULL_MOVE)throw Error("Null move not allowed when in check");let n=new f(this,r);return this._makeMove(r),this._incPositionCount(),n}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){let t=this._turn,r=C(t);if(this._push(e),e.flags&g.NULL_MOVE){"b"===t&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=-1;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&g.EP_CAPTURE&&("b"===this._turn?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),"k"===this._board[e.to].type){if(this._kings[t]=e.to,e.flags&g.KSIDE_CASTLE){let t=e.to-1,r=e.to+1;this._movePiece(r,t)}else if(e.flags&g.QSIDE_CASTLE){let t=e.to+1,r=e.to-2;this._movePiece(r,t)}this._castling[t]=0}if(this._castling[t]){for(let r=0,n=S[t].length;r<n;r++)if(e.from===S[t][r].square&&this._castling[t]&S[t][r].flag){this._castling[t]^=S[t][r].flag;break}}if(this._castling[r]){for(let t=0,n=S[r].length;t<n;t++)if(e.to===S[r][t].square&&this._castling[r]&S[r][t].flag){this._castling[r]^=S[r][t].flag;break}}if(this._hash^=this._castlingKey(),e.flags&g.BIG_PAWN){let n;n="b"===t?e.to-16:e.to+16,(e.to-1&136||this._board[e.to-1]?.type!=="p"||this._board[e.to-1]?.color!==r)&&(e.to+1&136||this._board[e.to+1]?.type!=="p"||this._board[e.to+1]?.color!==r)?this._epSquare=-1:(this._epSquare=n,this._hash^=this._epKey())}else this._epSquare=-1;"p"===e.piece?this._halfMoves=0:e.flags&(g.CAPTURE|g.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,"b"===t&&this._moveNumber++,this._turn=r,this._hash^=d}undo(){let e=this._hash,t=this._undoMove();if(t){let r=new f(this,t);return this._decPositionCount(e),r}return null}_undoMove(){let e=this._history.pop();if(void 0===e)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();let t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=d;let r=this._turn,n=C(r);if(t.flags&g.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:r})),t.captured){if(t.flags&g.EP_CAPTURE){let e;e="b"===r?t.to-16:t.to+16,this._set(e,{type:"p",color:n})}else this._set(t.to,{type:t.captured,color:n})}if(t.flags&(g.KSIDE_CASTLE|g.QSIDE_CASTLE)){let e,r;t.flags&g.KSIDE_CASTLE?(e=t.to+1,r=t.to-1):(e=t.to-2,r=t.to+1),this._movePiece(r,e)}return t}pgn({newline:e="\n",maxWidth:t=0}={}){let r=[],n=!1;for(let t in this._header)this._header[t]&&r.push(`[${t} "${this._header[t]}"]`+e),n=!0;n&&this._history.length&&r.push(e);let i=e=>{let t=this._comments[this.fen()];if(void 0!==t){let r=e.length>0?" ":"";e=`${e}${r}{${t}}`}return e},s=[];for(;this._history.length>0;)s.push(this._undoMove());let a=[],o="";for(0===s.length&&a.push(i(""));s.length>0;){o=i(o);let e=s.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(o.length&&a.push(o),o=this._moveNumber+".");else{let e=`${this._moveNumber}. ...`;o=o?`${o} ${e}`:e}o=o+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(o.length&&a.push(i(o)),a.push(this._header.Result||"*"),0===t)return r.join("")+a.join(" ");let l=function(){return r.length>0&&" "===r[r.length-1]&&(r.pop(),!0)},c=0;for(let n=0;n<a.length;n++){if(c+a[n].length>t&&a[n].includes("{")){c=function(n,i){for(let s of i.split(" "))if(s){if(n+s.length>t){for(;l();)n--;r.push(e),n=0}r.push(s),n+=s.length,r.push(" "),n++}return l()&&n--,n}(c,a[n]);continue}c+a[n].length>t&&0!==n?(" "===r[r.length-1]&&r.pop(),r.push(e),c=0):0!==n&&(r.push(" "),c++),r.push(a[n]),c+=a[n].length}return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??m[e]??null,this.getHeaders()}removeHeader(e){return e in this._header&&(this._header[e]=m[e]||null,!0)}getHeaders(){let e={};for(let[t,r]of Object.entries(this._header))null!==r&&(e[t]=r);return e}loadPgn(e,{strict:t=!1,newlineChar:r="\r?\n"}={}){"\r?\n"!==r&&(e=e.replace(RegExp(r,"g"),"\n"));let i=function(e,t){var r,i,s,a,o,l,c,u,d,h={},f=(t=void 0!==t?t:{}).grammarSource,p={pgn:eS},g=eS,m="O-O-O",b="0-0-0",y="1/2-1/2",x=/^[a-zA-Z]/,w=/^[^"]/,v=/^[0-9]/,A=/^[.]/,E=/^[a-zA-Z1-8\-=]/,k=/^[+#]/,P=/^[!?]/,S=/^[^}]/,I=/^[^\r\n]/,T=/^[ \t\r\n]/,_=eE("tag pair"),C=ev("[",!1),O=ev('"',!1),R=ev("]",!1),N=eE("tag name"),M=eA([["a","z"],["A","Z"]],!1,!1),B=eE("tag value"),D=eA(['"'],!0,!1),L=eE("move number"),U=eA([["0","9"]],!1,!1),F=ev(".",!1),j=eA(["."],!1,!1),z=eE("standard algebraic notation"),H=ev("O-O-O",!1),G=ev("O-O",!1),$=ev("0-0-0",!1),V=ev("0-0",!1),q=eA([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),K=eA(["+","#"],!1,!1),W=eE("suffix annotation"),Q=eA(["!","?"],!1,!1),Z=eE("NAG"),J=ev("$",!1),Y=eE("brace comment"),X=ev("{",!1),ee=eA(["}"],!0,!1),et=ev("}",!1),er=eE("rest of line comment"),en=ev(";",!1),ei=eA(["\r","\n"],!0,!1),es=eE("variation"),ea=ev("(",!1),eo=ev(")",!1),el=eE("game termination marker"),ec=ev("1-0",!1),eu=ev("0-1",!1),ed=ev("1/2-1/2",!1),eh=ev("*",!1),ef=eE("whitespace"),ep=eA([" ","	","\r","\n"],!1,!1),eg=function(e,t){return function(...e){let[t,...r]=e,n=t;for(let e of r)null!==e&&(n.variations=[e,...e.variations],e.variations=[],n=e);return t}(null!==e?{comment:e,variations:[]}:{variations:[]},...t.flat())},em=0|t.peg$currPos,eb=[{line:1,column:1}],ey=em,ex=t.peg$maxFailExpected||[],ew=0|t.peg$silentFails;if(t.startRule){if(!(t.startRule in p))throw Error("Can't start parsing from rule \""+t.startRule+'".');g=p[t.startRule]}function ev(e,t){return{type:"literal",text:e,ignoreCase:t}}function eA(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function eE(e){return{type:"other",description:e}}function ek(t){var r,n=eb[t];if(n)return n;if(t>=eb.length)r=eb.length-1;else for(r=t;!eb[--r];);for(n={line:(n=eb[r]).line,column:n.column};r<t;)10===e.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return eb[t]=n,n}function eP(e){!(em<ey)&&(em>ey&&(ey=em,ex=[]),ex.push(e))}function eS(){var t,r;return r=function(){var e,t,r;for(t=[],r=eI();r!==h;)t.push(r),r=eI();return r=eN(),Object.fromEntries(t)}(),function(e,t){if(t.marker&&t.marker.comment){let e=t.root;for(;;){let r=e.variations[0];if(!r){e.comment=t.marker.comment;break}e=r}}return{headers:e,root:t.root,result:(t.marker&&t.marker.result)??void 0}}(r,function(){var t,r,n,i,s,a;return r=eT(),eN(),(ew++,i=em,"1-0"===e.substr(em,3)?(s="1-0",em+=3):(s=h,0===ew&&eP(ec)),s===h&&("0-1"===e.substr(em,3)?(s="0-1",em+=3):(s=h,0===ew&&eP(eu)),s===h&&(e.substr(em,7)===y?(s=y,em+=7):(s=h,0===ew&&eP(ed)),s===h&&(42===e.charCodeAt(em)?(s="*",em++):(s=h,0===ew&&eP(eh))))),s!==h)?(eN(),(a=eO())===h&&(a=null),i={result:s,comment:a}):(em=i,i=h),ew--,i===h&&(s=h,0===ew&&eP(el)),(n=i)===h&&(n=null),eN(),{root:r,marker:n}}())}function eI(){var t,r,n,i,s,a,o;return(ew++,t=em,eN(),91===e.charCodeAt(em)?(r="[",em++):(r=h,0===ew&&eP(C)),r!==h&&(eN(),(n=function(){var t,r,n;if(ew++,t=em,r=[],n=e.charAt(em),x.test(n)?em++:(n=h,0===ew&&eP(M)),n!==h)for(;n!==h;)r.push(n),n=e.charAt(em),x.test(n)?em++:(n=h,0===ew&&eP(M));else r=h;return t=r!==h?e.substring(t,em):r,ew--,t===h&&(r=h,0===ew&&eP(N)),t}())!==h&&(eN(),34===e.charCodeAt(em)?(i='"',em++):(i=h,0===ew&&eP(O)),i!==h&&(s=function(){var t,r,n;for(ew++,t=em,r=[],n=e.charAt(em),w.test(n)?em++:(n=h,0===ew&&eP(D));n!==h;)r.push(n),n=e.charAt(em),w.test(n)?em++:(n=h,0===ew&&eP(D));return t=e.substring(t,em),ew--,r=h,0===ew&&eP(B),t}(),34===e.charCodeAt(em)?(a='"',em++):(a=h,0===ew&&eP(O)),a!==h&&(eN(),93===e.charCodeAt(em)?(o="]",em++):(o=h,0===ew&&eP(R)),o!==h)))))?t=[n,s]:(em=t,t=h),ew--,t===h&&0===ew&&eP(_),t}function eT(){var e,t,r,n;for((t=eO())===h&&(t=null),r=[],n=e_();n!==h;)r.push(n),n=e_();return eg(t,r)}function e_(){var t,r,n,i,s,a,o,l;if(t=em,eN(),function(){var t,r,n,i,s,a;for(ew++,t=em,r=[],n=e.charAt(em),v.test(n)?em++:(n=h,0===ew&&eP(U));n!==h;)r.push(n),n=e.charAt(em),v.test(n)?em++:(n=h,0===ew&&eP(U));if(46===e.charCodeAt(em)?(n=".",em++):(n=h,0===ew&&eP(F)),n!==h){for(i=eN(),s=[],a=e.charAt(em),A.test(a)?em++:(a=h,0===ew&&eP(j));a!==h;)s.push(a),a=e.charAt(em),A.test(a)?em++:(a=h,0===ew&&eP(j));t=r=[r,n,i,s]}else em=t,t=h;ew--,t===h&&(r=h,0===ew&&eP(L))}(),eN(),(r=function(){var t,r,n,i,s,a;if(ew++,t=em,r=em,e.substr(em,5)===m?(n=m,em+=5):(n=h,0===ew&&eP(H)),n===h&&("O-O"===e.substr(em,3)?(n="O-O",em+=3):(n=h,0===ew&&eP(G)),n===h&&(e.substr(em,5)===b?(n=b,em+=5):(n=h,0===ew&&eP($)),n===h&&("0-0"===e.substr(em,3)?(n="0-0",em+=3):(n=h,0===ew&&eP(V)),n===h)))){if(n=em,i=e.charAt(em),x.test(i)?em++:(i=h,0===ew&&eP(M)),i!==h){if(s=[],a=e.charAt(em),E.test(a)?em++:(a=h,0===ew&&eP(q)),a!==h)for(;a!==h;)s.push(a),a=e.charAt(em),E.test(a)?em++:(a=h,0===ew&&eP(q));else s=h;s!==h?n=i=[i,s]:(em=n,n=h)}else em=n,n=h}return n!==h?(i=e.charAt(em),k.test(i)?em++:(i=h,0===ew&&eP(K)),i===h&&(i=null),r=n=[n,i]):(em=r,r=h),t=r!==h?e.substring(t,em):r,ew--,t===h&&(r=h,0===ew&&eP(z)),t}())!==h){for((n=function(){var t,r,n;for(ew++,t=em,r=[],n=e.charAt(em),P.test(n)?em++:(n=h,0===ew&&eP(Q));n!==h;)r.push(n),r.length>=2?n=h:(n=e.charAt(em),P.test(n)?em++:(n=h,0===ew&&eP(Q)));return r.length<1?(em=t,t=h):t=r,ew--,t===h&&(r=h,0===ew&&eP(W)),t}())===h&&(n=null),i=[],s=eC();s!==h;)i.push(s),s=eC();for(s=eN(),(a=eO())===h&&(a=null),o=[],l=eR();l!==h;)o.push(l),l=eR();t=function(e,t,r,n,i){let s={move:e,variations:i};return t&&(s.suffix=t),r&&(s.nag=r),null!==n&&(s.comment=n),s}(r,n,i,a,o)}else em=t,t=h;return t}function eC(){var t,r,n,i,s;if(ew++,t=em,eN(),36===e.charCodeAt(em)?(r="$",em++):(r=h,0===ew&&eP(J)),r!==h){if(n=em,i=[],s=e.charAt(em),v.test(s)?em++:(s=h,0===ew&&eP(U)),s!==h)for(;s!==h;)i.push(s),s=e.charAt(em),v.test(s)?em++:(s=h,0===ew&&eP(U));else i=h;(n=i!==h?e.substring(n,em):i)!==h?t=n:(em=t,t=h)}else em=t,t=h;return ew--,t===h&&0===ew&&eP(Z),t}function eO(){var t;return(t=function(){var t,r,n,i,s;if(ew++,t=em,123===e.charCodeAt(em)?(r="{",em++):(r=h,0===ew&&eP(X)),r!==h){for(n=em,i=[],s=e.charAt(em),S.test(s)?em++:(s=h,0===ew&&eP(ee));s!==h;)i.push(s),s=e.charAt(em),S.test(s)?em++:(s=h,0===ew&&eP(ee));(n=e.substring(n,em),125===e.charCodeAt(em)?(i="}",em++):(i=h,0===ew&&eP(et)),i!==h)?t=n.replace(/[\r\n]+/g," "):(em=t,t=h)}else em=t,t=h;return ew--,t===h&&(r=h,0===ew&&eP(Y)),t}())===h&&(t=function(){var t,r,n,i,s;if(ew++,t=em,59===e.charCodeAt(em)?(r=";",em++):(r=h,0===ew&&eP(en)),r!==h){for(n=em,i=[],s=e.charAt(em),I.test(s)?em++:(s=h,0===ew&&eP(ei));s!==h;)i.push(s),s=e.charAt(em),I.test(s)?em++:(s=h,0===ew&&eP(ei));t=(n=e.substring(n,em)).trim()}else em=t,t=h;return ew--,t===h&&(r=h,0===ew&&eP(er)),t}()),t}function eR(){var t,r,n,i;return(ew++,t=em,eN(),40===e.charCodeAt(em)?(r="(",em++):(r=h,0===ew&&eP(ea)),r!==h&&(n=eT())!==h&&(eN(),41===e.charCodeAt(em)?(i=")",em++):(i=h,0===ew&&eP(eo)),i!==h))?t=n:(em=t,t=h),ew--,t===h&&0===ew&&eP(es),t}function eN(){var t,r;for(ew++,t=[],r=e.charAt(em),T.test(r)?em++:(r=h,0===ew&&eP(ep));r!==h;)t.push(r),r=e.charAt(em),T.test(r)?em++:(r=h,0===ew&&eP(ep));return ew--,r=h,0===ew&&eP(ef),t}if(d=g(),t.peg$library)return{peg$result:d,peg$currPos:em,peg$FAILED:h,peg$maxFailExpected:ex,peg$maxFailPos:ey};if(d!==h&&em===e.length)return d;throw d!==h&&em<e.length&&eP({type:"end"}),l=ex,c=ey<e.length?e.charAt(ey):null,r=ey,i=ey<e.length?ey+1:ey,a=ek(r),o=ek(i),u={source:f,start:{offset:r,line:a.line,column:a.column},end:{offset:i,line:o.line,column:o.column}},new n(n.buildMessage(l,c),l,c,u)}(e);this.reset();let s=i.headers,a="";for(let e in s)"fen"===e.toLowerCase()&&(a=s[e]),this.header(e,s[e]);if(t){if("1"===s.SetUp){if(!("FEN"in s))throw Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(s.FEN,{preserveHeaders:!0})}}else a&&this.load(a,{preserveHeaders:!0});let o=i.root;for(;o;){if(o.move){let e=this._moveFromSan(o.move,t);if(null==e)throw Error(`Invalid move in PGN: ${o.move}`);this._makeMove(e),this._incPositionCount()}void 0!==o.comment&&(this._comments[this.fen()]=o.comment),o=o.variations[0]}let l=i.result;l&&Object.keys(this._header).length&&this._header.Result!==l&&this.setHeader("Result",l)}_moveToSan(e,t){let r="";if(e.flags&g.KSIDE_CASTLE)r="O-O";else if(e.flags&g.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&g.NULL_MOVE)return"--";if("p"!==e.piece){let n=function(e,t){let r=e.from,n=e.to,i=e.piece,s=0,a=0,o=0;for(let e=0,l=t.length;e<l;e++){let l=t[e].from,c=t[e].to;i===t[e].piece&&r!==l&&n===c&&(s++,r>>4==l>>4&&a++,(15&r)==(15&l)&&o++)}return s>0?a>0&&o>0?_(r):o>0?_(r).charAt(1):_(r).charAt(0):""}(e,t);r+=e.piece.toUpperCase()+n}e.flags&(g.CAPTURE|g.EP_CAPTURE)&&("p"===e.piece&&(r+=_(e.from)[0]),r+="x"),r+=_(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r,n,i,s,a,o=N(e);if(t||("0-0"===o?o="O-O":"0-0-0"!==o||(o="O-O-O")),"--"==o)return{color:this._turn,from:0,to:0,piece:"k",flags:g.NULL_MOVE};let l=R(o),c=this._moves({legal:!0,piece:l});for(let e=0,t=c.length;e<t;e++)if(o===N(this._moveToSan(c[e],c)))return c[e];if(t)return null;let u=!1;if((n=o.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/))?(r=n[1],i=n[2],s=n[3],a=n[4],1==i.length&&(u=!0)):(n=o.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/))&&(r=n[1],i=n[2],s=n[3],a=n[4],1==i.length&&(u=!0)),l=R(o),c=this._moves({legal:!0,piece:r||l}),!s)return null;for(let e=0,t=c.length;e<t;e++)if(i){if((!r||r.toLowerCase()==c[e].piece)&&y[i]==c[e].from&&y[s]==c[e].to&&(!a||a.toLowerCase()==c[e].promotion))return c[e];if(u){let t=_(c[e].from);if((!r||r.toLowerCase()==c[e].piece)&&y[s]==c[e].to&&(i==t[0]||i==t[1])&&(!a||a.toLowerCase()==c[e].promotion))return c[e]}}else if(o===N(this._moveToSan(c[e],c)).replace("x",""))return c[e];return null}ascii(){let e="   +------------------------+\n";for(let t=y.a8;t<=y.h1;t++){if(0==(15&t)&&(e+=" "+"87654321"[t>>4]+" |"),this._board[t]){let r=this._board[t].type;e+=" "+("w"===this._board[t].color?r.toUpperCase():r.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+"   +------------------------+\n     a  b  c  d  e  f  g  h"}perft(e){let t=this._moves({legal:!1}),r=0,n=this._turn;for(let i=0,s=t.length;i<s;i++)this._makeMove(t[i]),!this._isKingAttacked(n)&&(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn!=e&&(this.move("--"),!0)}turn(){return this._turn}board(){let e=[],t=[];for(let r=y.a8;r<=y.h1;r++)null==this._board[r]?t.push(null):t.push({square:_(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in y){let t=y[e];return((t>>4)+(15&t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){let t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){let n=t.pop();if(!n)break;e?r.push(new f(this,n)):r.push(this._moveToSan(n,this._moves())),this._makeMove(n)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){let t=this._positionCount.get(e)??0;1===t?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){let e=[],t={},r=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){let t=e.pop();if(!t)break;this._makeMove(t),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){let e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{let t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(let r of["k","q"])void 0!==t[r]&&(t[r]?this._castling[e]|=P[r]:this._castling[e]&=~P[r]);this._updateCastlingRights();let r=this.getCastlingRights(e);return(void 0===t.k||t.k===r.k)&&(void 0===t.q||t.q===r.q)}getCastlingRights(e){return{k:(this._castling[e]&P.k)!=0,q:(this._castling[e]&P.q)!=0}}moveNumber(){return this._moveNumber}}},2315:(e,t,r)=>{"use strict";r.d(t,{X:()=>o,r:()=>a});var n=r(1680),i=r(5839),s=r(4057);function a(e,t){let r={[Symbol.iterator]:()=>r,next:()=>{let r=e.next(),n=r.value;return!0===r.done||null==n?{done:!0,value:void 0}:{done:!1,value:t(n)}}};return r}function o(e){let t=s.D4(i.base58btc.decode(`z${e}`));return(0,n.jD)(t)}},2322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dnsEncode=t.namehash=t.isValidName=t.ensNormalize=void 0;let n=r(6870),i=r(8662),s=r(723),a=new Uint8Array(32);function o(e){return(0,i.assertArgument)(0!==e.length,"invalid ENS name; empty component","comp",e),e}function l(e){let t=(0,i.toUtf8Bytes)(c(e)),r=[];if(0===e.length)return r;let n=0;for(let e=0;e<t.length;e++)46===t[e]&&(r.push(o(t.slice(n,e))),n=e+1);return(0,i.assertArgument)(n<t.length,"invalid ENS name; empty component","name",e),r.push(o(t.slice(n))),r}function c(e){try{if(0===e.length)throw Error("empty label");return(0,s.ens_normalize)(e)}catch(t){(0,i.assertArgument)(!1,`invalid ENS name (${t.message})`,"name",e)}}a.fill(0),t.ensNormalize=c,t.isValidName=function(e){try{return 0!==l(e).length}catch(e){}return!1},t.namehash=function(e){(0,i.assertArgument)("string"==typeof e,"invalid ENS name; not a string","name",e),(0,i.assertArgument)(e.length,"invalid ENS name (empty label)","name",e);let t=a,r=l(e);for(;r.length;)t=(0,n.keccak256)((0,i.concat)([t,(0,n.keccak256)(r.pop())]));return(0,i.hexlify)(t)},t.dnsEncode=function(e,t){let r=null!=t?t:63;return(0,i.assertArgument)(r<=255,"DNS encoded label cannot exceed 255","length",r),(0,i.hexlify)((0,i.concat)(l(e).map(t=>{(0,i.assertArgument)(t.length<=r,`label ${JSON.stringify(e)} exceeds ${r} bytes`,"name",e);let n=new Uint8Array(t.length+1);return n.set(t,1),n[0]=n.length-1,n})))+"00"}},2332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StructFragment=t.FunctionFragment=t.FallbackFragment=t.ConstructorFragment=t.EventFragment=t.ErrorFragment=t.NamedFragment=t.Fragment=t.ParamType=void 0;let n=r(8662),i=r(4259);function s(e){let t=new Set;return e.forEach(e=>t.add(e)),Object.freeze(t)}let a=s("external public payable override".split(" ")),o="constant external internal payable private public pure view override",l=s(o.split(" ")),c="constructor error event fallback function receive struct",u=s(c.split(" ")),d="calldata memory storage payable indexed",h=s(d.split(" ")),f=s([c,d,"tuple returns",o].join(" ").split(" ")),p={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},g=RegExp("^(\\s*)"),m=RegExp("^([0-9]+)"),b=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),y=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),x=RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class w{#u;#m;get offset(){return this.#u}get length(){return this.#m.length-this.#u}constructor(e){this.#u=0,this.#m=e.slice()}clone(){return new w(this.#m)}reset(){this.#u=0}#b(e=0,t=0){return new w(this.#m.slice(e,t).map(t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e}))))}popKeyword(e){let t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){let t=this.peek();throw Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=this.#b(this.#u+1,e.match+1);return this.#u=e.match+1,t}popParams(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=[];for(;this.#u<e.match-1;){let e=this.peek().linkNext;t.push(this.#b(this.#u+1,e)),this.#u=e}return this.#u=e.match+1,t}peek(){if(this.#u>=this.#m.length)throw Error("out-of-bounds");return this.#m[this.#u]}peekKeyword(e){let t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;let t=this.peek();return t.type===e?t.text:null}pop(){let e=this.peek();return this.#u++,e}toString(){let e=[];for(let t=this.#u;t<this.#m.length;t++){let r=this.#m[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function v(e){let t=[],r=t=>{let r=a<e.length?JSON.stringify(e[a]):"$EOI";throw Error(`invalid token ${r} at ${a}: ${t}`)},i=[],s=[],a=0;for(;a<e.length;){let o=e.substring(a),l=o.match(g);l&&(a+=l[1].length,o=e.substring(a));let c={depth:i.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:a,value:-1};t.push(c);let u=p[o[0]]||"";if(u){if(c.type=u,c.text=o[0],a++,"OPEN_PAREN"===u)i.push(t.length-1),s.push(t.length-1);else if("CLOSE_PAREN"==u)0===i.length&&r("no matching open bracket"),c.match=i.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if("COMMA"===u)c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if("OPEN_BRACKET"===u)c.type="BRACKET";else if("CLOSE_BRACKET"===u){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){let r=t.pop().text;e=r+e,t[t.length-1].value=(0,n.getNumber)(r)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw Error("missing opening bracket");t[t.length-1].text+=e}continue}if(l=o.match(b)){if(c.text=l[1],a+=c.text.length,f.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(x)){c.type="TYPE";continue}c.type="ID";continue}if(l=o.match(m)){c.text=l[1],c.type="NUMBER",a+=c.text.length;continue}throw Error(`unexpected token ${JSON.stringify(o[0])} at position ${a}`)}return new w(t.map(e=>Object.freeze(e)))}function A(e,t){let r=[];for(let n in t.keys())e.has(n)&&r.push(n);if(r.length>1)throw Error(`conflicting types: ${r.join(", ")}`)}function E(e,t){if(t.peekKeyword(u)){let r=t.pop().text;if(r!==e)throw Error(`expected ${e}, got ${r}`)}return t.popType("ID")}function k(e,t){let r=new Set;for(;;){let n=e.peekType("KEYWORD");if(null==n||t&&!t.has(n))break;if(e.pop(),r.has(n))throw Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function P(e){let t=k(e,l);return(A(t,s("constant payable nonpayable".split(" "))),A(t,s("pure view payable nonpayable".split(" "))),t.has("view"))?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function S(e,t){return e.popParams().map(e=>j.from(e,t))}function I(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return(0,n.getBigInt)(e.pop().text);throw Error("invalid gas")}return null}function T(e){if(e.length)throw Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}let _=new RegExp(/^(.*)\[([0-9]*)\]$/);function C(e){let t=e.match(x);if((0,n.assertArgument)(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){let r=parseInt(t[2]);(0,n.assertArgument)(0!==r&&r<=32,"invalid bytes length","type",e)}else if(t[3]){let r=parseInt(t[3]);(0,n.assertArgument)(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",e)}return e}let O={},R=Symbol.for("_ethers_internal"),N="_ParamTypeInternal",M="_ErrorInternal",B="_EventInternal",D="_ConstructorInternal",L="_FallbackInternal",U="_FunctionInternal",F="_StructInternal";class j{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,r,i,s,a,o,l){if((0,n.assertPrivate)(e,O,"ParamType"),Object.defineProperty(this,R,{value:N}),a&&(a=Object.freeze(a.slice())),"array"===i){if(null==o||null==l)throw Error("")}else if(null!=o||null!=l)throw Error("");if("tuple"===i){if(null==a)throw Error("")}else if(null!=a)throw Error("");(0,n.defineProperties)(this,{name:t,type:r,baseType:i,indexed:s,components:a,arrayLength:o,arrayChildren:l})}format(e){if(null==e&&(e="sighash"),"json"===e){let t=this.name||"";if(this.isArray()){let e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}let r={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(t=>t.format(e)).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw Error("array is wrong length");let r=this;return e.map(e=>r.arrayChildren.walk(e,t))}if(this.isTuple()){if(!Array.isArray(e))throw Error("invalid tuple value");if(e.length!==this.components.length)throw Error("array is wrong length");let r=this;return e.map((e,n)=>r.components[n].walk(e,t))}return t(this.type,e)}#y(e,t,r,n){if(this.isArray()){if(!Array.isArray(t))throw Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw Error("array is wrong length");let i=this.arrayChildren,s=t.slice();s.forEach((t,n)=>{i.#y(e,t,r,e=>{s[n]=e})}),n(s);return}if(this.isTuple()){let i;let s=this.components;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!=typeof t)throw Error("invalid tuple value");i=s.map(e=>{if(!e.name)throw Error("cannot use object value with unnamed components");if(!(e.name in t))throw Error(`missing value for component ${e.name}`);return t[e.name]})}if(i.length!==this.components.length)throw Error("array is wrong length");i.forEach((t,n)=>{s[n].#y(e,t,r,e=>{i[n]=e})}),n(i);return}let i=r(this.type,t);i.then?e.push(async function(){n(await i)}()):n(i)}async walkAsync(e,t){let r=[],n=[e];return this.#y(r,e,t,e=>{n[0]=e}),r.length&&await Promise.all(r),n[0]}static from(e,t){if(j.isParamType(e))return e;if("string"==typeof e)try{return j.from(v(e),t)}catch(t){(0,n.assertArgument)(!1,"invalid param type","obj",e)}else if(e instanceof w){let r="",n="",i=null;k(e,s(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(n="tuple",i=e.popParams().map(e=>j.from(e)),r=`tuple(${i.map(e=>e.format()).join(",")})`):n=r=C(e.popType("TYPE"));let a=null,o=null;for(;e.length&&e.peekType("BRACKET");){let t=e.pop();a=new j(O,"",r,n,null,i,o,a),o=t.value,r+=t.text,n="array",i=null}let l=null;if(k(e,h).has("indexed")){if(!t)throw Error("");l=!0}let c=e.peekType("ID")?e.pop().text:"";if(e.length)throw Error("leftover tokens");return new j(O,c,r,n,l,i,o,a)}let r=e.name;(0,n.assertArgument)(!r||"string"==typeof r&&r.match(y),"invalid name","obj.name",r);let i=e.indexed;null!=i&&((0,n.assertArgument)(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let a=e.type,o=a.match(_);if(o){let t=parseInt(o[2]||"-1"),n=j.from({type:o[1],components:e.components});return new j(O,r||"",a,"array",i,null,t,n)}if("tuple"===a||a.startsWith("tuple(")||a.startsWith("(")){let t=null!=e.components?e.components.map(e=>j.from(e)):null;return new j(O,r||"",a,"tuple",i,t,null,null)}return new j(O,r||"",a=C(e.type),a,i,null,null,null)}static isParamType(e){return e&&e[R]===N}}t.ParamType=j;class z{type;inputs;constructor(e,t,r){(0,n.assertPrivate)(e,O,"Fragment"),r=Object.freeze(r.slice()),(0,n.defineProperties)(this,{type:t,inputs:r})}static from(e){if("string"==typeof e){try{z.from(JSON.parse(e))}catch(e){}return z.from(v(e))}if(e instanceof w)switch(e.peekKeyword(u)){case"constructor":return q.from(e);case"error":return $.from(e);case"event":return V.from(e);case"fallback":case"receive":return K.from(e);case"function":return W.from(e);case"struct":return Q.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return q.from(e);case"error":return $.from(e);case"event":return V.from(e);case"fallback":case"receive":return K.from(e);case"function":return W.from(e);case"struct":return Q.from(e)}(0,n.assert)(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}(0,n.assertArgument)(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return q.isFragment(e)}static isError(e){return $.isFragment(e)}static isEvent(e){return V.isFragment(e)}static isFunction(e){return W.isFragment(e)}static isStruct(e){return Q.isFragment(e)}}t.Fragment=z;class H extends z{name;constructor(e,t,r,i){super(e,t,i),(0,n.assertArgument)("string"==typeof r&&r.match(y),"invalid identifier","name",r),i=Object.freeze(i.slice()),(0,n.defineProperties)(this,{name:r})}}function G(e,t){return"("+t.map(t=>t.format(e)).join("full"===e?", ":",")+")"}t.NamedFragment=H;class $ extends H{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,R,{value:M})}get selector(){return(0,i.id)(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+G(e,this.inputs)),t.join(" ")}static from(e){if($.isFragment(e))return e;if("string"==typeof e)return $.from(v(e));if(e instanceof w){let t=E("error",e),r=S(e);return T(e),new $(O,t,r)}return new $(O,e.name,e.inputs?e.inputs.map(j.from):[])}static isFragment(e){return e&&e[R]===M}}t.ErrorFragment=$;class V extends H{anonymous;constructor(e,t,r,i){super(e,"event",t,r),Object.defineProperty(this,R,{value:B}),(0,n.defineProperties)(this,{anonymous:i})}get topicHash(){return(0,i.id)(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+G(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return new V(O,e,t=(t||[]).map(e=>j.from(e)),!1).topicHash}static from(e){if(V.isFragment(e))return e;if("string"==typeof e)try{return V.from(v(e))}catch(t){(0,n.assertArgument)(!1,"invalid event fragment","obj",e)}else if(e instanceof w){let t=E("event",e),r=S(e,!0),n=!!k(e,s(["anonymous"])).has("anonymous");return T(e),new V(O,t,r,n)}return new V(O,e.name,e.inputs?e.inputs.map(e=>j.from(e,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[R]===B}}t.EventFragment=V;class q extends z{payable;gas;constructor(e,t,r,i,s){super(e,t,r),Object.defineProperty(this,R,{value:D}),(0,n.defineProperties)(this,{payable:i,gas:s})}format(e){if((0,n.assert)(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[`constructor${G(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(q.isFragment(e))return e;if("string"==typeof e)try{return q.from(v(e))}catch(t){(0,n.assertArgument)(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof w){k(e,s(["constructor"]));let t=S(e),r=!!k(e,a).has("payable"),n=I(e);return T(e),new q(O,"constructor",t,r,n)}return new q(O,"constructor",e.inputs?e.inputs.map(j.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[R]===D}}t.ConstructorFragment=q;class K extends z{payable;constructor(e,t,r){super(e,"fallback",t),Object.defineProperty(this,R,{value:L}),(0,n.defineProperties)(this,{payable:r})}format(e){let t=0===this.inputs.length?"receive":"fallback";return"json"===e?JSON.stringify({type:t,stateMutability:this.payable?"payable":"nonpayable"}):`${t}()${this.payable?" payable":""}`}static from(e){if(K.isFragment(e))return e;if("string"==typeof e)try{return K.from(v(e))}catch(t){(0,n.assertArgument)(!1,"invalid fallback fragment","obj",e)}else if(e instanceof w){let t=e.toString(),r=e.peekKeyword(s(["fallback","receive"]));if((0,n.assertArgument)(r,"type must be fallback or receive","obj",t),"receive"===e.popKeyword(s(["fallback","receive"]))){let t=S(e);return(0,n.assertArgument)(0===t.length,"receive cannot have arguments","obj.inputs",t),k(e,s(["payable"])),T(e),new K(O,[],!0)}let i=S(e);i.length?(0,n.assertArgument)(1===i.length&&"bytes"===i[0].type,"invalid fallback inputs","obj.inputs",i.map(e=>e.format("minimal")).join(", ")):i=[j.from("bytes")];let a=P(e);if((0,n.assertArgument)("nonpayable"===a||"payable"===a,"fallback cannot be constants","obj.stateMutability",a),k(e,s(["returns"])).has("returns")){let t=S(e);(0,n.assertArgument)(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map(e=>e.format("minimal")).join(", "))}return T(e),new K(O,i,"payable"===a)}return"receive"===e.type?new K(O,[],!0):"fallback"===e.type?new K(O,[j.from("bytes")],"payable"===e.stateMutability):void(0,n.assertArgument)(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[R]===L}}t.FallbackFragment=K;class W extends H{constant;outputs;stateMutability;payable;gas;constructor(e,t,r,i,s,a){super(e,"function",t,i),Object.defineProperty(this,R,{value:U}),s=Object.freeze(s.slice()),(0,n.defineProperties)(this,{constant:"view"===r||"pure"===r,gas:a,outputs:s,payable:"payable"===r,stateMutability:r})}get selector(){return(0,i.id)(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+G(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(G(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return new W(O,e,"view",t=(t||[]).map(e=>j.from(e)),[],null).selector}static from(e){if(W.isFragment(e))return e;if("string"==typeof e)try{return W.from(v(e))}catch(t){(0,n.assertArgument)(!1,"invalid function fragment","obj",e)}else if(e instanceof w){let t=E("function",e),r=S(e),n=P(e),i=[];k(e,s(["returns"])).has("returns")&&(i=S(e));let a=I(e);return T(e),new W(O,t,n,r,i,a)}let t=e.stateMutability;return null!=t||(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new W(O,e.name,t,e.inputs?e.inputs.map(j.from):[],e.outputs?e.outputs.map(j.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[R]===U}}t.FunctionFragment=W;class Q extends H{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,R,{value:F})}format(){throw Error("@TODO")}static from(e){if("string"==typeof e)try{return Q.from(v(e))}catch(t){(0,n.assertArgument)(!1,"invalid struct fragment","obj",e)}else if(e instanceof w){let t=E("struct",e),r=S(e);return T(e),new Q(O,t,r)}return new Q(O,e.name,e.inputs?e.inputs.map(j.from):[])}static isFragment(e){return e&&e[R]===F}}t.StructFragment=Q},2383:(e,t,r)=>{"use strict";let n;r.d(t,{D7:()=>e3,I0:()=>e2}),function(e){e.assertEqual=e=>{},e.assertIs=function(e){},e.assertNever=function(e){throw Error()},e.arrayToEnum=e=>{let t={};for(let r of e)t[r]=r;return t},e.getValidEnumValues=t=>{let r=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),n={};for(let e of r)n[e]=t[e];return e.objectValues(n)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},e.find=(e,t)=>{for(let r of e)if(t(r))return r},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(eQ||(eQ={})),(eZ||(eZ={})).mergeShapes=(e,t)=>({...e,...t});let i=eQ.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),s=e=>{switch(typeof e){case"undefined":return i.undefined;case"string":return i.string;case"number":return Number.isNaN(e)?i.nan:i.number;case"boolean":return i.boolean;case"function":return i.function;case"bigint":return i.bigint;case"symbol":return i.symbol;case"object":if(Array.isArray(e))return i.array;if(null===e)return i.null;if(e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch)return i.promise;if("undefined"!=typeof Map&&e instanceof Map)return i.map;if("undefined"!=typeof Set&&e instanceof Set)return i.set;if("undefined"!=typeof Date&&e instanceof Date)return i.date;return i.object;default:return i.unknown}},a=eQ.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class o extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){let r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof o))throw Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,eQ.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}o.create=e=>new o(e);let l=(e,t)=>{let r;switch(e.code){case a.invalid_type:r=e.received===i.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case a.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,eQ.jsonStringifyReplacer)}`;break;case a.unrecognized_keys:r=`Unrecognized key(s) in object: ${eQ.joinValues(e.keys,", ")}`;break;case a.invalid_union:r="Invalid input";break;case a.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${eQ.joinValues(e.options)}`;break;case a.invalid_enum_value:r=`Invalid enum value. Expected ${eQ.joinValues(e.options)}, received '${e.received}'`;break;case a.invalid_arguments:r="Invalid function arguments";break;case a.invalid_return_type:r="Invalid function return type";break;case a.invalid_date:r="Invalid date";break;case a.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:eQ.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case a.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case a.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case a.custom:r="Invalid input";break;case a.invalid_intersection_types:r="Intersection results could not be merged";break;case a.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case a.not_finite:r="Number must be finite";break;default:r=t.defaultError,eQ.assertNever(e)}return{message:r}},c=e=>{let{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],a={...i,path:s};if(void 0!==i.message)return{...i,path:s,message:i.message};let o="";for(let e of n.filter(e=>!!e).slice().reverse())o=e(a,{data:t,defaultError:o}).message;return{...i,path:s,message:o}};function u(e,t){let r=c({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,l,l==l?void 0:l].filter(e=>!!e)});e.common.issues.push(r)}class d{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if("aborted"===n.status)return h;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let e of t){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return d.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:t,value:i}=n;if("aborted"===t.status||"aborted"===i.status)return h;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(void 0!==i.value||n.alwaysSet)&&(r[t.value]=i.value)}return{status:e.value,value:r}}}let h=Object.freeze({status:"aborted"}),f=e=>({status:"dirty",value:e}),p=e=>({status:"valid",value:e}),g=e=>"aborted"===e.status,m=e=>"dirty"===e.status,b=e=>"valid"===e.status,y=e=>"undefined"!=typeof Promise&&e instanceof Promise;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:e?.message}(eJ||(eJ={}));class x{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}let w=(e,t)=>{if(b(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new o(e.common.issues);return this._error=t,this._error}}};function v(e){if(!e)return{};let{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??i.defaultError}:void 0===i.data?{message:s??n??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:s??r??i.defaultError}},description:i}}class A{get description(){return this._def.description}_getType(e){return s(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:s(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new d,ctx:{common:e.parent.common,data:e.data,parsedType:s(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(y(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){let r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:s(e)},n=this._parseSync({data:e,path:r.path,parent:r});return w(r,n)}"~validate"(e){let t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:s(e)};if(!this["~standard"].async)try{let r=this._parseSync({data:e,path:[],parent:t});return b(r)?{value:r.value}:{issues:t.common.issues}}catch(e){e?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>b(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:s(e)},n=this._parse({data:e,path:r.path,parent:r});return w(r,await (y(n)?n:Promise.resolve(n)))}refine(e,t){let r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{let i=e(t),s=()=>n.addIssue({code:a.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(s(),!1)):!!i||(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new eg({schema:this,typeName:eY.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return em.create(this,this._def)}nullable(){return eb.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Y.create(this)}promise(){return ep.create(this,this._def)}or(e){return ee.create([this,e],this._def)}and(e){return en.create(this,e,this._def)}transform(e){return new eg({...v(this._def),schema:this,typeName:eY.ZodEffects,effect:{type:"transform",transform:e}})}default(e){return new ey({...v(this._def),innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:eY.ZodDefault})}brand(){return new ev({typeName:eY.ZodBranded,type:this,...v(this._def)})}catch(e){return new ex({...v(this._def),innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:eY.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return eA.create(this,e)}readonly(){return eE.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}let E=/^c[^\s-]{8,}$/i,k=/^[0-9a-z]+$/,P=/^[0-9A-HJKMNP-TV-Z]{26}$/i,S=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,I=/^[a-z0-9_-]{21}$/i,T=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,C=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,O=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,R=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,N=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,M=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,B=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,D=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,L="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",U=RegExp(`^${L}$`);function F(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);let r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}class j extends A{_parse(e){var t,r,s,o;let l;if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==i.string){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.string,received:t.parsedType}),h}let c=new d;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(u(l=this._getOrReturnCtx(e,l),{code:a.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),c.dirty());else if("max"===i.kind)e.data.length>i.value&&(u(l=this._getOrReturnCtx(e,l),{code:a.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),c.dirty());else if("length"===i.kind){let t=e.data.length>i.value,r=e.data.length<i.value;(t||r)&&(l=this._getOrReturnCtx(e,l),t?u(l,{code:a.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):r&&u(l,{code:a.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),c.dirty())}else if("email"===i.kind)C.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"email",code:a.invalid_string,message:i.message}),c.dirty());else if("emoji"===i.kind)n||(n=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),n.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"emoji",code:a.invalid_string,message:i.message}),c.dirty());else if("uuid"===i.kind)S.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"uuid",code:a.invalid_string,message:i.message}),c.dirty());else if("nanoid"===i.kind)I.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"nanoid",code:a.invalid_string,message:i.message}),c.dirty());else if("cuid"===i.kind)E.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"cuid",code:a.invalid_string,message:i.message}),c.dirty());else if("cuid2"===i.kind)k.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"cuid2",code:a.invalid_string,message:i.message}),c.dirty());else if("ulid"===i.kind)P.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"ulid",code:a.invalid_string,message:i.message}),c.dirty());else if("url"===i.kind)try{new URL(e.data)}catch{u(l=this._getOrReturnCtx(e,l),{validation:"url",code:a.invalid_string,message:i.message}),c.dirty()}else"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"regex",code:a.invalid_string,message:i.message}),c.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(u(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),c.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(u(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:{startsWith:i.value},message:i.message}),c.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(u(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:{endsWith:i.value},message:i.message}),c.dirty()):"datetime"===i.kind?(function(e){let t=`${L}T${F(e)}`,r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,RegExp(`^${t}$`)})(i).test(e.data)||(u(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:"datetime",message:i.message}),c.dirty()):"date"===i.kind?U.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:"date",message:i.message}),c.dirty()):"time"===i.kind?RegExp(`^${F(i)}$`).test(e.data)||(u(l=this._getOrReturnCtx(e,l),{code:a.invalid_string,validation:"time",message:i.message}),c.dirty()):"duration"===i.kind?_.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"duration",code:a.invalid_string,message:i.message}),c.dirty()):"ip"===i.kind?(t=e.data,!(("v4"===(r=i.version)||!r)&&O.test(t)||("v6"===r||!r)&&N.test(t))&&(u(l=this._getOrReturnCtx(e,l),{validation:"ip",code:a.invalid_string,message:i.message}),c.dirty())):"jwt"===i.kind?!function(e,t){if(!T.test(e))return!1;try{let[r]=e.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));if("object"!=typeof i||null===i||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)return!1;return!0}catch{return!1}}(e.data,i.alg)&&(u(l=this._getOrReturnCtx(e,l),{validation:"jwt",code:a.invalid_string,message:i.message}),c.dirty()):"cidr"===i.kind?(s=e.data,!(("v4"===(o=i.version)||!o)&&R.test(s)||("v6"===o||!o)&&M.test(s))&&(u(l=this._getOrReturnCtx(e,l),{validation:"cidr",code:a.invalid_string,message:i.message}),c.dirty())):"base64"===i.kind?B.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"base64",code:a.invalid_string,message:i.message}),c.dirty()):"base64url"===i.kind?D.test(e.data)||(u(l=this._getOrReturnCtx(e,l),{validation:"base64url",code:a.invalid_string,message:i.message}),c.dirty()):eQ.assertNever(i);return{status:c.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:a.invalid_string,...eJ.errToObj(r)})}_addCheck(e){return new j({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...eJ.errToObj(e)})}url(e){return this._addCheck({kind:"url",...eJ.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...eJ.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...eJ.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...eJ.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...eJ.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...eJ.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...eJ.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...eJ.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...eJ.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...eJ.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...eJ.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...eJ.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...eJ.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...eJ.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...eJ.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...eJ.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...eJ.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...eJ.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...eJ.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...eJ.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...eJ.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...eJ.errToObj(t)})}nonempty(e){return this.min(1,eJ.errToObj(e))}trim(){return new j({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new j({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new j({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}j.create=e=>new j({checks:[],typeName:eY.ZodString,coerce:e?.coerce??!1,...v(e)});class z extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){let t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==i.number){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.number,received:t.parsedType}),h}let r=new d;for(let n of this._def.checks)"int"===n.kind?eQ.isInteger(e.data)||(u(t=this._getOrReturnCtx(e,t),{code:a.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(u(t=this._getOrReturnCtx(e,t),{code:a.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(u(t=this._getOrReturnCtx(e,t),{code:a.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==function(e,t){let r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}(e.data,n.value)&&(u(t=this._getOrReturnCtx(e,t),{code:a.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(u(t=this._getOrReturnCtx(e,t),{code:a.not_finite,message:n.message}),r.dirty()):eQ.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,eJ.toString(t))}gt(e,t){return this.setLimit("min",e,!1,eJ.toString(t))}lte(e,t){return this.setLimit("max",e,!0,eJ.toString(t))}lt(e,t){return this.setLimit("max",e,!1,eJ.toString(t))}setLimit(e,t,r,n){return new z({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:eJ.toString(n)}]})}_addCheck(e){return new z({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:eJ.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:eJ.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:eJ.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:eJ.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:eJ.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:eJ.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:eJ.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:eJ.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:eJ.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&eQ.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}z.create=e=>new z({checks:[],typeName:eY.ZodNumber,coerce:e?.coerce||!1,...v(e)});class H extends A{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){let t;if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==i.bigint)return this._getInvalidInput(e);let r=new d;for(let n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(u(t=this._getOrReturnCtx(e,t),{code:a.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(u(t=this._getOrReturnCtx(e,t),{code:a.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(u(t=this._getOrReturnCtx(e,t),{code:a.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):eQ.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.bigint,received:t.parsedType}),h}gte(e,t){return this.setLimit("min",e,!0,eJ.toString(t))}gt(e,t){return this.setLimit("min",e,!1,eJ.toString(t))}lte(e,t){return this.setLimit("max",e,!0,eJ.toString(t))}lt(e,t){return this.setLimit("max",e,!1,eJ.toString(t))}setLimit(e,t,r,n){return new H({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:eJ.toString(n)}]})}_addCheck(e){return new H({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:eJ.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:eJ.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:eJ.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:eJ.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:eJ.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}H.create=e=>new H({checks:[],typeName:eY.ZodBigInt,coerce:e?.coerce??!1,...v(e)});class G extends A{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==i.boolean){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.boolean,received:t.parsedType}),h}return p(e.data)}}G.create=e=>new G({typeName:eY.ZodBoolean,coerce:e?.coerce||!1,...v(e)});class $ extends A{_parse(e){let t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==i.date){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.date,received:t.parsedType}),h}if(Number.isNaN(e.data.getTime()))return u(this._getOrReturnCtx(e),{code:a.invalid_date}),h;let r=new d;for(let n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(u(t=this._getOrReturnCtx(e,t),{code:a.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(u(t=this._getOrReturnCtx(e,t),{code:a.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):eQ.assertNever(n);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:eJ.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:eJ.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}$.create=e=>new $({checks:[],coerce:e?.coerce||!1,typeName:eY.ZodDate,...v(e)});class V extends A{_parse(e){if(this._getType(e)!==i.symbol){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.symbol,received:t.parsedType}),h}return p(e.data)}}V.create=e=>new V({typeName:eY.ZodSymbol,...v(e)});class q extends A{_parse(e){if(this._getType(e)!==i.undefined){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.undefined,received:t.parsedType}),h}return p(e.data)}}q.create=e=>new q({typeName:eY.ZodUndefined,...v(e)});class K extends A{_parse(e){if(this._getType(e)!==i.null){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.null,received:t.parsedType}),h}return p(e.data)}}K.create=e=>new K({typeName:eY.ZodNull,...v(e)});class W extends A{constructor(){super(...arguments),this._any=!0}_parse(e){return p(e.data)}}W.create=e=>new W({typeName:eY.ZodAny,...v(e)});class Q extends A{constructor(){super(...arguments),this._unknown=!0}_parse(e){return p(e.data)}}Q.create=e=>new Q({typeName:eY.ZodUnknown,...v(e)});class Z extends A{_parse(e){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.never,received:t.parsedType}),h}}Z.create=e=>new Z({typeName:eY.ZodNever,...v(e)});class J extends A{_parse(e){if(this._getType(e)!==i.undefined){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.void,received:t.parsedType}),h}return p(e.data)}}J.create=e=>new J({typeName:eY.ZodVoid,...v(e)});class Y extends A{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==i.array)return u(t,{code:a.invalid_type,expected:i.array,received:t.parsedType}),h;if(null!==n.exactLength){let e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(u(t,{code:e?a.too_big:a.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(u(t,{code:a.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(u(t,{code:a.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new x(t,e,t.path,r)))).then(e=>d.mergeArray(r,e));let s=[...t.data].map((e,r)=>n.type._parseSync(new x(t,e,t.path,r)));return d.mergeArray(r,s)}get element(){return this._def.type}min(e,t){return new Y({...this._def,minLength:{value:e,message:eJ.toString(t)}})}max(e,t){return new Y({...this._def,maxLength:{value:e,message:eJ.toString(t)}})}length(e,t){return new Y({...this._def,exactLength:{value:e,message:eJ.toString(t)}})}nonempty(e){return this.min(1,e)}}Y.create=(e,t)=>new Y({type:e,minLength:null,maxLength:null,exactLength:null,typeName:eY.ZodArray,...v(t)});class X extends A{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=eQ.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==i.object){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.object,received:t.parsedType}),h}let{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Z&&"strip"===this._def.unknownKeys))for(let e in r.data)s.includes(e)||o.push(e);let l=[];for(let e of s){let t=n[e],i=r.data[e];l.push({key:{status:"valid",value:e},value:t._parse(new x(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof Z){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of o)l.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)o.length>0&&(u(r,{code:a.unrecognized_keys,keys:o}),t.dirty());else if("strip"===e);else throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of o){let n=r.data[t];l.push({key:{status:"valid",value:t},value:e._parse(new x(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of l){let r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>d.mergeObjectSync(t,e)):d.mergeObjectSync(t,l)}get shape(){return this._def.shape()}strict(e){return eJ.errToObj,new X({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{let n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:eJ.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new X({...this._def,unknownKeys:"strip"})}passthrough(){return new X({...this._def,unknownKeys:"passthrough"})}extend(e){return new X({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new X({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:eY.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new X({...this._def,catchall:e})}pick(e){let t={};for(let r of eQ.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new X({...this._def,shape:()=>t})}omit(e){let t={};for(let r of eQ.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new X({...this._def,shape:()=>t})}deepPartial(){return function e(t){if(t instanceof X){let r={};for(let n in t.shape){let i=t.shape[n];r[n]=em.create(e(i))}return new X({...t._def,shape:()=>r})}if(t instanceof Y)return new Y({...t._def,type:e(t.element)});if(t instanceof em)return em.create(e(t.unwrap()));if(t instanceof eb)return eb.create(e(t.unwrap()));if(t instanceof ei)return ei.create(t.items.map(t=>e(t)));else return t}(this)}partial(e){let t={};for(let r of eQ.objectKeys(this.shape)){let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new X({...this._def,shape:()=>t})}required(e){let t={};for(let r of eQ.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof em;)e=e._def.innerType;t[r]=e}return new X({...this._def,shape:()=>t})}keyof(){return ed(eQ.objectKeys(this.shape))}}X.create=(e,t)=>new X({shape:()=>e,unknownKeys:"strip",catchall:Z.create(),typeName:eY.ZodObject,...v(t)}),X.strictCreate=(e,t)=>new X({shape:()=>e,unknownKeys:"strict",catchall:Z.create(),typeName:eY.ZodObject,...v(t)}),X.lazycreate=(e,t)=>new X({shape:e,unknownKeys:"strip",catchall:Z.create(),typeName:eY.ZodObject,...v(t)});class ee extends A{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{let r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let r=e.map(e=>new o(e.ctx.common.issues));return u(t,{code:a.invalid_union,unionErrors:r}),h});{let e;let n=[];for(let i of r){let r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=n.map(e=>new o(e));return u(t,{code:a.invalid_union,unionErrors:i}),h}}get options(){return this._def.options}}ee.create=(e,t)=>new ee({options:e,typeName:eY.ZodUnion,...v(t)});let et=e=>{if(e instanceof ec)return et(e.schema);if(e instanceof eg)return et(e.innerType());if(e instanceof eu)return[e.value];if(e instanceof eh)return e.options;if(e instanceof ef)return eQ.objectValues(e.enum);else if(e instanceof ey)return et(e._def.innerType);else if(e instanceof q)return[void 0];else if(e instanceof K)return[null];else if(e instanceof em)return[void 0,...et(e.unwrap())];else if(e instanceof eb)return[null,...et(e.unwrap())];else if(e instanceof ev)return et(e.unwrap());else if(e instanceof eE)return et(e.unwrap());else if(e instanceof ex)return et(e._def.innerType);else return[]};class er extends A{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.object)return u(t,{code:a.invalid_type,expected:i.object,received:t.parsedType}),h;let r=this.discriminator,n=t.data[r],s=this.optionsMap.get(n);return s?t.common.async?s._parseAsync({data:t.data,path:t.path,parent:t}):s._parseSync({data:t.data,path:t.path,parent:t}):(u(t,{code:a.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),h)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let r of t){let t=et(r.shape[e]);if(!t.length)throw Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let i of t){if(n.has(i))throw Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new er({typeName:eY.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...v(r)})}}class en extends A{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(g(e)||g(n))return h;let o=function e(t,r){let n=s(t),a=s(r);if(t===r)return{valid:!0,data:t};if(n===i.object&&a===i.object){let n=eQ.objectKeys(r),i=eQ.objectKeys(t).filter(e=>-1!==n.indexOf(e)),s={...t,...r};for(let n of i){let i=e(t[n],r[n]);if(!i.valid)return{valid:!1};s[n]=i.data}return{valid:!0,data:s}}if(n===i.array&&a===i.array){if(t.length!==r.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let s=e(t[i],r[i]);if(!s.valid)return{valid:!1};n.push(s.data)}return{valid:!0,data:n}}if(n===i.date&&a===i.date&&+t==+r)return{valid:!0,data:t};return{valid:!1}}(e.value,n.value);return o.valid?((m(e)||m(n))&&t.dirty(),{status:t.value,value:o.data}):(u(r,{code:a.invalid_intersection_types}),h)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}en.create=(e,t,r)=>new en({left:e,right:t,typeName:eY.ZodIntersection,...v(r)});class ei extends A{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.array)return u(r,{code:a.invalid_type,expected:i.array,received:r.parsedType}),h;if(r.data.length<this._def.items.length)return u(r,{code:a.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),h;!this._def.rest&&r.data.length>this._def.items.length&&(u(r,{code:a.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let n=[...r.data].map((e,t)=>{let n=this._def.items[t]||this._def.rest;return n?n._parse(new x(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>d.mergeArray(t,e)):d.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ei({...this._def,rest:e})}}ei.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new ei({items:e,typeName:eY.ZodTuple,rest:null,...v(t)})};class es extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.object)return u(r,{code:a.invalid_type,expected:i.object,received:r.parsedType}),h;let n=[],s=this._def.keyType,o=this._def.valueType;for(let e in r.data)n.push({key:s._parse(new x(r,e,r.path,e)),value:o._parse(new x(r,r.data[e],r.path,e)),alwaysSet:e in r.data});return r.common.async?d.mergeObjectAsync(t,n):d.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new es(t instanceof A?{keyType:e,valueType:t,typeName:eY.ZodRecord,...v(r)}:{keyType:j.create(),valueType:e,typeName:eY.ZodRecord,...v(t)})}}class ea extends A{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.map)return u(r,{code:a.invalid_type,expected:i.map,received:r.parsedType}),h;let n=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([e,t],i)=>({key:n._parse(new x(r,e,r.path,[i,"key"])),value:s._parse(new x(r,t,r.path,[i,"value"]))}));if(r.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let r of o){let n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return h;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let r of o){let n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return h;("dirty"===n.status||"dirty"===i.status)&&t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}ea.create=(e,t,r)=>new ea({valueType:t,keyType:e,typeName:eY.ZodMap,...v(r)});class eo extends A{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==i.set)return u(r,{code:a.invalid_type,expected:i.set,received:r.parsedType}),h;let n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(u(r,{code:a.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(u(r,{code:a.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let s=this._def.valueType;function o(e){let r=new Set;for(let n of e){if("aborted"===n.status)return h;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}let l=[...r.data.values()].map((e,t)=>s._parse(new x(r,e,r.path,t)));return r.common.async?Promise.all(l).then(e=>o(e)):o(l)}min(e,t){return new eo({...this._def,minSize:{value:e,message:eJ.toString(t)}})}max(e,t){return new eo({...this._def,maxSize:{value:e,message:eJ.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}eo.create=(e,t)=>new eo({valueType:e,minSize:null,maxSize:null,typeName:eY.ZodSet,...v(t)});class el extends A{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==i.function)return u(t,{code:a.invalid_type,expected:i.function,received:t.parsedType}),h;function r(e,r){return c({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,l,l].filter(e=>!!e),issueData:{code:a.invalid_arguments,argumentsError:r}})}function n(e,r){return c({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,l,l].filter(e=>!!e),issueData:{code:a.invalid_return_type,returnTypeError:r}})}let s={errorMap:t.common.contextualErrorMap},d=t.data;if(this._def.returns instanceof ep){let e=this;return p(async function(...t){let i=new o([]),a=await e._def.args.parseAsync(t,s).catch(e=>{throw i.addIssue(r(t,e)),i}),l=await Reflect.apply(d,this,a);return await e._def.returns._def.type.parseAsync(l,s).catch(e=>{throw i.addIssue(n(l,e)),i})})}{let e=this;return p(function(...t){let i=e._def.args.safeParse(t,s);if(!i.success)throw new o([r(t,i.error)]);let a=Reflect.apply(d,this,i.data),l=e._def.returns.safeParse(a,s);if(!l.success)throw new o([n(a,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new el({...this._def,args:ei.create(e).rest(Q.create())})}returns(e){return new el({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new el({args:e||ei.create([]).rest(Q.create()),returns:t||Q.create(),typeName:eY.ZodFunction,...v(r)})}}class ec extends A{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ec.create=(e,t)=>new ec({getter:e,typeName:eY.ZodLazy,...v(t)});class eu extends A{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return u(t,{received:t.data,code:a.invalid_literal,expected:this._def.value}),h}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ed(e,t){return new eh({values:e,typeName:eY.ZodEnum,...v(t)})}eu.create=(e,t)=>new eu({value:e,typeName:eY.ZodLiteral,...v(t)});class eh extends A{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),r=this._def.values;return u(t,{expected:eQ.joinValues(r),received:t.parsedType,code:a.invalid_type}),h}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return u(t,{received:t.data,code:a.invalid_enum_value,options:r}),h}return p(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return eh.create(e,{...this._def,...t})}exclude(e,t=this._def){return eh.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}eh.create=ed;class ef extends A{_parse(e){let t=eQ.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==i.string&&r.parsedType!==i.number){let e=eQ.objectValues(t);return u(r,{expected:eQ.joinValues(e),received:r.parsedType,code:a.invalid_type}),h}if(this._cache||(this._cache=new Set(eQ.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let e=eQ.objectValues(t);return u(r,{received:r.data,code:a.invalid_enum_value,options:e}),h}return p(e.data)}get enum(){return this._def.values}}ef.create=(e,t)=>new ef({values:e,typeName:eY.ZodNativeEnum,...v(t)});class ep extends A{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==i.promise&&!1===t.common.async?(u(t,{code:a.invalid_type,expected:i.promise,received:t.parsedType}),h):p((t.parsedType===i.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ep.create=(e,t)=>new ep({type:e,typeName:eY.ZodPromise,...v(t)});class eg extends A{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===eY.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{u(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){let e=n.transform(r.data,i);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return h;let n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?h:"dirty"===n.status||"dirty"===t.value?f(n.value):n});{if("aborted"===t.value)return h;let n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?h:"dirty"===n.status||"dirty"===t.value?f(n.value):n}}if("refinement"===n.type){let e=e=>{let t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?h:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))));{let n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?h:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}}if("transform"===n.type){if(!1!==r.common.async)return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>b(e)?Promise.resolve(n.transform(e.value,i)).then(e=>({status:t.value,value:e})):h);{let e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!b(e))return h;let s=n.transform(e.value,i);if(s instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}}eQ.assertNever(n)}}eg.create=(e,t,r)=>new eg({schema:e,typeName:eY.ZodEffects,effect:t,...v(r)}),eg.createWithPreprocess=(e,t,r)=>new eg({schema:t,effect:{type:"preprocess",transform:e},typeName:eY.ZodEffects,...v(r)});class em extends A{_parse(e){return this._getType(e)===i.undefined?p(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}em.create=(e,t)=>new em({innerType:e,typeName:eY.ZodOptional,...v(t)});class eb extends A{_parse(e){return this._getType(e)===i.null?p(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}eb.create=(e,t)=>new eb({innerType:e,typeName:eY.ZodNullable,...v(t)});class ey extends A{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===i.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ey.create=(e,t)=>new ey({innerType:e,typeName:eY.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...v(t)});class ex extends A{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return y(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new o(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new o(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ex.create=(e,t)=>new ex({innerType:e,typeName:eY.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...v(t)});class ew extends A{_parse(e){if(this._getType(e)!==i.nan){let t=this._getOrReturnCtx(e);return u(t,{code:a.invalid_type,expected:i.nan,received:t.parsedType}),h}return{status:"valid",value:e.data}}}ew.create=e=>new ew({typeName:eY.ZodNaN,...v(e)}),Symbol("zod_brand");class ev extends A{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class eA extends A{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?h:"dirty"===e.status?(t.dirty(),f(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{let e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?h:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new eA({in:e,out:t,typeName:eY.ZodPipeline})}}class eE extends A{_parse(e){let t=this._def.innerType._parse(e),r=e=>(b(e)&&(e.value=Object.freeze(e.value)),e);return y(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}eE.create=(e,t)=>new eE({innerType:e,typeName:eY.ZodReadonly,...v(t)}),X.lazycreate,function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(eY||(eY={}));let ek=j.create;z.create,ew.create,H.create;let eP=G.create;$.create,V.create,q.create,K.create;let eS=W.create;Q.create,Z.create,J.create;let eI=Y.create,eT=X.create;X.strictCreate;let e_=ee.create,eC=er.create;en.create,ei.create,es.create,ea.create,eo.create;let eO=el.create;ec.create;let eR=eu.create,eN=eh.create;ef.create;let eM=ep.create;eg.create,em.create,eb.create,eg.createWithPreprocess,eA.create;let eB=eN(["eq","gt","gte","lt","lte"]),eD=eT({value:ek(),compareType:eB}),eL=eT({contractAddress:ek(),value:ek(),compareType:eB}),eU=eT({tokenAddress:ek(),value:ek(),compareType:eB}),eF=eT({value:ek(),compareType:eB}),ej=eT({nftAddress:ek()}),ez=eT({nftAddress:ek(),tokenId:ek()}),eH=eT({}),eG=eT({}),e$=eT({contractAddress:ek(),functionName:ek(),abi:eI(eS()),requiredResult:eS(),compareType:eB}),eV=eT({name:ek(),success:eP(),error:ek().optional()}),eq=eO().args(ek().optional()).returns(e_([eV,eM(eV)])),eK=eC("type",[eT({type:eR("walletBalance"),chainId:ek(),params:eD}),eT({type:eR("contractBalance"),chainId:ek(),params:eL}),eT({type:eR("erc20Balance"),chainId:ek(),params:eU}),eT({type:eR("numTransactions"),chainId:ek(),params:eF}),eT({type:eR("hasNFT"),chainId:ek(),params:ej}),eT({type:eR("hasNFTTokenId"),chainId:ek(),params:ez}),eT({type:eR("addressIsContract"),chainId:ek(),params:eH}),eT({type:eR("addressIsEOA"),chainId:ek(),params:eG}),eT({type:eR("callContract"),chainId:ek(),params:e$}),eT({type:eR("custom"),chainId:ek(),params:eT({})})]),eW=eT({rule:eq,definition:eK});eI(eK);var eQ,eZ,eJ,eY,eX=r(2090);function e0(e,t){let r=e.find(e=>e.chainId===t);return r?.provider}let e1={walletBalance:(e,t,r)=>(function(e,t,r){if(void 0===r.value||null===r.value)throw Error("`value` is required");if(!["eq","gt","gte","lt","lte"].includes(r.compareType))throw Error("`compareType` is required and must be one of eq, gt, gte, lt, lte");return{rule:async n=>{let i=`Wallet balance ${r.compareType} ${r.value}`;if(null==n||""===n)throw Error("`address` is required");try{let s=e0(e,t);if(void 0===s)throw Error(`No provider found for chainId: ${t}`);let a=await s.getBalance(n),o=BigInt(a.toString()),l=!1;switch(r.compareType){case"eq":l=o===r.value;break;case"gt":l=o>r.value;break;case"gte":l=o>=r.value;break;case"lt":l=o<r.value;break;case"lte":l=o<=r.value;break;default:throw Error(`Unsupported compareType: ${r.compareType}`)}return{name:i,success:l}}catch(e){return{name:i,success:!1,error:e.message}}},definition:{type:"walletBalance",params:{value:r.value.toString(),compareType:r.compareType},chainId:t}}})(e,t,r),contractBalance:(e,t,r)=>(function(e,t,r){if(void 0===r.contractAddress||null===r.contractAddress)throw Error("`contractAddress` is required");if(void 0===r.value||null===r.value)throw Error("`value` is required");if(!["eq","gt","gte","lt","lte"].includes(r.compareType))throw Error("`compareType` is required and must be one of eq, gt, gte, lt, lte");return{rule:async()=>{let n=`Contract balance ${r.compareType} ${r.value} at ${r.contractAddress}`;try{let i=e0(e,t);if(void 0===i)throw Error(`No provider found for chainId: ${t}`);let s=await i.getBalance(r.contractAddress),a=BigInt(s.toString()),o=!1;switch(r.compareType){case"eq":o=a===r.value;break;case"gt":o=a>r.value;break;case"gte":o=a>=r.value;break;case"lt":o=a<r.value;break;case"lte":o=a<=r.value;break;default:throw Error(`Unsupported compareType: ${r.compareType}`)}return{name:n,success:o}}catch(e){return{name:n,success:!1,error:e.message}}},definition:{type:"contractBalance",params:{contractAddress:r.contractAddress,value:r.value.toString(),compareType:r.compareType},chainId:t}}})(e,t,r),erc20Balance:(e,t,r)=>(function(e,t,r){if(void 0===r.tokenAddress||null===r.tokenAddress)throw Error("`tokenAddress` is required");if(void 0===r.value||null===r.value)throw Error("`value` is required");if(!["eq","gt","gte","lt","lte"].includes(r.compareType))throw Error("`compareType` is required and must be one of eq, gt, gte, lt, lte");return{rule:async n=>{let i=`ERC20 balance ${r.compareType} ${r.value} (token: ${r.tokenAddress})`;if(null==n||""===n)throw Error("`address` is required");try{let s=e0(e,t);if(void 0===s)throw Error(`No provider found for chainId: ${t}`);let a=new eX.NZ(r.tokenAddress,["function balanceOf(address) view returns (uint256)"],s),o=await a.balanceOf(n),l=BigInt(o.toString()),c=!1;switch(r.compareType){case"eq":c=l===r.value;break;case"gt":c=l>r.value;break;case"gte":c=l>=r.value;break;case"lt":c=l<r.value;break;case"lte":c=l<=r.value;break;default:throw Error(`Unsupported compareType: ${r.compareType}`)}return{name:i,success:c}}catch(e){return{name:i,success:!1,error:e.message}}},definition:{type:"erc20Balance",params:{tokenAddress:r.tokenAddress,value:r.value.toString(),compareType:r.compareType},chainId:t}}})(e,t,r),numTransactions:(e,t,r)=>(function(e,t,r){if(void 0===r.value||null===r.value)throw Error("`value` is required");if(!["eq","gt","gte","lt","lte"].includes(r.compareType))throw Error("`compareType` is required and must be one of eq, gt, gte, lt, lte");return{rule:async n=>{let i=`Number of transactions ${r.compareType} ${r.value}`;if(null==n||""===n)throw Error("`address` is required");try{let s=e0(e,t);if(void 0===s)throw Error(`No provider found for chainId: ${t}`);let a=await s.getTransactionCount(n),o=BigInt(a),l=!1;switch(r.compareType){case"eq":l=o===r.value;break;case"gt":l=o>r.value;break;case"gte":l=o>=r.value;break;case"lt":l=o<r.value;break;case"lte":l=o<=r.value;break;default:throw Error(`Unsupported compareType: ${r.compareType}`)}return{name:i,success:l}}catch(e){return{name:i,success:!1,error:e.message}}},definition:{type:"numTransactions",params:{value:r.value.toString(),compareType:r.compareType},chainId:t}}})(e,t,r),hasNFT:(e,t,r)=>(function(e,t,r){if(void 0===r.nftAddress||null===r.nftAddress)throw Error("`nftAddress` is required");return{rule:async n=>{let i=`Address has at least 1 NFT from ${r.nftAddress}`;if(null==n||""===n)throw Error("`address` is required");try{let s=e0(e,t);if(void 0===s)throw Error(`No provider found for chainId: ${t}`);let a=new eX.NZ(r.nftAddress,["function balanceOf(address owner) view returns (uint256)"],s),o=await a.balanceOf(n),l=BigInt(o.toString());return{name:i,success:l>=1n}}catch(e){return{name:i,success:!1,error:e.message}}},definition:{type:"hasNFT",params:{nftAddress:r.nftAddress},chainId:t}}})(e,t,r),hasNFTTokenId:(e,t,r)=>(function(e,t,r){if(void 0===r.nftAddress||null===r.nftAddress)throw Error("`nftAddress` is required");if(void 0===r.tokenId||null===r.tokenId)throw Error("`tokenId` is required");return{rule:async n=>{let i=`Address has NFT ${r.nftAddress} #${r.tokenId}`;if(null==n||""===n)throw Error("`address` is required");try{let s=e0(e,t);if(void 0===s)throw Error(`No provider found for chainId: ${t}`);let a=new eX.NZ(r.nftAddress,["function ownerOf(uint256 tokenId) external view returns (address)"],s),o=(await a.ownerOf(r.tokenId)).toLowerCase()===n.toLowerCase();return{name:i,success:o}}catch(e){return{name:i,success:!1,error:e.message}}},definition:{type:"hasNFTTokenId",params:{nftAddress:r.nftAddress,tokenId:r.tokenId.toString()},chainId:t}}})(e,t,r),addressIsContract:(e,t,r)=>(function(e,t,r){return{rule:async r=>{let n=`Address is contract: ${r}`;if(null==r||""===r)throw Error("`address` is required");try{let i=e0(e,t);if(void 0===i)throw Error(`No provider found for chainId: ${t}`);let s=await i.getCode(r);return{name:n,success:"0x"!==s}}catch(e){return{name:n,success:!1,error:e.message}}},definition:{type:"addressIsContract",params:r,chainId:t}}})(e,t,r),addressIsEOA:(e,t,r)=>(function(e,t,r){return{rule:async r=>{let n=`Address is EOA: ${r}`;if(null==r||""===r)throw Error("`address` is required");try{let i=e0(e,t);if(void 0===i)throw Error(`No provider found for chainId: ${t}`);let s=await i.getCode(r);return{name:n,success:"0x"===s}}catch(e){return{name:n,success:!1,error:e.message}}},definition:{type:"addressIsEOA",params:r,chainId:t}}})(e,t,r),callContract:(e,t,r)=>(function(e,t,r){if(void 0===r.contractAddress||null===r.contractAddress)throw Error("`contractAddress` is required");if(void 0===r.functionName||null===r.functionName)throw Error("`functionName` is required");if(void 0===r.abi||null===r.abi||0===r.abi.length)throw Error("`abi` is required");return{rule:async(...n)=>{let i=`callContract ${r.contractAddress} ${r.functionName}`;try{let s=e0(e,t);if(void 0===s)throw Error(`No provider found for chainId: ${t}`);let a=new eX.NZ(r.contractAddress,r.abi,s),o=await a[r.functionName](...n),l=!1;if("boolean"==typeof o){if("boolean"!=typeof r.requiredResult)throw Error("Contract returned boolean but 'requiredResult' is not boolean.");if("eq"!==r.compareType)throw Error(`compareType '${r.compareType}' not supported for boolean comparison.`);l=o===r.requiredResult}else if("string"==typeof o){if("string"!=typeof r.requiredResult)throw Error("Contract returned string but 'requiredResult' is not string.");if("eq"===r.compareType)l=o===r.requiredResult;else throw Error(`compareType '${r.compareType}' not supported for string comparison.`)}else if("bigint"==typeof o||"number"==typeof o){let e="bigint"==typeof o?o:BigInt(o),t=BigInt(r.requiredResult);switch(r.compareType){case"eq":l=e===t;break;case"gt":l=e>t;break;case"gte":l=e>=t;break;case"lt":l=e<t;break;case"lte":l=e<=t;break;default:throw Error(`Unsupported compareType: ${r.compareType}`)}}else throw Error(`Unsupported return type from contract function: ${typeof o}`);return{name:i,success:l}}catch(e){return{name:i,success:!1,error:e.message}}},definition:{type:"callContract",params:{contractAddress:r.contractAddress,functionName:r.functionName,abi:r.abi,requiredResult:r.requiredResult},chainId:t}}})(e,t,r)};function e2(e,t){return t.map(t=>{let{type:r,chainId:n,params:i}=t;if(void 0===r)throw Error("Missing rule type");if(void 0===n)throw Error("Missing chainId");if(void 0===e0(e,n))throw Error(`Chain ID ${n} not found in networks`);let s=e1[r];if(void 0===s)throw Error(`Unknown rule type: "${r}"`);switch(r){case"walletBalance":case"contractBalance":case"erc20Balance":case"numTransactions":case"hasNFT":case"hasNFTTokenId":case"addressIsContract":case"addressIsEOA":case"callContract":return s(e,n,i);default:throw Error(`No constructor logic for rule type: "${r}"`)}})}class e3{rules=[];networks=[];constructor(e,t=[]){if(void 0===e.networks||0===e.networks.length)throw Error("No networks configured");this.networks=e.networks,Array.isArray(t)?this.addRules(t):this.addRule(t)}addRule(e){this.validateBuiltRule(e),this.rules.push(e)}addRules(e){e.forEach(e=>{this.validateBuiltRule(e)}),this.rules.push(...e)}hasNetwork(e){return this.networks.some(t=>t.chainId===e)}async evaluate(e){let t=this.rules.map(async({rule:t},r)=>(async()=>{try{return await t(e)}catch(e){return{name:`Rule #${r}`,success:!1,error:e.message}}})()),r=await Promise.all(t),n=r.every(e=>e.success);return{ruleResults:r,result:n}}getRuleDefinitions(){return this.rules.map(e=>{let{type:t,params:r,chainId:n}=e.definition;return{type:t,chainId:n,params:r}})}exportRulesAsJsonString(){return JSON.stringify(this.getRuleDefinitions())}validateNetwork(e){if(!this.hasNetwork(e))throw Error(`invalid rule - network ${e} not configured`)}validateBuiltRule(e){let t=eW.safeParse(e);if(!t.success){let e=t.error.errors.map(e=>e.message).join(", ");throw Error(`invalid rule - ${e}`)}this.validateNetwork(e.definition.chainId)}validateRulesJsonString(e){try{let t=JSON.parse(e);return this.validateRules(t)}catch{return!1}}validateRules(e){try{for(let t of eI(eK).parse(e))this.validateNetwork(t.chainId);return!0}catch{return!1}}}},2392:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,a){if("function"!=typeof n)throw TypeError("The listener must be a function");var o=new i(n,s||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=Array(s);i<s;i++)a[i]=n[i].fn;return a},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,s,a){var o=r?r+e:e;if(!this._events[o])return!1;var l,c,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,a),!0}for(c=1,l=Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(h=1,l=Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||a(this,s);else{for(var l=0,c=[],u=o.length;l<u;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o},2399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0;class r{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}}t.BrowserRandomSource=r},2405:(e,t,r)=>{"use strict";r.d(t,{DS:()=>x,OG:()=>b,Ph:()=>c,aK:()=>g,dJ:()=>m,e8:()=>a,fg:()=>y,lX:()=>u,lq:()=>d,qj:()=>f,x:()=>w,z:()=>h,zW:()=>o});var n=r(3084);let i=BigInt(0),s=BigInt(1);function a(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}function o(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function l(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?i:BigInt("0x"+e)}function c(e){return l((0,n.My)(e))}function u(e){return(0,n.DO)(e),l((0,n.My)(Uint8Array.from(e).reverse()))}function d(e,t){return(0,n.aT)(e.toString(16).padStart(2*t,"0"))}function h(e,t){return d(e,t).reverse()}function f(e,t,r){let i;if("string"==typeof t)try{i=(0,n.aT)(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if((0,n.aY)(t))i=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let s=i.length;if("number"==typeof r&&s!==r)throw Error(e+" of length "+r+" expected, got "+s);return i}let p=e=>"bigint"==typeof e&&i<=e;function g(e,t,r,n){if(!(p(t)&&p(r)&&p(n))||!(r<=t)||!(t<n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function m(e){let t;for(t=0;e>i;e>>=s,t+=1);return t}let b=e=>(s<<BigInt(e))-s;function y(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=e=>new Uint8Array(e),s=e=>Uint8Array.of(e),a=i(e),o=i(e),l=0,c=()=>{a.fill(1),o.fill(0),l=0},u=(...e)=>r(o,a,...e),d=(e=i(0))=>{o=u(s(0),e),a=u(),0!==e.length&&(o=u(s(1),e),a=u())},h=()=>{if(l++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(a=u()).slice();r.push(t),e+=a.length}return(0,n.Id)(...r)};return(e,t)=>{let r;for(c(),d(e);!(r=t(h()));)d();return c(),r}}function x(e,t,r={}){if(!e||"object"!=typeof e)throw Error("expected valid options object");function n(t,r,n){let i=e[t];if(n&&void 0===i)return;let s=typeof i;if(s!==r||null===i)throw Error(`param "${t}" is invalid: expected ${r}, got ${s}`)}Object.entries(t).forEach(([e,t])=>n(e,t,!1)),Object.entries(r).forEach(([e,t])=>n(e,t,!0))}function w(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let s=e(r,...n);return t.set(r,s),s}}},2439:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});let n="0x0000000000000000000000000000000000000000"},2513:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAddress=t.hashMessage=t.verifyMessage=void 0;let n=r(7064),i=null,s=null,a=null;try{i=n.ethers.utils.verifyMessage,s=n.ethers.utils.hashMessage,a=n.ethers.utils.getAddress}catch(e){i=n.ethers.verifyMessage,s=n.ethers.hashMessage,a=n.ethers.getAddress}t.verifyMessage=i,t.hashMessage=s,t.getAddress=a},2563:(e,t,r)=>{"use strict";r.d(t,{z:()=>k});var n=r(4922),i=r(3683),s=r(8121),a=r(1456),o=r(9982),l=r(8616),c=r(4453);let u=new Uint8Array(32);u.fill(0);let d=BigInt(-1),h=BigInt(0),f=BigInt(1),p=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),g=(0,a.up)(f,32),m=(0,a.up)(h,32),b={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},y=["name","version","chainId","verifyingContract","salt"];function x(e){return function(t){return(0,o.MR)("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}let w={name:x("name"),version:x("version"),chainId:function(e){let t=(0,a.Ab)(e,"domain.chainId");return((0,o.MR)(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t))?Number(t):(0,a.nD)(t)},verifyingContract:function(e){try{return(0,n.b)(e).toLowerCase()}catch(e){}(0,o.MR)(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){let t=(0,s.q5)(e,"domain.salt");return(0,o.MR)(32===t.length,'invalid domain value "salt"',"domain.salt",e),(0,s.c$)(t)}};function v(e){{let t=e.match(/^(u?)int(\d+)$/);if(t){let r=""===t[1],n=parseInt(t[2]);(0,o.MR)(n%8==0&&0!==n&&n<=256&&t[2]===String(n),"invalid numeric width","type",e);let i=(0,a.dK)(p,r?n-1:n),s=r?(i+f)*d:h;return function(t){let n=(0,a.Ab)(t,"value");return(0,o.MR)(n>=s&&n<=i,`value out-of-bounds for ${e}`,"value",n),(0,a.up)(r?(0,a.JJ)(n,256):n,32)}}}{let t=e.match(/^bytes(\d+)$/);if(t){let r=parseInt(t[1]);return(0,o.MR)(0!==r&&r<=32&&t[1]===String(r),"invalid bytes width","type",e),function(t){let n=(0,s.q5)(t);return(0,o.MR)(n.length===r,`invalid length for ${e}`,"value",t),function(e){let t=(0,s.q5)(e),r=t.length%32;return r?(0,s.xW)([t,u.slice(r)]):(0,s.c$)(t)}(t)}}}switch(e){case"address":return function(e){return(0,s.nx)((0,n.b)(e),32)};case"bool":return function(e){return e?g:m};case"bytes":return function(e){return(0,i.S)(e)};case"string":return function(e){return(0,c.id)(e)}}return null}function A(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}function E(e){let t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}class k{primaryType;#B;get types(){return JSON.parse(this.#B)}#D;#L;constructor(e){this.#D=new Map,this.#L=new Map;let t=new Map,r=new Map,n=new Map,i={};for(let s in Object.keys(e).forEach(s=>{i[s]=e[s].map(({name:t,type:r})=>{let{base:n,index:i}=E(r);return"int"!==n||e.int||(n="int256"),"uint"!==n||e.uint||(n="uint256"),{name:t,type:n+(i||"")}}),t.set(s,new Set),r.set(s,[]),n.set(s,new Set)}),this.#B=JSON.stringify(i),i){let n=new Set;for(let a of i[s]){(0,o.MR)(!n.has(a.name),`duplicate variable name ${JSON.stringify(a.name)} in ${JSON.stringify(s)}`,"types",e),n.add(a.name);let i=E(a.type).base;(0,o.MR)(i!==s,`circular type reference to ${JSON.stringify(i)}`,"types",e),!v(i)&&((0,o.MR)(r.has(i),`unknown type ${JSON.stringify(i)}`,"types",e),r.get(i).push(s),t.get(s).add(i))}}let s=Array.from(r.keys()).filter(e=>0===r.get(e).length);for(let[a,c]of((0,o.MR)(0!==s.length,"missing primary type","types",e),(0,o.MR)(1===s.length,`ambiguous primary types or unused types: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),(0,l.n)(this,{primaryType:s[0]}),!function i(s,a){for(let l of((0,o.MR)(!a.has(s),`circular type reference to ${JSON.stringify(s)}`,"types",e),a.add(s),t.get(s)))if(r.has(l))for(let e of(i(l,a),a))n.get(e).add(l);a.delete(s)}(this.primaryType,new Set),n)){let e=Array.from(c);e.sort(),this.#D.set(a,A(a,i[a])+e.map(e=>A(e,i[e])).join(""))}}getEncoder(e){let t=this.#L.get(e);return t||(t=this.#U(e),this.#L.set(e,t)),t}#U(e){{let t=v(e);if(t)return t}let t=E(e).array;if(t){let e=t.prefix,r=this.getEncoder(e);return n=>{(0,o.MR)(-1===t.count||t.count===n.length,`array length mismatch; expected length ${t.count}`,"value",n);let a=n.map(r);return this.#D.has(e)&&(a=a.map(i.S)),(0,i.S)((0,s.xW)(a))}}let r=this.types[e];if(r){let t=(0,c.id)(this.#D.get(e));return e=>{let n=r.map(({name:t,type:r})=>{let n=this.getEncoder(r)(e[t]);return this.#D.has(r)?(0,i.S)(n):n});return n.unshift(t),(0,s.xW)(n)}}(0,o.MR)(!1,`unknown type: ${e}`,"type",e)}encodeType(e){let t=this.#D.get(e);return(0,o.MR)(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return(0,i.S)(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(v(e))return r(e,t);let n=E(e).array;if(n)return(0,o.MR)(-1===n.count||n.count===t.length,`array length mismatch; expected length ${n.count}`,"value",t),t.map(e=>this._visit(n.prefix,e,r));let i=this.types[e];if(i)return i.reduce((e,{name:n,type:i})=>(e[n]=this._visit(i,t[n],r),e),{});(0,o.MR)(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new k(e)}static getPrimaryType(e){return k.from(e).primaryType}static hashStruct(e,t,r){return k.from(t).hashStruct(e,r)}static hashDomain(e){let t=[];for(let r in e){if(null==e[r])continue;let n=b[r];(0,o.MR)(n,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort((e,t)=>y.indexOf(e.name)-y.indexOf(t.name)),k.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return(0,s.xW)(["0x1901",k.hashDomain(e),k.from(t).hash(r)])}static hash(e,t,r){return(0,i.S)(k.encode(e,t,r))}static async resolveNames(e,t,r,n){for(let t in e=Object.assign({},e))null==e[t]&&delete e[t];let i={};e.verifyingContract&&!(0,s.Lo)(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");let a=k.from(t);for(let e in a.visit(r,(e,t)=>("address"!==e||(0,s.Lo)(t,20)||(i[t]="0x"),t)),i)i[e]=await n(e);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=a.visit(r,(e,t)=>"address"===e&&i[t]?i[t]:t),{domain:e,value:r}}static getPayload(e,t,r){k.hashDomain(e);let n={},i=[];y.forEach(t=>{let r=e[t];null!=r&&(n[t]=w[t](r),i.push({name:t,type:b[t]}))});let l=k.from(t),c=Object.assign({},t=l.types);return(0,o.MR)(null==c.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),c.EIP712Domain=i,l.encode(r),{types:c,domain:n,primaryType:l.primaryType,message:l.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return(0,s.c$)((0,s.q5)(t));if(e.match(/^u?int/))return(0,a.Ab)(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return(0,o.MR)("string"==typeof t,"invalid string","value",t),t}(0,o.MR)(!1,"unsupported type","type",e)})}}}},2577:(e,t,r)=>{"use strict";r.d(t,{Um:()=>u,b8:()=>h,sS:()=>f,vF:()=>d});var n=r(5587),i=r(5839),s=r(3172);let a=function(e,t){try{if("string"==typeof e&&e.length>0)return function(e){if((e=String(e)).length>100)throw Error("Value exceeds the maximum length of 100 characters.");let t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return NaN;let r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:throw Error(`The unit ${n} was matched, but no matching case exists.`)}}(e);if("number"==typeof e&&isFinite(e))return t?.long?function(e){let t=Math.abs(e);return t>=864e5?o(e,t,864e5,"day"):t>=36e5?o(e,t,36e5,"hour"):t>=6e4?o(e,t,6e4,"minute"):t>=1e3?o(e,t,1e3,"second"):`${e} ms`}(e):function(e){let t=Math.abs(e);return t>=864e5?`${Math.round(e/864e5)}d`:t>=36e5?`${Math.round(e/36e5)}h`:t>=6e4?`${Math.round(e/6e4)}m`:t>=1e3?`${Math.round(e/1e3)}s`:`${e}ms`}(e);throw Error("Value is not a string or number.")}catch(t){var r;throw Error("object"==typeof(r=t)&&null!==r&&"message"in r?`${t.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.")}};function o(e,t,r,n){return`${Math.round(e/r)} ${n}${t>=1.5*r?"s":""}`}let l=function(){try{return localStorage}catch(e){}}(),c=function(e){function t(e){let n,i,s;let a=null;function o(...e){if(!o.enabled)return;let r=Number(new Date);o.diff=r-(n||r),o.prev=n,o.curr=r,n=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,n)=>{if("%%"===r)return"%";i++;let s=t.formatters[n];if("function"==typeof s){let t=e[i];r=s.call(o,t),e.splice(i,1),i--}return r}),t.formatArgs.call(o,e),(o.log||t.log).apply(o,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,s=t.enabled(e)),s),set:e=>{a=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,r){let n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack??e.message:e},t.disable=function(){let e=[...t.names.map(n),...t.skips.map(n).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.substr(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,n;if("*"===e[e.length-1])return!0;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=a,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return t.colors[Math.abs(r)%t.colors.length]},t.setupFormatters(t.formatters),t.enable(t.load()),t}({formatArgs:function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+a(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(n=r))}),e.splice(n,0,t)},save:function(e){try{e?l?.setItem("debug",e):l?.removeItem("debug")}catch(e){}},load:function(){let e;try{e=l?.getItem("debug")}catch(e){}return!e&&void 0!==globalThis.process&&"env"in globalThis.process&&(e=globalThis.process.env.DEBUG),e},useColors:function(){return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||("undefined"==typeof navigator||navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)==null)&&("undefined"!=typeof document&&document.documentElement?.style?.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/))},setupFormatters:function(e){e.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},colors:["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],storage:l,log:console.debug??console.log??(()=>{})});function u(){return{forComponent:e=>d(e)}}function d(e){let t=function(e){let t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}(`${e}:trace`);return c.enabled(`${e}:trace`)&&null!=c.names.map(e=>e.toString()).find(e=>e.includes(":trace"))&&(t=c(`${e}:trace`)),Object.assign(c(e),{error:c(`${e}:error`),trace:t})}function h(){c.disable()}function f(e){c.enable(e)}function p(e){if(null!=e&&0!==(e=e.trim()).length)return e}c.formatters.b=e=>null==e?"undefined":i.base58btc.baseEncode(e),c.formatters.t=e=>null==e?"undefined":n.base32.baseEncode(e),c.formatters.m=e=>null==e?"undefined":s.base64.baseEncode(e),c.formatters.p=e=>null==e?"undefined":e.toString(),c.formatters.c=e=>null==e?"undefined":e.toString(),c.formatters.k=e=>null==e?"undefined":e.toString(),c.formatters.a=e=>null==e?"undefined":e.toString(),c.formatters.e=e=>null==e?"undefined":p(e.stack)??p(e.message)??e.toString()},2670:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf2Async=t.pbkdf2=void 0;let n=r(3810),i=r(3632),s=r(5636);function a(e,t,r,a){(0,n.hash)(e);let{c:o,dkLen:l,asyncTick:c}=(0,s.checkOpts)({dkLen:32,asyncTick:10},a);if((0,n.number)(o),(0,n.number)(l),(0,n.number)(c),o<1)throw Error("PBKDF2: iterations (c) should be >= 1");let u=(0,s.toBytes)(t),d=(0,s.toBytes)(r),h=new Uint8Array(l),f=i.hmac.create(e,u),p=f._cloneInto().update(d);return{c:o,dkLen:l,asyncTick:c,DK:h,PRF:f,PRFSalt:p}}function o(e,t,r,n,i){return e.destroy(),t.destroy(),n&&n.destroy(),i.fill(0),r}t.pbkdf2=function(e,t,r,n){let i;let{c:l,dkLen:c,DK:u,PRF:d,PRFSalt:h}=a(e,t,r,n),f=new Uint8Array(4),p=(0,s.createView)(f),g=new Uint8Array(d.outputLen);for(let e=1,t=0;t<c;e++,t+=d.outputLen){let r=u.subarray(t,t+d.outputLen);p.setInt32(0,e,!1),(i=h._cloneInto(i)).update(f).digestInto(g),r.set(g.subarray(0,r.length));for(let e=1;e<l;e++){d._cloneInto(i).update(g).digestInto(g);for(let e=0;e<r.length;e++)r[e]^=g[e]}}return o(d,h,u,i,g)},t.pbkdf2Async=async function(e,t,r,n){let i;let{c:l,dkLen:c,asyncTick:u,DK:d,PRF:h,PRFSalt:f}=a(e,t,r,n),p=new Uint8Array(4),g=(0,s.createView)(p),m=new Uint8Array(h.outputLen);for(let e=1,t=0;t<c;e++,t+=h.outputLen){let r=d.subarray(t,t+h.outputLen);g.setInt32(0,e,!1),(i=f._cloneInto(i)).update(p).digestInto(m),r.set(m.subarray(0,r.length)),await (0,s.asyncLoop)(l-1,u,()=>{h._cloneInto(i).update(m).digestInto(m);for(let e=0;e<r.length;e++)r[e]^=m[e]})}return o(h,f,d,i,m)}},2677:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeHmac=void 0;let n=r(4006),i=r(8662),s=!1,a=function(e,t,r){return(0,n.createHmac)(e,t).update(r).digest()},o=a;function l(e,t,r){let n=(0,i.getBytes)(t,"key"),s=(0,i.getBytes)(r,"data");return(0,i.hexlify)(o(e,n,s))}t.computeHmac=l,l._=a,l.lock=function(){s=!0},l.register=function(e){if(s)throw Error("computeHmac is locked");o=e},Object.freeze(l)},2678:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=0x1fffffffffffff,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},2706:(e,t,r)=>{"use strict";r.d(t,{By:()=>I,DD:()=>g,RJ:()=>a,VO:()=>B,WV:()=>k,YJ:()=>_,aM:()=>F,qi:()=>w,r9:()=>O,u9:()=>N,uM:()=>m,ur:()=>b,uu:()=>L});var n=r(3422),i=r(7243);let s=(0,i.cl)(),a=(0,i.Sc)(s),o=(0,i.Uo)((0,i.eu)("dns4"),(0,i.Yj)()),l=(0,i.Uo)((0,i.eu)("dns6"),(0,i.Yj)()),c=(0,i.Uo)((0,i.eu)("dnsaddr"),(0,i.Yj)()),u=(0,i.Uo)((0,i.eu)("dns"),(0,i.Yj)());(0,i.Sc)(o,(0,i.lq)((0,i.cl)())),(0,i.Sc)(l,(0,i.lq)((0,i.cl)())),(0,i.Sc)(c,(0,i.lq)((0,i.cl)())),(0,i.Sc)((0,i.or)(u,c,o,l),(0,i.lq)((0,i.cl)()));let d=(0,i.Uo)((0,i.eu)("ip4"),(0,i.Pc)(n.wM)),h=(0,i.Uo)((0,i.eu)("ip6"),(0,i.Pc)(n.w7)),f=(0,i.or)(d,h),p=(0,i.or)(f,u,o,l,c),g=(0,i.Sc)((0,i.or)(f,(0,i.Uo)((0,i.or)(u,c,o,l),(0,i.lq)((0,i.cl)())))),m=(0,i.Sc)(d),b=(0,i.Sc)(h);(0,i.Sc)(f);let y=(0,i.Uo)(p,(0,i.eu)("tcp"),(0,i.ai)()),x=(0,i.Uo)(p,(0,i.eu)("udp"),(0,i.ai)()),w=(0,i.Sc)((0,i.Uo)(y,(0,i.lq)((0,i.cl)())));(0,i.Sc)(x);let v=(0,i.Uo)(x,(0,i.eu)("quic"),(0,i.lq)((0,i.cl)())),A=(0,i.Uo)(x,(0,i.eu)("quic-v1"),(0,i.lq)((0,i.cl)())),E=(0,i.or)(v,A);(0,i.Sc)(v);let k=(0,i.Sc)(A),P=(0,i.or)(p,y,x,v,A),S=(0,i.or)((0,i.Uo)(P,(0,i.eu)("ws"),(0,i.lq)((0,i.cl)()))),I=(0,i.Sc)(S),T=(0,i.or)((0,i.Uo)(P,(0,i.eu)("wss"),(0,i.lq)((0,i.cl)())),(0,i.Uo)(P,(0,i.eu)("tls"),(0,i.lq)((0,i.Uo)((0,i.eu)("sni"),(0,i.Yj)())),(0,i.eu)("ws"),(0,i.lq)((0,i.cl)()))),_=(0,i.Sc)(T),C=(0,i.Uo)(x,(0,i.eu)("webrtc-direct"),(0,i.lq)((0,i.lT)()),(0,i.lq)((0,i.lT)()),(0,i.lq)((0,i.cl)())),O=(0,i.Sc)(C),R=(0,i.Uo)(A,(0,i.eu)("webtransport"),(0,i.lq)((0,i.lT)()),(0,i.lq)((0,i.lT)()),(0,i.lq)((0,i.cl)())),N=(0,i.Sc)(R),M=(0,i.or)(S,T,(0,i.Uo)(y,(0,i.lq)((0,i.cl)())),(0,i.Uo)(E,(0,i.lq)((0,i.cl)())),(0,i.Uo)(p,(0,i.lq)((0,i.cl)())),C,R,(0,i.cl)()),B=(0,i.Sc)(M),D=(0,i.Uo)(M,(0,i.eu)("p2p-circuit"),(0,i.cl)()),L=(0,i.Sc)(D),U=(0,i.or)((0,i.Uo)(M,(0,i.eu)("p2p-circuit"),(0,i.eu)("webrtc"),(0,i.lq)((0,i.cl)())),(0,i.Uo)(M,(0,i.eu)("webrtc"),(0,i.lq)((0,i.cl)())),(0,i.Uo)((0,i.eu)("webrtc"),(0,i.lq)((0,i.cl)()))),F=(0,i.Sc)(U),j=(0,i.or)((0,i.Uo)(p,(0,i.eu)("tcp"),(0,i.ai)(),(0,i.eu)("http"),(0,i.lq)((0,i.cl)())),(0,i.Uo)(p,(0,i.eu)("http"),(0,i.lq)((0,i.cl)())));(0,i.Sc)(j);let z=(0,i.or)((0,i.Uo)(p,(0,i.eu)("tcp"),(0,i.or)((0,i.Uo)((0,i.eu)("443"),(0,i.eu)("http")),(0,i.Uo)((0,i.ai)(),(0,i.eu)("https")),(0,i.Uo)((0,i.ai)(),(0,i.eu)("tls"),(0,i.eu)("http"))),(0,i.lq)((0,i.cl)())),(0,i.Uo)(p,(0,i.eu)("tls"),(0,i.eu)("http"),(0,i.lq)((0,i.cl)())),(0,i.Uo)(p,(0,i.eu)("https"),(0,i.lq)((0,i.cl)())));(0,i.Sc)(z);let H=(0,i.or)((0,i.Uo)((0,i.eu)("memory"),(0,i.Yj)(),(0,i.lq)((0,i.cl)())));(0,i.Sc)(H)},2776:function(e,t,r){"use strict";var n,i,s=this&&this.__classPrivateFieldSet||function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},a=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.CBC=void 0;let o=r(5383);class l extends o.ModeOfOperation{constructor(e,t){if(super("ECC",e,l),n.set(this,void 0),i.set(this,void 0),t){if(t.length%16)throw TypeError("invalid iv size (must be 16 bytes)");s(this,n,new Uint8Array(t),"f")}else s(this,n,new Uint8Array(16),"f");s(this,i,this.iv,"f")}get iv(){return new Uint8Array(a(this,n,"f"))}encrypt(e){if(e.length%16)throw TypeError("invalid plaintext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let t=0;t<16;t++)a(this,i,"f")[t]^=e[r+t];s(this,i,this.aes.encrypt(a(this,i,"f")),"f"),t.set(a(this,i,"f"),r)}return t}decrypt(e){if(e.length%16)throw TypeError("invalid ciphertext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){let n=this.aes.decrypt(e.subarray(r,r+16));for(let s=0;s<16;s++)t[r+s]=n[s]^a(this,i,"f")[s],a(this,i,"f")[s]=e[r+s]}return t}}t.CBC=l,n=new WeakMap,i=new WeakMap},2783:(e,t,r)=>{"use strict";r.d(t,{y:()=>M});var n=r(9982),i=r(2241),s=r(4922),a=r(1456),o=r(832);class l extends i.Ue{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=o.V.dereference(t,"string");try{r=(0,s.b)(r)}catch(e){return this._throwError(e.message,t)}return e.writeValue(r)}decode(e){return(0,s.b)((0,a.up)(e.readValue(),20))}}var c=r(8616);class u extends i.Ue{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function d(e,t,r){let s=[];if(Array.isArray(r))s=r;else if(r&&"object"==typeof r){let e={};s=t.map(t=>{let i=t.localName;return(0,n.vA)(i,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),(0,n.vA)(!e[i],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),e[i]=!0,r[i]})}else(0,n.MR)(!1,"invalid tuple value","tuple",r);(0,n.MR)(t.length===s.length,"types/value length mismatch","tuple",r);let a=new i.AU,o=new i.AU,l=[];t.forEach((e,t)=>{let r=s[t];if(e.dynamic){let t=o.length;e.encode(o,r);let n=a.writeUpdatableValue();l.push(e=>{n(e+t)})}else e.encode(a,r)}),l.forEach(e=>{e(a.length)});let c=e.appendWriter(a);return c+e.appendWriter(o)}function h(e,t){let r=[],s=[],a=e.subReader(0);return t.forEach(t=>{let i=null;if(t.dynamic){let r=e.readIndex(),s=a.subReader(r);try{i=t.decode(s)}catch(e){if((0,n.bJ)(e,"BUFFER_OVERRUN"))throw e;(i=e).baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if((0,n.bJ)(e,"BUFFER_OVERRUN"))throw e;(i=e).baseType=t.name,i.name=t.localName,i.type=t.type}if(void 0==i)throw Error("investigate");r.push(i),s.push(t.localName||null)}),i.Q7.fromItems(r,s)}class f extends i.Ue{coder;length;constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),(0,c.n)(this,{coder:e,length:t})}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){let r=o.V.dereference(t,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;-1===i&&(i=r.length,e.writeValue(r.length)),(0,n.dd)(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let e=0;e<r.length;e++)s.push(this.coder);return d(e,s,r)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),(0,n.vA)(t*i.Yx<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*i.Yx,length:e.dataLength}));let r=[];for(let e=0;e<t;e++)r.push(new u(this.coder));return h(e,r)}}class p extends i.Ue{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){let r=o.V.dereference(t,"bool");return e.writeValue(+!!r)}decode(e){return!!e.readValue()}}var g=r(8121);class m extends i.Ue{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=(0,g.Lm)(t);let r=e.writeValue(t.length);return r+e.writeBytes(t)}decode(e){return e.readBytes(e.readIndex(),!0)}}class b extends m{constructor(e){super("bytes",e)}decode(e){return(0,g.c$)(super.decode(e))}}class y extends i.Ue{size;constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),(0,c.n)(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=(0,g.Lm)(o.V.dereference(t,this.type));return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return(0,g.c$)(e.readBytes(this.size))}}let x=new Uint8Array([]);class w extends i.Ue{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(x)}decode(e){return e.readBytes(0),null}}let v=BigInt(0),A=BigInt(1),E=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class k extends i.Ue{size;signed;constructor(e,t,r){let n=(t?"int":"uint")+8*e;super(n,n,r,!1),(0,c.n)(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=(0,a.Ab)(o.V.dereference(t,this.type)),n=(0,a.dK)(E,8*i.Yx);if(this.signed){let e=(0,a.dK)(n,8*this.size-1);(r>e||r<-(e+A))&&this._throwError("value out-of-bounds",t),r=(0,a.JJ)(r,8*i.Yx)}else(r<v||r>(0,a.dK)(n,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(r)}decode(e){let t=(0,a.dK)(e.readValue(),8*this.size);return this.signed&&(t=(0,a.ST)(t,8*this.size)),t}}var P=r(7506);class S extends m{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,(0,P.YW)(o.V.dereference(t,"string")))}decode(e){return(0,P._v)(super.decode(e))}}class I extends i.Ue{coders;constructor(e,t){let r=!1,n=[];e.forEach(e=>{e.dynamic&&(r=!0),n.push(e.type)}),super("tuple","tuple("+n.join(",")+")",t,r),(0,c.n)(this,{coders:Object.freeze(e.slice())})}defaultValue(){let e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});let t=this.coders.reduce((e,t)=>{let r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let i=r.localName;if(i&&1===t[i])"length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n])}),Object.freeze(e)}encode(e,t){let r=o.V.dereference(t,"tuple");return d(e,this.coders,r)}decode(e){return h(e,this.coders)}}var T=r(7937);let _=new Map;_.set(0,"GENERIC_PANIC"),_.set(1,"ASSERT_FALSE"),_.set(17,"OVERFLOW"),_.set(18,"DIVIDE_BY_ZERO"),_.set(33,"ENUM_RANGE_ERROR"),_.set(34,"BAD_STORAGE_DATA"),_.set(49,"STACK_UNDERFLOW"),_.set(50,"ARRAY_RANGE_ERROR"),_.set(65,"OUT_OF_MEMORY"),_.set(81,"UNINITIALIZED_FUNCTION_CALL");let C=new RegExp(/^bytes([0-9]*)$/),O=new RegExp(/^(u?int)([0-9]*)$/),R=null,N=1024;class M{#x(e){if(e.isArray())return new f(this.#x(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new I(e.components.map(e=>this.#x(e)),e.name);switch(e.baseType){case"address":return new l(e.name);case"bool":return new p(e.name);case"string":return new S(e.name);case"bytes":return new b(e.name);case"":return new w(e.name)}let t=e.type.match(O);if(t){let r=parseInt(t[2]||"256");return(0,n.MR)(0!==r&&r<=256&&r%8==0,"invalid "+t[1]+" bit length","param",e),new k(r/8,"int"===t[1],e.name)}if(t=e.type.match(C)){let r=parseInt(t[1]);return(0,n.MR)(0!==r&&r<=32,"invalid bytes length","param",e),new y(r,e.name)}(0,n.MR)(!1,"invalid type","type",e.type)}getDefaultValue(e){return new I(e.map(e=>this.#x(T.aX.from(e))),"_").defaultValue()}encode(e,t){(0,n.dd)(t.length,e.length,"types/values length mismatch");let r=new I(e.map(e=>this.#x(T.aX.from(e))),"_"),s=new i.AU;return r.encode(s,t),s.data}decode(e,t,r){return new I(e.map(e=>this.#x(T.aX.from(e))),"_").decode(new i.mP(t,r,N))}static _setDefaultMaxInflation(e){(0,n.MR)("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),N=e}static defaultAbiCoder(){return null==R&&(R=new M),R}static getBuiltinCallException(e,t,r){return function(e,t,r,i){let a="missing revert data",o=null,l=null;if(r){a="execution reverted";let e=(0,g.q5)(r);if(r=(0,g.c$)(r),0===e.length)a+=" (no data present; likely require(false) occurred",o="require(false)";else if(e.length%32!=4)a+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===(0,g.c$)(e.slice(0,4)))try{o=i.decode(["string"],e.slice(4))[0],l={signature:"Error(string)",name:"Error",args:[o]},a+=`: ${JSON.stringify(o)}`}catch(e){a+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===(0,g.c$)(e.slice(0,4)))try{let t=Number(i.decode(["uint256"],e.slice(4))[0]);l={signature:"Panic(uint256)",name:"Panic",args:[t]},o=`Panic due to ${_.get(t)||"UNKNOWN"}(${t})`,a+=`: ${o}`}catch(e){a+=" (could not decode panic code)"}else a+=" (unknown custom error)"}let c={to:t.to?(0,s.b)(t.to):null,data:t.data||"0x"};return t.from&&(c.from=(0,s.b)(t.from)),(0,n.xz)(a,"CALL_EXCEPTION",{action:e,data:r,reason:o,transaction:c,invocation:null,revert:l})}(e,t,r,M.defaultAbiCoder())}}},2802:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EtherscanProvider=t.EtherscanPlugin=void 0;let n=r(7813),i=r(629),s=r(2984),a=r(8662),o=r(4861),l=r(9307),c=r(3118),u=r(5188),d="org.ethers.plugins.provider.Etherscan";class h extends c.NetworkPlugin{baseUrl;constructor(e){super(d),(0,a.defineProperties)(this,{baseUrl:e})}clone(){return new h(this.baseUrl)}}t.EtherscanPlugin=h;let f=["enableCcipRead"],p=1;class g extends o.AbstractProvider{network;apiKey;#F;constructor(e,t){super();let r=l.Network.from(e);this.#F=r.getPlugin(d),(0,a.defineProperties)(this,{apiKey:null!=t?t:null,network:r})}getBaseUrl(){if(this.#F)return this.#F.baseUrl;switch(this.network.name){case"mainnet":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"holesky":return"https://api-holesky.etherscan.io";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"base":return"https://api.basescan.org";case"base-sepolia":return"https://api-sepolia.basescan.org";case"bnb":return"https://api.bscscan.com";case"bnbt":return"https://api-testnet.bscscan.com";case"matic":return"https://api.polygonscan.com";case"matic-amoy":return"https://api-amoy.polygonscan.com";case"matic-mumbai":return"https://api-testnet.polygonscan.com";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}(0,a.assertArgument)(!1,"unsupported network","network",this.network)}getUrl(e,t){let r=Object.keys(t).reduce((e,r)=>{let n=t[r];return null!=n&&(e+=`&${r}=${n}`),e},"");return this.apiKey&&(r+=`&apikey=${this.apiKey}`),`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}&module=${e}${r}`}getPostUrl(){return`https://api.etherscan.io/v2/api?chainid=${this.network.chainId}`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t.chainid=this.network.chainId,t}async detectNetwork(){return this.network}async fetch(e,t,r){let n=p++,i=r?this.getPostUrl():this.getUrl(e,t),s=r?this.getPostData(e,t):null;this.emit("debug",{action:"sendRequest",id:n,url:i,payload:s});let o=new a.FetchRequest(i);o.setThrottleParams({slotInterval:1e3}),o.retryFunc=(e,t,r)=>(this.isCommunityResource()&&(0,u.showThrottleMessage)("Etherscan"),Promise.resolve(!0)),o.processFunc=async(t,r)=>{let i=r.hasBody()?JSON.parse((0,a.toUtf8String)(r.body)):{},s=("string"==typeof i.result?i.result:"").toLowerCase().indexOf("rate limit")>=0;return"proxy"===e?i&&0==i.status&&"NOTOK"==i.message&&s&&(this.emit("debug",{action:"receiveError",id:n,reason:"proxy-NOTOK",error:i}),r.throwThrottleError(i.result,2e3)):s&&(this.emit("debug",{action:"receiveError",id:n,reason:"null result",error:i.result}),r.throwThrottleError(i.result,2e3)),r},s&&(o.setHeader("content-type","application/x-www-form-urlencoded; charset=UTF-8"),o.body=Object.keys(s).map(e=>`${e}=${s[e]}`).join("&"));let l=await o.send();try{l.assertOk()}catch(e){this.emit("debug",{action:"receiveError",id:n,error:e,reason:"assertOk"}),(0,a.assert)(!1,"response error","SERVER_ERROR",{request:o,response:l})}l.hasBody()||(this.emit("debug",{action:"receiveError",id:n,error:"missing body",reason:"null body"}),(0,a.assert)(!1,"missing response","SERVER_ERROR",{request:o,response:l}));let c=JSON.parse((0,a.toUtf8String)(l.body));return"proxy"===e?("2.0"!=c.jsonrpc&&(this.emit("debug",{action:"receiveError",id:n,result:c,reason:"invalid JSON-RPC"}),(0,a.assert)(!1,"invalid JSON-RPC response (missing jsonrpc='2.0')","SERVER_ERROR",{request:o,response:l,info:{result:c}})),c.error&&(this.emit("debug",{action:"receiveError",id:n,result:c,reason:"JSON-RPC error"}),(0,a.assert)(!1,"error response","SERVER_ERROR",{request:o,response:l,info:{result:c}}))):0==c.status&&("No records found"===c.message||"No transactions found"===c.message)||1==c.status&&("string"!=typeof c.message||c.message.match(/^OK/))||(this.emit("debug",{action:"receiveError",id:n,result:c}),(0,a.assert)(!1,"error response","SERVER_ERROR",{request:o,response:l,info:{result:c}})),this.emit("debug",{action:"receiveRequest",id:n,result:c}),c.result}_getTransactionPostData(e){let t={};for(let r in e){if(f.indexOf(r)>=0||null==e[r])continue;let n=e[r];if(("type"!==r||0!==n)&&("blockTag"!==r||"latest"!==n)){if(({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0})[r])n=(0,a.toQuantity)(n);else if("accessList"===r)n="["+(0,s.accessListify)(n).map(e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`).join(",")+"]";else if("blobVersionedHashes"===r){if(0===n.length)continue;(0,a.assert)(!1,"Etherscan API does not support blobVersionedHashes","UNSUPPORTED_OPERATION",{operation:"_getTransactionPostData",info:{transaction:e}})}else n=(0,a.hexlify)(n);t[r]=n}}return t}_checkError(e,t,r){let i="";if((0,a.isError)(t,"SERVER_ERROR")){try{i=t.info.result.error.message}catch(e){}if(!i)try{i=t.info.message}catch(e){}}if("estimateGas"===e.method&&!i.match(/revert/i)&&i.match(/insufficient funds/i)&&(0,a.assert)(!1,"insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.transaction}),("call"===e.method||"estimateGas"===e.method)&&i.match(/execution reverted/i)){let r="";try{r=t.info.result.error.data}catch(e){}let i=n.AbiCoder.getBuiltinCallException(e.method,e.transaction,r);throw i.info={request:e,error:t},i}if(i&&"broadcastTransaction"===e.method){let t=s.Transaction.from(e.signedTransaction);i.match(/replacement/i)&&i.match(/underpriced/i)&&(0,a.assert)(!1,"replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t}),i.match(/insufficient funds/)&&(0,a.assert)(!1,"insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t}),i.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&(0,a.assert)(!1,"nonce has already been used","NONCE_EXPIRED",{transaction:t})}throw t}async _detectNetwork(){return this.network}async _perform(e){switch(e.method){case"chainId":return this.network.chainId;case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getPriorityFee":if("mainnet"===this.network.name)return"1000000000";if("optimism"===this.network.name)return"1000000";throw Error("fallback onto the AbstractProvider default");case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorage":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"broadcastTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(t=>this._checkError(e,t,e.signedTransaction));case"getBlock":if("blockTag"in e)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});(0,a.assert)(!1,"getBlock by blockHash not supported by Etherscan","UNSUPPORTED_OPERATION",{operation:"getBlock(blockHash)"});case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.hash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.hash});case"call":{if("latest"!==e.blockTag)throw Error("EtherscanProvider does not support blockTag for call");let t=this._getTransactionPostData(e.transaction);t.module="proxy",t.action="eth_call";try{return await this.fetch("proxy",t,!0)}catch(t){return this._checkError(e,t,e.transaction)}}case"estimateGas":{let t=this._getTransactionPostData(e.transaction);t.module="proxy",t.action="eth_estimateGas";try{return await this.fetch("proxy",t,!0)}catch(t){return this._checkError(e,t,e.transaction)}}}return super._perform(e)}async getNetwork(){return this.network}async getEtherPrice(){return"mainnet"!==this.network.name?0:parseFloat((await this.fetch("stats",{action:"ethprice"})).ethusd)}async getContract(e){var t;let r=this._getAddress(e);(t=r)&&"function"==typeof t.then&&(r=await r);try{let e=await this.fetch("contract",{action:"getabi",address:r}),t=JSON.parse(e);return new i.Contract(r,t,this)}catch(e){return null}}isCommunityResource(){return null==this.apiKey}}t.EtherscanProvider=g},2804:(e,t,r)=>{"use strict";r.d(t,{o:()=>p});var n=r(9827),i=r(1643),s=r(9141),a=r(8965),o=r(497),l=r(9213),c=r(6676),u=r(9985),d=r(9608);class h{deferred;signal;constructor(e){this.signal=e,this.deferred=(0,d.A)(),this.onAbort=this.onAbort.bind(this),this.signal?.addEventListener("abort",this.onAbort)}onAbort(){this.deferred.reject(this.signal?.reason??new n.lc)}cleanup(){this.signal?.removeEventListener("abort",this.onAbort)}}class f{id;fn;options;recipients;status;timeline;controller;constructor(e,t){this.id=`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`,this.status="queued",this.fn=e,this.options=t,this.recipients=[],this.timeline={created:Date.now()},this.controller=new AbortController,(0,c.k)(1/0,this.controller.signal),this.onAbort=this.onAbort.bind(this)}abort(e){this.controller.abort(e)}onAbort(){this.recipients.reduce((e,t)=>e&&t.signal?.aborted===!0,!0)&&(this.controller.abort(new n.lc),this.cleanup())}async join(e={}){let t=new h(e.signal);return this.recipients.push(t),e.signal?.addEventListener("abort",this.onAbort),t.deferred.promise}async run(){this.status="running",this.timeline.started=Date.now();try{this.controller.signal.throwIfAborted();let e=await (0,u.W)(this.fn({...this.options??{},signal:this.controller.signal}),this.controller.signal);this.recipients.forEach(t=>{t.deferred.resolve(e)}),this.status="complete"}catch(e){this.recipients.forEach(t=>{t.deferred.reject(e)}),this.status="errored"}finally{this.timeline.finished=Date.now(),this.cleanup()}}cleanup(){this.recipients.forEach(e=>{e.cleanup(),e.signal?.removeEventListener("abort",this.onAbort)})}}class p extends s.X{concurrency;maxSize;queue;pending;sort;constructor(e={}){super(),this.concurrency=e.concurrency??Number.POSITIVE_INFINITY,this.maxSize=e.maxSize??Number.POSITIVE_INFINITY,this.pending=0,null!=e.metricName&&e.metrics?.registerMetricGroup(e.metricName,{calculate:()=>({size:this.queue.length,running:this.pending,queued:this.queue.length-this.pending})}),this.sort=e.sort,this.queue=[],this.emitEmpty=(0,o.s)(this.emitEmpty.bind(this),1),this.emitIdle=(0,o.s)(this.emitIdle.bind(this),1)}emitEmpty(){0===this.size&&this.safeDispatchEvent("empty")}emitIdle(){0===this.running&&this.safeDispatchEvent("idle")}tryToStartAnother(){if(0===this.size)return this.emitEmpty(),0===this.running&&this.emitIdle(),!1;if(this.pending<this.concurrency){let e;for(let t of this.queue)if("queued"===t.status){e=t;break}return null!=e&&(this.safeDispatchEvent("active"),this.pending++,e.run().finally(()=>{for(let t=0;t<this.queue.length;t++)if(this.queue[t]===e){this.queue.splice(t,1);break}this.pending--,this.tryToStartAnother(),this.safeDispatchEvent("next")}),!0)}return!1}enqueue(e){this.queue.push(e),null!=this.sort&&this.queue.sort(this.sort)}async add(e,t){if(t?.signal?.throwIfAborted(),this.size===this.maxSize)throw new l.Z;let r=new f(e,t);return this.enqueue(r),this.safeDispatchEvent("add"),this.tryToStartAnother(),r.join(t).then(e=>(this.safeDispatchEvent("completed",{detail:e}),this.safeDispatchEvent("success",{detail:{job:r,result:e}}),e)).catch(e=>{if("queued"===r.status){for(let e=0;e<this.queue.length;e++)if(this.queue[e]===r){this.queue.splice(e,1);break}}throw this.safeDispatchEvent("error",{detail:e}),this.safeDispatchEvent("failure",{detail:{job:r,error:e}}),e})}clear(){this.queue.splice(0,this.queue.length)}abort(){this.queue.forEach(e=>{e.abort(new n.lc)}),this.clear()}async onEmpty(e){0!==this.size&&await (0,a.y)(this,"empty",e?.signal)}async onSizeLessThan(e,t){!(this.size<e)&&await (0,a.y)(this,"next",t?.signal,{filter:()=>this.size<e})}async onIdle(e){(0!==this.pending||0!==this.size)&&await (0,a.y)(this,"idle",e?.signal)}get size(){return this.queue.length}get queued(){return this.queue.length-this.pending}get running(){return this.pending}async *toGenerator(e){e?.signal?.throwIfAborted();let t=(0,i.Ny)({objectMode:!0}),r=e=>{null!=e?this.abort():this.clear(),t.end(e)},s=e=>{null!=e.detail&&t.push(e.detail)},a=e=>{r(e.detail)},o=()=>{r()},l=()=>{r(new n.lc("Queue aborted"))};this.addEventListener("completed",s),this.addEventListener("error",a),this.addEventListener("idle",o),e?.signal?.addEventListener("abort",l);try{yield*t}finally{this.removeEventListener("completed",s),this.removeEventListener("error",a),this.removeEventListener("idle",o),e?.signal?.removeEventListener("abort",l),r()}}}},2830:(e,t,r)=>{"use strict";r.d(t,{I:()=>l});var n=r(1970),i=r(7797),s=r(6552);let a=Symbol.for("@achingbrain/uint8arraylist");function o(e,t){if(null==t||t<0)throw RangeError("index is out of bounds");let r=0;for(let n of e){let e=r+n.byteLength;if(t<e)return{buf:n,index:t-r};r=e}throw RangeError("index is out of bounds")}class l{bufs;length;[a]=!0;constructor(...e){this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let t=0;for(let r of e)if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.push(r);else{if(r?.[a])t+=r.byteLength,this.bufs.push(...r.bufs);else throw Error("Could not append value, must be an Uint8Array or a Uint8ArrayList")}this.length+=t}prepend(...e){this.prependAll(e)}prependAll(e){let t=0;for(let r of e.reverse())if(r instanceof Uint8Array)t+=r.byteLength,this.bufs.unshift(r);else{if(r?.[a])t+=r.byteLength,this.bufs.unshift(...r.bufs);else throw Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList")}this.length+=t}get(e){let t=o(this.bufs,e);return t.buf[t.index]}set(e,t){let r=o(this.bufs,e);r.buf[r.index]=t}write(e,t=0){if(e instanceof Uint8Array)for(let r=0;r<e.length;r++)this.set(t+r,e[r]);else{if(e?.[a])for(let r=0;r<e.length;r++)this.set(t+r,e.get(r));else throw Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}}consume(e){if(!Number.isNaN(e=Math.trunc(e))&&!(e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,t){let{bufs:r,length:n}=this._subList(e,t);return(0,i.x)(r,n)}subarray(e,t){let{bufs:r,length:n}=this._subList(e,t);return 1===r.length?r[0]:(0,i.x)(r,n)}sublist(e,t){let{bufs:r,length:n}=this._subList(e,t),i=new l;return i.length=n,i.bufs=[...r],i}_subList(e,t){if(e=e??0,t=t??this.length,e<0&&(e=this.length+e),t<0&&(t=this.length+t),e<0||t>this.length)throw RangeError("index is out of bounds");if(e===t)return{bufs:[],length:0};if(0===e&&t===this.length)return{bufs:this.bufs,length:this.length};let r=[],n=0;for(let i=0;i<this.bufs.length;i++){let s=this.bufs[i],a=n,o=a+s.byteLength;if(n=o,e>=o)continue;let l=e>=a&&e<o,c=t>a&&t<=o;if(l&&c){if(e===a&&t===o){r.push(s);break}let n=e-a;r.push(s.subarray(n,n+(t-e)));break}if(l){if(0===e){r.push(s);continue}r.push(s.subarray(e-a));continue}if(c){if(t===o){r.push(s);break}r.push(s.subarray(0,t-a));break}r.push(s)}return{bufs:r,length:t-e}}indexOf(e,t=0){let r;if(!e?.[a]&&!(e instanceof Uint8Array))throw TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(isNaN(t=Number(t??0))&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;let i=n.byteLength;if(0===i)throw TypeError("search must be at least 1 byte long");let s=new Int32Array(256);for(let e=0;e<256;e++)s[e]=-1;for(let e=0;e<i;e++)s[n[e]]=e;let o=this.byteLength-n.byteLength,l=n.byteLength-1;for(let e=t;e<=o;e+=r){r=0;for(let t=l;t>=0;t--){let i=this.get(e+t);if(n[t]!==i){r=Math.max(1,t-s[i]);break}}if(0===r)return e}return -1}getInt8(e){let t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getInt8(0)}setInt8(e,t){let r=(0,n.K)(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setInt8(0,t),this.write(r,e)}getInt16(e,t){let r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt16(0,t)}setInt16(e,t,r){let i=(0,n.c)(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,t,r),this.write(i,e)}getInt32(e,t){let r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt32(0,t)}setInt32(e,t,r){let i=(0,n.c)(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,t,r),this.write(i,e)}getBigInt64(e,t){let r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigInt64(0,t)}setBigInt64(e,t,r){let i=(0,n.c)(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,t,r),this.write(i,e)}getUint8(e){let t=this.subarray(e,e+1);return new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0)}setUint8(e,t){let r=(0,n.K)(1);new DataView(r.buffer,r.byteOffset,r.byteLength).setUint8(0,t),this.write(r,e)}getUint16(e,t){let r=this.subarray(e,e+2);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,t)}setUint16(e,t,r){let i=(0,n.c)(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,t,r),this.write(i,e)}getUint32(e,t){let r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint32(0,t)}setUint32(e,t,r){let i=(0,n.c)(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,t,r),this.write(i,e)}getBigUint64(e,t){let r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getBigUint64(0,t)}setBigUint64(e,t,r){let i=(0,n.c)(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,t,r),this.write(i,e)}getFloat32(e,t){let r=this.subarray(e,e+4);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat32(0,t)}setFloat32(e,t,r){let i=(0,n.c)(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,t,r),this.write(i,e)}getFloat64(e,t){let r=this.subarray(e,e+8);return new DataView(r.buffer,r.byteOffset,r.byteLength).getFloat64(0,t)}setFloat64(e,t,r){let i=(0,n.c)(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,t,r),this.write(i,e)}equals(e){if(null==e||!(e instanceof l)||e.bufs.length!==this.bufs.length)return!1;for(let t=0;t<this.bufs.length;t++)if(!(0,s.a)(this.bufs[t],e.bufs[t]))return!1;return!0}static fromUint8Arrays(e,t){let r=new l;return r.bufs=e,null==t&&(t=e.reduce((e,t)=>e+t.byteLength,0)),r.length=t,r}}},2845:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Wallet=t.Mnemonic=t.encryptKeystoreJsonSync=t.encryptKeystoreJson=t.decryptKeystoreJson=t.decryptKeystoreJsonSync=t.isKeystoreJson=t.decryptCrowdsaleJson=t.isCrowdsaleJson=t.HDNodeVoidWallet=t.HDNodeWallet=t.getIndexedAccountPath=t.getAccountPath=t.defaultPath=t.BaseWallet=void 0;var n=r(6640);Object.defineProperty(t,"BaseWallet",{enumerable:!0,get:function(){return n.BaseWallet}});var i=r(8519);Object.defineProperty(t,"defaultPath",{enumerable:!0,get:function(){return i.defaultPath}}),Object.defineProperty(t,"getAccountPath",{enumerable:!0,get:function(){return i.getAccountPath}}),Object.defineProperty(t,"getIndexedAccountPath",{enumerable:!0,get:function(){return i.getIndexedAccountPath}}),Object.defineProperty(t,"HDNodeWallet",{enumerable:!0,get:function(){return i.HDNodeWallet}}),Object.defineProperty(t,"HDNodeVoidWallet",{enumerable:!0,get:function(){return i.HDNodeVoidWallet}});var s=r(6456);Object.defineProperty(t,"isCrowdsaleJson",{enumerable:!0,get:function(){return s.isCrowdsaleJson}}),Object.defineProperty(t,"decryptCrowdsaleJson",{enumerable:!0,get:function(){return s.decryptCrowdsaleJson}});var a=r(6571);Object.defineProperty(t,"isKeystoreJson",{enumerable:!0,get:function(){return a.isKeystoreJson}}),Object.defineProperty(t,"decryptKeystoreJsonSync",{enumerable:!0,get:function(){return a.decryptKeystoreJsonSync}}),Object.defineProperty(t,"decryptKeystoreJson",{enumerable:!0,get:function(){return a.decryptKeystoreJson}}),Object.defineProperty(t,"encryptKeystoreJson",{enumerable:!0,get:function(){return a.encryptKeystoreJson}}),Object.defineProperty(t,"encryptKeystoreJsonSync",{enumerable:!0,get:function(){return a.encryptKeystoreJsonSync}});var o=r(3414);Object.defineProperty(t,"Mnemonic",{enumerable:!0,get:function(){return o.Mnemonic}});var l=r(6923);Object.defineProperty(t,"Wallet",{enumerable:!0,get:function(){return l.Wallet}})},2860:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaxInt256=t.MinInt256=t.MaxUint256=t.WeiPerEther=t.N=void 0,t.N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),t.WeiPerEther=BigInt("1000000000000000000"),t.MaxUint256=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),t.MinInt256=BigInt("0x8000000000000000000000000000000000000000000000000000000000000000")*BigInt(-1),t.MaxInt256=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff")},2873:(e,t,r)=>{"use strict";r.d(t,{V:()=>E,u:()=>P});var n,i=r(3422),s=r(7196),a=r(3172),o=r(5898),l=r(1990),c=r(5587),u=r(3525),d=r(7797),h=r(9865),f=r(6054);function p(e){return t=>(0,f.d)(t,e)}function g(e){return t=>(0,h.s)(t,e)}function m(e){return new DataView(e.buffer).getUint16(e.byteOffset).toString()}function b(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,"string"==typeof e?parseInt(e):e),new Uint8Array(t)}function y(e){let t=e.subarray(0,e.length-2),r=e.subarray(e.length-2),n=(0,f.d)(t,"base32"),i=m(r);return`${n}:${i}`}let x=function(e){e=e.toString().trim();let t=new Uint8Array(4);return e.split(/\./g).forEach((e,r)=>{let n=parseInt(e,10);if(isNaN(n)||n<0||n>255)throw new l.Ci("Invalid byte value in IP address");t[r]=n}),t},w=Object.values(u.Fo).map(e=>e.decoder),v=function(){let e=w[0].or(w[1]);return w.slice(2).forEach(t=>e=e.or(t)),e}(),A=function(...e){return t=>{for(let r of e)r(t)}}(function(e){if(parseInt(e).toString()!==e)throw new l.yI("Value must be an integer")},function(e){if(e<0)throw new l.yI("Value must be a positive integer, or zero")},e=>{if(e>65535)throw new l.yI("Value must be smaller than or equal to "+65535)}),E=-1;class k{protocolsByCode=new Map;protocolsByName=new Map;getProtocol(e){let t;if(null==(t="string"==typeof e?this.protocolsByName.get(e):this.protocolsByCode.get(e)))throw new l.Xn(`Protocol ${e} was unknown`);return t}addProtocol(e){this.protocolsByCode.set(e.code,e),this.protocolsByName.set(e.name,e),e.aliases?.forEach(t=>{this.protocolsByName.set(t,e)})}removeProtocol(e){let t=this.protocolsByCode.get(e);null!=t&&(this.protocolsByCode.delete(t.code),this.protocolsByName.delete(t.name),t.aliases?.forEach(e=>{this.protocolsByName.delete(e)}))}}let P=new k;[{code:o.GY,name:"ip4",size:32,valueToBytes:x,bytesToValue:function(e){if(4!==e.byteLength)throw new l.Ci("IPv4 address was incorrect length");let t=[];for(let r=0;r<e.byteLength;r++)t.push(e[r]);return t.join(".")},validate:e=>{if(!(0,i.wM)(e))throw new l.yI(`Invalid IPv4 address "${e}"`)}},{code:o.u,name:"tcp",size:16,valueToBytes:b,bytesToValue:m,validate:A},{code:o.o$,name:"udp",size:16,valueToBytes:b,bytesToValue:m,validate:A},{code:o.xr,name:"dccp",size:16,valueToBytes:b,bytesToValue:m,validate:A},{code:o.Ik,name:"ip6",size:128,valueToBytes:function(e){let t,r=0,n=(e=e.toString().trim()).split(":",8);for(t=0;t<n.length;t++){let e;(0,i.wM)(n[t])&&(e=x(n[t]),n[t]=(0,f.d)(e.subarray(0,2),"base16")),null!=e&&++t<8&&n.splice(t,0,(0,f.d)(e.subarray(2,4),"base16"))}if(""===n[0])for(;n.length<8;)n.unshift("0");else if(""===n[n.length-1])for(;n.length<8;)n.push("0");else if(n.length<8){for(t=0;t<n.length&&""!==n[t];t++);let e=[t,1];for(t=9-n.length;t>0;t--)e.push("0");n.splice.apply(n,e)}let s=new Uint8Array(r+16);for(t=0;t<n.length;t++){""===n[t]&&(n[t]="0");let e=parseInt(n[t],16);if(isNaN(e)||e<0||e>65535)throw new l.Ci("Invalid byte value in IP address");s[r++]=e>>8&255,s[r++]=255&e}return s},bytesToValue:function(e){if(16!==e.byteLength)throw new l.Ci("IPv6 address was incorrect length");let t=[];for(let r=0;r<e.byteLength;r+=2){let n=e[r],i=e[r+1],s=`${n.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`;t.push(s)}let r=t.join(":");try{let e=new URL(`http://[${r}]`);return e.hostname.substring(1,e.hostname.length-1)}catch{throw new l.Ci(`Invalid IPv6 address "${r}"`)}},stringToValue:function(e){try{let t=new URL(`http://[${e}]`);return t.hostname.substring(1,t.hostname.length-1)}catch{throw new l.Ci(`Invalid IPv6 address "${e}"`)}},validate:e=>{if(!(0,i.w7)(e))throw new l.yI(`Invalid IPv6 address "${e}"`)}},{code:o.qc,name:"ip6zone",size:E},{code:o.Io,name:"ipcidr",size:8,bytesToValue:p("base10"),valueToBytes:g("base10")},{code:o.eI,name:"dns",size:E,resolvable:!0},{code:o.Cm,name:"dns4",size:E,resolvable:!0},{code:o.A6,name:"dns6",size:E,resolvable:!0},{code:o.Jj,name:"dnsaddr",size:E,resolvable:!0},{code:o.Zj,name:"sctp",size:16,valueToBytes:b,bytesToValue:m,validate:A},{code:o.C,name:"udt"},{code:o.SQ,name:"utp"},{code:o.DW,name:"unix",size:E,path:!0,stringToValue:e=>decodeURIComponent(e),valueToString:e=>encodeURIComponent(e)},{code:o.rx,name:"p2p",aliases:["ipfs"],size:E,bytesToValue:p("base58btc"),valueToBytes:e=>e.startsWith("Q")||e.startsWith("1")?g("base58btc")(e):s.TO.parse(e).multihash.bytes},{code:o.g8,name:"onion",size:96,bytesToValue:y,valueToBytes:function(e){let t=e.split(":");if(2!==t.length)throw Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=(0,h.s)(t[0],"base32"),n=parseInt(t[1],10);if(n<1||n>65536)throw Error("Port number is not in range(1, 65536)");let i=b(n);return(0,d.x)([r,i],r.length+i.length)}},{code:o.bi,name:"onion3",size:296,bytesToValue:y,valueToBytes:function(e){let t=e.split(":");if(2!==t.length)throw Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=c.base32.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw Error("Port number is not in range(1, 65536)");let i=b(n);return(0,d.x)([r,i],r.length+i.length)}},{code:o.ZC,name:"garlic64",size:E},{code:o.yt,name:"garlic32",size:E},{code:o.C9,name:"tls"},{code:o.XK,name:"sni",size:E},{code:o.Rc,name:"noise"},{code:o.B1,name:"quic"},{code:o.v$,name:"quic-v1"},{code:o._J,name:"webtransport"},{code:o.F9,name:"certhash",size:E,bytesToValue:(n=a.base64url,e=>n.encoder.encode(e)),valueToBytes:function(e){return v.decode(e)}},{code:o.le,name:"http"},{code:o.LH,name:"http-path",size:E,stringToValue:e=>`/${decodeURIComponent(e)}`,valueToString:e=>encodeURIComponent(e.substring(1))},{code:o.U2,name:"https"},{code:o.Hu,name:"ws"},{code:o.Qj,name:"wss"},{code:o.yZ,name:"p2p-websocket-star"},{code:o.eN,name:"p2p-stardust"},{code:o.mC,name:"p2p-webrtc-star"},{code:o.lI,name:"p2p-webrtc-direct"},{code:o.K8,name:"webrtc-direct"},{code:o.gF,name:"webrtc"},{code:o.X5,name:"p2p-circuit"},{code:o.qT,name:"memory",size:E}].forEach(e=>{P.addProtocol(e)})},2884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Reader=t.Writer=t.Coder=t.checkResultErrors=t.Result=t.WordSize=void 0;let n=r(8662);t.WordSize=32;let i=new Uint8Array(t.WordSize),s=["then"],a={},o=new WeakMap;function l(e){return o.get(e)}function c(e,t){let r=Error(`deferred error during ABI decoding triggered accessing ${e}`);throw r.error=t,r}class u extends Array{#a;constructor(...e){var t,r;let i=e[0],u=e[1],d=(e[2]||[]).slice(),h=!0;i!==a&&(u=e,d=[],h=!1),super(u.length),u.forEach((e,t)=>{this[t]=e});let f=d.reduce((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e),new Map);if(t=Object.freeze(u.map((e,t)=>{let r=d[t];return null!=r&&1===f.get(r)?r:null})),o.set(this,t),this.#a=[],null==this.#a&&this.#a,!h)return;Object.freeze(this);let p=new Proxy(this,{get:(e,t,r)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){let r=(0,n.getNumber)(t,"%index");if(r<0||r>=this.length)throw RangeError("out of result range");let i=e[r];return i instanceof Error&&c(`index ${r}`,i),i}if(s.indexOf(t)>=0)return Reflect.get(e,t,r);let i=e[t];if(i instanceof Function)return function(...t){return i.apply(this===r?e:this,t)};if(!(t in e))return e.getValue.apply(this===r?e:this,[t])}return Reflect.get(e,t,r)}});return r=l(this),o.set(p,r),p}toArray(e){let t=[];return this.forEach((r,n)=>{r instanceof Error&&c(`index ${n}`,r),e&&r instanceof u&&(r=r.toArray(e)),t.push(r)}),t}toObject(e){let t=l(this);return t.reduce((r,i,s)=>((0,n.assert)(null!=i,`value at index ${s} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),function e(t,r,n){return t.indexOf(null)>=0?r.map((t,r)=>t instanceof u?e(l(t),t,n):t):t.reduce((t,i,s)=>{let a=r.getValue(i);return i in t||(n&&a instanceof u&&(a=e(l(a),a,n)),t[i]=a),t},{})}(t,this,e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);let r=l(this),n=[],i=[];for(let s=e;s<t;s++)n.push(this[s]),i.push(r[s]);return new u(a,n,i)}filter(e,t){let r=l(this),n=[],i=[];for(let s=0;s<this.length;s++){let a=this[s];a instanceof Error&&c(`index ${s}`,a),e.call(t,a,s,this)&&(n.push(a),i.push(r[s]))}return new u(a,n,i)}map(e,t){let r=[];for(let n=0;n<this.length;n++){let i=this[n];i instanceof Error&&c(`index ${n}`,i),r.push(e.call(t,i,n,this))}return r}getValue(e){let t=l(this).indexOf(e);if(-1===t)return;let r=this[t];return r instanceof Error&&c(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,t){return new u(a,e,t)}}function d(e){let r=(0,n.toBeArray)(e);return(0,n.assert)(r.length<=t.WordSize,"value out-of-bounds","BUFFER_OVERRUN",{buffer:r,length:t.WordSize,offset:r.length}),r.length!==t.WordSize&&(r=(0,n.getBytesCopy)((0,n.concat)([i.slice(r.length%t.WordSize),r]))),r}t.Result=u,t.checkResultErrors=function(e){let t=[],r=function(e,n){if(Array.isArray(n))for(let i in n){let s=e.slice();s.push(i);try{r(s,n[i])}catch(e){t.push({path:s,error:e})}}};return r([],e),t};class h{name;type;localName;dynamic;constructor(e,t,r,i){(0,n.defineProperties)(this,{name:e,type:t,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){(0,n.assertArgument)(!1,e,this.localName,t)}}t.Coder=h;class f{#o;#l;constructor(){this.#o=[],this.#l=0}get data(){return(0,n.concat)(this.#o)}get length(){return this.#l}#c(e){return this.#o.push(e),this.#l+=e.length,e.length}appendWriter(e){return this.#c((0,n.getBytesCopy)(e.data))}writeBytes(e){let r=(0,n.getBytesCopy)(e),s=r.length%t.WordSize;return s&&(r=(0,n.getBytesCopy)((0,n.concat)([r,i.slice(s)]))),this.#c(r)}writeValue(e){return this.#c(d(e))}writeUpdatableValue(){let e=this.#o.length;return this.#o.push(i),this.#l+=t.WordSize,t=>{this.#o[e]=d(t)}}}t.Writer=f;class p{allowLoose;#o;#u;#d;#h;#f;constructor(e,t,r){(0,n.defineProperties)(this,{allowLoose:!!t}),this.#o=(0,n.getBytesCopy)(e),this.#d=0,this.#h=null,this.#f=null!=r?r:1024,this.#u=0}get data(){return(0,n.hexlify)(this.#o)}get dataLength(){return this.#o.length}get consumed(){return this.#u}get bytes(){return new Uint8Array(this.#o)}#p(e){if(this.#h)return this.#h.#p(e);this.#d+=e,(0,n.assert)(this.#f<1||this.#d<=this.#f*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#f} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:(0,n.getBytesCopy)(this.#o),offset:this.#u,length:e,info:{bytesRead:this.#d,dataLength:this.dataLength}})}#g(e,r,i){let s=Math.ceil(r/t.WordSize)*t.WordSize;return this.#u+s>this.#o.length&&(this.allowLoose&&i&&this.#u+r<=this.#o.length?s=r:(0,n.assert)(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:(0,n.getBytesCopy)(this.#o),length:this.#o.length,offset:this.#u+s})),this.#o.slice(this.#u,this.#u+s)}subReader(e){let t=new p(this.#o.slice(this.#u+e),this.allowLoose,this.#f);return t.#h=this,t}readBytes(e,t){let r=this.#g(0,e,!!t);return this.#p(e),this.#u+=r.length,r.slice(0,e)}readValue(){return(0,n.toBigInt)(this.readBytes(t.WordSize))}readIndex(){return(0,n.toNumber)(this.readBytes(t.WordSize))}}t.Reader=p},2887:(e,t,r)=>{var n=r(6890);function i(e){this.data=e,this.left=null,this.right=null,this.red=!0}function s(e){this._root=null,this._comparator=e,this.size=0}function a(e){return null!==e&&e.red}function o(e,t){var r=e.get_child(!t);return e.set_child(!t,r.get_child(t)),r.set_child(t,e),e.red=!0,r.red=!1,r}function l(e,t){return e.set_child(!t,o(e.get_child(!t),!t)),o(e,t)}i.prototype.get_child=function(e){return e?this.right:this.left},i.prototype.set_child=function(e,t){e?this.right=t:this.left=t},s.prototype=new n,s.prototype.insert=function(e){var t=!1;if(null===this._root)this._root=new i(e),t=!0,this.size++;else{var r=new i(void 0),n=0,s=0,c=null,u=r,d=null,h=this._root;for(u.right=this._root;;){if(null===h?(h=new i(e),d.set_child(n,h),t=!0,this.size++):a(h.left)&&a(h.right)&&(h.red=!0,h.left.red=!1,h.right.red=!1),a(h)&&a(d)){var f=u.right===c;h===d.get_child(s)?u.set_child(f,o(c,!s)):u.set_child(f,l(c,!s))}var p=this._comparator(h.data,e);if(0===p)break;s=n,n=p<0,null!==c&&(u=c),c=d,d=h,h=h.get_child(n)}this._root=r.right}return this._root.red=!1,t},s.prototype.remove=function(e){if(null===this._root)return!1;var t=new i(void 0),r=t;r.right=this._root;for(var n=null,s=null,c=null,u=1;null!==r.get_child(u);){var d=u;s=n,n=r,r=r.get_child(u);var h=this._comparator(e,r.data);if(u=h>0,0===h&&(c=r),!a(r)&&!a(r.get_child(u))){if(a(r.get_child(!u))){var f=o(r,u);n.set_child(d,f),n=f}else if(!a(r.get_child(!u))){var p=n.get_child(!d);if(null!==p){if(a(p.get_child(!d))||a(p.get_child(d))){var g=s.right===n;a(p.get_child(d))?s.set_child(g,l(n,d)):a(p.get_child(!d))&&s.set_child(g,o(n,d));var m=s.get_child(g);m.red=!0,r.red=!0,m.left.red=!1,m.right.red=!1}else n.red=!1,p.red=!0,r.red=!0}}}}return null!==c&&(c.data=r.data,n.set_child(n.right===r,r.get_child(null===r.left)),this.size--),this._root=t.right,null!==this._root&&(this._root.red=!1),null!==c},e.exports=s},2898:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},2909:(e,t,r)=>{"use strict";let n=r(1370),i=r(7247),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return u(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!o.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|p(e,t),n=a(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(L(e,Uint8Array)){let t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(L(e,SharedArrayBuffer)||e&&L(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);let i=function(e){if(o.isBuffer(e)){let t=0|f(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return c(e),a(e<0?0:0|f(e))}function d(e){let t=e.length<0?0:0|f(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),n}function f(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(e).length;default:if(i)return n?-1:M(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=U[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return x(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var s,a,o;return s=this,a=t,o=r,0===a&&o===s.length?n.fromByteArray(s):n.fromByteArray(s.slice(a,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(i)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){var s;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(s=r*=1)!=s&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){let s,a=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(s=r;s<o;s++)if(c(e,s)===c(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===l)return n*a}else -1!==n&&(s-=s-n),n=-1}else for(r+l>o&&(r=o-l),s=r;s>=0;s--){let r=!0;for(let n=0;n<l;n++)if(c(e,s+n)!==c(t,n)){r=!1;break}if(r)return s}return -1}function x(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],s=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,o,l;switch(a){case 1:t<128&&(s=t);break;case 2:(192&(r=e[i+1]))==128&&(l=(31&t)<<6|63&r)>127&&(s=l);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(l=(15&t)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:r=e[i+1],n=e[i+2],o=e[i+3],(192&r)==128&&(192&n)==128&&(192&o)==128&&(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&o)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function w(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function v(e,t,r,n,i,s){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function A(e,t,r,n,i){C(t,n,i,e,r,7);let s=Number(t&BigInt(0xffffffff));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function E(e,t,r,n,i){C(t,n,i,e,r,7);let s=Number(t&BigInt(0xffffffff));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let a=Number(t>>BigInt(32)&BigInt(0xffffffff));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function k(e,t,r,n,i,s){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function P(e,t,r,n,s){return t*=1,r>>>=0,s||k(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function S(e,t,r,n,s){return t*=1,r>>>=0,s||k(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(c(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(L(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),L(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(L(t,Uint8Array))i+t.length>n.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(o.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?x(this,0,e):g.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(o.prototype[s]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(L(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let s=i-n,a=r-t,l=Math.min(s,a),c=this.slice(n,i),u=e.slice(t,r);for(let e=0;e<l;++e)if(c[e]!==u[e]){s=c[e],a=u[e];break}return s<a?-1:+(a<s)},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){var i,s,a,o,l,c,u,d;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let h=this.length-t;if((void 0===r||r>h)&&(r=h),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let f=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;let a=t.length;for(n>a/2&&(n=a/2),i=0;i<n;++i){var o;let n=parseInt(t.substr(2*i,2),16);if((o=n)!=o)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,s=r,D(M(e,this.length-i),this,i,s);case"ascii":case"latin1":case"binary":return a=t,o=r,D(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,a,o);case"base64":return l=t,c=r,D(B(e),this,l,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=t,d=r,D(function(e,t){let r,n;let i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-u),this,u,d);default:if(f)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),f=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=F(function(e){O(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+0x1000000*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+0x1000000*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),o.prototype.readBigUInt64BE=F(function(e){O(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&R(e,this.length-8);let n=0x1000000*t+65536*this[++e]+256*this[++e]+this[++e],i=0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},o.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=F(function(e){O(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+0x1000000*this[++e])}),o.prototype.readBigInt64BE=F(function(e){O(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&R(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(0x1000000*this[++e]+65536*this[++e]+256*this[++e]+r)}),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),i.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),i.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),i.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),i.read(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;v(this,e,t,r,n,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;v(this,e,t,r,n,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=F(function(e,t=0){return A(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=F(function(e,t=0){return E(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);v(this,e,t,r,n-1,-n)}let i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){let n=Math.pow(2,8*r-1);v(this,e,t,r,n-1,-n)}let i=r-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=F(function(e,t=0){return A(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=F(function(e,t=0){return E(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},o.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let s=o.isBuffer(e)?e:o.from(e,n),a=s.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};let I={};function T(e,t,r){I[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function _(e){let t="",r=e.length,n=+("-"===e[0]);for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function C(e,t,r,n,i,s){if(e>r||e<t){let n;let i="bigint"==typeof t?"n":"";throw n=s>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(s+1)*8}${i}`:`>= -(2${i} ** ${(s+1)*8-1}${i}) and < 2 ** ${(s+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new I.ERR_OUT_OF_RANGE("value",n,e)}O(i,"offset"),(void 0===n[i]||void 0===n[i+s])&&R(i,n.length-(s+1))}function O(e,t){if("number"!=typeof e)throw new I.ERR_INVALID_ARG_TYPE(t,"number",e)}function R(e,t,r){if(Math.floor(e)!==e)throw O(e,r),new I.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new I.ERR_BUFFER_OUT_OF_BOUNDS;throw new I.ERR_OUT_OF_RANGE(r||"offset",`>= ${+!!r} and <= ${t}`,e)}T("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),T("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),T("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>0x100000000?i=_(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=_(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let N=/[^+/0-9A-Za-z-_]/g;function M(e,t){let r;t=t||1/0;let n=e.length,i=null,s=[];for(let a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319||a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function B(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let U=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function F(e){return"undefined"==typeof BigInt?j:e}function j(){throw Error("BigInt not supported")}},2923:(e,t,r)=>{"use strict";r.d(t,{P:()=>n});let n=Symbol.for("@libp2p/peer-discovery")},2931:(e,t,r)=>{"use strict";r.d(t,{f:()=>e_});var n,i,s=r(4892),a=r(3204),o=r(9827),l=r(1680),c=r(4195),u=r(6844),d=r(9608);function h(){let e=(0,d.A)(),t=!1;return{sink:async r=>{if(t)throw Error("already piped");t=!0,e.resolve(r)},source:async function*(){let t=await e.promise;yield*t}()}}var f=r(4113),p=r(1970);let g=!!globalThis.process?.env?.DUMP_SESSION_KEYS;function m(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function b(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function y(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function x(e,...t){if(!m(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function w(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function v(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function A(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}let E=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],k=((e,t)=>t.toString(16).padStart(2,"0"),{_0:48,_9:57,A:65,F:70,a:97,f:102});function P(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e);else if(m(e))e=T(e);else throw Error("Uint8Array expected, got "+typeof e);return e}function S(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw Error("invalid output length, expected "+e+", got: "+t.length);if(r&&t.byteOffset%4!=0)throw Error("invalid output, must be aligned");return t}function I(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(0xffffffff),a=Number(r>>i&s),o=Number(r&s),l=4*!!n,c=4*!n;e.setUint32(t+l,a,n),e.setUint32(t+c,o,n)}function T(e){return Uint8Array.from(e)}let _=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),C=_("expand 16-byte k"),O=_("expand 32-byte k"),R=v(C),N=v(O);function M(e,t){return e<<t|e>>>32-t}function B(e){return e.byteOffset%4==0}let D=0x100000000-1,L=new Uint32Array;function U(e,t){let{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:a}=function(e,t){if(null==t||"object"!=typeof t)throw Error("options must be defined");return Object.assign(e,t)}({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t);if("function"!=typeof e)throw Error("core must be a function");return y(i),y(a),b(s),b(r),(t,o,l,c,u=0)=>{let d,h;x(t),x(o),x(l);let f=l.length;if(void 0===c&&(c=new Uint8Array(f)),x(c),y(u),u<0||u>=D)throw Error("arx: counter overflow");if(c.length<f)throw Error(`arx: output (${c.length}) is shorter than data (${f})`);let p=[],g=t.length;if(32===g)p.push(d=T(t)),h=N;else if(16===g&&r)(d=new Uint8Array(32)).set(t),d.set(t,16),h=R,p.push(d);else throw Error(`arx: invalid 32-byte key, got length=${g}`);B(o)||p.push(o=T(o));let m=v(d);if(n){if(24!==o.length)throw Error("arx: extended nonce must be 24 bytes");n(h,m,v(o.subarray(0,16)),m),o=o.subarray(16)}let b=16-i;if(b!==o.length)throw Error(`arx: nonce must be ${b} or 16 bytes`);if(12!==b){let e=new Uint8Array(12);e.set(o,s?0:12-o.length),o=e,p.push(o)}return function(e,t,r,n,i,s,a,o){let l=i.length,c=new Uint8Array(64),u=v(c),d=B(i)&&B(s),h=d?v(i):L,f=d?v(s):L;for(let p=0;p<l;a++){if(e(t,r,n,u,a,o),a>=D)throw Error("arx: counter overflow");let g=Math.min(64,l-p);if(d&&64===g){let e=p/4;if(p%4!=0)throw Error("arx: invalid block position");for(let t=0,r;t<16;t++)f[r=e+t]=h[r]^u[t];p+=64;continue}for(let e=0,t;e<g;e++)s[t=p+e]=i[t]^c[e];p+=g}}(e,h,m,v(o),l,c,u,a),A(...p),c}}let F=(e,t)=>255&e[t++]|(255&e[t++])<<8;class j{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,x(e=P(e),32);let t=F(e,0),r=F(e,2),n=F(e,4),i=F(e,6),s=F(e,8),a=F(e,10),o=F(e,12),l=F(e,14);this.r[0]=8191&t,this.r[1]=(t>>>13|r<<3)&8191,this.r[2]=(r>>>10|n<<6)&7939,this.r[3]=(n>>>7|i<<9)&8191,this.r[4]=(i>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|a<<2)&8191,this.r[7]=(a>>>11|o<<5)&8065,this.r[8]=(o>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let t=0;t<8;t++)this.pad[t]=F(e,16+2*t)}process(e,t,r=!1){let{h:n,r:i}=this,s=i[0],a=i[1],o=i[2],l=i[3],c=i[4],u=i[5],d=i[6],h=i[7],f=i[8],p=i[9],g=F(e,t+0),m=F(e,t+2),b=F(e,t+4),y=F(e,t+6),x=F(e,t+8),w=F(e,t+10),v=F(e,t+12),A=F(e,t+14),E=n[0]+(8191&g),k=n[1]+((g>>>13|m<<3)&8191),P=n[2]+((m>>>10|b<<6)&8191),S=n[3]+((b>>>7|y<<9)&8191),I=n[4]+((y>>>4|x<<12)&8191),T=n[5]+(x>>>1&8191),_=n[6]+((x>>>14|w<<2)&8191),C=n[7]+((w>>>11|v<<5)&8191),O=n[8]+((v>>>8|A<<8)&8191),R=n[9]+(A>>>5|2048*!r),N=0,M=0+E*s+5*p*k+5*f*P+5*h*S+5*d*I;N=M>>>13,M&=8191,M+=5*u*T+5*c*_+5*l*C+5*o*O+5*a*R,N+=M>>>13,M&=8191;let B=N+E*a+k*s+5*p*P+5*f*S+5*h*I;N=B>>>13,B&=8191,B+=5*d*T+5*u*_+5*c*C+5*l*O+5*o*R,N+=B>>>13,B&=8191;let D=N+E*o+k*a+P*s+5*p*S+5*f*I;N=D>>>13,D&=8191,D+=5*h*T+5*d*_+5*u*C+5*c*O+5*l*R,N+=D>>>13,D&=8191;let L=N+E*l+k*o+P*a+S*s+5*p*I;N=L>>>13,L&=8191,L+=5*f*T+5*h*_+5*d*C+5*u*O+5*c*R,N+=L>>>13,L&=8191;let U=N+E*c+k*l+P*o+S*a+I*s;N=U>>>13,U&=8191,U+=5*p*T+5*f*_+5*h*C+5*d*O+5*u*R,N+=U>>>13,U&=8191;let j=N+E*u+k*c+P*l+S*o+I*a;N=j>>>13,j&=8191,j+=T*s+5*p*_+5*f*C+5*h*O+5*d*R,N+=j>>>13,j&=8191;let z=N+E*d+k*u+P*c+S*l+I*o;N=z>>>13,z&=8191,z+=T*a+_*s+5*p*C+5*f*O+5*h*R,N+=z>>>13,z&=8191;let H=N+E*h+k*d+P*u+S*c+I*l;N=H>>>13,H&=8191,H+=T*o+_*a+C*s+5*p*O+5*f*R,N+=H>>>13,H&=8191;let G=N+E*f+k*h+P*d+S*u+I*c;N=G>>>13,G&=8191,G+=T*l+_*o+C*a+O*s+5*p*R,N+=G>>>13,G&=8191;let $=N+E*p+k*f+P*h+S*d+I*u;N=$>>>13,$&=8191,$+=T*c+_*l+C*o+O*a+R*s,N+=$>>>13,$&=8191,M=8191&(N=(N=(N<<2)+N|0)+M|0),N>>>=13,B+=N,n[0]=M,n[1]=B,n[2]=D,n[3]=L,n[4]=U,n[5]=j,n[6]=z,n[7]=H,n[8]=G,n[9]=$}finalize(){let{h:e,pad:t}=this,r=new Uint16Array(10),n=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=n,n=e[t]>>>13,e[t]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+n,n=r[t]>>>13,r[t]&=8191;r[9]-=8192;let i=(1^n)-1;for(let e=0;e<10;e++)r[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|r[t];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;A(r)}update(e){w(this),x(e=P(e));let{buffer:t,blockLen:r}=this,n=e.length;for(let i=0;i<n;){let s=Math.min(r-this.pos,n-i);if(s===r){for(;r<=n-i;i+=r)this.process(e,i);continue}t.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0)}return this}destroy(){A(this.h,this.r,this.buffer,this.pad)}digestInto(e){w(this),function(e,t){x(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;let{buffer:t,h:r}=this,{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=r[t]>>>0,e[i++]=r[t]>>>8;return e}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}}let z=function(e){let t=(t,r)=>e(r).update(P(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}(e=>new j(e));function H(e,t,r,n,i,s=20){let a=e[0],o=e[1],l=e[2],c=e[3],u=t[0],d=t[1],h=t[2],f=t[3],p=t[4],g=t[5],m=t[6],b=t[7],y=r[0],x=r[1],w=r[2],v=a,A=o,E=l,k=c,P=u,S=d,I=h,T=f,_=p,C=g,O=m,R=b,N=i,B=y,D=x,L=w;for(let e=0;e<s;e+=2)_=_+(N=M(N^(v=v+P|0),16))|0,v=v+(P=M(P^_,12))|0,_=_+(N=M(N^v,8))|0,P=M(P^_,7),C=C+(B=M(B^(A=A+S|0),16))|0,A=A+(S=M(S^C,12))|0,C=C+(B=M(B^A,8))|0,S=M(S^C,7),O=O+(D=M(D^(E=E+I|0),16))|0,E=E+(I=M(I^O,12))|0,O=O+(D=M(D^E,8))|0,I=M(I^O,7),R=R+(L=M(L^(k=k+T|0),16))|0,k=k+(T=M(T^R,12))|0,R=R+(L=M(L^k,8))|0,T=M(T^R,7),O=O+(L=M(L^(v=v+S|0),16))|0,v=v+(S=M(S^O,12))|0,O=O+(L=M(L^v,8))|0,S=M(S^O,7),R=R+(N=M(N^(A=A+I|0),16))|0,A=A+(I=M(I^R,12))|0,R=R+(N=M(N^A,8))|0,I=M(I^R,7),_=_+(B=M(B^(E=E+T|0),16))|0,E=E+(T=M(T^_,12))|0,_=_+(B=M(B^E,8))|0,T=M(T^_,7),C=C+(D=M(D^(k=k+P|0),16))|0,k=k+(P=M(P^C,12))|0,C=C+(D=M(D^k,8))|0,P=M(P^C,7);let U=0;n[U++]=a+v|0,n[U++]=o+A|0,n[U++]=l+E|0,n[U++]=c+k|0,n[U++]=u+P|0,n[U++]=d+S|0,n[U++]=h+I|0,n[U++]=f+T|0,n[U++]=p+_|0,n[U++]=g+C|0,n[U++]=m+O|0,n[U++]=b+R|0,n[U++]=i+N|0,n[U++]=y+B|0,n[U++]=x+D|0,n[U++]=w+L|0}let G=U(H,{counterRight:!1,counterLength:4,allowShortKeys:!1}),$=U(H,{counterRight:!1,counterLength:8,extendNonceFn:function(e,t,r,n){let i=e[0],s=e[1],a=e[2],o=e[3],l=t[0],c=t[1],u=t[2],d=t[3],h=t[4],f=t[5],p=t[6],g=t[7],m=r[0],b=r[1],y=r[2],x=r[3];for(let e=0;e<20;e+=2)h=h+(m=M(m^(i=i+l|0),16))|0,i=i+(l=M(l^h,12))|0,h=h+(m=M(m^i,8))|0,l=M(l^h,7),f=f+(b=M(b^(s=s+c|0),16))|0,s=s+(c=M(c^f,12))|0,f=f+(b=M(b^s,8))|0,c=M(c^f,7),p=p+(y=M(y^(a=a+u|0),16))|0,a=a+(u=M(u^p,12))|0,p=p+(y=M(y^a,8))|0,u=M(u^p,7),g=g+(x=M(x^(o=o+d|0),16))|0,o=o+(d=M(d^g,12))|0,g=g+(x=M(x^o,8))|0,d=M(d^g,7),p=p+(x=M(x^(i=i+c|0),16))|0,i=i+(c=M(c^p,12))|0,p=p+(x=M(x^i,8))|0,c=M(c^p,7),g=g+(m=M(m^(s=s+u|0),16))|0,s=s+(u=M(u^g,12))|0,g=g+(m=M(m^s,8))|0,u=M(u^g,7),h=h+(b=M(b^(a=a+d|0),16))|0,a=a+(d=M(d^h,12))|0,h=h+(b=M(b^a,8))|0,d=M(d^h,7),f=f+(y=M(y^(o=o+l|0),16))|0,o=o+(l=M(l^f,12))|0,f=f+(y=M(y^o,8))|0,l=M(l^f,7);let w=0;n[w++]=i,n[w++]=s,n[w++]=a,n[w++]=o,n[w++]=m,n[w++]=b,n[w++]=y,n[w++]=x},allowShortKeys:!1}),V=new Uint8Array(16),q=(e,t)=>{e.update(t);let r=t.length%16;r&&e.update(V.subarray(r))},K=new Uint8Array(32);function W(e,t,r,n,i){let s=e(t,r,K),a=z.create(s);i&&q(a,i),q(a,n);let o=function(e,t,r){b(r);let n=new Uint8Array(16),i=new DataView(n.buffer,n.byteOffset,n.byteLength);return I(i,0,BigInt(t),r),I(i,8,BigInt(e),r),n}(n.length,i?i.length:0,!0);a.update(o);let l=a.digest();return A(s,o),l}let Q=e=>(t,r,n)=>({encrypt(i,s){let a=i.length;(s=S(a+16,s,!1)).set(i);let o=s.subarray(0,-16);e(t,r,o,o,1);let l=W(e,t,r,o,n);return s.set(l,a),A(l),s},decrypt(i,s){s=S(i.length-16,s,!1);let a=i.subarray(0,-16),o=i.subarray(-16),l=W(e,t,r,a,n);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(o,l))throw Error("invalid tag");return s.set(i.subarray(0,-16)),e(t,r,s,s,1),A(l),s}}),Z=((e,t)=>{function r(n,...i){if(x(n),!E)throw Error("Non little-endian hardware is not yet supported");if(void 0!==e.nonceLength){let t=i[0];if(!t)throw Error("nonce / iv required");e.varSizeNonce?x(t):x(t,e.nonceLength)}let s=e.tagLength;s&&void 0!==i[1]&&x(i[1]);let a=t(n,...i),o=(e,t)=>{if(void 0!==t){if(2!==e)throw Error("cipher output not supported");x(t)}},l=!1;return{encrypt(e,t){if(l)throw Error("cannot encrypt() twice with same key + nonce");return l=!0,x(e),o(a.encrypt.length,t),a.encrypt(e,t)},decrypt(e,t){if(x(e),s&&e.length<s)throw Error("invalid ciphertext length: smaller than tagLength="+s);return o(a.decrypt.length,t),a.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},Q(G));Q($);var J=r(3666),Y=r(5439),X=r(3084);let ee=Uint8Array.from([0]),et=Uint8Array.of();var er=r(5003);let en={hashSHA256:e=>(0,er.sc)(e.subarray()),getHKDF(e,t){var r,n;let i=(r=er.sc,n=e,(0,X.sd)(r),void 0===n&&(n=new Uint8Array(r.outputLen)),(0,Y.w)(r,(0,X.ZJ)(n),(0,X.ZJ)(t))),s=function(e,t,r,n=32){(0,X.sd)(e),(0,X.Fe)(n);let i=e.outputLen;if(n>255*i)throw Error("Length should be <= 255*HashLen");let s=Math.ceil(n/i);void 0===r&&(r=et);let a=new Uint8Array(s*i),o=Y.w.create(e,t),l=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let e=0;e<s;e++)ee[0]=e+1,l.update(0===e?et:c).update(r).update(ee).digestInto(c),a.set(c,i*e),o._cloneInto(l);return o.destroy(),l.destroy(),(0,X.uH)(c,ee),a.slice(0,n)}(er.sc,i,void 0,96),a=s.subarray(0,32);return[a,s.subarray(32,64),s.subarray(64,96)]},generateX25519KeyPair(){let e=J.TU.utils.randomPrivateKey();return{publicKey:J.TU.getPublicKey(e),privateKey:e}},generateX25519KeyPairFromSeed:e=>({publicKey:J.TU.getPublicKey(e),privateKey:e}),generateX25519SharedKey:(e,t)=>J.TU.getSharedSecret(e.subarray(),t.subarray()),chaCha20Poly1305Encrypt:(e,t,r,n)=>Z(n,t,r).encrypt(e.subarray()),chaCha20Poly1305Decrypt:(e,t,r,n,i)=>Z(n,t,r).decrypt(e.subarray(),i)},ei=e=>{let t=(0,p.K)(2);return t[0]=e>>8,t[1]=e,t};ei.bytes=2;let es=e=>{if(e.length<2)throw RangeError("Could not decode int16BE");if(e instanceof Uint8Array){let t;return 0+(e[0]<<8)+e[1]}return e.getUint16(0)};es.bytes=2;var ea=r(6054);function eo(e,t){t.enabled&&g&&(e?(t(`LOCAL_STATIC_PUBLIC_KEY ${(0,ea.d)(e.publicKey,"hex")}`),t(`LOCAL_STATIC_PRIVATE_KEY ${(0,ea.d)(e.privateKey,"hex")}`)):t("Missing local static keys."))}function el(e,t){t.enabled&&g&&(e?(t(`LOCAL_PUBLIC_EPHEMERAL_KEY ${(0,ea.d)(e.publicKey,"hex")}`),t(`LOCAL_PRIVATE_EPHEMERAL_KEY ${(0,ea.d)(e.privateKey,"hex")}`)):t("Missing local ephemeral keys."))}function ec(e,t){t.enabled&&g&&t(e?`REMOTE_EPHEMERAL_PUBLIC_KEY ${(0,ea.d)(e.subarray(),"hex")}`:"Missing remote ephemeral keys.")}function eu(e,t,r){r.enabled&&g&&(r(`CIPHER_STATE_1 ${e.n.getUint64()} ${e.k&&(0,ea.d)(e.k,"hex")}`),r(`CIPHER_STATE_2 ${t.n.getUint64()} ${t.k&&(0,ea.d)(t.k,"hex")}`))}var ed=r(2830),eh=r(8635);class ef extends Error{code;constructor(e="Invalid crypto exchange"){super(e),this.code=ef.code}static code="ERR_INVALID_CRYPTO_EXCHANGE"}class ep{n;bytes;view;constructor(e=0){this.n=e,this.bytes=(0,p.c)(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>0xffffffff)throw Error("Cipherstate has reached maximum n, a new handshake must be performed")}}let eg=(0,p.c)(0);class em{k;n;crypto;constructor(e,t,r=0){this.crypto=e,this.k=t,this.n=new ep(r)}hasKey(){return!!this.k}encryptWithAd(e,t){if(!this.hasKey())return t;this.n.assertValue();let r=this.crypto.encrypt(t,this.n.getBytes(),e,this.k);return this.n.increment(),r}decryptWithAd(e,t,r){if(!this.hasKey())return t;this.n.assertValue();let n=this.crypto.decrypt(t,this.n.getBytes(),e,this.k,r);return this.n.increment(),n}}class eb{cs;ck;h;crypto;constructor(e,t){this.crypto=e;let r=(0,eh.sH)(t,"utf-8");this.h=function(e,t){if(!(t.length<=32))return e.hash(t);{let e=(0,p.c)(32);return e.set(t),e}}(e,r),this.ck=this.h,this.cs=new em(e)}mixKey(e){let[t,r]=this.crypto.hkdf(this.ck,e);this.ck=t,this.cs=new em(this.crypto,r)}mixHash(e){this.h=this.crypto.hash(new ed.I(this.h,e))}encryptAndHash(e){let t=this.cs.encryptWithAd(this.h,e);return this.mixHash(t),t}decryptAndHash(e){let t=this.cs.decryptWithAd(this.h,e);return this.mixHash(e),t}split(){let[e,t]=this.crypto.hkdf(this.ck,eg);return[new em(this.crypto,e),new em(this.crypto,t)]}}class ey{ss;s;e;rs;re;initiator;crypto;constructor(e){let{crypto:t,protocolName:r,prologue:n,initiator:i,s,e:a,rs:o,re:l}=e;this.crypto=t,this.ss=new eb(t,r),this.ss.mixHash(n),this.initiator=i,this.s=s,this.e=a,this.rs=o,this.re=l}writeE(){if(this.e)throw Error("ephemeral keypair is already set");let e=this.crypto.generateKeypair();return this.ss.mixHash(e.publicKey),this.e=e,e.publicKey}writeS(){if(!this.s)throw Error("static keypair is not set");return this.ss.encryptAndHash(this.s.publicKey)}writeEE(){if(!this.e)throw Error("ephemeral keypair is not set");if(!this.re)throw Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.re))}writeES(){if(this.initiator){if(!this.e)throw Error("ephemeral keypair is not set");if(!this.rs)throw Error("remote static public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.rs))}else{if(!this.s)throw Error("static keypair is not set");if(!this.re)throw Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.s,this.re))}}writeSE(){if(this.initiator){if(!this.s)throw Error("static keypair is not set");if(!this.re)throw Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.s,this.re))}else{if(!this.e)throw Error("ephemeral keypair is not set");if(!this.rs)throw Error("remote static public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.rs))}}readE(e,t=0){if(this.re)throw Error("remote ephemeral public key is already set");if(e.byteLength<t+32)throw Error("message is not long enough");this.re=e.sublist(t,t+32),this.ss.mixHash(this.re)}readS(e,t=0){if(this.rs)throw Error("remote static public key is already set");let r=32+16*!!this.ss.cs.hasKey();if(e.byteLength<t+r)throw Error("message is not long enough");let n=e.sublist(t,t+r);return this.rs=this.ss.decryptAndHash(n),r}readEE(){this.writeEE()}readES(){this.writeES()}readSE(){this.writeSE()}}class ex extends ey{writeMessageA(e){return new ed.I(this.writeE(),this.ss.encryptAndHash(e))}writeMessageB(e){let t=this.writeE();this.writeEE();let r=this.writeS();return this.writeES(),new ed.I(t,r,this.ss.encryptAndHash(e))}writeMessageC(e){let t=this.writeS();return this.writeSE(),new ed.I(t,this.ss.encryptAndHash(e))}readMessageA(e){try{return this.readE(e),this.ss.decryptAndHash(e.sublist(32))}catch(e){throw new ef(`handshake stage 0 validation fail: ${e.message}`)}}readMessageB(e){try{this.readE(e),this.readEE();let t=this.readS(e,32);return this.readES(),this.ss.decryptAndHash(e.sublist(32+t))}catch(e){throw new ef(`handshake stage 1 validation fail: ${e.message}`)}}readMessageC(e){try{let t=this.readS(e);return this.readSE(),this.ss.decryptAndHash(e.sublist(t))}catch(e){throw new ef(`handshake stage 2 validation fail: ${e.message}`)}}}var ew=r(7797),ev=r(9865),eA=r(6038);async function eE(e,t,r){let n=await e.sign(eP(t));return i.encode({identityKey:(0,s.Ve)(e.publicKey),identitySig:n,extensions:r})}async function ek(e,t,r){try{let n=i.decode(e),a=(0,s.EZ)(n.identityKey);if(r?.equals(a)===!1)throw Error(`Payload identity key ${a} does not match expected remote identity key ${r}`);if(!t)throw Error("Remote static does not exist");let o=eP(t);if(!await a.verify(o,n.identitySig))throw Error("Invalid payload signature");return n}catch(e){throw new o.aS(e.message)}}function eP(e){let t=(0,ev.s)("noise-libp2p-static-key:");return e instanceof Uint8Array?(0,ew.x)([t,e],t.length+e.length):(e.prepend(t),e)}async function eS(e,t){var r,n;let{log:i,connection:s,crypto:a,privateKey:o,prologue:l,s:c,remoteIdentityKey:u,extensions:d}=e,h=await eE(o,c.publicKey,d),f=new ex({crypto:a,protocolName:"Noise_XX_25519_ChaChaPoly_SHA256",initiator:!0,prologue:l,s:c});eo(f.s,i),i.trace("Stage 0 - Initiator starting to send first message."),await s.write(f.writeMessageA(eg),t),i.trace("Stage 0 - Initiator finished sending first message."),el(f.e,i),i.trace("Stage 1 - Initiator waiting to receive first message from responder...");let p=f.readMessageB(await s.read(t));i.trace("Stage 1 - Initiator received the message."),ec(f.re,i),r=f.rs,(n=i).enabled&&g&&n(r?`REMOTE_STATIC_PUBLIC_KEY ${(0,ea.d)(r.subarray(),"hex")}`:"Missing remote static public key."),i.trace("Initiator going to check remote's signature...");let m=await ek(p,f.rs,u);i.trace("All good with the signature!"),i.trace("Stage 2 - Initiator sending third handshake message."),await s.write(f.writeMessageC(h),t),i.trace("Stage 2 - Initiator sent message with signed payload.");let[b,y]=f.ss.split();return eu(b,y,i),{payload:m,encrypt:e=>b.encryptWithAd(eg,e),decrypt:(e,t)=>y.decryptWithAd(eg,e,t)}}async function eI(e,t){let{log:r,connection:n,crypto:i,privateKey:s,prologue:a,s:o,remoteIdentityKey:l,extensions:c}=e,u=await eE(s,o.publicKey,c),d=new ex({crypto:i,protocolName:"Noise_XX_25519_ChaChaPoly_SHA256",initiator:!1,prologue:a,s:o});eo(d.s,r),r.trace("Stage 0 - Responder waiting to receive first message."),d.readMessageA(await n.read(t)),r.trace("Stage 0 - Responder received first message."),ec(d.re,r),r.trace("Stage 1 - Responder sending out first message with signed payload and static key."),await n.write(d.writeMessageB(u),t),r.trace("Stage 1 - Responder sent the second handshake message with signed payload."),el(d.e,r),r.trace("Stage 2 - Responder waiting for third handshake message...");let h=d.readMessageC(await n.read(t));r.trace("Stage 2 - Responder received the message, finished handshake.");let f=await ek(h,d.rs,l),[p,g]=d.ss.split();return eu(p,g,r),{payload:f,encrypt:e=>g.encryptWithAd(eg,e),decrypt:(e,t)=>p.decryptWithAd(eg,e,t)}}!function(e){let t;e.codec=()=>(null==t&&(t=(0,eA.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.webtransportCerthashes)for(let r of e.webtransportCerthashes)t.uint32(10),t.bytes(r);if(null!=e.streamMuxers)for(let r of e.streamMuxers)t.uint32(18),t.string(r);!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={webtransportCerthashes:[],streamMuxers:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:if(r.limits?.webtransportCerthashes!=null&&n.webtransportCerthashes.length===r.limits.webtransportCerthashes)throw new eA.zH('Decode error - map field "webtransportCerthashes" had too many elements');n.webtransportCerthashes.push(e.bytes());break;case 2:if(r.limits?.streamMuxers!=null&&n.streamMuxers.length===r.limits.streamMuxers)throw new eA.zH('Decode error - map field "streamMuxers" had too many elements');n.streamMuxers.push(e.string());break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,eA.mH)(t,e.codec()),e.decode=(t,r)=>(0,eA.Y8)(t,e.codec(),r)}(n||(n={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,eA.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.identityKey&&e.identityKey.byteLength>0&&(t.uint32(10),t.bytes(e.identityKey)),null!=e.identitySig&&e.identitySig.byteLength>0&&(t.uint32(18),t.bytes(e.identitySig)),null!=e.extensions&&(t.uint32(34),n.codec().encode(e.extensions,t)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let i={identityKey:(0,p.c)(0),identitySig:(0,p.c)(0)},s=null==t?e.len:e.pos+t;for(;e.pos<s;){let t=e.uint32();switch(t>>>3){case 1:i.identityKey=e.bytes();break;case 2:i.identitySig=e.bytes();break;case 4:i.extensions=n.codec().decode(e,e.uint32(),{limits:r.limits?.extensions});break;default:e.skipType(7&t)}}return i})),t),e.encode=t=>(0,eA.mH)(t,e.codec()),e.decode=(t,r)=>(0,eA.Y8)(t,e.codec(),r)}(i||(i={}));class eT{protocol="/noise";crypto;prologue;staticKey;extensions;metrics;components;constructor(e,t={}){let{staticNoiseKey:r,extensions:n,crypto:i,prologueBytes:s}=t,{metrics:a}=e;this.components=e;let o=i??en;this.crypto=function(e){return{generateKeypair:e.generateX25519KeyPair,dh:(t,r)=>e.generateX25519SharedKey(t.privateKey,r).subarray(0,32),encrypt:e.chaCha20Poly1305Encrypt,decrypt:e.chaCha20Poly1305Decrypt,hash:e.hashSHA256,hkdf:e.getHKDF}}(o),this.extensions={webtransportCerthashes:[],...n},this.metrics=a?function(e){return{xxHandshakeSuccesses:e.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:e.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:e.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:e.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:e.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}(a):void 0,r?this.staticKey=o.generateX25519KeyPairFromSeed(r):this.staticKey=o.generateX25519KeyPair(),this.prologue=s??(0,p.c)(0)}[Symbol.toStringTag]="@chainsafe/libp2p-noise";[a.Ch]=["@libp2p/connection-encryption","@chainsafe/libp2p-noise"];async secureOutbound(e,t){let r=(0,u.V)(e,{lengthEncoder:ei,lengthDecoder:es,maxDataLength:65535}),n=await this.performHandshakeInitiator(r,this.components.privateKey,t?.remotePeer?.publicKey,t),i=await this.createSecureConnection(r,n);e.source=i.source,e.sink=i.sink;let a=(0,s.EZ)(n.payload.identityKey);return{conn:e,remoteExtensions:n.payload.extensions,remotePeer:(0,l.sR)(a),streamMuxer:t?.skipStreamMuxerNegotiation===!0?void 0:this.getStreamMuxer(n.payload.extensions?.streamMuxers)}}getStreamMuxer(e){if(null==e||0===e.length)return;let t=this.components.upgrader.getStreamMuxers();if(null!=t)for(let r of e){let e=t.get(r);if(null!=e)return e}if(e.length)throw new o.c6("Early muxer negotiation was requested but the initiator and responder had no common muxers")}async secureInbound(e,t){let r=(0,u.V)(e,{lengthEncoder:ei,lengthDecoder:es,maxDataLength:65535}),n=await this.performHandshakeResponder(r,this.components.privateKey,t?.remotePeer?.publicKey,t),i=await this.createSecureConnection(r,n);e.source=i.source,e.sink=i.sink;let a=(0,s.EZ)(n.payload.identityKey);return{conn:e,remoteExtensions:n.payload.extensions,remotePeer:(0,l.sR)(a),streamMuxer:t?.skipStreamMuxerNegotiation===!0?void 0:this.getStreamMuxer(n.payload.extensions?.streamMuxers)}}async performHandshakeInitiator(e,t,r,n){let i;let s=n?.skipStreamMuxerNegotiation===!0?[]:[...this.components.upgrader.getStreamMuxers().keys()];try{i=await eS({connection:e,privateKey:t,remoteIdentityKey:r,log:this.components.logger.forComponent("libp2p:noise:xxhandshake"),crypto:this.crypto,prologue:this.prologue,s:this.staticKey,extensions:{streamMuxers:s,webtransportCerthashes:[],...this.extensions}},n),this.metrics?.xxHandshakeSuccesses.increment()}catch(e){throw this.metrics?.xxHandshakeErrors.increment(),e}return i}async performHandshakeResponder(e,t,r,n){let i;let s=n?.skipStreamMuxerNegotiation===!0?[]:[...this.components.upgrader.getStreamMuxers().keys()];try{i=await eI({connection:e,privateKey:t,remoteIdentityKey:r,log:this.components.logger.forComponent("libp2p:noise:xxhandshake"),crypto:this.crypto,prologue:this.prologue,s:this.staticKey,extensions:{streamMuxers:s,webtransportCerthashes:[],...this.extensions}},n),this.metrics?.xxHandshakeSuccesses.increment()}catch(e){throw this.metrics?.xxHandshakeErrors.increment(),e}return i}async createSecureConnection(e,t){var r,n;let[i,s]=function(){let e=h(),t=h();return[{source:e.source,sink:t.sink},{source:t.source,sink:e.sink}]}(),a=e.unwrap();return await (0,f.F)(i,(r=this.metrics,async function*(e){for await(let n of e)for(let e=0;e<n.length;e+=65519){let i,s=e+65519;s>n.length&&(s=n.length),i=n instanceof Uint8Array?t.encrypt(n.subarray(e,s)):t.encrypt(n.sublist(e,s)),r?.encryptedPackets.increment(),yield new ed.I(ei(i.byteLength),i)}}),a,e=>(0,c.D)(e,{lengthDecoder:es}),(n=this.metrics,async function*(e){for await(let r of e)for(let e=0;e<r.length;e+=65535){let i=e+65535;if(i>r.length&&(i=r.length),i-16<e)throw Error("Invalid chunk");let s=r.sublist(e,i),a=r.subarray(e,i-16);try{let e=t.decrypt(s,a);n?.decryptedPackets.increment(),yield e}catch(e){throw n?.decryptErrors.increment(),e}}}),i),s}}function e_(e={}){return t=>new eT(t,e)}},2963:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeOwl=t.decode=void 0;let n=r(8662),i=" !#$%&'()*+,-./<=>?@[]^_`{|}~",s=/^[a-z]*$/i;function a(e,t){let r=97;return e.reduce((e,n)=>(n===t?r++:n.match(s)?e.push(String.fromCharCode(r)+n):(r=97,e.push(n)),e),[])}function o(e,t){for(let r=i.length-1;r>=0;r--)e=e.split(i[r]).join(t.substring(2*r,2*r+2));let r=[],n=e.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(e,t,n,i)=>{if(n)for(let e=parseInt(n);e>=0;e--)r.push(";");else r.push(t.toLowerCase());return""});if(n)throw Error(`leftovers: ${JSON.stringify(n)}`);return a(a(r,";"),":")}t.decode=o,t.decodeOwl=function(e){return(0,n.assertArgument)("0"===e[0],"unsupported auwl data","data",e),o(e.substring(1+2*i.length),e.substring(1,1+2*i.length))}},2984:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=t.recoverAddress=t.computeAddress=t.authorizationify=t.accessListify=void 0;var n=r(8895);Object.defineProperty(t,"accessListify",{enumerable:!0,get:function(){return n.accessListify}});var i=r(6726);Object.defineProperty(t,"authorizationify",{enumerable:!0,get:function(){return i.authorizationify}});var s=r(8579);Object.defineProperty(t,"computeAddress",{enumerable:!0,get:function(){return s.computeAddress}}),Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return s.recoverAddress}});var a=r(3895);Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return a.Transaction}})},3012:(e,t,r)=>{"use strict";r.d(t,{Hu:()=>a,cR:()=>o});var n=r(1131);r(9865);var i=r(6054),s=r(2873);function a(e){let t,r;if(e.getComponents().forEach(e=>{("ip4"===e.name||"ip6"===e.name)&&(r=e.value),"ipcidr"===e.name&&(t=e.value)}),null==t||null==r)throw Error("Invalid multiaddr");return new n.fO(r,t)}function o(e,t){let r=s.u.getProtocol(e);return r.bytesToValue?.(t)??(0,i.d)(t,"base16")}},3084:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>v,DO:()=>a,CC:()=>l,sd:()=>o,Fe:()=>s,Ht:()=>c,My:()=>g,uH:()=>u,Id:()=>w,qj:()=>A,O8:()=>d,aT:()=>y,aY:()=>i,po:()=>E,Ow:()=>h,ZJ:()=>x});let n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function a(e,...t){if(!i(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");s(e.outputLen),s(e.blockLen)}function l(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function c(e,t){a(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function u(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function d(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function h(e,t){return e<<32-t|e>>>t}let f="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,p=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function g(e){if(a(e),f)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=p[e[r]];return t}let m={_0:48,_9:57,A:65,F:70,a:97,f:102};function b(e){return e>=m._0&&e<=m._9?e-m._0:e>=m.A&&e<=m.F?e-(m.A-10):e>=m.a&&e<=m.f?e-(m.a-10):void 0}function y(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(f)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=b(e.charCodeAt(i)),s=b(e.charCodeAt(i+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+s}return n}function x(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e)),a(e),e}function w(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];a(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}class v{}function A(e){let t=t=>e().update(x(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function E(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return Uint8Array.from(n.randomBytes(e));throw Error("crypto.getRandomValues must be defined")}},3110:e=>{e.exports={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}},3118:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchUrlFeeDataNetworkPlugin=t.FeeDataNetworkPlugin=t.EnsPlugin=t.GasCostPlugin=t.NetworkPlugin=void 0;let n=r(9959),i=r(8662);class s{name;constructor(e){(0,n.defineProperties)(this,{name:e})}clone(){return new s(this.name)}}t.NetworkPlugin=s;class a extends s{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);let r={effectiveBlock:e};function s(e,n){let s=(t||{})[e];null==s&&(s=n),(0,i.assertArgument)("number"==typeof s,`invalud value for ${e}`,"costs",t),r[e]=s}s("txBase",21e3),s("txCreate",32e3),s("txDataZero",4),s("txDataNonzero",16),s("txAccessListStorageKey",1900),s("txAccessListAddress",2400),(0,n.defineProperties)(this,r)}clone(){return new a(this.effectiveBlock,this)}}t.GasCostPlugin=a;class o extends s{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),(0,n.defineProperties)(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new o(this.address,this.targetNetwork)}}t.EnsPlugin=o;class l extends s{#j;get feeDataFunc(){return this.#j}constructor(e){super("org.ethers.plugins.network.FeeData"),this.#j=e}async getFeeData(e){return await this.#j(e)}clone(){return new l(this.#j)}}t.FeeDataNetworkPlugin=l;class c extends s{#z;#H;get url(){return this.#z}get processFunc(){return this.#H}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#z=e,this.#H=t}clone(){return this}}t.FetchUrlFeeDataNetworkPlugin=c},3119:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterIdPendingSubscriber=t.FilterIdEventSubscriber=t.FilterIdSubscriber=void 0;let n=r(8662),i=r(4459);class s{#G;#$;#V;#q;#K;#W;constructor(e){this.#G=e,this.#$=null,this.#V=this.#Q.bind(this),this.#q=!1,this.#K=null,this.#W=!1}_subscribe(e){throw Error("subclasses must override this")}_emitResults(e,t){throw Error("subclasses must override this")}_recover(e){throw Error("subclasses must override this")}async #Q(e){try{null==this.#$&&(this.#$=this._subscribe(this.#G));let e=null;try{e=await this.#$}catch(e){if(!(0,n.isError)(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e){this.#$=null,this.#G._recoverSubscriber(this,this._recover(this.#G));return}let t=await this.#G.getNetwork();if(this.#K||(this.#K=t),this.#K.chainId!==t.chainId)throw Error("chaid changed");if(this.#W)return;let r=await this.#G.send("eth_getFilterChanges",[e]);await this._emitResults(this.#G,r)}catch(e){console.log("@TODO",e)}this.#G.once("block",this.#V)}#Z(){let e=this.#$;e&&(this.#$=null,e.then(e=>{!this.#G.destroyed&&this.#G.send("eth_uninstallFilter",[e])}))}start(){!this.#q&&(this.#q=!0,this.#Q(-2))}stop(){this.#q&&(this.#q=!1,this.#W=!0,this.#Z(),this.#G.off("block",this.#V))}pause(e){e&&this.#Z(),this.#G.off("block",this.#V)}resume(){this.start()}}t.FilterIdSubscriber=s;class a extends s{#J;constructor(e,t){super(e),this.#J=JSON.parse(JSON.stringify(t))}_recover(e){return new i.PollingEventSubscriber(e,this.#J)}async _subscribe(e){return await e.send("eth_newFilter",[this.#J])}async _emitResults(e,t){for(let r of t)e.emit(this.#J,e._wrapLog(r,e._network))}}t.FilterIdEventSubscriber=a;class o extends s{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(let r of t)e.emit("pending",r)}}t.FilterIdPendingSubscriber=o},3123:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});var n=r(7876),i=r(4232),s=r(7175);let a=(0,i.forwardRef)(function(e,t){let{direction:r,align:i,justify:a,wrap:o,basis:l,grow:c,shrink:u,inline:d,...h}=e;return(0,n.jsx)(s.B.div,{ref:t,...h,css:{display:d?"inline-flex":"flex",flexDirection:r,alignItems:i,justifyContent:a,flexWrap:o,flexBasis:l,flexGrow:c,flexShrink:u,...e.css}})})},3172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{base64:()=>i,base64pad:()=>s,base64url:()=>a,base64urlpad:()=>o});var n=r(8122);let i=(0,n.yE)({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),s=(0,n.yE)({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),a=(0,n.yE)({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),o=(0,n.yE)({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6})},3173:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=t.keccak256=t.randomBytes=t.computeHmac=t.UndecodedEventLog=t.EventLog=t.ContractUnknownEventPayload=t.ContractTransactionResponse=t.ContractTransactionReceipt=t.ContractEventPayload=t.ContractFactory=t.Contract=t.BaseContract=t.MessagePrefix=t.EtherSymbol=t.ZeroHash=t.N=t.MaxInt256=t.MinInt256=t.MaxUint256=t.WeiPerEther=t.ZeroAddress=t.resolveAddress=t.isAddress=t.isAddressable=t.getCreate2Address=t.getCreateAddress=t.getIcapAddress=t.getAddress=t.Typed=t.TransactionDescription=t.Result=t.LogDescription=t.Interface=t.Indexed=t.ErrorDescription=t.checkResultErrors=t.StructFragment=t.ParamType=t.NamedFragment=t.FunctionFragment=t.FallbackFragment=t.Fragment=t.EventFragment=t.ErrorFragment=t.ConstructorFragment=t.AbiCoder=t.encodeBytes32String=t.decodeBytes32String=t.version=void 0,t.WebSocketProvider=t.SocketProvider=t.IpcSocketProvider=t.QuickNodeProvider=t.PocketProvider=t.InfuraWebSocketProvider=t.InfuraProvider=t.EtherscanProvider=t.CloudflareProvider=t.ChainstackProvider=t.BlockscoutProvider=t.AnkrProvider=t.AlchemyProvider=t.BrowserProvider=t.JsonRpcSigner=t.JsonRpcProvider=t.JsonRpcApiProvider=t.FallbackProvider=t.AbstractProvider=t.VoidSigner=t.NonceManager=t.AbstractSigner=t.TransactionResponse=t.TransactionReceipt=t.Log=t.FeeData=t.Block=t.getDefaultProvider=t.verifyTypedData=t.TypedDataEncoder=t.solidityPackedSha256=t.solidityPackedKeccak256=t.solidityPacked=t.verifyMessage=t.hashMessage=t.verifyAuthorization=t.hashAuthorization=t.dnsEncode=t.namehash=t.isValidName=t.ensNormalize=t.id=t.SigningKey=t.Signature=t.lock=t.scryptSync=t.scrypt=t.pbkdf2=t.sha512=t.sha256=void 0,t.FetchCancelSignal=t.FetchResponse=t.FetchRequest=t.EventPayload=t.isError=t.isCallException=t.makeError=t.assertPrivate=t.assertNormalize=t.assertArgumentCount=t.assertArgument=t.assert=t.resolveProperties=t.defineProperties=t.zeroPadValue=t.zeroPadBytes=t.stripZerosLeft=t.isBytesLike=t.isHexString=t.hexlify=t.getBytesCopy=t.getBytes=t.dataSlice=t.dataLength=t.concat=t.encodeBase64=t.decodeBase64=t.encodeBase58=t.decodeBase58=t.Transaction=t.recoverAddress=t.computeAddress=t.authorizationify=t.accessListify=t.showThrottleMessage=t.copyRequest=t.UnmanagedSubscriber=t.SocketSubscriber=t.SocketPendingSubscriber=t.SocketEventSubscriber=t.SocketBlockSubscriber=t.MulticoinProviderPlugin=t.NetworkPlugin=t.GasCostPlugin=t.FetchUrlFeeDataNetworkPlugin=t.FeeDataNetworkPlugin=t.EtherscanPlugin=t.EnsPlugin=t.Network=t.EnsResolver=void 0,t.wordlists=t.WordlistOwlA=t.WordlistOwl=t.LangEn=t.Wordlist=t.encryptKeystoreJsonSync=t.encryptKeystoreJson=t.decryptKeystoreJson=t.decryptKeystoreJsonSync=t.decryptCrowdsaleJson=t.isKeystoreJson=t.isCrowdsaleJson=t.getIndexedAccountPath=t.getAccountPath=t.defaultPath=t.Wallet=t.HDNodeVoidWallet=t.HDNodeWallet=t.BaseWallet=t.Mnemonic=t.uuidV4=t.encodeRlp=t.decodeRlp=t.Utf8ErrorFuncs=t.toUtf8String=t.toUtf8CodePoints=t.toUtf8Bytes=t.parseUnits=t.formatUnits=t.parseEther=t.formatEther=t.mask=t.toTwos=t.fromTwos=t.toQuantity=t.toNumber=t.toBeHex=t.toBigInt=t.toBeArray=t.getUint=t.getNumber=t.getBigInt=t.FixedNumber=void 0;var n=r(9571);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var i=r(7813);Object.defineProperty(t,"decodeBytes32String",{enumerable:!0,get:function(){return i.decodeBytes32String}}),Object.defineProperty(t,"encodeBytes32String",{enumerable:!0,get:function(){return i.encodeBytes32String}}),Object.defineProperty(t,"AbiCoder",{enumerable:!0,get:function(){return i.AbiCoder}}),Object.defineProperty(t,"ConstructorFragment",{enumerable:!0,get:function(){return i.ConstructorFragment}}),Object.defineProperty(t,"ErrorFragment",{enumerable:!0,get:function(){return i.ErrorFragment}}),Object.defineProperty(t,"EventFragment",{enumerable:!0,get:function(){return i.EventFragment}}),Object.defineProperty(t,"Fragment",{enumerable:!0,get:function(){return i.Fragment}}),Object.defineProperty(t,"FallbackFragment",{enumerable:!0,get:function(){return i.FallbackFragment}}),Object.defineProperty(t,"FunctionFragment",{enumerable:!0,get:function(){return i.FunctionFragment}}),Object.defineProperty(t,"NamedFragment",{enumerable:!0,get:function(){return i.NamedFragment}}),Object.defineProperty(t,"ParamType",{enumerable:!0,get:function(){return i.ParamType}}),Object.defineProperty(t,"StructFragment",{enumerable:!0,get:function(){return i.StructFragment}}),Object.defineProperty(t,"checkResultErrors",{enumerable:!0,get:function(){return i.checkResultErrors}}),Object.defineProperty(t,"ErrorDescription",{enumerable:!0,get:function(){return i.ErrorDescription}}),Object.defineProperty(t,"Indexed",{enumerable:!0,get:function(){return i.Indexed}}),Object.defineProperty(t,"Interface",{enumerable:!0,get:function(){return i.Interface}}),Object.defineProperty(t,"LogDescription",{enumerable:!0,get:function(){return i.LogDescription}}),Object.defineProperty(t,"Result",{enumerable:!0,get:function(){return i.Result}}),Object.defineProperty(t,"TransactionDescription",{enumerable:!0,get:function(){return i.TransactionDescription}}),Object.defineProperty(t,"Typed",{enumerable:!0,get:function(){return i.Typed}});var s=r(9111);Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return s.getAddress}}),Object.defineProperty(t,"getIcapAddress",{enumerable:!0,get:function(){return s.getIcapAddress}}),Object.defineProperty(t,"getCreateAddress",{enumerable:!0,get:function(){return s.getCreateAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return s.getCreate2Address}}),Object.defineProperty(t,"isAddressable",{enumerable:!0,get:function(){return s.isAddressable}}),Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return s.isAddress}}),Object.defineProperty(t,"resolveAddress",{enumerable:!0,get:function(){return s.resolveAddress}});var a=r(9418);Object.defineProperty(t,"ZeroAddress",{enumerable:!0,get:function(){return a.ZeroAddress}}),Object.defineProperty(t,"WeiPerEther",{enumerable:!0,get:function(){return a.WeiPerEther}}),Object.defineProperty(t,"MaxUint256",{enumerable:!0,get:function(){return a.MaxUint256}}),Object.defineProperty(t,"MinInt256",{enumerable:!0,get:function(){return a.MinInt256}}),Object.defineProperty(t,"MaxInt256",{enumerable:!0,get:function(){return a.MaxInt256}}),Object.defineProperty(t,"N",{enumerable:!0,get:function(){return a.N}}),Object.defineProperty(t,"ZeroHash",{enumerable:!0,get:function(){return a.ZeroHash}}),Object.defineProperty(t,"EtherSymbol",{enumerable:!0,get:function(){return a.EtherSymbol}}),Object.defineProperty(t,"MessagePrefix",{enumerable:!0,get:function(){return a.MessagePrefix}});var o=r(629);Object.defineProperty(t,"BaseContract",{enumerable:!0,get:function(){return o.BaseContract}}),Object.defineProperty(t,"Contract",{enumerable:!0,get:function(){return o.Contract}}),Object.defineProperty(t,"ContractFactory",{enumerable:!0,get:function(){return o.ContractFactory}}),Object.defineProperty(t,"ContractEventPayload",{enumerable:!0,get:function(){return o.ContractEventPayload}}),Object.defineProperty(t,"ContractTransactionReceipt",{enumerable:!0,get:function(){return o.ContractTransactionReceipt}}),Object.defineProperty(t,"ContractTransactionResponse",{enumerable:!0,get:function(){return o.ContractTransactionResponse}}),Object.defineProperty(t,"ContractUnknownEventPayload",{enumerable:!0,get:function(){return o.ContractUnknownEventPayload}}),Object.defineProperty(t,"EventLog",{enumerable:!0,get:function(){return o.EventLog}}),Object.defineProperty(t,"UndecodedEventLog",{enumerable:!0,get:function(){return o.UndecodedEventLog}});var l=r(6870);Object.defineProperty(t,"computeHmac",{enumerable:!0,get:function(){return l.computeHmac}}),Object.defineProperty(t,"randomBytes",{enumerable:!0,get:function(){return l.randomBytes}}),Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return l.keccak256}}),Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return l.ripemd160}}),Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return l.sha256}}),Object.defineProperty(t,"sha512",{enumerable:!0,get:function(){return l.sha512}}),Object.defineProperty(t,"pbkdf2",{enumerable:!0,get:function(){return l.pbkdf2}}),Object.defineProperty(t,"scrypt",{enumerable:!0,get:function(){return l.scrypt}}),Object.defineProperty(t,"scryptSync",{enumerable:!0,get:function(){return l.scryptSync}}),Object.defineProperty(t,"lock",{enumerable:!0,get:function(){return l.lock}}),Object.defineProperty(t,"Signature",{enumerable:!0,get:function(){return l.Signature}}),Object.defineProperty(t,"SigningKey",{enumerable:!0,get:function(){return l.SigningKey}});var c=r(4259);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return c.id}}),Object.defineProperty(t,"ensNormalize",{enumerable:!0,get:function(){return c.ensNormalize}}),Object.defineProperty(t,"isValidName",{enumerable:!0,get:function(){return c.isValidName}}),Object.defineProperty(t,"namehash",{enumerable:!0,get:function(){return c.namehash}}),Object.defineProperty(t,"dnsEncode",{enumerable:!0,get:function(){return c.dnsEncode}}),Object.defineProperty(t,"hashAuthorization",{enumerable:!0,get:function(){return c.hashAuthorization}}),Object.defineProperty(t,"verifyAuthorization",{enumerable:!0,get:function(){return c.verifyAuthorization}}),Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return c.hashMessage}}),Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return c.verifyMessage}}),Object.defineProperty(t,"solidityPacked",{enumerable:!0,get:function(){return c.solidityPacked}}),Object.defineProperty(t,"solidityPackedKeccak256",{enumerable:!0,get:function(){return c.solidityPackedKeccak256}}),Object.defineProperty(t,"solidityPackedSha256",{enumerable:!0,get:function(){return c.solidityPackedSha256}}),Object.defineProperty(t,"TypedDataEncoder",{enumerable:!0,get:function(){return c.TypedDataEncoder}}),Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return c.verifyTypedData}});var u=r(8321);Object.defineProperty(t,"getDefaultProvider",{enumerable:!0,get:function(){return u.getDefaultProvider}}),Object.defineProperty(t,"Block",{enumerable:!0,get:function(){return u.Block}}),Object.defineProperty(t,"FeeData",{enumerable:!0,get:function(){return u.FeeData}}),Object.defineProperty(t,"Log",{enumerable:!0,get:function(){return u.Log}}),Object.defineProperty(t,"TransactionReceipt",{enumerable:!0,get:function(){return u.TransactionReceipt}}),Object.defineProperty(t,"TransactionResponse",{enumerable:!0,get:function(){return u.TransactionResponse}}),Object.defineProperty(t,"AbstractSigner",{enumerable:!0,get:function(){return u.AbstractSigner}}),Object.defineProperty(t,"NonceManager",{enumerable:!0,get:function(){return u.NonceManager}}),Object.defineProperty(t,"VoidSigner",{enumerable:!0,get:function(){return u.VoidSigner}}),Object.defineProperty(t,"AbstractProvider",{enumerable:!0,get:function(){return u.AbstractProvider}}),Object.defineProperty(t,"FallbackProvider",{enumerable:!0,get:function(){return u.FallbackProvider}}),Object.defineProperty(t,"JsonRpcApiProvider",{enumerable:!0,get:function(){return u.JsonRpcApiProvider}}),Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return u.JsonRpcProvider}}),Object.defineProperty(t,"JsonRpcSigner",{enumerable:!0,get:function(){return u.JsonRpcSigner}}),Object.defineProperty(t,"BrowserProvider",{enumerable:!0,get:function(){return u.BrowserProvider}}),Object.defineProperty(t,"AlchemyProvider",{enumerable:!0,get:function(){return u.AlchemyProvider}}),Object.defineProperty(t,"AnkrProvider",{enumerable:!0,get:function(){return u.AnkrProvider}}),Object.defineProperty(t,"BlockscoutProvider",{enumerable:!0,get:function(){return u.BlockscoutProvider}}),Object.defineProperty(t,"ChainstackProvider",{enumerable:!0,get:function(){return u.ChainstackProvider}}),Object.defineProperty(t,"CloudflareProvider",{enumerable:!0,get:function(){return u.CloudflareProvider}}),Object.defineProperty(t,"EtherscanProvider",{enumerable:!0,get:function(){return u.EtherscanProvider}}),Object.defineProperty(t,"InfuraProvider",{enumerable:!0,get:function(){return u.InfuraProvider}}),Object.defineProperty(t,"InfuraWebSocketProvider",{enumerable:!0,get:function(){return u.InfuraWebSocketProvider}}),Object.defineProperty(t,"PocketProvider",{enumerable:!0,get:function(){return u.PocketProvider}}),Object.defineProperty(t,"QuickNodeProvider",{enumerable:!0,get:function(){return u.QuickNodeProvider}}),Object.defineProperty(t,"IpcSocketProvider",{enumerable:!0,get:function(){return u.IpcSocketProvider}}),Object.defineProperty(t,"SocketProvider",{enumerable:!0,get:function(){return u.SocketProvider}}),Object.defineProperty(t,"WebSocketProvider",{enumerable:!0,get:function(){return u.WebSocketProvider}}),Object.defineProperty(t,"EnsResolver",{enumerable:!0,get:function(){return u.EnsResolver}}),Object.defineProperty(t,"Network",{enumerable:!0,get:function(){return u.Network}}),Object.defineProperty(t,"EnsPlugin",{enumerable:!0,get:function(){return u.EnsPlugin}}),Object.defineProperty(t,"EtherscanPlugin",{enumerable:!0,get:function(){return u.EtherscanPlugin}}),Object.defineProperty(t,"FeeDataNetworkPlugin",{enumerable:!0,get:function(){return u.FeeDataNetworkPlugin}}),Object.defineProperty(t,"FetchUrlFeeDataNetworkPlugin",{enumerable:!0,get:function(){return u.FetchUrlFeeDataNetworkPlugin}}),Object.defineProperty(t,"GasCostPlugin",{enumerable:!0,get:function(){return u.GasCostPlugin}}),Object.defineProperty(t,"NetworkPlugin",{enumerable:!0,get:function(){return u.NetworkPlugin}}),Object.defineProperty(t,"MulticoinProviderPlugin",{enumerable:!0,get:function(){return u.MulticoinProviderPlugin}}),Object.defineProperty(t,"SocketBlockSubscriber",{enumerable:!0,get:function(){return u.SocketBlockSubscriber}}),Object.defineProperty(t,"SocketEventSubscriber",{enumerable:!0,get:function(){return u.SocketEventSubscriber}}),Object.defineProperty(t,"SocketPendingSubscriber",{enumerable:!0,get:function(){return u.SocketPendingSubscriber}}),Object.defineProperty(t,"SocketSubscriber",{enumerable:!0,get:function(){return u.SocketSubscriber}}),Object.defineProperty(t,"UnmanagedSubscriber",{enumerable:!0,get:function(){return u.UnmanagedSubscriber}}),Object.defineProperty(t,"copyRequest",{enumerable:!0,get:function(){return u.copyRequest}}),Object.defineProperty(t,"showThrottleMessage",{enumerable:!0,get:function(){return u.showThrottleMessage}});var d=r(2984);Object.defineProperty(t,"accessListify",{enumerable:!0,get:function(){return d.accessListify}}),Object.defineProperty(t,"authorizationify",{enumerable:!0,get:function(){return d.authorizationify}}),Object.defineProperty(t,"computeAddress",{enumerable:!0,get:function(){return d.computeAddress}}),Object.defineProperty(t,"recoverAddress",{enumerable:!0,get:function(){return d.recoverAddress}}),Object.defineProperty(t,"Transaction",{enumerable:!0,get:function(){return d.Transaction}});var h=r(8662);Object.defineProperty(t,"decodeBase58",{enumerable:!0,get:function(){return h.decodeBase58}}),Object.defineProperty(t,"encodeBase58",{enumerable:!0,get:function(){return h.encodeBase58}}),Object.defineProperty(t,"decodeBase64",{enumerable:!0,get:function(){return h.decodeBase64}}),Object.defineProperty(t,"encodeBase64",{enumerable:!0,get:function(){return h.encodeBase64}}),Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return h.concat}}),Object.defineProperty(t,"dataLength",{enumerable:!0,get:function(){return h.dataLength}}),Object.defineProperty(t,"dataSlice",{enumerable:!0,get:function(){return h.dataSlice}}),Object.defineProperty(t,"getBytes",{enumerable:!0,get:function(){return h.getBytes}}),Object.defineProperty(t,"getBytesCopy",{enumerable:!0,get:function(){return h.getBytesCopy}}),Object.defineProperty(t,"hexlify",{enumerable:!0,get:function(){return h.hexlify}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return h.isHexString}}),Object.defineProperty(t,"isBytesLike",{enumerable:!0,get:function(){return h.isBytesLike}}),Object.defineProperty(t,"stripZerosLeft",{enumerable:!0,get:function(){return h.stripZerosLeft}}),Object.defineProperty(t,"zeroPadBytes",{enumerable:!0,get:function(){return h.zeroPadBytes}}),Object.defineProperty(t,"zeroPadValue",{enumerable:!0,get:function(){return h.zeroPadValue}}),Object.defineProperty(t,"defineProperties",{enumerable:!0,get:function(){return h.defineProperties}}),Object.defineProperty(t,"resolveProperties",{enumerable:!0,get:function(){return h.resolveProperties}}),Object.defineProperty(t,"assert",{enumerable:!0,get:function(){return h.assert}}),Object.defineProperty(t,"assertArgument",{enumerable:!0,get:function(){return h.assertArgument}}),Object.defineProperty(t,"assertArgumentCount",{enumerable:!0,get:function(){return h.assertArgumentCount}}),Object.defineProperty(t,"assertNormalize",{enumerable:!0,get:function(){return h.assertNormalize}}),Object.defineProperty(t,"assertPrivate",{enumerable:!0,get:function(){return h.assertPrivate}}),Object.defineProperty(t,"makeError",{enumerable:!0,get:function(){return h.makeError}}),Object.defineProperty(t,"isCallException",{enumerable:!0,get:function(){return h.isCallException}}),Object.defineProperty(t,"isError",{enumerable:!0,get:function(){return h.isError}}),Object.defineProperty(t,"EventPayload",{enumerable:!0,get:function(){return h.EventPayload}}),Object.defineProperty(t,"FetchRequest",{enumerable:!0,get:function(){return h.FetchRequest}}),Object.defineProperty(t,"FetchResponse",{enumerable:!0,get:function(){return h.FetchResponse}}),Object.defineProperty(t,"FetchCancelSignal",{enumerable:!0,get:function(){return h.FetchCancelSignal}}),Object.defineProperty(t,"FixedNumber",{enumerable:!0,get:function(){return h.FixedNumber}}),Object.defineProperty(t,"getBigInt",{enumerable:!0,get:function(){return h.getBigInt}}),Object.defineProperty(t,"getNumber",{enumerable:!0,get:function(){return h.getNumber}}),Object.defineProperty(t,"getUint",{enumerable:!0,get:function(){return h.getUint}}),Object.defineProperty(t,"toBeArray",{enumerable:!0,get:function(){return h.toBeArray}}),Object.defineProperty(t,"toBigInt",{enumerable:!0,get:function(){return h.toBigInt}}),Object.defineProperty(t,"toBeHex",{enumerable:!0,get:function(){return h.toBeHex}}),Object.defineProperty(t,"toNumber",{enumerable:!0,get:function(){return h.toNumber}}),Object.defineProperty(t,"toQuantity",{enumerable:!0,get:function(){return h.toQuantity}}),Object.defineProperty(t,"fromTwos",{enumerable:!0,get:function(){return h.fromTwos}}),Object.defineProperty(t,"toTwos",{enumerable:!0,get:function(){return h.toTwos}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return h.mask}}),Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return h.formatEther}}),Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return h.parseEther}}),Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return h.formatUnits}}),Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return h.parseUnits}}),Object.defineProperty(t,"toUtf8Bytes",{enumerable:!0,get:function(){return h.toUtf8Bytes}}),Object.defineProperty(t,"toUtf8CodePoints",{enumerable:!0,get:function(){return h.toUtf8CodePoints}}),Object.defineProperty(t,"toUtf8String",{enumerable:!0,get:function(){return h.toUtf8String}}),Object.defineProperty(t,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return h.Utf8ErrorFuncs}}),Object.defineProperty(t,"decodeRlp",{enumerable:!0,get:function(){return h.decodeRlp}}),Object.defineProperty(t,"encodeRlp",{enumerable:!0,get:function(){return h.encodeRlp}}),Object.defineProperty(t,"uuidV4",{enumerable:!0,get:function(){return h.uuidV4}});var f=r(2845);Object.defineProperty(t,"Mnemonic",{enumerable:!0,get:function(){return f.Mnemonic}}),Object.defineProperty(t,"BaseWallet",{enumerable:!0,get:function(){return f.BaseWallet}}),Object.defineProperty(t,"HDNodeWallet",{enumerable:!0,get:function(){return f.HDNodeWallet}}),Object.defineProperty(t,"HDNodeVoidWallet",{enumerable:!0,get:function(){return f.HDNodeVoidWallet}}),Object.defineProperty(t,"Wallet",{enumerable:!0,get:function(){return f.Wallet}}),Object.defineProperty(t,"defaultPath",{enumerable:!0,get:function(){return f.defaultPath}}),Object.defineProperty(t,"getAccountPath",{enumerable:!0,get:function(){return f.getAccountPath}}),Object.defineProperty(t,"getIndexedAccountPath",{enumerable:!0,get:function(){return f.getIndexedAccountPath}}),Object.defineProperty(t,"isCrowdsaleJson",{enumerable:!0,get:function(){return f.isCrowdsaleJson}}),Object.defineProperty(t,"isKeystoreJson",{enumerable:!0,get:function(){return f.isKeystoreJson}}),Object.defineProperty(t,"decryptCrowdsaleJson",{enumerable:!0,get:function(){return f.decryptCrowdsaleJson}}),Object.defineProperty(t,"decryptKeystoreJsonSync",{enumerable:!0,get:function(){return f.decryptKeystoreJsonSync}}),Object.defineProperty(t,"decryptKeystoreJson",{enumerable:!0,get:function(){return f.decryptKeystoreJson}}),Object.defineProperty(t,"encryptKeystoreJson",{enumerable:!0,get:function(){return f.encryptKeystoreJson}}),Object.defineProperty(t,"encryptKeystoreJsonSync",{enumerable:!0,get:function(){return f.encryptKeystoreJsonSync}});var p=r(1546);Object.defineProperty(t,"Wordlist",{enumerable:!0,get:function(){return p.Wordlist}}),Object.defineProperty(t,"LangEn",{enumerable:!0,get:function(){return p.LangEn}}),Object.defineProperty(t,"WordlistOwl",{enumerable:!0,get:function(){return p.WordlistOwl}}),Object.defineProperty(t,"WordlistOwlA",{enumerable:!0,get:function(){return p.WordlistOwlA}}),Object.defineProperty(t,"wordlists",{enumerable:!0,get:function(){return p.wordlists}})},3204:(e,t,r)=>{"use strict";r.d(t,{Ch:()=>n,VM:()=>i});let n=Symbol.for("@libp2p/service-capabilities"),i=Symbol.for("@libp2p/service-dependencies")},3248:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketProvider=void 0;let n=r(6896),i=r(7848);class s extends i.SocketProvider{#Y;#X;get websocket(){if(null==this.#X)throw Error("websocket closed");return this.#X}constructor(e,t,r){super(t,r),"string"==typeof e?(this.#Y=()=>new n.WebSocket(e),this.#X=this.#Y()):"function"==typeof e?(this.#Y=e,this.#X=e()):(this.#Y=null,this.#X=e),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(e){console.log("failed to start WebsocketProvider",e)}},this.websocket.onmessage=e=>{this._processMessage(e.data)}}async _write(e){this.websocket.send(e)}async destroy(){null!=this.#X&&(this.#X.close(),this.#X=null),super.destroy()}}t.WebSocketProvider=s},3251:(e,t,r)=>{"use strict";r.d(t,{s:()=>d});var n=r(9478),i=r(8121);let s=function(e){return(0,n.n1)("sha256").update(e).digest()},a=function(e){return(0,n.n1)("sha512").update(e).digest()},o=s,l=a,c=!1,u=!1;function d(e){let t=(0,i.q5)(e,"data");return(0,i.c$)(o(t))}function h(e){let t=(0,i.q5)(e,"data");return(0,i.c$)(l(t))}d._=s,d.lock=function(){c=!0},d.register=function(e){if(c)throw Error("sha256 is locked");o=e},Object.freeze(d),h._=a,h.lock=function(){u=!0},h.register=function(e){if(u)throw Error("sha512 is locked");l=e},Object.freeze(d)},3256:(e,t,r)=>{"use strict";function n(e){return e}r.d(t,{o:()=>n})},3264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shake256=t.shake128=t.keccak_512=t.keccak_384=t.keccak_256=t.keccak_224=t.sha3_512=t.sha3_384=t.sha3_256=t.sha3_224=t.Keccak=t.keccakP=void 0;let n=r(3810),i=r(1113),s=r(5636),[a,o,l]=[[],[],[]],c=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=u,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],a.push(2*(5*n+r)),o.push((e+1)*(e+2)/2%64);let i=c;for(let e=0;e<7;e++)(t=(t<<u^(t>>h)*p)%f)&d&&(i^=u<<(u<<BigInt(e))-u);l.push(i)}let[g,m]=(0,i.split)(l,!0),b=(e,t,r)=>r>32?(0,i.rotlBH)(e,t,r):(0,i.rotlSH)(e,t,r),y=(e,t,r)=>r>32?(0,i.rotlBL)(e,t,r):(0,i.rotlSL)(e,t,r);function x(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,s=r[i],a=r[i+1],o=b(s,a,1)^r[n],l=y(s,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=o[r],s=b(t,i,n),l=y(t,i,n),c=a[r];t=e[c],i=e[c+1],e[c]=s,e[c+1]=l}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=g[n],e[1]^=m[n]}r.fill(0)}t.keccakP=x;class w extends s.Hash{constructor(e,t,r,i=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.number)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.u32)(this.state)}keccak(){x(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,n.exists)(this);let{blockLen:t,state:r}=this,i=(e=(0,s.toBytes)(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.exists)(this,!1),(0,n.bytes)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.output)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new w(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}t.Keccak=w;let v=(e,t,r)=>(0,s.wrapConstructor)(()=>new w(t,e,r));t.sha3_224=v(6,144,28),t.sha3_256=v(6,136,32),t.sha3_384=v(6,104,48),t.sha3_512=v(6,72,64),t.keccak_224=v(1,144,28),t.keccak_256=v(1,136,32),t.keccak_384=v(1,104,48),t.keccak_512=v(1,72,64);let A=(e,t,r)=>(0,s.wrapXOFConstructorWithOpts)((n={})=>new w(t,e,void 0===n.dkLen?r:n.dkLen,!0));t.shake128=A(31,168,16),t.shake256=A(31,136,32)},3300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnkrProvider=void 0;let n=r(8662),i=r(5188),s=r(9307),a=r(4822),o="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";class l extends a.JsonRpcProvider{apiKey;constructor(e,t){null==e&&(e="mainnet");let r=s.Network.from(e);null==t&&(t=o),super(l.getRequest(r,t),r,{polling:!0,staticNetwork:r}),(0,n.defineProperties)(this,{apiKey:t})}_getProvider(e){try{return new l(e,this.apiKey)}catch(e){}return super._getProvider(e)}static getRequest(e,t){null==t&&(t=o);let r=new n.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"rpc.ankr.com/eth";case"goerli":return"rpc.ankr.com/eth_goerli";case"sepolia":return"rpc.ankr.com/eth_sepolia";case"arbitrum":return"rpc.ankr.com/arbitrum";case"base":return"rpc.ankr.com/base";case"base-goerli":return"rpc.ankr.com/base_goerli";case"base-sepolia":return"rpc.ankr.com/base_sepolia";case"bnb":return"rpc.ankr.com/bsc";case"bnbt":return"rpc.ankr.com/bsc_testnet_chapel";case"matic":return"rpc.ankr.com/polygon";case"matic-mumbai":return"rpc.ankr.com/polygon_mumbai";case"optimism":return"rpc.ankr.com/optimism";case"optimism-goerli":return"rpc.ankr.com/optimism_testnet";case"optimism-sepolia":return"rpc.ankr.com/optimism_sepolia"}(0,n.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/${t}`);return r.allowGzip=!0,t===o&&(r.retryFunc=async(e,t,r)=>((0,i.showThrottleMessage)("AnkrProvider"),!0)),r}getRpcError(e,t){return"eth_sendRawTransaction"===e.method&&t&&t.error&&"INTERNAL_ERROR: could not replace existing tx"===t.error.message&&(t.error.message="replacement transaction underpriced"),super.getRpcError(e,t)}isCommunityResource(){return this.apiKey===o}}t.AnkrProvider=l},3308:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBase64=t.decodeBase64=void 0;let n=r(4306);t.decodeBase64=function(e){let t=new Uint8Array((e=atob(e)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return(0,n.getBytes)(t)},t.encodeBase64=function(e){let t=(0,n.getBytes)(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return btoa(r)}},3315:(e,t,r)=>{"use strict";r.r(t),r.d(t,{identity:()=>a});var n=r(3751),i=r(4057);let s=n.au,a={code:0,name:"identity",encode:s,digest:function(e){return i.vt(0,s(e))}}},3321:(e,t,r)=>{"use strict";r.d(t,{D4:()=>i,s_:()=>s,OY:()=>a});let n={encode:function e(t,r,n){r=r||[];for(var i=n=n||0;t>=0x80000000;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},decode:function e(t,r){var n,i=0,r=r||0,s=0,a=r,o=t.length;do{if(a>=o)throw e.bytes=0,RangeError("Could not decode varint");n=t[a++],i+=s<28?(127&n)<<s:(127&n)*Math.pow(2,s),s+=7}while(n>=128);return e.bytes=a-r,i},encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<0x10000000?4:e<0x800000000?5:e<0x40000000000?6:e<0x2000000000000?7:e<0x100000000000000?8:e<0x8000000000000000?9:10}};function i(e,t=0){return[n.decode(e,t),n.decode.bytes]}function s(e,t,r=0){return n.encode(e,t,r),t}function a(e){return n.encodingLength(e)}},3341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Contract=t.BaseContract=t.resolveArgs=t.copyOverrides=void 0;let n=r(7813),i=r(9111),s=r(8138),a=r(8662),o=r(8319),l=BigInt(0);function c(e){return e&&"function"==typeof e.call}function u(e){return e&&"function"==typeof e.estimateGas}function d(e){return e&&"function"==typeof e.resolveName}function h(e){return e&&"function"==typeof e.sendTransaction}function f(e){if(null!=e){if(d(e))return e;if(e.provider)return e.provider}}class p{#C;fragment;constructor(e,t,r){if((0,a.defineProperties)(this,{fragment:t}),t.inputs.length<r.length)throw Error("too many arguments");let n=g(e.runner,"resolveName"),s=d(n)?n:null;this.#C=async function(){let n=await Promise.all(t.inputs.map((e,t)=>null==r[t]?null:e.walkAsync(r[t],(e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map(e=>(0,i.resolveAddress)(e,s))):(0,i.resolveAddress)(t,s):t)));return e.interface.encodeFilterTopics(t,n)}()}getTopicFilter(){return this.#C}}function g(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function m(e){return null==e?null:e.provider||null}async function b(e,t){let r=n.Typed.dereference(e,"overrides");(0,a.assertArgument)("object"==typeof r,"invalid overrides parameter","overrides",e);let i=(0,s.copyRequest)(r);return(0,a.assertArgument)(null==i.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",i.to),(0,a.assertArgument)(null==i.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",i.data),i.from&&(i.from=i.from),i}async function y(e,t,r){let s=g(e,"resolveName"),a=d(s)?s:null;return await Promise.all(t.map((e,t)=>e.walkAsync(r[t],(e,t)=>(t=n.Typed.dereference(t,e),"address"===e)?(0,i.resolveAddress)(t,a):t)))}t.copyOverrides=b,t.resolveArgs=y;let x=Symbol.for("_ethersInternal_contract"),w=new WeakMap;function v(e){return w.get(e[x])}async function A(e,t){let r;let n=null;if(Array.isArray(t)){let n=function(t){if((0,a.isHexString)(t,32))return t;let r=e.interface.getEvent(t);return(0,a.assertArgument)(r,"unknown fragment","name",t),r.topicHash};r=t.map(e=>null==e?null:Array.isArray(e)?e.map(n):n(e))}else if("*"===t)r=[null];else if("string"==typeof t)(0,a.isHexString)(t,32)?r=[t]:(n=e.interface.getEvent(t),(0,a.assertArgument)(n,"unknown fragment","event",t),r=[n.topicHash]);else t&&"object"==typeof t&&"getTopicFilter"in t&&"function"==typeof t.getTopicFilter&&t.fragment?r=await t.getTopicFilter():"fragment"in t?r=[(n=t.fragment).topicHash]:(0,a.assertArgument)(!1,"unknown event name","event",t);return{fragment:n,tag:(r=r.map(e=>{if(null==e)return null;if(Array.isArray(e)){let t=Array.from(new Set(e.map(e=>e.toLowerCase())).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})).map(e=>null==e?"null":Array.isArray(e)?e.join("|"):e).join("&"),topics:r}}async function E(e,t){let{subs:r}=v(e);return r.get((await A(e,t)).tag)||null}async function k(e,t,r){let n=m(e.runner);(0,a.assert)(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});let{fragment:i,tag:s,topics:l}=await A(e,r),{addr:c,subs:u}=v(e),d=u.get(s);if(!d){let t={address:c||e,topics:l},a=t=>{let n=i;if(null==n)try{n=e.interface.getEvent(t.topics[0])}catch(e){}if(n){let s=n,a=i?e.interface.decodeEventLog(i,t.data,t.topics):[];I(e,r,a,n=>new o.ContractEventPayload(e,n,r,s,t))}else I(e,r,[],n=>new o.ContractUnknownEventPayload(e,n,r,t))},h=[];d={tag:s,listeners:[],start:()=>{!h.length&&h.push(n.on(t,a))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),n.off(t,a)}},u.set(s,d)}return d}let P=Promise.resolve();async function S(e,t,r,n){await P;let i=await E(e,t);if(!i)return!1;let s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:t,once:i})=>{let s=Array.from(r);n&&s.push(n(i?null:t));try{t.call(e,...s)}catch(e){}return!i}),0===i.listeners.length&&(i.stop(),v(e).subs.delete(i.tag)),s>0}async function I(e,t,r,n){try{await P}catch(e){}let i=S(e,t,r,n);return P=i,await i}let T=["then"];class _{target;interface;runner;filters;[x];fallback;constructor(e,t,r,s){var p;let y;(0,a.assertArgument)("string"==typeof e||(0,i.isAddressable)(e),"invalid value for Contract target","target",e),null==r&&(r=null);let A=n.Interface.from(t);(0,a.defineProperties)(this,{target:e,runner:r,interface:A}),Object.defineProperty(this,x,{value:{}});let E=null,k=null;if(s){let e=m(r);k=new o.ContractTransactionResponse(this.interface,e,s)}let P=new Map;if("string"==typeof e){if((0,a.isHexString)(e))E=e,y=Promise.resolve(e);else{let t=g(r,"resolveName");if(!d(t))throw(0,a.makeError)("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});y=t.resolveName(e).then(t=>{if(null==t)throw(0,a.makeError)("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return v(this).addr=t,t})}}else y=e.getAddress().then(e=>{if(null==e)throw Error("TODO");return v(this).addr=e,e});p={addrPromise:y,addr:E,deployTx:k,subs:P},w.set(this[x],p);let S=new Proxy({},{get:(e,t,r)=>{if("symbol"==typeof t||T.indexOf(t)>=0)return Reflect.get(e,t,r);try{return this.getEvent(t)}catch(e){if(!(0,a.isError)(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>T.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return(0,a.defineProperties)(this,{filters:S}),(0,a.defineProperties)(this,{fallback:A.receive||A.fallback?function(e){let t=async function(t){let r=await b(t,["data"]);r.to=await e.getAddress(),r.from&&(r.from=await (0,i.resolveAddress)(r.from,f(e.runner)));let n=e.interface,s=(0,a.getBigInt)(r.value||l,"overrides.value")===l,o="0x"===(r.data||"0x");!n.fallback||n.fallback.payable||!n.receive||o||s||(0,a.assertArgument)(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),(0,a.assertArgument)(n.fallback||o,"cannot send data to receive-only contract","overrides.data",r.data);let c=n.receive||n.fallback&&n.fallback.payable;return(0,a.assertArgument)(c||s,"cannot send value to non-payable fallback","overrides.value",r.value),(0,a.assertArgument)(n.fallback||o,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){let n=g(e.runner,"call");(0,a.assert)(c(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let i=await t(r);try{return await n.call(i)}catch(t){if((0,a.isCallException)(t)&&t.data)throw e.interface.makeError(t.data,i);throw t}},n=async function(r){let n=e.runner;(0,a.assert)(h(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let i=await n.sendTransaction(await t(r)),s=m(e.runner);return new o.ContractTransactionResponse(e.interface,s,i)},s=async function(r){let n=g(e.runner,"estimateGas");return(0,a.assert)(u(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await t(r))},d=async e=>await n(e);return(0,a.defineProperties)(d,{_contract:e,estimateGas:s,populateTransaction:t,send:n,staticCall:r}),d}(this):null}),new Proxy(this,{get:(e,t,r)=>{if("symbol"==typeof t||t in e||T.indexOf(t)>=0)return Reflect.get(e,t,r);try{return e.getFunction(t)}catch(e){if(!(0,a.isError)(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||T.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new _(this.target,this.interface,e)}attach(e){return new _(e,this.interface,this.runner)}async getAddress(){return await v(this).addrPromise}async getDeployedCode(){let e=m(this.runner);(0,a.assert)(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){let e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;let t=m(this.runner);return(0,a.assert)(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((e,r)=>{let n=async()=>{try{let r=await this.getDeployedCode();if(null!=r)return e(this);t.once("block",n)}catch(e){r(e)}};n()})}deploymentTransaction(){return v(this).deployTx}getFunction(e){return"string"!=typeof e&&(e=e.format()),function(e,t){let r=function(...r){let n=e.interface.getFunction(t,r);return(0,a.assert)(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),n},n=async function(...t){let n=r(...t),s={};if(n.inputs.length+1===t.length&&(s=await b(t.pop())).from&&(s.from=await (0,i.resolveAddress)(s.from,f(e.runner))),n.inputs.length!==t.length)throw Error("internal error: fragment inputs doesn't match arguments; should not happen");let o=await y(e.runner,n.inputs,t);return Object.assign({},s,await (0,a.resolveProperties)({to:e.getAddress(),data:e.interface.encodeFunctionData(n,o)}))},s=async function(...e){let t=await p(...e);return 1===t.length?t[0]:t},l=async function(...t){let r=e.runner;(0,a.assert)(h(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let i=await r.sendTransaction(await n(...t)),s=m(e.runner);return new o.ContractTransactionResponse(e.interface,s,i)},d=async function(...t){let r=g(e.runner,"estimateGas");return(0,a.assert)(u(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await n(...t))},p=async function(...t){let i=g(e.runner,"call");(0,a.assert)(c(i),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let s=await n(...t),o="0x";try{o=await i.call(s)}catch(t){if((0,a.isCallException)(t)&&t.data)throw e.interface.makeError(t.data,s);throw t}let l=r(...t);return e.interface.decodeFunctionResult(l,o)},x=async(...e)=>r(...e).constant?await s(...e):await l(...e);return(0,a.defineProperties)(x,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:r,estimateGas:d,populateTransaction:n,send:l,staticCall:s,staticCallResult:p}),Object.defineProperty(x,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getFunction(t);return(0,a.assert)(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),x}(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),function(e,t){let r=function(...r){let n=e.interface.getEvent(t,r);return(0,a.assert)(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),n},n=function(...t){return new p(e,r(...t),t)};return(0,a.defineProperties)(n,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:r}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getEvent(t);return(0,a.assert)(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),n}(this,e)}async queryTransaction(e){throw Error("@TODO")}async queryFilter(e,t,r){null==t&&(t=0),null==r&&(r="latest");let{addr:n,addrPromise:i}=v(this),l=n||await i,{fragment:c,topics:u}=await A(this,e),d={address:l,topics:u,fromBlock:t,toBlock:r},h=m(this.runner);return(0,a.assert)(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(d)).map(e=>{let t=c;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new o.EventLog(e,this.interface,t)}catch(t){return new o.UndecodedEventLog(e,t)}return new s.Log(e,h)})}async on(e,t){let r=await k(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){let r=await k(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await I(this,e,t,null)}async listenerCount(e){if(e){let t=await E(this,e);return t?t.listeners.length:0}let{subs:t}=v(this),r=0;for(let{listeners:e}of t.values())r+=e.length;return r}async listeners(e){if(e){let t=await E(this,e);return t?t.listeners.map(({listener:e})=>e):[]}let{subs:t}=v(this),r=[];for(let{listeners:e}of t.values())r=r.concat(e.map(({listener:e})=>e));return r}async off(e,t){let r=await E(this,e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return(null==t||0===r.listeners.length)&&(r.stop(),v(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){let t=await E(this,e);if(!t)return this;t.stop(),v(this).subs.delete(t.tag)}else{let{subs:e}=v(this);for(let{tag:t,stop:r}of e.values())r(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends _{constructor(t,r=null){super(t,e,r)}}return t}static from(e,t,r){return null==r&&(r=null),new this(e,t,r)}}function C(){return _}t.BaseContract=_;class O extends C(){}t.Contract=O},3366:(e,t,r)=>{"use strict";r.d(t,{O:()=>m});var n=r(9865),i=r(1970),s=r(6552);class a{fp;h;seed;constructor(e,t,r,n=2){if(n>64)throw TypeError("Invalid Fingerprint Size");let s=t.hashV(e,r),a=(0,i.c)(n);for(let e=0;e<a.length;e++)a[e]=s[e];0===a.length&&(a[0]=7),this.fp=a,this.h=t,this.seed=r}hash(){return this.h.hash(this.fp,this.seed)}equals(e){return e?.fp instanceof Uint8Array&&(0,s.a)(this.fp,e.fp)}}function o(e,t){return Math.floor(Math.random()*(t-e))+e}class l{contents;constructor(e){this.contents=Array(e).fill(null)}has(e){if(!(e instanceof a))throw TypeError("Invalid Fingerprint");return this.contents.some(t=>e.equals(t))}add(e){if(!(e instanceof a))throw TypeError("Invalid Fingerprint");for(let t=0;t<this.contents.length;t++)if(null==this.contents[t]){this.contents[t]=e;break}return!0}swap(e){if(!(e instanceof a))throw TypeError("Invalid Fingerprint");let t=o(0,this.contents.length-1),r=this.contents[t];return this.contents[t]=e,r}remove(e){if(!(e instanceof a))throw TypeError("Invalid Fingerprint");let t=this.contents.findIndex(t=>e.equals(t));return t>-1&&(this.contents[t]=null,!0)}}let c={32:16777619n,64:1099511628211n,128:0x1000000000000000000013bn,256:0x1000000000000000000000000000000000000000163n,512:0x100000000000000000000000000000000000000000000000000000000000000000000000000000000000157n,1024:0x10000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018dn},u={32:2166136261n,64:0xcbf29ce484222325n,128:0x6c62272e07bb014262b821756295c58dn,256:0xdd268dbcaac550362d98c384c4e576ccc8b1536847b6bbb31023b4c8caee0535n,512:0xb86db0b1171f4416dca1e50f309990acac87d059c90000000000000000000d21e948f68a34c192f62ea79bc942dbe7ce182036415f56e34bac982aac4afe9fd9n,1024:0x5f7a76758ecc4d32e56d5a591028b74b29fc4223fdada16c3bf34eda3674da9a21d9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000004c6d7eb6e73802734510a555f256cc005ae556bde8cc9c6a93b21aff4b16c71ee90b3n},d=new globalThis.TextEncoder,h={hash:e=>Number(function(e,{size:t=32,utf8Buffer:r}={}){if(!c[t])throw Error("The `size` option must be one of 32, 64, 128, 256, 512, or 1024");if("string"==typeof e){if(r)return function(e,t,r){if(0===r.length)throw Error("The `utf8Buffer` option must have a length greater than zero");let n=c[t],i=u[t],s=e;for(;s.length>0;){let e=d.encodeInto(s,r);s=s.slice(e.read);for(let s=0;s<e.written;s++)i^=BigInt(r[s]),i=BigInt.asUintN(t,i*n)}return i}(e,t,r);e=d.encode(e)}return function(e,t){let r=c[t],n=u[t];for(let i=0;i<e.length;i++)n^=BigInt(e[i]),n=BigInt.asUintN(t,n*r);return n}(e,t)}(e,{size:32})),hashV:(e,t)=>(function(e){let t=e.toString(16);return t.length%2==1&&(t=`0${t}`),(0,n.s)(t,"base16")})(h.hash(e,t))};class f{bucketSize;filterSize;fingerprintSize;buckets;count;hash;seed;constructor(e){this.filterSize=e.filterSize,this.bucketSize=e.bucketSize??4,this.fingerprintSize=e.fingerprintSize??2,this.count=0,this.buckets=[],this.hash=e.hash??h,this.seed=e.seed??o(0,1024)}add(e){"string"==typeof e&&(e=(0,n.s)(e));let t=new a(e,this.hash,this.seed,this.fingerprintSize),r=this.hash.hash(e,this.seed)%this.filterSize,i=(r^t.hash())%this.filterSize;if(null==this.buckets[r]&&(this.buckets[r]=new l(this.bucketSize)),null==this.buckets[i]&&(this.buckets[i]=new l(this.bucketSize)),this.buckets[r].add(t)||this.buckets[i].add(t))return this.count++,!0;let s=[r,i],c=s[o(0,s.length-1)];null==this.buckets[c]&&(this.buckets[c]=new l(this.bucketSize));for(let e=0;e<500;e++){let e=this.buckets[c].swap(t);if(null!=e){if(c=(c^e.hash())%this.filterSize,null==this.buckets[c]&&(this.buckets[c]=new l(this.bucketSize)),this.buckets[c].add(e))return this.count++,!0;continue}}return!1}has(e){"string"==typeof e&&(e=(0,n.s)(e));let t=new a(e,this.hash,this.seed,this.fingerprintSize),r=this.hash.hash(e,this.seed)%this.filterSize,i=this.buckets[r]?.has(t)??!1;if(i)return i;let s=(r^t.hash())%this.filterSize;return this.buckets[s]?.has(t)??!1}remove(e){"string"==typeof e&&(e=(0,n.s)(e));let t=new a(e,this.hash,this.seed,this.fingerprintSize),r=this.hash.hash(e,this.seed)%this.filterSize,i=this.buckets[r]?.remove(t)??!1;if(i)return this.count--,i;let s=(r^t.hash())%this.filterSize,o=this.buckets[s]?.remove(t)??!1;return o&&this.count--,o}get reliable(){return 90>=Math.floor(100*(this.count/this.filterSize))}}let p={1:.5,2:.84,4:.95,8:.98};class g{filterSize;bucketSize;fingerprintSize;scale;filterSeries;hash;seed;constructor(e){this.bucketSize=e.bucketSize??4,this.filterSize=e.filterSize??262144/this.bucketSize,this.fingerprintSize=e.fingerprintSize??2,this.scale=e.scale??2,this.hash=e.hash??h,this.seed=e.seed??o(0,1024),this.filterSeries=[new f({filterSize:this.filterSize,bucketSize:this.bucketSize,fingerprintSize:this.fingerprintSize,hash:this.hash,seed:this.seed})]}add(e){if("string"==typeof e&&(e=(0,n.s)(e)),this.has(e))return!0;let t=this.filterSeries.find(e=>e.reliable);return null==t&&(t=new f({filterSize:this.filterSize*Math.pow(this.scale,this.filterSeries.length),bucketSize:this.bucketSize,fingerprintSize:this.fingerprintSize,hash:this.hash,seed:this.seed}),this.filterSeries.push(t)),t.add(e)}has(e){"string"==typeof e&&(e=(0,n.s)(e));for(let t=0;t<this.filterSeries.length;t++)if(this.filterSeries[t].has(e))return!0;return!1}remove(e){"string"==typeof e&&(e=(0,n.s)(e));for(let t=0;t<this.filterSeries.length;t++)if(this.filterSeries[t].remove(e))return!0;return!1}get count(){return this.filterSeries.reduce((e,t)=>e+t.count,0)}}function m(e,t=.001,r){return new g({...function(e,t=.001){let r=function(e=.001){return e>.002?2:e>1e-5?4:8}(t),n=Math.round(e/p[r]),i=Math.min(Math.ceil(Math.log2(1/t)+Math.log2(2*r)),64);return{filterSize:n,bucketSize:r,fingerprintSize:i}}(e,t),...r??{}})}},3414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mnemonic=void 0;let n=r(6870),i=r(8662),s=r(5250);function a(e){return(1<<e)-1<<8-e&255}function o(e,t){(0,i.assertNormalize)("NFKD"),null==t&&(t=s.LangEn.wordlist());let r=t.split(e);(0,i.assertArgument)(r.length%3==0&&r.length>=12&&r.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");let o=new Uint8Array(Math.ceil(11*r.length/8)),l=0;for(let e=0;e<r.length;e++){let n=t.getWordIndex(r[e].normalize("NFKD"));(0,i.assertArgument)(n>=0,`invalid mnemonic word at index ${e}`,"mnemonic","[ REDACTED ]");for(let e=0;e<11;e++)n&1<<10-e&&(o[l>>3]|=1<<7-l%8),l++}let c=32*r.length/3,u=a(r.length/3),d=(0,i.getBytes)((0,n.sha256)(o.slice(0,c/8)))[0]&u;return(0,i.assertArgument)(d===(o[o.length-1]&u),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),(0,i.hexlify)(o.slice(0,c/8))}function l(e,t){(0,i.assertArgument)(e.length%4==0&&e.length>=16&&e.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),null==t&&(t=s.LangEn.wordlist());let r=[0],o=11;for(let t=0;t<e.length;t++)o>8?(r[r.length-1]<<=8,r[r.length-1]|=e[t],o-=8):(r[r.length-1]<<=o,r[r.length-1]|=e[t]>>8-o,r.push(e[t]&((1<<8-o)-1&255)),o+=3);let l=e.length/4,c=parseInt((0,n.sha256)(e).substring(2,4),16)&a(l);return r[r.length-1]<<=l,r[r.length-1]|=c>>8-l,t.join(r.map(e=>t.getWord(e)))}let c={};class u{phrase;password;wordlist;entropy;constructor(e,t,r,n,a){null==n&&(n=""),null==a&&(a=s.LangEn.wordlist()),(0,i.assertPrivate)(e,c,"Mnemonic"),(0,i.defineProperties)(this,{phrase:r,password:n,wordlist:a,entropy:t})}computeSeed(){let e=(0,i.toUtf8Bytes)("mnemonic"+this.password,"NFKD");return(0,n.pbkdf2)((0,i.toUtf8Bytes)(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,r){let n=o(e,r);return e=l((0,i.getBytes)(n),r),new u(c,n,e,t,r)}static fromEntropy(e,t,r){let n=(0,i.getBytes)(e,"entropy"),s=l(n,r);return new u(c,(0,i.hexlify)(n),s,t,r)}static entropyToPhrase(e,t){return l((0,i.getBytes)(e,"entropy"),t)}static phraseToEntropy(e,t){return o(e,t)}static isValidMnemonic(e,t){try{return o(e,t),!0}catch(e){}return!1}}t.Mnemonic=u},3422:(e,t,r)=>{"use strict";r.d(t,{w7:()=>s,wM:()=>i});var n=r(5367);function i(e){return!!(0,n.vm)(e)}function s(e){return!!(0,n.JI)(e)}},3525:(e,t,r)=>{"use strict";r.d(t,{Fo:()=>M});var n={};r.r(n),r.d(n,{base10:()=>d});var i={};r.r(i),r.d(i,{base16:()=>h,base16upper:()=>f});var s={};r.r(s),r.d(s,{base2:()=>p});var a={};r.r(a),r.d(a,{base256emoji:()=>y});var o={};r.r(o),r.d(o,{base8:()=>E});var l={};r.r(l),r.d(l,{identity:()=>P});var c={};r.r(c),r.d(c,{code:()=>_,decode:()=>O,encode:()=>C,name:()=>T});var u=r(8122);let d=(0,u._Q)({prefix:"9",name:"base10",alphabet:"0123456789"}),h=(0,u.yE)({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),f=(0,u.yE)({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),p=(0,u.yE)({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),g=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),m=g.reduce((e,t,r)=>(e[r]=t,e),[]),b=g.reduce((e,t,r)=>{let n=t.codePointAt(0);if(null==n)throw Error(`Invalid character: ${t}`);return e[n]=r,e},[]),y=(0,u.HT)({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=m[t],"")},decode:function(e){let t=[];for(let r of e){let e=r.codePointAt(0);if(null==e)throw Error(`Invalid character: ${r}`);let n=b[e];if(null==n)throw Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}});var x=r(5587),w=r(4503),v=r(5839),A=r(3172);let E=(0,u.yE)({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var k=r(3751);let P=(0,u.HT)({prefix:"\0",name:"identity",encode:e=>(0,k.dI)(e),decode:e=>(0,k.sH)(e)}),S=new TextEncoder,I=new TextDecoder,T="json",_=512;function C(e){return S.encode(JSON.stringify(e))}function O(e){return JSON.parse(I.decode(e))}r(5766);var R=r(3315),N=r(6572);r(7196);let M={...l,...s,...o,...n,...i,...x,...w,...v,...A,...a};({...N,...R})},3539:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayCoder=t.unpack=t.pack=void 0;let n=r(8662),i=r(4037),s=r(2884),a=r(5699);function o(e,t,r){let i=[];if(Array.isArray(r))i=r;else if(r&&"object"==typeof r){let e={};i=t.map(t=>{let i=t.localName;return(0,n.assert)(i,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),(0,n.assert)(!e[i],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),e[i]=!0,r[i]})}else(0,n.assertArgument)(!1,"invalid tuple value","tuple",r);(0,n.assertArgument)(t.length===i.length,"types/value length mismatch","tuple",r);let a=new s.Writer,o=new s.Writer,l=[];t.forEach((e,t)=>{let r=i[t];if(e.dynamic){let t=o.length;e.encode(o,r);let n=a.writeUpdatableValue();l.push(e=>{n(e+t)})}else e.encode(a,r)}),l.forEach(e=>{e(a.length)});let c=e.appendWriter(a);return c+e.appendWriter(o)}function l(e,t){let r=[],i=[],a=e.subReader(0);return t.forEach(t=>{let s=null;if(t.dynamic){let r=e.readIndex(),i=a.subReader(r);try{s=t.decode(i)}catch(e){if((0,n.isError)(e,"BUFFER_OVERRUN"))throw e;(s=e).baseType=t.name,s.name=t.localName,s.type=t.type}}else try{s=t.decode(e)}catch(e){if((0,n.isError)(e,"BUFFER_OVERRUN"))throw e;(s=e).baseType=t.name,s.name=t.localName,s.type=t.type}if(void 0==s)throw Error("investigate");r.push(s),i.push(t.localName||null)}),s.Result.fromItems(r,i)}t.pack=o,t.unpack=l;class c extends s.Coder{coder;length;constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),(0,n.defineProperties)(this,{coder:e,length:t})}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){let r=i.Typed.dereference(t,"array");Array.isArray(r)||this._throwError("expected array value",r);let s=this.length;-1===s&&(s=r.length,e.writeValue(r.length)),(0,n.assertArgumentCount)(r.length,s,"coder array"+(this.localName?" "+this.localName:""));let a=[];for(let e=0;e<r.length;e++)a.push(this.coder);return o(e,a,r)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),(0,n.assert)(t*s.WordSize<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*s.WordSize,length:e.dataLength}));let r=[];for(let e=0;e<t;e++)r.push(new a.AnonymousCoder(this.coder));return l(e,r)}}t.ArrayCoder=c},3547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventPayload=void 0;let n=r(9959);class i{filter;emitter;#T;constructor(e,t,r){this.#T=t,(0,n.defineProperties)(this,{emitter:e,filter:r})}async removeListener(){null!=this.#T&&await this.emitter.off(this.filter,this.#T)}}t.EventPayload=i},3573:(e,t,r)=>{"use strict";let n,i,s,a,o,l,c,u,d,h,f,p,g,m,b,y;r.d(t,{k:()=>tS});var x=r(9982),w=r(2783),v=r(4922),A=r(1819),E=r(2563),k=r(936),P=r(7939),S=r(8616),I=r(7506),T=r(8121),_=r(1456);function C(e){return async function(t,r){let n;(0,x.vA)(null==r||!r.cancelled,"request cancelled before sending","CANCELLED");let i=t.url.split(":")[0].toLowerCase();(0,x.vA)("http"===i||"https"===i,`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),(0,x.vA)("https"===i||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null,a=new AbortController,o=setTimeout(()=>{s=(0,x.xz)("request timeout","TIMEOUT"),a.abort()},t.timeout);r&&r.addListener(()=>{s=(0,x.xz)("request cancelled","CANCELLED"),a.abort()});let l=Object.assign({},e,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:a.signal});try{n=await fetch(t.url,l)}catch(e){if(clearTimeout(o),s)throw s;throw e}clearTimeout(o);let c={};n.headers.forEach((e,t)=>{c[t.toLowerCase()]=e});let u=await n.arrayBuffer(),d=null==u?null:new Uint8Array(u);return{statusCode:n.status,statusMessage:n.statusText,headers:c,body:d}}}C({});let O=C(),R=RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),N=RegExp("^ipfs://(ipfs/)?(.*)$","i"),M=!1;async function B(e,t){try{var r;let t=e.match(R);if(!t)throw Error("invalid data");return new H(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){let t=new Uint8Array((e=atob(e)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return(0,T.q5)(t)}(t[3]):(r=t[3],(0,I.YW)(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(t){return new H(599,"BAD REQUEST (invalid data: URI)",{},null,new z(e))}}function D(e){return async function(t,r){try{let r=t.match(N);if(!r)throw Error("invalid link");return new z(`${e}${r[2]}`)}catch(e){return new H(599,"BAD REQUEST (invalid IPFS URI)",{},null,new z(t))}}}let L={data:B,ipfs:D("https://gateway.ipfs.io/ipfs/")},U=new WeakMap;class F{#ee;#et;constructor(e){this.#ee=[],this.#et=!1,U.set(e,()=>{if(!this.#et){for(let e of(this.#et=!0,this.#ee))setTimeout(()=>{e()},0);this.#ee=[]}})}addListener(e){(0,x.vA)(!this.#et,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#ee.push(e)}get cancelled(){return this.#et}checkSignal(){(0,x.vA)(!this.cancelled,"cancelled","CANCELLED",{})}}function j(e){if(null==e)throw Error("missing signal; should not happen");return e.checkSignal(),e}class z{#er;#en;#ei;#es;#ea;#z;#eo;#el;#ec;#eu;#ed;#eh;#ef;#ep;#eg;get url(){return this.#z}set url(e){this.#z=String(e)}get body(){return null==this.#eo?null:new Uint8Array(this.#eo)}set body(e){if(null==e)this.#eo=void 0,this.#el=void 0;else if("string"==typeof e)this.#eo=(0,I.YW)(e),this.#el="text/plain";else if(e instanceof Uint8Array)this.#eo=e,this.#el="application/octet-stream";else if("object"==typeof e)this.#eo=(0,I.YW)(JSON.stringify(e)),this.#el="application/json";else throw Error("invalid body")}hasBody(){return null!=this.#eo}get method(){return this.#es?this.#es:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#es=String(e).toUpperCase()}get headers(){let e=Object.assign({},this.#ei);return this.#ec&&(e.authorization=`Basic ${function(e){let t=(0,T.q5)(e),r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return btoa(r)}((0,I.YW)(this.#ec))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#el&&(e["content-type"]=this.#el),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#ei[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#ei={}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let n=t[r++];return{value:[n,e[n]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#ec||null}setCredentials(e,t){(0,x.MR)(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#ec=`${e}:${t}`}get allowGzip(){return this.#en}set allowGzip(e){this.#en=!!e}get allowInsecureAuthentication(){return!!this.#er}set allowInsecureAuthentication(e){this.#er=!!e}get timeout(){return this.#ea}set timeout(e){(0,x.MR)(e>=0,"timeout must be non-zero","timeout",e),this.#ea=e}get preflightFunc(){return this.#eu||null}set preflightFunc(e){this.#eu=e}get processFunc(){return this.#ed||null}set processFunc(e){this.#ed=e}get retryFunc(){return this.#eh||null}set retryFunc(e){this.#eh=e}get getUrlFunc(){return this.#eg||O}set getUrlFunc(e){this.#eg=e}constructor(e){this.#z=String(e),this.#er=!1,this.#en=!0,this.#ei={},this.#es="",this.#ea=3e5,this.#ep={slotInterval:250,maxAttempts:12},this.#eg=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#eo?(0,T.c$)(this.#eo):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#ep.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#ep.maxAttempts=e.maxAttempts)}async #em(e,t,r,n,i){var s;if(e>=this.#ep.maxAttempts)return i.makeServerError("exceeded maximum retry limit");(0,x.vA)(G()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n}),r>0&&await (s=r,new Promise(e=>setTimeout(e,s)));let a=this.clone(),o=(a.url.split(":")[0]||"").toLowerCase();if(o in L){let e=await L[o](a.url,j(n.#ef));if(e instanceof H){let t=e;if(this.processFunc){j(n.#ef);try{t=await this.processFunc(a,t)}catch(e){(null==e.throttle||"number"!=typeof e.stall)&&t.makeServerError("error in post-processing function",e).assertOk()}}return t}a=e}this.preflightFunc&&(a=await this.preflightFunc(a));let l=await this.getUrlFunc(a,j(n.#ef)),c=new H(l.statusCode,l.statusMessage,l.headers,l.body,n);if(301===c.statusCode||302===c.statusCode){try{let r=c.headers.location||"";return a.redirect(r).#em(e+1,t,0,n,c)}catch(e){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(a,c,e))){let r=c.headers["retry-after"],i=this.#ep.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(i=parseInt(r)),a.clone().#em(e+1,t,i,n,c)}if(this.processFunc){j(n.#ef);try{c=await this.processFunc(a,c)}catch(i){(null==i.throttle||"number"!=typeof i.stall)&&c.makeServerError("error in post-processing function",i).assertOk();let r=this.#ep.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return i.stall>=0&&(r=i.stall),a.clone().#em(e+1,t,r,n,c)}}return c}send(){return(0,x.vA)(null==this.#ef,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#ef=new F(this),this.#em(0,G()+this.timeout,0,this,new H(0,"",{},null,this))}cancel(){(0,x.vA)(null!=this.#ef,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let e=U.get(this);if(!e)throw Error("missing signal; should not happen");e()}redirect(e){let t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();(0,x.vA)("GET"===this.method&&("https"!==t||"http"!==r)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});let n=new z(e);return n.method="GET",n.allowGzip=this.allowGzip,n.timeout=this.timeout,n.#ei=Object.assign({},this.#ei),this.#eo&&(n.#eo=new Uint8Array(this.#eo)),n.#el=this.#el,n}clone(){let e=new z(this.url);return e.#es=this.#es,this.#eo&&(e.#eo=this.#eo),e.#el=this.#el,e.#ei=Object.assign({},this.#ei),e.#ec=this.#ec,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#eu=this.#eu,e.#ed=this.#ed,e.#eh=this.#eh,e.#ep=Object.assign({},this.#ep),e.#eg=this.#eg,e}static lockConfig(){M=!0}static getGateway(e){return L[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw Error(`cannot intercept ${e}; use registerGetUrl`);if(M)throw Error("gateways locked");L[e]=t}static registerGetUrl(e){if(M)throw Error("gateways locked");O=e}static createGetUrlFunc(e){return C(e)}static createDataGateway(){return B}static createIpfsGatewayFunc(e){return D(e)}}class H{#eb;#ey;#ei;#eo;#ex;#ew;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#eo?(0,T.c$)(this.#eo):"null"}>`}get statusCode(){return this.#eb}get statusMessage(){return this.#ey}get headers(){return Object.assign({},this.#ei)}get body(){return null==this.#eo?null:new Uint8Array(this.#eo)}get bodyText(){try{return null==this.#eo?"":(0,I._v)(this.#eo)}catch(e){(0,x.vA)(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){(0,x.vA)(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let n=t[r++];return{value:[n,e[n]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,r,n,i){this.#eb=e,this.#ey=t,this.#ei=Object.keys(r).reduce((e,t)=>(e[t.toLowerCase()]=String(r[t]),e),{}),this.#eo=null==n?null:new Uint8Array(n),this.#ex=i||null,this.#ew={message:""}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);let n=new H(599,r,this.headers,this.body,this.#ex||void 0);return n.#ew={message:e,error:t},n}throwThrottleError(e,t){null==t?t=-1:(0,x.MR)(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);let r=Error(e||"throttling requests");throw(0,S.n)(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#eo}get request(){return this.#ex}ok(){return""===this.#ew.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#ew;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let n=null;try{this.#eo&&(n=(0,I._v)(this.#eo))}catch(e){}(0,x.vA)(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:n,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function G(){return new Date().getTime()}var $=r(2439),V=r(2090),q=r(3683);let K=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function W(e){var t;let r;return t=function(e){let t=0;function r(){return e[t++]<<8|e[t++]}let n=r(),i=1,s=[0,1];for(let e=1;e<n;e++)s.push(i+=r());let a=r(),o=t;t+=a;let l=0,c=0;function u(){return 0==l&&(c=c<<8|e[t++],l=8),c>>--l&1}let d=0x80000000-1,h=0;for(let e=0;e<31;e++)h=h<<1|u();let f=[],p=0,g=0x80000000;for(;;){let e=Math.floor(((h-p+1)*i-1)/g),t=0,r=n;for(;r-t>1;){let n=t+r>>>1;e<s[n]?r=n:t=n}if(0==t)break;f.push(t);let a=p+Math.floor(g*s[t]/i),o=p+Math.floor(g*s[t+1]/i)-1;for(;((a^o)&0x40000000)==0;)h=h<<1&d|u(),a=a<<1&d,o=o<<1&d|1;for(;a&~o&0x20000000;)h=0x40000000&h|h<<1&d>>>1|u(),a=a<<1^0x40000000,o=(0x40000000^o)<<1|0x40000001;p=a,g=1+o-a}let m=n-4;return f.map(t=>{switch(t-m){case 3:return m+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return m+256+(e[o++]<<8|e[o++]);case 1:return m+e[o++];default:return t-1}})}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((e,r)=>t[e.charCodeAt(0)]=r);let r=e.length,n=new Uint8Array(6*r>>3);for(let i=0,s=0,a=0,o=0;i<r;i++)o=o<<6|t[e.charCodeAt(i)],(a+=6)>=8&&(n[s++]=o>>(a-=8));return n}(e)),r=0,()=>t[r++]}function Q(e,t=0){let r=[];for(;;){let n=e(),i=e();if(!i)break;t+=n;for(let e=0;e<i;e++)r.push(t+e);t+=i+1}return r}function Z(e){return Y(()=>{let t=Q(e);if(t.length)return t})}function J(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(function(e,t){let r=1+t(),n=t(),i=Y(t);return X(i.length,1+e,t).flatMap((e,t)=>{let[s,...a]=e;return Array(i[t]).fill().map((e,t)=>{let i=t*n;return[s+t*r,a.map(e=>e+i)]})})}(r,e))}for(;;){var r,n;let i=e()-1;if(i<0)break;t.push((r=i,X(1+(n=e)(),1+r,n).map(e=>[e[0],e.slice(1)])))}return t.flat()}function Y(e){let t=[];for(;;){let r=e(t.length);if(!r)break;t.push(r)}return t}function X(e,t,r){let n=Array(e).fill().map(()=>[]);for(let i=0;i<t;i++)(function(e,t){let r=Array(e);for(let i=0,s=0;i<e;i++){var n;r[i]=s+=1&(n=t())?~n>>1:n>>1}return r})(e,r).forEach((e,t)=>n[t].push(e));return n}function ee(e){return`{${e.toString(16).toUpperCase().padStart(2,"0")}}`}function et(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let r=[];for(let n=0;n<t;)r.push(String.fromCodePoint(...e.slice(n,n+=4096)));return r.join("")}function er(e,t){let r=e.length,n=r-t.length;for(let i=0;0==n&&i<r;i++)n=e[i]-t[i];return n}let en=55204;function ei(e){return e>>24&255}function es(e){return 0xffffff&e}function ea(e){return e>=44032&&e<en}function eo(e){n||function(){let e=W("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");for(let[t,r]of(n=new Map(Z(e).flatMap((e,t)=>e.map(e=>[e,t+1<<24]))),i=new Set(Q(e)),s=new Map,a=new Map,J(e))){if(!i.has(t)&&2==r.length){let[e,n]=r,i=a.get(e);i||(i=new Map,a.set(e,i)),i.set(n,t)}s.set(t,r.reverse())}}();let t=[],r=[],o=!1;function l(e){let r=n.get(e);r&&(o=!0,e|=r),t.push(e)}for(let n of e)for(;;){if(n<128)t.push(n);else if(ea(n)){let e=n-44032,t=e/588|0,r=e%588/28|0,i=e%28;l(4352+t),l(4449+r),i>0&&l(4519+i)}else{let e=s.get(n);e?r.push(...e):l(n)}if(!r.length)break;n=r.pop()}if(o&&t.length>1){let e=ei(t[0]);for(let r=1;r<t.length;r++){let n=ei(t[r]);if(0==n||e<=n){e=n;continue}let i=r-1;for(;;){let r=t[i+1];if(t[i+1]=t[i],t[i]=r,!i||(e=ei(t[--i]))<=n)break}e=ei(t[r])}}return t}function el(e){return eo(e).map(es)}function ec(e){return function(e){let t=[],r=[],n=-1,i=0;for(let s of e){let e=ei(s),o=es(s);if(-1==n)0==e?n=o:t.push(o);else if(i>0&&i>=e)0==e?(t.push(n,...r),r.length=0,n=o):r.push(o),i=e;else{let s=function(e,t){if(e>=4352&&e<4371&&t>=4449&&t<4470)return 44032+(e-4352)*588+(t-4449)*28;if(ea(e)&&t>4519&&t<4547&&(e-44032)%28==0)return e+(t-4519);{let r=a.get(e);return r&&(r=r.get(t))?r:-1}}(n,o);s>=0?n=s:0==i&&0==e?(t.push(n),n=o):(r.push(o),i=e)}}return n>=0&&t.push(n,...r),t}(eo(e))}let eu=e=>Array.from(e);function ed(e,t){return e.P.has(t)||e.Q.has(t)}class eh extends Array{get is_emoji(){return!0}}function ef(){let e,t;if(o)return;let r=W("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI"),n=()=>Q(r),i=()=>new Set(n()),s=(e,t)=>t.forEach(t=>e.add(t));o=new Map(J(r)),l=i(),c=n(),u=new Set(n().map(e=>c[e])),c=new Set(c),d=i(),h=i();let a=Z(r),x=r(),w=()=>{let e=new Set;return n().forEach(t=>s(e,a[t])),s(e,n()),e};f=Y(e=>{let t=Y(r).map(e=>e+96);if(t.length){let n=e>=x;t[0]-=32,t=et(t),n&&(t=`Restricted[${t}]`);let i=w();return{N:t,P:i,Q:w(),M:!r(),R:n}}}),p=i(),g=new Map;let v=n().concat(eu(p)).sort((e,t)=>e-t);for(let{V:e,M:t}of(v.forEach((e,t)=>{let n=r(),i=v[t]=n?v[t-n]:{V:[],M:new Map};i.V.push(e),p.has(e)||g.set(e,i)}),new Set(g.values()))){let r=[];for(let t of e){let e=f.filter(e=>ed(e,t)),n=r.find(({G:t})=>e.some(e=>t.has(e)));n||(n={G:new Set,V:[]},r.push(n)),n.V.push(t),s(n.G,e)}let n=r.flatMap(e=>eu(e.G));for(let{G:e,V:i}of r){let r=new Set(n.filter(t=>!e.has(t)));for(let e of i)t.set(e,r)}}m=new Set;let A=new Set,E=e=>m.has(e)?A.add(e):m.add(e);for(let e of f){for(let t of e.P)E(t);for(let t of e.Q)E(t)}for(let e of m)g.has(e)||A.has(e)||g.set(e,1);for(let n of(s(m,eo(m).map(es)),b=(e=[],t=Q(r),function t({S:r,B:n},i,s){if(!(4&r)||s!==i[i.length-1])for(let a of(2&r&&(s=i[i.length-1]),1&r&&e.push(i),n))for(let e of a.Q)t(a,[...i,e],s)}(function e(n){return{S:r(),B:Y(()=>{let n=Q(r).map(e=>t[e]);if(n.length)return e(n)}),Q:n}}([]),[]),e).map(e=>eh.from(e)).sort(er),y=new Map,b)){let e=[y];for(let t of n){let r=e.map(e=>{let r=e.get(t);return r||(r=new Map,e.set(t,r)),r});65039===t?e.push(...r):e=r}for(let t of e)t.V=n}}function ep(e){return(eb(e)?"":`${eg(em([e]))} `)+ee(e)}function eg(e){return`"${e}"\u200E`}function em(e,t=1/0,r=ee){var n;let i=[];n=e[0],ef(),c.has(n)&&i.push("◌"),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let s=0,a=e.length;for(let t=0;t<a;t++){let n=e[t];eb(n)&&(i.push(et(e.slice(s,t))),i.push(r(n)),s=t+1)}return i.push(et(e.slice(s,a))),i.join("")}function eb(e){return ef(),d.has(e)}function ey(e){return Error(`disallowed character: ${ep(e)}`)}function ex(e,t){let r=ep(t),n=f.find(e=>e.P.has(t));return n&&(r=`${n.N} ${r}`),Error(`illegal mixture: ${e.N} + ${r}`)}function ew(e){return Error(`illegal placement: ${e}`)}function ev(e){return e.filter(e=>65039!=e)}let eA="valid",eE=new Uint8Array(32);function ek(e){return(0,x.MR)(0!==e.length,"invalid ENS name; empty component","comp",e),e}function eP(e){let t=(0,I.YW)(function(e){try{var t;if(0===e.length)throw Error("empty label");return(t=function(e,t,r){if(!e)return[];ef();let n=0;return e.split(".").map(e=>{let i=function(e){let t=[];for(let r=0,n=e.length;r<n;){let n=e.codePointAt(r);r+=n<65536?1:2,t.push(n)}return t}(e),s={input:i,offset:n};n+=i.length+1;try{let e,n=s.tokens=function(e,t,r){let n=[],i=[];for(e=e.slice().reverse();e.length;){let s=function(e,t){let r,n=y,i=e.length;for(;i&&(n=n.get(e[--i]));){let{V:s}=n;s&&(r=s,t&&t.push(...e.slice(i).reverse()),e.length=i)}return r}(e);if(s)i.length&&(n.push(t(i)),i=[]),n.push(r(s));else{let t=e.pop();if(m.has(t))i.push(t);else{let e=o.get(t);if(e)i.push(...e);else if(!l.has(t))throw ey(t)}}}return i.length&&n.push(t(i)),n}(i,t,r),a=n.length;if(!a)throw Error("empty label");let d=s.output=n.flat();if(!function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw Error("underscore allowed only at start")}(d),!(s.emoji=a>1||n[0].is_emoji)&&d.every(e=>e<128))!function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw Error(`invalid label extension: "${et(e.slice(0,4))}"`)}(d),e="ASCII";else{let t=n.flatMap(e=>e.is_emoji?[]:e);if(t.length){if(c.has(d[0]))throw ew("leading combining mark");for(let e=1;e<a;e++){let t=n[e];if(!t.is_emoji&&c.has(t[0]))throw ew(`emoji + combining mark: "${et(n[e-1])} + ${em([t[0]])}"`)}!function(e){let t=e[0],r=K.get(t);if(r)throw ew(`leading ${r}`);let n=e.length,i=-1;for(let s=1;s<n;s++){t=e[s];let n=K.get(t);if(n){if(i==s)throw ew(`${r} + ${n}`);i=s+1,r=n}}if(i==n)throw ew(`trailing ${r}`)}(d);let r=eu(new Set(t)),[i]=function(e){let t=f;for(let r of e){let e=t.filter(e=>ed(e,r));if(!e.length){if(f.some(e=>ed(e,r)))throw ex(t[0],r);throw ey(r)}if(t=e,1==e.length)break}return t}(r);(function(e,t){for(let r of t)if(!ed(e,r))throw ex(e,r);if(e.M){var r;let e=(r=t,eo(r).map(es));for(let t=1,r=e.length;t<r;t++)if(u.has(e[t])){let n=t+1;for(let i;n<r&&u.has(i=e[n]);n++)for(let r=t;r<n;r++)if(e[r]==i)throw Error(`duplicate non-spacing marks: ${ep(i)}`);if(n-t>4)throw Error(`excessive non-spacing marks: ${eg(em(e.slice(t-1,n)))} (${n-t}/4)`);t=n}}})(i,t),function(e,t){let r;let n=[];for(let e of t){let t=g.get(e);if(1===t)return;if(t){let n=t.M.get(e);if(!(r=r?r.filter(e=>n.has(e)):eu(n)).length)return}else n.push(e)}if(r){for(let t of r)if(n.every(e=>ed(t,e)))throw Error(`whole-script confusable: ${e.N}/${t.N}`)}}(i,r),e=i.N}else e="Emoji"}s.type=e}catch(e){s.error=e}return s})}(e,ec,ev)).map(({input:e,error:r,output:n})=>{if(r){let n=r.message;throw Error(1==t.length?n:`Invalid label ${eg(em(e,63))}: ${n}`)}return et(n)}).join(".")}catch(t){(0,x.MR)(!1,`invalid ENS name (${t.message})`,"name",e)}}(e)),r=[];if(0===e.length)return r;let n=0;for(let e=0;e<t.length;e++)46===t[e]&&(r.push(ek(t.slice(n,e))),n=e+1);return(0,x.MR)(n<t.length,"invalid ENS name; empty component","name",e),r.push(ek(t.slice(n))),r}function eS(e){(0,x.MR)("string"==typeof e,"invalid ENS name; not a string","name",e),(0,x.MR)(e.length,"invalid ENS name (empty label)","name",e);let t=eE,r=eP(e);for(;r.length;)t=(0,q.S)((0,T.xW)([t,(0,q.S)(r.pop())]));return(0,T.c$)(t)}eE.fill(0);var eI=r(4096),eT=r(6420),e_=r(4697);function eC(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):(0,x.MR)(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class eO{name;constructor(e){(0,S.n)(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw Error("unsupported coin")}async decodeAddress(e,t){throw Error("unsupported coin")}}let eR=RegExp("^(ipfs)://(.*)$","i"),eN=[RegExp("^(https)://(.*)$","i"),RegExp("^(data):(.*)$","i"),eR,RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class eM{provider;address;name;#ev;#eA;constructor(e,t,r){(0,S.n)(this,{provider:e,address:t,name:r}),this.#ev=null,this.#eA=new V.NZ(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#ev&&(this.#ev=(async()=>{try{return await this.#eA.supportsInterface("0x9061b923")}catch(e){if((0,x.bJ)(e,"CALL_EXCEPTION"))return!1;throw this.#ev=null,e}})()),await this.#ev}async #eE(e,t){var r,n;t=(t||[]).slice();let i=this.#eA.interface;t.unshift(eS(this.name));let s=null;await this.supportsWildcard()&&(s=i.getFunction(e),(0,x.vA)(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[(r=this.name,n=255,(0,x.MR)(true,"DNS encoded label cannot exceed 255","length",n),(0,T.c$)((0,T.xW)(eP(r).map(e=>{(0,x.MR)(e.length<=n,`label ${JSON.stringify(r)} exceeds ${n} bytes`,"name",r);let t=new Uint8Array(e.length+1);return t.set(e,1),t[0]=t.length-1,t})))+"00"),i.encodeFunctionData(s,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{let r=await this.#eA[e](...t);if(s)return i.decodeFunctionResult(s,r)[0];return r}catch(e){if(!(0,x.bJ)(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{let e=await this.#eE("addr(bytes32)");if(null==e||e===$.j)return null;return e}catch(e){if((0,x.bJ)(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<0x80000000){let t=e+0x80000000,r=await this.#eE("addr(bytes32,uint)",[t]);if((0,T.Lo)(r,20))return(0,v.b)(r)}let t=null;for(let r of this.provider.plugins)if(r instanceof eO&&r.supportsCoinType(e)){t=r;break}if(null==t)return null;let r=await this.#eE("addr(bytes32,uint)",[e]);if(null==r||"0x"===r)return null;let n=await t.decodeAddress(e,r);if(null!=n)return n;(0,x.vA)(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){let t=await this.#eE("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){let e=await this.#eE("contenthash(bytes32)");if(null==e||"0x"===e)return null;let t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){let e="e3010170"===t[1]?"ipfs":"ipns",r=parseInt(t[4],16);if(t[5].length===2*r)return`${e}://${(0,e_.R)("0x"+t[2])}`}let r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;(0,x.vA)(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){let e=[{type:"name",value:this.name}];try{let t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<eN.length;r++){let n=t.match(eN[r]);if(null==n)continue;let i=n[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{let r=eC(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:r}),{linkage:e,url:r}}case"erc721":case"erc1155":{let r="erc721"===i?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});let s=await this.getAddress();if(null==s)return e.push({type:"!owner",value:""}),{url:null,linkage:e};let a=(n[2]||"").split("/");if(2!==a.length)return e.push({type:`!${i}caip`,value:n[2]||""}),{url:null,linkage:e};let o=a[1],l=new V.NZ(a[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===i){let t=await l.ownerOf(o);if(s!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===i){let t=await l.balanceOf(s,o);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let c=await l[r](o);if(null==c||"0x"===c)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:c}),"erc1155"===i&&(c=c.replace("{id}",(0,_.up)(o,32).substring(2)),e.push({type:"metadata-url-expanded",value:c})),c.match(/^ipfs:/i)&&(c=eC(c)),e.push({type:"metadata-url",value:c});let u={},d=await new z(c).send();d.assertOk();try{u=d.bodyJson}catch(t){try{e.push({type:"!metadata",value:d.bodyText})}catch(r){let t=d.body;t&&e.push({type:"!metadata",value:(0,T.c$)(t)})}return{url:null,linkage:e}}if(!u)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(u)});let h=u.image;if("string"!=typeof h)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(h.match(/^(https:\/\/|data:)/i));else{let t=h.match(eR);if(null==t)return e.push({type:"!imageUrl-ipfs",value:h}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:h}),h=eC(h)}return e.push({type:"url",value:h}),{linkage:e,url:h}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){let t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return(0,x.vA)(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async #ek(e,t){let r=await eM.getEnsAddress(e);try{let n=new V.NZ(r,["function resolver(bytes32) view returns (address)"],e),i=await n.resolver(eS(t),{enableCcipRead:!0});if(i===$.j)return null;return i}catch(e){throw e}return null}static async fromName(e,t){let r=t;for(;;){if(""===r||"."===r||"eth"!==t&&"eth"===r)return null;let n=await eM.#ek(e,r);if(null!=n){let i=new eM(e,n,t);if(r!==t&&!await i.supportsWildcard())return null;return i}r=r.split(".").slice(1).join(".")}}}var eB=r(242),eD=r(7672);let eL=BigInt(0);function eU(e,t){return function(r){return null==r?t:e(r)}}function eF(e,t){return r=>{if(t&&null==r)return null;if(!Array.isArray(r))throw Error("not an array");return r.map(t=>e(t))}}function ej(e,t){return r=>{let n={};for(let i in e){let s=i;if(t&&i in t&&!(s in r)){for(let e of t[i])if(e in r){s=e;break}}try{let t=e[i](r[s]);void 0!==t&&(n[i]=t)}catch(t){let e=t instanceof Error?t.message:"not-an-error";(0,x.vA)(!1,`invalid value for value.${i} (${e})`,"BAD_DATA",{value:r})}}return n}}function ez(e){return(0,x.MR)((0,T.Lo)(e,!0),"invalid data","value",e),e}function eH(e){return(0,x.MR)((0,T.Lo)(e,32),"invalid hash","value",e),e}let eG=ej({address:v.b,blockHash:eH,blockNumber:_.WZ,data:ez,index:_.WZ,removed:eU(function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}(0,x.MR)(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)},!1),topics:eF(eH),transactionHash:eH,transactionIndex:_.WZ},{index:["logIndex"]}),e$=ej({hash:eU(eH),parentHash:eH,parentBeaconBlockRoot:eU(eH,null),number:_.WZ,timestamp:_.WZ,nonce:eU(ez),difficulty:_.Ab,gasLimit:_.Ab,gasUsed:_.Ab,stateRoot:eU(eH,null),receiptsRoot:eU(eH,null),blobGasUsed:eU(_.Ab,null),excessBlobGas:eU(_.Ab,null),miner:eU(v.b),prevRandao:eU(eH,null),extraData:ez,baseFeePerGas:eU(_.Ab)},{prevRandao:["mixHash"]}),eV=ej({transactionIndex:_.WZ,blockNumber:_.WZ,transactionHash:eH,address:v.b,topics:eF(eH),data:ez,index:_.WZ,blockHash:eH},{index:["logIndex"]}),eq=ej({to:eU(v.b,null),from:eU(v.b,null),contractAddress:eU(v.b,null),index:_.WZ,root:eU(T.c$),gasUsed:_.Ab,blobGasUsed:eU(_.Ab,null),logsBloom:eU(ez),blockHash:eH,hash:eH,logs:eF(function(e){return eV(e)}),blockNumber:_.WZ,cumulativeGasUsed:_.Ab,effectiveGasPrice:eU(_.Ab),blobGasPrice:eU(_.Ab,null),status:eU(_.WZ),type:eU(_.WZ,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function eK(e){e.to&&(0,_.Ab)(e.to)===eL&&(e.to="0x0000000000000000000000000000000000000000");let t=ej({hash:eH,index:eU(_.WZ,void 0),type:e=>"0x"===e||null==e?0:(0,_.WZ)(e),accessList:eU(k.$,null),blobVersionedHashes:eU(eF(eH,!0),null),authorizationList:eU(eF(e=>{let t;if(e.signature)t=e.signature;else{let r=e.yParity;"0x1b"===r?r=0:"0x1c"===r&&(r=1),t=Object.assign({},e,{yParity:r})}return{address:(0,v.b)(e.address),chainId:(0,_.Ab)(e.chainId),nonce:(0,_.Ab)(e.nonce),signature:eD.t.from(t)}},!1),null),blockHash:eU(eH,null),blockNumber:eU(_.WZ,null),transactionIndex:eU(_.WZ,null),from:v.b,gasPrice:eU(_.Ab),maxPriorityFeePerGas:eU(_.Ab),maxFeePerGas:eU(_.Ab),maxFeePerBlobGas:eU(_.Ab,null),gasLimit:_.Ab,to:eU(v.b,null),value:_.Ab,nonce:_.WZ,data:ez,creates:eU(v.b,null),chainId:eU(_.Ab,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){let t=(0,v.b)(e.from),r=(0,_.Ab)(e.nonce,"tx.nonce").toString(16);return r="0"===r?"0x":r.length%2?"0x0"+r:"0x"+r,(0,v.b)((0,T.ZG)((0,q.S)((0,eB.R)([t,r])),12))}(t)),(1===e.type||2===e.type)&&null==e.accessList&&(t.accessList=[]),e.signature?t.signature=eD.t.from(e.signature):t.signature=eD.t.from(e),null==t.chainId){let e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&(0,_.Ab)(t.blockHash)===eL&&(t.blockHash=null),t}class eW{name;constructor(e){(0,S.n)(this,{name:e})}clone(){return new eW(this.name)}}class eQ extends eW{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);let r={effectiveBlock:e};function n(e,n){let i=(t||{})[e];null==i&&(i=n),(0,x.MR)("number"==typeof i,`invalud value for ${e}`,"costs",t),r[e]=i}n("txBase",21e3),n("txCreate",32e3),n("txDataZero",4),n("txDataNonzero",16),n("txAccessListStorageKey",1900),n("txAccessListAddress",2400),(0,S.n)(this,r)}clone(){return new eQ(this.effectiveBlock,this)}}class eZ extends eW{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),(0,S.n)(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new eZ(this.address,this.targetNetwork)}}class eJ extends eW{#z;#H;get url(){return this.#z}get processFunc(){return this.#H}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#z=e,this.#H=t}clone(){return this}}let eY=new Map;class eX{#eP;#eS;#eI;constructor(e,t){this.#eP=e,this.#eS=(0,_.Ab)(t),this.#eI=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#eP}set name(e){this.#eP=e}get chainId(){return this.#eS}set chainId(e){this.#eS=(0,_.Ab)(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===(0,_.Ab)(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===(0,_.Ab)(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===(0,_.Ab)(e.chainId)}catch(e){}return!1}if(null!=e.name)return this.name===e.name}return!1}get plugins(){return Array.from(this.#eI.values())}attachPlugin(e){if(this.#eI.get(e.name))throw Error(`cannot replace existing plugin: ${e.name} `);return this.#eI.set(e.name,e.clone()),this}getPlugin(e){return this.#eI.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){let e=new eX(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){let t=this.getPlugin("org.ethers.plugins.network.GasCost")||new eQ,r=t.txBase;if(null==e.to&&(r+=t.txCreate),e.data)for(let n=2;n<e.data.length;n+=2)"00"===e.data.substring(n,n+2)?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){let n=(0,k.$)(e.accessList);for(let e in n)r+=t.txAccessListAddress+t.txAccessListStorageKey*n[e].storageKeys.length}return r}static from(e){if(function(){!e2&&(e2=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",0xaa36a7,{ensNetwork:0xaa36a7}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[e1("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[e1("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",0xaa37dc,{}),e("xdai",100,{ensNetwork:1}));function e(e,t,r){let n=function(){let n=new eX(e,t);return null!=r.ensNetwork&&n.attachPlugin(new eZ(null,r.ensNetwork)),n.attachPlugin(new eQ),(r.plugins||[]).forEach(e=>{n.attachPlugin(e)}),n};eX.register(e,n),eX.register(t,n),r.altNames&&r.altNames.forEach(e=>{eX.register(e,n)})}}(),null==e)return eX.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){let t=eY.get(e);if(t)return t();if("bigint"==typeof e)return new eX("unknown",e);(0,x.MR)(!1,"unknown network","network",e)}if("function"==typeof e.clone)return e.clone();if("object"==typeof e){(0,x.MR)("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);let t=new eX(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new eZ(e.ensAddress,e.ensNetwork)),t}(0,x.MR)(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));let r=eY.get(e);r&&(0,x.MR)(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),eY.set(e,t)}}function e0(e,t){let r=String(e);if(!r.match(/^[0-9.]+$/))throw Error(`invalid gwei value: ${e}`);let n=r.split(".");if(1===n.length&&n.push(""),2!==n.length)throw Error(`invalid gwei value: ${e}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let e=BigInt(n[1].substring(0,9));!n[1].substring(9).match(/^0+$/)&&e++,n[1]=e.toString()}return BigInt(n[0]+n[1])}function e1(e){return new eJ(e,async(e,t,r)=>{let n;r.setHeader("User-Agent","ethers");try{let[t,i]=await Promise.all([r.send(),e()]),s=(n=t).bodyJson.standard;return{gasPrice:i.gasPrice,maxFeePerGas:e0(s.maxFee,9),maxPriorityFeePerGas:e0(s.maxPriorityFee,9)}}catch(e){(0,x.vA)(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:n,error:e})}})}let e2=!1;var e3=r(1857);function e4(e){return JSON.parse(JSON.stringify(e))}class e6{#G;#V;#eT;#e_;constructor(e){this.#G=e,this.#V=null,this.#eT=4e3,this.#e_=-2}get pollingInterval(){return this.#eT}set pollingInterval(e){this.#eT=e}async #Q(){try{let e=await this.#G.getBlockNumber();if(-2===this.#e_){this.#e_=e;return}if(e!==this.#e_){for(let t=this.#e_+1;t<=e;t++){if(null==this.#V)return;await this.#G.emit("block",t)}this.#e_=e}}catch(e){}null!=this.#V&&(this.#V=this.#G._setTimeout(this.#Q.bind(this),this.#eT))}start(){!this.#V&&(this.#V=this.#G._setTimeout(this.#Q.bind(this),this.#eT),this.#Q())}stop(){this.#V&&(this.#G._clearTimeout(this.#V),this.#V=null)}pause(e){this.stop(),e&&(this.#e_=-2)}resume(){this.start()}}class e5{#G;#Q;#q;constructor(e){this.#G=e,this.#q=!1,this.#Q=e=>{this._poll(e,this.#G)}}async _poll(e,t){throw Error("sub-classes must override this")}start(){!this.#q&&(this.#q=!0,this.#Q(-2),this.#G.on("block",this.#Q))}stop(){this.#q&&(this.#q=!1,this.#G.off("block",this.#Q))}pause(e){this.stop()}resume(){this.start()}}class e8 extends e5{#eC;#eO;constructor(e,t){super(e),this.#eC=t,this.#eO=-2}pause(e){e&&(this.#eO=-2),super.pause(e)}async _poll(e,t){let r=await t.getBlock(this.#eC);null!=r&&(-2===this.#eO?this.#eO=r.number:r.number>this.#eO&&(t.emit(this.#eC,r.number),this.#eO=r.number))}}class e7 extends e5{#C;constructor(e,t){super(e),this.#C=e4(t)}async _poll(e,t){throw Error("@TODO")}}class e9 extends e5{#eR;constructor(e,t){super(e),this.#eR=t}async _poll(e,t){let r=await t.getTransactionReceipt(this.#eR);r&&t.emit(this.#eR,r)}}class te{#G;#C;#V;#q;#e_;constructor(e,t){this.#G=e,this.#C=e4(t),this.#V=this.#Q.bind(this),this.#q=!1,this.#e_=-2}async #Q(e){if(-2===this.#e_)return;let t=e4(this.#C);t.fromBlock=this.#e_+1,t.toBlock=e;let r=await this.#G.getLogs(t);if(0===r.length){this.#e_<e-60&&(this.#e_=e-60);return}for(let e of r)this.#G.emit(this.#C,e),this.#e_=e.blockNumber}start(){!this.#q&&(this.#q=!0,-2===this.#e_&&this.#G.getBlockNumber().then(e=>{this.#e_=e}),this.#G.on("block",this.#V))}stop(){this.#q&&(this.#q=!1,this.#G.off("block",this.#V))}pause(e){this.stop(),e&&(this.#e_=-2)}resume(){this.start()}}let tt=BigInt(2);function tr(e){return e&&"function"==typeof e.then}function tn(e,t){return e+":"+JSON.stringify(t,(e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){let e=Object.keys(t);return e.sort(),e.reduce((e,r)=>(e[r]=t[r],e),{})}return t})}class ti{name;constructor(e){(0,S.n)(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function ts(e){return(e=Array.from(new Set(e).values())).sort(),e}async function ta(e,t){if(null==e)throw Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if((0,T.Lo)(e,32)){let t=e.toLowerCase();return{type:"transaction",tag:tn("tx",{hash:t}),hash:t}}if(e.orphan){let t=e;return{type:"orphan",tag:tn("orphan",t),filter:JSON.parse(JSON.stringify(t))}}if(e.address||e.topics){let r=e,n={topics:(r.topics||[]).map(e=>null==e?null:Array.isArray(e)?ts(e.map(e=>e.toLowerCase())):e.toLowerCase())};if(r.address){let e=[],i=[],s=r=>{(0,T.Lo)(r)?e.push(r):i.push((async()=>{e.push(await (0,A.tG)(r,t))})())};Array.isArray(r.address)?r.address.forEach(s):s(r.address),i.length&&await Promise.all(i),n.address=ts(e.map(e=>e.toLowerCase()))}return{filter:n,tag:tn("event",n),type:"event"}}(0,x.MR)(!1,"unknown ProviderEvent","event",e)}function to(){return new Date().getTime()}let tl={cacheTimeout:250,pollingInterval:4e3};class tc{#eN;#eI;#eM;#eB;#eD;#eL;#eU;#eF;#ej;#ez;#eH;#s;constructor(e,t){if(this.#s=Object.assign({},tl,t||{}),"any"===e)this.#eL=!0,this.#eD=null;else if(e){let t=eX.from(e);this.#eL=!1,this.#eD=Promise.resolve(t),setTimeout(()=>{this.emit("network",t,null)},0)}else this.#eL=!1,this.#eD=null;this.#eF=-1,this.#eU=new Map,this.#eN=new Map,this.#eI=new Map,this.#eM=null,this.#eB=!1,this.#ej=1,this.#ez=new Map,this.#eH=!1}get pollingInterval(){return this.#s.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#eI.values())}attachPlugin(e){if(this.#eI.get(e.name))throw Error(`cannot replace existing plugin: ${e.name} `);return this.#eI.set(e.name,e.connect(this)),this}getPlugin(e){return this.#eI.get(e)||null}get disableCcipRead(){return this.#eH}set disableCcipRead(e){this.#eH=!!e}async #eG(e){let t=this.#s.cacheTimeout;if(t<0)return await this._perform(e);let r=tn(e.method,e),n=this.#eU.get(r);return n||(n=this._perform(e),this.#eU.set(r,n),setTimeout(()=>{this.#eU.get(r)===n&&this.#eU.delete(r)},t)),await n}async ccipReadFetch(e,t,r){if(this.disableCcipRead||0===r.length||null==e.to)return null;let n=e.to.toLowerCase(),i=t.toLowerCase(),s=[];for(let t=0;t<r.length;t++){let a;let o=r[t],l=new z(o.replace("{sender}",n).replace("{data}",i));-1===o.indexOf("{data}")&&(l.body={data:i,sender:n}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:t,urls:r});let c="unknown error";try{a=await l.send()}catch(e){s.push(e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:{error:e}});continue}try{let e=a.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:e}),e.data;e.message&&(c=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:e})}catch(e){}(0,x.vA)(a.statusCode<400||a.statusCode>=500,`response not found during CCIP fetch: ${c}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:o,errorMessage:c}}),s.push(c)}(0,x.vA)(!1,`error encountered during CCIP fetch: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:s}})}_wrapBlock(e,t){return new e3.eB(function(e){let t=e$(e);return t.transactions=e.transactions.map(e=>"string"==typeof e?e:eK(e)),t}(e),this)}_wrapLog(e,t){return new e3.tG(eG(e),this)}_wrapTransactionReceipt(e,t){return new e3.z5(eq(e),this)}_wrapTransactionResponse(e,t){return new e3.uI(eK(e),this)}_detectNetwork(){(0,x.vA)(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){(0,x.vA)(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){let e=(0,_.WZ)(await this.#eG({method:"getBlockNumber"}),"%response");return this.#eF>=0&&(this.#eF=e),e}_getAddress(e){return(0,A.tG)(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return(0,T.Lo)(e)?(0,T.Lo)(e,32)?e:(0,_.nD)(e):("bigint"==typeof e&&(e=(0,_.WZ)(e,"blockTag")),"number"==typeof e)?e>=0?(0,_.nD)(e):this.#eF>=0?(0,_.nD)(this.#eF+e):this.getBlockNumber().then(t=>(0,_.nD)(t+e)):void(0,x.MR)(!1,"invalid blockTag","blockTag",e)}_getFilter(e){let t,r;let n=(e.topics||[]).map(e=>null==e?null:Array.isArray(e)?ts(e.map(e=>e.toLowerCase())):e.toLowerCase()),i="blockHash"in e?e.blockHash:void 0,s=(e,t,r)=>{let s;switch(e.length){case 0:break;case 1:s=e[0];break;default:e.sort(),s=e}if(i&&(null!=t||null!=r))throw Error("invalid filter");let a={};return s&&(a.address=s),n.length&&(a.topics=n),t&&(a.fromBlock=t),r&&(a.toBlock=r),i&&(a.blockHash=i),a},a=[];if(e.address){if(Array.isArray(e.address))for(let t of e.address)a.push(this._getAddress(t));else a.push(this._getAddress(e.address))}return"fromBlock"in e&&(t=this._getBlockTag(e.fromBlock)),("toBlock"in e&&(r=this._getBlockTag(e.toBlock)),a.filter(e=>"string"!=typeof e).length||null!=t&&"string"!=typeof t||null!=r&&"string"!=typeof r)?Promise.all([Promise.all(a),t,r]).then(e=>s(e[0],e[1],e[2])):s(a,t,r)}_getTransactionRequest(e){let t=(0,e3.VS)(e),r=[];if(["to","from"].forEach(e=>{if(null==t[e])return;let n=(0,A.tG)(t[e],this);tr(n)?r.push(async function(){t[e]=await n}()):t[e]=n}),null!=t.blockTag){let e=this._getBlockTag(t.blockTag);tr(e)?r.push(async function(){t.blockTag=await e}()):t.blockTag=e}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(null==this.#eD){let e=(async()=>{try{let e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw this.#eD===e&&(this.#eD=null),t}})();return this.#eD=e,(await e).clone()}let e=this.#eD,[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(this.#eL?(this.emit("network",r,t),this.#eD===e&&(this.#eD=Promise.resolve(r))):(0,x.vA)(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){let e=await this.getNetwork(),t=async()=>{let{_block:t,gasPrice:r,priorityFee:n}=await (0,S.k)({_block:this.#e$("latest",!1),gasPrice:(async()=>{try{let e=await this.#eG({method:"getGasPrice"});return(0,_.Ab)(e,"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{let e=await this.#eG({method:"getPriorityFee"});return(0,_.Ab)(e,"%response")}catch(e){}return null})()}),i=null,s=null,a=this._wrapBlock(t,e);return a&&a.baseFeePerGas&&(s=null!=n?n:BigInt("1000000000"),i=a.baseFeePerGas*tt+s),new e3.J9(r,i,s)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){let e=new z(r.url),n=await r.processFunc(t,this,e);return new e3.J9(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return tr(t)&&(t=await t),(0,_.Ab)(await this.#eG({method:"estimateGas",transaction:t}),"%response")}async #eV(e,t,r){(0,x.vA)(r<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});let n=(0,e3.VS)(e);try{return(0,T.c$)(await this._perform({method:"call",transaction:n,blockTag:t}))}catch(e){if(!this.disableCcipRead&&(0,x.E)(e)&&e.data&&r>=0&&"latest"===t&&null!=n.to&&"0x556f1830"===(0,T.ZG)(e.data,0,4)){let i;let s=e.data,a=await (0,A.tG)(n.to,this);try{i=function(e){let t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};(0,x.vA)((0,T.pO)(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let r=(0,T.ZG)(e,0,32);(0,x.vA)((0,T.ZG)(r,0,12)===(0,T.ZG)(tf,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=(0,T.ZG)(r,12);try{let r=[],n=(0,_.WZ)((0,T.ZG)(e,32,64)),i=(0,_.WZ)((0,T.ZG)(e,n,n+32)),s=(0,T.ZG)(e,n+32);for(let e=0;e<i;e++){let t=function(e,t){try{let r=tu(e,t);if(r)return(0,I._v)(r)}catch(e){}return null}(s,32*e);if(null==t)throw Error("abort");r.push(t)}t.urls=r}catch(e){(0,x.vA)(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let r=tu(e,64);if(null==r)throw Error("abort");t.calldata=r}catch(e){(0,x.vA)(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}(0,x.vA)((0,T.ZG)(e,100,128)===(0,T.ZG)(tf,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=(0,T.ZG)(e,96,100);try{let r=tu(e,128);if(null==r)throw Error("abort");t.extraData=r}catch(e){(0,x.vA)(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(e=>t[e]),t}((0,T.ZG)(e.data,4))}catch(e){(0,x.vA)(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:n,info:{data:s}})}(0,x.vA)(i.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:s,reason:"OffchainLookup",transaction:n,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:i.errorArgs}});let o=await this.ccipReadFetch(n,i.calldata,i.urls);(0,x.vA)(null!=o,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:n,info:{data:e.data,errorArgs:i.errorArgs}});let l={to:a,data:(0,T.xW)([i.selector,function(e){let t=[],r=0;for(let n=0;n<e.length;n++)t.push(th),r+=32;for(let n=0;n<e.length;n++){let i=(0,T.q5)(e[n]);t[n]=td(r),t.push(td(i.length)),t.push(function(e){if(e.length%32==0)return e;let t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}(i)),r+=32+32*Math.ceil(i.length/32)}return(0,T.xW)(t)}([o,i.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{let e=await this.#eV(l,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:e}),e}}throw e}}async #eq(e){let{value:t}=await (0,S.k)({network:this.getNetwork(),value:e});return t}async call(e){let{tx:t,blockTag:r}=await (0,S.k)({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#eq(this.#eV(t,r,e.enableCcipRead?0:-1))}async #eK(e,t,r){let n=this._getAddress(t),i=this._getBlockTag(r);return("string"!=typeof n||"string"!=typeof i)&&([n,i]=await Promise.all([n,i])),await this.#eq(this.#eG(Object.assign(e,{address:n,blockTag:i})))}async getBalance(e,t){return(0,_.Ab)(await this.#eK({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return(0,_.WZ)(await this.#eK({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return(0,T.c$)(await this.#eK({method:"getCode"},e,t))}async getStorage(e,t,r){let n=(0,_.Ab)(t,"position");return(0,T.c$)(await this.#eK({method:"getStorage",position:n},e,r))}async broadcastTransaction(e){let{blockNumber:t,hash:r,network:n}=await (0,S.k)({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=eI.Z.from(e);if(i.hash!==r)throw Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,n).replaceableTransaction(t)}async #e$(e,t){if((0,T.Lo)(e,32))return await this.#eG({method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return"string"!=typeof r&&(r=await r),await this.#eG({method:"getBlock",blockTag:r,includeTransactions:t})}async getBlock(e,t){let{network:r,params:n}=await (0,S.k)({network:this.getNetwork(),params:this.#e$(e,!!t)});return null==n?null:this._wrapBlock(n,r)}async getTransaction(e){let{network:t,params:r}=await (0,S.k)({network:this.getNetwork(),params:this.#eG({method:"getTransaction",hash:e})});return null==r?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){let{network:t,params:r}=await (0,S.k)({network:this.getNetwork(),params:this.#eG({method:"getTransactionReceipt",hash:e})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){let t=await this.#eG({method:"getTransaction",hash:e});if(null==t)throw Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){let{result:t}=await (0,S.k)({network:this.getNetwork(),result:this.#eG({method:"getTransactionResult",hash:e})});return null==t?null:(0,T.c$)(t)}async getLogs(e){let t=this._getFilter(e);tr(t)&&(t=await t);let{network:r,params:n}=await (0,S.k)({network:this.getNetwork(),params:this.#eG({method:"getLogs",filter:t})});return n.map(e=>this._wrapLog(e,r))}_getProvider(e){(0,x.vA)(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await eM.fromName(this,e)}async getAvatar(e){let t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){let t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){let t=eS((e=(0,v.b)(e)).substring(2).toLowerCase()+".addr.reverse");try{let r=await eM.getEnsAddress(this),n=new V.NZ(r,["function resolver(bytes32) view returns (address)"],this),i=await n.resolver(t);if(null==i||i===$.j)return null;let s=new V.NZ(i,["function name(bytes32) view returns (string)"],this),a=await s.name(t);if(await this.resolveName(a)!==e)return null;return a}catch(e){if((0,x.bJ)(e,"BAD_DATA")&&"0x"===e.value||(0,x.bJ)(e,"CALL_EXCEPTION"))return null;throw e}return null}async waitForTransaction(e,t,r){let n=null!=t?t:1;return 0===n?this.getTransactionReceipt(e):new Promise(async(t,i)=>{let s=null,a=async r=>{try{let i=await this.getTransactionReceipt(e);if(null!=i&&r-i.blockNumber+1>=n){t(i),s&&(clearTimeout(s),s=null);return}}catch(e){console.log("EEE",e)}this.once("block",a)};null!=r&&(s=setTimeout(()=>{null!=s&&(s=null,this.off("block",a),i((0,x.xz)("timeout","TIMEOUT",{reason:"timeout"})))},r)),a(await this.getBlockNumber())})}async waitForBlock(e){(0,x.vA)(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){let t=this.#ez.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#ez.delete(e))}_setTimeout(e,t){null==t&&(t=0);let r=this.#ej++,n=()=>{this.#ez.delete(r),e()};if(this.paused)this.#ez.set(r,{timer:null,func:n,time:t});else{let e=setTimeout(n,t);this.#ez.set(r,{timer:e,func:n,time:to()})}return r}_forEachSubscriber(e){for(let t of this.#eN.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new ti(e.type);case"block":{let e=new e6(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new e8(this,e.type);case"event":return new te(this,e.filter);case"transaction":return new e9(this,e.hash);case"orphan":return new e7(this,e.filter)}throw Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(let r of this.#eN.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),null!=this.#eM&&t.pause(this.#eM);break}}async #eW(e,t){let r=await ta(e,this);return"event"===r.type&&t&&t.length>0&&!0===t[0].removed&&(r=await ta({orphan:"drop-log",log:t[0]},this)),this.#eN.get(r.tag)||null}async #eQ(e){let t=await ta(e,this),r=t.tag,n=this.#eN.get(r);if(!n){let e=this._getSubscriber(t);n={subscriber:e,tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#eN.set(r,n)}return n}async on(e,t){let r=await this.#eQ(e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#eM&&r.subscriber.pause(this.#eM)),this}async once(e,t){let r=await this.#eQ(e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#eM&&r.subscriber.pause(this.#eM)),this}async emit(e,...t){let r=await this.#eW(e,t);if(!r||0===r.listeners.length)return!1;let n=r.listeners.length;return r.listeners=r.listeners.filter(({listener:r,once:n})=>{let i=new eT.z(this,n?null:r,e);try{r.call(this,...t,i)}catch(e){}return!n}),0===r.listeners.length&&(r.started&&r.subscriber.stop(),this.#eN.delete(r.tag)),n>0}async listenerCount(e){if(e){let t=await this.#eW(e);return t?t.listeners.length:0}let t=0;for(let{listeners:e}of this.#eN.values())t+=e.length;return t}async listeners(e){if(e){let t=await this.#eW(e);return t?t.listeners.map(({listener:e})=>e):[]}let t=[];for(let{listeners:e}of this.#eN.values())t=t.concat(e.map(({listener:e})=>e));return t}async off(e,t){let r=await this.#eW(e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return t&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),this.#eN.delete(r.tag)),this}async removeAllListeners(e){if(e){let{tag:t,started:r,subscriber:n}=await this.#eQ(e);r&&n.stop(),this.#eN.delete(t)}else for(let[e,{started:t,subscriber:r}]of this.#eN)t&&r.stop(),this.#eN.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#eB}destroy(){for(let e of(this.removeAllListeners(),this.#ez.keys()))this._clearTimeout(e);this.#eB=!0}get paused(){return null!=this.#eM}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#eF=-1,null!=this.#eM){if(!!e==this.#eM)return;(0,x.vA)(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}for(let t of(this._forEachSubscriber(t=>t.pause(e)),this.#eM=!!e,this.#ez.values()))t.timer&&clearTimeout(t.timer),t.time=to()-t.time}resume(){if(null!=this.#eM)for(let e of(this._forEachSubscriber(e=>e.resume()),this.#eM=null,this.#ez.values())){let t=e.time;t<0&&(t=0),e.time=to(),setTimeout(e.func,t)}}}function tu(e,t){if("0x"===e)return null;try{let r=(0,_.WZ)((0,T.ZG)(e,t,t+32)),n=(0,_.WZ)((0,T.ZG)(e,r,r+32));return(0,T.ZG)(e,r+32,r+32+n)}catch(e){}return null}function td(e){let t=(0,_.c4)(e);if(t.length>32)throw Error("internal; should not happen");let r=new Uint8Array(32);return r.set(t,32-t.length),r}let th=new Uint8Array([]),tf="0x0000000000000000000000000000000000000000000000000000000000000000";var tp=r(8199);class tg{#G;#$;#V;#q;#K;#W;constructor(e){this.#G=e,this.#$=null,this.#V=this.#Q.bind(this),this.#q=!1,this.#K=null,this.#W=!1}_subscribe(e){throw Error("subclasses must override this")}_emitResults(e,t){throw Error("subclasses must override this")}_recover(e){throw Error("subclasses must override this")}async #Q(e){try{null==this.#$&&(this.#$=this._subscribe(this.#G));let e=null;try{e=await this.#$}catch(e){if(!(0,x.bJ)(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e){this.#$=null,this.#G._recoverSubscriber(this,this._recover(this.#G));return}let t=await this.#G.getNetwork();if(this.#K||(this.#K=t),this.#K.chainId!==t.chainId)throw Error("chaid changed");if(this.#W)return;let r=await this.#G.send("eth_getFilterChanges",[e]);await this._emitResults(this.#G,r)}catch(e){console.log("@TODO",e)}this.#G.once("block",this.#V)}#Z(){let e=this.#$;e&&(this.#$=null,e.then(e=>{!this.#G.destroyed&&this.#G.send("eth_uninstallFilter",[e])}))}start(){!this.#q&&(this.#q=!0,this.#Q(-2))}stop(){this.#q&&(this.#q=!1,this.#W=!0,this.#Z(),this.#G.off("block",this.#V))}pause(e){e&&this.#Z(),this.#G.off("block",this.#V)}resume(){this.start()}}class tm extends tg{#J;constructor(e,t){super(e),this.#J=JSON.parse(JSON.stringify(t))}_recover(e){return new te(e,this.#J)}async _subscribe(e){return await e.send("eth_newFilter",[this.#J])}async _emitResults(e,t){for(let r of t)e.emit(this.#J,e._wrapLog(r,e._network))}}class tb extends tg{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(let r of t)e.emit("pending",r)}}let ty="bigint,boolean,function,number,string,symbol".split(/,/g);function tx(e){if(null==e||ty.indexOf(typeof e)>=0||"function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(tx);if("object"==typeof e)return Object.keys(e).reduce((t,r)=>(t[r]=e[r],t),{});throw Error(`should not happen: ${e} (${typeof e})`)}function tw(e){return e?e.toLowerCase():e}function tv(e){return e&&"number"==typeof e.pollingInterval}let tA={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1048576,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class tE extends tp.Z{address;constructor(e,t){super(e),t=(0,v.b)(t),(0,S.n)(this,{address:t})}connect(e){(0,x.vA)(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){let t=tx(e),r=[];if(t.from){let n=t.from;r.push((async()=>{let r=await (0,A.tG)(n,this.provider);(0,x.MR)(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r})())}else t.from=this.address;if(null==t.gasLimit&&r.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){let e=t.to;r.push((async()=>{t.to=await (0,A.tG)(e,this.provider)})())}r.length&&await Promise.all(r);let n=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[n])}async sendTransaction(e){let t=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((e,n)=>{let i=[1e3,100],s=0,a=async()=>{try{let n=await this.provider.getTransaction(r);if(null!=n){e(n.replaceableTransaction(t));return}}catch(e){if((0,x.bJ)(e,"CANCELLED")||(0,x.bJ)(e,"BAD_DATA")||(0,x.bJ)(e,"NETWORK_ERROR")||(0,x.bJ)(e,"UNSUPPORTED_OPERATION")){null==e.info&&(e.info={}),e.info.sendTransactionHash=r,n(e);return}if((0,x.bJ)(e,"INVALID_ARGUMENT")&&(s++,null==e.info&&(e.info={}),e.info.sendTransactionHash=r,s>10)){n(e);return}this.provider.emit("error",(0,x.xz)("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:e}))}this.provider._setTimeout(()=>{a()},i.pop()||4e3)};a()})}async signTransaction(e){let t=tx(e);if(t.from){let r=await (0,A.tG)(t.from,this.provider);(0,x.MR)(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r}else t.from=this.address;let r=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){let t="string"==typeof e?(0,I.YW)(e):e;return await this.provider.send("personal_sign",[(0,T.c$)(t),this.address.toLowerCase()])}async signTypedData(e,t,r){let n=tx(r),i=await E.z.resolveNames(e,t,n,async e=>{let t=await (0,A.tG)(e);return(0,x.MR)(null!=t,"TypedData does not support null address","value",e),t});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(E.z.getPayload(i.domain,t,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){let t="string"==typeof e?(0,I.YW)(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),(0,T.c$)(t)])}}class tk extends tc{#s;#eZ;#eJ;#eY;#eX;#K;#e0;#e1(){if(this.#eY)return;let e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#eY=setTimeout(()=>{this.#eY=null;let e=this.#eJ;for(this.#eJ=[];e.length;){let t=[e.shift()];for(;e.length&&t.length!==this.#s.batchMaxCount;)if(t.push(e.shift()),JSON.stringify(t.map(e=>e.payload)).length>this.#s.batchMaxSize){e.unshift(t.pop());break}(async()=>{let e=1===t.length?t[0].payload:t.map(e=>e.payload);this.emit("debug",{action:"sendRpcPayload",payload:e});try{let r=await this._send(e);for(let{resolve:e,reject:n,payload:i}of(this.emit("debug",{action:"receiveRpcResult",result:r}),t)){if(this.destroyed){n((0,x.xz)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:i.method}));continue}let t=r.filter(e=>e.id===i.id)[0];if(null==t){let e=(0,x.xz)("missing response for request","BAD_DATA",{value:r,info:{payload:i}});this.emit("error",e),n(e);continue}if("error"in t){n(this.getRpcError(i,t));continue}e(t.result)}}catch(e){for(let{reject:r}of(this.emit("debug",{action:"receiveRpcError",error:e}),t))r(e)}})()}},e)}constructor(e,t){super(e,t),this.#eZ=1,this.#s=Object.assign({},tA,t||{}),this.#eJ=[],this.#eY=null,this.#K=null,this.#e0=null;{let e=null,t=new Promise(t=>{e=t});this.#eX={promise:t,resolve:e}}let r=this._getOption("staticNetwork");"boolean"==typeof r?((0,x.MR)(!r||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),r&&null!=e&&(this.#K=eX.from(e))):r&&((0,x.MR)(null==e||r.matches(e),"staticNetwork MUST match network object","options",t),this.#K=r)}_getOption(e){return this.#s[e]}get _network(){return(0,x.vA)(this.#K,"network is not available yet","NETWORK_ERROR"),this.#K}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&(0,_.Ab)(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){let r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}let t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){let e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(this.#K)return this.#K}return this.#e0||(this.ready?this.#e0=(async()=>{try{let e=eX.from((0,_.Ab)(await this.send("eth_chainId",[])));return this.#e0=null,e}catch(e){throw this.#e0=null,e}})():this.#e0=(async()=>{let e;let t={id:this.#eZ++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});try{e=(await this._send(t))[0],this.#e0=null}catch(e){throw this.#e0=null,this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:e}),"result"in e)return eX.from((0,_.Ab)(e.result));throw this.getRpcError(t,e)})()),await this.#e0}_start(){null!=this.#eX&&null!=this.#eX.resolve&&(this.#eX.resolve(),this.#eX=null,(async()=>{for(;null==this.#K&&!this.destroyed;)try{this.#K=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",(0,x.xz)("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await new Promise(e=>{setTimeout(e,1e3)})}this.#e1()})())}async _waitUntilReady(){if(null!=this.#eX)return await this.#eX.promise}_getSubscriber(e){return"pending"===e.type?new tb(this):"event"===e.type?this._getOption("polling")?new te(this,e.filter):new tm(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new ti("orphan"):super._getSubscriber(e)}get ready(){return null==this.#eX}getRpcTransaction(e){let t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(null==e[r])return;let n=r;"gasLimit"===r&&(n="gas"),t[n]=(0,_.nD)((0,_.Ab)(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{null!=e[r]&&(t[r]=(0,T.c$)(e[r]))}),e.accessList&&(t.accessList=(0,k.$)(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(e=>e.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(e=>{let t=(0,P.M)(e);return{address:t.address,nonce:(0,_.nD)(t.nonce),chainId:(0,_.nD)(t.chainId),yParity:(0,_.nD)(t.signature.yParity),r:(0,_.nD)(t.signature.r),s:(0,_.nD)(t.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[tw(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[tw(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[tw(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[tw(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(tw):e.filter.address=tw(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){let{method:r}=e,{error:n}=t;if("eth_estimateGas"===r&&n.message){let t=n.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return(0,x.xz)("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:n}});if(t.match(/nonce/i)&&t.match(/too low/i))return(0,x.xz)("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:n}})}if("eth_call"===r||"eth_estimateGas"===r){let t=function e(t){if(null==t)return null;if("string"==typeof t.message&&t.message.match(/revert/i)&&(0,T.Lo)(t.data))return{message:t.message,data:t.data};if("object"==typeof t){for(let r in t){let n=e(t[r]);if(n)return n}return null}if("string"==typeof t)try{return e(JSON.parse(t))}catch(e){}return null}(n),i=w.y.getBuiltinCallException("eth_call"===r?"call":"estimateGas",e.params[0],t?t.data:null);return i.info={error:n,payload:e},i}let i=JSON.stringify(function(e){let t=[];return!function e(t,r){if(null!=t){if("string"==typeof t.message&&r.push(t.message),"object"==typeof t)for(let n in t)e(t[n],r);if("string"==typeof t)try{return e(JSON.parse(t),r)}catch(e){}}}(e,t),t}(n));if("string"==typeof n.message&&n.message.match(/user denied|ethers-user-denied/i))return(0,x.xz)("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:n}});if("eth_sendRawTransaction"===r||"eth_sendTransaction"===r){let t=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return(0,x.xz)("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:n}});if(i.match(/nonce/i)&&i.match(/too low/i))return(0,x.xz)("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:n}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return(0,x.xz)("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:n}});if(i.match(/only replay-protected/i))return(0,x.xz)("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:t,info:{error:n}}})}let s=!!i.match(/the method .* does not exist/i);return(!s&&n&&n.details&&n.details.startsWith("Unauthorized method:")&&(s=!0),s)?(0,x.xz)("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:n,payload:e}}):(0,x.xz)("could not coalesce error","UNKNOWN_ERROR",{error:n,payload:e})}send(e,t){if(this.destroyed)return Promise.reject((0,x.xz)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));let r=this.#eZ++,n=new Promise((n,i)=>{this.#eJ.push({resolve:n,reject:i,payload:{method:e,params:t,id:r,jsonrpc:"2.0"}})});return this.#e1(),n}async getSigner(e){null==e&&(e=0);let t=this.send("eth_accounts",[]);if("number"==typeof e){let r=await t;if(e>=r.length)throw Error("no such account");return new tE(this,r[e])}let{accounts:r}=await (0,S.k)({network:this.getNetwork(),accounts:t});for(let t of(e=(0,v.b)(e),r))if((0,v.b)(t)===e)return new tE(this,e);throw Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(e=>new tE(this,e))}destroy(){for(let{payload:e,reject:t}of(this.#eY&&(clearTimeout(this.#eY),this.#eY=null),this.#eJ))t((0,x.xz)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#eJ=[],super.destroy()}}class tP extends tk{#e2;constructor(e,t){super(e,t);let r=this._getOption("pollingInterval");null==r&&(r=tA.pollingInterval),this.#e2=r}_getSubscriber(e){let t=super._getSubscriber(e);return tv(t)&&(t.pollingInterval=this.#e2),t}get pollingInterval(){return this.#e2}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw Error("invalid interval");this.#e2=e,this._forEachSubscriber(e=>{tv(e)&&(e.pollingInterval=this.#e2)})}}class tS extends tP{#ex;#e3;constructor(e,t,r){let n=Object.assign({},null!=r?r:{},{batchMaxCount:1});(0,x.MR)(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,n),this.#e3=null,r&&r.providerInfo&&(this.#e3=r.providerInfo),this.#ex=async(t,r)=>{let n={method:t,params:r};this.emit("debug",{action:"sendEip1193Request",payload:n});try{let t=await e.request(n);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(t){let e=Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=n,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}get providerInfo(){return this.#e3}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){(0,x.MR)(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{let t=await this.#ex(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);let t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter(t=>t.toLowerCase()===e).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#ex("eth_requestAccounts",[])}catch(t){let e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}static async discover(e){if(null==e&&(e={}),e.provider)return new tS(e.provider);let t=e.window?e.window:"undefined"!=typeof window?window:null;if(null==t)return null;let r=e.anyProvider;if(r&&t.ethereum)return new tS(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;let n=e.timeout?e.timeout:300;return 0===n?null:await new Promise((i,s)=>{let a=[],o=e=>{a.push(e.detail),r&&l()},l=()=>{if(clearTimeout(c),a.length){if(e&&e.filter){let t=e.filter(a.map(e=>Object.assign({},e.info)));if(null==t)i(null);else if(t instanceof tS)i(t);else{let e=null;if(t.uuid&&(e=a.filter(e=>t.uuid===e.info.uuid)[0]),e){let{provider:t,info:r}=e;i(new tS(t,void 0,{providerInfo:r}))}else s((0,x.xz)("filter returned unknown info","UNSUPPORTED_OPERATION",{value:t}))}}else{let{provider:e,info:t}=a[0];i(new tS(e,void 0,{providerInfo:t}))}}else i(null);t.removeEventListener("eip6963:announceProvider",o)},c=setTimeout(()=>{l()},n);t.addEventListener("eip6963:announceProvider",o),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}},3590:(e,t,r)=>{"use strict";let n=r(4423);t.PP=n.EventIterator,n.EventIterator},3599:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FallbackProvider=void 0;let n=r(8662),i=r(4861),s=r(9307),a=BigInt("1"),o=BigInt("2");function l(){return new Date().getTime()}function c(e){return JSON.stringify(e,(e,t)=>"bigint"==typeof t?{type:"bigint",value:t.toString()}:t)}let u={stallTimeout:400,priority:1,weight:1},d={blockNumber:-2,requests:0,lateResponses:0,errorResponses:0,outOfSync:-1,unsupportedEvents:0,rollingDuration:0,score:0,_network:null,_updateNumber:null,_totalTime:0,_lastFatalError:null,_lastFatalErrorTimestamp:0};async function h(e,t){for(;(e.blockNumber<0||e.blockNumber<t)&&(e._updateNumber||(e._updateNumber=(async()=>{try{let t=await e.provider.getBlockNumber();t>e.blockNumber&&(e.blockNumber=t)}catch(t){e.blockNumber=-2,e._lastFatalError=t,e._lastFatalErrorTimestamp=l()}e._updateNumber=null})()),await e._updateNumber,e.outOfSync++,!e._lastFatalError););}function f(e){if(null==e)return"null";if(Array.isArray(e))return"["+e.map(f).join(",")+"]";if("object"==typeof e&&"function"==typeof e.toJSON)return f(e.toJSON());switch(typeof e){case"boolean":case"symbol":return e.toString();case"bigint":case"number":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let t=Object.keys(e);return t.sort(),"{"+t.map(t=>`${JSON.stringify(t)}:${f(e[t])}`).join(",")+"}"}}throw console.log("Could not serialize",e),Error("Hmm...")}function p(e,t){if("error"in t){let e;let r=t.error;return{tag:(0,n.isError)(r,"CALL_EXCEPTION")?f(Object.assign({},r,{shortMessage:void 0,reason:void 0,info:void 0})):f(r),value:r}}let r=t.result;return{tag:f(r),value:r}}function g(e,t){let r=new Map;for(let{value:e,tag:n,weight:i}of t){let t=r.get(n)||{value:e,weight:0};t.weight+=i,r.set(n,t)}let n=null;for(let t of r.values())t.weight>=e&&(!n||t.weight>n.weight)&&(n=t);if(n)return n.value}function m(e,t){let r=0,n=new Map,i=null,s=[];for(let{value:e,tag:a,weight:o}of t)if(e instanceof Error){let t=n.get(a)||{value:e,weight:0};t.weight+=o,n.set(a,t),(null==i||t.weight>i.weight)&&(i=t)}else s.push(BigInt(e)),r+=o;if(r<e)return i&&i.weight>=e?i.value:void 0;s.sort((e,t)=>e<t?-1:+(t>e));let l=Math.floor(s.length/2);return s.length%2?s[l]:(s[l-1]+s[l]+a)/o}function b(e,t){let r=g(e,t);if(void 0!==r)return r;for(let e of t)if(e.value)return e.value}class y extends i.AbstractProvider{quorum;eventQuorum;eventWorkers;#e4;#e6;#e5;constructor(e,t,r){super(t,r),this.#e4=e.map(e=>e instanceof i.AbstractProvider?Object.assign({provider:e},u,d):Object.assign({},u,e,d)),this.#e6=-2,this.#e5=null,r&&null!=r.quorum?this.quorum=r.quorum:this.quorum=Math.ceil(this.#e4.reduce((e,t)=>e+=t.weight,0)/2),this.eventQuorum=1,this.eventWorkers=1,(0,n.assertArgument)(this.quorum<=this.#e4.reduce((e,t)=>e+t.weight,0),"quorum exceed provider weight","quorum",this.quorum)}get providerConfigs(){return this.#e4.map(e=>{let t=Object.assign({},e);for(let e in t)"_"===e[0]&&delete t[e];return t})}async _detectNetwork(){return s.Network.from((0,n.getBigInt)(await this._perform({method:"chainId"})))}async _translatePerform(e,t){switch(t.method){case"broadcastTransaction":return await e.broadcastTransaction(t.signedTransaction);case"call":return await e.call(Object.assign({},t.transaction,{blockTag:t.blockTag}));case"chainId":return(await e.getNetwork()).chainId;case"estimateGas":return await e.estimateGas(t.transaction);case"getBalance":return await e.getBalance(t.address,t.blockTag);case"getBlock":{let r="blockHash"in t?t.blockHash:t.blockTag;return await e.getBlock(r,t.includeTransactions)}case"getBlockNumber":return await e.getBlockNumber();case"getCode":return await e.getCode(t.address,t.blockTag);case"getGasPrice":return(await e.getFeeData()).gasPrice;case"getPriorityFee":return(await e.getFeeData()).maxPriorityFeePerGas;case"getLogs":return await e.getLogs(t.filter);case"getStorage":return await e.getStorage(t.address,t.position,t.blockTag);case"getTransaction":return await e.getTransaction(t.hash);case"getTransactionCount":return await e.getTransactionCount(t.address,t.blockTag);case"getTransactionReceipt":return await e.getTransactionReceipt(t.hash);case"getTransactionResult":return await e.getTransactionResult(t.hash)}}#e8(e){let t=Array.from(e).map(e=>e.config),r=this.#e4.slice();for(let e of(!function(e){for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}}(r),r.sort((e,t)=>e.priority-t.priority),r))if(!e._lastFatalError&&-1===t.indexOf(e))return e;return null}#e7(e,t){let r=this.#e8(e);if(null==r)return null;let n={config:r,result:null,didBump:!1,perform:null,staller:null},i=l();return n.perform=(async()=>{try{r.requests++,n.result={result:await this._translatePerform(r.provider,t)}}catch(e){r.errorResponses++,n.result={error:e}}let e=l()-i;r._totalTime+=e,r.rollingDuration=.95*r.rollingDuration+.05*e,n.perform=null})(),n.staller=(async()=>{var e;await (e=r.stallTimeout,new Promise(t=>{setTimeout(t,e)})),n.staller=null})(),e.add(n),n}async #e9(){let e=this.#e5;if(!e){let t=[];this.#e4.forEach(e=>{t.push((async()=>{await h(e,0),e._lastFatalError||(e._network=await e.provider.getNetwork())})())}),this.#e5=e=(async()=>{await Promise.all(t);let e=null;for(let t of this.#e4){if(t._lastFatalError)continue;let r=t._network;null==e?e=r.chainId:r.chainId!==e&&(0,n.assert)(!1,"cannot mix providers on different networks","UNSUPPORTED_OPERATION",{operation:"new FallbackProvider"})}})()}await e}async #te(e,t){let r=[];for(let n of e)if(null!=n.result){let{tag:e,value:i}=p(t.method,n.result);r.push({tag:e,value:i,weight:n.config.weight})}if(!(r.reduce((e,t)=>e+t.weight,0)<this.quorum)){switch(t.method){case"getBlockNumber":{-2===this.#e6&&(this.#e6=Math.ceil((0,n.getNumber)(m(this.quorum,this.#e4.filter(e=>!e._lastFatalError).map(e=>({value:e.blockNumber,tag:(0,n.getNumber)(e.blockNumber).toString(),weight:e.weight}))))));let e=function(e,t){let r;if(1===e)return(0,n.getNumber)(m(e,t),"%internal");let i=new Map,s=(e,t)=>{let r=i.get(e)||{result:e,weight:0};r.weight+=t,i.set(e,r)};for(let{weight:e,value:r}of t){let t=(0,n.getNumber)(r);s(t-1,e),s(t,e),s(t+1,e)}let a=0;for(let{weight:t,result:n}of i.values())t>=e&&(t>a||null!=r&&t===a&&n>r)&&(a=t,r=n);return r}(this.quorum,r);if(void 0===e)return;return e>this.#e6&&(this.#e6=e),this.#e6}case"getGasPrice":case"getPriorityFee":case"estimateGas":return m(this.quorum,r);case"getBlock":if("blockTag"in t&&"pending"===t.blockTag)return b(this.quorum,r);return g(this.quorum,r);case"call":case"chainId":case"getBalance":case"getTransactionCount":case"getCode":case"getStorage":case"getTransaction":case"getTransactionReceipt":case"getLogs":return g(this.quorum,r);case"broadcastTransaction":return b(this.quorum,r)}(0,n.assert)(!1,"unsupported method","UNSUPPORTED_OPERATION",{operation:`_perform(${c(t.method)})`})}}async #tt(e,t){if(0===e.size)throw Error("no runners?!");let r=[],i=0;for(let t of e){if(t.perform&&r.push(t.perform),t.staller){r.push(t.staller);continue}!t.didBump&&(t.didBump=!0,i++)}let s=await this.#te(e,t);if(void 0!==s){if(s instanceof Error)throw s;return s}for(let r=0;r<i;r++)this.#e7(e,t);return(0,n.assert)(r.length>0,"quorum not met","SERVER_ERROR",{request:"%sub-requests",info:{request:t,results:Array.from(e).map(e=>c(e.result))}}),await Promise.race(r),await this.#tt(e,t)}async _perform(e){if("broadcastTransaction"===e.method){let t=this.#e4.map(e=>null),r=this.#e4.map(async({provider:r,weight:n},i)=>{try{let s=await r._perform(e);t[i]=Object.assign(p(e.method,{result:s}),{weight:n})}catch(r){t[i]=Object.assign(p(e.method,{error:r}),{weight:n})}});for(;;){for(let{value:e}of t.filter(e=>null!=e))if(!(e instanceof Error))return e;let e=g(this.quorum,t.filter(e=>null!=e));if((0,n.isError)(e,"INSUFFICIENT_FUNDS"))throw e;let i=r.filter((e,r)=>null==t[r]);if(0===i.length)break;await Promise.race(i)}let i=b(this.quorum,t);if((0,n.assert)(void 0!==i,"problem multi-broadcasting","SERVER_ERROR",{request:"%sub-requests",info:{request:e,results:t.map(c)}}),i instanceof Error)throw i;return i}await this.#e9();let t=new Set,r=0;for(;;){let n=this.#e7(t,e);if(null==n||(r+=n.config.weight)>=this.quorum)break}let i=await this.#tt(t,e);for(let e of t)e.perform&&null==e.result&&e.config.lateResponses++;return i}async destroy(){for(let{provider:e}of this.#e4)e.destroy();super.destroy()}}t.FallbackProvider=y},3620:(e,t,r)=>{"use strict";r.d(t,{k5:()=>u});var n=r(4232),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=n.createContext&&n.createContext(i),a=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var n,i,s;n=e,i=t,s=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>n.createElement(d,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:i,size:s,title:l}=e,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,a),d=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,u,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&n.createElement("title",null,l),e.children)};return void 0!==s?n.createElement(s.Consumer,null,e=>t(e)):t(i)}},3632:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;let n=r(3810),i=r(5636);class s extends i.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.hash)(e);let r=(0,i.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,a=new Uint8Array(s);a.set(r.length>s?e.create().update(r).digest():r);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}update(e){return(0,n.exists)(this),this.iHash.update(e),this}digestInto(e){(0,n.exists)(this),(0,n.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=s,t.hmac=(e,t,r)=>new s(e,t).update(r).digest(),t.hmac.create=(e,t)=>new s(e,t)},3639:(e,t,r)=>{let{Buffer:n}=r(2909),i=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],s=[];"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(e=>{s.push(e.charCodeAt(0))}),t.utf8={encode(e){let t=[];return e.forEach(e=>{if(e>=0&&e<=127)t.push(e);else if(e<=2047)t.push(192+(e>>6&31)),t.push(128+(63&e));else if(e<55296||e>57343&&e<=65535)t.push(224+(e>>12&15)),t.push(128+(e>>6&63)),t.push(128+(63&e));else if(e>=65536&&e<=1114111){let r=e>>16&31;t.push(240+(r>>2)),t.push(128+((3&r)<<4)+(e>>12&15)),t.push(128+(e>>6&63)),t.push(128+(63&e))}else throw RangeError(`utf8.encode: character out of range: char: ${e}`)}),n.from(t)},decode(e,t){let r,n,i,s,a,o;let l=e.length,c=3*!!t,u=[];for(;c<l;){for(n=e[c],r=0xffffffff;;){if(n>=0&&n<=127){r=n,o=1;break}if((i=c+1)<l&&n>=194&&n<=223){r=function(e,t){if((192&t)!=128)return 0xfffffffd;let r=((31&e)<<6)+(63&t);return r<128?0xfffffffc:r}(n,e[i]),o=2;break}if((s=c+2)<l&&n>=224&&n<=239){r=function(e,t,r){if((192&r)!=128||(192&t)!=128)return 0xfffffffd;let n=((15&e)<<12)+((63&t)<<6)+(63&r);return n<2048?0xfffffffc:n>=55296&&n<=57343?0xfffffffe:n}(n,e[i],e[s]),o=3;break}(a=c+3)<l&&n>=240&&n<=244&&(r=function(e,t,r,n){if((192&n)!=128||(192&r)!=128||(192&t)!=128)return 0xfffffffd;let i=(((7&e)<<2)+(t>>4&3)<<16)+((15&t)<<12)+((63&r)<<6)+(63&n);return i<65536?0xfffffffc:i>1114111?0xfffffffe:i}(n,e[i],e[s],e[a]),o=4);break}if(r>1114111){let e=`byte[${c}]`;if(0xffffffff===r)throw RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${e}`);if(0xfffffffd===r)throw RangeError(`utf8.decode: illegal trailing byte found at: ${e}`);if(0xfffffffe===r)throw RangeError(`utf8.decode: code point out of range found at: ${e}`);if(0xfffffffc===r)throw RangeError(`utf8.decode: non-shortest form found at: ${e}`);throw RangeError(`utf8.decode: unrecognized error found at: ${e}`)}u.push(r),c+=o}return u}},t.utf16be={encode(e){let t,r,i;let s=[];for(let n=0;n<e.length;n+=1)if((t=e[n])>=0&&t<=55295||t>=57344&&t<=65535)s.push(t>>8&255),s.push(255&t);else if(t>=65536&&t<=1114111)r=55296+((i=t-65536)>>10),i=56320+(1023&i),s.push(r>>8&255),s.push(255&r),s.push(i>>8&255),s.push(255&i);else throw RangeError(`utf16be.encode: UTF16BE value out of range: char[${n}]: ${t}`);return n.from(s)},decode(e,t){let r,n,i,s,a,o;if(e.length%2>0)throw RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${e.length}`);let l=[],c=e.length,u=2*!!t,d=0;for(;u<c;){for(;;){if((i=u+1)<c){if((a=(e[u]<<8)+e[i])<55296||a>57343){r=a,n=2;break}if((s=u+3)<c&&(o=(e[u+2]<<8)+e[s],a<=56319&&o>=56320&&o<=57343)){r=65536+(a-55296<<10)+(o-56320),n=4;break}}throw RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${u}]`)}l[d++]=r,u+=n}return l}},t.utf16le={encode(e){let t,r,i;let s=[];for(let n=0;n<e.length;n+=1)if((t=e[n])>=0&&t<=55295||t>=57344&&t<=65535)s.push(255&t),s.push(t>>8&255);else if(t>=65536&&t<=1114111)r=55296+((i=t-65536)>>10),i=56320+(1023&i),s.push(255&r),s.push(r>>8&255),s.push(255&i),s.push(i>>8&255);else throw RangeError(`utf16le.encode: UTF16LE value out of range: char[${n}]: ${t}`);return n.from(s)},decode(e,t){let r,n,i,s,a,o;if(e.length%2>0)throw RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${e.length}`);let l=[],c=e.length,u=2*!!t,d=0;for(;u<c;){for(;;){if((i=u+1)<c){if((a=(e[i]<<8)+e[u])<55296||a>57343){r=a,n=2;break}if((s=u+3)<c&&(o=(e[s]<<8)+e[u+2],a<=56319&&o>=56320&&o<=57343)){r=65536+(a-55296<<10)+(o-56320),n=4;break}}throw RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${u}]`)}l[d++]=r,u+=n}return l}},t.utf32be={encode(e){let t=n.alloc(4*e.length),r=0;return e.forEach(e=>{if(e>=55296&&e<=57343||e>1114111)throw RangeError(`utf32be.encode: UTF32BE character code out of range: char[${r/4}]: ${e}`);t[r++]=e>>24&255,t[r++]=e>>16&255,t[r++]=e>>8&255,t[r++]=255&e}),t},decode(e,t){if(e.length%4>0)throw RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${e.length}`);let r=[],n=4*!!t;for(;n<e.length;n+=4){let t=(e[n]<<24)+(e[n+1]<<16)+(e[n+2]<<8)+e[n+3];if(t>=55296&&t<=57343||t>1114111)throw RangeError(`utf32be.decode: UTF32BE character code out of range: char[${n/4}]: ${t}`);r.push(t)}return r}},t.utf32le={encode(e){let t=n.alloc(4*e.length),r=0;return e.forEach(e=>{if(e>=55296&&e<=57343||e>1114111)throw RangeError(`utf32le.encode: UTF32LE character code out of range: char[${r/4}]: ${e}`);t[r++]=255&e,t[r++]=e>>8&255,t[r++]=e>>16&255,t[r++]=e>>24&255}),t},decode(e,t){if(e.length%4>0)throw RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${e.length}`);let r=[],n=4*!!t;for(;n<e.length;n+=4){let t=(e[n+3]<<24)+(e[n+2]<<16)+(e[n+1]<<8)+e[n];if(t>=55296&&t<=57343||t>1114111)throw RangeError(`utf32le.encode: UTF32LE character code out of range: char[${n/4}]: ${t}`);r.push(t)}return r}},t.uint7={encode(e){let t=n.alloc(e.length);for(let r=0;r<e.length;r+=1){if(e[r]>127)throw RangeError(`uint7.encode: UINT7 character code out of range: char[${r}]: ${e[r]}`);t[r]=e[r]}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=1){if(e[r]>127)throw RangeError(`uint7.decode: UINT7 character code out of range: byte[${r}]: ${e[r]}`);t[r]=e[r]}return t}},t.uint8={encode(e){let t=n.alloc(e.length);for(let r=0;r<e.length;r+=1){if(e[r]>255)throw RangeError(`uint8.encode: UINT8 character code out of range: char[${r}]: ${e[r]}`);t[r]=e[r]}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=1)t[r]=e[r];return t}},t.uint16be={encode(e){let t=n.alloc(2*e.length),r=0;return e.forEach(e=>{if(e>65535)throw RangeError(`uint16be.encode: UINT16BE character code out of range: char[${r/2}]: ${e}`);t[r++]=e>>8&255,t[r++]=255&e}),t},decode(e){if(e.length%2>0)throw RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${e.length}`);let t=[];for(let r=0;r<e.length;r+=2)t.push((e[r]<<8)+e[r+1]);return t}},t.uint16le={encode(e){let t=n.alloc(2*e.length),r=0;return e.forEach(e=>{if(e>65535)throw RangeError(`uint16le.encode: UINT16LE character code out of range: char[${r/2}]: ${e}`);t[r++]=255&e,t[r++]=e>>8&255}),t},decode(e){if(e.length%2>0)throw RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${e.length}`);let t=[];for(let r=0;r<e.length;r+=2)t.push((e[r+1]<<8)+e[r]);return t}},t.uint32be={encode(e){let t=n.alloc(4*e.length),r=0;return e.forEach(e=>{t[r++]=e>>24&255,t[r++]=e>>16&255,t[r++]=e>>8&255,t[r++]=255&e}),t},decode(e){if(e.length%4>0)throw RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${e.length}`);let t=[];for(let r=0;r<e.length;r+=4)t.push((e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3]);return t}},t.uint32le={encode(e){let t=n.alloc(4*e.length),r=0;return e.forEach(e=>{t[r++]=255&e,t[r++]=e>>8&255,t[r++]=e>>16&255,t[r++]=e>>24&255}),t},decode(e){if(e.length%4>0)throw RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${e.length}`);let t=[];for(let r=0;r<e.length;r+=4)t.push((e[r+3]<<24)+(e[r+2]<<16)+(e[r+1]<<8)+e[r]);return t}},t.string={encode:e=>t.utf16le.encode(e).toString("utf16le"),decode:e=>t.utf16le.decode(n.from(e,"utf16le"),0)},t.escaped={encode(e){let t=[];for(let r=0;r<e.length;r+=1){let s=e[r];if(96===s)t.push(s),t.push(s);else if(10===s)t.push(s);else if(s>=32&&s<=126)t.push(s);else{let e="";if(s>=0&&s<=31)e+=`\`x${i[s]}`;else if(s>=127&&s<=255)e+=`\`x${i[s]}`;else if(s>=256&&s<=65535)e+=`\`u${i[s>>8&255]}${i[255&s]}`;else if(s>=65536&&s<=0xffffffff){e+="`u{";let t=s>>24&255;t>0&&(e+=i[t]),e+=`${i[s>>16&255]+i[s>>8&255]+i[255&s]}}`}else throw Error("escape.encode(char): char > 0xffffffff not allowed");n.from(e).forEach(e=>{t.push(e)})}}return n.from(t)},decode(e){let t,r,n;function i(e){return!!(e>=48)&&!!(e<=57)||!!(e>=65)&&!!(e<=70)||!!(e>=97)&&!!(e<=102)}let s=[],a=e.length,o=0;for(;o<a;){for(;;){if(n=!0,96!==e[o]){s.push(e[o]),o+=1,n=!1;break}if((t=o+1)>=a)break;if(96===e[t]){s.push(96),o+=2,n=!1;break}if(120===e[t]){if((r=function(e,t,r){let n={char:null,nexti:e+2,error:!0};return e+1<t&&i(r[e])&&i(r[e+1])&&(n.char=parseInt(String.fromCodePoint(r[e],r[e+1]),16),Number.isNaN(n.char)||(n.error=!1)),n}(t+1,a,e)).error)break;s.push(r.char),o=r.nexti,n=!1;break}if(117===e[t]){if(123===e[t+1]){if((r=function(e,t,r){let n={char:null,nexti:e+4,error:!0},s="";for(;e<t&&i(r[e]);)s+=String.fromCodePoint(r[e]),e+=1;return n.char=parseInt(s,16),125!==r[e]||Number.isNaN(n.char)||(n.error=!1),n.nexti=e+1,n}(t+2,a,e)).error)break;s.push(r.char),o=r.nexti,n=!1;break}if((r=function(e,t,r){let n={char:null,nexti:e+4,error:!0};return e+3<t&&i(r[e])&&i(r[e+1])&&i(r[e+2])&&i(r[e+3])&&(n.char=parseInt(String.fromCodePoint(r[e],r[e+1],r[e+2],r[e+3]),16),Number.isNaN(n.char)||(n.error=!1)),n}(t+1,a,e)).error)break;s.push(r.char),o=r.nexti,n=!1}break}if(n)throw Error(`escaped.decode: ill-formed escape sequence at buf[${o}]`)}return s}},t.lineEnds={crlf(e){let t=[],r=0;for(;r<e.length;)switch(e[r]){case 13:r+1<e.length&&10===e[r+1]?r+=2:r+=1,t.push(13),t.push(10);break;case 10:t.push(13),t.push(10),r+=1;break;default:t.push(e[r]),r+=1}return t.length>0&&10!==t[t.length-1]&&(t.push(13),t.push(10)),t},lf(e){let t=[],r=0;for(;r<e.length;)switch(e[r]){case 13:r+1<e.length&&10===e[r+1]?r+=2:r+=1,t.push(10);break;case 10:t.push(10),r+=1;break;default:t.push(e[r]),r+=1}return t.length>0&&10!==t[t.length-1]&&t.push(10),t}},t.base64={encode(e){let t,r,i;if(0===e.length)return n.alloc(0);let a=e.length%3;a=a>0?3-a:0;let o=(e.length+a)/3,l=n.alloc(4*o);a>0&&(o-=1),t=0,r=0;for(let n=0;n<o;n+=1)i=(e[t++]<<16)+(e[t++]<<8)+e[t++],l[r++]=s[i>>18&63],l[r++]=s[i>>12&63],l[r++]=s[i>>6&63],l[r++]=s[63&i];return 0===a?l:1===a?(i=(e[t++]<<16)+(e[t]<<8),l[r++]=s[i>>18&63],l[r++]=s[i>>12&63],l[r++]=s[i>>6&63],l[r]=s[64],l):2===a?(i=e[t]<<16,l[r++]=s[i>>18&63],l[r++]=s[i>>12&63],l[r++]=s[64],l[r]=s[64],l):void 0},decode(e){let t,r,i;if(0===e.length)return n.alloc(0);let s=function(e){let t=[],r=0;for(let n=0;n<e.length;n+=1){let i=e[n];for(;32!==i&&9!==i&&10!==i&&13!==i;){if(i>=65&&i<=90){t.push(i-65);break}if(i>=97&&i<=122){t.push(i-71);break}if(i>=48&&i<=57){t.push(i+4);break}if(43===i){t.push(62);break}if(47===i){t.push(63);break}if(61===i){t.push(64),r+=1;break}throw RangeError(`base64.decode: invalid character buf[${n}]: ${i}`)}}if(t.length%4>0)throw RangeError(`base64.decode: string length not integral multiple of 4: ${t.length}`);switch(r){case 0:break;case 1:if(64!==t[t.length-1])throw RangeError("base64.decode: one tail character found: not last character");break;case 2:if(64!==t[t.length-1]||64!==t[t.length-2])throw RangeError("base64.decode: two tail characters found: not last characters");break;default:throw RangeError(`base64.decode: more than two tail characters found: ${r}`)}return{tail:r,buf:n.from(t)}}(e),{tail:a}=s,o=s.buf,l=o.length/4,c=n.alloc(3*l-a);a>0&&(l-=1),r=0,t=0;for(let e=0;e<l;e+=1)i=(o[t++]<<18)+(o[t++]<<12)+(o[t++]<<6)+o[t++],c[r++]=i>>16&255,c[r++]=i>>8&255,c[r++]=255&i;return 1===a&&(i=(o[t++]<<18)+(o[t++]<<12)+(o[t]<<6),c[r++]=i>>16&255,c[r]=i>>8&255),2===a&&(i=(o[t++]<<18)+(o[t++]<<12),c[r]=i>>16&255),c},toString(e){if(e.length%4>0)throw RangeError(`base64.toString: input buffer length not multiple of 4: ${e.length}`);let t="",r=0;for(let i=0;i<e.length;i+=4){for(let t=i;t<i+4;t+=1){var n;if(!((n=e[t])>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||43===n||47===n||61===n))throw RangeError(`base64.toString: buf[${t}]: ${e[t]} : not valid base64 character code`)}!function(e,n,i,s){switch(r){case 76:t+=`\r
${e}${n}${i}${s}`,r=4;break;case 75:t+=`${e}\r
${n}${i}${s}`,r=3;break;case 74:t+=`${e+n}\r
${i}${s}`,r=2;break;case 73:t+=`${e+n+i}\r
${s}`,r=1;break;default:t+=e+n+i+s,r+=4}}(String.fromCharCode(e[i]),String.fromCharCode(e[i+1]),String.fromCharCode(e[i+2]),String.fromCharCode(e[i+3]))}return t}}},3666:(e,t,r)=>{"use strict";r.d(t,{ev:()=>S,TU:()=>I});var n=r(4322),i=r(2405),s=r(3084),a=r(4546),o=r(7551);let l=BigInt(0),c=BigInt(1),u=BigInt(2),d=BigInt(8),h={zip215:!0},f=BigInt(0),p=BigInt(1),g=BigInt(2);BigInt(0);let m=BigInt(1),b=BigInt(2),y=BigInt(3),x=BigInt(5),w=BigInt(8),v={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:w,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function A(e){let t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=v.p,a=e*e%s*e%s,l=(0,o.zH)(a,b,s)*a%s,c=(0,o.zH)(l,m,s)*e%s,u=(0,o.zH)(c,x,s)*c%s,d=(0,o.zH)(u,t,s)*u%s,h=(0,o.zH)(d,r,s)*d%s,f=(0,o.zH)(h,n,s)*h%s,p=(0,o.zH)(f,i,s)*f%s,g=(0,o.zH)(p,i,s)*f%s,y=(0,o.zH)(g,t,s)*u%s;return{pow_p_5_8:(0,o.zH)(y,b,s)*e%s,b2:a}}function E(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}let k=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),P=(0,o.D0)(v.p,void 0,!0),S=function(e){let{CURVE:t,curveOpts:r,eddsaOpts:n}=function(e){let t={a:e.a,d:e.d,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r={Fp:e.Fp,Fn:(0,o.D0)(t.n,e.nBitLength,!0),uvRatio:e.uvRatio};return{CURVE:t,curveOpts:r,eddsaOpts:{hash:e.hash,randomBytes:e.randomBytes,adjustScalarBytes:e.adjustScalarBytes,domain:e.domain,prehash:e.prehash,mapToCurve:e.mapToCurve}}}(e),f=function(e,t){(0,i.DS)(t,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:r,hash:n}=t,{BASE:a,Fp:o,Fn:c}=e,u=c.ORDER,d=t.randomBytes||s.po,f=t.adjustScalarBytes||(e=>e),p=t.domain||((e,t,r)=>{if((0,i.e8)("phflag",r),t.length||r)throw Error("Contexts/pre-hash are not supported");return e});function g(e){var t;return t=(0,i.lX)(e),c.create(t)}function m(e){let{head:t,prefix:r,scalar:s}=function(e){let t=o.BYTES;e=(0,i.qj)("private key",e,t);let r=(0,i.qj)("hashed private key",n(e),2*t),s=f(r.slice(0,t)),a=r.slice(t,2*t),l=g(s);return{head:s,prefix:a,scalar:l}}(e),l=a.multiply(s),c=l.toBytes();return{head:t,prefix:r,scalar:s,point:l,pointBytes:c}}function b(e=Uint8Array.of(),...t){return g(n(p((0,s.Id)(...t),(0,i.qj)("context",e),!!r)))}return a.precompute(8),{getPublicKey:function(e){return m(e).pointBytes},sign:function(e,t,n={}){var d;e=(0,i.qj)("message",e),r&&(e=r(e));let{prefix:h,scalar:f,pointBytes:p}=m(t),g=b(n.context,h,e),y=a.multiply(g).toBytes(),x=(d=g+b(n.context,y,p,e)*f,c.create(d));(0,i.aK)("signature.s",x,l,u);let w=o.BYTES,v=(0,s.Id)(y,(0,i.z)(x,w));return(0,i.qj)("result",v,2*w)},verify:function(t,n,s,l=h){let c,u,d;let{context:f,zip215:p}=l,g=o.BYTES;t=(0,i.qj)("signature",t,2*g),n=(0,i.qj)("message",n),s=(0,i.qj)("publicKey",s,g),void 0!==p&&(0,i.e8)("zip215",p),r&&(n=r(n));let m=(0,i.lX)(t.slice(g,2*g));try{c=e.fromHex(s,p),u=e.fromHex(t.slice(0,g),p),d=a.multiplyUnsafe(m)}catch(e){return!1}if(!p&&c.isSmallOrder())return!1;let y=b(f,u.toBytes(),c.toBytes(),n);return u.add(c.multiplyUnsafe(y)).subtract(d).clearCofactor().is0()},utils:{getExtendedPublicKey:m,randomPrivateKey:()=>d(o.BYTES),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)},Point:e}}(function(e,t={}){let{Fp:r,Fn:n}=(0,a.UT)("edwards",e,t),{h:o,n:h}=e;(0,i.DS)(t,{},{uvRatio:"function"});let f=u<<BigInt(8*n.BYTES)-c,p=e=>r.create(e),g=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(r.div(e,t))}}catch(e){return{isValid:!1,value:l}}});if(!function(e,t,r,n){let i=e.sqr(r),s=e.sqr(n),a=e.add(e.mul(t.a,i),s),o=e.add(e.ONE,e.mul(t.d,e.mul(i,s)));return e.eql(a,o)}(r,e,e.Gx,e.Gy))throw Error("bad curve params: generator point");function m(e,t,r=!1){let n=r?c:l;return(0,i.aK)("coordinate "+e,t,n,f),t}function b(e){if(!(e instanceof w))throw Error("ExtendedPoint expected")}let y=(0,i.x)((e,t)=>{let{ex:n,ey:i,ez:s}=e,a=e.is0();null==t&&(t=a?d:r.inv(s));let o=p(n*t),u=p(i*t),h=p(s*t);if(a)return{x:l,y:c};if(h!==c)throw Error("invZ was invalid");return{x:o,y:u}}),x=(0,i.x)(t=>{let{a:r,d:n}=e;if(t.is0())throw Error("bad point: ZERO");let{ex:i,ey:s,ez:a,et:o}=t,l=p(i*i),c=p(s*s),u=p(a*a),d=p(u*u),h=p(l*r);if(p(u*p(h+c))!==p(d+p(n*p(l*c))))throw Error("bad point: equation left != right (1)");if(p(i*s)!==p(a*o))throw Error("bad point: equation left != right (2)");return!0});class w{constructor(e,t,r,n){this.ex=m("x",e),this.ey=m("y",t),this.ez=m("z",r,!0),this.et=m("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof w)throw Error("extended point not allowed");let{x:t,y:r}=e||{};return m("x",t),m("y",r),new w(t,r,c,p(t*r))}static normalizeZ(e){return(0,a.Ak)(w,"ez",e)}static msm(e,t){return(0,a.Xf)(w,n,e,t)}_setWindowSize(e){this.precompute(e)}precompute(e=8,t=!0){return v.setWindowSize(this,e),t||this.multiply(u),this}assertValidity(){x(this)}equals(e){b(e);let{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:a}=e,o=p(t*a),l=p(i*n),c=p(r*a),u=p(s*n);return o===l&&c===u}is0(){return this.equals(w.ZERO)}negate(){return new w(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){let{a:t}=e,{ex:r,ey:n,ez:i}=this,s=p(r*r),a=p(n*n),o=p(u*p(i*i)),l=p(t*s),c=r+n,d=p(p(c*c)-s-a),h=l+a,f=h-o,g=l-a,m=p(d*f),b=p(h*g),y=p(d*g);return new w(m,b,p(f*h),y)}add(t){b(t);let{a:r,d:n}=e,{ex:i,ey:s,ez:a,et:o}=this,{ex:l,ey:c,ez:u,et:d}=t,h=p(i*l),f=p(s*c),g=p(o*n*d),m=p(a*u),y=p((i+s)*(l+c)-h-f),x=m-g,v=m+g,A=p(f-r*h),E=p(y*x),k=p(v*A),P=p(y*A);return new w(E,k,p(x*v),P)}subtract(e){return this.add(e.negate())}multiply(e){(0,i.aK)("scalar",e,c,h);let{p:t,f:r}=v.wNAFCached(this,e,w.normalizeZ);return w.normalizeZ([t,r])[0]}multiplyUnsafe(e,t=w.ZERO){return((0,i.aK)("scalar",e,l,h),e===l)?w.ZERO:this.is0()||e===c?this:v.wNAFCachedUnsafe(this,e,w.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return v.wNAFCachedUnsafe(this,h).is0()}toAffine(e){return y(this,e)}clearCofactor(){return o===c?this:this.multiplyUnsafe(o)}static fromBytes(e,t=!1){return(0,s.DO)(e),this.fromHex(e,t)}static fromHex(t,n=!1){let{d:s,a}=e,o=r.BYTES;t=(0,i.qj)("pointHex",t,o),(0,i.e8)("zip215",n);let u=t.slice(),d=t[o-1];u[o-1]=-129&d;let h=(0,i.lX)(u),m=n?f:r.ORDER;(0,i.aK)("pointHex.y",h,l,m);let b=p(h*h),{isValid:y,value:x}=g(p(b-c),p(s*b-a));if(!y)throw Error("Point.fromHex: invalid y coordinate");let v=(x&c)===c,A=(128&d)!=0;if(!n&&x===l&&A)throw Error("Point.fromHex: x=0 and x_0=1");return A!==v&&(x=p(-x)),w.fromAffine({x,y:h})}static fromPrivateScalar(e){return w.BASE.multiply(e)}toBytes(){let{x:e,y:t}=this.toAffine(),n=(0,i.z)(t,r.BYTES);return n[n.length-1]|=e&c?128:0,n}toRawBytes(){return this.toBytes()}toHex(){return(0,s.My)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}w.BASE=new w(e.Gx,e.Gy,c,p(e.Gx*e.Gy)),w.ZERO=new w(l,c,c,l),w.Fp=r,w.Fn=n;let v=(0,a.hT)(w,8*n.BYTES);return w}(t,r),n);return Object.assign({},f,{ExtendedPoint:f.Point,CURVE:e})}({...v,Fp:P,hash:n.Zf,adjustScalarBytes:E,uvRatio:function(e,t){let r=v.p,n=(0,o.zi)(t*t*t,r),i=A(e*(0,o.zi)(n*n*t,r)).pow_p_5_8,s=(0,o.zi)(e*n*i,r),a=(0,o.zi)(t*s*s,r),l=s,c=(0,o.zi)(s*k,r),u=a===e,d=a===(0,o.zi)(-e,r),h=a===(0,o.zi)(-e*k,r);return u&&(s=l),(d||h)&&(s=c),(0,o.dQ)(s,r)&&(s=(0,o.zi)(-s,r)),{isValid:u||d,value:s}}}),I=(()=>{let e=v.p;return function(e){let{P:t,type:r,adjustScalarBytes:n,powPminus2:a,randomBytes:l}=((0,i.DS)(e,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...e})),c="x25519"===r;if(!c&&"x448"!==r)throw Error("invalid type");let u=l||s.po,d=c?255:448,h=c?32:56,m=c?BigInt(9):BigInt(5),b=c?BigInt(121665):BigInt(39081),y=c?g**BigInt(254):g**BigInt(447),x=y+(c?BigInt(8)*g**BigInt(251)-p:BigInt(4)*g**BigInt(445)-p)+p,w=e=>(0,o.zi)(e,t),v=A(m);function A(e){return(0,i.z)(w(e),h)}function E(e,r){let s=function(e,r){(0,i.aK)("u",e,f,t),(0,i.aK)("scalar",r,y,x);let n=p,s=f,o=e,l=p,c=f;for(let t=BigInt(d-1);t>=f;t--){let i=r>>t&p;c^=i,({x_2:n,x_3:o}=P(c,n,o)),({x_2:s,x_3:l}=P(c,s,l)),c=i;let a=n+s,u=w(a*a),d=n-s,h=w(d*d),f=u-h,g=o+l,m=w((o-l)*a),y=w(g*d),x=m+y,v=m-y;o=w(x*x),l=w(e*w(v*v)),n=w(u*h),s=w(f*(u+w(b*f)))}return{x_2:n,x_3:o}=P(c,n,o),{x_2:s,x_3:l}=P(c,s,l),w(n*a(s))}(function(e){let t=(0,i.qj)("u coordinate",e,h);return c&&(t[31]&=127),w((0,i.lX)(t))}(r),(0,i.lX)(n((0,i.qj)("scalar",e,h))));if(s===f)throw Error("invalid private or public key received");return A(s)}function k(e){return E(e,v)}function P(e,t,r){let n=w(e*(t-r));return{x_2:t=w(t-n),x_3:r=w(r+n)}}return{scalarMult:E,scalarMultBase:k,getSharedSecret:(e,t)=>E(e,t),getPublicKey:e=>k(e),utils:{randomPrivateKey:()=>u(h)},GuBytes:v.slice()}}({P:e,type:"x25519",powPminus2:t=>{let{pow_p_5_8:r,b2:n}=A(t);return(0,o.zi)((0,o.zH)(r,y,e)*n,e)},adjustScalarBytes:E})})()},3671:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>M,__assign:()=>s,__asyncDelegator:()=>P,__asyncGenerator:()=>k,__asyncValues:()=>S,__await:()=>E,__awaiter:()=>p,__classPrivateFieldGet:()=>O,__classPrivateFieldIn:()=>N,__classPrivateFieldSet:()=>R,__createBinding:()=>m,__decorate:()=>o,__disposeResources:()=>D,__esDecorate:()=>c,__exportStar:()=>b,__extends:()=>i,__generator:()=>g,__importDefault:()=>C,__importStar:()=>_,__makeTemplateObject:()=>I,__metadata:()=>f,__param:()=>l,__propKey:()=>d,__read:()=>x,__rest:()=>a,__runInitializers:()=>u,__setFunctionName:()=>h,__spread:()=>w,__spreadArray:()=>A,__spreadArrays:()=>v,__values:()=>y,default:()=>L});var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function o(e,t,r,n){var i,s=arguments.length,a=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(a=(s<3?i(a):s>3?i(t,r,a):i(t,r))||a);return s>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,n){t(r,n,e)}}function c(e,t,r,n,i,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h=!1,f=r.length-1;f>=0;f--){var p={};for(var g in n)p[g]="access"===g?{}:n[g];for(var g in n.access)p.access[g]=n.access[g];p.addInitializer=function(e){if(h)throw TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var m=(0,r[f])("accessor"===l?{get:d.get,set:d.set}:d[c],p);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw TypeError("Object expected");(o=a(m.get))&&(d.get=o),(o=a(m.set))&&(d.set=o),(o=a(m.init))&&i.unshift(o)}else(o=a(m))&&("field"===l?i.unshift(o):d[c]=o)}u&&Object.defineProperty(u,n.name,d),h=!0}function u(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function h(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,r,n){return new(r||(r=Promise))(function(i,s){function a(e){try{l(n.next(e))}catch(e){s(e)}}function o(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((n=n.apply(e,t||[])).next())})}function g(e,t){var r,n,i,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){return function(o){if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,o[0]&&(s=0)),s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var m=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function b(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||m(t,e,r)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function x(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x(arguments[t]));return e}function v(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n}function A(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function E(e){return this instanceof E?(this.v=e,this):new E(e)}function k(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function a(e,t){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||o(e,t)})},t&&(n[e]=t(n[e])))}function o(e,t){try{var r;(r=i[e](t)).value instanceof E?Promise.resolve(r.value.v).then(l,c):u(s[0][2],r)}catch(e){u(s[0][3],e)}}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function P(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:E(e[n](t)),done:!1}:i?i(t):t}:i}}function S(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=y(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}}function I(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var T=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&m(t,e,r);return T(t,e),t}function C(e){return e&&e.__esModule?e:{default:e}}function O(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function R(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function N(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function M(e,t,r){if(null!=t){var n,i;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if("function"!=typeof n)throw TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var B="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function D(e){function t(t){e.error=e.hasError?new B(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function i(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(i,function(e){return t(e),i()})}else n|=1}catch(e){t(e)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}let L={__extends:i,__assign:s,__rest:a,__decorate:o,__param:l,__metadata:f,__awaiter:p,__generator:g,__createBinding:m,__exportStar:b,__values:y,__read:x,__spread:w,__spreadArrays:v,__spreadArray:A,__await:E,__asyncGenerator:k,__asyncDelegator:P,__asyncValues:S,__makeTemplateObject:I,__importStar:_,__importDefault:C,__classPrivateFieldGet:O,__classPrivateFieldSet:R,__classPrivateFieldIn:N,__addDisposableResource:M,__disposeResources:D}},3679:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SiweErrorType=t.SiweError=t.VerifyOptsKeys=t.VerifyParamsKeys=void 0,t.VerifyParamsKeys=["signature","scheme","domain","nonce","time"],t.VerifyOptsKeys=["provider","suppressExceptions","verificationFallback"];class r{constructor(e,t,r){this.type=e,this.expected=t,this.received=r}}t.SiweError=r,function(e){e.EXPIRED_MESSAGE="Expired message.",e.INVALID_DOMAIN="Invalid domain.",e.SCHEME_MISMATCH="Scheme does not match provided scheme for verification.",e.DOMAIN_MISMATCH="Domain does not match provided domain for verification.",e.NONCE_MISMATCH="Nonce does not match provided nonce for verification.",e.INVALID_ADDRESS="Invalid address.",e.INVALID_URI="URI does not conform to RFC 3986.",e.INVALID_NONCE="Nonce size smaller then 8 characters or is not alphanumeric.",e.NOT_YET_VALID_MESSAGE="Message is not valid yet.",e.INVALID_SIGNATURE="Signature does not match address of the message.",e.INVALID_TIME_FORMAT="Invalid time format.",e.INVALID_MESSAGE_VERSION="Invalid message version.",e.UNABLE_TO_PARSE="Unable to parse the message."}(t.SiweErrorType||(t.SiweErrorType={}))},3683:(e,t,r)=>{"use strict";r.d(t,{S:()=>P});var n=r(5364),i=r(1295),s=r(6269);let[a,o,l]=[[],[],[]],c=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=u,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],a.push(2*(5*n+r)),o.push((e+1)*(e+2)/2%64);let i=c;for(let e=0;e<7;e++)(t=(t<<u^(t>>h)*p)%f)&d&&(i^=u<<(u<<BigInt(e))-u);l.push(i)}let[g,m]=(0,i.lD)(l,!0),b=(e,t,r)=>r>32?(0,i.WM)(e,t,r):(0,i.P5)(e,t,r),y=(e,t,r)=>r>32?(0,i.im)(e,t,r):(0,i.B4)(e,t,r);class x extends s.Vw{constructor(e,t,r,i=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.ai)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.DH)(this.state)}keccak(){!function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,s=r[i],a=r[i+1],o=b(s,a,1)^r[n],l=y(s,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=o[r],s=b(t,i,n),l=y(t,i,n),c=a[r];t=e[c],i=e[c+1],e[c]=s,e[c+1]=l}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=g[n],e[1]^=m[n]}r.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){(0,n.t2)(this);let{blockLen:t,state:r}=this,i=(e=(0,s.ZJ)(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.t2)(this,!1),(0,n.ee)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.ai)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.CG)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new x(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}let w=(0,s.ld)(()=>new x(136,1,32));var v=r(8121);let A=!1,E=function(e){return w(e)},k=E;function P(e){let t=(0,v.q5)(e,"data");return(0,v.c$)(k(t))}P._=E,P.lock=function(){A=!0},P.register=function(e){if(A)throw TypeError("keccak256 is locked");k=e},Object.freeze(P)},3751:(e,t,r)=>{"use strict";function n(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}function i(e){if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")}function s(e){return new TextEncoder().encode(e)}function a(e){return new TextDecoder().decode(e)}r.d(t,{aI:()=>n,au:()=>i,dI:()=>a,sH:()=>s}),new Uint8Array(0)},3804:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=function(e){let[t,r]=null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:e=>{n.push(e)},next:()=>n.length>0?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}},3809:(e,t,r)=>{"use strict";r.d(t,{eI:()=>h.eI,Cm:()=>h.Cm,A6:()=>h.A6,Jj:()=>h.Jj,GY:()=>h.GY,Ik:()=>h.Ik,qc:()=>h.qc,R8:()=>x,HZ:()=>w,WH:()=>v,K6:()=>y});var n=r(6054),i=r(5839),s=r(9700),a=r(6552),o=r(9865),l=r(1138),c=r(7797),u=r(1990),d=r(2873),h=r(5898);let f=Symbol.for("nodejs.util.inspect.custom"),p=Symbol.for("@multiformats/multiaddr"),g=[h.eI,h.Cm,h.A6,h.Jj];class m extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}class b{[p]=!0;#tr;#tn;#ti;constructor(e="/",t={}){this.#tr=function(e){if(null==e&&(e="/"),x(e))return e.getComponents();if(e instanceof Uint8Array)return function(e){let t=[],r=0;for(;r<e.length;){var i,s,a;let o=l.D4(e,r),c=d.u.getProtocol(o),u=l.OY(o),h=(i=c,s=e,a=r+u,null==i.size||0===i.size?0:i.size>0?i.size/8:l.D4(s,a)),f=0;h>0&&c.size===d.V&&(f=l.OY(h));let p=u+f+h,g={code:o,name:c.name,bytes:e.subarray(r,r+p)};if(h>0){let t=r+u+f,i=e.subarray(t,t+h);g.value=c.bytesToValue?.(i)??(0,n.d)(i)}t.push(g),r+=p}return t}(e);if("string"==typeof e)return""===(e=e.replace(/\/(\/)+/,"/").replace(/(\/)+$/,""))&&(e="/"),function(e){if("/"!==e.charAt(0))throw new u.Ci('String multiaddr must start with "/"');let t=[],r="protocol",n="",i="";for(let s=1;s<e.length;s++){let a=e.charAt(s);"/"!==a&&("protocol"===r?i+=e.charAt(s):n+=e.charAt(s));let o=s===e.length-1;if("/"===a||o){let e=d.u.getProtocol(i);if("protocol"===r){if(null==e.size||0===e.size){t.push({code:e.code,name:e.name}),n="",i="",r="protocol";continue}if(o)throw new u.Ci(`Component ${i} was missing value`);r="value"}else if("value"===r){let s={code:e.code,name:e.name};if(null!=e.size&&0!==e.size){if(""===n)throw new u.Ci(`Component ${i} was missing value`);s.value=e.stringToValue?.(n)??n}t.push(s),n="",i="",r="protocol"}}}if(""!==i&&""!==n)throw new u.Ci("Incomplete multiaddr");return t}(e);if(Array.isArray(e))return e;throw new u.Ci("Must be a string, Uint8Array, Component[], or another Multiaddr")}(e),!1!==t.validate&&function(e){e.getComponents().forEach(e=>{let t=d.u.getProtocol(e.code);null!=e.value&&t.validate?.(e.value)})}(this)}get bytes(){return null==this.#ti&&(this.#ti=function(e){let t=0,r=[];for(let n of e){if(null==n.bytes){let e;let t=d.u.getProtocol(n.code),r=l.OY(n.code),i=0,s=0;null!=n.value&&(i=(e=t.valueToBytes?.(n.value)??(0,o.s)(n.value)).byteLength,t.size===d.V&&(s=l.OY(i)));let a=new Uint8Array(r+s+i),c=0;l.mD(n.code,a,c),c+=r,null!=e&&(t.size===d.V&&(l.mD(i,a,c),c+=s),a.set(e,c)),n.bytes=a}r.push(n.bytes),t+=n.bytes.byteLength}return(0,c.x)(r,t)}(this.#tr)),this.#ti}toString(){if(null==this.#tn){var e;this.#tn=(e=this.#tr,`/${e.flatMap(e=>{if(null==e.value)return e.name;let t=d.u.getProtocol(e.code);if(null==t)throw new u.Ci(`Unknown protocol code ${e.code}`);return[e.name,t.valueToString?.(e.value)??e.value]}).join("/")}`)}return this.#tn}toJSON(){return this.toString()}toOptions(){let e,t,r,n;let i="";for(let{code:s,name:a,value:o}of this.#tr)s===h.qc&&(i=`%${o??""}`),g.includes(s)&&(t="tcp",n=443,r=`${o??""}${i}`,e=s===h.A6?6:4),(s===h.u||s===h.o$)&&(t="tcp"===a?"tcp":"udp",n=parseInt(o??"")),(s===h.GY||s===h.Ik)&&(t="tcp",r=`${o??""}${i}`,e=s===h.Ik?6:4);if(null==e||null==t||null==r||null==n)throw Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:r,transport:t,port:n}}getComponents(){return[...this.#tr]}protos(){return this.#tr.map(({code:e,value:t})=>{let r=d.u.getProtocol(e);return{code:e,size:r.size??0,name:r.name,resolvable:!!r.resolvable,path:!!r.path}})}protoCodes(){return this.#tr.map(({code:e})=>e)}protoNames(){return this.#tr.map(({name:e})=>e)}tuples(){return this.#tr.map(({code:e,value:t})=>{if(null==t)return[e];let r=d.u.getProtocol(e),n=[e];return null!=t&&n.push(r.valueToBytes?.(t)??(0,o.s)(t)),n})}stringTuples(){return this.#tr.map(({code:e,value:t})=>null==t?[e]:[e,t])}encapsulate(e){let t=new b(e);return new b([...this.#tr,...t.getComponents()],{validate:!1})}decapsulate(e){let t=e.toString(),r=this.toString(),n=r.lastIndexOf(t);if(n<0)throw new u.gG(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new b(r.slice(0,n),{validate:!1})}decapsulateCode(e){let t;for(let r=this.#tr.length-1;r>-1;r--)if(this.#tr[r].code===e){t=r;break}return new b(this.#tr.slice(0,t),{validate:!1})}getPeerId(){try{let e=[];this.#tr.forEach(({code:t,value:r})=>{t===h.rx&&e.push([t,r]),t===h.X5&&(e=[])});let t=e.pop();if(t?.[1]!=null){let e=t[1];if("Q"===e[0]||"1"===e[0])return(0,n.d)(i.base58btc.decode(`z${e}`),"base58btc");return(0,n.d)(s.TO.parse(e).multihash.bytes,"base58btc")}return null}catch(e){return null}}getPath(){for(let e of this.#tr)if(d.u.getProtocol(e.code).path)return e.value??null;return null}equals(e){return(0,a.a)(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(e=>e.resolvable);if(null==t)return[this];let r=y.get(t.name);if(null==r)throw new m(`no available resolver for ${t.name}`);return(await r(this,e)).map(e=>w(e))}nodeAddress(){let e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(){return 2===this.#tr.length&&(this.#tr[0].code===h.GY||this.#tr[0].code===h.Ik)&&(this.#tr[1].code===h.u||this.#tr[1].code===h.o$)}[f](){return`Multiaddr(${this.toString()})`}}r(3012);let y=new Map;function x(e){return!!e?.[p]}function w(e){return new b(e)}function v(e){let t=d.u.getProtocol(e);return{code:t.code,size:t.size??0,name:t.name,resolvable:!!t.resolvable,path:!!t.path}}},3810:(e,t)=>{"use strict";function r(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function n(e){if("boolean"!=typeof e)throw Error(`Expected boolean, not ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function o(e,t){i(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(t,"__esModule",{value:!0}),t.output=t.exists=t.hash=t.bytes=t.bool=t.number=void 0,t.number=r,t.bool=n,t.bytes=i,t.hash=s,t.exists=a,t.output=o,t.default={number:r,bool:n,bytes:i,hash:s,exists:a,output:o}},3823:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIcapAddress=t.getAddress=void 0;let n=r(6870),i=r(8662),s=BigInt(0),a=BigInt(36);function o(e){let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);let s=(0,i.getBytes)((0,n.keccak256)(r));for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&s[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let l={};for(let e=0;e<10;e++)l[String(e)]=String(e);for(let e=0;e<26;e++)l[String.fromCharCode(65+e)]=String(10+e);function c(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>l[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}let u=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function d(e){if((0,i.assertArgument)("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=o(e);return(0,i.assertArgument)(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){(0,i.assertArgument)(e.substring(2,4)===c(e),"bad icap checksum","address",e);let t=(function(e){e=e.toLowerCase();let t=s;for(let r=0;r<e.length;r++)t=t*a+u[e[r]];return t})(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return o("0x"+t)}(0,i.assertArgument)(!1,"invalid address","address",e)}t.getAddress=d,t.getIcapAddress=function(e){let t=BigInt(d(e)).toString(36).toUpperCase();for(;t.length<30;)t="0"+t;return"XE"+c("XE00"+t)+t}},3895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;let n=r(9111),i=r(1842),s=r(6870),a=r(8662),o=r(8895),l=r(6726),c=r(8579),u=BigInt(0),d=BigInt(2),h=BigInt(27),f=BigInt(28),p=BigInt(35),g=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function m(e,t){let r=e.toString(16);for(;r.length<2;)r="0"+r;return"0x"+(r+=(0,s.sha256)(t).substring(4))}function b(e){return"0x"===e?null:(0,n.getAddress)(e)}function y(e,t){try{return(0,o.accessListify)(e)}catch(r){(0,a.assertArgument)(!1,r.message,t,e)}}function x(e,t){return"0x"===e?0:(0,a.getNumber)(e,t)}function w(e,t){if("0x"===e)return u;let r=(0,a.getBigInt)(e,t);return(0,a.assertArgument)(r<=g,"value exceeds uint size",t,r),r}function v(e,t){let r=(0,a.getBigInt)(e,"value"),n=(0,a.toBeArray)(r);return(0,a.assertArgument)(n.length<=32,"value too large",`tx.${t}`,r),n}function A(e){return(0,o.accessListify)(e).map(e=>[e.address,e.storageKeys])}function E(e,t){let r;try{if(r=x(t[0],"yParity"),0!==r&&1!==r)throw Error("bad yParity")}catch(e){(0,a.assertArgument)(!1,"invalid yParity","yParity",t[0])}let n=(0,a.zeroPadValue)(t[1],32),i=(0,a.zeroPadValue)(t[2],32);e.signature=s.Signature.from({r:n,s:i,yParity:r})}class k{#ts;#ta;#o;#to;#tl;#tc;#tu;#td;#th;#eS;#tf;#tp;#tg;#tm;#tb;#ty;#tx;get type(){return this.#ts}set type(e){switch(e){case null:this.#ts=null;break;case 0:case"legacy":this.#ts=0;break;case 1:case"berlin":case"eip-2930":this.#ts=1;break;case 2:case"london":case"eip-1559":this.#ts=2;break;case 3:case"cancun":case"eip-4844":this.#ts=3;break;case 4:case"pectra":case"eip-7702":this.#ts=4;break;default:(0,a.assertArgument)(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let e=this.#ta;return null==e&&3===this.type?i.ZeroAddress:e}set to(e){this.#ta=null==e?null:(0,n.getAddress)(e)}get nonce(){return this.#to}set nonce(e){this.#to=(0,a.getNumber)(e,"value")}get gasLimit(){return this.#tl}set gasLimit(e){this.#tl=(0,a.getBigInt)(e)}get gasPrice(){let e=this.#tc;return null==e&&(0===this.type||1===this.type)?u:e}set gasPrice(e){this.#tc=null==e?null:(0,a.getBigInt)(e,"gasPrice")}get maxPriorityFeePerGas(){let e=this.#tu;return null==e?2===this.type||3===this.type?u:null:e}set maxPriorityFeePerGas(e){this.#tu=null==e?null:(0,a.getBigInt)(e,"maxPriorityFeePerGas")}get maxFeePerGas(){let e=this.#td;return null==e?2===this.type||3===this.type?u:null:e}set maxFeePerGas(e){this.#td=null==e?null:(0,a.getBigInt)(e,"maxFeePerGas")}get data(){return this.#o}set data(e){this.#o=(0,a.hexlify)(e)}get value(){return this.#th}set value(e){this.#th=(0,a.getBigInt)(e,"value")}get chainId(){return this.#eS}set chainId(e){this.#eS=(0,a.getBigInt)(e)}get signature(){return this.#tf||null}set signature(e){this.#tf=null==e?null:s.Signature.from(e)}get accessList(){let e=this.#tp||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){this.#tp=null==e?null:(0,o.accessListify)(e)}get authorizationList(){let e=this.#tx||null;return null==e&&4===this.type?[]:e}set authorizationList(e){this.#tx=null==e?null:e.map(e=>(0,l.authorizationify)(e))}get maxFeePerBlobGas(){let e=this.#tg;return null==e&&3===this.type?u:e}set maxFeePerBlobGas(e){this.#tg=null==e?null:(0,a.getBigInt)(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#tm;return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){(0,a.assertArgument)(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)(0,a.assertArgument)((0,a.isHexString)(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#tm=e}get blobs(){return null==this.#ty?null:this.#ty.map(e=>Object.assign({},e))}set blobs(e){if(null==e){this.#ty=null;return}let t=[],r=[];for(let n=0;n<e.length;n++){let i=e[n];if((0,a.isBytesLike)(i)){(0,a.assert)(this.#tb,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=(0,a.getBytes)(i);if((0,a.assertArgument)(e.length<=131072,"blob is too large",`blobs[${n}]`,i),131072!==e.length){let t=new Uint8Array(131072);t.set(e),e=t}let s=this.#tb.blobToKzgCommitment(e),o=(0,a.hexlify)(this.#tb.computeBlobKzgProof(e,s));t.push({data:(0,a.hexlify)(e),commitment:(0,a.hexlify)(s),proof:o}),r.push(m(1,s))}else{let e=(0,a.hexlify)(i.commitment);t.push({data:(0,a.hexlify)(i.data),commitment:e,proof:(0,a.hexlify)(i.proof)}),r.push(m(1,e))}}this.#ty=t,this.#tm=r}get kzg(){return this.#tb}set kzg(e){if(null==e)this.#tb=null;else this.#tb={blobToKzgCommitment:t=>{if("computeBlobProof"in e){if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return(0,a.getBytes)(e.blobToKzgCommitment((0,a.hexlify)(t)))}else if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return(0,a.getBytes)(e.blobToKzgCommitment(t));if("blobToKZGCommitment"in e&&"function"==typeof e.blobToKZGCommitment)return(0,a.getBytes)(e.blobToKZGCommitment((0,a.hexlify)(t)));(0,a.assertArgument)(!1,"unsupported KZG library","kzg",e)},computeBlobKzgProof:(t,r)=>"computeBlobProof"in e&&"function"==typeof e.computeBlobProof?(0,a.getBytes)(e.computeBlobProof((0,a.hexlify)(t),(0,a.hexlify)(r))):"computeBlobKzgProof"in e&&"function"==typeof e.computeBlobKzgProof?e.computeBlobKzgProof(t,r):"computeBlobKZGProof"in e&&"function"==typeof e.computeBlobKZGProof?(0,a.getBytes)(e.computeBlobKZGProof((0,a.hexlify)(t),(0,a.hexlify)(r))):void(0,a.assertArgument)(!1,"unsupported KZG library","kzg",e)}}constructor(){this.#ts=null,this.#ta=null,this.#to=0,this.#tl=u,this.#tc=null,this.#tu=null,this.#td=null,this.#o="0x",this.#th=u,this.#eS=u,this.#tf=null,this.#tp=null,this.#tg=null,this.#tm=null,this.#tb=null,this.#ty=null,this.#tx=null}get hash(){return null==this.signature?null:(0,s.keccak256)(this.#tw(!0,!1))}get unsignedHash(){return(0,s.keccak256)(this.unsignedSerialized)}get from(){return null==this.signature?null:(0,c.recoverAddress)(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:s.SigningKey.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#tw(e,t){(0,a.assert)(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let r=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){let r=[v(e.nonce,"nonce"),v(e.gasPrice||0,"gasPrice"),v(e.gasLimit,"gasLimit"),e.to||"0x",v(e.value,"value"),e.data],n=u;if(e.chainId!=u)n=(0,a.getBigInt)(e.chainId,"tx.chainId"),(0,a.assertArgument)(!t||null==t.networkV||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){let t=e.signature.legacyChainId;null!=t&&(n=t)}if(!t)return n!==u&&(r.push((0,a.toBeArray)(n)),r.push("0x"),r.push("0x")),(0,a.encodeRlp)(r);let i=BigInt(27+t.yParity);return n!==u?i=s.Signature.getChainIdV(n,t.v):BigInt(t.v)!==i&&(0,a.assertArgument)(!1,"tx.chainId/sig.v mismatch","sig",t),r.push((0,a.toBeArray)(i)),r.push((0,a.toBeArray)(t.r)),r.push((0,a.toBeArray)(t.s)),(0,a.encodeRlp)(r)}(this,r);case 1:return function(e,t){let r=[v(e.chainId,"chainId"),v(e.nonce,"nonce"),v(e.gasPrice||0,"gasPrice"),v(e.gasLimit,"gasLimit"),e.to||"0x",v(e.value,"value"),e.data,A(e.accessList||[])];return t&&(r.push(v(t.yParity,"recoveryParam")),r.push((0,a.toBeArray)(t.r)),r.push((0,a.toBeArray)(t.s))),(0,a.concat)(["0x01",(0,a.encodeRlp)(r)])}(this,r);case 2:return function(e,t){let r=[v(e.chainId,"chainId"),v(e.nonce,"nonce"),v(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),v(e.maxFeePerGas||0,"maxFeePerGas"),v(e.gasLimit,"gasLimit"),e.to||"0x",v(e.value,"value"),e.data,A(e.accessList||[])];return t&&(r.push(v(t.yParity,"yParity")),r.push((0,a.toBeArray)(t.r)),r.push((0,a.toBeArray)(t.s))),(0,a.concat)(["0x02",(0,a.encodeRlp)(r)])}(this,r);case 3:return function(e,t,r){let n=[v(e.chainId,"chainId"),v(e.nonce,"nonce"),v(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),v(e.maxFeePerGas||0,"maxFeePerGas"),v(e.gasLimit,"gasLimit"),e.to||i.ZeroAddress,v(e.value,"value"),e.data,A(e.accessList||[]),v(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),function(e,t){(0,a.assertArgument)(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)(0,a.assertArgument)((0,a.isHexString)(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(v(t.yParity,"yParity")),n.push((0,a.toBeArray)(t.r)),n.push((0,a.toBeArray)(t.s)),r)?(0,a.concat)(["0x03",(0,a.encodeRlp)([n,r.map(e=>e.data),r.map(e=>e.commitment),r.map(e=>e.proof)])]):(0,a.concat)(["0x03",(0,a.encodeRlp)(n)])}(this,r,t?this.blobs:null);case 4:return function(e,t){let r=[v(e.chainId,"chainId"),v(e.nonce,"nonce"),v(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),v(e.maxFeePerGas||0,"maxFeePerGas"),v(e.gasLimit,"gasLimit"),e.to||"0x",v(e.value,"value"),e.data,A(e.accessList||[]),(e.authorizationList||[]).map(e=>[v(e.chainId,"chainId"),e.address,v(e.nonce,"nonce"),v(e.signature.yParity,"yParity"),(0,a.toBeArray)(e.signature.r),(0,a.toBeArray)(e.signature.s)])];return t&&(r.push(v(t.yParity,"yParity")),r.push((0,a.toBeArray)(t.r)),r.push((0,a.toBeArray)(t.s))),(0,a.concat)(["0x04",(0,a.encodeRlp)(r)])}(this,r)}(0,a.assert)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#tw(!0,!0)}get unsignedSerialized(){return this.#tw(!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList,n=null!=this.#tg||this.#tm;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&(0,a.assert)(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),(0,a.assert)(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),(0,a.assert)(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let i=[];return null!=this.type?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):t?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(n&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return k.from(this)}toJSON(){let e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new k;if("string"==typeof e){let t=(0,a.getBytes)(e);if(t[0]>=127)return k.from(function(e){let t=(0,a.decodeRlp)(e);(0,a.assertArgument)(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);let r={type:0,nonce:x(t[0],"nonce"),gasPrice:w(t[1],"gasPrice"),gasLimit:w(t[2],"gasLimit"),to:b(t[3]),value:w(t[4],"value"),data:(0,a.hexlify)(t[5]),chainId:u};if(6===t.length)return r;let n=w(t[6],"v"),i=w(t[7],"r"),o=w(t[8],"s");if(i===u&&o===u)r.chainId=n;else{let e=(n-p)/d;e<u&&(e=u),r.chainId=e,(0,a.assertArgument)(e!==u||n===h||n===f,"non-canonical legacy v","v",t[6]),r.signature=s.Signature.from({r:(0,a.zeroPadValue)(t[7],32),s:(0,a.zeroPadValue)(t[8],32),v:n})}return r}(t));switch(t[0]){case 1:return k.from(function(e){let t=(0,a.decodeRlp)((0,a.getBytes)(e).slice(1));(0,a.assertArgument)(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",(0,a.hexlify)(e));let r={type:1,chainId:w(t[0],"chainId"),nonce:x(t[1],"nonce"),gasPrice:w(t[2],"gasPrice"),gasLimit:w(t[3],"gasLimit"),to:b(t[4]),value:w(t[5],"value"),data:(0,a.hexlify)(t[6]),accessList:y(t[7],"accessList")};return 8===t.length||E(r,t.slice(8)),r}(t));case 2:return k.from(function(e){let t=(0,a.decodeRlp)((0,a.getBytes)(e).slice(1));(0,a.assertArgument)(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",(0,a.hexlify)(e));let r={type:2,chainId:w(t[0],"chainId"),nonce:x(t[1],"nonce"),maxPriorityFeePerGas:w(t[2],"maxPriorityFeePerGas"),maxFeePerGas:w(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:w(t[4],"gasLimit"),to:b(t[5]),value:w(t[6],"value"),data:(0,a.hexlify)(t[7]),accessList:y(t[8],"accessList")};return 9===t.length||E(r,t.slice(9)),r}(t));case 3:return k.from(function(e){let t=(0,a.decodeRlp)((0,a.getBytes)(e).slice(1)),r="3",n=null;if(4===t.length&&Array.isArray(t[0])){r="3 (network format)";let e=t[1],i=t[2],s=t[3];(0,a.assertArgument)(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),(0,a.assertArgument)(Array.isArray(i),"invalid network format: commitments not an array","fields[2]",i),(0,a.assertArgument)(Array.isArray(s),"invalid network format: proofs not an array","fields[3]",s),(0,a.assertArgument)(e.length===i.length,"invalid network format: blobs/commitments length mismatch","fields",t),(0,a.assertArgument)(e.length===s.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let r=0;r<t[1].length;r++)n.push({data:e[r],commitment:i[r],proof:s[r]});t=t[0]}(0,a.assertArgument)(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${r}`,"data",(0,a.hexlify)(e));let i={type:3,chainId:w(t[0],"chainId"),nonce:x(t[1],"nonce"),maxPriorityFeePerGas:w(t[2],"maxPriorityFeePerGas"),maxFeePerGas:w(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:w(t[4],"gasLimit"),to:b(t[5]),value:w(t[6],"value"),data:(0,a.hexlify)(t[7]),accessList:y(t[8],"accessList"),maxFeePerBlobGas:w(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(i.blobs=n),(0,a.assertArgument)(null!=i.to,`invalid address for transaction type: ${r}`,"data",e),(0,a.assertArgument)(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<i.blobVersionedHashes.length;t++)(0,a.assertArgument)((0,a.isHexString)(i.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||E(i,t.slice(11)),i}(t));case 4:return k.from(function(e){let t=(0,a.decodeRlp)((0,a.getBytes)(e).slice(1));(0,a.assertArgument)(Array.isArray(t)&&(10===t.length||13===t.length),"invalid field count for transaction type: 4","data",(0,a.hexlify)(e));let r={type:4,chainId:w(t[0],"chainId"),nonce:x(t[1],"nonce"),maxPriorityFeePerGas:w(t[2],"maxPriorityFeePerGas"),maxFeePerGas:w(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:w(t[4],"gasLimit"),to:b(t[5]),value:w(t[6],"value"),data:(0,a.hexlify)(t[7]),accessList:y(t[8],"accessList"),authorizationList:function(e,t){try{if(!Array.isArray(e))throw Error("authorizationList: invalid array");let t=[];for(let r=0;r<e.length;r++){let n=e[r];if(!Array.isArray(n))throw Error(`authorization[${r}]: invalid array`);if(6!==n.length)throw Error(`authorization[${r}]: wrong length`);if(!n[1])throw Error(`authorization[${r}]: null address`);t.push({address:b(n[1]),nonce:w(n[2],"nonce"),chainId:w(n[0],"chainId"),signature:s.Signature.from({yParity:x(n[3],"yParity"),r:(0,a.zeroPadValue)(n[4],32),s:(0,a.zeroPadValue)(n[5],32)})})}return t}catch(r){(0,a.assertArgument)(!1,r.message,t,e)}}(t[9],"authorizationList")};return 10===t.length||E(r,t.slice(10)),r}(t))}(0,a.assert)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let t=new k;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=s.Signature.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.authorizationList&&(t.authorizationList=e.authorizationList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&((0,a.assertArgument)(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),(0,a.assertArgument)(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&((0,a.assertArgument)(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),(0,a.assertArgument)(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}t.Transaction=k},3985:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var n=r(3422),i=r(143);let s=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"].map(e=>new i.Netmask(e));function a(e){for(let t of s)if(t.contains(e))return!0;return!1}function o(e){return(0,n.wM)(e)?a(e):/^::ffff:([0-9a-fA-F]{1,4}):([0-9a-fA-F]{1,4})$/.test(e)?function(e){let t=e.split(":");if(t.length<2)return!1;let r=t[t.length-1].padStart(4,"0"),n=t[t.length-2].padStart(4,"0");return a(`${parseInt(n.substring(0,2),16)}.${parseInt(n.substring(2),16)}.${parseInt(r.substring(0,2),16)}.${parseInt(r.substring(2),16)}`)}(e):/^::ffff:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)?function(e){let t=e.split(":");return a(t[t.length-1])}(e):(0,n.w7)(e)?/^::$/.test(e)||/^::1$/.test(e)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(e)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(e)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(e)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(e)||/^ff([0-9a-fA-F]{2,2}):/i.test(e):void 0}},4006:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.pbkdf2Sync=t.createHmac=t.createHash=void 0;let n=r(3632),i=r(2670),s=r(7584),a=r(6833),o=r(8662),l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("unable to locate global object")}(),c=l.crypto||l.msCrypto;t.createHash=function(e){switch(e){case"sha256":return s.sha256.create();case"sha512":return a.sha512.create()}(0,o.assertArgument)(!1,"invalid hashing algorithm name","algorithm",e)},t.createHmac=function(e,t){let r={sha256:s.sha256,sha512:a.sha512}[e];return(0,o.assertArgument)(null!=r,"invalid hmac algorithm","algorithm",e),n.hmac.create(r,t)},t.pbkdf2Sync=function(e,t,r,n,l){let c={sha256:s.sha256,sha512:a.sha512}[l];return(0,o.assertArgument)(null!=c,"invalid pbkdf2 algorithm","algorithm",l),(0,i.pbkdf2)(c,e,t,{c:r,dkLen:n})},t.randomBytes=function(e){(0,o.assert)(null!=c,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),(0,o.assertArgument)(Number.isInteger(e)&&e>0&&e<=1024,"invalid length","length",e);let t=new Uint8Array(e);return c.getRandomValues(t),t}},4037:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Typed=void 0;let n=r(8662),i={};function s(e,t){let r=!1;return t<0&&(r=!0,t*=-1),new l(i,`${r?"":"u"}int${t}`,e,{signed:r,width:t})}function a(e,t){return new l(i,`bytes${t||""}`,e,{size:t})}let o=Symbol.for("_ethers_typed");class l{type;value;#s;_typedSymbol;constructor(e,t,r,s){null==s&&(s=null),(0,n.assertPrivate)(i,e,"Typed"),(0,n.defineProperties)(this,{_typedSymbol:o,type:t,value:r}),this.#s=s,this.format()}format(){if("array"===this.type||"dynamicArray"===this.type)throw Error("");return"tuple"===this.type?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#s}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#s?-1:!1===this.#s?this.value.length:null}static from(e,t){return new l(i,e,t)}static uint8(e){return s(e,8)}static uint16(e){return s(e,16)}static uint24(e){return s(e,24)}static uint32(e){return s(e,32)}static uint40(e){return s(e,40)}static uint48(e){return s(e,48)}static uint56(e){return s(e,56)}static uint64(e){return s(e,64)}static uint72(e){return s(e,72)}static uint80(e){return s(e,80)}static uint88(e){return s(e,88)}static uint96(e){return s(e,96)}static uint104(e){return s(e,104)}static uint112(e){return s(e,112)}static uint120(e){return s(e,120)}static uint128(e){return s(e,128)}static uint136(e){return s(e,136)}static uint144(e){return s(e,144)}static uint152(e){return s(e,152)}static uint160(e){return s(e,160)}static uint168(e){return s(e,168)}static uint176(e){return s(e,176)}static uint184(e){return s(e,184)}static uint192(e){return s(e,192)}static uint200(e){return s(e,200)}static uint208(e){return s(e,208)}static uint216(e){return s(e,216)}static uint224(e){return s(e,224)}static uint232(e){return s(e,232)}static uint240(e){return s(e,240)}static uint248(e){return s(e,248)}static uint256(e){return s(e,256)}static uint(e){return s(e,256)}static int8(e){return s(e,-8)}static int16(e){return s(e,-16)}static int24(e){return s(e,-24)}static int32(e){return s(e,-32)}static int40(e){return s(e,-40)}static int48(e){return s(e,-48)}static int56(e){return s(e,-56)}static int64(e){return s(e,-64)}static int72(e){return s(e,-72)}static int80(e){return s(e,-80)}static int88(e){return s(e,-88)}static int96(e){return s(e,-96)}static int104(e){return s(e,-104)}static int112(e){return s(e,-112)}static int120(e){return s(e,-120)}static int128(e){return s(e,-128)}static int136(e){return s(e,-136)}static int144(e){return s(e,-144)}static int152(e){return s(e,-152)}static int160(e){return s(e,-160)}static int168(e){return s(e,-168)}static int176(e){return s(e,-176)}static int184(e){return s(e,-184)}static int192(e){return s(e,-192)}static int200(e){return s(e,-200)}static int208(e){return s(e,-208)}static int216(e){return s(e,-216)}static int224(e){return s(e,-224)}static int232(e){return s(e,-232)}static int240(e){return s(e,-240)}static int248(e){return s(e,-248)}static int256(e){return s(e,-256)}static int(e){return s(e,-256)}static bytes1(e){return a(e,1)}static bytes2(e){return a(e,2)}static bytes3(e){return a(e,3)}static bytes4(e){return a(e,4)}static bytes5(e){return a(e,5)}static bytes6(e){return a(e,6)}static bytes7(e){return a(e,7)}static bytes8(e){return a(e,8)}static bytes9(e){return a(e,9)}static bytes10(e){return a(e,10)}static bytes11(e){return a(e,11)}static bytes12(e){return a(e,12)}static bytes13(e){return a(e,13)}static bytes14(e){return a(e,14)}static bytes15(e){return a(e,15)}static bytes16(e){return a(e,16)}static bytes17(e){return a(e,17)}static bytes18(e){return a(e,18)}static bytes19(e){return a(e,19)}static bytes20(e){return a(e,20)}static bytes21(e){return a(e,21)}static bytes22(e){return a(e,22)}static bytes23(e){return a(e,23)}static bytes24(e){return a(e,24)}static bytes25(e){return a(e,25)}static bytes26(e){return a(e,26)}static bytes27(e){return a(e,27)}static bytes28(e){return a(e,28)}static bytes29(e){return a(e,29)}static bytes30(e){return a(e,30)}static bytes31(e){return a(e,31)}static bytes32(e){return a(e,32)}static address(e){return new l(i,"address",e)}static bool(e){return new l(i,"bool",!!e)}static bytes(e){return new l(i,"bytes",e)}static string(e){return new l(i,"string",e)}static array(e,t){throw Error("not implemented yet")}static tuple(e,t){throw Error("not implemented yet")}static overrides(e){return new l(i,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===o}static dereference(e,t){if(l.isTyped(e)){if(e.type!==t)throw Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}t.Typed=l},4057:(e,t,r)=>{"use strict";r.d(t,{D4:()=>a,aI:()=>o,np:()=>l,vt:()=>s});var n=r(3751),i=r(3321);function s(e,t){let r=t.byteLength,n=i.OY(e),s=n+i.OY(r),a=new Uint8Array(s+r);return i.s_(e,a,0),i.s_(r,a,n),a.set(t,s),new l(e,r,t,a)}function a(e){let t=(0,n.au)(e),[r,s]=i.D4(t),[a,o]=i.D4(t.subarray(s)),c=t.subarray(s+o);if(c.byteLength!==a)throw Error("Incorrect length");return new l(r,a,c,t)}function o(e,t){return e===t||e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&(0,n.aI)(e.bytes,t.bytes)}class l{code;size;digest;bytes;constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}},4075:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateObject=t.createHmacDrbg=t.bitMask=t.bitSet=t.bitGet=t.bitLen=t.utf8ToBytes=t.equalBytes=t.concatBytes=t.ensureBytes=t.numberToVarBytesBE=t.numberToBytesLE=t.numberToBytesBE=t.bytesToNumberLE=t.bytesToNumberBE=t.hexToBytes=t.hexToNumber=t.numberToHexUnpadded=t.bytesToHex=void 0;let r=BigInt(0),n=BigInt(1),i=BigInt(2),s=e=>e instanceof Uint8Array,a=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function o(e){if(!s(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=a[e[r]];return t}function l(e){let t=e.toString(16);return 1&t.length?`0${t}`:t}function c(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function u(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,i=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[t]=i}return r}function d(e,t){return u(e.toString(16).padStart(2*t,"0"))}function h(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!s(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}t.bytesToHex=o,t.numberToHexUnpadded=l,t.hexToNumber=c,t.hexToBytes=u,t.bytesToNumberBE=function(e){return c(o(e))},t.bytesToNumberLE=function(e){if(!s(e))throw Error("Uint8Array expected");return c(o(Uint8Array.from(e).reverse()))},t.numberToBytesBE=d,t.numberToBytesLE=function(e,t){return d(e,t).reverse()},t.numberToVarBytesBE=function(e){return u(l(e))},t.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=u(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(s(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let i=n.length;if("number"==typeof r&&i!==r)throw Error(`${e} expected ${r} bytes, got ${i}`);return n},t.concatBytes=h,t.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},t.utf8ToBytes=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))},t.bitLen=function(e){let t;for(t=0;e>r;e>>=n,t+=1);return t},t.bitGet=function(e,t){return e>>BigInt(t)&n},t.bitSet=(e,t,i)=>e|(i?n:r)<<BigInt(t),t.bitMask=e=>(i<<BigInt(e-1))-n;let f=e=>new Uint8Array(e),p=e=>Uint8Array.from(e);t.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=f(e),i=f(e),s=0,a=()=>{n.fill(1),i.fill(0),s=0},o=(...e)=>r(i,n,...e),l=(e=f())=>{i=o(p([0]),e),n=o(),0!==e.length&&(i=o(p([1]),e),n=o())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=o()).slice();r.push(t),e+=n.length}return h(...r)};return(e,t)=>{let r;for(a(),l(e);!(r=t(c()));)l();return a(),r}};let g={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};t.validateObject=function(e,t,r={}){let n=(t,r,n)=>{let i=g[r];if("function"!=typeof i)throw Error(`Invalid validator "${r}", expected function`);let s=e[t];if((!n||void 0!==s)&&!i(s,e))throw Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}},4096:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var n=r(4922),i=r(2439),s=r(3251),a=r(7672),o=r(3683),l=r(6803),c=r(8121),u=r(9982),d=r(1456);function h(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function f(e,t,r,n){let i=[];for(;r<t+1+n;){let s=p(e,r);i.push(s.result),r+=s.consumed,(0,u.vA)(r<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:e,length:n,offset:t})}return{consumed:1+n,result:i}}function p(e,t){(0,u.vA)(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});let r=t=>{(0,u.vA)(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){let n=e[t]-247;r(t+1+n);let i=h(e,t+1,n);return r(t+1+n+i),f(e,t,t+1+n,n+i)}if(e[t]>=192){let n=e[t]-192;return r(t+1+n),f(e,t,t+1,n)}if(e[t]>=184){let n=e[t]-183;r(t+1+n);let i=h(e,t+1,n);r(t+1+n+i);let s=(0,c.c$)(e.slice(t+1+n,t+1+n+i));return{consumed:1+n+i,result:s}}if(e[t]>=128){let n=e[t]-128;r(t+1+n);let i=(0,c.c$)(e.slice(t+1,t+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:function(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}(e[t])}}function g(e){let t=(0,c.q5)(e,"data"),r=p(t,0);return(0,u.MR)(r.consumed===t.length,"unexpected junk after rlp payload","data",e),r.result}var m=r(242),b=r(936),y=r(7939),x=r(8314);let w=BigInt(0),v=BigInt(2),A=BigInt(27),E=BigInt(28),k=BigInt(35),P=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function S(e,t){let r=e.toString(16);for(;r.length<2;)r="0"+r;return"0x"+(r+=(0,s.s)(t).substring(4))}function I(e){return"0x"===e?null:(0,n.b)(e)}function T(e,t){try{return(0,b.$)(e)}catch(r){(0,u.MR)(!1,r.message,t,e)}}function _(e,t){return"0x"===e?0:(0,d.WZ)(e,t)}function C(e,t){if("0x"===e)return w;let r=(0,d.Ab)(e,t);return(0,u.MR)(r<=P,"value exceeds uint size",t,r),r}function O(e,t){let r=(0,d.Ab)(e,"value"),n=(0,d.c4)(r);return(0,u.MR)(n.length<=32,"value too large",`tx.${t}`,r),n}function R(e){return(0,b.$)(e).map(e=>[e.address,e.storageKeys])}function N(e,t){let r;try{if(r=_(t[0],"yParity"),0!==r&&1!==r)throw Error("bad yParity")}catch(e){(0,u.MR)(!1,"invalid yParity","yParity",t[0])}let n=(0,c.nx)(t[1],32),i=(0,c.nx)(t[2],32);e.signature=a.t.from({r:n,s:i,yParity:r})}class M{#ts;#ta;#o;#to;#tl;#tc;#tu;#td;#th;#eS;#tf;#tp;#tg;#tm;#tb;#ty;#tx;get type(){return this.#ts}set type(e){switch(e){case null:this.#ts=null;break;case 0:case"legacy":this.#ts=0;break;case 1:case"berlin":case"eip-2930":this.#ts=1;break;case 2:case"london":case"eip-1559":this.#ts=2;break;case 3:case"cancun":case"eip-4844":this.#ts=3;break;case 4:case"pectra":case"eip-7702":this.#ts=4;break;default:(0,u.MR)(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let e=this.#ta;return null==e&&3===this.type?i.j:e}set to(e){this.#ta=null==e?null:(0,n.b)(e)}get nonce(){return this.#to}set nonce(e){this.#to=(0,d.WZ)(e,"value")}get gasLimit(){return this.#tl}set gasLimit(e){this.#tl=(0,d.Ab)(e)}get gasPrice(){let e=this.#tc;return null==e&&(0===this.type||1===this.type)?w:e}set gasPrice(e){this.#tc=null==e?null:(0,d.Ab)(e,"gasPrice")}get maxPriorityFeePerGas(){let e=this.#tu;return null==e?2===this.type||3===this.type?w:null:e}set maxPriorityFeePerGas(e){this.#tu=null==e?null:(0,d.Ab)(e,"maxPriorityFeePerGas")}get maxFeePerGas(){let e=this.#td;return null==e?2===this.type||3===this.type?w:null:e}set maxFeePerGas(e){this.#td=null==e?null:(0,d.Ab)(e,"maxFeePerGas")}get data(){return this.#o}set data(e){this.#o=(0,c.c$)(e)}get value(){return this.#th}set value(e){this.#th=(0,d.Ab)(e,"value")}get chainId(){return this.#eS}set chainId(e){this.#eS=(0,d.Ab)(e)}get signature(){return this.#tf||null}set signature(e){this.#tf=null==e?null:a.t.from(e)}get accessList(){let e=this.#tp||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){this.#tp=null==e?null:(0,b.$)(e)}get authorizationList(){let e=this.#tx||null;return null==e&&4===this.type?[]:e}set authorizationList(e){this.#tx=null==e?null:e.map(e=>(0,y.M)(e))}get maxFeePerBlobGas(){let e=this.#tg;return null==e&&3===this.type?w:e}set maxFeePerBlobGas(e){this.#tg=null==e?null:(0,d.Ab)(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#tm;return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){(0,u.MR)(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)(0,u.MR)((0,c.Lo)(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#tm=e}get blobs(){return null==this.#ty?null:this.#ty.map(e=>Object.assign({},e))}set blobs(e){if(null==e){this.#ty=null;return}let t=[],r=[];for(let n=0;n<e.length;n++){let i=e[n];if((0,c.f)(i)){(0,u.vA)(this.#tb,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=(0,c.q5)(i);if((0,u.MR)(e.length<=131072,"blob is too large",`blobs[${n}]`,i),131072!==e.length){let t=new Uint8Array(131072);t.set(e),e=t}let s=this.#tb.blobToKzgCommitment(e),a=(0,c.c$)(this.#tb.computeBlobKzgProof(e,s));t.push({data:(0,c.c$)(e),commitment:(0,c.c$)(s),proof:a}),r.push(S(1,s))}else{let e=(0,c.c$)(i.commitment);t.push({data:(0,c.c$)(i.data),commitment:e,proof:(0,c.c$)(i.proof)}),r.push(S(1,e))}}this.#ty=t,this.#tm=r}get kzg(){return this.#tb}set kzg(e){if(null==e)this.#tb=null;else this.#tb={blobToKzgCommitment:t=>{if("computeBlobProof"in e){if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return(0,c.q5)(e.blobToKzgCommitment((0,c.c$)(t)))}else if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return(0,c.q5)(e.blobToKzgCommitment(t));if("blobToKZGCommitment"in e&&"function"==typeof e.blobToKZGCommitment)return(0,c.q5)(e.blobToKZGCommitment((0,c.c$)(t)));(0,u.MR)(!1,"unsupported KZG library","kzg",e)},computeBlobKzgProof:(t,r)=>"computeBlobProof"in e&&"function"==typeof e.computeBlobProof?(0,c.q5)(e.computeBlobProof((0,c.c$)(t),(0,c.c$)(r))):"computeBlobKzgProof"in e&&"function"==typeof e.computeBlobKzgProof?e.computeBlobKzgProof(t,r):"computeBlobKZGProof"in e&&"function"==typeof e.computeBlobKZGProof?(0,c.q5)(e.computeBlobKZGProof((0,c.c$)(t),(0,c.c$)(r))):void(0,u.MR)(!1,"unsupported KZG library","kzg",e)}}constructor(){this.#ts=null,this.#ta=null,this.#to=0,this.#tl=w,this.#tc=null,this.#tu=null,this.#td=null,this.#o="0x",this.#th=w,this.#eS=w,this.#tf=null,this.#tp=null,this.#tg=null,this.#tm=null,this.#tb=null,this.#ty=null,this.#tx=null}get hash(){return null==this.signature?null:(0,o.S)(this.#tw(!0,!1))}get unsignedHash(){return(0,o.S)(this.unsignedSerialized)}get from(){return null==this.signature?null:(0,x.x)(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:l.h.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#tw(e,t){(0,u.vA)(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let r=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){let r=[O(e.nonce,"nonce"),O(e.gasPrice||0,"gasPrice"),O(e.gasLimit,"gasLimit"),e.to||"0x",O(e.value,"value"),e.data],n=w;if(e.chainId!=w)n=(0,d.Ab)(e.chainId,"tx.chainId"),(0,u.MR)(!t||null==t.networkV||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){let t=e.signature.legacyChainId;null!=t&&(n=t)}if(!t)return n!==w&&(r.push((0,d.c4)(n)),r.push("0x"),r.push("0x")),(0,m.R)(r);let i=BigInt(27+t.yParity);return n!==w?i=a.t.getChainIdV(n,t.v):BigInt(t.v)!==i&&(0,u.MR)(!1,"tx.chainId/sig.v mismatch","sig",t),r.push((0,d.c4)(i)),r.push((0,d.c4)(t.r)),r.push((0,d.c4)(t.s)),(0,m.R)(r)}(this,r);case 1:return function(e,t){let r=[O(e.chainId,"chainId"),O(e.nonce,"nonce"),O(e.gasPrice||0,"gasPrice"),O(e.gasLimit,"gasLimit"),e.to||"0x",O(e.value,"value"),e.data,R(e.accessList||[])];return t&&(r.push(O(t.yParity,"recoveryParam")),r.push((0,d.c4)(t.r)),r.push((0,d.c4)(t.s))),(0,c.xW)(["0x01",(0,m.R)(r)])}(this,r);case 2:return function(e,t){let r=[O(e.chainId,"chainId"),O(e.nonce,"nonce"),O(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),O(e.maxFeePerGas||0,"maxFeePerGas"),O(e.gasLimit,"gasLimit"),e.to||"0x",O(e.value,"value"),e.data,R(e.accessList||[])];return t&&(r.push(O(t.yParity,"yParity")),r.push((0,d.c4)(t.r)),r.push((0,d.c4)(t.s))),(0,c.xW)(["0x02",(0,m.R)(r)])}(this,r);case 3:return function(e,t,r){let n=[O(e.chainId,"chainId"),O(e.nonce,"nonce"),O(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),O(e.maxFeePerGas||0,"maxFeePerGas"),O(e.gasLimit,"gasLimit"),e.to||i.j,O(e.value,"value"),e.data,R(e.accessList||[]),O(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),function(e,t){(0,u.MR)(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)(0,u.MR)((0,c.Lo)(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(n.push(O(t.yParity,"yParity")),n.push((0,d.c4)(t.r)),n.push((0,d.c4)(t.s)),r)?(0,c.xW)(["0x03",(0,m.R)([n,r.map(e=>e.data),r.map(e=>e.commitment),r.map(e=>e.proof)])]):(0,c.xW)(["0x03",(0,m.R)(n)])}(this,r,t?this.blobs:null);case 4:return function(e,t){let r=[O(e.chainId,"chainId"),O(e.nonce,"nonce"),O(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),O(e.maxFeePerGas||0,"maxFeePerGas"),O(e.gasLimit,"gasLimit"),e.to||"0x",O(e.value,"value"),e.data,R(e.accessList||[]),(e.authorizationList||[]).map(e=>[O(e.chainId,"chainId"),e.address,O(e.nonce,"nonce"),O(e.signature.yParity,"yParity"),(0,d.c4)(e.signature.r),(0,d.c4)(e.signature.s)])];return t&&(r.push(O(t.yParity,"yParity")),r.push((0,d.c4)(t.r)),r.push((0,d.c4)(t.s))),(0,c.xW)(["0x04",(0,m.R)(r)])}(this,r)}(0,u.vA)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#tw(!0,!0)}get unsignedSerialized(){return this.#tw(!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList,n=null!=this.#tg||this.#tm;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&(0,u.vA)(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),(0,u.vA)(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),(0,u.vA)(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let i=[];return null!=this.type?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):t?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(n&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return M.from(this)}toJSON(){let e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new M;if("string"==typeof e){let t=(0,c.q5)(e);if(t[0]>=127)return M.from(function(e){let t=g(e);(0,u.MR)(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);let r={type:0,nonce:_(t[0],"nonce"),gasPrice:C(t[1],"gasPrice"),gasLimit:C(t[2],"gasLimit"),to:I(t[3]),value:C(t[4],"value"),data:(0,c.c$)(t[5]),chainId:w};if(6===t.length)return r;let n=C(t[6],"v"),i=C(t[7],"r"),s=C(t[8],"s");if(i===w&&s===w)r.chainId=n;else{let e=(n-k)/v;e<w&&(e=w),r.chainId=e,(0,u.MR)(e!==w||n===A||n===E,"non-canonical legacy v","v",t[6]),r.signature=a.t.from({r:(0,c.nx)(t[7],32),s:(0,c.nx)(t[8],32),v:n})}return r}(t));switch(t[0]){case 1:return M.from(function(e){let t=g((0,c.q5)(e).slice(1));(0,u.MR)(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",(0,c.c$)(e));let r={type:1,chainId:C(t[0],"chainId"),nonce:_(t[1],"nonce"),gasPrice:C(t[2],"gasPrice"),gasLimit:C(t[3],"gasLimit"),to:I(t[4]),value:C(t[5],"value"),data:(0,c.c$)(t[6]),accessList:T(t[7],"accessList")};return 8===t.length||N(r,t.slice(8)),r}(t));case 2:return M.from(function(e){let t=g((0,c.q5)(e).slice(1));(0,u.MR)(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",(0,c.c$)(e));let r={type:2,chainId:C(t[0],"chainId"),nonce:_(t[1],"nonce"),maxPriorityFeePerGas:C(t[2],"maxPriorityFeePerGas"),maxFeePerGas:C(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:C(t[4],"gasLimit"),to:I(t[5]),value:C(t[6],"value"),data:(0,c.c$)(t[7]),accessList:T(t[8],"accessList")};return 9===t.length||N(r,t.slice(9)),r}(t));case 3:return M.from(function(e){let t=g((0,c.q5)(e).slice(1)),r="3",n=null;if(4===t.length&&Array.isArray(t[0])){r="3 (network format)";let e=t[1],i=t[2],s=t[3];(0,u.MR)(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),(0,u.MR)(Array.isArray(i),"invalid network format: commitments not an array","fields[2]",i),(0,u.MR)(Array.isArray(s),"invalid network format: proofs not an array","fields[3]",s),(0,u.MR)(e.length===i.length,"invalid network format: blobs/commitments length mismatch","fields",t),(0,u.MR)(e.length===s.length,"invalid network format: blobs/proofs length mismatch","fields",t),n=[];for(let r=0;r<t[1].length;r++)n.push({data:e[r],commitment:i[r],proof:s[r]});t=t[0]}(0,u.MR)(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${r}`,"data",(0,c.c$)(e));let i={type:3,chainId:C(t[0],"chainId"),nonce:_(t[1],"nonce"),maxPriorityFeePerGas:C(t[2],"maxPriorityFeePerGas"),maxFeePerGas:C(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:C(t[4],"gasLimit"),to:I(t[5]),value:C(t[6],"value"),data:(0,c.c$)(t[7]),accessList:T(t[8],"accessList"),maxFeePerBlobGas:C(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};n&&(i.blobs=n),(0,u.MR)(null!=i.to,`invalid address for transaction type: ${r}`,"data",e),(0,u.MR)(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<i.blobVersionedHashes.length;t++)(0,u.MR)((0,c.Lo)(i.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||N(i,t.slice(11)),i}(t));case 4:return M.from(function(e){let t=g((0,c.q5)(e).slice(1));(0,u.MR)(Array.isArray(t)&&(10===t.length||13===t.length),"invalid field count for transaction type: 4","data",(0,c.c$)(e));let r={type:4,chainId:C(t[0],"chainId"),nonce:_(t[1],"nonce"),maxPriorityFeePerGas:C(t[2],"maxPriorityFeePerGas"),maxFeePerGas:C(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:C(t[4],"gasLimit"),to:I(t[5]),value:C(t[6],"value"),data:(0,c.c$)(t[7]),accessList:T(t[8],"accessList"),authorizationList:function(e,t){try{if(!Array.isArray(e))throw Error("authorizationList: invalid array");let t=[];for(let r=0;r<e.length;r++){let n=e[r];if(!Array.isArray(n))throw Error(`authorization[${r}]: invalid array`);if(6!==n.length)throw Error(`authorization[${r}]: wrong length`);if(!n[1])throw Error(`authorization[${r}]: null address`);t.push({address:I(n[1]),nonce:C(n[2],"nonce"),chainId:C(n[0],"chainId"),signature:a.t.from({yParity:_(n[3],"yParity"),r:(0,c.nx)(n[4],32),s:(0,c.nx)(n[5],32)})})}return t}catch(r){(0,u.MR)(!1,r.message,t,e)}}(t[9],"authorizationList")};return 10===t.length||N(r,t.slice(10)),r}(t))}(0,u.vA)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let t=new M;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=a.t.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.authorizationList&&(t.authorizationList=e.authorizationList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&((0,u.MR)(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),(0,u.MR)(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&((0,u.MR)(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),(0,u.MR)(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}},4113:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});var n=r(1643),i=r(7905);function s(e,...t){if(null==e)throw Error("Empty pipeline");if(c(e)){let t=e;e=()=>t.source}else if(l(e)||o(e)){let t=e;e=()=>t}let r=[e,...t];if(r.length>1&&c(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let e=1;e<r.length-1;e++)c(r[e])&&(r[e]=u(r[e]));return a(...r)}let a=(...e)=>{let t;for(;e.length>0;)t=e.shift()(t);return t},o=e=>e?.[Symbol.asyncIterator]!=null,l=e=>e?.[Symbol.iterator]!=null,c=e=>null!=e&&null!=e.sink&&null!=e.source,u=e=>t=>{let r=e.sink(t);if(r?.then!=null){let t;let s=(0,n.Ny)({objectMode:!0});r.then(()=>{s.end()},e=>{s.end(e)});let a=e.source;if(o(a))t=async function*(){yield*a,s.end()};else if(l(a))t=function*(){yield*a,s.end()};else throw Error("Unknown duplex source type - must be Iterable or AsyncIterable");return(0,i.A)(s,t())}return e.source}},4122:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.isUri=t.ParsedMessage=void 0;let s=r(9481);Object.defineProperty(t,"ParsedMessage",{enumerable:!0,get:function(){return s.ParsedMessage}});let a=r(9481);Object.defineProperty(t,"isUri",{enumerable:!0,get:function(){return a.isUri}}),i(r(9219),t)},4194:(e,t,r)=>{"use strict";r.d(t,{u:()=>tO});var n,i,s,a,o,l,c,u,d,h=r(6803),f=r(9982),p=r(1819),g=r(4922),m=r(3683),b=r(7506),y=r(8121),x=r(242),w=r(1456),v=r(2563),A=r(8199),E=r(1857),k=r(8314),P=r(4096),S=r(8616);class I extends A.Z{address;#tv;constructor(e,t){super(t),(0,f.MR)(e&&"function"==typeof e.sign,"invalid private key","privateKey","[ REDACTED ]"),this.#tv=e;let r=(0,k.K)(this.signingKey.publicKey);(0,S.n)(this,{address:r})}get signingKey(){return this.#tv}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(e){return new I(this.#tv,e)}async signTransaction(e){e=(0,E.VS)(e);let{to:t,from:r}=await (0,S.k)({to:e.to?(0,p.tG)(e.to,this):void 0,from:e.from?(0,p.tG)(e.from,this):void 0});null!=t&&(e.to=t),null!=r&&(e.from=r),null!=e.from&&((0,f.MR)((0,g.b)(e.from)===this.address,"transaction from address mismatch","tx.from",e.from),delete e.from);let n=P.Z.from(e);return n.signature=this.signingKey.sign(n.unsignedHash),n.serialized}async signMessage(e){return this.signMessageSync(e)}signMessageSync(e){var t;return this.signingKey.sign(("string"==typeof(t=e)&&(t=(0,b.YW)(t)),(0,m.S)((0,y.xW)([(0,b.YW)("\x19Ethereum Signed Message:\n"),(0,b.YW)(String(t.length)),t])))).serialized}authorizeSync(e){var t;(0,f.MR)("string"==typeof e.address,"invalid address for authorizeSync","auth.address",e);let r=this.signingKey.sign((t=e,(0,f.MR)("string"==typeof t.address,"invalid address for hashAuthorization","auth.address",t),(0,m.S)((0,y.xW)(["0x05",(0,x.R)([null!=t.chainId?(0,w.c4)(t.chainId):"0x",(0,g.b)(t.address),null!=t.nonce?(0,w.c4)(t.nonce):"0x"])]))));return Object.assign({},{address:(0,g.b)(e.address),nonce:(0,w.Ab)(e.nonce||0),chainId:(0,w.Ab)(e.chainId||0)},{signature:r})}async authorize(e){return e=Object.assign({},e,{address:await (0,p.tG)(e.address,this)}),this.authorizeSync(await this.populateAuthorization(e))}async signTypedData(e,t,r){let n=await v.z.resolveNames(e,t,r,async e=>{(0,f.vA)(null!=this.provider,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:e}});let t=await this.provider.resolveName(e);return(0,f.vA)(null!=t,"unconfigured ENS name","UNCONFIGURED_NAME",{value:e}),t});return this.signingKey.sign(v.z.hash(n.domain,t,n.value)).serialized}}var T=r(3251),_=r(9478);let C=!1,O=function(e,t,r){return(0,_.Gz)(e,t).update(r).digest()},R=O;function N(e,t,r){let n=(0,y.q5)(t,"key"),i=(0,y.q5)(r,"data");return(0,y.c$)(R(e,n,i))}N._=O,N.lock=function(){C=!0},N.register=function(e){if(C)throw Error("computeHmac is locked");R=e},Object.freeze(N);var M=r(1414),B=r(6269);let D=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),L=Uint8Array.from({length:16},(e,t)=>t),U=L.map(e=>(9*e+5)%16),F=[L],j=[U];for(let e=0;e<4;e++)for(let t of[F,j])t.push(t[e].map(e=>D[e]));let z=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),H=F.map((e,t)=>e.map(e=>z[t][e])),G=j.map((e,t)=>e.map(e=>z[t][e])),$=new Uint32Array([0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]),V=new Uint32Array([0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0]),q=(e,t)=>e<<t|e>>>32-t;function K(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let W=new Uint32Array(16);class Q extends M.D{constructor(){super(64,20,8,!0),this.h0=0x67452301,this.h1=-0x10325477,this.h2=-0x67452302,this.h3=0x10325476,this.h4=-0x3c2d1e10}get(){let{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)W[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,s=i,a=0|this.h2,o=a,l=0|this.h3,c=l,u=0|this.h4,d=u;for(let e=0;e<5;e++){let t=4-e,h=$[e],f=V[e],p=F[e],g=j[e],m=H[e],b=G[e];for(let t=0;t<16;t++){let n=q(r+K(e,i,a,l)+W[p[t]]+h,m[t])+u|0;r=u,u=l,l=0|q(a,10),a=i,i=n}for(let e=0;e<16;e++){let r=q(n+K(t,s,o,c)+W[g[e]]+f,b[e])+d|0;n=d,d=c,c=0|q(o,10),o=s,s=r}}this.set(this.h1+a+c|0,this.h2+l+d|0,this.h3+u+n|0,this.h4+r+s|0,this.h0+i+o|0)}roundClean(){W.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}let Z=(0,B.ld)(()=>new Q),J=!1,Y=function(e){return Z(e)},X=Y;function ee(e){let t=(0,y.q5)(e,"data");return(0,y.c$)(X(t))}ee._=Y,ee.lock=function(){J=!0},ee.register=function(e){if(J)throw TypeError("ripemd160 is locked");X=e},Object.freeze(ee);let et=!1,er=function(e){return new Uint8Array((0,_.po)(e))},en=er;function ei(e){return en(e)}ei._=er,ei.lock=function(){et=!0},ei.register=function(e){if(et)throw Error("randomBytes is locked");en=e},Object.freeze(ei);var es=r(4697),ea=r(4453);let eo=" !#$%&'()*+,-./<=>?@[]^_`{|}~",el=/^[a-z]*$/i;function ec(e,t){let r=97;return e.reduce((e,n)=>(n===t?r++:n.match(el)?e.push(String.fromCharCode(r)+n):(r=97,e.push(n)),e),[])}class eu{locale;constructor(e){(0,S.n)(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}class ed extends eu{#o;#tA;constructor(e,t,r){super(e),this.#o=t,this.#tA=r,this.#tE=null}get _data(){return this.#o}_decodeWords(){var e;return e=this.#o,(0,f.MR)("0"===e[0],"unsupported auwl data","data",e),function(e,t){for(let r=eo.length-1;r>=0;r--)e=e.split(eo[r]).join(t.substring(2*r,2*r+2));let r=[],n=e.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(e,t,n,i)=>{if(n)for(let e=parseInt(n);e>=0;e--)r.push(";");else r.push(t.toLowerCase());return""});if(n)throw Error(`leftovers: ${JSON.stringify(n)}`);return ec(ec(r,";"),":")}(e.substring(1+2*eo.length),e.substring(1,1+2*eo.length))}#tE;#tk(){if(null==this.#tE){let e=this._decodeWords();if((0,ea.id)(e.join("\n")+"\n")!==this.#tA)throw Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#tE=e}return this.#tE}getWord(e){let t=this.#tk();return(0,f.MR)(e>=0&&e<t.length,`invalid word index: ${e}`,"index",e),t[e]}getWordIndex(e){return this.#tk().indexOf(e)}}let eh=null;class ef extends ed{constructor(){super("en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}static wordlist(){return null==eh&&(eh=new ef),eh}}let ep=!1,eg=function(e,t,r,n,i){return(0,_.T_)(e,t,r,n,i)},em=eg;function eb(e,t,r,n,i){let s=(0,y.q5)(e,"password"),a=(0,y.q5)(t,"salt");return(0,y.c$)(em(s,a,r,n,i))}function ey(e){return(1<<e)-1<<8-e&255}function ex(e,t){(0,f.SP)("NFKD"),null==t&&(t=ef.wordlist());let r=t.split(e);(0,f.MR)(r.length%3==0&&r.length>=12&&r.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");let n=new Uint8Array(Math.ceil(11*r.length/8)),i=0;for(let e=0;e<r.length;e++){let s=t.getWordIndex(r[e].normalize("NFKD"));(0,f.MR)(s>=0,`invalid mnemonic word at index ${e}`,"mnemonic","[ REDACTED ]");for(let e=0;e<11;e++)s&1<<10-e&&(n[i>>3]|=1<<7-i%8),i++}let s=32*r.length/3,a=ey(r.length/3),o=(0,y.q5)((0,T.s)(n.slice(0,s/8)))[0]&a;return(0,f.MR)(o===(n[n.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),(0,y.c$)(n.slice(0,s/8))}function ew(e,t){(0,f.MR)(e.length%4==0&&e.length>=16&&e.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),null==t&&(t=ef.wordlist());let r=[0],n=11;for(let t=0;t<e.length;t++)n>8?(r[r.length-1]<<=8,r[r.length-1]|=e[t],n-=8):(r[r.length-1]<<=n,r[r.length-1]|=e[t]>>8-n,r.push(e[t]&((1<<8-n)-1&255)),n+=3);let i=e.length/4,s=parseInt((0,T.s)(e).substring(2,4),16)&ey(i);return r[r.length-1]<<=i,r[r.length-1]|=s>>8-i,t.join(r.map(e=>t.getWord(e)))}eb._=eg,eb.lock=function(){ep=!0},eb.register=function(e){if(ep)throw Error("pbkdf2 is locked");em=e},Object.freeze(eb);let ev={};class eA{phrase;password;wordlist;entropy;constructor(e,t,r,n,i){null==n&&(n=""),null==i&&(i=ef.wordlist()),(0,f.gk)(e,ev,"Mnemonic"),(0,S.n)(this,{phrase:r,password:n,wordlist:i,entropy:t})}computeSeed(){let e=(0,b.YW)("mnemonic"+this.password,"NFKD");return eb((0,b.YW)(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,r){let n=ex(e,r);return e=ew((0,y.q5)(n),r),new eA(ev,n,e,t,r)}static fromEntropy(e,t,r){let n=(0,y.q5)(e,"entropy"),i=ew(n,r);return new eA(ev,(0,y.c$)(n),i,t,r)}static entropyToPhrase(e,t){return ew((0,y.q5)(e,"entropy"),t)}static phraseToEntropy(e,t){return ex(e,t)}static isValidMnemonic(e,t){try{return ex(e,t),!0}catch(e){}return!1}}var eE=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},ek=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let eP={16:10,24:12,32:14},eS=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],eI=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],eT=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],e_=[0xc66363a5,0xf87c7c84,0xee777799,0xf67b7b8d,0xfff2f20d,0xd66b6bbd,0xde6f6fb1,0x91c5c554,0x60303050,0x2010103,0xce6767a9,0x562b2b7d,0xe7fefe19,0xb5d7d762,0x4dababe6,0xec76769a,0x8fcaca45,0x1f82829d,0x89c9c940,0xfa7d7d87,0xeffafa15,0xb25959eb,0x8e4747c9,0xfbf0f00b,0x41adadec,0xb3d4d467,0x5fa2a2fd,0x45afafea,0x239c9cbf,0x53a4a4f7,0xe4727296,0x9bc0c05b,0x75b7b7c2,0xe1fdfd1c,0x3d9393ae,0x4c26266a,0x6c36365a,0x7e3f3f41,0xf5f7f702,0x83cccc4f,0x6834345c,0x51a5a5f4,0xd1e5e534,0xf9f1f108,0xe2717193,0xabd8d873,0x62313153,0x2a15153f,0x804040c,0x95c7c752,0x46232365,0x9dc3c35e,0x30181828,0x379696a1,0xa05050f,0x2f9a9ab5,0xe070709,0x24121236,0x1b80809b,0xdfe2e23d,0xcdebeb26,0x4e272769,0x7fb2b2cd,0xea75759f,0x1209091b,0x1d83839e,0x582c2c74,0x341a1a2e,0x361b1b2d,0xdc6e6eb2,0xb45a5aee,0x5ba0a0fb,0xa45252f6,0x763b3b4d,0xb7d6d661,0x7db3b3ce,0x5229297b,0xdde3e33e,0x5e2f2f71,0x13848497,0xa65353f5,0xb9d1d168,0,0xc1eded2c,0x40202060,0xe3fcfc1f,0x79b1b1c8,0xb65b5bed,0xd46a6abe,0x8dcbcb46,0x67bebed9,0x7239394b,0x944a4ade,0x984c4cd4,0xb05858e8,0x85cfcf4a,0xbbd0d06b,0xc5efef2a,0x4faaaae5,0xedfbfb16,0x864343c5,0x9a4d4dd7,0x66333355,0x11858594,0x8a4545cf,0xe9f9f910,0x4020206,0xfe7f7f81,0xa05050f0,0x783c3c44,0x259f9fba,0x4ba8a8e3,0xa25151f3,0x5da3a3fe,0x804040c0,0x58f8f8a,0x3f9292ad,0x219d9dbc,0x70383848,0xf1f5f504,0x63bcbcdf,0x77b6b6c1,0xafdada75,0x42212163,0x20101030,0xe5ffff1a,0xfdf3f30e,0xbfd2d26d,0x81cdcd4c,0x180c0c14,0x26131335,0xc3ecec2f,0xbe5f5fe1,0x359797a2,0x884444cc,0x2e171739,0x93c4c457,0x55a7a7f2,0xfc7e7e82,0x7a3d3d47,0xc86464ac,0xba5d5de7,0x3219192b,0xe6737395,0xc06060a0,0x19818198,0x9e4f4fd1,0xa3dcdc7f,0x44222266,0x542a2a7e,0x3b9090ab,0xb888883,0x8c4646ca,0xc7eeee29,0x6bb8b8d3,0x2814143c,0xa7dede79,0xbc5e5ee2,0x160b0b1d,0xaddbdb76,0xdbe0e03b,0x64323256,0x743a3a4e,0x140a0a1e,0x924949db,0xc06060a,0x4824246c,0xb85c5ce4,0x9fc2c25d,0xbdd3d36e,0x43acacef,0xc46262a6,0x399191a8,0x319595a4,0xd3e4e437,0xf279798b,0xd5e7e732,0x8bc8c843,0x6e373759,0xda6d6db7,0x18d8d8c,0xb1d5d564,0x9c4e4ed2,0x49a9a9e0,0xd86c6cb4,0xac5656fa,0xf3f4f407,0xcfeaea25,0xca6565af,0xf47a7a8e,0x47aeaee9,0x10080818,0x6fbabad5,0xf0787888,0x4a25256f,0x5c2e2e72,0x381c1c24,0x57a6a6f1,0x73b4b4c7,0x97c6c651,0xcbe8e823,0xa1dddd7c,0xe874749c,0x3e1f1f21,0x964b4bdd,0x61bdbddc,0xd8b8b86,0xf8a8a85,0xe0707090,0x7c3e3e42,0x71b5b5c4,0xcc6666aa,0x904848d8,0x6030305,0xf7f6f601,0x1c0e0e12,0xc26161a3,0x6a35355f,0xae5757f9,0x69b9b9d0,0x17868691,0x99c1c158,0x3a1d1d27,0x279e9eb9,0xd9e1e138,0xebf8f813,0x2b9898b3,0x22111133,0xd26969bb,0xa9d9d970,0x78e8e89,0x339494a7,0x2d9b9bb6,0x3c1e1e22,0x15878792,0xc9e9e920,0x87cece49,0xaa5555ff,0x50282878,0xa5dfdf7a,0x38c8c8f,0x59a1a1f8,0x9898980,0x1a0d0d17,0x65bfbfda,0xd7e6e631,0x844242c6,0xd06868b8,0x824141c3,0x299999b0,0x5a2d2d77,0x1e0f0f11,0x7bb0b0cb,0xa85454fc,0x6dbbbbd6,0x2c16163a],eC=[0xa5c66363,0x84f87c7c,0x99ee7777,0x8df67b7b,0xdfff2f2,0xbdd66b6b,0xb1de6f6f,0x5491c5c5,0x50603030,0x3020101,0xa9ce6767,0x7d562b2b,0x19e7fefe,0x62b5d7d7,0xe64dabab,0x9aec7676,0x458fcaca,0x9d1f8282,0x4089c9c9,0x87fa7d7d,0x15effafa,0xebb25959,0xc98e4747,0xbfbf0f0,0xec41adad,0x67b3d4d4,0xfd5fa2a2,0xea45afaf,0xbf239c9c,0xf753a4a4,0x96e47272,0x5b9bc0c0,0xc275b7b7,0x1ce1fdfd,0xae3d9393,0x6a4c2626,0x5a6c3636,0x417e3f3f,0x2f5f7f7,0x4f83cccc,0x5c683434,0xf451a5a5,0x34d1e5e5,0x8f9f1f1,0x93e27171,0x73abd8d8,0x53623131,0x3f2a1515,0xc080404,0x5295c7c7,0x65462323,0x5e9dc3c3,0x28301818,0xa1379696,0xf0a0505,0xb52f9a9a,0x90e0707,0x36241212,0x9b1b8080,0x3ddfe2e2,0x26cdebeb,0x694e2727,0xcd7fb2b2,0x9fea7575,0x1b120909,0x9e1d8383,0x74582c2c,0x2e341a1a,0x2d361b1b,0xb2dc6e6e,0xeeb45a5a,0xfb5ba0a0,0xf6a45252,0x4d763b3b,0x61b7d6d6,0xce7db3b3,0x7b522929,0x3edde3e3,0x715e2f2f,0x97138484,0xf5a65353,0x68b9d1d1,0,0x2cc1eded,0x60402020,0x1fe3fcfc,0xc879b1b1,0xedb65b5b,0xbed46a6a,0x468dcbcb,0xd967bebe,0x4b723939,0xde944a4a,0xd4984c4c,0xe8b05858,0x4a85cfcf,0x6bbbd0d0,0x2ac5efef,0xe54faaaa,0x16edfbfb,0xc5864343,0xd79a4d4d,0x55663333,0x94118585,0xcf8a4545,0x10e9f9f9,0x6040202,0x81fe7f7f,0xf0a05050,0x44783c3c,0xba259f9f,0xe34ba8a8,0xf3a25151,0xfe5da3a3,0xc0804040,0x8a058f8f,0xad3f9292,0xbc219d9d,0x48703838,0x4f1f5f5,0xdf63bcbc,0xc177b6b6,0x75afdada,0x63422121,0x30201010,0x1ae5ffff,0xefdf3f3,0x6dbfd2d2,0x4c81cdcd,0x14180c0c,0x35261313,0x2fc3ecec,0xe1be5f5f,0xa2359797,0xcc884444,0x392e1717,0x5793c4c4,0xf255a7a7,0x82fc7e7e,0x477a3d3d,0xacc86464,0xe7ba5d5d,0x2b321919,0x95e67373,0xa0c06060,0x98198181,0xd19e4f4f,0x7fa3dcdc,0x66442222,0x7e542a2a,0xab3b9090,0x830b8888,0xca8c4646,0x29c7eeee,0xd36bb8b8,0x3c281414,0x79a7dede,0xe2bc5e5e,0x1d160b0b,0x76addbdb,0x3bdbe0e0,0x56643232,0x4e743a3a,0x1e140a0a,0xdb924949,0xa0c0606,0x6c482424,0xe4b85c5c,0x5d9fc2c2,0x6ebdd3d3,0xef43acac,0xa6c46262,0xa8399191,0xa4319595,0x37d3e4e4,0x8bf27979,0x32d5e7e7,0x438bc8c8,0x596e3737,0xb7da6d6d,0x8c018d8d,0x64b1d5d5,0xd29c4e4e,0xe049a9a9,0xb4d86c6c,0xfaac5656,0x7f3f4f4,0x25cfeaea,0xafca6565,0x8ef47a7a,0xe947aeae,0x18100808,0xd56fbaba,0x88f07878,0x6f4a2525,0x725c2e2e,0x24381c1c,0xf157a6a6,0xc773b4b4,0x5197c6c6,0x23cbe8e8,0x7ca1dddd,0x9ce87474,0x213e1f1f,0xdd964b4b,0xdc61bdbd,0x860d8b8b,0x850f8a8a,0x90e07070,0x427c3e3e,0xc471b5b5,0xaacc6666,0xd8904848,0x5060303,0x1f7f6f6,0x121c0e0e,0xa3c26161,0x5f6a3535,0xf9ae5757,0xd069b9b9,0x91178686,0x5899c1c1,0x273a1d1d,0xb9279e9e,0x38d9e1e1,0x13ebf8f8,0xb32b9898,0x33221111,0xbbd26969,0x70a9d9d9,0x89078e8e,0xa7339494,0xb62d9b9b,0x223c1e1e,0x92158787,0x20c9e9e9,0x4987cece,0xffaa5555,0x78502828,0x7aa5dfdf,0x8f038c8c,0xf859a1a1,0x80098989,0x171a0d0d,0xda65bfbf,0x31d7e6e6,0xc6844242,0xb8d06868,0xc3824141,0xb0299999,0x775a2d2d,0x111e0f0f,0xcb7bb0b0,0xfca85454,0xd66dbbbb,0x3a2c1616],eO=[0x63a5c663,0x7c84f87c,0x7799ee77,0x7b8df67b,0xf20dfff2,0x6bbdd66b,0x6fb1de6f,0xc55491c5,0x30506030,0x1030201,0x67a9ce67,0x2b7d562b,0xfe19e7fe,0xd762b5d7,0xabe64dab,0x769aec76,0xca458fca,0x829d1f82,0xc94089c9,0x7d87fa7d,0xfa15effa,0x59ebb259,0x47c98e47,0xf00bfbf0,0xadec41ad,0xd467b3d4,0xa2fd5fa2,0xafea45af,0x9cbf239c,0xa4f753a4,0x7296e472,0xc05b9bc0,0xb7c275b7,0xfd1ce1fd,0x93ae3d93,0x266a4c26,0x365a6c36,0x3f417e3f,0xf702f5f7,0xcc4f83cc,0x345c6834,0xa5f451a5,0xe534d1e5,0xf108f9f1,0x7193e271,0xd873abd8,0x31536231,0x153f2a15,0x40c0804,0xc75295c7,0x23654623,0xc35e9dc3,0x18283018,0x96a13796,0x50f0a05,0x9ab52f9a,0x7090e07,0x12362412,0x809b1b80,0xe23ddfe2,0xeb26cdeb,0x27694e27,0xb2cd7fb2,0x759fea75,0x91b1209,0x839e1d83,0x2c74582c,0x1a2e341a,0x1b2d361b,0x6eb2dc6e,0x5aeeb45a,0xa0fb5ba0,0x52f6a452,0x3b4d763b,0xd661b7d6,0xb3ce7db3,0x297b5229,0xe33edde3,0x2f715e2f,0x84971384,0x53f5a653,0xd168b9d1,0,0xed2cc1ed,0x20604020,0xfc1fe3fc,0xb1c879b1,0x5bedb65b,0x6abed46a,0xcb468dcb,0xbed967be,0x394b7239,0x4ade944a,0x4cd4984c,0x58e8b058,0xcf4a85cf,0xd06bbbd0,0xef2ac5ef,0xaae54faa,0xfb16edfb,0x43c58643,0x4dd79a4d,0x33556633,0x85941185,0x45cf8a45,0xf910e9f9,0x2060402,0x7f81fe7f,0x50f0a050,0x3c44783c,0x9fba259f,0xa8e34ba8,0x51f3a251,0xa3fe5da3,0x40c08040,0x8f8a058f,0x92ad3f92,0x9dbc219d,0x38487038,0xf504f1f5,0xbcdf63bc,0xb6c177b6,0xda75afda,0x21634221,0x10302010,0xff1ae5ff,0xf30efdf3,0xd26dbfd2,0xcd4c81cd,0xc14180c,0x13352613,0xec2fc3ec,0x5fe1be5f,0x97a23597,0x44cc8844,0x17392e17,0xc45793c4,0xa7f255a7,0x7e82fc7e,0x3d477a3d,0x64acc864,0x5de7ba5d,0x192b3219,0x7395e673,0x60a0c060,0x81981981,0x4fd19e4f,0xdc7fa3dc,0x22664422,0x2a7e542a,0x90ab3b90,0x88830b88,0x46ca8c46,0xee29c7ee,0xb8d36bb8,0x143c2814,0xde79a7de,0x5ee2bc5e,0xb1d160b,0xdb76addb,0xe03bdbe0,0x32566432,0x3a4e743a,0xa1e140a,0x49db9249,0x60a0c06,0x246c4824,0x5ce4b85c,0xc25d9fc2,0xd36ebdd3,0xacef43ac,0x62a6c462,0x91a83991,0x95a43195,0xe437d3e4,0x798bf279,0xe732d5e7,0xc8438bc8,0x37596e37,0x6db7da6d,0x8d8c018d,0xd564b1d5,0x4ed29c4e,0xa9e049a9,0x6cb4d86c,0x56faac56,0xf407f3f4,0xea25cfea,0x65afca65,0x7a8ef47a,0xaee947ae,0x8181008,0xbad56fba,0x7888f078,0x256f4a25,0x2e725c2e,0x1c24381c,0xa6f157a6,0xb4c773b4,0xc65197c6,0xe823cbe8,0xdd7ca1dd,0x749ce874,0x1f213e1f,0x4bdd964b,0xbddc61bd,0x8b860d8b,0x8a850f8a,0x7090e070,0x3e427c3e,0xb5c471b5,0x66aacc66,0x48d89048,0x3050603,0xf601f7f6,0xe121c0e,0x61a3c261,0x355f6a35,0x57f9ae57,0xb9d069b9,0x86911786,0xc15899c1,0x1d273a1d,0x9eb9279e,0xe138d9e1,0xf813ebf8,0x98b32b98,0x11332211,0x69bbd269,0xd970a9d9,0x8e89078e,0x94a73394,0x9bb62d9b,0x1e223c1e,0x87921587,0xe920c9e9,0xce4987ce,0x55ffaa55,0x28785028,0xdf7aa5df,0x8c8f038c,0xa1f859a1,0x89800989,0xd171a0d,0xbfda65bf,0xe631d7e6,0x42c68442,0x68b8d068,0x41c38241,0x99b02999,0x2d775a2d,0xf111e0f,0xb0cb7bb0,0x54fca854,0xbbd66dbb,0x163a2c16],eR=[0x6363a5c6,0x7c7c84f8,0x777799ee,0x7b7b8df6,0xf2f20dff,0x6b6bbdd6,0x6f6fb1de,0xc5c55491,0x30305060,0x1010302,0x6767a9ce,0x2b2b7d56,0xfefe19e7,0xd7d762b5,0xababe64d,0x76769aec,0xcaca458f,0x82829d1f,0xc9c94089,0x7d7d87fa,0xfafa15ef,0x5959ebb2,0x4747c98e,0xf0f00bfb,0xadadec41,0xd4d467b3,0xa2a2fd5f,0xafafea45,0x9c9cbf23,0xa4a4f753,0x727296e4,0xc0c05b9b,0xb7b7c275,0xfdfd1ce1,0x9393ae3d,0x26266a4c,0x36365a6c,0x3f3f417e,0xf7f702f5,0xcccc4f83,0x34345c68,0xa5a5f451,0xe5e534d1,0xf1f108f9,0x717193e2,0xd8d873ab,0x31315362,0x15153f2a,0x4040c08,0xc7c75295,0x23236546,0xc3c35e9d,0x18182830,0x9696a137,0x5050f0a,0x9a9ab52f,0x707090e,0x12123624,0x80809b1b,0xe2e23ddf,0xebeb26cd,0x2727694e,0xb2b2cd7f,0x75759fea,0x9091b12,0x83839e1d,0x2c2c7458,0x1a1a2e34,0x1b1b2d36,0x6e6eb2dc,0x5a5aeeb4,0xa0a0fb5b,0x5252f6a4,0x3b3b4d76,0xd6d661b7,0xb3b3ce7d,0x29297b52,0xe3e33edd,0x2f2f715e,0x84849713,0x5353f5a6,0xd1d168b9,0,0xeded2cc1,0x20206040,0xfcfc1fe3,0xb1b1c879,0x5b5bedb6,0x6a6abed4,0xcbcb468d,0xbebed967,0x39394b72,0x4a4ade94,0x4c4cd498,0x5858e8b0,0xcfcf4a85,0xd0d06bbb,0xefef2ac5,0xaaaae54f,0xfbfb16ed,0x4343c586,0x4d4dd79a,0x33335566,0x85859411,0x4545cf8a,0xf9f910e9,0x2020604,0x7f7f81fe,0x5050f0a0,0x3c3c4478,0x9f9fba25,0xa8a8e34b,0x5151f3a2,0xa3a3fe5d,0x4040c080,0x8f8f8a05,0x9292ad3f,0x9d9dbc21,0x38384870,0xf5f504f1,0xbcbcdf63,0xb6b6c177,0xdada75af,0x21216342,0x10103020,0xffff1ae5,0xf3f30efd,0xd2d26dbf,0xcdcd4c81,0xc0c1418,0x13133526,0xecec2fc3,0x5f5fe1be,0x9797a235,0x4444cc88,0x1717392e,0xc4c45793,0xa7a7f255,0x7e7e82fc,0x3d3d477a,0x6464acc8,0x5d5de7ba,0x19192b32,0x737395e6,0x6060a0c0,0x81819819,0x4f4fd19e,0xdcdc7fa3,0x22226644,0x2a2a7e54,0x9090ab3b,0x8888830b,0x4646ca8c,0xeeee29c7,0xb8b8d36b,0x14143c28,0xdede79a7,0x5e5ee2bc,0xb0b1d16,0xdbdb76ad,0xe0e03bdb,0x32325664,0x3a3a4e74,0xa0a1e14,0x4949db92,0x6060a0c,0x24246c48,0x5c5ce4b8,0xc2c25d9f,0xd3d36ebd,0xacacef43,0x6262a6c4,0x9191a839,0x9595a431,0xe4e437d3,0x79798bf2,0xe7e732d5,0xc8c8438b,0x3737596e,0x6d6db7da,0x8d8d8c01,0xd5d564b1,0x4e4ed29c,0xa9a9e049,0x6c6cb4d8,0x5656faac,0xf4f407f3,0xeaea25cf,0x6565afca,0x7a7a8ef4,0xaeaee947,0x8081810,0xbabad56f,0x787888f0,0x25256f4a,0x2e2e725c,0x1c1c2438,0xa6a6f157,0xb4b4c773,0xc6c65197,0xe8e823cb,0xdddd7ca1,0x74749ce8,0x1f1f213e,0x4b4bdd96,0xbdbddc61,0x8b8b860d,0x8a8a850f,0x707090e0,0x3e3e427c,0xb5b5c471,0x6666aacc,0x4848d890,0x3030506,0xf6f601f7,0xe0e121c,0x6161a3c2,0x35355f6a,0x5757f9ae,0xb9b9d069,0x86869117,0xc1c15899,0x1d1d273a,0x9e9eb927,0xe1e138d9,0xf8f813eb,0x9898b32b,0x11113322,0x6969bbd2,0xd9d970a9,0x8e8e8907,0x9494a733,0x9b9bb62d,0x1e1e223c,0x87879215,0xe9e920c9,0xcece4987,0x5555ffaa,0x28287850,0xdfdf7aa5,0x8c8c8f03,0xa1a1f859,0x89898009,0xd0d171a,0xbfbfda65,0xe6e631d7,0x4242c684,0x6868b8d0,0x4141c382,0x9999b029,0x2d2d775a,0xf0f111e,0xb0b0cb7b,0x5454fca8,0xbbbbd66d,0x16163a2c],eN=[0x51f4a750,0x7e416553,0x1a17a4c3,0x3a275e96,0x3bab6bcb,0x1f9d45f1,0xacfa58ab,0x4be30393,0x2030fa55,0xad766df6,0x88cc7691,0xf5024c25,0x4fe5d7fc,0xc52acbd7,0x26354480,0xb562a38f,0xdeb15a49,0x25ba1b67,0x45ea0e98,0x5dfec0e1,0xc32f7502,0x814cf012,0x8d4697a3,0x6bd3f9c6,0x38f5fe7,0x15929c95,0xbf6d7aeb,0x955259da,0xd4be832d,0x587421d3,0x49e06929,0x8ec9c844,0x75c2896a,0xf48e7978,0x99583e6b,0x27b971dd,0xbee14fb6,0xf088ad17,0xc920ac66,0x7dce3ab4,0x63df4a18,0xe51a3182,0x97513360,0x62537f45,0xb16477e0,0xbb6bae84,0xfe81a01c,0xf9082b94,0x70486858,0x8f45fd19,0x94de6c87,0x527bf8b7,0xab73d323,0x724b02e2,0xe31f8f57,0x6655ab2a,0xb2eb2807,0x2fb5c203,0x86c57b9a,0xd33708a5,0x302887f2,0x23bfa5b2,0x2036aba,0xed16825c,0x8acf1c2b,0xa779b492,0xf307f2f0,0x4e69e2a1,0x65daf4cd,0x605bed5,0xd134621f,0xc4a6fe8a,0x342e539d,0xa2f355a0,0x58ae132,0xa4f6eb75,0xb83ec39,0x4060efaa,0x5e719f06,0xbd6e1051,0x3e218af9,0x96dd063d,0xdd3e05ae,0x4de6bd46,0x91548db5,0x71c45d05,0x406d46f,0x605015ff,0x1998fb24,0xd6bde997,0x894043cc,0x67d99e77,0xb0e842bd,0x7898b88,0xe7195b38,0x79c8eedb,0xa17c0a47,0x7c420fe9,0xf8841ec9,0,0x9808683,0x322bed48,0x1e1170ac,0x6c5a724e,0xfd0efffb,0xf853856,0x3daed51e,0x362d3927,0xa0fd964,0x685ca621,0x9b5b54d1,0x24362e3a,0xc0a67b1,0x9357e70f,0xb4ee96d2,0x1b9b919e,0x80c0c54f,0x61dc20a2,0x5a774b69,0x1c121a16,0xe293ba0a,0xc0a02ae5,0x3c22e043,0x121b171d,0xe090d0b,0xf28bc7ad,0x2db6a8b9,0x141ea9c8,0x57f11985,0xaf75074c,0xee99ddbb,0xa37f60fd,0xf701269f,0x5c72f5bc,0x44663bc5,0x5bfb7e34,0x8b432976,0xcb23c6dc,0xb6edfc68,0xb8e4f163,0xd731dcca,0x42638510,0x13972240,0x84c61120,0x854a247d,0xd2bb3df8,0xaef93211,0xc729a16d,0x1d9e2f4b,0xdcb230f3,0xd8652ec,0x77c1e3d0,0x2bb3166c,0xa970b999,0x119448fa,0x47e96422,0xa8fc8cc4,0xa0f03f1a,0x567d2cd8,0x223390ef,0x87494ec7,0xd938d1c1,0x8ccaa2fe,0x98d40b36,0xa6f581cf,0xa57ade28,0xdab78e26,0x3fadbfa4,0x2c3a9de4,0x5078920d,0x6a5fcc9b,0x547e4662,0xf68d13c2,0x90d8b8e8,0x2e39f75e,0x82c3aff5,0x9f5d80be,0x69d0937c,0x6fd52da9,0xcf2512b3,0xc8ac993b,0x10187da7,0xe89c636e,0xdb3bbb7b,0xcd267809,0x6e5918f4,0xec9ab701,0x834f9aa8,0xe6956e65,0xaaffe67e,0x21bccf08,0xef15e8e6,0xbae79bd9,0x4a6f36ce,0xea9f09d4,0x29b07cd6,0x31a4b2af,0x2a3f2331,0xc6a59430,0x35a266c0,0x744ebc37,0xfc82caa6,0xe090d0b0,0x33a7d815,0xf104984a,0x41ecdaf7,0x7fcd500e,0x1791f62f,0x764dd68d,0x43efb04d,0xccaa4d54,0xe49604df,0x9ed1b5e3,0x4c6a881b,0xc12c1fb8,0x4665517f,0x9d5eea04,0x18c355d,0xfa877473,0xfb0b412e,0xb3671d5a,0x92dbd252,0xe9105633,0x6dd64713,0x9ad7618c,0x37a10c7a,0x59f8148e,0xeb133c89,0xcea927ee,0xb761c935,0xe11ce5ed,0x7a47b13c,0x9cd2df59,0x55f2733f,0x1814ce79,0x73c737bf,0x53f7cdea,0x5ffdaa5b,0xdf3d6f14,0x7844db86,0xcaaff381,0xb968c43e,0x3824342c,0xc2a3405f,0x161dc372,0xbce2250c,0x283c498b,0xff0d9541,0x39a80171,0x80cb3de,0xd8b4e49c,0x6456c190,0x7bcb8461,0xd532b670,0x486c5c74,0xd0b85742],eM=[0x5051f4a7,0x537e4165,0xc31a17a4,0x963a275e,0xcb3bab6b,0xf11f9d45,0xabacfa58,0x934be303,0x552030fa,0xf6ad766d,0x9188cc76,0x25f5024c,0xfc4fe5d7,0xd7c52acb,0x80263544,0x8fb562a3,0x49deb15a,0x6725ba1b,0x9845ea0e,0xe15dfec0,0x2c32f75,0x12814cf0,0xa38d4697,0xc66bd3f9,0xe7038f5f,0x9515929c,0xebbf6d7a,0xda955259,0x2dd4be83,0xd3587421,0x2949e069,0x448ec9c8,0x6a75c289,0x78f48e79,0x6b99583e,0xdd27b971,0xb6bee14f,0x17f088ad,0x66c920ac,0xb47dce3a,0x1863df4a,0x82e51a31,0x60975133,0x4562537f,0xe0b16477,0x84bb6bae,0x1cfe81a0,0x94f9082b,0x58704868,0x198f45fd,0x8794de6c,0xb7527bf8,0x23ab73d3,0xe2724b02,0x57e31f8f,0x2a6655ab,0x7b2eb28,0x32fb5c2,0x9a86c57b,0xa5d33708,0xf2302887,0xb223bfa5,0xba02036a,0x5ced1682,0x2b8acf1c,0x92a779b4,0xf0f307f2,0xa14e69e2,0xcd65daf4,0xd50605be,0x1fd13462,0x8ac4a6fe,0x9d342e53,0xa0a2f355,0x32058ae1,0x75a4f6eb,0x390b83ec,0xaa4060ef,0x65e719f,0x51bd6e10,0xf93e218a,0x3d96dd06,0xaedd3e05,0x464de6bd,0xb591548d,0x571c45d,0x6f0406d4,0xff605015,0x241998fb,0x97d6bde9,0xcc894043,0x7767d99e,0xbdb0e842,0x8807898b,0x38e7195b,0xdb79c8ee,0x47a17c0a,0xe97c420f,0xc9f8841e,0,0x83098086,0x48322bed,0xac1e1170,0x4e6c5a72,0xfbfd0eff,0x560f8538,0x1e3daed5,0x27362d39,0x640a0fd9,0x21685ca6,0xd19b5b54,0x3a24362e,0xb10c0a67,0xf9357e7,0xd2b4ee96,0x9e1b9b91,0x4f80c0c5,0xa261dc20,0x695a774b,0x161c121a,0xae293ba,0xe5c0a02a,0x433c22e0,0x1d121b17,0xb0e090d,0xadf28bc7,0xb92db6a8,0xc8141ea9,0x8557f119,0x4caf7507,0xbbee99dd,0xfda37f60,0x9ff70126,0xbc5c72f5,0xc544663b,0x345bfb7e,0x768b4329,0xdccb23c6,0x68b6edfc,0x63b8e4f1,0xcad731dc,0x10426385,0x40139722,0x2084c611,0x7d854a24,0xf8d2bb3d,0x11aef932,0x6dc729a1,0x4b1d9e2f,0xf3dcb230,0xec0d8652,0xd077c1e3,0x6c2bb316,0x99a970b9,0xfa119448,0x2247e964,0xc4a8fc8c,0x1aa0f03f,0xd8567d2c,0xef223390,0xc787494e,0xc1d938d1,0xfe8ccaa2,0x3698d40b,0xcfa6f581,0x28a57ade,0x26dab78e,0xa43fadbf,0xe42c3a9d,0xd507892,0x9b6a5fcc,0x62547e46,0xc2f68d13,0xe890d8b8,0x5e2e39f7,0xf582c3af,0xbe9f5d80,0x7c69d093,0xa96fd52d,0xb3cf2512,0x3bc8ac99,0xa710187d,0x6ee89c63,0x7bdb3bbb,0x9cd2678,0xf46e5918,0x1ec9ab7,0xa8834f9a,0x65e6956e,0x7eaaffe6,0x821bccf,0xe6ef15e8,0xd9bae79b,0xce4a6f36,0xd4ea9f09,0xd629b07c,0xaf31a4b2,0x312a3f23,0x30c6a594,0xc035a266,0x37744ebc,0xa6fc82ca,0xb0e090d0,0x1533a7d8,0x4af10498,0xf741ecda,0xe7fcd50,0x2f1791f6,0x8d764dd6,0x4d43efb0,0x54ccaa4d,0xdfe49604,0xe39ed1b5,0x1b4c6a88,0xb8c12c1f,0x7f466551,0x49d5eea,0x5d018c35,0x73fa8774,0x2efb0b41,0x5ab3671d,0x5292dbd2,0x33e91056,0x136dd647,0x8c9ad761,0x7a37a10c,0x8e59f814,0x89eb133c,0xeecea927,0x35b761c9,0xede11ce5,0x3c7a47b1,0x599cd2df,0x3f55f273,0x791814ce,0xbf73c737,0xea53f7cd,0x5b5ffdaa,0x14df3d6f,0x867844db,0x81caaff3,0x3eb968c4,0x2c382434,0x5fc2a340,0x72161dc3,0xcbce225,0x8b283c49,0x41ff0d95,0x7139a801,0xde080cb3,0x9cd8b4e4,0x906456c1,0x617bcb84,0x70d532b6,0x74486c5c,0x42d0b857],eB=[0xa75051f4,0x65537e41,0xa4c31a17,0x5e963a27,0x6bcb3bab,0x45f11f9d,0x58abacfa,0x3934be3,0xfa552030,0x6df6ad76,0x769188cc,0x4c25f502,0xd7fc4fe5,0xcbd7c52a,0x44802635,0xa38fb562,0x5a49deb1,0x1b6725ba,0xe9845ea,0xc0e15dfe,0x7502c32f,0xf012814c,0x97a38d46,0xf9c66bd3,0x5fe7038f,0x9c951592,0x7aebbf6d,0x59da9552,0x832dd4be,0x21d35874,0x692949e0,0xc8448ec9,0x896a75c2,0x7978f48e,1047239e3,0x71dd27b9,0x4fb6bee1,0xad17f088,0xac66c920,0x3ab47dce,0x4a1863df,0x3182e51a,0x33609751,0x7f456253,0x77e0b164,0xae84bb6b,0xa01cfe81,0x2b94f908,0x68587048,0xfd198f45,0x6c8794de,0xf8b7527b,0xd323ab73,0x2e2724b,0x8f57e31f,0xab2a6655,0x2807b2eb,0xc2032fb5,0x7b9a86c5,0x8a5d337,0x87f23028,0xa5b223bf,0x6aba0203,0x825ced16,0x1c2b8acf,0xb492a779,0xf2f0f307,0xe2a14e69,0xf4cd65da,0xbed50605,0x621fd134,0xfe8ac4a6,0x539d342e,0x55a0a2f3,0xe132058a,0xeb75a4f6,0xec390b83,0xefaa4060,0x9f065e71,0x1051bd6e,0x8af93e21,0x63d96dd,0x5aedd3e,0xbd464de6,0x8db59154,0x5d0571c4,0xd46f0406,0x15ff6050,0xfb241998,0xe997d6bd,0x43cc8940,0x9e7767d9,0x42bdb0e8,0x8b880789,0x5b38e719,0xeedb79c8,0xa47a17c,0xfe97c42,0x1ec9f884,0,0x86830980,0xed48322b,0x70ac1e11,0x724e6c5a,0xfffbfd0e,0x38560f85,0xd51e3dae,0x3927362d,0xd9640a0f,0xa621685c,0x54d19b5b,0x2e3a2436,0x67b10c0a,0xe70f9357,0x96d2b4ee,0x919e1b9b,0xc54f80c0,0x20a261dc,0x4b695a77,0x1a161c12,0xba0ae293,0x2ae5c0a0,0xe0433c22,0x171d121b,0xd0b0e09,0xc7adf28b,0xa8b92db6,0xa9c8141e,0x198557f1,0x74caf75,0xddbbee99,0x60fda37f,0x269ff701,0xf5bc5c72,0x3bc54466,0x7e345bfb,0x29768b43,0xc6dccb23,0xfc68b6ed,0xf163b8e4,0xdccad731,0x85104263,0x22401397,0x112084c6,0x247d854a,0x3df8d2bb,0x3211aef9,0xa16dc729,0x2f4b1d9e,0x30f3dcb2,0x52ec0d86,0xe3d077c1,0x166c2bb3,0xb999a970,0x48fa1194,0x642247e9,0x8cc4a8fc,0x3f1aa0f0,0x2cd8567d,0x90ef2233,0x4ec78749,0xd1c1d938,0xa2fe8cca,0xb3698d4,0x81cfa6f5,0xde28a57a,0x8e26dab7,0xbfa43fad,0x9de42c3a,0x920d5078,0xcc9b6a5f,0x4662547e,0x13c2f68d,0xb8e890d8,0xf75e2e39,0xaff582c3,0x80be9f5d,0x937c69d0,0x2da96fd5,0x12b3cf25,0x993bc8ac,0x7da71018,0x636ee89c,0xbb7bdb3b,0x7809cd26,0x18f46e59,0xb701ec9a,0x9aa8834f,0x6e65e695,0xe67eaaff,0xcf0821bc,0xe8e6ef15,0x9bd9bae7,0x36ce4a6f,0x9d4ea9f,0x7cd629b0,0xb2af31a4,0x23312a3f,0x9430c6a5,0x66c035a2,0xbc37744e,0xcaa6fc82,0xd0b0e090,0xd81533a7,0x984af104,0xdaf741ec,0x500e7fcd,0xf62f1791,0xd68d764d,0xb04d43ef,0x4d54ccaa,0x4dfe496,0xb5e39ed1,0x881b4c6a,0x1fb8c12c,0x517f4665,0xea049d5e,0x355d018c,0x7473fa87,0x412efb0b,0x1d5ab367,0xd25292db,0x5633e910,0x47136dd6,0x618c9ad7,0xc7a37a1,0x148e59f8,0x3c89eb13,0x27eecea9,0xc935b761,0xe5ede11c,0xb13c7a47,0xdf599cd2,0x733f55f2,0xce791814,0x37bf73c7,0xcdea53f7,0xaa5b5ffd,0x6f14df3d,0xdb867844,0xf381caaf,0xc43eb968,0x342c3824,0x405fc2a3,0xc372161d,0x250cbce2,0x498b283c,0x9541ff0d,0x17139a8,0xb3de080c,0xe49cd8b4,0xc1906456,0x84617bcb,0xb670d532,0x5c74486c,0x5742d0b8],eD=[0xf4a75051,0x4165537e,0x17a4c31a,0x275e963a,0xab6bcb3b,0x9d45f11f,0xfa58abac,0xe303934b,0x30fa5520,0x766df6ad,0xcc769188,0x24c25f5,0xe5d7fc4f,0x2acbd7c5,0x35448026,0x62a38fb5,0xb15a49de,0xba1b6725,0xea0e9845,0xfec0e15d,0x2f7502c3,0x4cf01281,0x4697a38d,0xd3f9c66b,0x8f5fe703,0x929c9515,0x6d7aebbf,0x5259da95,0xbe832dd4,0x7421d358,0xe0692949,0xc9c8448e,0xc2896a75,0x8e7978f4,0x583e6b99,0xb971dd27,0xe14fb6be,0x88ad17f0,0x20ac66c9,0xce3ab47d,0xdf4a1863,0x1a3182e5,0x51336097,0x537f4562,0x6477e0b1,0x6bae84bb,0x81a01cfe,0x82b94f9,0x48685870,0x45fd198f,0xde6c8794,0x7bf8b752,0x73d323ab,0x4b02e272,0x1f8f57e3,0x55ab2a66,0xeb2807b2,0xb5c2032f,0xc57b9a86,0x3708a5d3,679998e3,0xbfa5b223,0x36aba02,0x16825ced,0xcf1c2b8a,0x79b492a7,0x7f2f0f3,0x69e2a14e,0xdaf4cd65,0x5bed506,0x34621fd1,0xa6fe8ac4,0x2e539d34,0xf355a0a2,0x8ae13205,0xf6eb75a4,0x83ec390b,0x60efaa40,0x719f065e,0x6e1051bd,0x218af93e,0xdd063d96,0x3e05aedd,0xe6bd464d,0x548db591,0xc45d0571,0x6d46f04,0x5015ff60,0x98fb2419,0xbde997d6,0x4043cc89,0xd99e7767,0xe842bdb0,0x898b8807,0x195b38e7,0xc8eedb79,0x7c0a47a1,0x420fe97c,0x841ec9f8,0,0x80868309,0x2bed4832,0x1170ac1e,0x5a724e6c,0xefffbfd,0x8538560f,0xaed51e3d,0x2d392736,0xfd9640a,0x5ca62168,0x5b54d19b,0x362e3a24,0xa67b10c,0x57e70f93,0xee96d2b4,0x9b919e1b,0xc0c54f80,0xdc20a261,0x774b695a,0x121a161c,0x93ba0ae2,0xa02ae5c0,0x22e0433c,0x1b171d12,0x90d0b0e,0x8bc7adf2,0xb6a8b92d,0x1ea9c814,0xf1198557,0x75074caf,0x99ddbbee,0x7f60fda3,0x1269ff7,0x72f5bc5c,0x663bc544,0xfb7e345b,0x4329768b,0x23c6dccb,0xedfc68b6,0xe4f163b8,0x31dccad7,0x63851042,0x97224013,0xc6112084,0x4a247d85,0xbb3df8d2,0xf93211ae,0x29a16dc7,0x9e2f4b1d,0xb230f3dc,0x8652ec0d,0xc1e3d077,0xb3166c2b,0x70b999a9,0x9448fa11,0xe9642247,0xfc8cc4a8,0xf03f1aa0,0x7d2cd856,0x3390ef22,0x494ec787,0x38d1c1d9,0xcaa2fe8c,0xd40b3698,0xf581cfa6,0x7ade28a5,0xb78e26da,0xadbfa43f,0x3a9de42c,0x78920d50,0x5fcc9b6a,0x7e466254,0x8d13c2f6,0xd8b8e890,0x39f75e2e,0xc3aff582,0x5d80be9f,0xd0937c69,0xd52da96f,0x2512b3cf,0xac993bc8,0x187da710,0x9c636ee8,0x3bbb7bdb,0x267809cd,0x5918f46e,0x9ab701ec,0x4f9aa883,0x956e65e6,0xffe67eaa,0xbccf0821,0x15e8e6ef,0xe79bd9ba,0x6f36ce4a,0x9f09d4ea,0xb07cd629,0xa4b2af31,0x3f23312a,0xa59430c6,0xa266c035,0x4ebc3774,0x82caa6fc,0x90d0b0e0,0xa7d81533,0x4984af1,0xecdaf741,0xcd500e7f,0x91f62f17,0x4dd68d76,0xefb04d43,0xaa4d54cc,0x9604dfe4,0xd1b5e39e,0x6a881b4c,0x2c1fb8c1,0x65517f46,0x5eea049d,0x8c355d01,0x877473fa,0xb412efb,0x671d5ab3,0xdbd25292,0x105633e9,0xd647136d,0xd7618c9a,0xa10c7a37,0xf8148e59,0x133c89eb,0xa927eece,0x61c935b7,0x1ce5ede1,0x47b13c7a,0xd2df599c,0xf2733f55,0x14ce7918,0xc737bf73,0xf7cdea53,0xfdaa5b5f,0x3d6f14df,0x44db8678,0xaff381ca,0x68c43eb9,0x24342c38,0xa3405fc2,0x1dc37216,0xe2250cbc,0x3c498b28,0xd9541ff,0xa8017139,0xcb3de08,0xb4e49cd8,0x56c19064,0xcb84617b,0x32b670d5,0x6c5c7448,0xb85742d0],eL=[0,0xe090d0b,0x1c121a16,0x121b171d,0x3824342c,0x362d3927,0x24362e3a,0x2a3f2331,0x70486858,0x7e416553,0x6c5a724e,0x62537f45,0x486c5c74,0x4665517f,0x547e4662,0x5a774b69,0xe090d0b0,0xee99ddbb,0xfc82caa6,0xf28bc7ad,0xd8b4e49c,0xd6bde997,0xc4a6fe8a,0xcaaff381,0x90d8b8e8,0x9ed1b5e3,0x8ccaa2fe,0x82c3aff5,0xa8fc8cc4,0xa6f581cf,0xb4ee96d2,0xbae79bd9,0xdb3bbb7b,0xd532b670,0xc729a16d,0xc920ac66,0xe31f8f57,0xed16825c,0xff0d9541,0xf104984a,0xab73d323,0xa57ade28,0xb761c935,0xb968c43e,0x9357e70f,0x9d5eea04,0x8f45fd19,0x814cf012,0x3bab6bcb,0x35a266c0,0x27b971dd,0x29b07cd6,0x38f5fe7,0xd8652ec,0x1f9d45f1,0x119448fa,0x4be30393,0x45ea0e98,0x57f11985,0x59f8148e,0x73c737bf,0x7dce3ab4,0x6fd52da9,0x61dc20a2,0xad766df6,0xa37f60fd,0xb16477e0,0xbf6d7aeb,0x955259da,0x9b5b54d1,0x894043cc,0x87494ec7,0xdd3e05ae,0xd33708a5,0xc12c1fb8,0xcf2512b3,0xe51a3182,0xeb133c89,0xf9082b94,0xf701269f,0x4de6bd46,0x43efb04d,0x51f4a750,0x5ffdaa5b,0x75c2896a,0x7bcb8461,0x69d0937c,0x67d99e77,0x3daed51e,0x33a7d815,0x21bccf08,0x2fb5c203,0x58ae132,0xb83ec39,0x1998fb24,0x1791f62f,0x764dd68d,0x7844db86,0x6a5fcc9b,0x6456c190,0x4e69e2a1,0x4060efaa,0x527bf8b7,0x5c72f5bc,0x605bed5,0x80cb3de,0x1a17a4c3,0x141ea9c8,0x3e218af9,0x302887f2,0x223390ef,0x2c3a9de4,0x96dd063d,0x98d40b36,0x8acf1c2b,0x84c61120,0xaef93211,0xa0f03f1a,0xb2eb2807,0xbce2250c,0xe6956e65,0xe89c636e,0xfa877473,0xf48e7978,0xdeb15a49,0xd0b85742,0xc2a3405f,0xccaa4d54,0x41ecdaf7,0x4fe5d7fc,0x5dfec0e1,0x53f7cdea,0x79c8eedb,0x77c1e3d0,0x65daf4cd,0x6bd3f9c6,0x31a4b2af,0x3fadbfa4,0x2db6a8b9,0x23bfa5b2,0x9808683,0x7898b88,0x15929c95,0x1b9b919e,0xa17c0a47,0xaf75074c,0xbd6e1051,0xb3671d5a,0x99583e6b,0x97513360,0x854a247d,0x8b432976,0xd134621f,0xdf3d6f14,0xcd267809,0xc32f7502,0xe9105633,0xe7195b38,0xf5024c25,0xfb0b412e,0x9ad7618c,0x94de6c87,0x86c57b9a,0x88cc7691,0xa2f355a0,0xacfa58ab,0xbee14fb6,0xb0e842bd,0xea9f09d4,0xe49604df,0xf68d13c2,0xf8841ec9,0xd2bb3df8,0xdcb230f3,0xcea927ee,0xc0a02ae5,0x7a47b13c,0x744ebc37,0x6655ab2a,0x685ca621,0x42638510,0x4c6a881b,0x5e719f06,0x5078920d,0xa0fd964,0x406d46f,0x161dc372,0x1814ce79,0x322bed48,0x3c22e043,0x2e39f75e,0x2030fa55,0xec9ab701,0xe293ba0a,0xf088ad17,0xfe81a01c,0xd4be832d,0xdab78e26,0xc8ac993b,0xc6a59430,0x9cd2df59,0x92dbd252,0x80c0c54f,0x8ec9c844,0xa4f6eb75,0xaaffe67e,0xb8e4f163,0xb6edfc68,0xc0a67b1,0x2036aba,0x10187da7,0x1e1170ac,0x342e539d,0x3a275e96,0x283c498b,0x26354480,0x7c420fe9,0x724b02e2,0x605015ff,0x6e5918f4,0x44663bc5,0x4a6f36ce,0x587421d3,0x567d2cd8,0x37a10c7a,0x39a80171,0x2bb3166c,0x25ba1b67,0xf853856,0x18c355d,0x13972240,0x1d9e2f4b,0x47e96422,0x49e06929,0x5bfb7e34,0x55f2733f,0x7fcd500e,0x71c45d05,0x63df4a18,0x6dd64713,0xd731dcca,0xd938d1c1,0xcb23c6dc,0xc52acbd7,0xef15e8e6,0xe11ce5ed,0xf307f2f0,0xfd0efffb,0xa779b492,0xa970b999,0xbb6bae84,0xb562a38f,0x9f5d80be,0x91548db5,0x834f9aa8,0x8d4697a3],eU=[0,0xb0e090d,0x161c121a,0x1d121b17,0x2c382434,0x27362d39,0x3a24362e,0x312a3f23,0x58704868,0x537e4165,0x4e6c5a72,0x4562537f,0x74486c5c,0x7f466551,0x62547e46,0x695a774b,0xb0e090d0,0xbbee99dd,0xa6fc82ca,0xadf28bc7,0x9cd8b4e4,0x97d6bde9,0x8ac4a6fe,0x81caaff3,0xe890d8b8,0xe39ed1b5,0xfe8ccaa2,0xf582c3af,0xc4a8fc8c,0xcfa6f581,0xd2b4ee96,0xd9bae79b,0x7bdb3bbb,0x70d532b6,0x6dc729a1,0x66c920ac,0x57e31f8f,0x5ced1682,0x41ff0d95,0x4af10498,0x23ab73d3,0x28a57ade,0x35b761c9,0x3eb968c4,0xf9357e7,0x49d5eea,0x198f45fd,0x12814cf0,0xcb3bab6b,0xc035a266,0xdd27b971,0xd629b07c,0xe7038f5f,0xec0d8652,0xf11f9d45,0xfa119448,0x934be303,0x9845ea0e,0x8557f119,0x8e59f814,0xbf73c737,0xb47dce3a,0xa96fd52d,0xa261dc20,0xf6ad766d,0xfda37f60,0xe0b16477,0xebbf6d7a,0xda955259,0xd19b5b54,0xcc894043,0xc787494e,0xaedd3e05,0xa5d33708,0xb8c12c1f,0xb3cf2512,0x82e51a31,0x89eb133c,0x94f9082b,0x9ff70126,0x464de6bd,0x4d43efb0,0x5051f4a7,0x5b5ffdaa,0x6a75c289,0x617bcb84,0x7c69d093,0x7767d99e,0x1e3daed5,0x1533a7d8,0x821bccf,0x32fb5c2,0x32058ae1,0x390b83ec,0x241998fb,0x2f1791f6,0x8d764dd6,0x867844db,0x9b6a5fcc,0x906456c1,0xa14e69e2,0xaa4060ef,0xb7527bf8,0xbc5c72f5,0xd50605be,0xde080cb3,0xc31a17a4,0xc8141ea9,0xf93e218a,0xf2302887,0xef223390,0xe42c3a9d,0x3d96dd06,0x3698d40b,0x2b8acf1c,0x2084c611,0x11aef932,0x1aa0f03f,0x7b2eb28,0xcbce225,0x65e6956e,0x6ee89c63,0x73fa8774,0x78f48e79,0x49deb15a,0x42d0b857,0x5fc2a340,0x54ccaa4d,0xf741ecda,0xfc4fe5d7,0xe15dfec0,0xea53f7cd,0xdb79c8ee,0xd077c1e3,0xcd65daf4,0xc66bd3f9,0xaf31a4b2,0xa43fadbf,0xb92db6a8,0xb223bfa5,0x83098086,0x8807898b,0x9515929c,0x9e1b9b91,0x47a17c0a,0x4caf7507,0x51bd6e10,0x5ab3671d,0x6b99583e,0x60975133,0x7d854a24,0x768b4329,0x1fd13462,0x14df3d6f,0x9cd2678,0x2c32f75,0x33e91056,0x38e7195b,0x25f5024c,0x2efb0b41,0x8c9ad761,0x8794de6c,0x9a86c57b,0x9188cc76,0xa0a2f355,0xabacfa58,0xb6bee14f,0xbdb0e842,0xd4ea9f09,0xdfe49604,0xc2f68d13,0xc9f8841e,0xf8d2bb3d,0xf3dcb230,0xeecea927,0xe5c0a02a,0x3c7a47b1,0x37744ebc,0x2a6655ab,0x21685ca6,0x10426385,0x1b4c6a88,0x65e719f,0xd507892,0x640a0fd9,0x6f0406d4,0x72161dc3,0x791814ce,0x48322bed,0x433c22e0,0x5e2e39f7,0x552030fa,0x1ec9ab7,0xae293ba,0x17f088ad,0x1cfe81a0,0x2dd4be83,0x26dab78e,0x3bc8ac99,0x30c6a594,0x599cd2df,0x5292dbd2,0x4f80c0c5,0x448ec9c8,0x75a4f6eb,0x7eaaffe6,0x63b8e4f1,0x68b6edfc,0xb10c0a67,0xba02036a,0xa710187d,0xac1e1170,0x9d342e53,0x963a275e,0x8b283c49,0x80263544,0xe97c420f,0xe2724b02,0xff605015,0xf46e5918,0xc544663b,0xce4a6f36,0xd3587421,0xd8567d2c,0x7a37a10c,0x7139a801,0x6c2bb316,0x6725ba1b,0x560f8538,0x5d018c35,0x40139722,0x4b1d9e2f,0x2247e964,0x2949e069,0x345bfb7e,0x3f55f273,0xe7fcd50,0x571c45d,0x1863df4a,0x136dd647,0xcad731dc,0xc1d938d1,0xdccb23c6,0xd7c52acb,0xe6ef15e8,0xede11ce5,0xf0f307f2,0xfbfd0eff,0x92a779b4,0x99a970b9,0x84bb6bae,0x8fb562a3,0xbe9f5d80,0xb591548d,0xa8834f9a,0xa38d4697],eF=[0,0xd0b0e09,0x1a161c12,0x171d121b,0x342c3824,0x3927362d,0x2e3a2436,0x23312a3f,0x68587048,0x65537e41,0x724e6c5a,0x7f456253,0x5c74486c,0x517f4665,0x4662547e,0x4b695a77,0xd0b0e090,0xddbbee99,0xcaa6fc82,0xc7adf28b,0xe49cd8b4,0xe997d6bd,0xfe8ac4a6,0xf381caaf,0xb8e890d8,0xb5e39ed1,0xa2fe8cca,0xaff582c3,0x8cc4a8fc,0x81cfa6f5,0x96d2b4ee,0x9bd9bae7,0xbb7bdb3b,0xb670d532,0xa16dc729,0xac66c920,0x8f57e31f,0x825ced16,0x9541ff0d,0x984af104,0xd323ab73,0xde28a57a,0xc935b761,0xc43eb968,0xe70f9357,0xea049d5e,0xfd198f45,0xf012814c,0x6bcb3bab,0x66c035a2,0x71dd27b9,0x7cd629b0,0x5fe7038f,0x52ec0d86,0x45f11f9d,0x48fa1194,0x3934be3,0xe9845ea,0x198557f1,0x148e59f8,0x37bf73c7,0x3ab47dce,0x2da96fd5,0x20a261dc,0x6df6ad76,0x60fda37f,0x77e0b164,0x7aebbf6d,0x59da9552,0x54d19b5b,0x43cc8940,0x4ec78749,0x5aedd3e,0x8a5d337,0x1fb8c12c,0x12b3cf25,0x3182e51a,0x3c89eb13,0x2b94f908,0x269ff701,0xbd464de6,0xb04d43ef,0xa75051f4,0xaa5b5ffd,0x896a75c2,0x84617bcb,0x937c69d0,0x9e7767d9,0xd51e3dae,0xd81533a7,0xcf0821bc,0xc2032fb5,0xe132058a,0xec390b83,0xfb241998,0xf62f1791,0xd68d764d,0xdb867844,0xcc9b6a5f,0xc1906456,0xe2a14e69,0xefaa4060,0xf8b7527b,0xf5bc5c72,0xbed50605,0xb3de080c,0xa4c31a17,0xa9c8141e,0x8af93e21,0x87f23028,0x90ef2233,0x9de42c3a,0x63d96dd,0xb3698d4,0x1c2b8acf,0x112084c6,0x3211aef9,0x3f1aa0f0,0x2807b2eb,0x250cbce2,0x6e65e695,0x636ee89c,0x7473fa87,0x7978f48e,0x5a49deb1,0x5742d0b8,0x405fc2a3,0x4d54ccaa,0xdaf741ec,0xd7fc4fe5,0xc0e15dfe,0xcdea53f7,0xeedb79c8,0xe3d077c1,0xf4cd65da,0xf9c66bd3,0xb2af31a4,0xbfa43fad,0xa8b92db6,0xa5b223bf,0x86830980,0x8b880789,0x9c951592,0x919e1b9b,0xa47a17c,0x74caf75,0x1051bd6e,0x1d5ab367,1047239e3,0x33609751,0x247d854a,0x29768b43,0x621fd134,0x6f14df3d,0x7809cd26,0x7502c32f,0x5633e910,0x5b38e719,0x4c25f502,0x412efb0b,0x618c9ad7,0x6c8794de,0x7b9a86c5,0x769188cc,0x55a0a2f3,0x58abacfa,0x4fb6bee1,0x42bdb0e8,0x9d4ea9f,0x4dfe496,0x13c2f68d,0x1ec9f884,0x3df8d2bb,0x30f3dcb2,0x27eecea9,0x2ae5c0a0,0xb13c7a47,0xbc37744e,0xab2a6655,0xa621685c,0x85104263,0x881b4c6a,0x9f065e71,0x920d5078,0xd9640a0f,0xd46f0406,0xc372161d,0xce791814,0xed48322b,0xe0433c22,0xf75e2e39,0xfa552030,0xb701ec9a,0xba0ae293,0xad17f088,0xa01cfe81,0x832dd4be,0x8e26dab7,0x993bc8ac,0x9430c6a5,0xdf599cd2,0xd25292db,0xc54f80c0,0xc8448ec9,0xeb75a4f6,0xe67eaaff,0xf163b8e4,0xfc68b6ed,0x67b10c0a,0x6aba0203,0x7da71018,0x70ac1e11,0x539d342e,0x5e963a27,0x498b283c,0x44802635,0xfe97c42,0x2e2724b,0x15ff6050,0x18f46e59,0x3bc54466,0x36ce4a6f,0x21d35874,0x2cd8567d,0xc7a37a1,0x17139a8,0x166c2bb3,0x1b6725ba,0x38560f85,0x355d018c,0x22401397,0x2f4b1d9e,0x642247e9,0x692949e0,0x7e345bfb,0x733f55f2,0x500e7fcd,0x5d0571c4,0x4a1863df,0x47136dd6,0xdccad731,0xd1c1d938,0xc6dccb23,0xcbd7c52a,0xe8e6ef15,0xe5ede11c,0xf2f0f307,0xfffbfd0e,0xb492a779,0xb999a970,0xae84bb6b,0xa38fb562,0x80be9f5d,0x8db59154,0x9aa8834f,0x97a38d46],ej=[0,0x90d0b0e,0x121a161c,0x1b171d12,0x24342c38,0x2d392736,0x362e3a24,0x3f23312a,0x48685870,0x4165537e,0x5a724e6c,0x537f4562,0x6c5c7448,0x65517f46,0x7e466254,0x774b695a,0x90d0b0e0,0x99ddbbee,0x82caa6fc,0x8bc7adf2,0xb4e49cd8,0xbde997d6,0xa6fe8ac4,0xaff381ca,0xd8b8e890,0xd1b5e39e,0xcaa2fe8c,0xc3aff582,0xfc8cc4a8,0xf581cfa6,0xee96d2b4,0xe79bd9ba,0x3bbb7bdb,0x32b670d5,0x29a16dc7,0x20ac66c9,0x1f8f57e3,0x16825ced,0xd9541ff,0x4984af1,0x73d323ab,0x7ade28a5,0x61c935b7,0x68c43eb9,0x57e70f93,0x5eea049d,0x45fd198f,0x4cf01281,0xab6bcb3b,0xa266c035,0xb971dd27,0xb07cd629,0x8f5fe703,0x8652ec0d,0x9d45f11f,0x9448fa11,0xe303934b,0xea0e9845,0xf1198557,0xf8148e59,0xc737bf73,0xce3ab47d,0xd52da96f,0xdc20a261,0x766df6ad,0x7f60fda3,0x6477e0b1,0x6d7aebbf,0x5259da95,0x5b54d19b,0x4043cc89,0x494ec787,0x3e05aedd,0x3708a5d3,0x2c1fb8c1,0x2512b3cf,0x1a3182e5,0x133c89eb,0x82b94f9,0x1269ff7,0xe6bd464d,0xefb04d43,0xf4a75051,0xfdaa5b5f,0xc2896a75,0xcb84617b,0xd0937c69,0xd99e7767,0xaed51e3d,0xa7d81533,0xbccf0821,0xb5c2032f,0x8ae13205,0x83ec390b,0x98fb2419,0x91f62f17,0x4dd68d76,0x44db8678,0x5fcc9b6a,0x56c19064,0x69e2a14e,0x60efaa40,0x7bf8b752,0x72f5bc5c,0x5bed506,0xcb3de08,0x17a4c31a,0x1ea9c814,0x218af93e,679998e3,0x3390ef22,0x3a9de42c,0xdd063d96,0xd40b3698,0xcf1c2b8a,0xc6112084,0xf93211ae,0xf03f1aa0,0xeb2807b2,0xe2250cbc,0x956e65e6,0x9c636ee8,0x877473fa,0x8e7978f4,0xb15a49de,0xb85742d0,0xa3405fc2,0xaa4d54cc,0xecdaf741,0xe5d7fc4f,0xfec0e15d,0xf7cdea53,0xc8eedb79,0xc1e3d077,0xdaf4cd65,0xd3f9c66b,0xa4b2af31,0xadbfa43f,0xb6a8b92d,0xbfa5b223,0x80868309,0x898b8807,0x929c9515,0x9b919e1b,0x7c0a47a1,0x75074caf,0x6e1051bd,0x671d5ab3,0x583e6b99,0x51336097,0x4a247d85,0x4329768b,0x34621fd1,0x3d6f14df,0x267809cd,0x2f7502c3,0x105633e9,0x195b38e7,0x24c25f5,0xb412efb,0xd7618c9a,0xde6c8794,0xc57b9a86,0xcc769188,0xf355a0a2,0xfa58abac,0xe14fb6be,0xe842bdb0,0x9f09d4ea,0x9604dfe4,0x8d13c2f6,0x841ec9f8,0xbb3df8d2,0xb230f3dc,0xa927eece,0xa02ae5c0,0x47b13c7a,0x4ebc3774,0x55ab2a66,0x5ca62168,0x63851042,0x6a881b4c,0x719f065e,0x78920d50,0xfd9640a,0x6d46f04,0x1dc37216,0x14ce7918,0x2bed4832,0x22e0433c,0x39f75e2e,0x30fa5520,0x9ab701ec,0x93ba0ae2,0x88ad17f0,0x81a01cfe,0xbe832dd4,0xb78e26da,0xac993bc8,0xa59430c6,0xd2df599c,0xdbd25292,0xc0c54f80,0xc9c8448e,0xf6eb75a4,0xffe67eaa,0xe4f163b8,0xedfc68b6,0xa67b10c,0x36aba02,0x187da710,0x1170ac1e,0x2e539d34,0x275e963a,0x3c498b28,0x35448026,0x420fe97c,0x4b02e272,0x5015ff60,0x5918f46e,0x663bc544,0x6f36ce4a,0x7421d358,0x7d2cd856,0xa10c7a37,0xa8017139,0xb3166c2b,0xba1b6725,0x8538560f,0x8c355d01,0x97224013,0x9e2f4b1d,0xe9642247,0xe0692949,0xfb7e345b,0xf2733f55,0xcd500e7f,0xc45d0571,0xdf4a1863,0xd647136d,0x31dccad7,0x38d1c1d9,0x23c6dccb,0x2acbd7c5,0x15e8e6ef,0x1ce5ede1,0x7f2f0f3,0xefffbfd,0x79b492a7,0x70b999a9,0x6bae84bb,0x62a38fb5,0x5d80be9f,0x548db591,0x4f9aa883,0x4697a38d];function ez(e){let t=[];for(let r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}class eH{get key(){return eE(this,n,"f").slice()}constructor(e){let t;if(n.set(this,void 0),i.set(this,void 0),s.set(this,void 0),!(this instanceof eH))throw Error("AES must be instanitated with `new`");ek(this,n,new Uint8Array(e),"f");let r=eP[this.key.length];if(null==r)throw TypeError("invalid key size (must be 16, 24 or 32 bytes)");ek(this,s,[],"f"),ek(this,i,[],"f");for(let e=0;e<=r;e++)eE(this,s,"f").push([0,0,0,0]),eE(this,i,"f").push([0,0,0,0]);let a=(r+1)*4,o=this.key.length/4,l=ez(this.key);for(let e=0;e<o;e++)t=e>>2,eE(this,s,"f")[t][e%4]=l[e],eE(this,i,"f")[r-t][e%4]=l[e];let c=0,u=o,d;for(;u<a;){if(d=l[o-1],l[0]^=eI[d>>16&255]<<24^eI[d>>8&255]<<16^eI[255&d]<<8^eI[d>>24&255]^eS[c]<<24,c+=1,8!=o)for(let e=1;e<o;e++)l[e]^=l[e-1];else{for(let e=1;e<o/2;e++)l[e]^=l[e-1];d=l[o/2-1],l[o/2]^=eI[255&d]^eI[d>>8&255]<<8^eI[d>>16&255]<<16^eI[d>>24&255]<<24;for(let e=o/2+1;e<o;e++)l[e]^=l[e-1]}let e=0,t,n;for(;e<o&&u<a;)t=u>>2,n=u%4,eE(this,s,"f")[t][n]=l[e],eE(this,i,"f")[r-t][n]=l[e++],u++}for(let e=1;e<r;e++)for(let t=0;t<4;t++)d=eE(this,i,"f")[e][t],eE(this,i,"f")[e][t]=eL[d>>24&255]^eU[d>>16&255]^eF[d>>8&255]^ej[255&d]}encrypt(e){if(16!=e.length)throw TypeError("invalid plaintext size (must be 16 bytes)");let t=eE(this,s,"f").length-1,r=[0,0,0,0],n=ez(e);for(let e=0;e<4;e++)n[e]^=eE(this,s,"f")[0][e];for(let e=1;e<t;e++){for(let t=0;t<4;t++)r[t]=e_[n[t]>>24&255]^eC[n[(t+1)%4]>>16&255]^eO[n[(t+2)%4]>>8&255]^eR[255&n[(t+3)%4]]^eE(this,s,"f")[e][t];n=r.slice()}let i=new Uint8Array(16),a=0;for(let e=0;e<4;e++)a=eE(this,s,"f")[t][e],i[4*e]=(eI[n[e]>>24&255]^a>>24)&255,i[4*e+1]=(eI[n[(e+1)%4]>>16&255]^a>>16)&255,i[4*e+2]=(eI[n[(e+2)%4]>>8&255]^a>>8)&255,i[4*e+3]=(eI[255&n[(e+3)%4]]^a)&255;return i}decrypt(e){if(16!=e.length)throw TypeError("invalid ciphertext size (must be 16 bytes)");let t=eE(this,i,"f").length-1,r=[0,0,0,0],n=ez(e);for(let e=0;e<4;e++)n[e]^=eE(this,i,"f")[0][e];for(let e=1;e<t;e++){for(let t=0;t<4;t++)r[t]=eN[n[t]>>24&255]^eM[n[(t+3)%4]>>16&255]^eB[n[(t+2)%4]>>8&255]^eD[255&n[(t+1)%4]]^eE(this,i,"f")[e][t];n=r.slice()}let s=new Uint8Array(16),a=0;for(let e=0;e<4;e++)a=eE(this,i,"f")[t][e],s[4*e]=(eT[n[e]>>24&255]^a>>24)&255,s[4*e+1]=(eT[n[(e+3)%4]>>16&255]^a>>16)&255,s[4*e+2]=(eT[n[(e+2)%4]>>8&255]^a>>8)&255,s[4*e+3]=(eT[255&n[(e+1)%4]]^a)&255;return s}}n=new WeakMap,i=new WeakMap,s=new WeakMap;class eG{constructor(e,t,r){if(r&&!(this instanceof r))throw Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new eH(t)},name:{enumerable:!0,value:e}})}}var e$=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},eV=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class eq extends eG{constructor(e,t){if(super("ECC",e,eq),a.set(this,void 0),o.set(this,void 0),t){if(t.length%16)throw TypeError("invalid iv size (must be 16 bytes)");e$(this,a,new Uint8Array(t),"f")}else e$(this,a,new Uint8Array(16),"f");e$(this,o,this.iv,"f")}get iv(){return new Uint8Array(eV(this,a,"f"))}encrypt(e){if(e.length%16)throw TypeError("invalid plaintext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){for(let t=0;t<16;t++)eV(this,o,"f")[t]^=e[r+t];e$(this,o,this.aes.encrypt(eV(this,o,"f")),"f"),t.set(eV(this,o,"f"),r)}return t}decrypt(e){if(e.length%16)throw TypeError("invalid ciphertext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16){let n=this.aes.decrypt(e.subarray(r,r+16));for(let i=0;i<16;i++)t[r+i]=n[i]^eV(this,o,"f")[i],eV(this,o,"f")[i]=e[r+i]}return t}}a=new WeakMap,o=new WeakMap;new WeakMap,new WeakMap,new WeakSet;var eK=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r},eW=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class eQ extends eG{constructor(e,t){super("CTR",e,eQ),c.set(this,void 0),u.set(this,void 0),d.set(this,void 0),eK(this,d,new Uint8Array(16),"f"),eW(this,d,"f").fill(0),eK(this,c,eW(this,d,"f"),"f"),eK(this,u,16,"f"),null==t&&(t=1),"number"==typeof t?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(eW(this,d,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)eW(this,d,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(16!==e.length)throw TypeError("invalid counter initial Uint8Array value length");eW(this,d,"f").set(e)}increment(){for(let e=15;e>=0;e--)if(255===eW(this,d,"f")[e])eW(this,d,"f")[e]=0;else{eW(this,d,"f")[e]++;break}}encrypt(e){var t,r;let n=new Uint8Array(e);for(let e=0;e<n.length;e++)16===eW(this,u,"f")&&(eK(this,c,this.aes.encrypt(eW(this,d,"f")),"f"),eK(this,u,0,"f"),this.increment()),n[e]^=eW(this,c,"f")[eK(this,u,(r=eW(this,u,"f"),t=r++,r),"f"),t];return n}decrypt(e){return this.encrypt(e)}}c=new WeakMap,u=new WeakMap,d=new WeakMap,new WeakMap,new WeakMap,new WeakMap;var eZ=r(5364),eJ=r(9258),eY=r(28);let eX=(e,t)=>e<<t|e>>>32-t;function e0(e,t,r,n,i,s){let a=e[t++]^r[n++],o=e[t++]^r[n++],l=e[t++]^r[n++],c=e[t++]^r[n++],u=e[t++]^r[n++],d=e[t++]^r[n++],h=e[t++]^r[n++],f=e[t++]^r[n++],p=e[t++]^r[n++],g=e[t++]^r[n++],m=e[t++]^r[n++],b=e[t++]^r[n++],y=e[t++]^r[n++],x=e[t++]^r[n++],w=e[t++]^r[n++],v=e[t++]^r[n++],A=a,E=o,k=l,P=c,S=u,I=d,T=h,_=f,C=p,O=g,R=m,N=b,M=y,B=x,D=w,L=v;for(let e=0;e<8;e+=2)S^=eX(A+M|0,7),C^=eX(S+A|0,9),M^=eX(C+S|0,13),A^=eX(M+C|0,18),O^=eX(I+E|0,7),B^=eX(O+I|0,9),E^=eX(B+O|0,13),I^=eX(E+B|0,18),D^=eX(R+T|0,7),k^=eX(D+R|0,9),T^=eX(k+D|0,13),R^=eX(T+k|0,18),P^=eX(L+N|0,7),_^=eX(P+L|0,9),N^=eX(_+P|0,13),L^=eX(N+_|0,18),E^=eX(A+P|0,7),k^=eX(E+A|0,9),P^=eX(k+E|0,13),A^=eX(P+k|0,18),T^=eX(I+S|0,7),_^=eX(T+I|0,9),S^=eX(_+T|0,13),I^=eX(S+_|0,18),N^=eX(R+O|0,7),C^=eX(N+R|0,9),O^=eX(C+N|0,13),R^=eX(O+C|0,18),M^=eX(L+D|0,7),B^=eX(M+L|0,9),D^=eX(B+M|0,13),L^=eX(D+B|0,18);i[s++]=a+A|0,i[s++]=o+E|0,i[s++]=l+k|0,i[s++]=c+P|0,i[s++]=u+S|0,i[s++]=d+I|0,i[s++]=h+T|0,i[s++]=f+_|0,i[s++]=p+C|0,i[s++]=g+O|0,i[s++]=m+R|0,i[s++]=b+N|0,i[s++]=y+M|0,i[s++]=x+B|0,i[s++]=w+D|0,i[s++]=v+L|0}function e1(e,t,r,n,i){let s=n+0,a=n+16*i;for(let n=0;n<16;n++)r[a+n]=e[t+(2*i-1)*16+n];for(let n=0;n<i;n++,s+=16,t+=16)e0(r,a,e,t,r,s),n>0&&(a+=16),e0(r,s,e,t+=16,r,a)}function e2(e,t,r){let{N:n,r:i,p:s,dkLen:a,asyncTick:o,maxmem:l,onProgress:c}=(0,B.tY)({dkLen:32,asyncTick:10,maxmem:0x40000400},r);if((0,eZ.ai)(n),(0,eZ.ai)(i),(0,eZ.ai)(s),(0,eZ.ai)(a),(0,eZ.ai)(o),(0,eZ.ai)(l),void 0!==c&&"function"!=typeof c)throw Error("progressCb should be function");let u=128*i,d=u/4;if(n<=1||(n&n-1)!=0||n>=2**(u/8)||n>0x100000000)throw Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(s<0||s>(0x100000000-1)*32/u)throw Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>(0x100000000-1)*32)throw Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");let h=u*(n+s);if(h>l)throw Error(`Scrypt: parameters too large, ${h} (128 * r * (N + p)) > ${l} (maxmem)`);let f=(0,eY.A)(eJ.s,e,t,{c:1,dkLen:u*s}),p=(0,B.DH)(f),g=(0,B.DH)(new Uint8Array(u*n)),m=(0,B.DH)(new Uint8Array(u)),b=()=>{};if(c){let e=2*n*s,t=Math.max(Math.floor(e/1e4),1),r=0;b=()=>{r++,c&&(!(r%t)||r===e)&&c(r/e)}}return{N:n,r:i,p:s,dkLen:a,blockSize32:d,V:g,B32:p,B:f,tmp:m,blockMixCb:b,asyncTick:o}}function e3(e,t,r,n,i){let s=(0,eY.A)(eJ.s,e,r,{c:1,dkLen:t});return r.fill(0),n.fill(0),i.fill(0),s}async function e4(e,t,r){let{N:n,r:i,p:s,dkLen:a,blockSize32:o,V:l,B32:c,B:u,tmp:d,blockMixCb:h,asyncTick:f}=e2(e,t,r);for(let e=0;e<s;e++){let t=o*e;for(let e=0;e<o;e++)l[e]=c[t+e];let r=0;await (0,B.$h)(n-1,f,()=>{e1(l,r,l,r+=o,i),h()}),e1(l,(n-1)*o,c,t,i),h(),await (0,B.$h)(n,f,()=>{let e=c[t+o-16]%n;for(let r=0;r<o;r++)d[r]=c[t+r]^l[e*o+r];e1(d,0,c,t,i),h()})}return e3(e,a,u,l,d)}let e6=!1,e5=!1,e8=async function(e,t,r,n,i,s,a){return await e4(e,t,{N:r,r:n,p:i,dkLen:s,onProgress:a})},e7=function(e,t,r,n,i,s){return function(e,t,r){let{N:n,r:i,p:s,dkLen:a,blockSize32:o,V:l,B32:c,B:u,tmp:d,blockMixCb:h}=e2(e,t,r);for(let e=0;e<s;e++){let t=o*e;for(let e=0;e<o;e++)l[e]=c[t+e];for(let e=0,t=0;e<n-1;e++)e1(l,t,l,t+=o,i),h();e1(l,(n-1)*o,c,t,i),h();for(let e=0;e<n;e++){let e=c[t+o-16]%n;for(let r=0;r<o;r++)d[r]=c[t+r]^l[e*o+r];e1(d,0,c,t,i),h()}}return e3(e,a,u,l,d)}(e,t,{N:r,r:n,p:i,dkLen:s})},e9=e8,te=e7;async function tt(e,t,r,n,i,s,a){let o=(0,y.q5)(e,"passwd"),l=(0,y.q5)(t,"salt");return(0,y.c$)(await e9(o,l,r,n,i,s,a))}function tr(e,t,r,n,i,s){let a=(0,y.q5)(e,"passwd"),o=(0,y.q5)(t,"salt");return(0,y.c$)(te(a,o,r,n,i,s))}function tn(e){return"string"!=typeof e||e.startsWith("0x")||(e="0x"+e),(0,y.Lm)(e)}function ti(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function ts(e){return"string"==typeof e?(0,b.YW)(e,"NFKC"):(0,y.Lm)(e)}function ta(e,t){let r=t.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);(0,f.MR)(null!=r,"invalid path","path",t);let n=r[1],i=r[3],s="!"===r[4],a=e;for(let e of n.toLowerCase().split(".")){if(Array.isArray(a)){if(!e.match(/^[0-9]+$/))break;a=a[parseInt(e)]}else if("object"==typeof a){let t=null;for(let r in a)if(r.toLowerCase()===e){t=a[r];break}a=t}else a=null;if(null==a)break}if((0,f.MR)(!s||null!=a,"missing required value","path",n),i&&null!=a){if("int"===i){if("string"==typeof a&&a.match(/^-?[0-9]+$/))return parseInt(a);if(Number.isSafeInteger(a))return a}if("number"===i&&"string"==typeof a&&a.match(/^-?[0-9.]*$/))return parseFloat(a);if("data"===i&&"string"==typeof a)return tn(a);if("array"===i&&Array.isArray(a)||i===typeof a)return a;(0,f.MR)(!1,`wrong type found for ${i} `,"path",n)}return a}tt._=e8,tt.lock=function(){e5=!0},tt.register=function(e){if(e5)throw Error("scrypt is locked");e9=e},Object.freeze(tt),tr._=e7,tr.lock=function(){e6=!0},tr.register=function(e){if(e6)throw Error("scryptSync is locked");te=e},Object.freeze(tr);var to=r(8336);let tl="m/44'/60'/0'/0/0";function tc(e){try{let t=JSON.parse(e),r=null!=t.version?parseInt(t.version):0;if(3===r)return!0}catch(e){}return!1}function tu(e,t){let r=(0,y.q5)(t),n=ta(e,"crypto.ciphertext:data!"),i=(0,y.c$)((0,m.S)((0,y.xW)([r.slice(16,32),n]))).substring(2);(0,f.MR)(i===ta(e,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");let s=function(e,t,r){if("aes-128-ctr"===ta(e,"crypto.cipher:string")){let n=new eQ(t,ta(e,"crypto.cipherparams.iv:data!"));return(0,y.c$)(n.decrypt(r))}(0,f.vA)(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(e,r.slice(0,16),n),a=(0,k.K)(s);if(e.address){let t=e.address.toLowerCase();t.startsWith("0x")||(t="0x"+t),(0,f.MR)((0,g.b)(t)===a,"keystore address/privateKey mismatch","address",e.address)}let o={address:a,privateKey:s};if("0.1"===ta(e,"x-ethers.version:string")){let t=r.slice(32,64),n=ta(e,"x-ethers.mnemonicCiphertext:data!"),i=new eQ(t,ta(e,"x-ethers.mnemonicCounter:data!"));o.mnemonic={path:ta(e,"x-ethers.path:string")||tl,locale:ta(e,"x-ethers.locale:string")||"en",entropy:(0,y.c$)((0,y.q5)(i.decrypt(n)))}}return o}function td(e){let t=ta(e,"crypto.kdf:string");if(t&&"string"==typeof t){if("scrypt"===t.toLowerCase()){let r=ta(e,"crypto.kdfparams.salt:data!"),n=ta(e,"crypto.kdfparams.n:int!"),i=ta(e,"crypto.kdfparams.r:int!"),s=ta(e,"crypto.kdfparams.p:int!");(0,f.MR)(n>0&&(n&n-1)==0,"invalid kdf.N","kdf.N",n),(0,f.MR)(i>0&&s>0,"invalid kdf","kdf",t);let a=ta(e,"crypto.kdfparams.dklen:int!");return(0,f.MR)(32===a,"invalid kdf.dklen","kdf.dflen",a),{name:"scrypt",salt:r,N:n,r:i,p:s,dkLen:64}}if("pbkdf2"===t.toLowerCase()){let t=ta(e,"crypto.kdfparams.salt:data!"),r=ta(e,"crypto.kdfparams.prf:string!"),n=r.split("-").pop();(0,f.MR)("sha256"===n||"sha512"===n,"invalid kdf.pdf","kdf.pdf",r);let i=ta(e,"crypto.kdfparams.c:int!"),s=ta(e,"crypto.kdfparams.dklen:int!");return(0,f.MR)(32===s,"invalid kdf.dklen","kdf.dklen",s),{name:"pbkdf2",salt:t,count:i,dkLen:s,algorithm:n}}}(0,f.MR)(!1,"unsupported key-derivation function","kdf",t)}function th(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}async function tf(e,t,r){let n=JSON.parse(e),i=ts(t),s=td(n);if("pbkdf2"===s.name){r&&(r(0),await th(0));let{salt:e,count:t,dkLen:a,algorithm:o}=s,l=eb(i,e,t,a,o);return r&&(r(1),await th(0)),tu(n,l)}(0,f.vA)("scrypt"===s.name,"cannot be reached","UNKNOWN_ERROR",{params:s});let{salt:a,N:o,r:l,p:c,dkLen:u}=s;return tu(n,await tt(i,a,o,l,c,u,r))}function tp(e){let t=null!=e.salt?(0,y.q5)(e.salt,"options.salt"):ei(32),r=131072,n=8,i=1;return e.scrypt&&(e.scrypt.N&&(r=e.scrypt.N),e.scrypt.r&&(n=e.scrypt.r),e.scrypt.p&&(i=e.scrypt.p)),(0,f.MR)("number"==typeof r&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r),(0,f.MR)("number"==typeof n&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n),(0,f.MR)("number"==typeof i&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:t,N:r,r:n,p:i}}function tg(e,t,r,n){let i=(0,y.q5)(r.privateKey,"privateKey"),s=null!=n.iv?(0,y.q5)(n.iv,"options.iv"):ei(16);(0,f.MR)(16===s.length,"invalid options.iv length","options.iv",n.iv);let a=null!=n.uuid?(0,y.q5)(n.uuid,"options.uuid"):ei(16);(0,f.MR)(16===a.length,"invalid options.uuid length","options.uuid",n.iv);let o=e.slice(0,16),l=e.slice(16,32),c=new eQ(o,s),u=(0,y.q5)(c.encrypt(i)),d=(0,m.S)((0,y.xW)([l,u])),h={address:r.address.substring(2).toLowerCase(),id:function(e){let t=(0,y.q5)(e,"randomBytes");t[6]=15&t[6]|64,t[8]=63&t[8]|128;let r=(0,y.c$)(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:(0,y.c$)(s).substring(2)},ciphertext:(0,y.c$)(u).substring(2),kdf:"scrypt",kdfparams:{salt:(0,y.c$)(t.salt).substring(2),n:t.N,dklen:32,p:t.p,r:t.r},mac:d.substring(2)}};if(r.mnemonic){let t=null!=n.client?n.client:`ethers/${to.r}`,i=r.mnemonic.path||tl,s=r.mnemonic.locale||"en",a=e.slice(32,64),o=(0,y.q5)(r.mnemonic.entropy,"account.mnemonic.entropy"),l=ei(16),c=new eQ(a,l),u=(0,y.q5)(c.encrypt(o)),d=new Date,f="UTC--"+(d.getUTCFullYear()+"-"+ti(d.getUTCMonth()+1,2)+"-"+ti(d.getUTCDate(),2)+"T"+ti(d.getUTCHours(),2)+"-"+ti(d.getUTCMinutes(),2)+"-"+ti(d.getUTCSeconds(),2))+".0Z--"+h.address;h["x-ethers"]={client:t,gethFilename:f,path:i,locale:s,mnemonicCounter:(0,y.c$)(l).substring(2),mnemonicCiphertext:(0,y.c$)(u).substring(2),version:"0.1"}}return JSON.stringify(h)}function tm(e,t,r){null==r&&(r={});let n=ts(t),i=tp(r),s=tr(n,i.salt,i.N,i.r,i.p,64);return tg((0,y.q5)(s),i,e,r)}async function tb(e,t,r){null==r&&(r={});let n=ts(t),i=tp(r),s=await tt(n,i.salt,i.N,i.r,i.p,64,r.progressCallback);return tg((0,y.q5)(s),i,e,r)}let ty="m/44'/60'/0'/0/0",tx=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),tw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function tv(e,t){let r="";for(;e;)r="0123456789abcdef"[e%16]+r,e=Math.trunc(e/16);for(;r.length<2*t;)r="0"+r;return"0x"+r}function tA(e){let t=(0,y.q5)(e),r=(0,y.ZG)((0,T.s)((0,T.s)(t)),0,4),n=(0,y.xW)([t,r]);return(0,es.R)(n)}let tE={};function tk(e,t,r,n){let i=new Uint8Array(37);0x80000000&e?((0,f.vA)(null!=n,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),i.set((0,y.q5)(n),1)):i.set((0,y.q5)(r));for(let t=24;t>=0;t-=8)i[33+(t>>3)]=e>>24-t&255;let s=(0,y.q5)(N("sha512",t,i));return{IL:s.slice(0,32),IR:s.slice(32)}}function tP(e,t){let r=t.split("/");(0,f.MR)(r.length>0,"invalid path","path",t),"m"===r[0]&&((0,f.MR)(0===e.depth,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${e.depth}`,"path",t),r.shift());let n=e;for(let e=0;e<r.length;e++){let t=r[e];if(t.match(/^[0-9]+'$/)){let r=parseInt(t.substring(0,t.length-1));(0,f.MR)(r<0x80000000,"invalid path index",`path[${e}]`,t),n=n.deriveChild(0x80000000+r)}else if(t.match(/^[0-9]+$/)){let r=parseInt(t);(0,f.MR)(r<0x80000000,"invalid path index",`path[${e}]`,t),n=n.deriveChild(r)}else(0,f.MR)(!1,"invalid path component",`path[${e}]`,t)}return n}class tS extends I{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(e,t,r,n,i,s,a,o,l){super(t,l),(0,f.gk)(e,tE,"HDNodeWallet"),(0,S.n)(this,{publicKey:t.compressedPublicKey});let c=(0,y.ZG)(ee((0,T.s)(this.publicKey)),0,4);(0,S.n)(this,{parentFingerprint:r,fingerprint:c,chainCode:n,path:i,index:s,depth:a}),(0,S.n)(this,{mnemonic:o})}connect(e){return new tS(tE,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,e)}#tP(){let e={address:this.address,privateKey:this.privateKey},t=this.mnemonic;return this.path&&t&&"en"===t.wordlist.locale&&""===t.password&&(e.mnemonic={path:this.path,locale:"en",entropy:t.entropy}),e}async encrypt(e,t){return await tb(this.#tP(),e,{progressCallback:t})}encryptSync(e){return tm(this.#tP(),e)}get extendedKey(){return(0,f.vA)(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),tA((0,y.xW)(["0x0488ADE4",tv(this.depth,1),this.parentFingerprint,tv(this.index,4),this.chainCode,(0,y.xW)(["0x00",this.privateKey])]))}hasPath(){return null!=this.path}neuter(){return new tI(tE,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(e){let t=(0,w.WZ)(e,"index");(0,f.MR)(t<=0xffffffff,"invalid index","index",t);let r=this.path;r&&(r+="/"+(0x7fffffff&t),0x80000000&t&&(r+="'"));let{IR:n,IL:i}=tk(t,this.chainCode,this.publicKey,this.privateKey);return new tS(tE,new h.h((0,w.up)(((0,w.Dg)(i)+BigInt(this.privateKey))%tw,32)),this.fingerprint,(0,y.c$)(n),r,t,this.depth+1,this.mnemonic,this.provider)}derivePath(e){return tP(this,e)}static #tS(e,t){(0,f.MR)((0,y.f)(e),"invalid seed","seed","[REDACTED]");let r=(0,y.q5)(e,"seed");(0,f.MR)(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");let n=(0,y.q5)(N("sha512",tx,r));return new tS(tE,new h.h((0,y.c$)(n.slice(0,32))),"0x00000000",(0,y.c$)(n.slice(32)),"m",0,0,t,null)}static fromExtendedKey(e){let t=(0,w.c4)((0,es.H)(e));(0,f.MR)(82===t.length||tA(t.slice(0,78))===e,"invalid extended key","extendedKey","[ REDACTED ]");let r=t[4],n=(0,y.c$)(t.slice(5,9)),i=parseInt((0,y.c$)(t.slice(9,13)).substring(2),16),s=(0,y.c$)(t.slice(13,45)),a=t.slice(45,78);switch((0,y.c$)(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":{let e=(0,y.c$)(a);return new tI(tE,(0,k.K)(e),e,n,s,null,i,r,null)}case"0x0488ade4":case"0x04358394 ":if(0!==a[0])break;return new tS(tE,new h.h(a.slice(1)),n,s,null,i,r,null,null)}(0,f.MR)(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(e,t,r){null==e&&(e=""),null==t&&(t=ty),null==r&&(r=ef.wordlist());let n=eA.fromEntropy(ei(16),e,r);return tS.#tS(n.computeSeed(),n).derivePath(t)}static fromMnemonic(e,t){return t||(t=ty),tS.#tS(e.computeSeed(),e).derivePath(t)}static fromPhrase(e,t,r,n){null==t&&(t=""),null==r&&(r=ty),null==n&&(n=ef.wordlist());let i=eA.fromPhrase(e,t,n);return tS.#tS(i.computeSeed(),i).derivePath(r)}static fromSeed(e){return tS.#tS(e,null)}}class tI extends A.J{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(e,t,r,n,i,s,a,o,l){super(t,l),(0,f.gk)(e,tE,"HDNodeVoidWallet"),(0,S.n)(this,{publicKey:r});let c=(0,y.ZG)(ee((0,T.s)(r)),0,4);(0,S.n)(this,{publicKey:r,fingerprint:c,parentFingerprint:n,chainCode:i,path:s,index:a,depth:o})}connect(e){return new tI(tE,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,e)}get extendedKey(){return(0,f.vA)(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),tA((0,y.xW)(["0x0488B21E",tv(this.depth,1),this.parentFingerprint,tv(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return null!=this.path}deriveChild(e){let t=(0,w.WZ)(e,"index");(0,f.MR)(t<=0xffffffff,"invalid index","index",t);let r=this.path;r&&(r+="/"+(0x7fffffff&t),0x80000000&t&&(r+="'"));let{IR:n,IL:i}=tk(t,this.chainCode,this.publicKey,null),s=h.h.addPoints(i,this.publicKey,!0);return new tI(tE,(0,k.K)(s),s,this.fingerprint,(0,y.c$)(n),r,t,this.depth+1,this.provider)}derivePath(e){return tP(this,e)}}function tT(e){try{if(JSON.parse(e).encseed)return!0}catch(e){}return!1}function t_(e,t){let r=JSON.parse(e),n=ts(t),i=(0,g.b)(ta(r,"ethaddr:string!")),s=tn(ta(r,"encseed:string!"));(0,f.MR)(s&&s.length%16==0,"invalid encseed","json",e);let a=(0,y.q5)(eb(n,n,2e3,32,"sha256")).slice(0,16),o=s.slice(0,16),l=s.slice(16),c=new eq(a,o),u=function(e){if(e.length<16)throw TypeError("PKCS#7 invalid length");let t=e[e.length-1];if(t>16)throw TypeError("PKCS#7 padding byte out of range");let r=e.length-t;for(let n=0;n<t;n++)if(e[r+n]!==t)throw TypeError("PKCS#7 invalid padding byte");return new Uint8Array(e.subarray(0,r))}((0,y.q5)(c.decrypt(l))),d="";for(let e=0;e<u.length;e++)d+=String.fromCharCode(u[e]);return{address:i,privateKey:(0,ea.id)(d)}}function tC(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}class tO extends I{constructor(e,t){"string"!=typeof e||e.startsWith("0x")||(e="0x"+e),super("string"==typeof e?new h.h(e):e,t)}connect(e){return new tO(this.signingKey,e)}async encrypt(e,t){let r={address:this.address,privateKey:this.privateKey};return await tb(r,e,{progressCallback:t})}encryptSync(e){return tm({address:this.address,privateKey:this.privateKey},e)}static #tI(e){if((0,f.MR)(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&"en"===e.mnemonic.locale){let t=eA.fromEntropy(e.mnemonic.entropy),r=tS.fromMnemonic(t,e.mnemonic.path);if(r.address===e.address&&r.privateKey===e.privateKey)return r;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}let t=new tO(e.privateKey);return(0,f.MR)(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),t}static async fromEncryptedJson(e,t,r){let n=null;return tc(e)?n=await tf(e,t,r):tT(e)&&(r&&(r(0),await tC(0)),n=t_(e,t),r&&(r(1),await tC(0))),tO.#tI(n)}static fromEncryptedJsonSync(e,t){let r=null;return tc(e)?r=function(e,t){let r=JSON.parse(e),n=ts(t),i=td(r);if("pbkdf2"===i.name){let{salt:e,count:t,dkLen:s,algorithm:a}=i;return tu(r,eb(n,e,t,s,a))}(0,f.vA)("scrypt"===i.name,"cannot be reached","UNKNOWN_ERROR",{params:i});let{salt:s,N:a,r:o,p:l,dkLen:c}=i;return tu(r,tr(n,s,a,o,l,c))}(e,t):tT(e)?r=t_(e,t):(0,f.MR)(!1,"invalid JSON wallet","json","[ REDACTED ]"),tO.#tI(r)}static createRandom(e){let t=tS.createRandom();return e?t.connect(e):t}static fromPhrase(e,t){let r=tS.fromPhrase(e);return t?r.connect(t):r}}},4195:(e,t,r)=>{"use strict";r.d(t,{D:()=>m,l:()=>p});var n,i=r(1138),s=r(2830),a=r(1970);class o extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"}class l extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"}class c extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"}class u extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"}function d(e){return null!=e[Symbol.asyncIterator]}function h(e,t){if(e.byteLength>t)throw new l("Message length too long")}let f=e=>{let t=i.OY(e),r=(0,a.K)(t);return i.lF(e,r),f.bytes=t,r};function p(e,t){let r=(t=t??{}).lengthEncoder??f,n=t?.maxDataLength??4194304;function*i(e){h(e,n);let t=r(e.byteLength);t instanceof Uint8Array?yield t:yield*t,e instanceof Uint8Array?yield e:yield*e}return d(e)?async function*(){for await(let t of e)yield*i(t)}():function*(){for(let t of e)yield*i(t)}()}f.bytes=0,p.single=(e,t)=>{let r=(t=t??{}).lengthEncoder??f;return h(e,t?.maxDataLength??4194304),new s.I(r(e.byteLength),e)},function(e){e[e.LENGTH=0]="LENGTH",e[e.DATA=1]="DATA"}(n||(n={}));let g=e=>{let t=i.D4(e);return g.bytes=i.OY(t),t};function m(e,t){let r=new s.I,i=n.LENGTH,a=-1,h=t?.lengthDecoder??g,f=t?.maxLengthLength??8,p=t?.maxDataLength??4194304;function*m(){for(;r.byteLength>0;){if(i===n.LENGTH)try{if((a=h(r))<0)throw new o("Invalid message length");if(a>p)throw new l("Message length too long");let e=h.bytes;r.consume(e),t?.onLength!=null&&t.onLength(a),i=n.DATA}catch(e){if(e instanceof RangeError){if(r.byteLength>f)throw new c("Message length length too long");break}throw e}if(i===n.DATA){if(r.byteLength<a)break;let e=r.sublist(0,a);r.consume(a),t?.onData!=null&&t.onData(e),yield e,i=n.LENGTH}}}return d(e)?async function*(){for await(let t of e)r.append(t),yield*m();if(r.byteLength>0)throw new u("Unexpected end of input")}():function*(){for(let t of e)r.append(t),yield*m();if(r.byteLength>0)throw new u("Unexpected end of input")}()}g.bytes=0,m.fromReader=(e,t)=>{let r=1;return m(async function*(){for(;;)try{let{done:t,value:n}=await e.next(r);if(!0===t)return;null!=n&&(yield n)}catch(e){if("ERR_UNDER_READ"===e.code)return{done:!0,value:null};throw e}finally{r=1}}(),{...t??{},onLength:e=>{r=e}})}},4259:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyTypedData=t.TypedDataEncoder=t.solidityPackedSha256=t.solidityPackedKeccak256=t.solidityPacked=t.verifyMessage=t.hashMessage=t.dnsEncode=t.namehash=t.isValidName=t.ensNormalize=t.id=t.verifyAuthorization=t.hashAuthorization=void 0;var n=r(558);Object.defineProperty(t,"hashAuthorization",{enumerable:!0,get:function(){return n.hashAuthorization}}),Object.defineProperty(t,"verifyAuthorization",{enumerable:!0,get:function(){return n.verifyAuthorization}});var i=r(6720);Object.defineProperty(t,"id",{enumerable:!0,get:function(){return i.id}});var s=r(2322);Object.defineProperty(t,"ensNormalize",{enumerable:!0,get:function(){return s.ensNormalize}}),Object.defineProperty(t,"isValidName",{enumerable:!0,get:function(){return s.isValidName}}),Object.defineProperty(t,"namehash",{enumerable:!0,get:function(){return s.namehash}}),Object.defineProperty(t,"dnsEncode",{enumerable:!0,get:function(){return s.dnsEncode}});var a=r(6524);Object.defineProperty(t,"hashMessage",{enumerable:!0,get:function(){return a.hashMessage}}),Object.defineProperty(t,"verifyMessage",{enumerable:!0,get:function(){return a.verifyMessage}});var o=r(1432);Object.defineProperty(t,"solidityPacked",{enumerable:!0,get:function(){return o.solidityPacked}}),Object.defineProperty(t,"solidityPackedKeccak256",{enumerable:!0,get:function(){return o.solidityPackedKeccak256}}),Object.defineProperty(t,"solidityPackedSha256",{enumerable:!0,get:function(){return o.solidityPackedSha256}});var l=r(9818);Object.defineProperty(t,"TypedDataEncoder",{enumerable:!0,get:function(){return l.TypedDataEncoder}}),Object.defineProperty(t,"verifyTypedData",{enumerable:!0,get:function(){return l.verifyTypedData}})},4294:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1725),t),i(r(3679),t),i(r(6235),t)},4298:(e,t,r)=>{"use strict";r.d(t,{L:()=>a});var n=r(9608),i=r(9985);class s{readNext;haveNext;ended;nextResult;error;constructor(){this.ended=!1,this.readNext=(0,n.A)(),this.haveNext=(0,n.A)()}[Symbol.asyncIterator](){return this}async next(){if(null==this.nextResult&&await this.haveNext.promise,null==this.nextResult)throw Error("HaveNext promise resolved but nextResult was undefined");let e=this.nextResult;return this.nextResult=void 0,this.readNext.resolve(),this.readNext=(0,n.A)(),e}async throw(e){return this.ended=!0,this.error=e,null!=e&&(this.haveNext.promise.catch(()=>{}),this.haveNext.reject(e)),{done:!0,value:void 0}}async return(){let e={done:!0,value:void 0};return this.ended=!0,this.nextResult=e,this.haveNext.resolve(),e}async push(e,t){await this._push(e,t)}async end(e,t){null!=e?await this.throw(e):await this._push(void 0,t)}async _push(e,t){if(null!=e&&this.ended)throw this.error??Error("Cannot push value onto an ended pushable");for(;null!=this.nextResult;)await this.readNext.promise;null!=e?this.nextResult={done:!1,value:e}:(this.ended=!0,this.nextResult={done:!0,value:void 0}),this.haveNext.resolve(),this.haveNext=(0,n.A)(),await (0,i.W)(this.readNext.promise,t?.signal,t)}}function a(){return new s}},4303:(e,t,r)=>{"use strict";r.d(t,{b:()=>n});let n=Symbol.for("@libp2p/peer-routing")},4306:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zeroPadBytes=t.zeroPadValue=t.stripZerosLeft=t.dataSlice=t.dataLength=t.concat=t.hexlify=t.isBytesLike=t.isHexString=t.getBytesCopy=t.getBytes=void 0;let n=r(7073);function i(e,t,r){if(e instanceof Uint8Array)return r?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let t=new Uint8Array((e.length-2)/2),r=2;for(let n=0;n<t.length;n++)t[n]=parseInt(e.substring(r,r+2),16),r+=2;return t}(0,n.assertArgument)(!1,"invalid BytesLike value",t||"value",e)}function s(e,t){return i(e,t,!1)}function a(e,t){return!!("string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/))&&("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0)}t.getBytes=s,t.getBytesCopy=function(e,t){return i(e,t,!0)},t.isHexString=a,t.isBytesLike=function(e){return a(e,!0)||e instanceof Uint8Array};let o="0123456789abcdef";function l(e){let t=s(e),r="0x";for(let e=0;e<t.length;e++){let n=t[e];r+=o[(240&n)>>4]+o[15&n]}return r}function c(e,t,r){let i=s(e);(0,n.assert)(t>=i.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(i),length:t,offset:t+1});let a=new Uint8Array(t);return a.fill(0),r?a.set(i,t-i.length):a.set(i,0),l(a)}t.hexlify=l,t.concat=function(e){return"0x"+e.map(e=>l(e).substring(2)).join("")},t.dataLength=function(e){return a(e,!0)?(e.length-2)/2:s(e).length},t.dataSlice=function(e,t,r){let i=s(e);return null!=r&&r>i.length&&(0,n.assert)(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:i,length:i.length,offset:r}),l(i.slice(null==t?0:t,null==r?i.length:r))},t.stripZerosLeft=function(e){let t=l(e).substring(2);for(;t.startsWith("00");)t=t.substring(2);return"0x"+t},t.zeroPadValue=function(e,t){return c(e,t,!0)},t.zeroPadBytes=function(e,t){return c(e,t,!1)}},4319:(e,t,r)=>{var n=r(1633).RBTree;function i(e,t,r){this.discrete=!1===e,this.delta=e||.01,this.K=void 0===t?25:t,this.CX=void 0===r?1.1:r,this.centroids=new n(s),this.nreset=0,this.reset()}function s(e,t){return e.mean>t.mean?1:e.mean<t.mean?-1:0}function a(e,t){return e.mean_cumn-t.mean_cumn}function o(e){this.config=e||{},this.mode=this.config.mode||"auto",i.call(this,"cont"===this.mode&&e.delta),this.digest_ratio=this.config.ratio||.9,this.digest_thresh=this.config.thresh||1e3,this.n_unique=0}i.prototype.reset=function(){this.centroids.clear(),this.n=0,this.nreset+=1,this.last_cumulate=0},i.prototype.size=function(){return this.centroids.size},i.prototype.toArray=function(e){var t=[];return e?(this._cumulate(!0),this.centroids.each(function(e){t.push(e)})):this.centroids.each(function(e){t.push({mean:e.mean,n:e.n})}),t},i.prototype.summary=function(){return[(this.discrete?"exact ":"approximating ")+this.n+" samples using "+this.size()+" centroids","min = "+this.percentile(0),"Q1  = "+this.percentile(.25),"Q2  = "+this.percentile(.5),"Q3  = "+this.percentile(.75),"max = "+this.percentile(1)].join("\n")},i.prototype.push=function(e,t){t=t||1,e=Array.isArray(e)?e:[e];for(var r=0;r<e.length;r++)this._digest(e[r],t)},i.prototype.push_centroid=function(e){e=Array.isArray(e)?e:[e];for(var t=0;t<e.length;t++)this._digest(e[t].mean,e[t].n)},i.prototype._cumulate=function(e){if(this.n!==this.last_cumulate&&(e||!this.CX||!(this.CX>this.n/this.last_cumulate))){var t=0;this.centroids.each(function(e){e.mean_cumn=t+e.n/2,t=e.cumn=t+e.n}),this.n=this.last_cumulate=t}},i.prototype.find_nearest=function(e){if(0===this.size())return null;var t=this.centroids.lowerBound({mean:e}),r=null===t.data()?t.prev():t.data();if(r.mean===e||this.discrete)return r;var n=t.prev();return n&&Math.abs(n.mean-e)<Math.abs(r.mean-e)?n:r},i.prototype._new_centroid=function(e,t,r){var n={mean:e,n:t,cumn:r};return this.centroids.insert(n),this.n+=t,n},i.prototype._addweight=function(e,t,r){t!==e.mean&&(e.mean+=r*(t-e.mean)/(e.n+r)),e.cumn+=r,e.mean_cumn+=r/2,e.n+=r,this.n+=r},i.prototype._digest=function(e,t){var r=this.centroids.min(),n=this.centroids.max(),i=this.find_nearest(e);if(i&&i.mean===e)this._addweight(i,e,t);else if(i===r)this._new_centroid(e,t,0);else if(i===n)this._new_centroid(e,t,this.n);else if(this.discrete)this._new_centroid(e,t,i.cumn);else{var s=i.mean_cumn/this.n;Math.floor(4*this.n*this.delta*s*(1-s))-i.n>=t?this._addweight(i,e,t):this._new_centroid(e,t,i.cumn)}this._cumulate(!1),!this.discrete&&this.K&&this.size()>this.K/this.delta&&this.compress()},i.prototype.bound_mean=function(e){var t=this.centroids.upperBound({mean:e}),r=t.prev(),n=r.mean===e?r:t.next();return[r,n]},i.prototype.p_rank=function(e){var t=(Array.isArray(e)?e:[e]).map(this._p_rank,this);return Array.isArray(e)?t:t[0]},i.prototype._p_rank=function(e){if(0!==this.size()){if(e<this.centroids.min().mean)return 0;if(e>this.centroids.max().mean)return 1;this._cumulate(!0);var t=this.bound_mean(e),r=t[0],n=t[1];if(this.discrete)return r.cumn/this.n;var i=r.mean_cumn;return r!==n&&(i+=(e-r.mean)*(n.mean_cumn-r.mean_cumn)/(n.mean-r.mean)),i/this.n}},i.prototype.bound_mean_cumn=function(e){this.centroids._comparator=a;var t=this.centroids.upperBound({mean_cumn:e});this.centroids._comparator=s;var r=t.prev(),n=r&&r.mean_cumn===e?r:t.next();return[r,n]},i.prototype.percentile=function(e){var t=(Array.isArray(e)?e:[e]).map(this._percentile,this);return Array.isArray(e)?t:t[0]},i.prototype._percentile=function(e){if(0!==this.size()){this._cumulate(!0);var t=this.n*e,r=this.bound_mean_cumn(t),n=r[0],i=r[1];return i===n||null===n||null===i?(n||i).mean:this.discrete?t<=n.cumn?n.mean:i.mean:n.mean+(t-n.mean_cumn)*(i.mean-n.mean)/(i.mean_cumn-n.mean_cumn)}},i.prototype.compress=function(){if(!this.compressing){var e=this.toArray();for(this.reset(),this.compressing=!0;e.length>0;)this.push_centroid(function(e){var t=Math.floor(Math.random()*e.length);return e.splice(t,1)[0]}(e));this._cumulate(!0),this.compressing=!1}},o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.push=function(e){i.prototype.push.call(this,e),this.check_continuous()},o.prototype._new_centroid=function(e,t,r){this.n_unique+=1,i.prototype._new_centroid.call(this,e,t,r)},o.prototype._addweight=function(e,t,r){1===e.n&&(this.n_unique-=1),i.prototype._addweight.call(this,e,t,r)},o.prototype.check_continuous=function(){return!("auto"!==this.mode||this.size()<this.digest_thresh)&&this.n_unique/this.size()>this.digest_ratio&&(this.mode="cont",this.discrete=!1,this.delta=this.config.delta||.01,this.compress(),!0)},e.exports={TDigest:i,Digest:o}},4322:(e,t,r)=>{"use strict";r.d(t,{sc:()=>O,Zf:()=>R});var n=r(3084);class i extends n.Vw{constructor(e,t,r,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.buffer=new Uint8Array(e),this.view=(0,n.O8)(this.buffer)}update(e){(0,n.CC)(this),e=(0,n.ZJ)(e),(0,n.DO)(e);let{view:t,buffer:r,blockLen:i}=this,s=e.length;for(let a=0;a<s;){let o=Math.min(i-this.pos,s-a);if(o===i){let t=(0,n.O8)(e);for(;i<=s-a;a+=i)this.process(t,a);continue}r.set(e.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.CC)(this),(0,n.Ht)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:s}=this,{pos:a}=this;t[a++]=128,(0,n.uH)(this.buffer.subarray(a)),this.padOffset>i-a&&(this.process(r,0),a=0);for(let e=a;e<i;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),s=BigInt(0xffffffff),a=Number(r>>i&s),o=Number(r&s),l=4*!!n,c=4*!n;e.setUint32(t+l,a,n),e.setUint32(t+c,o,n)}(r,i-8,BigInt(8*this.length),s),this.process(r,0);let o=(0,n.O8)(e),l=this.outputLen;if(l%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=l/4,u=this.get();if(c>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,u[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:a}=this;return e.destroyed=s,e.finished=i,e.length=n,e.pos=a,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let s=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),a=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),o=BigInt(0x100000000-1),l=BigInt(32),c=(e,t,r)=>e>>>r,u=(e,t,r)=>e<<32-r|t>>>r,d=(e,t,r)=>e>>>r|t<<32-r,h=(e,t,r)=>e<<32-r|t>>>r,f=(e,t,r)=>e<<64-r|t>>>r-32,p=(e,t,r)=>e>>>r-32|t<<64-r;function g(e,t,r,n){let i=(t>>>0)+(n>>>0);return{h:e+r+(i/0x100000000|0)|0,l:0|i}}let m=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),b=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0,y=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),x=(e,t,r,n,i)=>t+r+n+i+(e/0x100000000|0)|0,w=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),v=(e,t,r,n,i,s)=>t+r+n+i+s+(e/0x100000000|0)|0,A=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),E=new Uint32Array(64);class k extends i{constructor(e=32){super(64,e,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)E[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=E[e-15],r=E[e-2],i=(0,n.Ow)(t,7)^(0,n.Ow)(t,18)^t>>>3,s=(0,n.Ow)(r,17)^(0,n.Ow)(r,19)^r>>>10;E[e]=s+E[e-7]+i+E[e-16]|0}let{A:r,B:i,C:s,D:a,E:o,F:l,G:c,H:u}=this;for(let e=0;e<64;e++){var d,h,f,p;let t=u+((0,n.Ow)(o,6)^(0,n.Ow)(o,11)^(0,n.Ow)(o,25))+((d=o)&l^~d&c)+A[e]+E[e]|0,g=((0,n.Ow)(r,2)^(0,n.Ow)(r,13)^(0,n.Ow)(r,22))+((h=r)&(f=i)^h&(p=s)^f&p)|0;u=c,c=l,l=o,o=a+t|0,a=s,s=i,i=r,r=t+g|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,a=a+this.D|0,o=o+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,s,a,o,l,c,u)}roundClean(){(0,n.uH)(E)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,n.uH)(this.buffer)}}let P=function(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){let{h:r,l:a}=function(e,t=!1){return t?{h:Number(e&o),l:Number(e>>l&o)}:{h:0|Number(e>>l&o),l:0|Number(e&o)}}(e[s],t);[n[s],i[s]]=[r,a]}return[n,i]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),S=P[0],I=P[1],T=new Uint32Array(80),_=new Uint32Array(80);class C extends i{constructor(e=64){super(128,e,16,!1),this.Ah=0|a[0],this.Al=0|a[1],this.Bh=0|a[2],this.Bl=0|a[3],this.Ch=0|a[4],this.Cl=0|a[5],this.Dh=0|a[6],this.Dl=0|a[7],this.Eh=0|a[8],this.El=0|a[9],this.Fh=0|a[10],this.Fl=0|a[11],this.Gh=0|a[12],this.Gl=0|a[13],this.Hh=0|a[14],this.Hl=0|a[15]}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:l,El:c,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,g]}set(e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)T[r]=e.getUint32(t),_[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|T[e-15],r=0|_[e-15],n=d(t,r,1)^d(t,r,8)^c(t,r,7),i=h(t,r,1)^h(t,r,8)^u(t,r,7),s=0|T[e-2],a=0|_[e-2],o=d(s,a,19)^f(s,a,61)^c(s,a,6),l=y(i,h(s,a,19)^p(s,a,61)^u(s,a,6),_[e-7],_[e-16]),g=x(l,n,o,T[e-7],T[e-16]);T[e]=0|g,_[e]=0|l}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:a,Cl:o,Dh:l,Dl:A,Eh:E,El:k,Fh:P,Fl:C,Gh:O,Gl:R,Hh:N,Hl:M}=this;for(let e=0;e<80;e++){let t=d(E,k,14)^d(E,k,18)^f(E,k,41),c=h(E,k,14)^h(E,k,18)^p(E,k,41),u=E&P^~E&O,y=w(M,c,k&C^~k&R,I[e],_[e]),x=v(y,N,t,u,S[e],T[e]),B=0|y,D=d(r,n,28)^f(r,n,34)^f(r,n,39),L=h(r,n,28)^p(r,n,34)^p(r,n,39),U=r&i^r&a^i&a,F=n&s^n&o^s&o;N=0|O,M=0|R,O=0|P,R=0|C,P=0|E,C=0|k,({h:E,l:k}=g(0|l,0|A,0|x,0|B)),l=0|a,A=0|o,a=0|i,o=0|s,i=0|r,s=0|n;let j=m(B,L,F);r=b(j,x,D,U),n=0|j}({h:r,l:n}=g(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=g(0|this.Bh,0|this.Bl,0|i,0|s)),({h:a,l:o}=g(0|this.Ch,0|this.Cl,0|a,0|o)),({h:l,l:A}=g(0|this.Dh,0|this.Dl,0|l,0|A)),({h:E,l:k}=g(0|this.Eh,0|this.El,0|E,0|k)),({h:P,l:C}=g(0|this.Fh,0|this.Fl,0|P,0|C)),({h:O,l:R}=g(0|this.Gh,0|this.Gl,0|O,0|R)),({h:N,l:M}=g(0|this.Hh,0|this.Hl,0|N,0|M)),this.set(r,n,i,s,a,o,l,A,E,k,P,C,O,R,N,M)}roundClean(){(0,n.uH)(T,_)}destroy(){(0,n.uH)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let O=(0,n.qj)(()=>new k),R=(0,n.qj)(()=>new C)},4326:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Wordlist=void 0;let n=r(8662);class i{locale;constructor(e){(0,n.defineProperties)(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}t.Wordlist=i},4363:(e,t,r)=>{var n=r(1417);t.operation=function(e){return new n(t.timeouts(e),{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<t.retries;i++)n.push(this.createTimeout(i,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(i,t)),n.sort(function(e,t){return e-t}),n},t.createTimeout=function(e,t){var r=Math.round((t.randomize?Math.random()+1:1)*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return Math.min(r,t.maxTimeout)},t.wrap=function(e,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var i in n=[],e)"function"==typeof e[i]&&n.push(i);for(var s=0;s<n.length;s++){var a=n[s],o=e[a];e[a]=(function(n){var i=t.operation(r),s=Array.prototype.slice.call(arguments,1),a=s.pop();s.push(function(e){!i.retry(e)&&(e&&(arguments[0]=i.mainError()),a.apply(this,arguments))}),i.attempt(function(){n.apply(e,s)})}).bind(e,o),e[a].options=r}}},4423:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;let t={value:e,done:!1};if(this.pullQueue.length){let e=this.pullQueue.shift();e&&e.resolve(t)}else this.pushQueue.push(Promise.resolve(t)),void 0!==this.highWaterMark&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){for(let e of(this.isStopped=!0,this.remove(),this.pullQueue))e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped){if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(let t of this.pullQueue)t.reject(e);this.pullQueue.length=0}else{let t=Promise.reject(e);t.catch(()=>{}),this.pushQueue.push(t)}}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:e=>{let t=this.pushQueue.shift();return t?(void 0!==this.lowWaterMark&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),t):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((e,t)=>{this.pullQueue.push({resolve:e,reject:t})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class n{constructor(e,{highWaterMark:t=100,lowWaterMark:n=1}={}){let i=new r;i.highWaterMark=t,i.lowWaterMark=n,i.removeCallback=e({push:e=>i.push(e),stop:()=>i.stop(),fail:e=>i.fail(e),on:(e,t)=>{i.eventHandlers[e]=t}})||(()=>{}),this[Symbol.asyncIterator]=()=>i[Symbol.asyncIterator](),Object.freeze(this)}}t.EventIterator=n,t.default=n},4453:(e,t,r)=>{"use strict";r.d(t,{id:()=>s});var n=r(3683),i=r(7506);function s(e){return(0,n.S)((0,i.YW)(e))}},4459:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PollingEventSubscriber=t.PollingTransactionSubscriber=t.PollingOrphanSubscriber=t.PollingBlockTagSubscriber=t.OnBlockSubscriber=t.PollingBlockSubscriber=t.getPollingSubscriber=void 0;let n=r(8662);function i(e){return JSON.parse(JSON.stringify(e))}t.getPollingSubscriber=function(e,t){return"block"===t?new s(e):(0,n.isHexString)(t,32)?new c(e,t):void(0,n.assert)(!1,"unsupported polling event","UNSUPPORTED_OPERATION",{operation:"getPollingSubscriber",info:{event:t}})};class s{#G;#V;#eT;#e_;constructor(e){this.#G=e,this.#V=null,this.#eT=4e3,this.#e_=-2}get pollingInterval(){return this.#eT}set pollingInterval(e){this.#eT=e}async #Q(){try{let e=await this.#G.getBlockNumber();if(-2===this.#e_){this.#e_=e;return}if(e!==this.#e_){for(let t=this.#e_+1;t<=e;t++){if(null==this.#V)return;await this.#G.emit("block",t)}this.#e_=e}}catch(e){}null!=this.#V&&(this.#V=this.#G._setTimeout(this.#Q.bind(this),this.#eT))}start(){!this.#V&&(this.#V=this.#G._setTimeout(this.#Q.bind(this),this.#eT),this.#Q())}stop(){this.#V&&(this.#G._clearTimeout(this.#V),this.#V=null)}pause(e){this.stop(),e&&(this.#e_=-2)}resume(){this.start()}}t.PollingBlockSubscriber=s;class a{#G;#Q;#q;constructor(e){this.#G=e,this.#q=!1,this.#Q=e=>{this._poll(e,this.#G)}}async _poll(e,t){throw Error("sub-classes must override this")}start(){!this.#q&&(this.#q=!0,this.#Q(-2),this.#G.on("block",this.#Q))}stop(){this.#q&&(this.#q=!1,this.#G.off("block",this.#Q))}pause(e){this.stop()}resume(){this.start()}}t.OnBlockSubscriber=a;class o extends a{#eC;#eO;constructor(e,t){super(e),this.#eC=t,this.#eO=-2}pause(e){e&&(this.#eO=-2),super.pause(e)}async _poll(e,t){let r=await t.getBlock(this.#eC);null!=r&&(-2===this.#eO?this.#eO=r.number:r.number>this.#eO&&(t.emit(this.#eC,r.number),this.#eO=r.number))}}t.PollingBlockTagSubscriber=o;class l extends a{#C;constructor(e,t){super(e),this.#C=i(t)}async _poll(e,t){throw Error("@TODO")}}t.PollingOrphanSubscriber=l;class c extends a{#eR;constructor(e,t){super(e),this.#eR=t}async _poll(e,t){let r=await t.getTransactionReceipt(this.#eR);r&&t.emit(this.#eR,r)}}t.PollingTransactionSubscriber=c;class u{#G;#C;#V;#q;#e_;constructor(e,t){this.#G=e,this.#C=i(t),this.#V=this.#Q.bind(this),this.#q=!1,this.#e_=-2}async #Q(e){if(-2===this.#e_)return;let t=i(this.#C);t.fromBlock=this.#e_+1,t.toBlock=e;let r=await this.#G.getLogs(t);if(0===r.length){this.#e_<e-60&&(this.#e_=e-60);return}for(let e of r)this.#G.emit(this.#C,e),this.#e_=e.blockNumber}start(){!this.#q&&(this.#q=!0,-2===this.#e_&&this.#G.getBlockNumber().then(e=>{this.#e_=e}),this.#G.on("block",this.#V))}stop(){this.#q&&(this.#q=!1,this.#G.off("block",this.#V))}pause(e){this.stop(),e&&(this.#e_=-2)}resume(){this.start()}}t.PollingEventSubscriber=u},4502:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(307),i=r(4232);function s(e,t){let r=(0,n.$)().normalizeValue(e),s=function(e={}){e.fallback||(e.fallback="base");let t=(0,n.$)(),r=!1,s=t.breakpoints.values.map(({min:t,name:n})=>{let i={breakpoint:n,query:`(min-width: ${t})`,fallback:!r};return n===e.fallback&&(r=!0),i}).filter(({breakpoint:t})=>!!e.breakpoints?.includes(t)),a=s.map(({fallback:e})=>e),o=(function(e,t={}){let{fallback:r=[],ssr:n=!0,getWindow:s}=t,a=function(e,t=[]){let r=(0,i.useRef)(()=>{throw Error("Cannot call an event handler while rendering.")});return(0,i.useInsertionEffect)(()=>{r.current=e}),(0,i.useCallback)((...e)=>r.current?.(...e),t)}(s),o=Array.isArray(e)?e:[e],l=r?.filter(e=>null!=e),[c,u]=(0,i.useState)(()=>o.map((e,t)=>{if(!n){let{media:t,matches:r}=(s?.()??window).matchMedia(e);return{media:t,matches:r}}return{media:e,matches:!!l[t]}}));return(0,i.useEffect)(()=>{let e=a()??window;u(t=>{let r=o.map(t=>{let{media:r,matches:n}=e.matchMedia(t);return{media:r,matches:n}});return t.every((e,t)=>e.matches===r[t].matches&&e.media===r[t].media)?t:r});let t=o.map(t=>e.matchMedia(t)),r=e=>{u(t=>t.slice().map(t=>t.media===e.media?{...t,matches:e.matches}:t))},n=t.map(e=>(function(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch(r){return e.addListener(t),()=>e.removeListener(t)}})(e,r));return()=>n.forEach(e=>e())},[a]),c.map(e=>e.matches)})(s.map(e=>e.query),{fallback:a,ssr:e.ssr}).lastIndexOf(!0);return s[o]?.breakpoint??e.fallback}({breakpoints:Object.keys(r),...t});return r[s]}},4503:(e,t,r)=>{"use strict";r.r(t),r.d(t,{base36:()=>i,base36upper:()=>s});var n=r(8122);let i=(0,n._Q)({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),s=(0,n._Q)({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"})},4546:(e,t,r)=>{"use strict";r.d(t,{Ak:()=>l,UT:()=>w,Xf:()=>y,fH:()=>b,hT:()=>m,u0:()=>o});var n=r(2405),i=r(7551);let s=BigInt(0),a=BigInt(1);function o(e,t){let r=t.negate();return e?r:t}function l(e,t,r){let n="pz"===t?e=>e.pz:e=>e.ez,s=(0,i.pS)(e.Fp,r.map(n));return r.map((e,t)=>e.toAffine(s[t])).map(e.fromAffine)}function c(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function u(e,t){c(e,t);let r=Math.ceil(t/e)+1,i=2**(e-1),s=2**e;return{windows:r,windowSize:i,mask:(0,n.OG)(e),maxNumber:s,shiftBy:BigInt(e)}}function d(e,t,r){let{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r,l=Number(e&i),c=e>>o;l>n&&(l-=s,c+=a);let u=t*n,d=u+Math.abs(l)-1,h=0===l;return{nextN:c,offset:d,isZero:h,isNeg:l<0,isNegF:t%2!=0,offsetF:u}}let h=new WeakMap,f=new WeakMap;function p(e){return f.get(e)||1}function g(e){if(e!==s)throw Error("invalid wNAF")}function m(e,t){return{constTimeNegate:o,hasPrecomputes:e=>1!==p(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>s;)r&a&&(n=n.add(i)),i=i.double(),r>>=a;return n},precomputeWindow(e,r){let{windows:n,windowSize:i}=u(r,t),s=[],a=e,o=a;for(let e=0;e<n;e++){o=a,s.push(o);for(let e=1;e<i;e++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(r,n,i){let s=e.ZERO,a=e.BASE,l=u(r,t);for(let e=0;e<l.windows;e++){let{nextN:t,offset:r,isZero:c,isNeg:u,isNegF:h,offsetF:f}=d(i,e,l);i=t,c?a=a.add(o(h,n[f])):s=s.add(o(u,n[r]))}return g(i),{p:s,f:a}},wNAFUnsafe(r,n,i,a=e.ZERO){let o=u(r,t);for(let e=0;e<o.windows&&i!==s;e++){let{nextN:t,offset:r,isZero:s,isNeg:l}=d(i,e,o);if(i=t,!s){let e=n[r];a=a.add(l?e.negate():e)}}return g(i),a},getPrecomputes(e,t,r){let n=h.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(n=r(n)),h.set(t,n))),n},wNAFCached(e,t,r){let n=p(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=p(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){c(r,t),f.set(e,r),h.delete(e)}}}function b(e,t,r,n){let i=t,o=e.ZERO,l=e.ZERO;for(;r>s||n>s;)r&a&&(o=o.add(i)),n&a&&(l=l.add(i)),i=i.double(),r>>=a,n>>=a;return{p1:o,p2:l}}function y(e,t,r,i){(function(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})})(r,e),function(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}(i,t);let s=r.length,a=i.length;if(s!==a)throw Error("arrays of points and scalars must have equal length");let o=e.ZERO,l=(0,n.dJ)(BigInt(s)),c=1;l>12?c=l-3:l>4?c=l-2:l>0&&(c=2);let u=(0,n.OG)(c),d=Array(Number(u)+1).fill(o),h=Math.floor((t.BITS-1)/c)*c,f=o;for(let e=h;e>=0;e-=c){d.fill(o);for(let t=0;t<a;t++){let n=Number(i[t]>>BigInt(e)&u);d[n]=d[n].add(r[t])}let t=o;for(let e=d.length-1,r=o;e>0;e--)r=r.add(d[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<c;e++)f=f.double()}return f}function x(e,t){if(!t)return(0,i.D0)(e);if(t.ORDER!==e)throw Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,i.jr)(t),t}function w(e,t,r={}){if(!t||"object"!=typeof t)throw Error(`expected valid ${e} CURVE object`);for(let e of["p","n","h"]){let r=t[e];if(!("bigint"==typeof r&&r>s))throw Error(`CURVE.${e} must be positive bigint`)}let n=x(t.p,r.Fp),i=x(t.n,r.Fn);for(let r of["Gx","Gy","a","weierstrass"===e?"b":"d"])if(!n.isValid(t[r]))throw Error(`CURVE.${r} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}},4562:(e,t,r)=>{"use strict";r.d(t,{dU:()=>tu});var n,i,s,a,o,l,c,u,d,h=r(9827),f=r(3204),p=r(458),g=r(4303),m=r(2923),b=r(1436),y=r(6411),x=r(9141),w=r(6676),v=r(9608),A=r(8516);let E=1728e5,k=864e5,P=3e5,S=3e5,I=`${A.Q}-kad-dht`;var T=r(6038),_=r(1970);!function(e){let t;e.codec=()=>(null==t&&(t=(0,T.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.key&&e.key.byteLength>0&&(t.uint32(10),t.bytes(e.key)),null!=e.value&&e.value.byteLength>0&&(t.uint32(18),t.bytes(e.value)),null!=e.timeReceived&&""!==e.timeReceived&&(t.uint32(42),t.string(e.timeReceived)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={key:(0,_.c)(0),value:(0,_.c)(0),timeReceived:""},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.key=e.bytes();break;case 2:n.value=e.bytes();break;case 5:n.timeReceived=e.string();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,T.mH)(t,e.codec()),e.decode=(t,r)=>(0,T.Y8)(t,e.codec(),r)}(n||(n={}));class C{key;value;timeReceived;constructor(e,t,r){if(!(e instanceof Uint8Array))throw Error("key must be a Uint8Array");if(!(t instanceof Uint8Array))throw Error("value must be a Uint8Array");this.key=e,this.value=t,this.timeReceived=r}serialize(){return n.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:function(e){let t=e.getUTCFullYear(),r=String(e.getUTCMonth()+1).padStart(2,"0"),n=String(e.getUTCDate()).padStart(2,"0"),i=String(e.getUTCHours()).padStart(2,"0"),s=String(e.getUTCMinutes()).padStart(2,"0"),a=String(e.getUTCSeconds()).padStart(2,"0"),o=String(1e6*e.getUTCMilliseconds()).padStart(9,"0");return`${t}-${r}-${n}T${i}:${s}:${a}.${o}Z`}(this.timeReceived)}}static deserialize(e){let t=n.decode(e);return new C(t.key,t.value,new Date(t.timeReceived))}static fromDeserialized(e){let t=function(e){let t=RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),r=String(e).trim().match(t);if(null==r)throw Error("Invalid format");let n=parseInt(r[1],10),i=parseInt(r[2],10)-1,s=parseInt(r[3],10),a=parseInt(r[4],10),o=parseInt(r[5],10);return new Date(Date.UTC(n,i,s,a,o,parseInt(r[6],10),parseInt(r[7].slice(0,-6),10)))}(e.timeReceived);if(null==e.key)throw Error("key missing from deserialized object");if(null==e.value)throw Error("value missing from deserialized object");return new C(e.key,e.value,t)}}var O=r(3804);let R=function(e,t){let r=0;if(null!=e[Symbol.asyncIterator])return async function*(){for await(let n of e)yield t(n,r++)}();let n=(0,O.A)(e),{value:i,done:s}=n.next();if(!0===s)return function*(){}();let a=t(i,r++);return"function"==typeof a.then?async function*(){for(let e of(yield await a,n))yield t(e,r++)}():function*(){for(let e of(yield a,n))yield t(e,r++)}()};var N=r(1896),M=r(4113),B=r(6552);class D extends Error{constructor(e="Query error"){super(e),this.name="QueryError"}}class L extends Error{constructor(e="Invalid record"){super(e),this.name="InvalidRecordError"}}class U extends Error{constructor(e="No selector function configured for prefix"){super(e),this.name="MissingSelectorError"}}function F(e,t={}){let r={...e,name:"SEND_QUERY",type:0,messageName:e.type,messageType:e.type};return t.onProgress?.(new CustomEvent("kad-dht:query:send-query",{detail:r})),r}function j(e,t={}){let r={...e,name:"PEER_RESPONSE",type:1,messageName:e.messageType,closer:e.closer??[],providers:e.providers??[]};return t.onProgress?.(new CustomEvent("kad-dht:query:peer-response",{detail:r})),r}function z(e,t={}){let r={...e,name:"FINAL_PEER",type:2};return t.onProgress?.(new CustomEvent("kad-dht:query:final-peer",{detail:r})),r}function H(e,t={}){let r={...e,name:"QUERY_ERROR",type:3};return t.onProgress?.(new CustomEvent("kad-dht:query:query-error",{detail:r})),r}function G(e,t={}){let r={...e,name:"PROVIDER",type:4};return t.onProgress?.(new CustomEvent("kad-dht:query:provider",{detail:r})),r}function $(e,t={}){let r={...e,name:"VALUE",type:5};return t.onProgress?.(new CustomEvent("kad-dht:query:value",{detail:r})),r}function V(e,t={}){let r={...e,name:"DIAL_PEER",type:7};return t.onProgress?.(new CustomEvent("kad-dht:query:dial-peer",{detail:r})),r}!function(e){let t;e.codec=()=>(null==t&&(t=(0,T.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.key&&(t.uint32(10),t.bytes(e.key)),null!=e.value&&(t.uint32(18),t.bytes(e.value)),null!=e.author&&(t.uint32(26),t.bytes(e.author)),null!=e.signature&&(t.uint32(34),t.bytes(e.signature)),null!=e.timeReceived&&(t.uint32(42),t.string(e.timeReceived)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.key=e.bytes();break;case 2:n.value=e.bytes();break;case 3:n.author=e.bytes();break;case 4:n.signature=e.bytes();break;case 5:n.timeReceived=e.string();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,T.mH)(t,e.codec()),e.decode=(t,r)=>(0,T.Y8)(t,e.codec(),r)}(i||(i={})),function(e){e.PUT_VALUE="PUT_VALUE",e.GET_VALUE="GET_VALUE",e.ADD_PROVIDER="ADD_PROVIDER",e.GET_PROVIDERS="GET_PROVIDERS",e.FIND_NODE="FIND_NODE",e.PING="PING"}(s||(s={})),function(e){e[e.PUT_VALUE=0]="PUT_VALUE",e[e.GET_VALUE=1]="GET_VALUE",e[e.ADD_PROVIDER=2]="ADD_PROVIDER",e[e.GET_PROVIDERS=3]="GET_PROVIDERS",e[e.FIND_NODE=4]="FIND_NODE",e[e.PING=5]="PING"}(a||(a={})),(s||(s={})).codec=()=>(0,T.eG)(a),function(e){e.NOT_CONNECTED="NOT_CONNECTED",e.CONNECTED="CONNECTED",e.CAN_CONNECT="CAN_CONNECT",e.CANNOT_CONNECT="CANNOT_CONNECT"}(o||(o={})),function(e){e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.CONNECTED=1]="CONNECTED",e[e.CAN_CONNECT=2]="CAN_CONNECT",e[e.CANNOT_CONNECT=3]="CANNOT_CONNECT"}(l||(l={})),(o||(o={})).codec=()=>(0,T.eG)(l),function(e){let t;e.codec=()=>(null==t&&(t=(0,T.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.id&&e.id.byteLength>0&&(t.uint32(10),t.bytes(e.id)),null!=e.multiaddrs)for(let r of e.multiaddrs)t.uint32(18),t.bytes(r);null!=e.connection&&(t.uint32(24),o.codec().encode(e.connection,t)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={id:(0,_.c)(0),multiaddrs:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.id=e.bytes();break;case 2:if(r.limits?.multiaddrs!=null&&n.multiaddrs.length===r.limits.multiaddrs)throw new T.zH('Decode error - map field "multiaddrs" had too many elements');n.multiaddrs.push(e.bytes());break;case 3:n.connection=o.codec().decode(e);break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,T.mH)(t,e.codec()),e.decode=(t,r)=>(0,T.Y8)(t,e.codec(),r)}(c||(c={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,T.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.type&&0!==a[e.type]&&(t.uint32(8),s.codec().encode(e.type,t)),null!=e.clusterLevel&&(t.uint32(80),t.int32(e.clusterLevel)),null!=e.key&&(t.uint32(18),t.bytes(e.key)),null!=e.record&&(t.uint32(26),t.bytes(e.record)),null!=e.closer)for(let r of e.closer)t.uint32(66),c.codec().encode(r,t);if(null!=e.providers)for(let r of e.providers)t.uint32(74),c.codec().encode(r,t);!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={type:s.PUT_VALUE,closer:[],providers:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.type=s.codec().decode(e);break;case 10:n.clusterLevel=e.int32();break;case 2:n.key=e.bytes();break;case 3:n.record=e.bytes();break;case 8:if(r.limits?.closer!=null&&n.closer.length===r.limits.closer)throw new T.zH('Decode error - map field "closer" had too many elements');n.closer.push(c.codec().decode(e,e.uint32(),{limits:r.limits?.closer$}));break;case 9:if(r.limits?.providers!=null&&n.providers.length===r.limits.providers)throw new T.zH('Decode error - map field "providers" had too many elements');n.providers.push(c.codec().decode(e,e.uint32(),{limits:r.limits?.providers$}));break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,T.mH)(t,e.codec()),e.decode=(t,r)=>(0,T.Y8)(t,e.codec(),r)}(u||(u={}));var q=r(6054);let K={pk:function(e,t){return 0}};var W=r(4892);async function Q(e,t,r){let n=t.key,i=(0,q.d)(n).split("/");if(i.length<3)return;let s=e[i[1].toString()];if(null==s)throw new h.gG(`No validator available for key type "${i[1]}"`);await s(n,t.value,r)}let Z={pk:async(e,t,r)=>{if(!(e instanceof Uint8Array))throw new h.gG('"key" must be a Uint8Array');if(e.byteLength<5)throw new h.gG("Invalid public key record");if("/pk/"!==(0,q.d)(e.subarray(0,4)))throw new h.gG("key was not prefixed with /pk/");let n=(0,W.EZ)(t),i=e.slice(4);if(!(0,B.a)(i,n.toMultihash().bytes))throw new h.gG("public key does not match passed in key")}};var J=r(1680),Y=r(3985),X=r(5943),ee=r(9700),et=r(5766),er=r(4057),en=r(6572),ei=r(1138),es=r(7797),ea=r(9865);let eo=(0,ea.s)("/pk/");function el(e){return{...e,multiaddrs:e.multiaddrs.filter(e=>{let[[t,r]]=e.stringTuples();if(53===t||54===t||55===t)return"localhost"!==r;if(4!==t&&6!==t||null==r)return!1;let n=(0,Y.b)(r);return null==n||!n})}}async function ec(e,t){let r=await en.sha256.digest(e);return t?.signal?.throwIfAborted(),r.digest}async function eu(e,t){return ec(e.toMultihash().bytes,t)}function ed(e,t){return new X.U(`${e}/${(0,q.d)(t,"base32")}`,!1)}function eh(e,t){return new C(e,t,new Date).serialize()}function ef(e){let t=e.toString().split("/"),r=t.pop(),n=t.pop();if(null==r||null==n)throw Error(`incorrectly formatted provider entry key in datastore: ${e.toString()}`);return{cid:ee.TO.createV1(et.code,er.D4((0,ea.s)(n,"base32"))),peerId:(0,J.XL)(r)}}function ep(e,t,r){let n=[e,"string"==typeof t?t:(0,q.d)(t.multihash.bytes,"base32")];return null!=r&&n.push(r.toString()),new X.U(n.join("/"))}function eg(e){return new Date(ei.D4(e))}function em(e,t,r){return async function*(...n){let i=t.queryTime?.timer(r),s=t.errorTime?.timer(r),a=!1;try{t.queries?.increment({[r]:!0}),yield*e(...n)}catch(e){throw a=!0,s?.(),t.errors?.increment({[r]:!0}),e}finally{t.queries?.decrement({[r]:!0}),a||i?.()}}}function eb(e,t,r){return async function(...n){let i=t?.queryTime?.timer(r),s=t?.errorTime?.timer(r),a=!1;try{return t.queries?.increment({[r]:!0}),await e(...n)}catch(e){throw a=!0,s?.(),t.errors?.increment({[r]:!0}),e}finally{t.queries?.decrement({[r]:!0}),a||i?.()}}}class ey{log;components;validators;selectors;peerRouting;queryManager;network;datastorePrefix;constructor(e,t){let{validators:r,selectors:n,peerRouting:i,queryManager:s,network:a,logPrefix:o}=t;this.components=e,this.log=e.logger.forComponent(`${o}:content-fetching`),this.datastorePrefix=`${t.datastorePrefix}/record`,this.validators=r,this.selectors=n,this.peerRouting=i,this.queryManager=s,this.network=a,this.get=e.metrics?.traceFunction("libp2p.kadDHT.get",this.get.bind(this),{optionsIndex:1})??this.get,this.put=e.metrics?.traceFunction("libp2p.kadDHT.put",this.put.bind(this),{optionsIndex:2})??this.put}async getLocal(e,t){this.log("getLocal %b",e);let r=ed(this.datastorePrefix,e);this.log("fetching record for key %k",r);let n=await this.components.datastore.get(r,t);this.log("found %k in local datastore",r);let i=C.deserialize(n);return await Q(this.validators,i,t),i}async *sendCorrectionRecord(e,t,r,n){this.log("sendCorrection for %b",e);let i=eh(e,r);for(let{value:a,from:o}of t){if((0,B.a)(a,r)){this.log("record was ok");continue}if(this.components.peerId.equals(o)){try{let t=ed(this.datastorePrefix,e);this.log(`Storing corrected record for key ${t.toString()}`),await this.components.datastore.put(t,i.subarray(),n)}catch(e){this.log.error("Failed error correcting self",e)}continue}let t=!1,l={type:s.PUT_VALUE,key:e,record:i};for await(let e of this.network.sendRequest(o,l,n))"PEER_RESPONSE"===e.name&&null!=e.record&&(0,B.a)(e.record.value,C.deserialize(i).value)&&(t=!0),yield e;if(!t)throw new D("Could not send correction");this.log.error("Failed error correcting entry")}}async *put(e,t,r){this.log("put key %b value %b",e,t);let n=eh(e,t),i=ed(this.datastorePrefix,e);this.log(`storing record for key ${i.toString()}`),await this.components.datastore.put(i,n.subarray(),r),yield*(0,M.F)(this.peerRouting.getClosestPeers(e,{...r,signal:r.signal}),t=>R(t,t=>async()=>{if("FINAL_PEER"!==t.name)return[t];let i=[],a={type:s.PUT_VALUE,key:e,record:n};for await(let e of(this.log("send put to %p",t.peer.id),this.network.sendRequest(t.peer.id,a,{...r,path:t.path})))i.push(e),"PEER_RESPONSE"===e.name&&(null!=e.record&&(0,B.a)(e.record.value,C.deserialize(n).value)||i.push(H({from:t.peer.id,error:new D("Value not put correctly"),path:e.path},r)));return i}),e=>(0,N.A)(e,{ordered:!1,concurrency:10}),async function*(e){for await(let t of e)yield*t})}async *get(e,t){this.log("get %b",e);let r=[];for await(let n of this.getMany(e,t)){if("VALUE"===n.name){r.push(n);continue}yield n}if(0===r.length)return;let n=r.map(e=>e.value),i=0;try{i=function(e,t,r){if(0===r.length)throw new h.gG("No records given");let n=(0,q.d)(t).split("/");if(n.length<3)throw new h.gG("Record key does not have a selector function");let i=e[n[1].toString()];if(null==i)throw new U(`No selector function configured for key type "${n[1]}"`);return 1===r.length?0:i(t,r)}(this.selectors,e,n)}catch(e){if("InvalidParametersError"!==e.name)throw e}let s=n[i];if(this.log("GetValue %b %b",e,s),null==s)throw new h.m_("Best value was not found");yield*this.sendCorrectionRecord(e,r,s,{...t,path:{index:-1,queued:0,running:0,total:0}}),yield r[i]}async *getMany(e,t={}){this.log("getMany values for %b",e);try{let r=await this.getLocal(e,t);yield $({value:r.value,from:this.components.peerId,path:{index:-1,running:0,queued:0,total:0}},t)}catch(t){this.log("error getting local value for %b",e,t)}let r=this,n=async function*({peer:n,signal:i,path:s}){for await(let a of r.peerRouting.getValueOrPeers(n.id,e,{...t,signal:i,path:s}))yield a,"PEER_RESPONSE"===a.name&&null!=a.record&&(yield $({from:n.id,value:a.record.value,path:s},t))};yield*this.queryManager.run(e,n,t)}}var ex=r(5173),ew=r(2804),ev=r(1643),eA=r(3809);function eE(e){if(null==e.id)throw Error("Invalid peer in message");let t=er.D4(e.id);return{id:(0,J.jD)(t),multiaddrs:(e.multiaddrs??[]).map(e=>(0,eA.HZ)(e))}}class ek{log;components;network;peerRouting;queryManager;routingTable;providers;constructor(e,t){let{network:r,peerRouting:n,queryManager:i,routingTable:s,providers:a,logPrefix:o}=t;this.components=e,this.log=e.logger.forComponent(`${o}:content-routing`),this.network=r,this.peerRouting=n,this.queryManager=i,this.routingTable=s,this.providers=a,this.findProviders=e.metrics?.traceFunction("libp2p.kadDHT.findProviders",this.findProviders.bind(this),{optionsIndex:1,getAttributesFromYieldedValue:(e,t)=>("PROVIDER"===e.name&&(t.providers??=[],t.providers.push(...e.providers.map(e=>e.id.toString()))),t)})??this.findProviders,this.provide=e.metrics?.traceFunction("libp2p.kadDHT.provide",this.provide.bind(this),{optionsIndex:1,getAttributesFromYieldedValue:(e,t)=>("PEER_RESPONSE"===e.name&&"ADD_PROVIDER"===e.messageName&&(t.providers??=[],t.providers.push(e.from.toString())),t)})??this.provide}async *provide(e,t,r={}){var n;this.log("provide %s",e);let i=e.multihash.bytes;await this.providers.addProvider(e,this.components.peerId,r);let a={type:s.ADD_PROVIDER,key:i,providers:[{id:(n={id:this.components.peerId,multiaddrs:t}).id.toMultihash().bytes,multiaddrs:(n.multiaddrs??[]).map(e=>e.bytes),connection:void 0}]},o=0,l=this;async function*c(t){try{for await(let n of(l.log("sending provider record for %s to %p",e,t.peer.id),l.network.sendMessage(t.peer.id,a,{...r,path:t.path})))"PEER_RESPONSE"===n.name&&(l.log("sent provider record for %s to %p",e,t.peer.id),o++),yield n}catch(e){l.log.error("error sending provide record to peer %p",t.peer.id,e),yield H({from:t.peer.id,error:e,path:t.path},r)}}let u=(0,ev.Ny)({objectMode:!0}),d=new ew.o({concurrency:10});d.addEventListener("idle",()=>{u.end()}),d.addEventListener("error",e=>{this.log.error("error publishing provider record to peer - %e",e)}),d.add(async()=>{let e=[];for await(let t of this.peerRouting.getClosestPeers(i,r))u.push(t),"FINAL_PEER"===t.name&&e.push(t);e.forEach(e=>{d.add(async()=>{for await(let t of c(e))u.push(t)}).catch(e=>{this.log.error("error publishing provider record to peer - %e",e)})})}).catch(e=>{u.end(e)}),yield*u,this.log("sent provider records to %d peers",o)}async *findProviders(e,t){let r=this.routingTable.kBucketSize,n=0,i=e.multihash.bytes,a=this;this.log("findProviders %c",e);let o=await this.providers.getProviders(e,t);if(o.length>0){let e=[];for(let n of o.slice(0,r))try{let r=await this.components.peerStore.get(n,t);e.push({id:n,multiaddrs:r.addresses.map(({multiaddr:e})=>e)})}catch(e){if("NotFoundError"!==e.name)throw e;this.log("no peer store entry for %p",n)}if(yield j({from:this.components.peerId,messageType:s.GET_PROVIDERS,providers:e,path:{index:-1,queued:0,running:0,total:0}},t),yield G({from:this.components.peerId,providers:e,path:{index:-1,queued:0,running:0,total:0}},t),(n+=e.length)>=r)return}let l=async function*({peer:e,signal:r,path:n}){let o={type:s.GET_PROVIDERS,key:i};yield*a.network.sendRequest(e.id,o,{...t,signal:r,path:n})},c=new ex.t(o);for await(let s of this.queryManager.run(i,l,t))if(yield s,"PEER_RESPONSE"===s.name){this.log("Found %d provider entries for %c and %d closer peers",s.providers.length,e,s.closer.length);let i=[];for(let e of s.providers)!c.has(e.id)&&(c.add(e.id),i.push(e));if(i.length>0&&(yield G({from:s.from,providers:i,path:s.path},t),(n+=i.length)>=r))return}}}var eP=r(5972),eS=r(7255);class eI extends x.X{log;protocol;running;components;timeout;metrics;constructor(e,t){super(),this.components=e,this.log=e.logger.forComponent(`${t.logPrefix}:network`),this.running=!1,this.protocol=t.protocol,this.timeout=new eP._1({...t.timeout??{},metrics:e.metrics,metricName:`${t.metricsPrefix}_network_message_send_times_milliseconds`}),this.metrics={operations:e.metrics?.registerCounterGroup(`${t.metricsPrefix}_outbound_rpc_requests_total`),errors:e.metrics?.registerCounterGroup(`${t.metricsPrefix}_outbound_rpc_errors_total`)},this.sendRequest=e.metrics?.traceFunction("libp2p.kadDHT.sendRequest",this.sendRequest.bind(this),{optionsIndex:2,getAttributesFromArgs:([e,t],r)=>({...r,to:e.toString(),"message type":`${t.type}`}),getAttributesFromYieldedValue:(e,t)=>("PEER_RESPONSE"===e.name&&(e.providers.length>0&&e.providers.forEach((e,r)=>{t[`providers-${r}`]=e.id.toString()}),e.closer.length>0&&e.closer.forEach((e,r)=>{t[`closer-${r}`]=e.id.toString()})),t)})??this.sendRequest,this.sendMessage=e.metrics?.traceFunction("libp2p.kadDHT.sendMessage",this.sendMessage.bind(this),{optionsIndex:2,getAttributesFromArgs:([e,t],r)=>({...r,to:e.toString(),"message type":`${t.type}`}),getAttributesFromYieldedValue:(e,t)=>("PEER_RESPONSE"===e.name&&(e.providers.length>0&&e.providers.forEach((e,r)=>{t[`providers-${r}`]=e.id.toString()}),e.closer.length>0&&e.closer.forEach((e,r)=>{t[`closer-${r}`]=e.id.toString()})),t)})??this.sendMessage}async start(){!this.running&&(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async *sendRequest(e,t,r){let n;if(!this.running)return;let i=t.type;if(null==i)throw new h.gG("Message type was missing");let s=this.timeout.getTimeoutSignal(r);r={...r,signal:s};try{this.metrics.operations?.increment({[i]:!0}),this.log("dialling %p",e),yield V({peer:e,path:r.path},r);let s=await this.components.connectionManager.openConnection(e,r);n=await s.newStream(this.protocol,r),this.log("sending %s to %p",t.type,e),yield F({to:e,type:i,path:r.path},r);let a=await this._writeReadMessage(n,t,r);n.close(r).catch(t=>{this.log.error("error closing stream to %p",e,t),n?.abort(t)}),yield j({from:e,messageType:a.type,closer:a.closer.map(eE),providers:a.providers.map(eE),record:null==a.record?void 0:C.deserialize(a.record),path:r.path},r)}catch(s){this.metrics.errors?.increment({[i]:!0}),n?.abort(s),r.signal?.aborted!==!0&&this.log.error("could not send %s to %p - %e",t.type,e,s),yield H({from:e,error:s,path:r.path},r)}finally{this.timeout.cleanUp(s)}}async *sendMessage(e,t,r){let n;if(!this.running)return;let i=t.type;if(null==i)throw new h.gG("Message type was missing");let s=this.timeout.getTimeoutSignal(r);r={...r,signal:s};try{this.metrics.operations?.increment({[i]:!0}),this.log("dialling %p",e),yield V({peer:e,path:r.path},r);let s=await this.components.connectionManager.openConnection(e,r);n=await s.newStream(this.protocol,r),this.log("sending %s to %p",t.type,e),yield F({to:e,type:i,path:r.path},r),await this._writeMessage(n,t,r),n.close(r).catch(t=>{this.log.error("error closing stream to %p",e,t),n?.abort(t)}),yield j({from:e,messageType:i,path:r.path},r)}catch(t){this.metrics.errors?.increment({[i]:!0}),n?.abort(t),yield H({from:e,error:t,path:r.path},r)}finally{this.timeout.cleanUp(s)}}async _writeMessage(e,t,r){let n=(0,eS.z)(e);await n.write(t,u,r)}async _writeReadMessage(e,t,r){let n=(0,eS.z)(e);await n.write(t,u,r);let i=await n.read(u,r);return i.closer.forEach(e=>{this.safeDispatchEvent("peer",{detail:eE(e)})}),i.providers.forEach(e=>{this.safeDispatchEvent("peer",{detail:eE(e)})}),i}}var eT=r(3256);function e_(e,t){if(e.length!==t.length)throw Error("Inputs should have the same length");let r=(0,_.K)(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return(0,eT.o)(r)}function eC(e,t){if(e.byteLength!==t.byteLength)throw Error("Inputs should have the same length");for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}class eO{originDhtKey;capacity;peerDistances;constructor(e,t){this.originDhtKey=e,this.capacity=t,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return[...this.peerDistances]}async add(e,t={index:-1,queued:0,running:0,total:0},r){let n=await eu(e.id,r);this.addWithKadId(e,n,t)}addWithKadId(e,t,r={index:-1,queued:0,running:0,total:0}){if(null!=this.peerDistances.find(t=>t.peer.id.equals(e.id)))return;let n={peer:e,distance:e_(this.originDhtKey,t),path:r};if(this.peerDistances.length===this.capacity){let e=this.peerDistances[this.peerDistances.length-1];if(null!=e&&-1!==eC(n.distance,e.distance))return}let i=!1;for(let e=0;e<this.peerDistances.length;e++){let t=eC(this.peerDistances[e].distance,n.distance);if(0===t||1===t){i=!0,this.peerDistances.splice(e,0,n);break}}i||this.peerDistances.push(n),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async isCloser(e,t){return 0===this.length||-1===eC(e_(await eu(e,t),this.originDhtKey),this.peerDistances[this.peerDistances.length-1].distance)}async anyCloser(e,t){return 0!==e.length&&Promise.any(e.map(async e=>this.isCloser(e,t)))}}class eR{log;routingTable;network;validators;queryManager;components;constructor(e,t){this.routingTable=t.routingTable,this.network=t.network,this.validators=t.validators,this.queryManager=t.queryManager,this.components=e,this.log=e.logger.forComponent(`${t.logPrefix}:peer-routing`),this.findPeer=e.metrics?.traceFunction("libp2p.kadDHT.findPeer",this.findPeer.bind(this),{optionsIndex:1})??this.findPeer,this.getClosestPeers=e.metrics?.traceFunction("libp2p.kadDHT.getClosestPeers",this.getClosestPeers.bind(this),{optionsIndex:1})??this.getClosestPeers}async findPeerLocal(e,t){let r;let n=await this.routingTable.find(e,t);if(null!=n){this.log("findPeerLocal found %p in routing table",e);try{r=await this.components.peerStore.get(n,t)}catch(e){if("NotFoundError"!==e.name)throw e}}if(null==r)try{r=await this.components.peerStore.get(e,t)}catch(e){if("NotFoundError"!==e.name)throw e}if(null!=r)return this.log("findPeerLocal found %p in peer store",e),{id:r.id,multiaddrs:r.addresses.map(e=>e.multiaddr)}}async *_getValueSingle(e,t,r){let n={type:s.GET_VALUE,key:t};yield*this.network.sendRequest(e,n,r)}async *getPublicKeyFromNode(e,t={}){let r=(0,es.x)([eo,e.toMultihash().bytes]),n={index:-1,queued:0,running:0,total:0};for await(let i of this._getValueSingle(e,r,{...t,path:n}))if(yield i,"PEER_RESPONSE"===i.name&&null!=i.record){let r=(0,W.EZ)(i.record.value),s=(0,J.sR)(r);if(!s.equals(e))throw new h.O7("public key does not match id");if(null==s.publicKey)throw new h.O7("public key missing");yield $({from:e,value:i.record.value,path:n},t)}throw new D(`Node not responding with its public key: ${e.toString()}`)}async *findPeer(e,t={}){if(this.log("findPeer %p",e),!1!==t.useCache){let r=await this.findPeerLocal(e,t);if(null!=r){this.log("found local"),yield z({from:this.components.peerId,peer:r,path:{index:-1,queued:0,running:0,total:0}},t);return}}let r=!1;if(!1!==t.useNetwork){let n=this,i=async function*({peer:r,signal:i,path:a}){let o={type:s.FIND_NODE,key:e.toMultihash().bytes};for await(let s of n.network.sendRequest(r.id,o,{...t,signal:i,path:a}))if(yield s,"PEER_RESPONSE"===s.name){let r=s.closer.find(t=>t.id.equals(e));null!=r&&(yield z({from:s.from,peer:r,path:s.path},t))}};for await(let n of this.queryManager.run(e.toMultihash().bytes,i,t))"FINAL_PEER"===n.name&&(r=!0),yield n}if(!r)throw new h.m_("Not found")}async *getClosestPeers(e,t={}){this.log("getClosestPeers to %b",e);let r=new eO(await ec(e,t),this.routingTable.kBucketSize),n=this,i=async function*({peer:i,path:a,peerKadId:o,signal:l}){n.log("getClosestPeers asking %p",i.id);let c={type:s.FIND_NODE,key:e};yield*n.network.sendRequest(i.id,c,{...t,signal:l,path:a}),r.addWithKadId(i,o,a)};for(let{peer:s,path:a}of(yield*this.queryManager.run(e,i,t),this.log("found %d peers close to %b",r.length,e),r.peers))try{if(0===s.multiaddrs.length&&(s=await n.components.peerStore.getInfo(s.id,t)),0===s.multiaddrs.length)continue;yield z({from:this.components.peerId,peer:await n.components.peerStore.getInfo(s.id,t),path:{index:a.index,queued:0,running:0,total:0}},t)}catch{continue}}async *getValueOrPeers(e,t,r){for await(let n of this._getValueSingle(e,t,r)){if("PEER_RESPONSE"===n.name&&null!=n.record)try{await this._verifyRecordOnline(n.record,r)}catch(t){let e="invalid record received, discarded";this.log(e),yield H({from:n.from,error:new D(e),path:r.path},r);continue}yield n}}async _verifyRecordOnline(e,t){if(null==e.timeReceived)throw new L("invalid record received");await Q(this.validators,new C(e.key,e.value,e.timeReceived),t)}async getClosestPeersOffline(e,t){let r=[];try{let n=er.D4(e),i=(0,J.jD)(n),s=await this.components.peerStore.get(i,t);r.push({id:s.id,multiaddrs:s.addresses.map(({multiaddr:e})=>e)})}catch{}let n=await ec(e,t);for(let e of this.routingTable.closestPeers(n,t))try{r.push(await this.components.peerStore.getInfo(e,t))}catch(e){if("NotFoundError"!==e.name)throw e}return r.length>0?this.log("getClosestPeersOffline returning the %d closest peer(s) %b we know",r.length,e):this.log("getClosestPeersOffline could not any peers close to %b with %d peers in the routing table",e,this.routingTable.size),r}}var eN=r(603);class eM{log;datastore;datastorePrefix;constructor(e,t){this.log=e.logger.forComponent(`${t.logPrefix}:providers`),this.datastorePrefix=`${t.datastorePrefix}/provider`,this.datastore=e.datastore}async addProvider(e,t,r){this.log.trace("%p provides %s",t,e),await this.writeProviderEntry(e,t,r)}async removeProvider(e,t,r){let n=ep(this.datastorePrefix,e,t);this.log.trace("%p no longer provides %s",t,e),await this.datastore.delete(n,r)}async getProviders(e,t){this.log.trace("get providers for %c",e);let r=await this.loadProviders(e,t);return this.log.trace("got %d providers for %c",r.size,e),[...r.keys()]}async writeProviderEntry(e,t,r){let n=ep(this.datastorePrefix,e,t),i=ei.lF(r?.time?.getTime()??Date.now());await this.datastore.put(n,i,r)}async loadProviders(e,t){let r=new eN.j,n=ep(this.datastorePrefix,e);for await(let e of this.datastore.query({prefix:n.toString()},t)){let{peerId:t}=ef(e.key);r.set(t,eg(e.value))}return r}}var eB=r(3366),eD=r(8934),eL=r(7905),eU=r(6047);let eF=e=>{let t=e.addEventListener||e.on||e.addListener,r=e.removeEventListener||e.off||e.removeListener;if(!t||!r)throw TypeError("Emitter is not compatible");return{addListener:t.bind(e),removeListener:r.bind(e)}};var ej=r(9985);async function*ez(e){let{key:t,startingPeers:r,ourPeerId:n,query:i,alpha:s,path:a,numPaths:o,log:l,peersSeen:c,connectionManager:u,signal:d}=e,f=(0,ev.Ny)({objectMode:!0}),p=new ew.o({concurrency:s,sort:(e,t)=>eC(e.options.distance,t.options.distance)});p.addEventListener("idle",()=>{f.push(function(e,t={}){let r={...e,name:"PATH_ENDED",type:8};return t.onProgress?.(new CustomEvent("kad-dht:query:path-ended",{detail:r})),r}({path:{index:a,queued:p.queued,running:p.running,total:p.size}},e)),f.end()}),p.addEventListener("error",e=>{l.error("error during query - %e",e.detail)});let g=()=>{p.abort(),f.end(new h.lc)};d.addEventListener("abort",g);try{let s=await ec(t,{signal:d});await Promise.all(r.map(async r=>{!function r(h,g){if(null==h)return;c.add(h.id.toMultihash().bytes);let m=e_(g,s);p.add(async()=>{try{for await(let b of i({...e,key:t,peer:h,path:{index:a,queued:p.queued,running:p.running,total:p.size},numPaths:o,peerKadId:g,signal:d})){if("PEER_RESPONSE"===b.name)for(let e of b.closer){if(c.has(e.id.toMultihash().bytes)){l("already seen %p in query",e.id);continue}if(n.equals(e.id)){l("not querying ourselves");continue}if(!await u.isDialable(e.multiaddrs)){l("not querying undialable peer");continue}let i=await eu(e.id,{signal:d}),a=e_(i,s);if(-1!==eC(a,m)){l("skipping %p as they are not closer to %b than %p",e.id,t,h);continue}l("querying closer peer %p",e.id),r(e,i)}f.push({...b,path:{index:a,queued:p.queued,running:p.running,total:p.size}})}}catch(t){f.push(H({from:h.id,error:t,path:{index:a,queued:p.queued,running:p.running-1,total:p.size-1}},e))}},{distance:m}).catch(e=>{l.error("error during query - %e",e)})}({id:r,multiaddrs:[]},await eu(r,{signal:d}))})),yield*f}finally{d.removeEventListener("abort",g)}}class eH{disjointPaths;alpha;shutDownController;running;logger;peerId;connectionManager;routingTable;initialQuerySelfHasRun;logPrefix;allowQueryWithZeroPeers;constructor(e,t){this.logPrefix=t.logPrefix,this.disjointPaths=t.disjointPaths??20,this.alpha=t.alpha??10,this.initialQuerySelfHasRun=t.initialQuerySelfHasRun,this.routingTable=t.routingTable,this.logger=e.logger,this.peerId=e.peerId,this.connectionManager=e.connectionManager,this.allowQueryWithZeroPeers=t.allowQueryWithZeroPeers??!1,this.shutDownController=new AbortController,(0,w.k)(1/0,this.shutDownController.signal),this.running=!1}isStarted(){return this.running}async start(){!this.running&&(this.running=!0,this.shutDownController=new AbortController,(0,w.k)(1/0,this.shutDownController.signal))}async stop(){this.running=!1,this.shutDownController.abort()}async *run(e,t,r={}){if(!this.running)throw Error("QueryManager not started");if(null==r.signal){let e=AbortSignal.timeout(18e4);(0,w.k)(1/0,e),r={...r,signal:e}}let n=new AbortController,i=(0,eD.J)([this.shutDownController.signal,n.signal,r.signal]);(0,w.k)(1/0,i,n.signal);let s=this.logger.forComponent(`${this.logPrefix}:query:`+(0,q.d)(e,"base58btc")),a=!1;try{0!==this.routingTable.size||this.allowQueryWithZeroPeers||(s("routing table was empty, waiting for some peers before running%s query",!0===r.isSelfQuery?" self":""),await function(e,t,r){"function"==typeof r&&(r={filter:r});let n=function(e,t,r){let n;let i=new Promise((i,s)=>{if(!((r={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...r}).count>=0&&(r.count===Number.POSITIVE_INFINITY||Number.isInteger(r.count))))throw TypeError("The `count` option should be at least 0 or more");r.signal?.throwIfAborted();let a=[t].flat(),o=[],{addListener:l,removeListener:c}=eF(e),u=(...e)=>{let t=r.multiArgs?e:e[0];(!r.filter||r.filter(t))&&(o.push(t),r.count===o.length&&(n(),i(o)))},d=e=>{n(),s(e)};for(let e of(n=()=>{for(let e of a)c(e,u);for(let e of r.rejectionEvents)c(e,d)},a))l(e,u);for(let e of r.rejectionEvents)l(e,d);r.signal&&r.signal.addEventListener("abort",()=>{d(r.signal.reason)},{once:!0}),r.resolveImmediately&&i(o)});if(i.cancel=n,"number"==typeof r.timeout){let e=(0,eU.Ay)(i,{milliseconds:r.timeout});return e.cancel=n,e}return i}(e,t,r={...r,count:1,resolveImmediately:!1}),i=n.then(e=>e[0]);return i.cancel=n.cancel,i}(this.routingTable,"peer:add",{signal:i,filter:e=>!this.peerId.equals(e.detail)}),s("routing table has peers, continuing with%s query",!0===r.isSelfQuery?" self":"")),!0!==r.isSelfQuery&&null!=this.initialQuerySelfHasRun&&(s("waiting for initial self query before continuing"),await (0,ej.W)(this.initialQuerySelfHasRun.promise,i),this.initialQuerySelfHasRun=void 0),s("query:start");let n=await ec(e,{signal:i}),o=this.routingTable.closestPeers(n,{count:this.routingTable.kBucketSize}),l=o.sort(()=>Math.random()>.5?1:-1).reduce((e,t,r)=>(e[r%this.disjointPaths].push(t),e),Array(this.disjointPaths).fill(0).map(()=>[])).filter(e=>e.length>0);if(0===o.length){s.error("running query with no peers");return}let c=(0,eB.O)(1024),u=l.map((n,a)=>ez({...r,key:e,startingPeers:n,ourPeerId:this.peerId,signal:i,query:t,path:a,numPaths:l.length,alpha:this.alpha,log:s,peersSeen:c,onProgress:r.onProgress,connectionManager:this.connectionManager}));for await(let e of(0,eL.A)(...u)){if("QUERY_ERROR"===e.name&&s.error("query error",e.error),"PEER_RESPONSE"===e.name)for(let t of[...e.closer,...e.providers])await this.connectionManager.isDialable(t.multiaddrs,{signal:i})&&await this.routingTable.add(t.id,{signal:i});i.throwIfAborted(),yield e}a=!0}catch(e){if(this.running)throw e}finally{a||(s("query exited early"),n.abort()),i.clear(),s("query finished")}}}let eG=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{let t=0;for await(let r of e)t++;return t})();{let t=0;for(let r of e)t++;return t}};var e$=r(7396);class eV{log;peerId;peerRouting;events;count;interval;initialInterval;queryTimeout;running;timeoutId;controller;initialQuerySelfHasRun;querySelfPromise;constructor(e,t){this.peerId=e.peerId,this.log=e.logger.forComponent(`${t.logPrefix}:query-self`),this.events=e.events,this.running=!1,this.peerRouting=t.peerRouting,this.count=t.count??20,this.interval=t.interval??P,this.initialInterval=t.initialInterval??1e3,this.queryTimeout=t.queryTimeout??5e3,this.initialQuerySelfHasRun=t.initialQuerySelfHasRun,this.querySelf=eb(this.querySelf.bind(this),t.operationMetrics,"SELF_QUERY")}isStarted(){return this.running}start(){!this.running&&(this.running=!0,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.querySelf().catch(e=>{this.log.error("error running self-query",e)})},this.initialInterval))}stop(){this.running=!1,null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=this.controller&&this.controller.abort()}async querySelf(){if(!this.running){this.log("skip self-query because we are not started");return}if(null!=this.querySelfPromise)return this.log("joining existing self query"),this.querySelfPromise.promise;if(this.querySelfPromise=(0,v.A)(),this.running){this.controller=new AbortController;let e=[this.controller.signal];if(null==this.initialQuerySelfHasRun){let t=AbortSignal.timeout(this.queryTimeout);(0,w.k)(1/0,t),e.push(t)}let t=(0,eD.J)(e);(0,w.k)(1/0,t,this.controller.signal);try{this.log("run self-query, look for %d peers timing out after %dms",this.count,this.queryTimeout);let e=Date.now(),r=await (0,M.F)(this.peerRouting.getClosestPeers(this.peerId.toMultihash().bytes,{signal:t,isSelfQuery:!0}),e=>(0,e$.A)(e,this.count),async e=>eG(e));t?.throwIfAborted();let n=Date.now()-e;this.log("self-query found %d peers in %dms",r,n),this.events.dispatchEvent(new CustomEvent("kad-dht:query:self",{detail:{peers:r,duration:n}}))}catch(e){this.log.error("self-query error",e)}finally{t.clear(),null!=this.initialQuerySelfHasRun&&(this.initialQuerySelfHasRun.resolve(),this.initialQuerySelfHasRun=void 0)}}this.querySelfPromise.resolve(),this.querySelfPromise=void 0,this.running&&(this.timeoutId=setTimeout(()=>{this.querySelf().catch(e=>{this.log.error("error running self-query",e)})},this.interval))}}class eq extends x.X{log;reprovideQueue;maxQueueSize;datastore;timeout;reprovideTimeout;running;shutdownController;reprovideThreshold;contentRouting;datastorePrefix;addressManager;validity;interval;peerId;constructor(e,t){super(),this.log=e.logger.forComponent(`${t.logPrefix}:reprovider`),this.peerId=e.peerId,this.reprovideQueue=new ew.o({concurrency:t.concurrency??10,metrics:e.metrics,metricName:`${t.metricsPrefix}_reprovide_queue`}),this.reprovideTimeout=new eP._1({...t.timeout??{},metrics:e.metrics,metricName:`${t.metricsPrefix}_reprovide_timeout_milliseconds`}),this.datastore=e.datastore,this.addressManager=e.addressManager,this.datastorePrefix=`${t.datastorePrefix}/provider`,this.reprovideThreshold=t.threshold??k,this.maxQueueSize=t.maxQueueSize??16384,this.validity=t.validity??E,this.interval=t.interval??36e5,this.contentRouting=t.contentRouting,this.running=!1,this.reprovide=eb(this.reprovide.bind(this),t.operationMetrics,"PROVIDE")}start(){!this.running&&(this.running=!0,this.shutdownController=new AbortController,(0,w.k)(1/0,this.shutdownController.signal),this.timeout=setTimeout(()=>{this.cleanUp({signal:AbortSignal.timeout(36e5)}).catch(e=>{this.log.error("error running reprovide/cleanup - %e",e)})},this.interval))}stop(){this.running=!1,this.reprovideQueue.clear(),clearTimeout(this.timeout),this.shutdownController?.abort()}async cleanUp(e){try{for await(let t of(this.safeDispatchEvent("reprovide:start"),this.datastore.query({prefix:this.datastorePrefix},e)))try{let{cid:r,peerId:n}=ef(t.key),i=eg(t.value).getTime(),s=i+this.validity,a=Date.now(),o=a>s;this.log.trace("comparing: %d < %d = %s %s",i,a-this.validity,o,o?"(expired)":""),o&&await this.datastore.delete(t.key,e),this.peerId.equals(n)&&a-s<this.reprovideThreshold&&this.queueReprovide(r).catch(e=>{this.log.error("could not reprovide %c - %e",r,e)})}catch(e){this.log.error("error processing datastore key %s - %e",t.key,e.message)}this.log("reprovide/cleanup successful")}finally{this.safeDispatchEvent("reprovide:end"),this.running&&(this.timeout=setTimeout(()=>{this.cleanUp({signal:AbortSignal.timeout(36e5)}).catch(e=>{this.log.error("error running re-provide - %e",e)})},this.interval))}}async queueReprovide(e,t){if(!this.running)return;this.log.trace("waiting for queue capacity before adding %c to re-provide queue",e),await this.reprovideQueue.onSizeLessThan(this.maxQueueSize,t);let r=this.reprovideQueue.queue.find(t=>t.options.cid.equals(e));if(null!=r)return this.log.trace("not adding %c to re-provide queue - already in queue",e),r.join();this.log.trace("adding %c to re-provide queue",e),this.reprovideQueue.add(async t=>{if(t.signal?.throwIfAborted(),!this.running)return;this.log.trace("re-providing %c",e);let r=this.reprovideTimeout.getTimeoutSignal(t);try{await this.reprovide(t.cid,t)}finally{this.reprovideTimeout.cleanUp(r)}this.log.trace("re-provided %c",e)},{signal:this.shutdownController?.signal,cid:e}).catch(t=>{this.log.error("could not re-provide key %c - %e",e,t)})}async reprovide(e,t){await (0,y.A)(this.contentRouting.provide(e,this.addressManager.getAddresses(),t))}}var eK=r(6264);class eW{routingTable;components;closestPeers;newPeers;refreshInterval;peerSetSize;timeout;closeTagName;closeTagValue;log;running;constructor(e,t){this.components=e,this.log=e.logger.forComponent(`${t.logPrefix}:routing-table`),this.routingTable=t.routingTable,this.refreshInterval=t.refreshInterval??5e3,this.peerSetSize=t.peerSetSize??20,this.closeTagName=t.closeTagName??"kad-close",this.closeTagValue=t.closeTagValue??50,this.closestPeers=new ex.t,this.onPeerPing=this.onPeerPing.bind(this),this.running=!1}async start(){if(this.running)return;this.running=!0;let e=await eu(this.components.peerId);this.newPeers=new eO(e,this.peerSetSize),this.routingTable.addEventListener("peer:ping",this.onPeerPing),this.timeout=setInterval(()=>{this.updatePeerTags().catch(e=>{this.log.error("error updating peer tags - %e",e)})},this.refreshInterval)}stop(){this.running=!1,this.routingTable.removeEventListener("peer:ping",this.onPeerPing),clearTimeout(this.timeout)}onPeerPing(e){this.newPeers?.add({id:e.detail,multiaddrs:[]}).catch(e=>{this.log.error("error adding peer to distance list - %e",e)})}async updatePeerTags(){let e=new ex.t(this.newPeers?.peers.map(({peer:e})=>e.id)),t=e.difference(this.closestPeers),r=this.closestPeers.difference(e);this.closestPeers=e,await Promise.all([...[...t].map(async e=>{await this.components.peerStore.merge(e,{tags:{[this.closeTagName]:{value:this.closeTagValue},[I]:{value:1}}})}),...[...r].map(async e=>{await this.components.peerStore.merge(e,{tags:{[this.closeTagName]:void 0,[I]:void 0}})})])}}var eQ=r(7952);function eZ(e){return Array.isArray(e?.peers)}class eJ{peerId;root;localPeer;prefixLength;splitThreshold;kBucketSize;numberOfNodesToPing;lastPingThreshold;ping;verify;onAdd;onRemove;onMove;addingPeerMap;constructor(e,t){this.peerId=e.peerId,this.prefixLength=t.prefixLength??eX,this.kBucketSize=t.kBucketSize??eY,this.splitThreshold=t.splitThreshold??this.kBucketSize,this.numberOfNodesToPing=t.numberOfOldContactsToPing??e0,this.lastPingThreshold=t.lastPingThreshold??e2,this.ping=t.ping,this.verify=t.verify,this.onAdd=t.onAdd,this.onRemove=t.onRemove,this.addingPeerMap=(0,eQ.Z)({name:`${t.metricsPrefix}_adding_peer_map`,metrics:e.metrics}),this.root={prefix:"",depth:0,peers:[]}}async start(){await this.addSelfPeer(this.peerId)}stop(){this.addingPeerMap.clear(),this.root={prefix:"",depth:0,peers:[]}}async addSelfPeer(e,t){this.localPeer={peerId:e,kadId:await eu(e,t),lastPing:Date.now()}}async add(e,t){let r={peerId:e,kadId:await eu(e,t),lastPing:0},n=this.addingPeerMap.get(e);if(null!=n)return n;try{let n=this._add(r,t);this.addingPeerMap.set(e,n),await n}finally{this.addingPeerMap.delete(e)}}async _add(e,t){let r=this._determineBucket(e.kadId);if(this._indexOf(r,e.kadId)>-1)return;if(r.peers.length===this.splitThreshold&&r.depth<this.prefixLength){await this._split(r,t),await this._add(e,t);return}if(r.peers.length<this.kBucketSize){var n,i;if(n=e,i=this.lastPingThreshold,!(n.lastPing<Date.now()-i)){r.peers.push(e),await this.onAdd?.(e,r,t);return}await this.verify(e,t)&&(e.lastPing=Date.now(),await this._add(e,t));return}let s=r.peers.filter(e=>!(e.peerId.equals(this.localPeer?.peerId)||e.lastPing>Date.now()-this.lastPingThreshold)).sort((e,t)=>e.lastPing<t.lastPing?-1:+(e.lastPing>t.lastPing)).slice(0,this.numberOfNodesToPing),a=!1;for await(let e of this.ping(s,t))a=!0,await this.remove(e.kadId,t);a&&await this._add(e,t)}*closest(e,t){let r=new eO(e,t?.count??this.kBucketSize);for(let e of this.toIterable())t?.exclude?.some(t=>t.equals(e.peerId))!==!0&&r.addWithKadId({id:e.peerId,multiaddrs:[]},e.kadId);yield*R(r.peers,({peer:e})=>e.id)}count(){return function e(t){if(eZ(t))return t.peers.length;let r=0;return null!=t.left&&(r+=e(t.left)),null!=t.right&&(r+=e(t.right)),r}(this.root)}get(e){let t=this._determineBucket(e),r=this._indexOf(t,e);return t.peers[r]}async remove(e,t){let r=this._determineBucket(e),n=this._indexOf(r,e);if(n>-1){let e=r.peers.splice(n,1)[0];await this.onRemove?.(e,r,t)}}*toIterable(){yield*function* e(t){if(eZ(t)){yield*t.peers;return}yield*e(t.left),yield*e(t.right)}(this.root)}distance(e,t){return BigInt("0x"+(0,q.d)(e_(e,t),"base16"))}_determineBucket(e){let t=(0,q.d)(e,"base2");return function e(r,n=0){return eZ(r)?r:"0"===t[n]?e(r.left,n+1):e(r.right,n+1)}(this.root)}_indexOf(e,t){return e.peers.findIndex(e=>(0,B.a)(e.kadId,t))}async _split(e,t){var r,n,i;let s={prefix:"0",depth:e.depth+1,peers:[]},a={prefix:"1",depth:e.depth+1,peers:[]};for(let r of e.peers)"0"===(0,q.d)(r.kadId,"base2")[e.depth]?(s.peers.push(r),await this.onMove?.(r,e,s,t)):(a.peers.push(r),await this.onMove?.(r,e,a,t));r=e,n=s,i=a,delete r.peers,r.left=n,r.right=i,""===r.prefix&&(delete r.depth,delete r.prefix)}}let eY=20,eX=6,e0=3,e1="kad-peer",e2=6e5;class e3 extends x.X{kBucketSize;kb;network;closestPeerTagger;log;components;running;pingNewContactTimeout;pingNewContactQueue;pingOldContactTimeout;pingOldContactQueue;populateFromDatastoreOnStart;populateFromDatastoreLimit;protocol;peerTagName;peerTagValue;metrics;shutdownController;constructor(e,t){super(),this.components=e,this.log=e.logger.forComponent(`${t.logPrefix}:routing-table`),this.kBucketSize=t.kBucketSize??eY,this.running=!1,this.protocol=t.protocol,this.network=t.network,this.peerTagName=t.peerTagName??e1,this.peerTagValue=t.peerTagValue??1,this.pingOldContacts=this.pingOldContacts.bind(this),this.verifyNewContact=this.verifyNewContact.bind(this),this.peerAdded=this.peerAdded.bind(this),this.peerRemoved=this.peerRemoved.bind(this),this.populateFromDatastoreOnStart=t.populateFromDatastoreOnStart??!0,this.populateFromDatastoreLimit=t.populateFromDatastoreLimit??1e3,this.shutdownController=new AbortController,this.pingOldContactQueue=new eK.w({concurrency:t.pingOldContactConcurrency??20,metricName:`${t.metricsPrefix}_ping_old_contact_queue`,metrics:this.components.metrics,maxSize:t.pingOldContactMaxQueueSize??100}),this.pingOldContactTimeout=new eP._1({...t.pingOldContactTimeout??{},metrics:this.components.metrics,metricName:`${t.metricsPrefix}_routing_table_ping_old_contact_time_milliseconds`}),this.pingNewContactQueue=new eK.w({concurrency:t.pingNewContactConcurrency??20,metricName:`${t.metricsPrefix}_ping_new_contact_queue`,metrics:this.components.metrics,maxSize:t.pingNewContactMaxQueueSize??100}),this.pingNewContactTimeout=new eP._1({...t.pingNewContactTimeout??{},metrics:this.components.metrics,metricName:`${t.metricsPrefix}_routing_table_ping_new_contact_time_milliseconds`}),this.kb=new eJ(e,{kBucketSize:t.kBucketSize,prefixLength:t.prefixLength,splitThreshold:t.splitThreshold,numberOfOldContactsToPing:t.numberOfOldContactsToPing,lastPingThreshold:t.lastPingThreshold,ping:this.pingOldContacts,verify:this.verifyNewContact,onAdd:this.peerAdded,onRemove:this.peerRemoved,metricsPrefix:t.metricsPrefix}),this.closestPeerTagger=new eW(this.components,{logPrefix:t.logPrefix,routingTable:this,peerSetSize:t.closestPeerSetSize,refreshInterval:t.closestPeerSetRefreshInterval,closeTagName:t.closeTagName,closeTagValue:t.closeTagValue}),null!=this.components.metrics&&(this.metrics={routingTableSize:this.components.metrics.registerMetric(`${t.metricsPrefix}_routing_table_size`),routingTableKadBucketTotal:this.components.metrics.registerMetric(`${t.metricsPrefix}_routing_table_kad_bucket_total`),routingTableKadBucketAverageOccupancy:this.components.metrics.registerMetric(`${t.metricsPrefix}_routing_table_kad_bucket_average_occupancy`),routingTableKadBucketMinOccupancy:this.components.metrics.registerMetric(`${t.metricsPrefix}_routing_table_kad_bucket_min_occupancy`),routingTableKadBucketMaxOccupancy:this.components.metrics.registerMetric(`${t.metricsPrefix}_routing_table_kad_bucket_max_occupancy`),routingTableKadBucketMaxDepth:this.components.metrics.registerMetric(`${t.metricsPrefix}_routing_table_kad_bucket_max_depth`),kadBucketEvents:this.components.metrics.registerCounterGroup(`${t.metricsPrefix}_kad_bucket_events_total`)})}isStarted(){return this.running}async start(){!this.running&&(this.running=!0,this.shutdownController=new AbortController,await (0,b.ni)(this.closestPeerTagger,this.kb))}async afterStart(){let e=0;Promise.resolve().then(async()=>{if(!this.populateFromDatastoreOnStart)return;let t=(0,eD.J)([this.shutdownController.signal,AbortSignal.timeout(2e4)]);(0,w.k)(1/0,t);try{for(let r of(await this.components.peerStore.all({filters:[e=>e.protocols.includes(this.protocol)&&e.tags.has(e1)],limit:this.populateFromDatastoreLimit,signal:t}))){if(!this.running)return;try{await this.add(r.id,{signal:t}),e++}catch(e){this.log("failed to add peer %p to routing table, removing kad-dht peer tags - %e"),await this.components.peerStore.merge(r.id,{tags:{[this.peerTagName]:void 0}})}}}finally{t.clear()}this.log("added %d peer store peers to the routing table",e)}).catch(t=>{this.log.error("error adding %d, peer store peers to the routing table - %e",e,t)})}async stop(){this.running=!1,await (0,b.ds)(this.closestPeerTagger,this.kb),this.pingOldContactQueue.abort(),this.pingNewContactQueue.abort(),this.shutdownController.abort()}async peerAdded(e,t,r){this.components.peerId.equals(e.peerId)||await this.components.peerStore.merge(e.peerId,{tags:{[this.peerTagName]:{value:this.peerTagValue}}},r),this.updateMetrics(),this.metrics?.kadBucketEvents.increment({peer_added:!0}),this.safeDispatchEvent("peer:add",{detail:e.peerId})}async peerRemoved(e,t,r){this.components.peerId.equals(e.peerId)||await this.components.peerStore.merge(e.peerId,{tags:{[this.peerTagName]:void 0}},r),this.updateMetrics(),this.metrics?.kadBucketEvents.increment({peer_removed:!0}),this.safeDispatchEvent("peer:remove",{detail:e.peerId})}async *pingOldContacts(e,t){if(!this.running)return;let r=[];for(let n of e){if(null==this.kb.get(n.kadId)){this.log("asked to ping contact %p that was not in routing table",n.peerId);continue}this.metrics?.kadBucketEvents.increment({ping_old_contact:!0}),r.push(async()=>{let e=this.pingOldContactQueue.find(n.peerId);return null!=e?(this.log("asked to ping contact %p was already being pinged",n.peerId),await e.join(t))?void 0:n:await this.pingOldContactQueue.add(async e=>{let t=this.pingOldContactTimeout.getTimeoutSignal(),r=(0,eD.J)([t,this.shutdownController.signal,e?.signal]);(0,w.k)(1/0,t,r);try{return await this.pingContact(n,e)}catch{return this.metrics?.kadBucketEvents.increment({ping_old_contact_error:!0}),!0}finally{this.pingOldContactTimeout.cleanUp(t),r.clear()}},{peerId:n.peerId,signal:t?.signal})?void 0:n})}for await(let e of(0,N.A)(r))null!=e&&(yield e)}async verifyNewContact(e,t){let r=this.pingNewContactTimeout.getTimeoutSignal(),n=(0,eD.J)([r,this.shutdownController.signal,t?.signal]);(0,w.k)(1/0,r,n);try{let t=this.pingNewContactQueue.find(e.peerId);if(null!=t)return this.log("joining existing ping to add new peer %p to routing table",e.peerId),await t.join({signal:n});return await this.pingNewContactQueue.add(async t=>(this.metrics?.kadBucketEvents.increment({ping_new_contact:!0}),this.log("pinging new peer %p before adding to routing table",e.peerId),this.pingContact(e,t)),{peerId:e.peerId,signal:n})}catch(t){return this.log.trace("tried to add peer %p but they were not online",e.peerId),this.metrics?.kadBucketEvents.increment({ping_new_contact_error:!0}),!1}finally{this.pingNewContactTimeout.cleanUp(r),n.clear()}}async pingContact(e,t){let r;try{return this.log("pinging contact %p",e.peerId),await this.components.ping.ping(e.peerId,t),this.log("contact %p ping ok",e.peerId),this.safeDispatchEvent("peer:ping",{detail:e.peerId}),!0}catch(t){return this.log("error pinging old contact %p - %e",e.peerId,t),r?.abort(t),!1}}get size(){return null==this.kb?0:this.kb.count()}async find(e,t){let r=await eu(e,t);return this.kb.get(r)?.peerId}closestPeer(e){let t=this.closestPeers(e,{count:1});if(t.length>0)return t[0]}closestPeers(e,t){return null==this.kb?[]:[...this.kb.closest(e,t)]}async add(e,t){if(null==this.kb)throw Error("RoutingTable is not started");await this.kb.add(e,t)}async remove(e,t){if(null==this.kb)throw Error("RoutingTable is not started");let r=await eu(e,t);await this.kb.remove(r,t)}updateMetrics(){if(null==this.metrics||null==this.kb)return;let e=0,t=0,r=0,n=20,i=0;!function s(a){if(eZ(a)){a.depth>r&&(r=a.depth),t++,e+=a.peers.length,a.peers.length<n&&(n=a.peers.length),a.peers.length>i&&(i=a.peers.length);return}s(a.left),s(a.right)}(this.kb.root),this.metrics.routingTableSize.update(e),this.metrics.routingTableKadBucketTotal.update(t),this.metrics.routingTableKadBucketAverageOccupancy.update(Math.round(e/t)),this.metrics.routingTableKadBucketMinOccupancy.update(n),this.metrics.routingTableKadBucketMaxOccupancy.update(i),this.metrics.routingTableKadBucketMaxDepth.update(r)}}var e4=r(9223);let e6=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782];class e5{log;peerRouting;routingTable;refreshInterval;refreshQueryTimeout;commonPrefixLengthRefreshedAt;refreshTimeoutId;constructor(e,t){let{peerRouting:r,routingTable:n,refreshInterval:i,refreshQueryTimeout:s,logPrefix:a}=t;this.log=e.logger.forComponent(`${a}:routing-table:refresh`),this.peerRouting=r,this.routingTable=n,this.refreshInterval=i??S,this.refreshQueryTimeout=s??3e4,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async afterStart(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){null!=this.refreshTimeoutId&&clearTimeout(this.refreshTimeoutId)}refreshTable(e=!1,t){this.log("refreshing routing table");let r=this._maxCommonPrefix(),n=this._getTrackedCommonPrefixLengthsForRefresh(r);this.log(`max common prefix length ${r}`),this.log(`tracked CPLs [ ${n.map(e=>e.toISOString()).join(", ")} ]`),Promise.all(n.map(async(i,s)=>{try{if(await this._refreshCommonPrefixLength(s,i,e,t),0===this._numPeersForCpl(r)){let r=Math.min(2*(s+1),n.length-1);for(let n=s+1;n<r+1;n++)try{await this._refreshCommonPrefixLength(n,i,e,t)}catch(e){this.log.error(e)}}}catch(e){this.log.error(e)}})).catch(e=>{this.log.error(e)}).then(()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),null!=this.refreshTimeoutId.unref&&this.refreshTimeoutId.unref()}).catch(e=>{this.log.error(e)})}async _refreshCommonPrefixLength(e,t,r,n){if(!r&&t.getTime()>Date.now()-this.refreshInterval){this.log("not running refresh for cpl %s as time since last refresh not above interval",e);return}let i=this._generateRandomPeerId(e);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",e,i,this.routingTable.size);let s=(0,eD.J)([n?.signal,AbortSignal.timeout(this.refreshQueryTimeout)]);(0,w.k)(1/0,s);try{let t=await eG(this.peerRouting.getClosestPeers(i.toMultihash().bytes,{signal:s}));this.log(`found ${t} peers that were close to imaginary peer %p`,i),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",e,i,this.routingTable.size)}finally{s.clear()}}_getTrackedCommonPrefixLengthsForRefresh(e){e>15&&(e=15);let t=[];for(let r=0;r<=e;r++)t[r]=this.commonPrefixLengthRefreshedAt[r]??new Date;return t}_generateRandomPeerId(e){if(null==this.routingTable.kb)throw Error("Routing table not started");if(null==this.routingTable.kb.localPeer)throw Error("Local peer not set");let t=(0,e4.A)(2),r=(t[1]<<8)+t[0],n=this._makePeerId(this.routingTable.kb.localPeer.kadId,r,e),i=er.D4(n);return(0,J.jD)(i)}_makePeerId(e,t,r){if(r>15)throw Error("Cannot generate peer ID for common prefix length greater than 15");let n=new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1),i=65535<<16-(r+1),s=e6[(n^32768>>r)&i|t&~i],a=new ArrayBuffer(34),o=new DataView(a,0,a.byteLength);return o.setUint8(0,en.sha256.code),o.setUint8(1,32),o.setUint32(2,s,!1),new Uint8Array(o.buffer,o.byteOffset,o.byteLength)}_maxCommonPrefix(){let e=0;for(let t of this._prefixLengths())t>e&&(e=t);return e}_numPeersForCpl(e){let t=0;for(let r of this._prefixLengths())r===e&&t++;return t}*_prefixLengths(){if(this.routingTable.kb?.localPeer!=null)for(let{kadId:e}of this.routingTable.kb.toIterable()){let t=e_(this.routingTable.kb.localPeer.kadId,e),r=0;for(let e of t)if(0===e)r++;else break;yield r}}}class e8{peerId;providers;peerStore;log;constructor(e,t){this.log=e.logger.forComponent(`${t.logPrefix}:rpc:handlers:add-provider`),this.peerId=e.peerId,this.providers=t.providers,this.peerStore=e.peerStore}async handle(e,t){let r;if(null==t.key||0===t.key.length)throw new h.L("Missing key");try{r=ee.TO.decode(t.key)}catch(e){throw new h.L("Invalid CID")}(null==t.providers||0===t.providers.length)&&this.log.error("no providers found in message"),this.log("%p asked us, %p to store provider record for for %c",e,this.peerId,r),await Promise.all(t.providers.map(async t=>{let n=er.D4(t.id),i=(0,J.jD)(n),s=t.multiaddrs.map(e=>(0,eA.HZ)(e));if(!e.equals(i)){this.log("invalid provider peer %p from %p",t.id,e);return}if(t.multiaddrs.length<1){this.log("no valid addresses for provider %p. Ignore",e);return}this.log.trace("received provider %p for %s (addrs %s)",e,r,s),await this.providers.addProvider(r,i),await this.peerStore.merge(i,{multiaddrs:s})}))}}var e7=r(8635);class e9{peerRouting;peerInfoMapper;peerId;addressManager;log;constructor(e,t){let{peerRouting:r,logPrefix:n}=t;this.log=e.logger.forComponent(`${n}:rpc:handlers:find-node`),this.peerId=e.peerId,this.addressManager=e.addressManager,this.peerRouting=r,this.peerInfoMapper=t.peerInfoMapper}async handle(e,t){this.log("incoming request from %p for peers close to %b",e,t.key);try{if(null==t.key)throw new h.L("Invalid FIND_NODE message received - key was missing");let r=await this.peerRouting.getClosestPeersOffline(t.key,{exclude:[e,this.peerId]});(0,e7.aI)(this.peerId.toMultihash().bytes,t.key)&&r.push({id:this.peerId,multiaddrs:this.addressManager.getAddresses().map(e=>e.decapsulateCode((0,eA.WH)("p2p").code))});let n={type:s.FIND_NODE,clusterLevel:t.clusterLevel,closer:r.map(this.peerInfoMapper).filter(({multiaddrs:e})=>e.length).map(e=>({id:e.id.toMultihash().bytes,multiaddrs:e.multiaddrs.map(e=>e.bytes)})),providers:[]};return 0===n.closer.length?this.log("could not find any peers closer to %b for %p",t.key,e):this.log("found %d peers close to %b for %p",n.closer.length,t.key,e),n}catch(r){throw this.log("error during finding peers closer to %b for %p - %e",t.key,e,r),r}}}var te=r(332);class tt{peerId;peerRouting;providers;peerStore;peerInfoMapper;log;constructor(e,t){let{peerRouting:r,providers:n,logPrefix:i}=t;this.log=e.logger.forComponent(`${i}:rpc:handlers:get-providers`),this.peerId=e.peerId,this.peerStore=e.peerStore,this.peerRouting=r,this.providers=n,this.peerInfoMapper=t.peerInfoMapper}async handle(e,t){let r;if(null==t.key)throw new h.L("Invalid GET_PROVIDERS message received - key was missing");try{r=ee.TO.decode(t.key)}catch(e){throw new h.L("Invalid CID")}this.log("%p asking for providers for %s",e,r);let[n,i]=await Promise.all([(0,te.A)(R(await this.providers.getProviders(r),async e=>{let t=await this.peerStore.get(e);return{id:t.id,multiaddrs:t.addresses.map(({multiaddr:e})=>e)}})),this.peerRouting.getClosestPeersOffline(t.key)]),a={type:s.GET_PROVIDERS,key:t.key,clusterLevel:t.clusterLevel,closer:i.map(this.peerInfoMapper).filter(({id:e,multiaddrs:t})=>t.length>0).map(e=>({id:e.id.toMultihash().bytes,multiaddrs:e.multiaddrs.map(e=>e.bytes)})),providers:n.map(this.peerInfoMapper).filter(({id:e,multiaddrs:t})=>t.length>0).map(e=>({id:e.id.toMultihash().bytes,multiaddrs:e.multiaddrs.map(e=>e.bytes)}))};return this.log("got %s providers %s closerPeers",a.providers.length,a.closer.length),a}async _getAddresses(e){return[]}}class tr{peerStore;datastore;peerRouting;log;datastorePrefix;constructor(e,t){this.log=e.logger.forComponent(`${t.logPrefix}:rpc:handlers:get-value`),this.datastorePrefix=`${t.datastorePrefix}/record`,this.peerStore=e.peerStore,this.datastore=e.datastore,this.peerRouting=t.peerRouting}async handle(e,t){let r=t.key;if(this.log("%p asked for key %b",e,r),null==r||0===r.length)throw new h.L("Invalid key");let n={type:s.GET_VALUE,key:r,clusterLevel:t.clusterLevel,closer:[],providers:[]};if("/pk/"===(0,q.d)(r.subarray(0,4))){let e;this.log("is public key");let t=function(e){let t=er.D4(e.subarray(4));return(0,J.jD)(t)}(r);try{let r=await this.peerStore.get(t);if(null==r.id.publicKey)throw new h.m_("No public key found in key book");e=(0,W.Ve)(r.id.publicKey)}catch(e){if("NotFoundError"!==e.name)throw e}if(null!=e)return this.log("returning found public key"),n.record=new C(r,e,new Date).serialize(),n}let[i,a]=await Promise.all([this._checkLocalDatastore(r),this.peerRouting.getClosestPeersOffline(r)]);return null!=i&&(this.log("had record for %b in local datastore",r),n.record=i.serialize()),a.length>0&&(this.log("had %s closer peers in routing table",a.length),n.closer=a.map(e=>({id:e.id.toMultihash().bytes,multiaddrs:e.multiaddrs.map(e=>e.bytes)}))),n}async _checkLocalDatastore(e){let t;this.log("checkLocalDatastore looking for %b",e);let r=ed(this.datastorePrefix,e);try{t=await this.datastore.get(r)}catch(e){if("NotFoundError"===e.name)return;throw e}let n=C.deserialize(t);if(null==n.timeReceived||Date.now()-n.timeReceived.getTime()>1296e5){await this.datastore.delete(r);return}return n}}class tn{log;constructor(e,t){this.log=e.logger.forComponent(`${t.logPrefix}:rpc:handlers:ping`)}async handle(e,t){return this.log("ping from %p",e),t}}class ti{components;validators;log;datastorePrefix;constructor(e,t){let{validators:r}=t;this.components=e,this.log=e.logger.forComponent(`${t.logPrefix}:rpc:handlers:put-value`),this.datastorePrefix=`${t.datastorePrefix}/record`,this.validators=r}async handle(e,t){let r=t.key;if(this.log("%p asked us to store value for key %b",e,r),null==t.record){let t=`Empty record from: ${e.toString()}`;throw this.log.error(t),new h.L(t)}try{let e=C.deserialize(t.record);await Q(this.validators,e),e.timeReceived=new Date;let n=ed(this.datastorePrefix,e.key);await this.components.datastore.put(n,e.serialize().subarray()),this.log("put record for %b into datastore under key %k",r,n)}catch(e){this.log("did not put record for key %b into datastore %o",r,e)}return t}}class ts{handlers;log;metrics;incomingMessageTimeout;constructor(e,t){this.metrics={operations:e.metrics?.registerCounterGroup(`${t.metricsPrefix}_inbound_rpc_requests_total`),errors:e.metrics?.registerCounterGroup(`${t.metricsPrefix}_inbound_rpc_errors_total`),rpcTime:e.metrics?.registerMetricGroup(`${t.metricsPrefix}_inbound_rpc_time_seconds`,{label:"operation"})},this.log=e.logger.forComponent(`${t.logPrefix}:rpc`),this.incomingMessageTimeout=t.incomingMessageTimeout??1e4,this.handlers={[s.GET_VALUE.toString()]:new tr(e,t),[s.PUT_VALUE.toString()]:new ti(e,t),[s.FIND_NODE.toString()]:new e9(e,t),[s.ADD_PROVIDER.toString()]:new e8(e,t),[s.GET_PROVIDERS.toString()]:new tt(e,t),[s.PING.toString()]:new tn(e,t)}}async handleMessage(e,t){let r=this.handlers[t.type];if(null==r){this.log.error(`no handler found for message type: ${t.type}`);return}try{return this.metrics.operations?.increment({[t.type]:!0}),await r.handle(e,t)}catch{this.metrics.errors?.increment({[t.type]:!0})}}onIncomingStream(e){Promise.resolve().then(async()=>{let{stream:t,connection:r}=e,n=()=>{t.abort(new h.MU)},i=AbortSignal.timeout(this.incomingMessageTimeout);i.addEventListener("abort",n);let s=(0,eS.z)(t).pb(u);try{for(;;){let e=await s.read({signal:i}),t=this.metrics?.rpcTime?.timer(e.type.toString()),a=this.metrics?.rpcTime?.timer(e.type.toString()),o=!1;try{this.log("incoming %s from %p",e.type,r.remotePeer);let t=await this.handleMessage(r.remotePeer,e);null!=t&&await s.write(t,{signal:i})}catch(e){throw o=!0,a?.(),e}finally{o||t?.()}i.removeEventListener("abort",n),(i=AbortSignal.timeout(this.incomingMessageTimeout)).addEventListener("abort",n)}}catch(e){t.abort(e)}}).catch(t=>{this.log.error("error handling %s RPC message from %p - %e","unknown",e.connection.remotePeer,t)})}}class ta extends x.X{log;components;protocol;running;registrarId;constructor(e,t){super();let{protocol:r,logPrefix:n}=t;this.components=e,this.log=e.logger.forComponent(`${n}:topology-listener`),this.running=!1,this.protocol=r}isStarted(){return this.running}async start(){!this.running&&(this.running=!0,this.registrarId=await this.components.registrar.register(this.protocol,{onConnect:e=>{this.log("observed peer %p with protocol %s",e,this.protocol),this.dispatchEvent(new CustomEvent("peer",{detail:e}))}}))}async stop(){this.running=!1,null!=this.registrarId&&(this.components.registrar.unregister(this.registrarId),this.registrarId=void 0)}}class to{dht;constructor(e){this.dht=e}async provide(e,t={}){await (0,y.A)(this.dht.provide(e,t))}async cancelReprovide(e){await this.dht.cancelReprovide(e)}async *findProviders(e,t={}){for await(let r of this.dht.findProviders(e,t))"PROVIDER"===r.name&&(yield*r.providers)}async put(e,t,r){await (0,y.A)(this.dht.put(e,t,r))}async get(e,t){for await(let r of this.dht.get(e,t))if("VALUE"===r.name)return r.value;throw new h.m_("Could not find value for key")}}class tl{dht;constructor(e){this.dht=e}async findPeer(e,t={}){for await(let r of this.dht.findPeer(e,t))if("FINAL_PEER"===r.name)return r.peer;throw new h.m_("Peer not found")}async *getClosestPeers(e,t={}){for await(let r of this.dht.getClosestPeers(e,t))"FINAL_PEER"===r.name&&(yield r.peer)}}class tc extends x.X{k;a;d;protocol;routingTable;providers;network;peerRouting;components;log;running;clientMode;validators;selectors;queryManager;contentFetching;contentRouting;routingTableRefresh;rpc;topologyListener;querySelf;maxInboundStreams;maxOutboundStreams;dhtContentRouting;dhtPeerRouting;peerInfoMapper;reprovider;onPeerConnectTimeout;constructor(e,t={}){super();let r=t.logPrefix??"libp2p:kad-dht",n=t.datastorePrefix??"/dht",i=t.metricsPrefix??"libp2p_kad_dht",s={queries:e.metrics?.registerMetricGroup(`${i}_operations_total`,{label:"operation"}),errors:e.metrics?.registerCounterGroup(`${i}_operation_errors_total`,{label:"operation"}),queryTime:e.metrics?.registerMetricGroup(`${i}_operation_time_seconds`,{label:"operation"}),errorTime:e.metrics?.registerMetricGroup(`${i}_operation_error_time_seconds`,{label:"operation"})};this.running=!1,this.components=e,this.log=e.logger.forComponent(r),this.k=t.kBucketSize??eY,this.a=t.alpha??10,this.d=t.disjointPaths??this.a,this.protocol=t.protocol??"/ipfs/kad/1.0.0",this.clientMode=t.clientMode??!0,this.maxInboundStreams=t.maxInboundStreams??32,this.maxOutboundStreams=t.maxOutboundStreams??64,this.peerInfoMapper=t.peerInfoMapper??el,this.onPeerConnectTimeout=t.onPeerConnectTimeout??1e4,this.providers=new eM(e,{...t.providers,logPrefix:r,datastorePrefix:n}),this.validators={...Z,...t.validators},this.selectors={...K,...t.selectors},this.network=new eI(e,{protocol:this.protocol,logPrefix:r,metricsPrefix:i}),this.routingTable=new e3(e,{kBucketSize:this.k,pingOldContactTimeout:t.pingOldContactTimeout,pingOldContactConcurrency:t.pingOldContactConcurrency,pingOldContactMaxQueueSize:t.pingOldContactMaxQueueSize,pingNewContactTimeout:t.pingNewContactTimeout,pingNewContactConcurrency:t.pingNewContactConcurrency,pingNewContactMaxQueueSize:t.pingNewContactMaxQueueSize,protocol:this.protocol,logPrefix:r,metricsPrefix:i,prefixLength:t.prefixLength,splitThreshold:t.kBucketSplitThreshold,network:this.network});let a=(0,v.A)();!0===t.allowQueryWithZeroPeers&&a.resolve(),this.queryManager=new eH(e,{disjointPaths:this.d,alpha:this.a,logPrefix:r,metricsPrefix:i,initialQuerySelfHasRun:a,routingTable:this.routingTable,allowQueryWithZeroPeers:t.allowQueryWithZeroPeers}),this.peerRouting=new eR(e,{routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,logPrefix:r}),this.contentFetching=new ey(e,{validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,network:this.network,logPrefix:r,datastorePrefix:n}),this.contentRouting=new ek(e,{network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,logPrefix:r}),this.routingTableRefresh=new e5(e,{peerRouting:this.peerRouting,routingTable:this.routingTable,logPrefix:r}),this.rpc=new ts(e,{routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,logPrefix:r,metricsPrefix:i,datastorePrefix:n,peerInfoMapper:this.peerInfoMapper}),this.topologyListener=new ta(e,{protocol:this.protocol,logPrefix:r}),this.querySelf=new eV(e,{peerRouting:this.peerRouting,interval:t.querySelfInterval,initialInterval:t.initialQuerySelfInterval,logPrefix:r,initialQuerySelfHasRun:a,operationMetrics:s}),this.reprovider=new eq(e,{...t.reprovide,logPrefix:r,metricsPrefix:i,datastorePrefix:n,contentRouting:this.contentRouting,operationMetrics:s}),this.network.addEventListener("peer",e=>{let t=e.detail;this.onPeerConnect(t).catch(e=>{this.log.error("could not add %p to routing table",t.id,e)}),this.dispatchEvent(new CustomEvent("peer",{detail:t}))}),this.topologyListener.addEventListener("peer",e=>{let t=e.detail;Promise.resolve().then(async()=>{let e=await this.components.peerStore.get(t),r={id:t,multiaddrs:e.addresses.map(({multiaddr:e})=>e),protocols:e.protocols};await this.onPeerConnect(r)}).catch(e=>{this.log.error("could not add %p to routing table - %e - %e",t,e)})}),this.dhtPeerRouting=new tl(this),this.dhtContentRouting=new to(this),null==t.clientMode&&e.events.addEventListener("self:peer:update",e=>{this.log("received update of self-peer info"),Promise.resolve().then(async()=>{let t=e.detail.peer.addresses.some(({multiaddr:e})=>(function(e){let t=e.stringTuples();for(let e of t)if(290===e[0])return!1;if(54===t[0][0]||55===t[0][0]||56===t[0][0])return!0;if(4===t[0][0]||41===t[0][0]){let e=(0,Y.b)(`${t[0][1]}`);return null==e||!e}return!1})(e)),r=this.getMode();t&&"client"===r?await this.setMode("server"):"server"!==r||t||await this.setMode("client")}).catch(e=>{this.log.error("error setting dht server mode",e)})}),this.get=em(this.get.bind(this),s,"GET_VALUE"),this.findProviders=em(this.findProviders.bind(this),s,"FIND_PROVIDERS"),this.findPeer=em(this.findPeer.bind(this),s,"FIND_PEER"),this.getClosestPeers=em(this.getClosestPeers.bind(this),s,"GET_CLOSEST_PEERS"),this.provide=em(this.provide.bind(this),s,"PROVIDE"),this.put=em(this.put.bind(this),s,"PUT_VALUE")}[Symbol.toStringTag]="@libp2p/kad-dht";[f.Ch]=["@libp2p/content-routing","@libp2p/peer-routing","@libp2p/peer-discovery","@libp2p/kad-dht"];[f.VM]=["@libp2p/identify","@libp2p/ping"];get[p.q](){return this.dhtContentRouting}get[g.b](){return this.dhtPeerRouting}get[m.P](){return this}async onPeerConnect(e){if(this.log.trace("peer %p connected",e.id),0===(e=this.peerInfoMapper(e)).multiaddrs.length){this.log.trace("ignoring %p as there were no valid addresses in %s after filtering",e.id,e.multiaddrs.map(e=>e.toString()));return}let t=AbortSignal.timeout(this.onPeerConnectTimeout);(0,w.k)(1/0,t);try{await this.routingTable.add(e.id,{signal:t})}catch(t){this.log.error("could not add %p to routing table",e.id,t)}}isStarted(){return this.running}getMode(){return this.clientMode?"client":"server"}async setMode(e,t){if(e===this.getMode()&&t?.force!==!0||(await this.components.registrar.unhandle(this.protocol,t),e===this.getMode()&&t?.force!==!0)){this.log("already in %s mode",e);return}"client"===e?(this.log("enabling client mode while in %s mode",this.getMode()),this.clientMode=!0):(this.log("enabling server mode while in %s mode",this.getMode()),this.clientMode=!1,await this.components.registrar.handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{signal:t?.signal,maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))}async start(){!this.running&&(this.running=!0,await this.setMode(this.clientMode?"client":"server",{force:!0}),await (0,b.ni)(this.routingTable,this.queryManager,this.network,this.topologyListener,this.routingTableRefresh,this.reprovider),await (0,b.ni)(this.querySelf))}async stop(){this.running=!1,await (0,b.ds)(this.querySelf,this.queryManager,this.network,this.routingTable,this.routingTableRefresh,this.topologyListener,this.reprovider)}async *put(e,t,r={}){yield*this.contentFetching.put(e,t,r)}async *get(e,t={}){yield*this.contentFetching.get(e,t)}async *provide(e,t={}){yield*this.contentRouting.provide(e,this.components.addressManager.getAddresses(),t)}async cancelReprovide(e,t){await this.providers.removeProvider(e,this.components.peerId,t)}async *findProviders(e,t={}){yield*this.contentRouting.findProviders(e,t)}async *findPeer(e,t={}){yield*this.peerRouting.findPeer(e,t)}async *getClosestPeers(e,t={}){yield*this.peerRouting.getClosestPeers(e,t)}async refreshRoutingTable(e){this.routingTableRefresh.refreshTable(!0,e)}}function tu(e={}){return t=>new tc(t,e)}!function(e){e[e.SEND_QUERY=0]="SEND_QUERY",e[e.PEER_RESPONSE=1]="PEER_RESPONSE",e[e.FINAL_PEER=2]="FINAL_PEER",e[e.QUERY_ERROR=3]="QUERY_ERROR",e[e.PROVIDER=4]="PROVIDER",e[e.VALUE=5]="VALUE",e[e.ADD_PEER=6]="ADD_PEER",e[e.DIAL_PEER=7]="DIAL_PEER",e[e.PATH_ENDED=8]="PATH_ENDED"}(d||(d={}))},4570:(e,t,r)=>{"use strict";r.d(t,{w:()=>a});var n=r(5364),i=r(6269);class s extends i.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.tW)(e);let r=(0,i.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,a=new Uint8Array(s);a.set(r.length>s?e.create().update(r).digest():r);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}update(e){return(0,n.t2)(this),this.iHash.update(e),this}digestInto(e){(0,n.t2)(this),(0,n.ee)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let a=(e,t,r)=>new s(e,t).update(r).digest();a.create=(e,t)=>new s(e,t)},4618:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;let n=r(7840),i=r(5322),s=r(2898);function a(e,r=t.defaultRandomSource){return r.randomBytes(e)}t.defaultRandomSource=new n.SystemRandomSource,t.randomBytes=a,t.randomUint32=function(e=t.defaultRandomSource){let r=a(4,e),n=(0,i.readUint32LE)(r);return(0,s.wipe)(r),n};let o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(e,r=o,n=t.defaultRandomSource){if(r.length<2)throw Error("randomString charset is too short");if(r.length>256)throw Error("randomString charset is too long");let i="",c=r.length,u=256-256%c;for(;e>0;){let t=a(Math.ceil(256*e/u),n);for(let n=0;n<t.length&&e>0;n++){let s=t[n];s<u&&(i+=r.charAt(s%c),e--)}(0,s.wipe)(t)}return i}t.randomString=l,t.randomStringForEntropy=function(e,r=o,n=t.defaultRandomSource){return l(Math.ceil(e/(Math.log(r.length)/Math.LN2)),r,n)}},4697:(e,t,r)=>{"use strict";r.d(t,{H:()=>d,R:()=>u});var n=r(8121),i=r(9982),s=r(1456);let a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",o=null,l=BigInt(0),c=BigInt(58);function u(e){let t=(0,n.q5)(e),r=(0,s.Dg)(t),i="";for(;r;)i=a[Number(r%c)]+i,r/=c;for(let e=0;e<t.length&&!t[e];e++)i=a[0]+i;return i}function d(e){let t=l;for(let r=0;r<e.length;r++)t*=c,t+=function(e){if(null==o){o={};for(let e=0;e<a.length;e++)o[a[e]]=BigInt(e)}let t=o[e];return(0,i.MR)(null!=t,"invalid base58 value","letter",e),t}(e[r]);return t}},4716:(e,t,r)=>{"use strict";r.d(t,{c:()=>u});var n,i=r(1680),s=r(3809),a=r(4057);let o=Uint8Array.from([3,1]);var l=r(6038),c=r(1970);!function(e){var t;let r,n;(t=e.AddressInfo||(e.AddressInfo={})).codec=()=>(null==n&&(n=(0,l.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.multiaddr&&e.multiaddr.byteLength>0&&(t.uint32(10),t.bytes(e.multiaddr)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={multiaddr:(0,c.c)(0)},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();t>>>3==1?n.multiaddr=e.bytes():e.skipType(7&t)}return n})),n),t.encode=e=>(0,l.mH)(e,t.codec()),t.decode=(e,r)=>(0,l.Y8)(e,t.codec(),r),e.codec=()=>(null==r&&(r=(0,l.iU)((t,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null!=t.peerId&&t.peerId.byteLength>0&&(r.uint32(10),r.bytes(t.peerId)),null!=t.seq&&0n!==t.seq&&(r.uint32(16),r.uint64(t.seq)),null!=t.addresses)for(let n of t.addresses)r.uint32(26),e.AddressInfo.codec().encode(n,r);!1!==n.lengthDelimited&&r.ldelim()},(t,r,n={})=>{let i={peerId:(0,c.c)(0),seq:0n,addresses:[]},s=null==r?t.len:t.pos+r;for(;t.pos<s;){let r=t.uint32();switch(r>>>3){case 1:i.peerId=t.bytes();break;case 2:i.seq=t.uint64();break;case 3:if(n.limits?.addresses!=null&&i.addresses.length===n.limits.addresses)throw new l.zH('Decode error - map field "addresses" had too many elements');i.addresses.push(e.AddressInfo.codec().decode(t,t.uint32(),{limits:n.limits?.addresses$}));break;default:t.skipType(7&r)}}return i})),r),e.encode=t=>(0,l.mH)(t,e.codec()),e.decode=(t,r)=>(0,l.Y8)(t,e.codec(),r)}(n||(n={}));class u{static createFromProtobuf=e=>{let t=n.decode(e),r=(0,i.jD)(a.D4(t.peerId));return new u({peerId:r,multiaddrs:(t.addresses??[]).map(e=>(0,s.HZ)(e.multiaddr)),seqNumber:t.seq})};static DOMAIN="libp2p-peer-record";static CODEC=o;peerId;multiaddrs;seqNumber;domain=u.DOMAIN;codec=u.CODEC;marshaled;constructor(e){let{peerId:t,multiaddrs:r,seqNumber:n}=e;this.peerId=t,this.multiaddrs=r??[],this.seqNumber=n??BigInt(Date.now())}marshal(){return null==this.marshaled&&(this.marshaled=n.encode({peerId:this.peerId.toMultihash().bytes,seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(e=>({multiaddr:e.bytes}))})),this.marshaled}equals(e){return!!(e instanceof u&&this.peerId.equals(e.peerId)&&this.seqNumber===e.seqNumber&&function(e,t){let r=(e,t)=>e.toString().localeCompare(t.toString());return e.length===t.length&&(t.sort(r),e.sort(r).every((e,r)=>t[r].equals(e)))}(this.multiaddrs,e.multiaddrs))}}},4772:(e,t,r)=>{var n=r(6890);function i(e){this.data=e,this.left=null,this.right=null}function s(e){this._root=null,this._comparator=e,this.size=0}i.prototype.get_child=function(e){return e?this.right:this.left},i.prototype.set_child=function(e,t){e?this.right=t:this.left=t},s.prototype=new n,s.prototype.insert=function(e){if(null===this._root)return this._root=new i(e),this.size++,!0;for(var t=0,r=null,n=this._root;;){if(null===n)return n=new i(e),r.set_child(t,n),ret=!0,this.size++,!0;if(0===this._comparator(n.data,e))return!1;t=0>this._comparator(n.data,e),r=n,n=n.get_child(t)}},s.prototype.remove=function(e){if(null===this._root)return!1;var t=new i(void 0),r=t;r.right=this._root;for(var n=null,s=null,a=1;null!==r.get_child(a);){n=r,r=r.get_child(a);var o=this._comparator(e,r.data);a=o>0,0===o&&(s=r)}return null!==s&&(s.data=r.data,n.set_child(n.right===r,r.get_child(null===r.left)),this._root=t.right,this.size--,!0)},e.exports=s},4814:(e,t,r)=>{"use strict";r.d(t,{l:()=>n});class n extends Error{static name="AbortError";name="AbortError";constructor(e="The operation was aborted",...t){super(e,...t)}}},4822:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcProvider=t.JsonRpcApiPollingProvider=t.JsonRpcApiProvider=t.JsonRpcSigner=void 0;let n=r(7813),i=r(9111),s=r(4259),a=r(2984),o=r(8662),l=r(4861),c=r(9578),u=r(9307),d=r(3119),h=r(4459),f="bigint,boolean,function,number,string,symbol".split(/,/g);function p(e){if(null==e||f.indexOf(typeof e)>=0||"function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(p);if("object"==typeof e)return Object.keys(e).reduce((t,r)=>(t[r]=e[r],t),{});throw Error(`should not happen: ${e} (${typeof e})`)}function g(e){return e?e.toLowerCase():e}function m(e){return e&&"number"==typeof e.pollingInterval}let b={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1048576,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class y extends c.AbstractSigner{address;constructor(e,t){super(e),t=(0,i.getAddress)(t),(0,o.defineProperties)(this,{address:t})}connect(e){(0,o.assert)(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){let t=p(e),r=[];if(t.from){let n=t.from;r.push((async()=>{let r=await (0,i.resolveAddress)(n,this.provider);(0,o.assertArgument)(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r})())}else t.from=this.address;if(null==t.gasLimit&&r.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){let e=t.to;r.push((async()=>{t.to=await (0,i.resolveAddress)(e,this.provider)})())}r.length&&await Promise.all(r);let n=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[n])}async sendTransaction(e){let t=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((e,n)=>{let i=[1e3,100],s=0,a=async()=>{try{let n=await this.provider.getTransaction(r);if(null!=n){e(n.replaceableTransaction(t));return}}catch(e){if((0,o.isError)(e,"CANCELLED")||(0,o.isError)(e,"BAD_DATA")||(0,o.isError)(e,"NETWORK_ERROR")||(0,o.isError)(e,"UNSUPPORTED_OPERATION")){null==e.info&&(e.info={}),e.info.sendTransactionHash=r,n(e);return}if((0,o.isError)(e,"INVALID_ARGUMENT")&&(s++,null==e.info&&(e.info={}),e.info.sendTransactionHash=r,s>10)){n(e);return}this.provider.emit("error",(0,o.makeError)("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:e}))}this.provider._setTimeout(()=>{a()},i.pop()||4e3)};a()})}async signTransaction(e){let t=p(e);if(t.from){let r=await (0,i.resolveAddress)(t.from,this.provider);(0,o.assertArgument)(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r}else t.from=this.address;let r=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){let t="string"==typeof e?(0,o.toUtf8Bytes)(e):e;return await this.provider.send("personal_sign",[(0,o.hexlify)(t),this.address.toLowerCase()])}async signTypedData(e,t,r){let n=p(r),a=await s.TypedDataEncoder.resolveNames(e,t,n,async e=>{let t=await (0,i.resolveAddress)(e);return(0,o.assertArgument)(null!=t,"TypedData does not support null address","value",e),t});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(s.TypedDataEncoder.getPayload(a.domain,t,a.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){let t="string"==typeof e?(0,o.toUtf8Bytes)(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),(0,o.hexlify)(t)])}}t.JsonRpcSigner=y;class x extends l.AbstractProvider{#s;#eZ;#eJ;#eY;#eX;#K;#e0;#e1(){if(this.#eY)return;let e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#eY=setTimeout(()=>{this.#eY=null;let e=this.#eJ;for(this.#eJ=[];e.length;){let t=[e.shift()];for(;e.length&&t.length!==this.#s.batchMaxCount;)if(t.push(e.shift()),JSON.stringify(t.map(e=>e.payload)).length>this.#s.batchMaxSize){e.unshift(t.pop());break}(async()=>{let e=1===t.length?t[0].payload:t.map(e=>e.payload);this.emit("debug",{action:"sendRpcPayload",payload:e});try{let r=await this._send(e);for(let{resolve:e,reject:n,payload:i}of(this.emit("debug",{action:"receiveRpcResult",result:r}),t)){if(this.destroyed){n((0,o.makeError)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:i.method}));continue}let t=r.filter(e=>e.id===i.id)[0];if(null==t){let e=(0,o.makeError)("missing response for request","BAD_DATA",{value:r,info:{payload:i}});this.emit("error",e),n(e);continue}if("error"in t){n(this.getRpcError(i,t));continue}e(t.result)}}catch(e){for(let{reject:r}of(this.emit("debug",{action:"receiveRpcError",error:e}),t))r(e)}})()}},e)}constructor(e,t){super(e,t),this.#eZ=1,this.#s=Object.assign({},b,t||{}),this.#eJ=[],this.#eY=null,this.#K=null,this.#e0=null;{let e=null,t=new Promise(t=>{e=t});this.#eX={promise:t,resolve:e}}let r=this._getOption("staticNetwork");"boolean"==typeof r?((0,o.assertArgument)(!r||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),r&&null!=e&&(this.#K=u.Network.from(e))):r&&((0,o.assertArgument)(null==e||r.matches(e),"staticNetwork MUST match network object","options",t),this.#K=r)}_getOption(e){return this.#s[e]}get _network(){return(0,o.assert)(this.#K,"network is not available yet","NETWORK_ERROR"),this.#K}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&(0,o.getBigInt)(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){let r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}let t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){let e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(this.#K)return this.#K}return this.#e0||(this.ready?this.#e0=(async()=>{try{let e=u.Network.from((0,o.getBigInt)(await this.send("eth_chainId",[])));return this.#e0=null,e}catch(e){throw this.#e0=null,e}})():this.#e0=(async()=>{let e;let t={id:this.#eZ++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});try{e=(await this._send(t))[0],this.#e0=null}catch(e){throw this.#e0=null,this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:e}),"result"in e)return u.Network.from((0,o.getBigInt)(e.result));throw this.getRpcError(t,e)})()),await this.#e0}_start(){null!=this.#eX&&null!=this.#eX.resolve&&(this.#eX.resolve(),this.#eX=null,(async()=>{for(;null==this.#K&&!this.destroyed;)try{this.#K=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",(0,o.makeError)("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await new Promise(e=>{setTimeout(e,1e3)})}this.#e1()})())}async _waitUntilReady(){if(null!=this.#eX)return await this.#eX.promise}_getSubscriber(e){return"pending"===e.type?new d.FilterIdPendingSubscriber(this):"event"===e.type?this._getOption("polling")?new h.PollingEventSubscriber(this,e.filter):new d.FilterIdEventSubscriber(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new l.UnmanagedSubscriber("orphan"):super._getSubscriber(e)}get ready(){return null==this.#eX}getRpcTransaction(e){let t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(null==e[r])return;let n=r;"gasLimit"===r&&(n="gas"),t[n]=(0,o.toQuantity)((0,o.getBigInt)(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{null!=e[r]&&(t[r]=(0,o.hexlify)(e[r]))}),e.accessList&&(t.accessList=(0,a.accessListify)(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(e=>e.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(e=>{let t=(0,a.authorizationify)(e);return{address:t.address,nonce:(0,o.toQuantity)(t.nonce),chainId:(0,o.toQuantity)(t.chainId),yParity:(0,o.toQuantity)(t.signature.yParity),r:(0,o.toQuantity)(t.signature.r),s:(0,o.toQuantity)(t.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[g(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[g(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[g(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[g(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(g):e.filter.address=g(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){let{method:r}=e,{error:i}=t;if("eth_estimateGas"===r&&i.message){let t=i.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return(0,o.makeError)("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(t.match(/nonce/i)&&t.match(/too low/i))return(0,o.makeError)("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if("eth_call"===r||"eth_estimateGas"===r){let t=function e(t){if(null==t)return null;if("string"==typeof t.message&&t.message.match(/revert/i)&&(0,o.isHexString)(t.data))return{message:t.message,data:t.data};if("object"==typeof t){for(let r in t){let n=e(t[r]);if(n)return n}return null}if("string"==typeof t)try{return e(JSON.parse(t))}catch(e){}return null}(i),s=n.AbiCoder.getBuiltinCallException("eth_call"===r?"call":"estimateGas",e.params[0],t?t.data:null);return s.info={error:i,payload:e},s}let s=JSON.stringify(function(e){let t=[];return!function e(t,r){if(null!=t){if("string"==typeof t.message&&r.push(t.message),"object"==typeof t)for(let n in t)e(t[n],r);if("string"==typeof t)try{return e(JSON.parse(t),r)}catch(e){}}}(e,t),t}(i));if("string"==typeof i.message&&i.message.match(/user denied|ethers-user-denied/i))return(0,o.makeError)("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if("eth_sendRawTransaction"===r||"eth_sendTransaction"===r){let t=e.params[0];if(s.match(/insufficient funds|base fee exceeds gas limit/i))return(0,o.makeError)("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:i}});if(s.match(/nonce/i)&&s.match(/too low/i))return(0,o.makeError)("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:i}});if(s.match(/replacement transaction/i)&&s.match(/underpriced/i))return(0,o.makeError)("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:i}});if(s.match(/only replay-protected/i))return(0,o.makeError)("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:t,info:{error:i}}})}let a=!!s.match(/the method .* does not exist/i);return(!a&&i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a)?(0,o.makeError)("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):(0,o.makeError)("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,t){if(this.destroyed)return Promise.reject((0,o.makeError)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));let r=this.#eZ++,n=new Promise((n,i)=>{this.#eJ.push({resolve:n,reject:i,payload:{method:e,params:t,id:r,jsonrpc:"2.0"}})});return this.#e1(),n}async getSigner(e){null==e&&(e=0);let t=this.send("eth_accounts",[]);if("number"==typeof e){let r=await t;if(e>=r.length)throw Error("no such account");return new y(this,r[e])}let{accounts:r}=await (0,o.resolveProperties)({network:this.getNetwork(),accounts:t});for(let t of(e=(0,i.getAddress)(e),r))if((0,i.getAddress)(t)===e)return new y(this,e);throw Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(e=>new y(this,e))}destroy(){for(let{payload:e,reject:t}of(this.#eY&&(clearTimeout(this.#eY),this.#eY=null),this.#eJ))t((0,o.makeError)("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#eJ=[],super.destroy()}}t.JsonRpcApiProvider=x;class w extends x{#e2;constructor(e,t){super(e,t);let r=this._getOption("pollingInterval");null==r&&(r=b.pollingInterval),this.#e2=r}_getSubscriber(e){let t=super._getSubscriber(e);return m(t)&&(t.pollingInterval=this.#e2),t}get pollingInterval(){return this.#e2}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw Error("invalid interval");this.#e2=e,this._forEachSubscriber(e=>{m(e)&&(e.pollingInterval=this.#e2)})}}t.JsonRpcApiPollingProvider=w;class v extends w{#Y;constructor(e,t,r){null==e&&(e="http://localhost:8545"),super(t,r),"string"==typeof e?this.#Y=new o.FetchRequest(e):this.#Y=e.clone()}_getConnection(){return this.#Y.clone()}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){let t=this._getConnection();t.body=JSON.stringify(e),t.setHeader("content-type","application/json");let r=await t.send();r.assertOk();let n=r.bodyJson;return Array.isArray(n)||(n=[n]),n}}t.JsonRpcProvider=v},4839:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},4845:(e,t,r)=>{"use strict";r.d(t,{e:()=>h});var n,i=r(4892),s=r(1138),a=r(2830),o=r(6552),l=r(9865),c=r(6038),u=r(1970);!function(e){let t;e.codec=()=>(null==t&&(t=(0,c.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.publicKey&&e.publicKey.byteLength>0&&(t.uint32(10),t.bytes(e.publicKey)),null!=e.payloadType&&e.payloadType.byteLength>0&&(t.uint32(18),t.bytes(e.payloadType)),null!=e.payload&&e.payload.byteLength>0&&(t.uint32(26),t.bytes(e.payload)),null!=e.signature&&e.signature.byteLength>0&&(t.uint32(42),t.bytes(e.signature)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={publicKey:(0,u.c)(0),payloadType:(0,u.c)(0),payload:(0,u.c)(0),signature:(0,u.c)(0)},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.publicKey=e.bytes();break;case 2:n.payloadType=e.bytes();break;case 3:n.payload=e.bytes();break;case 5:n.signature=e.bytes();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,c.mH)(t,e.codec()),e.decode=(t,r)=>(0,c.Y8)(t,e.codec(),r)}(n||(n={}));class d extends Error{constructor(e="Invalid signature"){super(e),this.name="InvalidSignatureError"}}class h{static createFromProtobuf=e=>{let t=n.decode(e);return new h({publicKey:(0,i.EZ)(t.publicKey),payloadType:t.payloadType,payload:t.payload,signature:t.signature})};static seal=async(e,t,r)=>{if(null==t)throw Error("Missing private key");let n=e.domain,i=e.codec,s=e.marshal(),a=f(n,i,s),o=await t.sign(a.subarray(),r);return new h({publicKey:t.publicKey,payloadType:i,payload:s,signature:o})};static openAndCertify=async(e,t,r)=>{let n=h.createFromProtobuf(e);if(!await n.validate(t,r))throw new d("Envelope signature is not valid for the given domain");return n};publicKey;payloadType;payload;signature;marshaled;constructor(e){let{publicKey:t,payloadType:r,payload:n,signature:i}=e;this.publicKey=t,this.payloadType=r,this.payload=n,this.signature=i}marshal(){return null==this.marshaled&&(this.marshaled=n.encode({publicKey:(0,i.Ve)(this.publicKey),payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(e){return null!=e&&(0,o.a)(this.marshal(),e.marshal())}async validate(e,t){let r=f(e,this.payloadType,this.payload);return this.publicKey.verify(r.subarray(),this.signature,t)}}let f=(e,t,r)=>{let n=(0,l.s)(e),i=s.lF(n.byteLength),o=s.lF(t.length),c=s.lF(r.length);return new a.I(i,n,o,t,c,r)}},4861:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractProvider=t.UnmanagedSubscriber=void 0;let n=r(9111),i=r(9418),s=r(629),a=r(4259),o=r(2984),l=r(8662),c=r(8718),u=r(840),d=r(9307),h=r(8138),f=r(4459),p=BigInt(2);function g(e){return e&&"function"==typeof e.then}function m(e,t){return e+":"+JSON.stringify(t,(e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){let e=Object.keys(t);return e.sort(),e.reduce((e,r)=>(e[r]=t[r],e),{})}return t})}class b{name;constructor(e){(0,l.defineProperties)(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function y(e){return(e=Array.from(new Set(e).values())).sort(),e}async function x(e,t){if(null==e)throw Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if((0,l.isHexString)(e,32)){let t=e.toLowerCase();return{type:"transaction",tag:m("tx",{hash:t}),hash:t}}if(e.orphan){let t=e;return{type:"orphan",tag:m("orphan",t),filter:JSON.parse(JSON.stringify(t))}}if(e.address||e.topics){let r=e,i={topics:(r.topics||[]).map(e=>null==e?null:Array.isArray(e)?y(e.map(e=>e.toLowerCase())):e.toLowerCase())};if(r.address){let e=[],s=[],a=r=>{(0,l.isHexString)(r)?e.push(r):s.push((async()=>{e.push(await (0,n.resolveAddress)(r,t))})())};Array.isArray(r.address)?r.address.forEach(a):a(r.address),s.length&&await Promise.all(s),i.address=y(e.map(e=>e.toLowerCase()))}return{filter:i,tag:m("event",i),type:"event"}}(0,l.assertArgument)(!1,"unknown ProviderEvent","event",e)}function w(){return new Date().getTime()}t.UnmanagedSubscriber=b;let v={cacheTimeout:250,pollingInterval:4e3};class A{#eN;#eI;#eM;#eB;#eD;#eL;#eU;#eF;#ej;#ez;#eH;#s;constructor(e,t){if(this.#s=Object.assign({},v,t||{}),"any"===e)this.#eL=!0,this.#eD=null;else if(e){let t=d.Network.from(e);this.#eL=!1,this.#eD=Promise.resolve(t),setTimeout(()=>{this.emit("network",t,null)},0)}else this.#eL=!1,this.#eD=null;this.#eF=-1,this.#eU=new Map,this.#eN=new Map,this.#eI=new Map,this.#eM=null,this.#eB=!1,this.#ej=1,this.#ez=new Map,this.#eH=!1}get pollingInterval(){return this.#s.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#eI.values())}attachPlugin(e){if(this.#eI.get(e.name))throw Error(`cannot replace existing plugin: ${e.name} `);return this.#eI.set(e.name,e.connect(this)),this}getPlugin(e){return this.#eI.get(e)||null}get disableCcipRead(){return this.#eH}set disableCcipRead(e){this.#eH=!!e}async #eG(e){let t=this.#s.cacheTimeout;if(t<0)return await this._perform(e);let r=m(e.method,e),n=this.#eU.get(r);return n||(n=this._perform(e),this.#eU.set(r,n),setTimeout(()=>{this.#eU.get(r)===n&&this.#eU.delete(r)},t)),await n}async ccipReadFetch(e,t,r){if(this.disableCcipRead||0===r.length||null==e.to)return null;let n=e.to.toLowerCase(),i=t.toLowerCase(),s=[];for(let t=0;t<r.length;t++){let a;let o=r[t],c=o.replace("{sender}",n).replace("{data}",i),u=new l.FetchRequest(c);-1===o.indexOf("{data}")&&(u.body={data:i,sender:n}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:t,urls:r});let d="unknown error";try{a=await u.send()}catch(e){s.push(e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:e}});continue}try{let e=a.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:e}),e.data;e.message&&(d=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:e})}catch(e){}(0,l.assert)(a.statusCode<400||a.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:o,errorMessage:d}}),s.push(d)}(0,l.assert)(!1,`error encountered during CCIP fetch: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:s}})}_wrapBlock(e,t){return new h.Block((0,u.formatBlock)(e),this)}_wrapLog(e,t){return new h.Log((0,u.formatLog)(e),this)}_wrapTransactionReceipt(e,t){return new h.TransactionReceipt((0,u.formatTransactionReceipt)(e),this)}_wrapTransactionResponse(e,t){return new h.TransactionResponse((0,u.formatTransactionResponse)(e),this)}_detectNetwork(){(0,l.assert)(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){(0,l.assert)(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){let e=(0,l.getNumber)(await this.#eG({method:"getBlockNumber"}),"%response");return this.#eF>=0&&(this.#eF=e),e}_getAddress(e){return(0,n.resolveAddress)(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return(0,l.isHexString)(e)?(0,l.isHexString)(e,32)?e:(0,l.toQuantity)(e):("bigint"==typeof e&&(e=(0,l.getNumber)(e,"blockTag")),"number"==typeof e)?e>=0?(0,l.toQuantity)(e):this.#eF>=0?(0,l.toQuantity)(this.#eF+e):this.getBlockNumber().then(t=>(0,l.toQuantity)(t+e)):void(0,l.assertArgument)(!1,"invalid blockTag","blockTag",e)}_getFilter(e){let t,r;let n=(e.topics||[]).map(e=>null==e?null:Array.isArray(e)?y(e.map(e=>e.toLowerCase())):e.toLowerCase()),i="blockHash"in e?e.blockHash:void 0,s=(e,t,r)=>{let s;switch(e.length){case 0:break;case 1:s=e[0];break;default:e.sort(),s=e}if(i&&(null!=t||null!=r))throw Error("invalid filter");let a={};return s&&(a.address=s),n.length&&(a.topics=n),t&&(a.fromBlock=t),r&&(a.toBlock=r),i&&(a.blockHash=i),a},a=[];if(e.address){if(Array.isArray(e.address))for(let t of e.address)a.push(this._getAddress(t));else a.push(this._getAddress(e.address))}return"fromBlock"in e&&(t=this._getBlockTag(e.fromBlock)),("toBlock"in e&&(r=this._getBlockTag(e.toBlock)),a.filter(e=>"string"!=typeof e).length||null!=t&&"string"!=typeof t||null!=r&&"string"!=typeof r)?Promise.all([Promise.all(a),t,r]).then(e=>s(e[0],e[1],e[2])):s(a,t,r)}_getTransactionRequest(e){let t=(0,h.copyRequest)(e),r=[];if(["to","from"].forEach(e=>{if(null==t[e])return;let i=(0,n.resolveAddress)(t[e],this);g(i)?r.push(async function(){t[e]=await i}()):t[e]=i}),null!=t.blockTag){let e=this._getBlockTag(t.blockTag);g(e)?r.push(async function(){t.blockTag=await e}()):t.blockTag=e}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(null==this.#eD){let e=(async()=>{try{let e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw this.#eD===e&&(this.#eD=null),t}})();return this.#eD=e,(await e).clone()}let e=this.#eD,[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(this.#eL?(this.emit("network",r,t),this.#eD===e&&(this.#eD=Promise.resolve(r))):(0,l.assert)(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){let e=await this.getNetwork(),t=async()=>{let{_block:t,gasPrice:r,priorityFee:n}=await (0,l.resolveProperties)({_block:this.#e$("latest",!1),gasPrice:(async()=>{try{let e=await this.#eG({method:"getGasPrice"});return(0,l.getBigInt)(e,"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{let e=await this.#eG({method:"getPriorityFee"});return(0,l.getBigInt)(e,"%response")}catch(e){}return null})()}),i=null,s=null,a=this._wrapBlock(t,e);return a&&a.baseFeePerGas&&(s=null!=n?n:BigInt("1000000000"),i=a.baseFeePerGas*p+s),new h.FeeData(r,i,s)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){let e=new l.FetchRequest(r.url),n=await r.processFunc(t,this,e);return new h.FeeData(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return g(t)&&(t=await t),(0,l.getBigInt)(await this.#eG({method:"estimateGas",transaction:t}),"%response")}async #eV(e,t,r){(0,l.assert)(r<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});let i=(0,h.copyRequest)(e);try{return(0,l.hexlify)(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(e){if(!this.disableCcipRead&&(0,l.isCallException)(e)&&e.data&&r>=0&&"latest"===t&&null!=i.to&&"0x556f1830"===(0,l.dataSlice)(e.data,0,4)){let s;let a=e.data,o=await (0,n.resolveAddress)(i.to,this);try{s=function(e){let t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};(0,l.assert)((0,l.dataLength)(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let r=(0,l.dataSlice)(e,0,32);(0,l.assert)((0,l.dataSlice)(r,0,12)===(0,l.dataSlice)(S,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=(0,l.dataSlice)(r,12);try{let r=[],n=(0,l.getNumber)((0,l.dataSlice)(e,32,64)),i=(0,l.getNumber)((0,l.dataSlice)(e,n,n+32)),s=(0,l.dataSlice)(e,n+32);for(let e=0;e<i;e++){let t=function(e,t){try{let r=E(e,t);if(r)return(0,l.toUtf8String)(r)}catch(e){}return null}(s,32*e);if(null==t)throw Error("abort");r.push(t)}t.urls=r}catch(e){(0,l.assert)(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let r=E(e,64);if(null==r)throw Error("abort");t.calldata=r}catch(e){(0,l.assert)(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}(0,l.assert)((0,l.dataSlice)(e,100,128)===(0,l.dataSlice)(S,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=(0,l.dataSlice)(e,96,100);try{let r=E(e,128);if(null==r)throw Error("abort");t.extraData=r}catch(e){(0,l.assert)(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(e=>t[e]),t}((0,l.dataSlice)(e.data,4))}catch(e){(0,l.assert)(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:a}})}(0,l.assert)(s.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:s.errorArgs}});let c=await this.ccipReadFetch(i,s.calldata,s.urls);(0,l.assert)(null!=c,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:e.data,errorArgs:s.errorArgs}});let u={to:o,data:(0,l.concat)([s.selector,function(e){let t=[],r=0;for(let n=0;n<e.length;n++)t.push(P),r+=32;for(let n=0;n<e.length;n++){let i=(0,l.getBytes)(e[n]);t[n]=k(r),t.push(k(i.length)),t.push(function(e){if(e.length%32==0)return e;let t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}(i)),r+=32+32*Math.ceil(i.length/32)}return(0,l.concat)(t)}([c,s.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{let e=await this.#eV(u,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:e}),e}}throw e}}async #eq(e){let{value:t}=await (0,l.resolveProperties)({network:this.getNetwork(),value:e});return t}async call(e){let{tx:t,blockTag:r}=await (0,l.resolveProperties)({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#eq(this.#eV(t,r,e.enableCcipRead?0:-1))}async #eK(e,t,r){let n=this._getAddress(t),i=this._getBlockTag(r);return("string"!=typeof n||"string"!=typeof i)&&([n,i]=await Promise.all([n,i])),await this.#eq(this.#eG(Object.assign(e,{address:n,blockTag:i})))}async getBalance(e,t){return(0,l.getBigInt)(await this.#eK({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return(0,l.getNumber)(await this.#eK({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return(0,l.hexlify)(await this.#eK({method:"getCode"},e,t))}async getStorage(e,t,r){let n=(0,l.getBigInt)(t,"position");return(0,l.hexlify)(await this.#eK({method:"getStorage",position:n},e,r))}async broadcastTransaction(e){let{blockNumber:t,hash:r,network:n}=await (0,l.resolveProperties)({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=o.Transaction.from(e);if(i.hash!==r)throw Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,n).replaceableTransaction(t)}async #e$(e,t){if((0,l.isHexString)(e,32))return await this.#eG({method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return"string"!=typeof r&&(r=await r),await this.#eG({method:"getBlock",blockTag:r,includeTransactions:t})}async getBlock(e,t){let{network:r,params:n}=await (0,l.resolveProperties)({network:this.getNetwork(),params:this.#e$(e,!!t)});return null==n?null:this._wrapBlock(n,r)}async getTransaction(e){let{network:t,params:r}=await (0,l.resolveProperties)({network:this.getNetwork(),params:this.#eG({method:"getTransaction",hash:e})});return null==r?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){let{network:t,params:r}=await (0,l.resolveProperties)({network:this.getNetwork(),params:this.#eG({method:"getTransactionReceipt",hash:e})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){let t=await this.#eG({method:"getTransaction",hash:e});if(null==t)throw Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){let{result:t}=await (0,l.resolveProperties)({network:this.getNetwork(),result:this.#eG({method:"getTransactionResult",hash:e})});return null==t?null:(0,l.hexlify)(t)}async getLogs(e){let t=this._getFilter(e);g(t)&&(t=await t);let{network:r,params:n}=await (0,l.resolveProperties)({network:this.getNetwork(),params:this.#eG({method:"getLogs",filter:t})});return n.map(e=>this._wrapLog(e,r))}_getProvider(e){(0,l.assert)(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await c.EnsResolver.fromName(this,e)}async getAvatar(e){let t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){let t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=(0,n.getAddress)(e);let t=(0,a.namehash)(e.substring(2).toLowerCase()+".addr.reverse");try{let r=await c.EnsResolver.getEnsAddress(this),n=new s.Contract(r,["function resolver(bytes32) view returns (address)"],this),a=await n.resolver(t);if(null==a||a===i.ZeroAddress)return null;let o=new s.Contract(a,["function name(bytes32) view returns (string)"],this),l=await o.name(t);if(await this.resolveName(l)!==e)return null;return l}catch(e){if((0,l.isError)(e,"BAD_DATA")&&"0x"===e.value||(0,l.isError)(e,"CALL_EXCEPTION"))return null;throw e}return null}async waitForTransaction(e,t,r){let n=null!=t?t:1;return 0===n?this.getTransactionReceipt(e):new Promise(async(t,i)=>{let s=null,a=async r=>{try{let i=await this.getTransactionReceipt(e);if(null!=i&&r-i.blockNumber+1>=n){t(i),s&&(clearTimeout(s),s=null);return}}catch(e){console.log("EEE",e)}this.once("block",a)};null!=r&&(s=setTimeout(()=>{null!=s&&(s=null,this.off("block",a),i((0,l.makeError)("timeout","TIMEOUT",{reason:"timeout"})))},r)),a(await this.getBlockNumber())})}async waitForBlock(e){(0,l.assert)(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){let t=this.#ez.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#ez.delete(e))}_setTimeout(e,t){null==t&&(t=0);let r=this.#ej++,n=()=>{this.#ez.delete(r),e()};if(this.paused)this.#ez.set(r,{timer:null,func:n,time:t});else{let e=setTimeout(n,t);this.#ez.set(r,{timer:e,func:n,time:w()})}return r}_forEachSubscriber(e){for(let t of this.#eN.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new b(e.type);case"block":{let e=new f.PollingBlockSubscriber(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new f.PollingBlockTagSubscriber(this,e.type);case"event":return new f.PollingEventSubscriber(this,e.filter);case"transaction":return new f.PollingTransactionSubscriber(this,e.hash);case"orphan":return new f.PollingOrphanSubscriber(this,e.filter)}throw Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(let r of this.#eN.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),null!=this.#eM&&t.pause(this.#eM);break}}async #eW(e,t){let r=await x(e,this);return"event"===r.type&&t&&t.length>0&&!0===t[0].removed&&(r=await x({orphan:"drop-log",log:t[0]},this)),this.#eN.get(r.tag)||null}async #eQ(e){let t=await x(e,this),r=t.tag,n=this.#eN.get(r);if(!n){let e=this._getSubscriber(t);n={subscriber:e,tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#eN.set(r,n)}return n}async on(e,t){let r=await this.#eQ(e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#eM&&r.subscriber.pause(this.#eM)),this}async once(e,t){let r=await this.#eQ(e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#eM&&r.subscriber.pause(this.#eM)),this}async emit(e,...t){let r=await this.#eW(e,t);if(!r||0===r.listeners.length)return!1;let n=r.listeners.length;return r.listeners=r.listeners.filter(({listener:r,once:n})=>{let i=new l.EventPayload(this,n?null:r,e);try{r.call(this,...t,i)}catch(e){}return!n}),0===r.listeners.length&&(r.started&&r.subscriber.stop(),this.#eN.delete(r.tag)),n>0}async listenerCount(e){if(e){let t=await this.#eW(e);return t?t.listeners.length:0}let t=0;for(let{listeners:e}of this.#eN.values())t+=e.length;return t}async listeners(e){if(e){let t=await this.#eW(e);return t?t.listeners.map(({listener:e})=>e):[]}let t=[];for(let{listeners:e}of this.#eN.values())t=t.concat(e.map(({listener:e})=>e));return t}async off(e,t){let r=await this.#eW(e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return t&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),this.#eN.delete(r.tag)),this}async removeAllListeners(e){if(e){let{tag:t,started:r,subscriber:n}=await this.#eQ(e);r&&n.stop(),this.#eN.delete(t)}else for(let[e,{started:t,subscriber:r}]of this.#eN)t&&r.stop(),this.#eN.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#eB}destroy(){for(let e of(this.removeAllListeners(),this.#ez.keys()))this._clearTimeout(e);this.#eB=!0}get paused(){return null!=this.#eM}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#eF=-1,null!=this.#eM){if(!!e==this.#eM)return;(0,l.assert)(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}for(let t of(this._forEachSubscriber(t=>t.pause(e)),this.#eM=!!e,this.#ez.values()))t.timer&&clearTimeout(t.timer),t.time=w()-t.time}resume(){if(null!=this.#eM)for(let e of(this._forEachSubscriber(e=>e.resume()),this.#eM=null,this.#ez.values())){let t=e.time;t<0&&(t=0),e.time=w(),setTimeout(e.func,t)}}}function E(e,t){if("0x"===e)return null;try{let r=(0,l.getNumber)((0,l.dataSlice)(e,t,t+32)),n=(0,l.getNumber)((0,l.dataSlice)(e,r,r+32));return(0,l.dataSlice)(e,r+32,r+32+n)}catch(e){}return null}function k(e){let t=(0,l.toBeArray)(e);if(t.length>32)throw Error("internal; should not happen");let r=new Uint8Array(32);return r.set(t,32-t.length),r}t.AbstractProvider=A;let P=new Uint8Array([]),S="0x0000000000000000000000000000000000000000000000000000000000000000"},4890:(e,t,r)=>{"use strict";r.d(t,{l:()=>I,d:()=>T});var n,i=r(3204),s=r(4716),a=r(4845),o=r(497),l=r(3809),c=r(6411),u=r(1896),d=r(7255),h=r(6676),f=r(9865),p=r(6054),g=r(6038);!function(e){let t;e.codec=()=>(null==t&&(t=(0,g.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.protocolVersion&&(t.uint32(42),t.string(e.protocolVersion)),null!=e.agentVersion&&(t.uint32(50),t.string(e.agentVersion)),null!=e.publicKey&&(t.uint32(10),t.bytes(e.publicKey)),null!=e.listenAddrs)for(let r of e.listenAddrs)t.uint32(18),t.bytes(r);if(null!=e.observedAddr&&(t.uint32(34),t.bytes(e.observedAddr)),null!=e.protocols)for(let r of e.protocols)t.uint32(26),t.string(r);null!=e.signedPeerRecord&&(t.uint32(66),t.bytes(e.signedPeerRecord)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={listenAddrs:[],protocols:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 5:n.protocolVersion=e.string();break;case 6:n.agentVersion=e.string();break;case 1:n.publicKey=e.bytes();break;case 2:if(r.limits?.listenAddrs!=null&&n.listenAddrs.length===r.limits.listenAddrs)throw new g.zH('Decode error - map field "listenAddrs" had too many elements');n.listenAddrs.push(e.bytes());break;case 4:n.observedAddr=e.bytes();break;case 3:if(r.limits?.protocols!=null&&n.protocols.length===r.limits.protocols)throw new g.zH('Decode error - map field "protocols" had too many elements');n.protocols.push(e.string());break;case 8:n.signedPeerRecord=e.bytes();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,g.mH)(t,e.codec()),e.decode=(t,r)=>(0,g.Y8)(t,e.codec(),r)}(n||(n={}));var m=r(4892),b=r(9827),y=r(1680);let x={protocolPrefix:"ipfs",timeout:5e3,maxInboundStreams:1,maxOutboundStreams:1,maxObservedAddresses:10,maxMessageSize:8192,runOnConnectionOpen:!0,runOnSelfUpdate:!0,runOnLimitedConnection:!0,concurrency:32};async function w(e,t,r,n,i){let o;if(r("received identify from %p",n.remotePeer),null==i)throw new b.L("message was null or undefined");let c={};if(i.listenAddrs.length>0&&(c.addresses=i.listenAddrs.map(e=>({isCertified:!1,multiaddr:(0,l.HZ)(e)}))),i.protocols.length>0&&(c.protocols=i.protocols),null!=i.publicKey){let e=(0,m.EZ)(i.publicKey);if(!(0,y.sR)(e).equals(n.remotePeer))throw new b.L("public key did not match remote PeerId");c.publicKey=e}if(null!=i.signedPeerRecord){let t;r.trace("received signedPeerRecord from %p",n.remotePeer);let l=i.signedPeerRecord,u=await a.e.openAndCertify(l,s.c.DOMAIN),d=s.c.createFromProtobuf(u.payload),h=(0,y.Az)(u.publicKey.toCID());if(!d.peerId.equals(h))throw new b.L("signing key does not match PeerId in the PeerRecord");if(!n.remotePeer.equals(d.peerId))throw new b.L("signing key does not match remote PeerId");try{t=await e.get(d.peerId)}catch(e){if("NotFoundError"!==e.name)throw e}if(null!=t&&(c.metadata=t.metadata,null!=t.peerRecordEnvelope)){let e=a.e.createFromProtobuf(t.peerRecordEnvelope),n=s.c.createFromProtobuf(e.payload);n.seqNumber>=d.seqNumber&&(r("sequence number was lower or equal to existing sequence number - stored: %d received: %d",n.seqNumber,d.seqNumber),d=n,l=t.peerRecordEnvelope)}c.peerRecordEnvelope=l,c.addresses=d.multiaddrs.map(e=>({isCertified:!0,multiaddr:e})),o={seq:d.seqNumber,addresses:d.multiaddrs}}else r("%p did not send a signed peer record",n.remotePeer);if(r.trace("patching %p with",n.remotePeer,c),await e.patch(n.remotePeer,c),null!=i.agentVersion||null!=i.protocolVersion){let t={};null!=i.agentVersion&&(t.AgentVersion=(0,f.s)(i.agentVersion)),null!=i.protocolVersion&&(t.ProtocolVersion=(0,f.s)(i.protocolVersion)),r.trace("merging %p metadata",n.remotePeer,t),await e.merge(n.remotePeer,{metadata:t})}let u={peerId:n.remotePeer,protocolVersion:i.protocolVersion,agentVersion:i.agentVersion,publicKey:i.publicKey,listenAddrs:i.listenAddrs.map(e=>(0,l.HZ)(e)),observedAddr:null==i.observedAddr?void 0:(0,l.HZ)(i.observedAddr),protocols:i.protocols,signedPeerRecord:o,connection:n};return t.safeDispatchEvent("peer:identify",{detail:u}),u}class v{host;protocol;started;timeout;peerId;privateKey;peerStore;registrar;addressManager;maxInboundStreams;maxOutboundStreams;maxMessageSize;maxObservedAddresses;events;runOnLimitedConnection;log;constructor(e,t){this.protocol=t.protocol,this.started=!1,this.peerId=e.peerId,this.privateKey=e.privateKey,this.peerStore=e.peerStore,this.registrar=e.registrar,this.addressManager=e.addressManager,this.events=e.events,this.log=t.log,this.timeout=t.timeout??x.timeout,this.maxInboundStreams=t.maxInboundStreams??x.maxInboundStreams,this.maxOutboundStreams=t.maxOutboundStreams??x.maxOutboundStreams,this.maxMessageSize=t.maxMessageSize??x.maxMessageSize,this.maxObservedAddresses=t.maxObservedAddresses??x.maxObservedAddresses,this.runOnLimitedConnection=t.runOnLimitedConnection??x.runOnLimitedConnection,this.host={protocolVersion:`${t.protocolPrefix??x.protocolPrefix}/0.1.0`,agentVersion:function(e,t){return null!=t?t:e.userAgent}(e.nodeInfo,t.agentVersion)}}isStarted(){return this.started}async start(){!this.started&&(await this.peerStore.merge(this.peerId,{metadata:{AgentVersion:(0,f.s)(this.host.agentVersion),ProtocolVersion:(0,f.s)(this.host.protocolVersion)}}),await this.registrar.handle(this.protocol,e=>{this.handleProtocol(e).catch(e=>{this.log.error(e)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnection}),this.started=!0)}async stop(){await this.registrar.unhandle(this.protocol),this.started=!1}}class A extends v{connectionManager;concurrency;_push;constructor(e,t={}){super(e,{...t,protocol:`/${t.protocolPrefix??x.protocolPrefix}/id/push/1.0.0`,log:e.logger.forComponent("libp2p:identify-push")}),this.connectionManager=e.connectionManager,this.concurrency=t.concurrency??x.concurrency,this._push=(0,o.s)(this.sendPushMessage.bind(this),t.debounce??1e3),(t.runOnSelfUpdate??x.runOnSelfUpdate)&&e.events.addEventListener("self:peer:update",e=>{this.push().catch(e=>{this.log.error("error pushing updates to peers - %e",e)})})}[i.Ch]=["@libp2p/identify-push"];async push(){this._push()}async sendPushMessage(){if(this.isStarted())try{let t=this.addressManager.getAddresses().map(e=>e.decapsulateCode((0,l.WH)("p2p").code)),r=new s.c({peerId:this.peerId,multiaddrs:t}),i=await a.e.seal(r,this.privateKey),o=this.registrar.getProtocols(),g=await this.peerStore.get(this.peerId),m=(0,p.d)(g.metadata.get("AgentVersion")??(0,f.s)(this.host.agentVersion)),b=(0,p.d)(g.metadata.get("ProtocolVersion")??(0,f.s)(this.host.protocolVersion)),y=this;async function*e(){for(let e of y.connectionManager.getConnections())(await y.peerStore.get(e.remotePeer)).protocols.includes(y.protocol)&&(yield async()=>{let r;let s=AbortSignal.timeout(y.timeout);(0,h.k)(1/0,s);try{r=await e.newStream(y.protocol,{signal:s,runOnLimitedConnection:y.runOnLimitedConnection});let a=(0,d.z)(r,{maxDataLength:y.maxMessageSize}).pb(n);await a.write({listenAddrs:t.map(e=>e.bytes),signedPeerRecord:i.marshal(),protocols:o,agentVersion:m,protocolVersion:b},{signal:s}),await r.close({signal:s})}catch(e){y.log.error("could not push identify update to peer",e),r?.abort(e)}})}await (0,c.A)((0,u.A)(e(),{concurrency:this.concurrency}))}catch(e){this.log.error("error pushing updates to peers - %e",e)}}async handleProtocol(e){let{connection:t,stream:r}=e;try{if(this.peerId.equals(t.remotePeer))throw Error("received push from ourselves?");let e={signal:AbortSignal.timeout(this.timeout)},i=(0,d.z)(r,{maxDataLength:this.maxMessageSize}).pb(n),s=await i.read(e);await r.close(e),await w(this.peerStore,this.events,this.log,t,s)}catch(e){this.log.error("received invalid message",e),r.abort(e);return}this.log.trace("handled push from %p",t.remotePeer)}}var E=r(1131),k=r(5983),P=r(2706);class S extends v{constructor(e,t={}){super(e,{...t,protocol:`/${t.protocolPrefix??x.protocolPrefix}/id/1.0.0`,log:e.logger.forComponent("libp2p:identify")}),(t.runOnConnectionOpen??x.runOnConnectionOpen)&&e.events.addEventListener("connection:open",e=>{let t=e.detail;this.identify(t).catch(e=>{e.name!==b.IM.name&&this.log.error("error during identify trigged by connection:open",e)})})}[i.Ch]=["@libp2p/identify"];async _identify(e,t={}){let r;if(null==t.signal){let e=AbortSignal.timeout(this.timeout);(0,h.k)(1/0,e),t={...t,signal:e}}try{r=await e.newStream(this.protocol,{...t,runOnLimitedConnection:this.runOnLimitedConnection});let i=(0,d.z)(r,{maxDataLength:this.maxMessageSize}).pb(n),s=await i.read(t);return await r.close(t),s}catch(e){throw r?.abort(e),e}}async identify(e,t={}){let r=await this._identify(e,t),{publicKey:n,protocols:i,observedAddr:s}=r;if(null==n)throw new b.L("public key was missing from identify message");let a=(0,m.EZ)(n),o=(0,y.Az)(a.toCID());if(!e.remotePeer.equals(o))throw new b.L("identified peer does not match the expected peer");if(this.peerId.equals(o))throw new b.L("identified peer is our own peer id?");return this.maybeAddObservedAddress(s),this.log("identify completed for peer %p and protocols %o",o,i),w(this.peerStore,this.events,this.log,e,r)}maybeAddObservedAddress(e){let t=function(e){if(null!=e&&e.length>0)try{return(0,l.HZ)(e)}catch{}}(e);if(null==t)return;if(this.log.trace("our observed address was %a",t),(0,k.G)(t)){this.log.trace("our observed address was private");return}let r=t.getComponents();if((r[0].code===l.Ik||r[0].code===l.qc&&r[1].code===l.Ik)&&!function(e){try{for(let{code:t,value:r}of e.getComponents())if(null!=r&&t===l.Ik)return(0,E.eX)("2000::/3",r)}catch{}return!1}(t)){this.log.trace("our observed address was IPv6 but not a global unicast address");return}!P.qi.exactMatch(t)&&(this.log.trace("storing the observed address"),this.addressManager.addObservedAddr(t))}async handleProtocol(e){let{connection:t,stream:r}=e,i=AbortSignal.timeout(this.timeout);(0,h.k)(1/0,i);try{let e=await this.peerStore.get(this.peerId),o=this.addressManager.getAddresses().map(e=>e.decapsulateCode((0,l.WH)("p2p").code)),c=e.peerRecordEnvelope;if(o.length>0&&null==c){let e=new s.c({peerId:this.peerId,multiaddrs:o});c=(await a.e.seal(e,this.privateKey)).marshal().subarray()}let u=t.remoteAddr.bytes;P.DD.matches(t.remoteAddr)||(u=void 0);let h=(0,d.z)(r).pb(n);await h.write({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:(0,m.Ve)(this.privateKey.publicKey),listenAddrs:o.map(e=>e.bytes),signedPeerRecord:c,observedAddr:u,protocols:e.protocols},{signal:i}),await r.close({signal:i})}catch(e){this.log.error("could not respond to identify request",e),r.abort(e)}}}function I(e={}){return t=>new S(t,e)}function T(e={}){return t=>new A(t,e)}},4892:(e,t,r)=>{"use strict";let n;r.d(t,{TZ:()=>eq,Sq:()=>eW,EZ:()=>eK,Ve:()=>eQ});var i,s,a,o,l=r(9827),c=r(2830),u=r(9865),d=r(6054);let h=parseInt("11111",2),f=parseInt("10000000",2),p=parseInt("01111111",2),g={0:y,1:y,2:function(e,t){let r=b(e,t),n=t.offset,i=t.offset+r,s=[];for(let t=n;t<i;t++)(t!==n||0!==e[t])&&s.push(e[t]);return t.offset+=r,Uint8Array.from(s)},3:function(e,t){let r=b(e,t),n=e[t.offset];t.offset++;let i=e.subarray(t.offset,t.offset+r-1);if(t.offset+=r,0!==n)throw Error("Unused bits in bit string is unimplemented");return i},4:function(e,t){let r=b(e,t),n=e.subarray(t.offset,t.offset+r);return t.offset+=r,n},5:function(e,t){return t.offset++,null},6:function(e,t){let r=b(e,t),n=t.offset+r,i=e[t.offset];t.offset++;let s=0,a=0;i<40?(s=0,a=i):i<80?(s=1,a=i-40):(s=2,a=i-80);let o=`${s}.${a}`,l=[];for(;t.offset<n;){let r=e[t.offset];if(t.offset++,l.push(127&r),r<128){l.reverse();let e=0;for(let t=0;t<l.length;t++)e+=l[t]<<7*t;o+=`.${e}`,l=[]}}return o},16:y,22:y,48:y};function m(e,t={offset:0}){let r=e[t.offset]&h;if(t.offset++,null!=g[r])return g[r](e,t);throw Error("No decoder for tag "+r)}function b(e,t){let r=0;if((e[t.offset]&f)===f){let n=e[t.offset]&p,i="0x";t.offset++;for(let r=0;r<n;r++,t.offset++)i+=e[t.offset].toString(16).padStart(2,"0");r=parseInt(i,16)}else r=e[t.offset],t.offset++;return r}function y(e,t){b(e,t);let r=[];for(;!(t.offset>=e.byteLength);){let n=m(e,t);if(null===n)break;r.push(n)}return r}function x(e){if(e.byteLength<128)return Uint8Array.from([e.byteLength]);let t=function(e){let t=e.toString(16);t.length%2==1&&(t="0"+t);let r=new c.I;for(let e=0;e<t.length;e+=2)r.append(Uint8Array.from([parseInt(`${t[e]}${t[e+1]}`,16)]));return r}(e.byteLength);return new c.I(Uint8Array.from([t.byteLength|f]),t)}function w(e){let t=new c.I;return(128&e.subarray()[0])==128&&t.append(Uint8Array.from([0])),t.append(e),new c.I(Uint8Array.from([2]),x(t),t)}function v(e){let t=Uint8Array.from([0]),r=new c.I(t,e);return new c.I(Uint8Array.from([3]),x(r),r)}function A(e,t=48){let r=new c.I;for(let t of e)r.append(t);return new c.I(Uint8Array.from([t]),x(r),r)}var E=r(5839),k=r(9700),P=r(3315),S=r(6552);async function I(e="P-256"){let t=await crypto.subtle.generateKey({name:"ECDSA",namedCurve:e},!0,["sign","verify"]);return{publicKey:await crypto.subtle.exportKey("jwk",t.publicKey),privateKey:await crypto.subtle.exportKey("jwk",t.privateKey)}}async function T(e,t,r){let n=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["sign"]);r?.signal?.throwIfAborted();let i=await crypto.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},n,t.subarray());return r?.signal?.throwIfAborted(),new Uint8Array(i,0,i.byteLength)}async function _(e,t,r,n){let i=await crypto.subtle.importKey("jwk",e,{name:"ECDSA",namedCurve:e.crv??"P-256"},!1,["verify"]);n?.signal?.throwIfAborted();let s=await crypto.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},i,t,r.subarray());return n?.signal?.throwIfAborted(),s}class C{type="ECDSA";jwk;_raw;constructor(e){this.jwk=e}get raw(){var e;return null==this._raw&&(this._raw=(e=this.jwk,A([w(Uint8Array.from([1])),A([F(e.crv)],160),A([v(new c.I(Uint8Array.from([4]),(0,u.s)(e.x??"","base64url"),(0,u.s)(e.y??"","base64url")))],161)]).subarray())),this._raw}toMultihash(){return P.identity.digest(eQ(this))}toCID(){return k.TO.createV1(114,this.toMultihash())}toString(){return E.base58btc.encode(this.toMultihash().bytes).substring(1)}equals(e){return!!(null!=e&&e.raw instanceof Uint8Array)&&(0,S.a)(this.raw,e.raw)}async verify(e,t,r){return _(this.jwk,t,e,r)}}class O{type="ECDSA";jwk;publicKey;_raw;constructor(e){this.jwk=e,this.publicKey=new C({crv:e.crv,ext:e.ext,key_ops:["verify"],kty:"EC",x:e.x,y:e.y})}get raw(){var e,t;return null==this._raw&&(this._raw=(e=this.jwk,A([w(Uint8Array.from([1])),(t=(0,u.s)(e.d??"","base64url"),new c.I(Uint8Array.from([4]),x(t),t)),A([F(e.crv)],160),A([v(new c.I(Uint8Array.from([4]),(0,u.s)(e.x??"","base64url"),(0,u.s)(e.y??"","base64url")))],161)]).subarray())),this._raw}equals(e){return!!(null!=e&&e.raw instanceof Uint8Array)&&(0,S.a)(this.raw,e.raw)}async sign(e,t){return T(this.jwk,e,t)}}let R=Uint8Array.from([6,8,42,134,72,206,61,3,1,7]),N=Uint8Array.from([6,5,43,129,4,0,34]),M=Uint8Array.from([6,5,43,129,4,0,35]),B={ext:!0,kty:"EC",crv:"P-256"},D={ext:!0,kty:"EC",crv:"P-384"},L={ext:!0,kty:"EC",crv:"P-521"};function U(e){let t,r;let n=e[1][1][0];if(65===n.byteLength)return t=(0,d.d)(n.subarray(1,33),"base64url"),r=(0,d.d)(n.subarray(33),"base64url"),new C({...B,key_ops:["verify"],x:t,y:r});if(97===n.byteLength)return t=(0,d.d)(n.subarray(1,49),"base64url"),r=(0,d.d)(n.subarray(49),"base64url"),new C({...D,key_ops:["verify"],x:t,y:r});if(133===n.byteLength)return t=(0,d.d)(n.subarray(1,67),"base64url"),r=(0,d.d)(n.subarray(67),"base64url"),new C({...L,key_ops:["verify"],x:t,y:r});throw new l.gG(`coordinates were wrong length, got ${n.byteLength}, expected 65, 97 or 133`)}function F(e){if("P-256"===e)return R;if("P-384"===e)return N;if("P-521"===e)return M;throw new l.gG(`Invalid curve ${e}`)}async function j(e="P-256"){return new O((await I(e)).privateKey)}function z(e){return null!=e&&"function"==typeof e.then&&"function"==typeof e.catch&&"function"==typeof e.finally}var H=r(3666);class G extends Error{constructor(e="An error occurred while signing a message"){super(e),this.name="SigningError"}}class $ extends Error{constructor(e="An error occurred while verifying a message"){super(e),this.name="VerificationError"}}class V extends Error{constructor(e="Missing Web Crypto API"){super(e),this.name="WebCryptoMissingError"}}let q={get(e=globalThis){let t=e.crypto;if(t?.subtle==null)throw new V("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return t}},K=(async()=>{try{return await q.get().subtle.generateKey({name:"Ed25519"},!0,["sign","verify"]),!0}catch{return!1}})();async function W(e,t){let r;r=64===e.length?e.subarray(0,32):e;let n={crv:"Ed25519",kty:"OKP",x:(0,d.d)(e.subarray(32),"base64url"),d:(0,d.d)(r,"base64url"),ext:!0,key_ops:["sign"]},i=await q.get().subtle.importKey("jwk",n,{name:"Ed25519"},!0,["sign"]),s=await q.get().subtle.sign({name:"Ed25519"},i,t instanceof Uint8Array?t:t.subarray());return new Uint8Array(s,0,s.byteLength)}async function Q(e,t){return(null==n&&(n=await K),n)?W(e,t):function(e,t){let r=e.subarray(0,32);return H.ev.sign(t instanceof Uint8Array?t:t.subarray(),r)}(e,t)}async function Z(e,t,r){if(e.buffer instanceof ArrayBuffer){let n=await q.get().subtle.importKey("raw",e.buffer,{name:"Ed25519"},!1,["verify"]);return await q.get().subtle.verify({name:"Ed25519"},n,t,r instanceof Uint8Array?r:r.subarray())}throw TypeError("WebCrypto does not support SharedArrayBuffer for Ed25519 keys")}async function J(e,t,r){return(null==n&&(n=await K),n)?Z(e,t,r):H.ev.verify(t,r instanceof Uint8Array?r:r.subarray(),e)}class Y{type="Ed25519";raw;constructor(e){this.raw=er(e,32)}toMultihash(){return P.identity.digest(eQ(this))}toCID(){return k.TO.createV1(114,this.toMultihash())}toString(){return E.base58btc.encode(this.toMultihash().bytes).substring(1)}equals(e){return!!(null!=e&&e.raw instanceof Uint8Array)&&(0,S.a)(this.raw,e.raw)}verify(e,t,r){r?.signal?.throwIfAborted();let n=J(this.raw,t,e);return z(n)?n.then(e=>(r?.signal?.throwIfAborted(),e)):n}}class X{type="Ed25519";raw;publicKey;constructor(e,t){this.raw=er(e,64),this.publicKey=new Y(t)}equals(e){return!!(null!=e&&e.raw instanceof Uint8Array)&&(0,S.a)(this.raw,e.raw)}sign(e,t){t?.signal?.throwIfAborted();let r=Q(this.raw,e);return z(r)?r.then(e=>(t?.signal?.throwIfAborted(),e)):(t?.signal?.throwIfAborted(),r)}}function ee(e){return new Y(e=er(e,32))}async function et(){let{privateKey:e,publicKey:t}=function(){let e=H.ev.utils.randomPrivateKey(),t=H.ev.getPublicKey(e);return{privateKey:function(e,t){let r=new Uint8Array(64);for(let n=0;n<32;n++)r[n]=e[n],r[32+n]=t[n];return r}(e,t),publicKey:t}}();return new X(e,t)}function er(e,t){if((e=Uint8Array.from(e??[])).length!==t)throw new l.gG(`Key must be a Uint8Array of length ${t}, got ${e.length}`);return e}var en=r(6038);!function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.secp256k1="secp256k1",e.ECDSA="ECDSA"}(i||(i={})),function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.secp256k1=2]="secp256k1",e[e.ECDSA=3]="ECDSA"}(s||(s={})),(i||(i={})).codec=()=>(0,en.eG)(s),function(e){let t;e.codec=()=>(null==t&&(t=(0,en.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),i.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={},s=null==t?e.len:e.pos+t;for(;e.pos<s;){let t=e.uint32();switch(t>>>3){case 1:n.Type=i.codec().decode(e);break;case 2:n.Data=e.bytes();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,en.mH)(t,e.codec()),e.decode=(t,r)=>(0,en.Y8)(t,e.codec(),r)}(a||(a={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,en.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.Type&&(t.uint32(8),i.codec().encode(e.Type,t)),null!=e.Data&&(t.uint32(18),t.bytes(e.Data)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={},s=null==t?e.len:e.pos+t;for(;e.pos<s;){let t=e.uint32();switch(t>>>3){case 1:n.Type=i.codec().decode(e);break;case 2:n.Data=e.bytes();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,en.mH)(t,e.codec()),e.decode=(t,r)=>(0,en.Y8)(t,e.codec(),r)}(o||(o={}));var ei=r(5003),es=r(4057);async function ea(e,t){let r=await q.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]);t?.signal?.throwIfAborted();let n=await ec(r,t);return{privateKey:n[0],publicKey:n[1]}}async function eo(e,t,r){let n=await q.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]);r?.signal?.throwIfAborted();let i=await q.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,t instanceof Uint8Array?t:t.subarray());return r?.signal?.throwIfAborted(),new Uint8Array(i,0,i.byteLength)}async function el(e,t,r,n){let i=await q.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);n?.signal?.throwIfAborted();let s=await q.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},i,t,r instanceof Uint8Array?r:r.subarray());return n?.signal?.throwIfAborted(),s}async function ec(e,t){if(null==e.privateKey||null==e.publicKey)throw new l.gG("Private and public key are required");let r=await Promise.all([q.get().subtle.exportKey("jwk",e.privateKey),q.get().subtle.exportKey("jwk",e.publicKey)]);return t?.signal?.throwIfAborted(),r}class eu{type="RSA";jwk;_raw;_multihash;constructor(e,t){this.jwk=e,this._multihash=t}get raw(){return null==this._raw&&(this._raw=ef(this.jwk)),this._raw}toMultihash(){return this._multihash}toCID(){return k.TO.createV1(114,this._multihash)}toString(){return E.base58btc.encode(this.toMultihash().bytes).substring(1)}equals(e){return!!(null!=e&&e.raw instanceof Uint8Array)&&(0,S.a)(this.raw,e.raw)}verify(e,t,r){return el(this.jwk,t,e,r)}}class ed{type="RSA";jwk;_raw;publicKey;constructor(e,t){this.jwk=e,this.publicKey=t}get raw(){return null==this._raw&&(this._raw=function(e){if(null==e.n||null==e.e||null==e.d||null==e.p||null==e.q||null==e.dp||null==e.dq||null==e.qi)throw new l.gG("JWK was missing components");return A([w(Uint8Array.from([0])),w((0,u.s)(e.n,"base64url")),w((0,u.s)(e.e,"base64url")),w((0,u.s)(e.d,"base64url")),w((0,u.s)(e.p,"base64url")),w((0,u.s)(e.q,"base64url")),w((0,u.s)(e.dp,"base64url")),w((0,u.s)(e.dq,"base64url")),w((0,u.s)(e.qi,"base64url"))]).subarray()}(this.jwk)),this._raw}equals(e){return!!(null!=e&&e.raw instanceof Uint8Array)&&(0,S.a)(this.raw,e.raw)}sign(e,t){return eo(this.jwk,e,t)}}let eh=Uint8Array.from([48,13,6,9,42,134,72,134,247,13,1,1,1,5,0]);function ef(e){if(null==e.n||null==e.e)throw new l.gG("JWK was missing components");return A([eh,v(A([w((0,u.s)(e.n,"base64url")),w((0,u.s)(e.e,"base64url"))]))]).subarray()}async function ep(e){if(e>8192)throw new l.gG("Key size is too large");let t=await ea(e),r=(0,ei.sc)(a.encode({Type:i.RSA,Data:ef(t.publicKey)})),n=(0,es.vt)(18,r);return new ed(t.privateKey,new eu(t.publicKey,n))}var eg=r(4322),em=r(5439),eb=r(2405),ey=r(3084),ex=r(4546),ew=r(7551);function ev(e){void 0!==e.lowS&&(0,eb.e8)("lowS",e.lowS),void 0!==e.prehash&&(0,eb.e8)("prehash",e.prehash)}class eA extends Error{constructor(e=""){super(e)}}let eE={Err:eA,_tlv:{encode:(e,t)=>{let{Err:r}=eE;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,i=(0,eb.zW)(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");let s=n>127?(0,eb.zW)(i.length/2|128):"";return(0,eb.zW)(e)+s+i+t},decode(e,t){let{Err:r}=eE,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],s=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let a=t.subarray(n,n+e);if(a.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===a[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of a)s=s<<8|e;if(n+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;let a=t.subarray(n,n+s);if(a.length!==s)throw new r("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+s)}}},_int:{encode(e){let{Err:t}=eE;if(e<ek)throw new t("integer: negative integers are not allowed");let r=(0,eb.zW)(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=eE;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return(0,eb.Ph)(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=eE,i=(0,eb.qj)("signature",e),{v:s,l:a}=n.decode(48,i);if(a.length)throw new t("invalid signature: left bytes after parsing");let{v:o,l:l}=n.decode(2,s),{v:c,l:u}=n.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(o),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=eE,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s));return t.encode(48,n+i)}},ek=BigInt(0),eP=BigInt(1),eS=BigInt(2),eI=BigInt(3),eT=BigInt(4);function e_(e,t,r){let{BYTES:n}=e;return function(i){let s;if("bigint"==typeof i)s=i;else{let r=(0,eb.qj)("private key",i);if(t){if(!t.includes(2*r.length))throw Error("invalid private key");let e=new Uint8Array(n);e.set(r,e.length-r.length),r=e}try{s=e.fromBytes(r)}catch(e){throw Error(`invalid private key: expected ui8a of size ${n}, got ${typeof i}`)}}if(r&&(s=e.create(s)),!e.isValidNot0(s))throw Error("invalid private key: out of range [1..N-1]");return s}}function eC(e){return Uint8Array.of(e?2:3)}let eO={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},eR=BigInt(0),eN=BigInt(1),eM=BigInt(2),eB=(e,t)=>(e+t/eM)/t,eD=(0,ew.D0)(eO.p,void 0,void 0,{sqrt:function(e){let t=eO.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,d=(0,ew.zH)(u,r,t)*u%t,h=(0,ew.zH)(d,r,t)*u%t,f=(0,ew.zH)(h,eM,t)*c%t,p=(0,ew.zH)(f,i,t)*f%t,g=(0,ew.zH)(p,s,t)*p%t,m=(0,ew.zH)(g,o,t)*g%t,b=(0,ew.zH)(m,l,t)*m%t,y=(0,ew.zH)(b,o,t)*g%t,x=(0,ew.zH)(y,r,t)*u%t,w=(0,ew.zH)(x,a,t)*p%t,v=(0,ew.zH)(w,n,t)*c%t,A=(0,ew.zH)(v,eM,t);if(!eD.eql(eD.sqr(A),e))throw Error("Cannot find square root");return A}}),eL=function(e,t){let r=t=>(function(e){let{CURVE:t,curveOpts:r,ecdsaOpts:n}=function(e){let{CURVE:t,curveOpts:r}=function(e){let t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},r={Fp:e.Fp,Fn:(0,ew.D0)(t.n,e.nBitLength),allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:r}}(e);return{CURVE:t,curveOpts:r,ecdsaOpts:{hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN}}}(e),i=function(e,t,r={}){(0,eb.DS)(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=t.randomBytes||ey.po,i=t.hmac||((e,...r)=>(0,em.w)(t.hash,e,(0,ey.Id)(...r))),{Fp:s,Fn:a}=e,{ORDER:o,BITS:l}=a;function c(e,t){if(!a.isValidNot0(t))throw Error(`invalid signature ${e}: out of range 1..CURVE.n`)}class u{constructor(e,t,r){c("r",e),c("s",t),this.r=e,this.s=t,null!=r&&(this.recovery=r),Object.freeze(this)}static fromCompact(e){let t=a.BYTES,r=(0,eb.qj)("compactSignature",e,2*t);return new u(a.fromBytes(r.subarray(0,t)),a.fromBytes(r.subarray(t,2*t)))}static fromDER(e){let{r:t,s:r}=eE.toSig((0,eb.qj)("DER",e));return new u(t,r)}assertValidity(){}addRecoveryBit(e){return new u(this.r,this.s,e)}recoverPublicKey(t){let r=s.ORDER,{r:n,s:i,recovery:l}=this;if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");if(o*eS<r&&l>1)throw Error("recovery id is ambiguous for h>1 curve");let c=2===l||3===l?n+o:n;if(!s.isValid(c))throw Error("recovery id 2 or 3 invalid");let u=s.toBytes(c),d=e.fromHex((0,ey.Id)(eC((1&l)==0),u)),h=a.inv(c),f=p((0,eb.qj)("msgHash",t)),g=a.create(-f*h),m=a.create(i*h),b=e.BASE.multiplyUnsafe(g).add(d.multiplyUnsafe(m));if(b.is0())throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>o>>eP}normalizeS(){return this.hasHighS()?new u(this.r,a.neg(this.s),this.recovery):this}toBytes(e){if("compact"===e)return(0,ey.Id)(a.toBytes(this.r),a.toBytes(this.s));if("der"===e)return(0,ey.aT)(eE.hexFromSig(this));throw Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return(0,ey.My)(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return(0,ey.My)(this.toBytes("compact"))}}let d=e_(a,r.allowedPrivateKeyLengths,r.wrapPrivateKey);function h(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;let n=(0,eb.qj)("key",t).length,i=s.BYTES,o=i+1;if(!r.allowedPrivateKeyLengths&&a.BYTES!==o)return n===o||n===2*i+1}let f=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=(0,eb.Ph)(e),r=8*e.length-l;return r>0?t>>BigInt(r):t},p=t.bits2int_modN||function(e){return a.create(f(e))},g=(0,eb.OG)(l);function m(e){return(0,eb.aK)("num < 2^"+l,e,ek,g),a.toBytes(e)}let b={lowS:t.lowS,prehash:!1},y={lowS:t.lowS,prehash:!1};return e.BASE.precompute(8),Object.freeze({getPublicKey:function(t,r=!0){return e.fromPrivateKey(t).toBytes(r)},getSharedSecret:function(t,r,n=!0){if(!0===h(t))throw Error("first arg must be private key");if(!1===h(r))throw Error("second arg must be public key");return e.fromHex(r).multiply(d(t)).toBytes(n)},sign:function(r,l,c=b){let{seed:h,k2sig:g}=function(r,i,l=b){if(["recovered","canonical"].some(e=>e in l))throw Error("sign() legacy options not supported");let{hash:c}=t,{lowS:h,prehash:g,extraEntropy:y}=l;null==h&&(h=!0),r=(0,eb.qj)("msgHash",r),ev(l),g&&(r=(0,eb.qj)("prehashed msgHash",c(r)));let x=p(r),w=d(i),v=[m(w),m(x)];if(null!=y&&!1!==y){let e=!0===y?n(s.BYTES):y;v.push((0,eb.qj)("extraEntropy",e))}return{seed:(0,ey.Id)(...v),k2sig:function(t){let r=f(t);if(!a.isValidNot0(r))return;let n=a.inv(r),i=e.BASE.multiply(r).toAffine(),s=a.create(i.x);if(s===ek)return;let l=a.create(n*a.create(x+s*w));if(l===ek)return;let c=2*(i.x!==s)|Number(i.y&eP),d=l;if(h&&l>o>>eP){var p;d=(p=l)>o>>eP?a.neg(p):p,c^=1}return new u(s,d,c)}}}(r,l,c);return(0,eb.fg)(t.hash.outputLen,a.BYTES,i)(h,g)},verify:function(r,n,i,s=y){let o,l;n=(0,eb.qj)("msgHash",n),i=(0,eb.qj)("publicKey",i),ev(s);let{lowS:c,prehash:d,format:h}=s;if("strict"in s)throw Error("options.strict was renamed to lowS");if(void 0!==h&&!["compact","der","js"].includes(h))throw Error('format must be "compact", "der" or "js"');let f="string"==typeof r||(0,ey.aY)(r),g=!f&&!h&&"object"==typeof r&&null!==r&&"bigint"==typeof r.r&&"bigint"==typeof r.s;if(!f&&!g)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(g){if(void 0===h||"js"===h)l=new u(r.r,r.s);else throw Error("invalid format")}if(f){try{"compact"!==h&&(l=u.fromDER(r))}catch(e){if(!(e instanceof eE.Err))throw e}l||"der"===h||(l=u.fromCompact(r))}o=e.fromHex(i)}catch(e){return!1}if(!l||c&&l.hasHighS())return!1;d&&(n=t.hash(n));let{r:m,s:b}=l,x=p(n),w=a.inv(b),v=a.create(x*w),A=a.create(m*w),E=e.BASE.multiplyUnsafe(v).add(o.multiplyUnsafe(A));return!E.is0()&&a.create(E.x)===m},utils:{isValidPrivateKey(e){try{return d(e),!0}catch(e){return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>(0,ew.qy)(n((0,ew.Tp)(o)),o),precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)},Point:e,Signature:u})}(function(e,t={}){var r,n,i;let{Fp:s,Fn:a}=(0,ex.UT)("weierstrass",e,t),{h:o,n:l}=e;(0,eb.DS)(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:c}=t;if(c&&(!s.is0(e.a)||"bigint"!=typeof c.beta||"function"!=typeof c.splitScalar))throw Error('invalid endo: expected "beta": bigint and "splitScalar": function');function u(){if(!s.isOdd)throw Error("compression is not supported: Field does not have .isOdd()")}let d=t.toBytes||function(e,t,r){let{x:n,y:i}=t.toAffine(),a=s.toBytes(n);if((0,eb.e8)("isCompressed",r),!r)return(0,ey.Id)(Uint8Array.of(4),a,s.toBytes(i));{u();let e=!s.isOdd(i);return(0,ey.Id)(eC(e),a)}},h=t.fromBytes||function(e){(0,ey.DO)(e);let t=s.BYTES,r=t+1,n=2*t+1,i=e.length,a=e[0],o=e.subarray(1);if(i===r&&(2===a||3===a)){let e;let t=s.fromBytes(o);if(!s.isValid(t))throw Error("bad point: is not on curve, wrong x");let r=f(t);try{e=s.sqrt(r)}catch(e){throw Error("bad point: is not on curve, sqrt error"+(e instanceof Error?": "+e.message:""))}return u(),(1&a)==1!==s.isOdd(e)&&(e=s.neg(e)),{x:t,y:e}}if(i===n&&4===a){let e=s.fromBytes(o.subarray(0*t,+t)),r=s.fromBytes(o.subarray(+t,2*t));if(!p(e,r))throw Error("bad point: is not on curve");return{x:e,y:r}}throw Error(`bad point: got length ${i}, expected compressed=${r} or uncompressed=${n}`)},f=(r=s,n=e.a,i=e.b,function(e){let t=r.sqr(e),s=r.mul(t,e);return r.add(r.add(s,r.mul(e,n)),i)});function p(e,t){let r=s.sqr(t),n=f(e);return s.eql(r,n)}if(!p(e.Gx,e.Gy))throw Error("bad curve params: generator point");let g=s.mul(s.pow(e.a,eI),eT),m=s.mul(s.sqr(e.b),BigInt(27));if(s.is0(s.add(g,m)))throw Error("bad curve params: a or b");function b(e,t,r=!1){if(!s.isValid(t)||r&&s.is0(t))throw Error(`bad point coordinate ${e}`);return t}function y(e){if(!(e instanceof A))throw Error("ProjectivePoint expected")}let x=(0,eb.x)((e,t)=>{let{px:r,py:n,pz:i}=e;if(s.eql(i,s.ONE))return{x:r,y:n};let a=e.is0();null==t&&(t=a?s.ONE:s.inv(i));let o=s.mul(r,t),l=s.mul(n,t),c=s.mul(i,t);if(a)return{x:s.ZERO,y:s.ZERO};if(!s.eql(c,s.ONE))throw Error("invZ was invalid");return{x:o,y:l}}),w=(0,eb.x)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!s.is0(e.py))return;throw Error("bad point: ZERO")}let{x:r,y:n}=e.toAffine();if(!s.isValid(r)||!s.isValid(n))throw Error("bad point: x or y not field elements");if(!p(r,n))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});function v(e,t,r,n,i){return r=new A(s.mul(r.px,e),r.py,r.pz),t=(0,ex.u0)(n,t),r=(0,ex.u0)(i,r),t.add(r)}class A{constructor(e,t,r){this.px=b("x",e),this.py=b("y",t,!0),this.pz=b("z",r),Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!s.isValid(t)||!s.isValid(r))throw Error("invalid affine point");if(e instanceof A)throw Error("projective point not allowed");return s.is0(t)&&s.is0(r)?A.ZERO:new A(t,r,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){return(0,ex.Ak)(A,"pz",e)}static fromBytes(e){return(0,ey.DO)(e),A.fromHex(e)}static fromHex(e){let t=A.fromAffine(h((0,eb.qj)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){let r=e_(a,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return A.BASE.multiply(r(e))}static msm(e,t){return(0,ex.Xf)(A,a,e,t)}precompute(e=8,t=!0){return k.setWindowSize(this,e),t||this.multiply(eI),this}_setWindowSize(e){this.precompute(e)}assertValidity(){w(this)}hasEvenY(){let{y:e}=this.toAffine();if(!s.isOdd)throw Error("Field doesn't support isOdd");return!s.isOdd(e)}equals(e){y(e);let{px:t,py:r,pz:n}=this,{px:i,py:a,pz:o}=e,l=s.eql(s.mul(t,o),s.mul(i,n)),c=s.eql(s.mul(r,o),s.mul(a,n));return l&&c}negate(){return new A(this.px,s.neg(this.py),this.pz)}double(){let{a:t,b:r}=e,n=s.mul(r,eI),{px:i,py:a,pz:o}=this,l=s.ZERO,c=s.ZERO,u=s.ZERO,d=s.mul(i,i),h=s.mul(a,a),f=s.mul(o,o),p=s.mul(i,a);return p=s.add(p,p),u=s.mul(i,o),u=s.add(u,u),l=s.mul(t,u),c=s.mul(n,f),c=s.add(l,c),l=s.sub(h,c),c=s.add(h,c),c=s.mul(l,c),l=s.mul(p,l),u=s.mul(n,u),f=s.mul(t,f),p=s.sub(d,f),p=s.mul(t,p),p=s.add(p,u),u=s.add(d,d),d=s.add(u,d),d=s.add(d,f),d=s.mul(d,p),c=s.add(c,d),f=s.mul(a,o),f=s.add(f,f),d=s.mul(f,p),l=s.sub(l,d),u=s.mul(f,h),u=s.add(u,u),new A(l,c,u=s.add(u,u))}add(t){y(t);let{px:r,py:n,pz:i}=this,{px:a,py:o,pz:l}=t,c=s.ZERO,u=s.ZERO,d=s.ZERO,h=e.a,f=s.mul(e.b,eI),p=s.mul(r,a),g=s.mul(n,o),m=s.mul(i,l),b=s.add(r,n),x=s.add(a,o);b=s.mul(b,x),x=s.add(p,g),b=s.sub(b,x),x=s.add(r,i);let w=s.add(a,l);return x=s.mul(x,w),w=s.add(p,m),x=s.sub(x,w),w=s.add(n,i),c=s.add(o,l),w=s.mul(w,c),c=s.add(g,m),w=s.sub(w,c),d=s.mul(h,x),c=s.mul(f,m),d=s.add(c,d),c=s.sub(g,d),d=s.add(g,d),u=s.mul(c,d),g=s.add(p,p),g=s.add(g,p),m=s.mul(h,m),x=s.mul(f,x),g=s.add(g,m),m=s.sub(p,m),m=s.mul(h,m),x=s.add(x,m),p=s.mul(g,x),u=s.add(u,p),p=s.mul(w,x),c=s.mul(b,c),c=s.sub(c,p),p=s.mul(b,g),d=s.mul(w,d),new A(c,u,d=s.add(d,p))}subtract(e){return this.add(e.negate())}is0(){return this.equals(A.ZERO)}multiply(e){let r,n;let{endo:i}=t;if(!a.isValidNot0(e))throw Error("invalid scalar: out of range");let s=e=>k.wNAFCached(this,e,A.normalizeZ);if(i){let{k1neg:t,k1:a,k2neg:o,k2:l}=i.splitScalar(e),{p:c,f:u}=s(a),{p:d,f:h}=s(l);n=u.add(h),r=v(i.beta,c,d,t,o)}else{let{p:t,f:i}=s(e);r=t,n=i}return A.normalizeZ([r,n])[0]}multiplyUnsafe(e){let{endo:r}=t;if(!a.isValid(e))throw Error("invalid scalar: out of range");if(e===ek||this.is0())return A.ZERO;if(e===eP)return this;if(k.hasPrecomputes(this))return this.multiply(e);if(!r)return k.wNAFCachedUnsafe(this,e);{let{k1neg:t,k1:n,k2neg:i,k2:s}=r.splitScalar(e),{p1:a,p2:o}=(0,ex.fH)(A,this,n,s);return v(r.beta,a,o,t,i)}}multiplyAndAddUnsafe(e,t,r){let n=this.multiplyUnsafe(t).add(e.multiplyUnsafe(r));return n.is0()?void 0:n}toAffine(e){return x(this,e)}isTorsionFree(){let{isTorsionFree:e}=t;return o===eP||(e?e(A,this):k.wNAFCachedUnsafe(this,l).is0())}clearCofactor(){let{clearCofactor:e}=t;return o===eP?this:e?e(A,this):this.multiplyUnsafe(o)}toBytes(e=!0){return(0,eb.e8)("isCompressed",e),this.assertValidity(),d(A,this,e)}toRawBytes(e=!0){return this.toBytes(e)}toHex(e=!0){return(0,ey.My)(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}A.BASE=new A(e.Gx,e.Gy,s.ONE),A.ZERO=new A(s.ZERO,s.ONE,s.ZERO),A.Fp=s,A.Fn=a;let E=a.BITS,k=(0,ex.hT)(A,t.endo?Math.ceil(E/2):E);return A}(t,r),n,r);return Object.assign({},i,{ProjectivePoint:i.Point,CURVE:e})})({...e,hash:t});return{...r(t),create:r}}({...eO,Fp:eD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=eO.n,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-eN*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=BigInt("0x100000000000000000000000000000000"),a=eB(r*e,t),o=eB(-n*e,t),l=(0,ew.zi)(e-a*r-o*i,t),c=(0,ew.zi)(-a*n-o*r,t),u=l>s,d=c>s;if(u&&(l=t-l),d&&(c=t-c),l>s||c>s)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:l,k2neg:d,k2:c}}}},eg.sc),eU={},eF=e=>e.toBytes(!0).slice(1),ej=e=>mod(e,eO.n),ez=e=>e%eM===eR;var eH=r(6572);class eG{type="secp256k1";raw;_key;constructor(e){var t;this._key=function(e){try{return eL.ProjectivePoint.fromHex(e),e}catch(e){throw new l.O7(String(e))}}(e),this.raw=(t=this._key,eL.ProjectivePoint.fromHex(t).toRawBytes(!0))}toMultihash(){return P.identity.digest(eQ(this))}toCID(){return k.TO.createV1(114,this.toMultihash())}toString(){return E.base58btc.encode(this.toMultihash().bytes).substring(1)}equals(e){return!!(null!=e&&e.raw instanceof Uint8Array)&&(0,S.a)(this.raw,e.raw)}verify(e,t,r){return function(e,t,r,n){let i=eH.sha256.digest(r instanceof Uint8Array?r:r.subarray());if(z(i))return i.then(({digest:r})=>(n?.signal?.throwIfAborted(),eL.verify(t,r,e))).catch(e=>{if("AbortError"===e.name)throw e;throw new $(String(e))});try{return n?.signal?.throwIfAborted(),eL.verify(t,i.digest,e)}catch(e){throw new $(String(e))}}(this._key,t,e,r)}}class e${type="secp256k1";raw;publicKey;constructor(e,t){this.raw=function(e){try{return eL.getPublicKey(e,!0),e}catch(e){throw new l.CG(String(e))}}(e),this.publicKey=new eG(t??function(e){try{return eL.getPublicKey(e,!0)}catch(e){throw new l.CG(String(e))}}(e))}equals(e){return!!(null!=e&&e.raw instanceof Uint8Array)&&(0,S.a)(this.raw,e.raw)}sign(e,t){return function(e,t,r){let n=eH.sha256.digest(t instanceof Uint8Array?t:t.subarray());if(z(n))return n.then(({digest:t})=>(r?.signal?.throwIfAborted(),eL.sign(t,e).toDERRawBytes())).catch(e=>{if("AbortError"===e.name)throw e;throw new G(String(e))});try{return eL.sign(n.digest,e).toDERRawBytes()}catch(e){throw new G(String(e))}}(this.raw,e,t)}}async function eV(){return new e$(eL.utils.randomPrivateKey())}async function eq(e,t){if("Ed25519"===e)return et();if("secp256k1"===e)return eV();if("RSA"===e){var r;return ep(null==(r=t)?2048:parseInt(r,10))}if("ECDSA"===e)return j(function(e){if("P-256"===e||null==e)return"P-256";if("P-384"===e)return"P-384";if("P-521"===e)return"P-521";throw new l.gG("Unsupported curve, should be P-256, P-384 or P-521")}(t));throw new l.$q}function eK(e,t){let{Type:r,Data:n}=a.decode(e),s=n??new Uint8Array;switch(r){case i.RSA:return function(e,t){if(e.byteLength>=1062)throw new l.O7("Key size is too large");return function(e,t,r){let n=function(e){let t=m(e[1],{offset:0});return{kty:"RSA",n:(0,d.d)(t[0],"base64url"),e:(0,d.d)(t[1],"base64url")}}(e);if(null==r){let e=(0,ei.sc)(a.encode({Type:i.RSA,Data:t}));r=(0,es.vt)(18,e)}return new eu(n,r)}(m(e,{offset:0}),e,t)}(s,t);case i.Ed25519:return ee(s);case i.secp256k1:return new eG(s);case i.ECDSA:return U(m(s));default:throw new l.$q}}function eW(e){let{Type:t,Data:r}=a.decode(e.digest),n=r??new Uint8Array;switch(t){case i.Ed25519:return ee(n);case i.secp256k1:return new eG(n);case i.ECDSA:return U(m(n));default:throw new l.$q}}function eQ(e){return a.encode({Type:i[e.type],Data:e.raw})}},4897:(e,t,r)=>{e.exports=r(4363)},4922:(e,t,r)=>{"use strict";r.d(t,{b:()=>d});var n=r(3683),i=r(8121),s=r(9982);let a=BigInt(0),o=BigInt(36);function l(e){let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);let s=(0,i.q5)((0,n.S)(r));for(let e=0;e<40;e+=2)s[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&s[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let c={};for(let e=0;e<10;e++)c[String(e)]=String(e);for(let e=0;e<26;e++)c[String.fromCharCode(65+e)]=String(10+e);let u=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function d(e){if((0,s.MR)("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=l(e);return(0,s.MR)(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){(0,s.MR)(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>c[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}(e),"bad icap checksum","address",e);let t=(function(e){e=e.toLowerCase();let t=a;for(let r=0;r<e.length;r++)t=t*o+u[e[r]];return t})(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return l("0x"+t)}(0,s.MR)(!1,"invalid address","address",e)}},4931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbiCoder=void 0;let n=r(8662),i=r(2884),s=r(9134),a=r(3539),o=r(9034),l=r(9777),c=r(6578),u=r(803),d=r(8007),h=r(6684),f=r(7260),p=r(2332),g=r(9111),m=r(8662),b=new Map;b.set(0,"GENERIC_PANIC"),b.set(1,"ASSERT_FALSE"),b.set(17,"OVERFLOW"),b.set(18,"DIVIDE_BY_ZERO"),b.set(33,"ENUM_RANGE_ERROR"),b.set(34,"BAD_STORAGE_DATA"),b.set(49,"STACK_UNDERFLOW"),b.set(50,"ARRAY_RANGE_ERROR"),b.set(65,"OUT_OF_MEMORY"),b.set(81,"UNINITIALIZED_FUNCTION_CALL");let y=new RegExp(/^bytes([0-9]*)$/),x=new RegExp(/^(u?int)([0-9]*)$/),w=null,v=1024;class A{#x(e){if(e.isArray())return new a.ArrayCoder(this.#x(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new f.TupleCoder(e.components.map(e=>this.#x(e)),e.name);switch(e.baseType){case"address":return new s.AddressCoder(e.name);case"bool":return new o.BooleanCoder(e.name);case"string":return new h.StringCoder(e.name);case"bytes":return new l.BytesCoder(e.name);case"":return new u.NullCoder(e.name)}let t=e.type.match(x);if(t){let r=parseInt(t[2]||"256");return(0,n.assertArgument)(0!==r&&r<=256&&r%8==0,"invalid "+t[1]+" bit length","param",e),new d.NumberCoder(r/8,"int"===t[1],e.name)}if(t=e.type.match(y)){let r=parseInt(t[1]);return(0,n.assertArgument)(0!==r&&r<=32,"invalid bytes length","param",e),new c.FixedBytesCoder(r,e.name)}(0,n.assertArgument)(!1,"invalid type","type",e.type)}getDefaultValue(e){let t=e.map(e=>this.#x(p.ParamType.from(e)));return new f.TupleCoder(t,"_").defaultValue()}encode(e,t){(0,n.assertArgumentCount)(t.length,e.length,"types/values length mismatch");let r=e.map(e=>this.#x(p.ParamType.from(e))),s=new f.TupleCoder(r,"_"),a=new i.Writer;return s.encode(a,t),a.data}decode(e,t,r){let n=e.map(e=>this.#x(p.ParamType.from(e)));return new f.TupleCoder(n,"_").decode(new i.Reader(t,r,v))}static _setDefaultMaxInflation(e){(0,n.assertArgument)("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),v=e}static defaultAbiCoder(){return null==w&&(w=new A),w}static getBuiltinCallException(e,t,r){return function(e,t,r,n){let i="missing revert data",s=null,a=null;if(r){i="execution reverted";let e=(0,m.getBytes)(r);if(r=(0,m.hexlify)(r),0===e.length)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(e.length%32!=4)i+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===(0,m.hexlify)(e.slice(0,4)))try{s=n.decode(["string"],e.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch(e){i+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===(0,m.hexlify)(e.slice(0,4)))try{let t=Number(n.decode(["uint256"],e.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[t]},s=`Panic due to ${b.get(t)||"UNKNOWN"}(${t})`,i+=`: ${s}`}catch(e){i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}let o={to:t.to?(0,g.getAddress)(t.to):null,data:t.data||"0x"};return t.from&&(o.from=(0,g.getAddress)(t.from)),(0,m.makeError)(i,"CALL_EXCEPTION",{action:e,data:r,reason:s,transaction:o,invocation:null,revert:a})}(e,t,r,A.defaultAbiCoder())}}t.AbiCoder=A},5003:(e,t,r)=>{"use strict";r.d(t,{sc:()=>n});let n=r(4322).sc},5090:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeOwlA=void 0;let n=r(8662),i=r(8259),s=r(2963);t.decodeOwlA=function(e,t){let r=(0,s.decodeOwl)(e).join(",");return t.split(/,/g).forEach(e=>{let s=e.match(/^([a-z]*)([0-9]+)([0-9])(.*)$/);(0,n.assertArgument)(null!==s,"internal error parsing accents","accents",t);let a=0,o=(0,i.decodeBits)(parseInt(s[3]),s[4]),l=parseInt(s[2]),c=RegExp(`([${s[1]}])`,"g");r=r.replace(c,(e,t)=>(0==--o[a]&&(t=String.fromCharCode(t.charCodeAt(0),l),a++),t))}),r.split(",")}},5116:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ECB=void 0;let n=r(5383);class i extends n.ModeOfOperation{constructor(e){super("ECB",e,i)}encrypt(e){if(e.length%16)throw TypeError("invalid plaintext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16)t.set(this.aes.encrypt(e.subarray(r,r+16)),r);return t}decrypt(e){if(e.length%16)throw TypeError("invalid ciphertext size (must be multiple of 16 bytes)");let t=new Uint8Array(e.length);for(let r=0;r<e.length;r+=16)t.set(this.aes.decrypt(e.subarray(r,r+16)),r);return t}}t.ECB=i},5173:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});var n=r(2315);class i{set;constructor(e){if(this.set=new Set,null!=e)for(let t of e)this.set.add(t.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(e){this.set.add(e.toString())}clear(){this.set.clear()}delete(e){this.set.delete(e.toString())}entries(){return(0,n.r)(this.set.entries(),e=>{let t=(0,n.X)(e[0]);return[t,t]})}forEach(e){this.set.forEach(t=>{let r=(0,n.X)(t);e(r,r,this)})}has(e){return this.set.has(e.toString())}values(){return(0,n.r)(this.set.values(),e=>(0,n.X)(e))}intersection(e){let t=new i;for(let r of e)this.has(r)&&t.add(r);return t}difference(e){let t=new i;for(let r of this)e.has(r)||t.add(r);return t}union(e){let t=new i;for(let r of e)t.add(r);for(let e of this)t.add(e);return t}}},5188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showThrottleMessage=void 0;let r=new Set;t.showThrottleMessage=function(e){!r.has(e)&&(r.add(e),console.log("========= NOTICE ========="),console.log(`Request-Rate Exceeded for ${e} (this message will not be repeated)`),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.org/api-keys/"),console.log("=========================="))}},5216:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spelunk=t.getPassword=t.zpad=t.looseArrayify=void 0;let n=r(8662);function i(e){return"string"!=typeof e||e.startsWith("0x")||(e="0x"+e),(0,n.getBytesCopy)(e)}t.looseArrayify=i,t.zpad=function(e,t){for(e=String(e);e.length<t;)e="0"+e;return e},t.getPassword=function(e){return"string"==typeof e?(0,n.toUtf8Bytes)(e,"NFKC"):(0,n.getBytesCopy)(e)},t.spelunk=function(e,t){let r=t.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);(0,n.assertArgument)(null!=r,"invalid path","path",t);let s=r[1],a=r[3],o="!"===r[4],l=e;for(let e of s.toLowerCase().split(".")){if(Array.isArray(l)){if(!e.match(/^[0-9]+$/))break;l=l[parseInt(e)]}else if("object"==typeof l){let t=null;for(let r in l)if(r.toLowerCase()===e){t=l[r];break}l=t}else l=null;if(null==l)break}if((0,n.assertArgument)(!o||null!=l,"missing required value","path",s),a&&null!=l){if("int"===a){if("string"==typeof l&&l.match(/^-?[0-9]+$/))return parseInt(l);if(Number.isSafeInteger(l))return l}if("number"===a&&"string"==typeof l&&l.match(/^-?[0-9.]*$/))return parseFloat(l);if("data"===a&&"string"==typeof l)return i(l);if("array"===a&&Array.isArray(l)||a===typeof l)return l;(0,n.assertArgument)(!1,`wrong type found for ${a} `,"path",s)}return l}},5226:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfuraProvider=t.InfuraWebSocketProvider=void 0;let n=r(8662),i=r(5188),s=r(9307),a=r(4822),o=r(3248),l="84842078b09946638c03157f83405213";class c extends o.WebSocketProvider{projectId;projectSecret;constructor(e,t){let r=new u(e,t),i=r._getConnection();(0,n.assert)(!i.credentials,"INFURA WebSocket project secrets unsupported","UNSUPPORTED_OPERATION",{operation:"InfuraProvider.getWebSocketProvider()"}),super(i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),r._network),(0,n.defineProperties)(this,{projectId:r.projectId,projectSecret:r.projectSecret})}isCommunityResource(){return this.projectId===l}}t.InfuraWebSocketProvider=c;class u extends a.JsonRpcProvider{projectId;projectSecret;constructor(e,t,r){null==e&&(e="mainnet");let i=s.Network.from(e);null==t&&(t=l),null==r&&(r=null),super(u.getRequest(i,t,r),i,{staticNetwork:i}),(0,n.defineProperties)(this,{projectId:t,projectSecret:r})}_getProvider(e){try{return new u(e,this.projectId,this.projectSecret)}catch(e){}return super._getProvider(e)}isCommunityResource(){return this.projectId===l}static getWebSocketProvider(e,t){return new c(e,t)}static getRequest(e,t,r){null==t&&(t=l),null==r&&(r=null);let s=new n.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"mainnet.infura.io";case"goerli":return"goerli.infura.io";case"sepolia":return"sepolia.infura.io";case"arbitrum":return"arbitrum-mainnet.infura.io";case"arbitrum-goerli":return"arbitrum-goerli.infura.io";case"arbitrum-sepolia":return"arbitrum-sepolia.infura.io";case"base":return"base-mainnet.infura.io";case"base-goerlia":case"base-goerli":return"base-goerli.infura.io";case"base-sepolia":return"base-sepolia.infura.io";case"bnb":return"bsc-mainnet.infura.io";case"bnbt":return"bsc-testnet.infura.io";case"linea":return"linea-mainnet.infura.io";case"linea-goerli":return"linea-goerli.infura.io";case"linea-sepolia":return"linea-sepolia.infura.io";case"matic":return"polygon-mainnet.infura.io";case"matic-amoy":return"polygon-amoy.infura.io";case"matic-mumbai":return"polygon-mumbai.infura.io";case"optimism":return"optimism-mainnet.infura.io";case"optimism-goerli":return"optimism-goerli.infura.io";case"optimism-sepolia":return"optimism-sepolia.infura.io"}(0,n.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/v3/${t}`);return s.allowGzip=!0,r&&s.setCredentials("",r),t===l&&(s.retryFunc=async(e,t,r)=>((0,i.showThrottleMessage)("InfuraProvider"),!0)),s}}t.InfuraProvider=u},5247:(e,t,r)=>{"use strict";r.d(t,{$:()=>b});var n=r(7876),i=r(4232),s=r(1090);let a=e=>e?"":void 0;var o=r(2850),l=r(659),c=r(7175),u=r(5563);let d=(0,c.B)("span"),h=(0,c.B)("div",{base:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},variants:{axis:{horizontal:{insetStart:"50%",translate:"-50%",_rtl:{translate:"50%"}},vertical:{top:"50%",translate:"0 -50%"},both:{insetStart:"50%",top:"50%",translate:"-50% -50%",_rtl:{translate:"50% -50%"}}}},defaultVariants:{axis:"both"}});h.displayName="AbsoluteCenter";let f=i.forwardRef(function(e,t){let{spinner:r=(0,n.jsx)(u.y,{size:"inherit",borderWidth:"0.125em",color:"inherit"}),spinnerPlacement:i="start",children:s,text:a,visible:o=!0,...l}=e;return o?a?(0,n.jsxs)(d,{ref:t,display:"contents",...l,children:["start"===i&&r,a,"end"===i&&r]}):r?(0,n.jsxs)(d,{ref:t,display:"contents",...l,children:[(0,n.jsx)(h,{display:"inline-flex",children:r}),(0,n.jsx)(d,{visibility:"hidden",display:"contents",children:s})]}):(0,n.jsx)(d,{ref:t,display:"contents",...l,children:s}):s}),{useRecipeResult:p,PropsProvider:g,usePropsContext:m}=(0,l.a)({key:"button"}),b=(0,i.forwardRef)(function(e,t){let r=m(),l=(0,i.useMemo)(()=>(0,s.v)(r,e),[r,e]),u=p(l),{loading:d,loadingText:h,children:g,spinner:b,spinnerPlacement:y,...x}=u.props;return(0,n.jsx)(c.B.button,{type:"button",ref:t,...x,"data-loading":a(d),disabled:d||x.disabled,className:(0,o.cx)(u.className,l.className),css:[u.styles,l.css],children:!l.asChild&&d?(0,n.jsx)(f,{spinner:b,text:h,spinnerPlacement:y,children:g}):g})})},5250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LangEn=void 0;let n=r(9313),i=null;class s extends n.WordlistOwl{constructor(){super("en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}static wordlist(){return null==i&&(i=new s),i}}t.LangEn=s},5322:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2678);function i(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function s(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function a(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function o(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function l(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function c(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function u(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function d(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function h(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),u(e/0x100000000>>>0,t,r),u(e>>>0,t,r+4),t}function f(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),d(e>>>0,t,r),d(e/0x100000000>>>0,t,r+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=i,t.writeInt16BE=i,t.writeUint16LE=s,t.writeInt16LE=s,t.readInt32BE=a,t.readUint32BE=o,t.readInt32LE=l,t.readUint32LE=c,t.writeUint32BE=u,t.writeInt32BE=u,t.writeUint32LE=d,t.writeInt32LE=d,t.readInt64BE=function(e,t){void 0===t&&(t=0);var r=a(e,t),n=a(e,t+4);return 0x100000000*r+n-(n>>31)*0x100000000},t.readUint64BE=function(e,t){return void 0===t&&(t=0),0x100000000*o(e,t)+o(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var r=l(e,t);return 0x100000000*l(e,t+4)+r-(r>>31)*0x100000000},t.readUint64LE=function(e,t){void 0===t&&(t=0);var r=c(e,t);return 0x100000000*c(e,t+4)+r},t.writeUint64BE=h,t.writeInt64BE=h,t.writeUint64LE=f,t.writeInt64LE=f,t.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=e/8+r-1;s>=r;s--)n+=t[s]*i,i*=256;return n},t.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+e/8;s++)n+=t[s]*i,i*=256;return n},t.writeUintBE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw Error("writeUintBE value must be an integer");for(var s=1,a=e/8+i-1;a>=i;a--)r[a]=t/s&255,s*=256;return r},t.writeUintLE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw Error("writeUintLE value must be an integer");for(var s=1,a=i;a<i+e/8;a++)r[a]=t/s&255,s*=256;return r},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},t.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},t.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},t.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t}},5364:(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function i(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function o(e,t){i(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}r.d(t,{CG:()=>o,ai:()=>n,ee:()=>i,t2:()=>a,tW:()=>s})},5367:(e,t,r)=>{"use strict";r.d(t,{do:()=>o,vm:()=>s,JI:()=>a});class n{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){let t=this.index,r=e();return void 0===r&&(this.index=t),r}parseWith(e){let t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let t=this.readChar();if(t===e)return t})}readSeparator(e,t,r){return this.readAtomically(()=>{if(!(t>0)||void 0!==this.readGivenChar(e))return r()})}readNumber(e,t,r,n){return this.readAtomically(()=>{let i=0,s=0,a=this.peekChar();if(void 0===a)return;let o=2**(8*n)-1;for(;;){let r=this.readAtomically(()=>{let t=this.readChar();if(void 0===t)return;let r=Number.parseInt(t,e);if(!Number.isNaN(r))return r});if(void 0===r)break;if(i*=e,(i+=r)>o||(s+=1,void 0!==t&&s>t))return}return 0===s?void 0:!r&&"0"===a&&s>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let t=0;t<e.length;t++){let r=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(void 0===r)return;e[t]=r}return e})}readIPv6Addr(){let e=e=>{for(let t=0;t<e.length/2;t++){let r=2*t;if(t<e.length-3){let n=this.readSeparator(":",t,()=>this.readIPv4Addr());if(void 0!==n)return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],[r+4,!0]}let n=this.readSeparator(":",t,()=>this.readNumber(16,4,!0,2));if(void 0===n)return[r,!1];e[r]=n>>8,e[r+1]=255&n}return[e.length,!1]};return this.readAtomically(()=>{let t=new Uint8Array(16),[r,n]=e(t);if(16===r)return t;if(n||void 0===this.readGivenChar(":")||void 0===this.readGivenChar(":"))return;let i=new Uint8Array(14),[s]=e(i.subarray(0,16-(r+2)));return t.set(i.subarray(0,s),16-s),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}let i=new n;function s(e){if(!(e.length>15))return i.new(e).parseWith(()=>i.readIPv4Addr())}function a(e){if(e.includes("%")&&(e=e.split("%")[0]),!(e.length>45))return i.new(e).parseWith(()=>i.readIPv6Addr())}function o(e,t=!1){if(e.includes("%")&&(e=e.split("%")[0]),e.length>45)return;let r=i.new(e).parseWith(()=>i.readIPAddr());return r?t&&4===r.length?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,r[0],r[1],r[2],r[3]]):r:void 0}},5378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Interface=t.Indexed=t.ErrorDescription=t.TransactionDescription=t.LogDescription=t.Result=t.checkResultErrors=void 0;let n=r(6870),i=r(4259),s=r(8662),a=r(4931),o=r(2884);Object.defineProperty(t,"checkResultErrors",{enumerable:!0,get:function(){return o.checkResultErrors}}),Object.defineProperty(t,"Result",{enumerable:!0,get:function(){return o.Result}});let l=r(2332),c=r(4037);class u{fragment;name;signature;topic;args;constructor(e,t,r){let n=e.name,i=e.format();(0,s.defineProperties)(this,{fragment:e,name:n,signature:i,topic:t,args:r})}}t.LogDescription=u;class d{fragment;name;args;signature;selector;value;constructor(e,t,r,n){let i=e.name,a=e.format();(0,s.defineProperties)(this,{fragment:e,name:i,args:r,signature:a,selector:t,value:n})}}t.TransactionDescription=d;class h{fragment;name;args;signature;selector;constructor(e,t,r){let n=e.name,i=e.format();(0,s.defineProperties)(this,{fragment:e,name:n,args:r,signature:i,selector:t})}}t.ErrorDescription=h;class f{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){(0,s.defineProperties)(this,{hash:e,_isIndexed:!0})}}t.Indexed=f;let p={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},g={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&p[e.toString()]&&(t=p[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class m{fragments;deploy;fallback;receive;#w;#v;#A;#E;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#A=new Map,this.#w=new Map,this.#v=new Map;let r=[];for(let e of t)try{r.push(l.Fragment.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}(0,s.defineProperties)(this,{fragments:Object.freeze(r)});let n=null,i=!1;this.#E=this.getAbiCoder(),this.fragments.forEach((e,t)=>{let r;switch(e.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}(0,s.defineProperties)(this,{deploy:e});return;case"fallback":0===e.inputs.length?i=!0:((0,s.assertArgument)(!n||e.payable!==n.payable,"conflicting fallback fragments",`fragments[${t}]`,e),i=(n=e).payable);return;case"function":r=this.#A;break;case"event":r=this.#v;break;case"error":r=this.#w;break;default:return}let a=e.format();!r.has(a)&&r.set(a,e)}),this.deploy||(0,s.defineProperties)(this,{deploy:l.ConstructorFragment.from("constructor()")}),(0,s.defineProperties)(this,{fallback:n,receive:i})}format(e){let t=e?"minimal":"full";return this.fragments.map(e=>e.format(t))}formatJson(){return JSON.stringify(this.fragments.map(e=>e.format("json")).map(e=>JSON.parse(e)))}getAbiCoder(){return a.AbiCoder.defaultAbiCoder()}#k(e,t,r){if((0,s.isHexString)(e)){let t=e.toLowerCase();for(let e of this.#A.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let n=[];for(let[t,r]of this.#A)t.split("(")[0]===e&&n.push(r);if(t){let e=t.length>0?t[t.length-1]:null,r=t.length,i=!0;c.Typed.isTyped(e)&&"overrides"===e.type&&(i=!1,r--);for(let e=n.length-1;e>=0;e--){let t=n[e].inputs.length;t===r||i&&t===r-1||n.splice(e,1)}for(let e=n.length-1;e>=0;e--){let r=n[e].inputs;for(let i=0;i<t.length;i++)if(c.Typed.isTyped(t[i])){if(i>=r.length){if("overrides"===t[i].type)continue;n.splice(e,1);break}if(t[i].type!==r[i].baseType){n.splice(e,1);break}}}}if(1===n.length&&t&&t.length!==n[0].inputs.length){let e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&n.splice(0,1)}if(0===n.length)return null;if(n.length>1&&r){let t=n.map(e=>JSON.stringify(e.format())).join(", ");(0,s.assertArgument)(!1,`ambiguous function description (i.e. matches ${t})`,"key",e)}return n[0]}let n=this.#A.get(l.FunctionFragment.from(e).format());return n||null}getFunctionName(e){let t=this.#k(e,null,!1);return(0,s.assertArgument)(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#k(e,null,!1)}getFunction(e,t){return this.#k(e,t||null,!0)}forEachFunction(e){let t=Array.from(this.#A.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#A.get(n),r)}}#P(e,t,r){if((0,s.isHexString)(e)){let t=e.toLowerCase();for(let e of this.#v.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){let n=[];for(let[t,r]of this.#v)t.split("(")[0]===e&&n.push(r);if(t){for(let e=n.length-1;e>=0;e--)n[e].inputs.length<t.length&&n.splice(e,1);for(let e=n.length-1;e>=0;e--){let r=n[e].inputs;for(let i=0;i<t.length;i++)if(c.Typed.isTyped(t[i])&&t[i].type!==r[i].baseType){n.splice(e,1);break}}}if(0===n.length)return null;if(n.length>1&&r){let t=n.map(e=>JSON.stringify(e.format())).join(", ");(0,s.assertArgument)(!1,`ambiguous event description (i.e. matches ${t})`,"key",e)}return n[0]}let n=this.#v.get(l.EventFragment.from(e).format());return n||null}getEventName(e){let t=this.#P(e,null,!1);return(0,s.assertArgument)(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#P(e,null,!1)}getEvent(e,t){return this.#P(e,t||null,!0)}forEachEvent(e){let t=Array.from(this.#v.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#v.get(n),r)}}getError(e,t){if((0,s.isHexString)(e)){let t=e.toLowerCase();if(g[t])return l.ErrorFragment.from(g[t].signature);for(let e of this.#w.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let t=[];for(let[r,n]of this.#w)r.split("(")[0]===e&&t.push(n);if(0===t.length)return"Error"===e?l.ErrorFragment.from("error Error(string)"):"Panic"===e?l.ErrorFragment.from("error Panic(uint256)"):null;if(t.length>1){let r=t.map(e=>JSON.stringify(e.format())).join(", ");(0,s.assertArgument)(!1,`ambiguous error description (i.e. ${r})`,"name",e)}return t[0]}if("Error(string)"===(e=l.ErrorFragment.from(e).format()))return l.ErrorFragment.from("error Error(string)");if("Panic(uint256)"===e)return l.ErrorFragment.from("error Panic(uint256)");let r=this.#w.get(e);return r||null}forEachError(e){let t=Array.from(this.#w.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let n=t[r];e(this.#w.get(n),r)}}_decodeParams(e,t){return this.#E.decode(e,t)}_encodeParams(e,t){return this.#E.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);(0,s.assertArgument)(t,"unknown error","fragment",e),e=t}return(0,s.assertArgument)((0,s.dataSlice)(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,(0,s.dataSlice)(t,4))}encodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);(0,s.assertArgument)(t,"unknown error","fragment",e),e=t}return(0,s.concat)([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,s.assertArgument)(t,"unknown function","fragment",e),e=t}return(0,s.assertArgument)((0,s.dataSlice)(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,(0,s.dataSlice)(t,4))}encodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,s.assertArgument)(t,"unknown function","fragment",e),e=t}return(0,s.concat)([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,s.assertArgument)(t,"unknown function","fragment",e),e=t}let r="invalid length for result data",n=(0,s.getBytesCopy)(t);if(n.length%32==0)try{return this.#E.decode(e.outputs,n)}catch(e){r="could not decode result data"}(0,s.assert)(!1,r,"BAD_DATA",{value:(0,s.hexlify)(n),info:{method:e.name,signature:e.format()}})}makeError(e,t){let r=(0,s.getBytes)(e,"data"),n=a.AbiCoder.getBuiltinCallException("call",t,r);if(n.message.startsWith("execution reverted (unknown custom error)")){let e=(0,s.hexlify)(r.slice(0,4)),t=this.getError(e);if(t)try{let e=this.#E.decode(t.inputs,r.slice(4));n.revert={name:t.name,signature:t.format(),args:e},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch(e){n.message="execution reverted (coult not decode custom error)"}}let i=this.parseTransaction(t);return i&&(n.invocation={method:i.name,signature:i.signature,args:i.args}),n}encodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);(0,s.assertArgument)(t,"unknown function","fragment",e),e=t}return(0,s.hexlify)(this.#E.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){let t=this.getEvent(e);(0,s.assertArgument)(t,"unknown event","eventFragment",e),e=t}(0,s.assert)(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});let r=[];e.anonymous||r.push(e.topicHash);let a=(e,t)=>"string"===e.type?(0,i.id)(t):"bytes"===e.type?(0,n.keccak256)((0,s.hexlify)(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=(0,s.toBeHex)(t):e.type.match(/^bytes/)?t=(0,s.zeroPadBytes)(t,32):"address"===e.type&&this.#E.encode(["address"],[t]),(0,s.zeroPadValue)((0,s.hexlify)(t),32));for(t.forEach((t,n)=>{let i=e.inputs[n];if(!i.indexed){(0,s.assertArgument)(null==t,"cannot filter non-indexed parameters; must be null","contract."+i.name,t);return}null==t?r.push(null):"array"===i.baseType||"tuple"===i.baseType?(0,s.assertArgument)(!1,"filtering with tuples or arrays not supported","contract."+i.name,t):Array.isArray(t)?r.push(t.map(e=>a(i,e))):r.push(a(i,t))});r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){if("string"==typeof e){let t=this.getEvent(e);(0,s.assertArgument)(t,"unknown event","eventFragment",e),e=t}let r=[],a=[],o=[];return e.anonymous||r.push(e.topicHash),(0,s.assertArgument)(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((e,s)=>{let l=t[s];if(e.indexed){if("string"===e.type)r.push((0,i.id)(l));else if("bytes"===e.type)r.push((0,n.keccak256)(l));else if("tuple"===e.baseType||"array"===e.baseType)throw Error("not implemented");else r.push(this.#E.encode([e.type],[l]))}else a.push(e),o.push(l)}),{data:this.#E.encode(a,o),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e){let t=this.getEvent(e);(0,s.assertArgument)(t,"unknown event","eventFragment",e),e=t}if(null!=r&&!e.anonymous){let t=e.topicHash;(0,s.assertArgument)((0,s.isHexString)(r[0],32)&&r[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}let n=[],i=[],a=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(l.ParamType.from({type:"bytes32",name:e.name})),a.push(!0)):(n.push(e),a.push(!1)):(i.push(e),a.push(!1))});let c=null!=r?this.#E.decode(n,(0,s.concat)(r)):null,u=this.#E.decode(i,t,!0),d=[],h=[],p=0,g=0;return e.inputs.forEach((e,t)=>{let r=null;if(e.indexed){if(null==c)r=new f(null);else if(a[t])r=new f(c[g++]);else try{r=c[g++]}catch(e){r=e}}else try{r=u[p++]}catch(e){r=e}d.push(r),h.push(e.name||null)}),o.Result.fromItems(d,h)}parseTransaction(e){let t=(0,s.getBytes)(e.data,"tx.data"),r=(0,s.getBigInt)(null!=e.value?e.value:0,"tx.value"),n=this.getFunction((0,s.hexlify)(t.slice(0,4)));if(!n)return null;let i=this.#E.decode(n.inputs,t.slice(4));return new d(n,n.selector,i,r)}parseCallResult(e){throw Error("@TODO")}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new u(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){let t=(0,s.hexlify)(e),r=this.getError((0,s.dataSlice)(t,0,4));if(!r)return null;let n=this.#E.decode(r.inputs,(0,s.dataSlice)(t,4));return new h(r,r.selector,n)}static from(e){return e instanceof m?e:new m("string"==typeof e?JSON.parse(e):"function"==typeof e.formatJson?e.formatJson():"function"==typeof e.format?e.format("json"):e)}}t.Interface=m},5383:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModeOfOperation=void 0;let n=r(2099);class i{constructor(e,t,r){if(r&&!(this instanceof r))throw Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new n.AES(t)},name:{enumerable:!0,value:e}})}}t.ModeOfOperation=i},5405:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scryptSync=t.scrypt=void 0;let n=r(5936),i=r(8662),s=!1,a=!1,o=async function(e,t,r,i,s,a,o){return await (0,n.scryptAsync)(e,t,{N:r,r:i,p:s,dkLen:a,onProgress:o})},l=function(e,t,r,i,s,a){return(0,n.scrypt)(e,t,{N:r,r:i,p:s,dkLen:a})},c=o,u=l;async function d(e,t,r,n,s,a,o){let l=(0,i.getBytes)(e,"passwd"),u=(0,i.getBytes)(t,"salt");return(0,i.hexlify)(await c(l,u,r,n,s,a,o))}function h(e,t,r,n,s,a){let o=(0,i.getBytes)(e,"passwd"),l=(0,i.getBytes)(t,"salt");return(0,i.hexlify)(u(o,l,r,n,s,a))}t.scrypt=d,d._=o,d.lock=function(){a=!0},d.register=function(e){if(a)throw Error("scrypt is locked");c=e},Object.freeze(d),t.scryptSync=h,h._=l,h.lock=function(){s=!0},h.register=function(e){if(s)throw Error("scryptSync is locked");u=e},Object.freeze(h)},5414:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.cb=void 0;let i=n(r(907)),s=i.default.utils,a=i.default.ids,o=r(9219),l=/^(?<date>[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01]))[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))$/,c=e=>{let t=l.exec(e);if(!t)return!1;let r=new Date(t.groups.date).toISOString(),n=l.exec(r);return t.groups.date===n.groups.date};t.cb={signInWithEtherium:function(e,t,r,n){switch(e.state){case a.ACTIVE:if("object"!=typeof n||null===n)throw Error("data must be an object");break;case a.NOMATCH:n.errors.push(`invalid message: max line number was ${n.lineno}`)}},lineno:function(e,t,r,n){e.state===a.MATCH&&(n.lineno+=1)},exTitle:function(e,t,r,n){e.state===a.NOMATCH&&(n.lineno-=1)},nbTitle:function(e,t,r,n){e.state===a.NOMATCH&&(n.lineno-=1)},riTitle:function(e,t,r,n){e.state===a.NOMATCH&&(n.lineno-=1)},reTitle:function(e,t,r,n){e.state===a.MATCH?n.resources=[]:e.state===a.NOMATCH&&(n.lineno-=1)},oscheme:function(e,t,r,n){e.state===a.MATCH&&(n.scheme=s.charsToString(t,r,e.phraseLength-3))},domain:function(e,t,r,n){switch(e.state){case a.MATCH:n.domain=s.charsToString(t,r,e.phraseLength);break;case a.EMPTY:n.errors.push(`line ${n.lineno}: domain cannot be empty`);break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid domain`)}},address:function(e,t,r,n){switch(e.state){case a.MATCH:n.address=s.charsToString(t,r,e.phraseLength),(0,o.isEIP55Address)(n.address)||n.errors.push(`line ${n.lineno}: invalid EIP-55 address - ${n.address}`);break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid address`)}},statement:function(e,t,r,n){e.state===a.MATCH&&(n.statement=s.charsToString(t,r,e.phraseLength))},emptyStatement:function(e,t,r,n){e.state===a.MATCH&&(n.statement="")},version:function(e,t,r,n){switch(e.state){case a.MATCH:n.version=s.charsToString(t,r,e.phraseLength);break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid version`)}},nonce:function(e,t,r,n){switch(e.state){case a.MATCH:n.nonce=s.charsToString(t,r,e.phraseLength);break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid nonce`)}},issuedAt:function(e,t,r,n){switch(e.state){case a.MATCH:n.issuedAt=s.charsToString(t,r,e.phraseLength),c(n.issuedAt)||n.errors.push(`line ${n.lineno}: invalid issued-at date time semantics`);break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid issued-at date time syntax`)}},expirationTime:function(e,t,r,n){switch(e.state){case a.MATCH:n.expirationTime=s.charsToString(t,r,e.phraseLength),c(n.expirationTime)||n.errors.push(`line ${n.lineno}: invalid expiration-time date time semantics`);break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid expiration-time date time syntax`)}},notBefore:function(e,t,r,n){switch(e.state){case a.MATCH:n.notBefore=s.charsToString(t,r,e.phraseLength),c(n.notBefore)||n.errors.push(`line ${n.lineno}: invalid not-before date time semantics`);break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid not-before date time syntax`)}},requestId:function(e,t,r,n){switch(e.state){case a.MATCH:n.requestId=s.charsToString(t,r,e.phraseLength);break;case a.EMPTY:n.requestId="";break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid requestID`)}},chainId:function(e,t,r,n){switch(e.state){case a.MATCH:n.chainId=(0,o.parseIntegerNumber)(s.charsToString(t,r,e.phraseLength));break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid chain-id`)}},uriR:function(e,t,r,n){switch(e.state){case a.MATCH:n.uriR=s.charsToString(t,r,e.phraseLength);break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid resource URI`)}},resource:function(e,t,r,n){switch(e.state){case a.MATCH:n.resources.push(n.uriR),delete n.uriR;break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid resource`)}},scheme:function(e,t,r,n){switch(e.state){case a.MATCH:n.uriElements.scheme=s.charsToString(t,r,e.phraseLength);break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid URI scheme`)}},userinfo:function(e,t,r,n){e.state===a.MATCH&&(n.uriElements.userinfo=s.charsToString(t,r,e.phraseLength-1))},host:function(e,t,r,n){switch(e.state){case a.ACTIVE:n.iplit=!1;break;case a.MATCH:n.iplit?n.uriElements.host=s.charsToString(t,r+1,e.phraseLength-2):n.uriElements.host=s.charsToString(t,r,e.phraseLength);break;case a.EMPTY:n.uriElements.host="";break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid URI host`)}},ipLiteral:function(e,t,r,n){e.state===a.MATCH&&(n.iplit=!0)},port:function(e,t,r,n){switch(e.state){case a.MATCH:n.uriElements.port=(0,o.parseIntegerNumber)(s.charsToString(t,r,e.phraseLength));break;case a.EMPTY:n.uriElements.port="";break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid URI port`)}},pathAbempty:function(e,t,r,n){switch(e.state){case a.MATCH:n.uriElements.path=s.charsToString(t,r,e.phraseLength);break;case a.EMPTY:n.uriElements.path="";break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid URI path-abempty`)}},pathAbsolute:function(e,t,r,n){e.state===a.MATCH&&(n.uriElements.path=s.charsToString(t,r,e.phraseLength))},pathRootless:function(e,t,r,n){e.state===a.MATCH&&(n.uriElements.path=s.charsToString(t,r,e.phraseLength))},pathEmpty:function(e,t,r,n){switch(e.state){case a.MATCH:case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid URI - path-empty must be empty`);break;case a.EMPTY:n.uriElements.path=""}},query:function(e,t,r,n){switch(e.state){case a.MATCH:n.uriElements.query=s.charsToString(t,r,e.phraseLength);break;case a.EMPTY:n.uriElements.query="";break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid URI query`)}},fragment:function(e,t,r,n){switch(e.state){case a.MATCH:n.uriElements.fragment=s.charsToString(t,r,e.phraseLength);break;case a.EMPTY:n.uriElements.fragment="";break;case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid URI fragment`)}},uri:function(e,t,r,n){switch(e.state){case a.MATCH:n.uri=s.charsToString(t,r,e.phraseLength);break;case a.EMPTY:case a.NOMATCH:n.errors.push(`line ${n.lineno}: invalid URI`)}},ipv4:function(e,t,r,n){e.state===a.MATCH&&(n.ipv4=!0)},h16:function(e,t,r,n){e.state===a.MATCH&&(n.h16count+=1)},nodcolon:function(e,t,r,n){switch(e.state){case a.ACTIVE:n.h16count=0,n.ipv4=!1;break;case a.MATCH:n.ipv4?6===n.h16count?e.state=a.MATCH:(e.state=a.NOMATCH,e.phraseLength=0):8===n.h16count?e.state=a.MATCH:(e.state=a.NOMATCH,e.phraseLength=0)}},dcolon:function(e,t,r,n){switch(e.state){case a.ACTIVE:n.h16count=0,n.ipv4=!1;break;case a.MATCH:n.ipv4?n.h16count<6?e.state=a.MATCH:(e.state=a.NOMATCH,e.phraseLength=0):n.h16count<8?e.state=a.MATCH:(e.state=a.NOMATCH,e.phraseLength=0)}},decOctet:function(e,t,r,n){switch(e.state){case a.ACTIVE:n.octet=0;break;case a.MATCH:n.octet>255?(e.state=a.NOMATCH,e.phraseLength=0):e.state=a.MATCH}},decDigit:function(e,t,r,n){e.state===a.MATCH&&(n.octet=10*n.octet+t[r]-48)}}},5428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WordlistOwlA=void 0;let n=r(9313),i=r(5090);class s extends n.WordlistOwl{#tT;constructor(e,t,r,n){super(e,t,n),this.#tT=r}get _accent(){return this.#tT}_decodeWords(){return(0,i.decodeOwlA)(this._data,this._accent)}}t.WordlistOwlA=s},5439:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});var n=r(3084);class i extends n.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.sd)(e);let r=(0,n.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),(0,n.uH)(s)}update(e){return(0,n.CC)(this),this.iHash.update(e),this}digestInto(e){(0,n.CC)(this),(0,n.DO)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:a}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let s=(e,t,r)=>new i(e,t).update(r).digest();s.create=(e,t)=>new i(e,t)},5541:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IpcSocketProvider=void 0,t.IpcSocketProvider=void 0},5563:(e,t,r)=>{"use strict";r.d(t,{y:()=>s});let{withContext:n,PropsProvider:i}=(0,r(659).a)({key:"spinner"}),s=n("span")},5574:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.grammar=void 0,t.grammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"sign-in-with-ethereum",lower:"sign-in-with-ethereum",index:0,isBkr:!1},this.rules[1]={name:"ex-title",lower:"ex-title",index:1,isBkr:!1},this.rules[2]={name:"nb-title",lower:"nb-title",index:2,isBkr:!1},this.rules[3]={name:"ri-title",lower:"ri-title",index:3,isBkr:!1},this.rules[4]={name:"re-title",lower:"re-title",index:4,isBkr:!1},this.rules[5]={name:"oscheme",lower:"oscheme",index:5,isBkr:!1},this.rules[6]={name:"domain",lower:"domain",index:6,isBkr:!1},this.rules[7]={name:"address",lower:"address",index:7,isBkr:!1},this.rules[8]={name:"statement",lower:"statement",index:8,isBkr:!1},this.rules[9]={name:"empty-statement",lower:"empty-statement",index:9,isBkr:!1},this.rules[10]={name:"version",lower:"version",index:10,isBkr:!1},this.rules[11]={name:"nonce",lower:"nonce",index:11,isBkr:!1},this.rules[12]={name:"issued-at",lower:"issued-at",index:12,isBkr:!1},this.rules[13]={name:"expiration-time",lower:"expiration-time",index:13,isBkr:!1},this.rules[14]={name:"not-before",lower:"not-before",index:14,isBkr:!1},this.rules[15]={name:"request-id",lower:"request-id",index:15,isBkr:!1},this.rules[16]={name:"chain-id",lower:"chain-id",index:16,isBkr:!1},this.rules[17]={name:"resources",lower:"resources",index:17,isBkr:!1},this.rules[18]={name:"resource",lower:"resource",index:18,isBkr:!1},this.rules[19]={name:"URI",lower:"uri",index:19,isBkr:!1},this.rules[20]={name:"hier-part",lower:"hier-part",index:20,isBkr:!1},this.rules[21]={name:"scheme",lower:"scheme",index:21,isBkr:!1},this.rules[22]={name:"authority",lower:"authority",index:22,isBkr:!1},this.rules[23]={name:"path-abempty",lower:"path-abempty",index:23,isBkr:!1},this.rules[24]={name:"path-absolute",lower:"path-absolute",index:24,isBkr:!1},this.rules[25]={name:"path-rootless",lower:"path-rootless",index:25,isBkr:!1},this.rules[26]={name:"path-empty",lower:"path-empty",index:26,isBkr:!1},this.rules[27]={name:"userinfo-at",lower:"userinfo-at",index:27,isBkr:!1},this.rules[28]={name:"userinfo",lower:"userinfo",index:28,isBkr:!1},this.rules[29]={name:"host",lower:"host",index:29,isBkr:!1},this.rules[30]={name:"IP-literal",lower:"ip-literal",index:30,isBkr:!1},this.rules[31]={name:"IPvFuture",lower:"ipvfuture",index:31,isBkr:!1},this.rules[32]={name:"IPv6address",lower:"ipv6address",index:32,isBkr:!1},this.rules[33]={name:"nodcolon",lower:"nodcolon",index:33,isBkr:!1},this.rules[34]={name:"dcolon",lower:"dcolon",index:34,isBkr:!1},this.rules[35]={name:"h16",lower:"h16",index:35,isBkr:!1},this.rules[36]={name:"h16c",lower:"h16c",index:36,isBkr:!1},this.rules[37]={name:"h16n",lower:"h16n",index:37,isBkr:!1},this.rules[38]={name:"h16cn",lower:"h16cn",index:38,isBkr:!1},this.rules[39]={name:"IPv4address",lower:"ipv4address",index:39,isBkr:!1},this.rules[40]={name:"dec-octet",lower:"dec-octet",index:40,isBkr:!1},this.rules[41]={name:"dec-digit",lower:"dec-digit",index:41,isBkr:!1},this.rules[42]={name:"reg-name",lower:"reg-name",index:42,isBkr:!1},this.rules[43]={name:"reg-name-char",lower:"reg-name-char",index:43,isBkr:!1},this.rules[44]={name:"port",lower:"port",index:44,isBkr:!1},this.rules[45]={name:"query",lower:"query",index:45,isBkr:!1},this.rules[46]={name:"fragment",lower:"fragment",index:46,isBkr:!1},this.rules[47]={name:"URI-r",lower:"uri-r",index:47,isBkr:!1},this.rules[48]={name:"hier-part-r",lower:"hier-part-r",index:48,isBkr:!1},this.rules[49]={name:"scheme-r",lower:"scheme-r",index:49,isBkr:!1},this.rules[50]={name:"query-r",lower:"query-r",index:50,isBkr:!1},this.rules[51]={name:"fragment-r",lower:"fragment-r",index:51,isBkr:!1},this.rules[52]={name:"authority-d",lower:"authority-d",index:52,isBkr:!1},this.rules[53]={name:"userinfo-d",lower:"userinfo-d",index:53,isBkr:!1},this.rules[54]={name:"host-d",lower:"host-d",index:54,isBkr:!1},this.rules[55]={name:"port-d",lower:"port-d",index:55,isBkr:!1},this.rules[56]={name:"path-abempty-r",lower:"path-abempty-r",index:56,isBkr:!1},this.rules[57]={name:"path-absolute-r",lower:"path-absolute-r",index:57,isBkr:!1},this.rules[58]={name:"path-rootless-r",lower:"path-rootless-r",index:58,isBkr:!1},this.rules[59]={name:"path-empty-r",lower:"path-empty-r",index:59,isBkr:!1},this.rules[60]={name:"segment",lower:"segment",index:60,isBkr:!1},this.rules[61]={name:"segment-nz",lower:"segment-nz",index:61,isBkr:!1},this.rules[62]={name:"pchar",lower:"pchar",index:62,isBkr:!1},this.rules[63]={name:"pct-encoded",lower:"pct-encoded",index:63,isBkr:!1},this.rules[64]={name:"date-fullyear",lower:"date-fullyear",index:64,isBkr:!1},this.rules[65]={name:"date-month",lower:"date-month",index:65,isBkr:!1},this.rules[66]={name:"date-mday",lower:"date-mday",index:66,isBkr:!1},this.rules[67]={name:"time-hour",lower:"time-hour",index:67,isBkr:!1},this.rules[68]={name:"time-minute",lower:"time-minute",index:68,isBkr:!1},this.rules[69]={name:"time-second",lower:"time-second",index:69,isBkr:!1},this.rules[70]={name:"time-secfrac",lower:"time-secfrac",index:70,isBkr:!1},this.rules[71]={name:"time-numoffset",lower:"time-numoffset",index:71,isBkr:!1},this.rules[72]={name:"time-offset",lower:"time-offset",index:72,isBkr:!1},this.rules[73]={name:"partial-time",lower:"partial-time",index:73,isBkr:!1},this.rules[74]={name:"full-date",lower:"full-date",index:74,isBkr:!1},this.rules[75]={name:"full-time",lower:"full-time",index:75,isBkr:!1},this.rules[76]={name:"date-time",lower:"date-time",index:76,isBkr:!1},this.rules[77]={name:"ALPHA",lower:"alpha",index:77,isBkr:!1},this.rules[78]={name:"LF",lower:"lf",index:78,isBkr:!1},this.rules[79]={name:"DIGIT",lower:"digit",index:79,isBkr:!1},this.rules[80]={name:"HEXDIG",lower:"hexdig",index:80,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,2,3,4,5,6,7,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,36,41,46]},this.rules[0].opcodes[1]={type:4,index:5},this.rules[0].opcodes[2]={type:4,index:6},this.rules[0].opcodes[3]={type:6,string:[32,119,97,110,116,115,32,121,111,117,32,116,111,32,115,105,103,110,32,105,110,32,119,105,116,104,32,121,111,117,114,32,69,116,104,101,114,101,117,109,32,97,99,99,111,117,110,116,58]},this.rules[0].opcodes[4]={type:4,index:78},this.rules[0].opcodes[5]={type:4,index:7},this.rules[0].opcodes[6]={type:4,index:78},this.rules[0].opcodes[7]={type:1,children:[8,13,14]},this.rules[0].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[0].opcodes[9]={type:4,index:78},this.rules[0].opcodes[10]={type:4,index:8},this.rules[0].opcodes[11]={type:4,index:78},this.rules[0].opcodes[12]={type:4,index:78},this.rules[0].opcodes[13]={type:4,index:9},this.rules[0].opcodes[14]={type:2,children:[15,16]},this.rules[0].opcodes[15]={type:4,index:78},this.rules[0].opcodes[16]={type:4,index:78},this.rules[0].opcodes[17]={type:6,string:[85,82,73,58,32]},this.rules[0].opcodes[18]={type:4,index:19},this.rules[0].opcodes[19]={type:4,index:78},this.rules[0].opcodes[20]={type:6,string:[86,101,114,115,105,111,110,58,32]},this.rules[0].opcodes[21]={type:4,index:10},this.rules[0].opcodes[22]={type:4,index:78},this.rules[0].opcodes[23]={type:6,string:[67,104,97,105,110,32,73,68,58,32]},this.rules[0].opcodes[24]={type:4,index:16},this.rules[0].opcodes[25]={type:4,index:78},this.rules[0].opcodes[26]={type:6,string:[78,111,110,99,101,58,32]},this.rules[0].opcodes[27]={type:4,index:11},this.rules[0].opcodes[28]={type:4,index:78},this.rules[0].opcodes[29]={type:6,string:[73,115,115,117,101,100,32,65,116,58,32]},this.rules[0].opcodes[30]={type:4,index:12},this.rules[0].opcodes[31]={type:3,min:0,max:1},this.rules[0].opcodes[32]={type:2,children:[33,34,35]},this.rules[0].opcodes[33]={type:4,index:78},this.rules[0].opcodes[34]={type:4,index:1},this.rules[0].opcodes[35]={type:4,index:13},this.rules[0].opcodes[36]={type:3,min:0,max:1},this.rules[0].opcodes[37]={type:2,children:[38,39,40]},this.rules[0].opcodes[38]={type:4,index:78},this.rules[0].opcodes[39]={type:4,index:2},this.rules[0].opcodes[40]={type:4,index:14},this.rules[0].opcodes[41]={type:3,min:0,max:1},this.rules[0].opcodes[42]={type:2,children:[43,44,45]},this.rules[0].opcodes[43]={type:4,index:78},this.rules[0].opcodes[44]={type:4,index:3},this.rules[0].opcodes[45]={type:4,index:15},this.rules[0].opcodes[46]={type:3,min:0,max:1},this.rules[0].opcodes[47]={type:2,children:[48,49,50]},this.rules[0].opcodes[48]={type:4,index:78},this.rules[0].opcodes[49]={type:4,index:4},this.rules[0].opcodes[50]={type:4,index:17},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:6,string:[69,120,112,105,114,97,116,105,111,110,32,84,105,109,101,58,32]},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:6,string:[78,111,116,32,66,101,102,111,114,101,58,32]},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:6,string:[82,101,113,117,101,115,116,32,73,68,58,32]},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:6,string:[82,101,115,111,117,114,99,101,115,58]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:3,min:0,max:1},this.rules[5].opcodes[1]={type:2,children:[2,3,9]},this.rules[5].opcodes[2]={type:4,index:77},this.rules[5].opcodes[3]={type:3,min:0,max:1/0},this.rules[5].opcodes[4]={type:1,children:[5,6,7,8]},this.rules[5].opcodes[5]={type:4,index:77},this.rules[5].opcodes[6]={type:4,index:79},this.rules[5].opcodes[7]={type:6,string:[43]},this.rules[5].opcodes[8]={type:5,min:45,max:46},this.rules[5].opcodes[9]={type:7,string:[58,47,47]},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:4,index:52},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:2,children:[1,2]},this.rules[7].opcodes[1]={type:7,string:[48,120]},this.rules[7].opcodes[2]={type:3,min:40,max:40},this.rules[7].opcodes[3]={type:4,index:80},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:1/0},this.rules[8].opcodes[1]={type:1,children:[2,3,4,5,6,7,8,9,10,11,12,13]},this.rules[8].opcodes[2]={type:5,min:97,max:122},this.rules[8].opcodes[3]={type:5,min:65,max:90},this.rules[8].opcodes[4]={type:5,min:48,max:57},this.rules[8].opcodes[5]={type:5,min:32,max:33},this.rules[8].opcodes[6]={type:5,min:35,max:36},this.rules[8].opcodes[7]={type:5,min:38,max:59},this.rules[8].opcodes[8]={type:6,string:[61]},this.rules[8].opcodes[9]={type:5,min:63,max:64},this.rules[8].opcodes[10]={type:6,string:[91]},this.rules[8].opcodes[11]={type:6,string:[93]},this.rules[8].opcodes[12]={type:6,string:[95]},this.rules[8].opcodes[13]={type:6,string:[126]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:2,children:[1,2,3]},this.rules[9].opcodes[1]={type:4,index:78},this.rules[9].opcodes[2]={type:4,index:78},this.rules[9].opcodes[3]={type:4,index:78},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:7,string:[49]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:3,min:8,max:1/0},this.rules[11].opcodes[1]={type:1,children:[2,3]},this.rules[11].opcodes[2]={type:4,index:77},this.rules[11].opcodes[3]={type:4,index:79},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:4,index:76},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:4,index:76},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:4,index:76},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:3,min:0,max:1/0},this.rules[15].opcodes[1]={type:4,index:62},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:3,min:1,max:1/0},this.rules[16].opcodes[1]={type:4,index:79},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:3,min:0,max:1/0},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:78},this.rules[17].opcodes[3]={type:4,index:18},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:2,children:[1,2]},this.rules[18].opcodes[1]={type:7,string:[45,32]},this.rules[18].opcodes[2]={type:4,index:47},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:2,children:[1,2,3,4,8]},this.rules[19].opcodes[1]={type:4,index:21},this.rules[19].opcodes[2]={type:7,string:[58]},this.rules[19].opcodes[3]={type:4,index:20},this.rules[19].opcodes[4]={type:3,min:0,max:1},this.rules[19].opcodes[5]={type:2,children:[6,7]},this.rules[19].opcodes[6]={type:7,string:[63]},this.rules[19].opcodes[7]={type:4,index:45},this.rules[19].opcodes[8]={type:3,min:0,max:1},this.rules[19].opcodes[9]={type:2,children:[10,11]},this.rules[19].opcodes[10]={type:7,string:[35]},this.rules[19].opcodes[11]={type:4,index:46},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:1,children:[1,5,6,7]},this.rules[20].opcodes[1]={type:2,children:[2,3,4]},this.rules[20].opcodes[2]={type:7,string:[47,47]},this.rules[20].opcodes[3]={type:4,index:22},this.rules[20].opcodes[4]={type:4,index:23},this.rules[20].opcodes[5]={type:4,index:24},this.rules[20].opcodes[6]={type:4,index:25},this.rules[20].opcodes[7]={type:4,index:26},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2]},this.rules[21].opcodes[1]={type:4,index:77},this.rules[21].opcodes[2]={type:3,min:0,max:1/0},this.rules[21].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[21].opcodes[4]={type:4,index:77},this.rules[21].opcodes[5]={type:4,index:79},this.rules[21].opcodes[6]={type:6,string:[43]},this.rules[21].opcodes[7]={type:5,min:45,max:46},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:2,children:[1,3,4]},this.rules[22].opcodes[1]={type:3,min:0,max:1},this.rules[22].opcodes[2]={type:4,index:27},this.rules[22].opcodes[3]={type:4,index:29},this.rules[22].opcodes[4]={type:3,min:0,max:1},this.rules[22].opcodes[5]={type:2,children:[6,7]},this.rules[22].opcodes[6]={type:7,string:[58]},this.rules[22].opcodes[7]={type:4,index:44},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:3,min:0,max:1/0},this.rules[23].opcodes[1]={type:2,children:[2,3]},this.rules[23].opcodes[2]={type:7,string:[47]},this.rules[23].opcodes[3]={type:4,index:60},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:7,string:[47]},this.rules[24].opcodes[2]={type:3,min:0,max:1},this.rules[24].opcodes[3]={type:2,children:[4,5]},this.rules[24].opcodes[4]={type:4,index:61},this.rules[24].opcodes[5]={type:3,min:0,max:1/0},this.rules[24].opcodes[6]={type:2,children:[7,8]},this.rules[24].opcodes[7]={type:7,string:[47]},this.rules[24].opcodes[8]={type:4,index:60},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2]},this.rules[25].opcodes[1]={type:4,index:61},this.rules[25].opcodes[2]={type:3,min:0,max:1/0},this.rules[25].opcodes[3]={type:2,children:[4,5]},this.rules[25].opcodes[4]={type:7,string:[47]},this.rules[25].opcodes[5]={type:4,index:60},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:7,string:[]},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:4,index:28},this.rules[27].opcodes[2]={type:6,string:[64]},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:3,min:0,max:1/0},this.rules[28].opcodes[1]={type:1,children:[2,3,4,5,6,7,8,9,10,11,12]},this.rules[28].opcodes[2]={type:5,min:97,max:122},this.rules[28].opcodes[3]={type:5,min:65,max:90},this.rules[28].opcodes[4]={type:5,min:48,max:57},this.rules[28].opcodes[5]={type:4,index:63},this.rules[28].opcodes[6]={type:6,string:[33]},this.rules[28].opcodes[7]={type:6,string:[36]},this.rules[28].opcodes[8]={type:5,min:38,max:46},this.rules[28].opcodes[9]={type:5,min:58,max:59},this.rules[28].opcodes[10]={type:6,string:[61]},this.rules[28].opcodes[11]={type:6,string:[95]},this.rules[28].opcodes[12]={type:6,string:[126]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:1,children:[1,2,6]},this.rules[29].opcodes[1]={type:4,index:30},this.rules[29].opcodes[2]={type:2,children:[3,4]},this.rules[29].opcodes[3]={type:4,index:39},this.rules[29].opcodes[4]={type:13},this.rules[29].opcodes[5]={type:4,index:43},this.rules[29].opcodes[6]={type:4,index:42},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,5]},this.rules[30].opcodes[1]={type:7,string:[91]},this.rules[30].opcodes[2]={type:1,children:[3,4]},this.rules[30].opcodes[3]={type:4,index:32},this.rules[30].opcodes[4]={type:4,index:31},this.rules[30].opcodes[5]={type:7,string:[93]},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:2,children:[1,2,4,5]},this.rules[31].opcodes[1]={type:7,string:[118]},this.rules[31].opcodes[2]={type:3,min:1,max:1/0},this.rules[31].opcodes[3]={type:4,index:80},this.rules[31].opcodes[4]={type:7,string:[46]},this.rules[31].opcodes[5]={type:3,min:1,max:1/0},this.rules[31].opcodes[6]={type:1,children:[7,8,9,10,11,12,13,14,15,16]},this.rules[31].opcodes[7]={type:5,min:97,max:122},this.rules[31].opcodes[8]={type:5,min:65,max:90},this.rules[31].opcodes[9]={type:5,min:48,max:57},this.rules[31].opcodes[10]={type:6,string:[33]},this.rules[31].opcodes[11]={type:6,string:[36]},this.rules[31].opcodes[12]={type:5,min:38,max:46},this.rules[31].opcodes[13]={type:5,min:58,max:59},this.rules[31].opcodes[14]={type:6,string:[61]},this.rules[31].opcodes[15]={type:6,string:[95]},this.rules[31].opcodes[16]={type:6,string:[126]},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:1,children:[1,2]},this.rules[32].opcodes[1]={type:4,index:33},this.rules[32].opcodes[2]={type:4,index:34},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:2,children:[1,5]},this.rules[33].opcodes[1]={type:2,children:[2,3]},this.rules[33].opcodes[2]={type:4,index:37},this.rules[33].opcodes[3]={type:3,min:0,max:1/0},this.rules[33].opcodes[4]={type:4,index:38},this.rules[33].opcodes[5]={type:3,min:0,max:1},this.rules[33].opcodes[6]={type:2,children:[7,8]},this.rules[33].opcodes[7]={type:6,string:[58]},this.rules[33].opcodes[8]={type:4,index:39},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:2,children:[1,6,7]},this.rules[34].opcodes[1]={type:3,min:0,max:1},this.rules[34].opcodes[2]={type:2,children:[3,4]},this.rules[34].opcodes[3]={type:4,index:35},this.rules[34].opcodes[4]={type:3,min:0,max:1/0},this.rules[34].opcodes[5]={type:4,index:36},this.rules[34].opcodes[6]={type:6,string:[58,58]},this.rules[34].opcodes[7]={type:1,children:[8,17]},this.rules[34].opcodes[8]={type:2,children:[9,13]},this.rules[34].opcodes[9]={type:2,children:[10,11]},this.rules[34].opcodes[10]={type:4,index:37},this.rules[34].opcodes[11]={type:3,min:0,max:1/0},this.rules[34].opcodes[12]={type:4,index:38},this.rules[34].opcodes[13]={type:3,min:0,max:1},this.rules[34].opcodes[14]={type:2,children:[15,16]},this.rules[34].opcodes[15]={type:6,string:[58]},this.rules[34].opcodes[16]={type:4,index:39},this.rules[34].opcodes[17]={type:3,min:0,max:1},this.rules[34].opcodes[18]={type:4,index:39},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:3,min:1,max:4},this.rules[35].opcodes[1]={type:4,index:80},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:2,children:[1,2]},this.rules[36].opcodes[1]={type:6,string:[58]},this.rules[36].opcodes[2]={type:3,min:1,max:4},this.rules[36].opcodes[3]={type:4,index:80},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:2,children:[1,3]},this.rules[37].opcodes[1]={type:3,min:1,max:4},this.rules[37].opcodes[2]={type:4,index:80},this.rules[37].opcodes[3]={type:13},this.rules[37].opcodes[4]={type:6,string:[46]},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2,4]},this.rules[38].opcodes[1]={type:6,string:[58]},this.rules[38].opcodes[2]={type:3,min:1,max:4},this.rules[38].opcodes[3]={type:4,index:80},this.rules[38].opcodes[4]={type:13},this.rules[38].opcodes[5]={type:6,string:[46]},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2,3,4,5,6,7]},this.rules[39].opcodes[1]={type:4,index:40},this.rules[39].opcodes[2]={type:7,string:[46]},this.rules[39].opcodes[3]={type:4,index:40},this.rules[39].opcodes[4]={type:7,string:[46]},this.rules[39].opcodes[5]={type:4,index:40},this.rules[39].opcodes[6]={type:7,string:[46]},this.rules[39].opcodes[7]={type:4,index:40},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:3,min:0,max:3},this.rules[40].opcodes[1]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:5,min:48,max:57},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:3,min:0,max:1/0},this.rules[42].opcodes[1]={type:4,index:43},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10,11]},this.rules[43].opcodes[1]={type:5,min:97,max:122},this.rules[43].opcodes[2]={type:5,min:65,max:90},this.rules[43].opcodes[3]={type:5,min:48,max:57},this.rules[43].opcodes[4]={type:4,index:63},this.rules[43].opcodes[5]={type:6,string:[33]},this.rules[43].opcodes[6]={type:6,string:[36]},this.rules[43].opcodes[7]={type:5,min:38,max:46},this.rules[43].opcodes[8]={type:6,string:[59]},this.rules[43].opcodes[9]={type:6,string:[61]},this.rules[43].opcodes[10]={type:6,string:[95]},this.rules[43].opcodes[11]={type:6,string:[126]},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:3,min:0,max:1/0},this.rules[44].opcodes[1]={type:4,index:79},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:3,min:0,max:1/0},this.rules[45].opcodes[1]={type:1,children:[2,3,4]},this.rules[45].opcodes[2]={type:4,index:62},this.rules[45].opcodes[3]={type:6,string:[47]},this.rules[45].opcodes[4]={type:6,string:[63]},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:3,min:0,max:1/0},this.rules[46].opcodes[1]={type:1,children:[2,3,4]},this.rules[46].opcodes[2]={type:4,index:62},this.rules[46].opcodes[3]={type:6,string:[47]},this.rules[46].opcodes[4]={type:6,string:[63]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:2,children:[1,2,3,4,8]},this.rules[47].opcodes[1]={type:4,index:49},this.rules[47].opcodes[2]={type:7,string:[58]},this.rules[47].opcodes[3]={type:4,index:48},this.rules[47].opcodes[4]={type:3,min:0,max:1},this.rules[47].opcodes[5]={type:2,children:[6,7]},this.rules[47].opcodes[6]={type:7,string:[63]},this.rules[47].opcodes[7]={type:4,index:50},this.rules[47].opcodes[8]={type:3,min:0,max:1},this.rules[47].opcodes[9]={type:2,children:[10,11]},this.rules[47].opcodes[10]={type:7,string:[35]},this.rules[47].opcodes[11]={type:4,index:51},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:1,children:[1,5,6,7]},this.rules[48].opcodes[1]={type:2,children:[2,3,4]},this.rules[48].opcodes[2]={type:7,string:[47,47]},this.rules[48].opcodes[3]={type:4,index:52},this.rules[48].opcodes[4]={type:4,index:56},this.rules[48].opcodes[5]={type:4,index:57},this.rules[48].opcodes[6]={type:4,index:58},this.rules[48].opcodes[7]={type:4,index:59},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:2,children:[1,2]},this.rules[49].opcodes[1]={type:4,index:77},this.rules[49].opcodes[2]={type:3,min:0,max:1/0},this.rules[49].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[49].opcodes[4]={type:4,index:77},this.rules[49].opcodes[5]={type:4,index:79},this.rules[49].opcodes[6]={type:6,string:[43]},this.rules[49].opcodes[7]={type:5,min:45,max:46},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:3,min:0,max:1/0},this.rules[50].opcodes[1]={type:1,children:[2,3,4]},this.rules[50].opcodes[2]={type:4,index:62},this.rules[50].opcodes[3]={type:6,string:[47]},this.rules[50].opcodes[4]={type:6,string:[63]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:3,min:0,max:1/0},this.rules[51].opcodes[1]={type:1,children:[2,3,4]},this.rules[51].opcodes[2]={type:4,index:62},this.rules[51].opcodes[3]={type:6,string:[47]},this.rules[51].opcodes[4]={type:6,string:[63]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:2,children:[1,5,6]},this.rules[52].opcodes[1]={type:3,min:0,max:1},this.rules[52].opcodes[2]={type:2,children:[3,4]},this.rules[52].opcodes[3]={type:4,index:53},this.rules[52].opcodes[4]={type:6,string:[64]},this.rules[52].opcodes[5]={type:4,index:54},this.rules[52].opcodes[6]={type:3,min:0,max:1},this.rules[52].opcodes[7]={type:2,children:[8,9]},this.rules[52].opcodes[8]={type:7,string:[58]},this.rules[52].opcodes[9]={type:4,index:55},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:3,min:0,max:1/0},this.rules[53].opcodes[1]={type:1,children:[2,3,4,5,6,7,8,9,10,11,12]},this.rules[53].opcodes[2]={type:5,min:97,max:122},this.rules[53].opcodes[3]={type:5,min:65,max:90},this.rules[53].opcodes[4]={type:5,min:48,max:57},this.rules[53].opcodes[5]={type:4,index:63},this.rules[53].opcodes[6]={type:6,string:[33]},this.rules[53].opcodes[7]={type:6,string:[36]},this.rules[53].opcodes[8]={type:5,min:38,max:46},this.rules[53].opcodes[9]={type:5,min:58,max:59},this.rules[53].opcodes[10]={type:6,string:[61]},this.rules[53].opcodes[11]={type:6,string:[95]},this.rules[53].opcodes[12]={type:6,string:[126]},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:1,children:[1,2,6]},this.rules[54].opcodes[1]={type:4,index:30},this.rules[54].opcodes[2]={type:2,children:[3,4]},this.rules[54].opcodes[3]={type:4,index:39},this.rules[54].opcodes[4]={type:13},this.rules[54].opcodes[5]={type:4,index:43},this.rules[54].opcodes[6]={type:4,index:42},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:3,min:0,max:1/0},this.rules[55].opcodes[1]={type:4,index:79},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1/0},this.rules[56].opcodes[1]={type:2,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[47]},this.rules[56].opcodes[3]={type:4,index:60},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:2,children:[1,2]},this.rules[57].opcodes[1]={type:7,string:[47]},this.rules[57].opcodes[2]={type:3,min:0,max:1},this.rules[57].opcodes[3]={type:2,children:[4,5]},this.rules[57].opcodes[4]={type:4,index:61},this.rules[57].opcodes[5]={type:3,min:0,max:1/0},this.rules[57].opcodes[6]={type:2,children:[7,8]},this.rules[57].opcodes[7]={type:7,string:[47]},this.rules[57].opcodes[8]={type:4,index:60},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:2,children:[1,2]},this.rules[58].opcodes[1]={type:4,index:61},this.rules[58].opcodes[2]={type:3,min:0,max:1/0},this.rules[58].opcodes[3]={type:2,children:[4,5]},this.rules[58].opcodes[4]={type:7,string:[47]},this.rules[58].opcodes[5]={type:4,index:60},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:7,string:[]},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:3,min:0,max:1/0},this.rules[60].opcodes[1]={type:4,index:62},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:3,min:1,max:1/0},this.rules[61].opcodes[1]={type:4,index:62},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10,11,12]},this.rules[62].opcodes[1]={type:5,min:97,max:122},this.rules[62].opcodes[2]={type:5,min:65,max:90},this.rules[62].opcodes[3]={type:5,min:48,max:57},this.rules[62].opcodes[4]={type:4,index:63},this.rules[62].opcodes[5]={type:6,string:[33]},this.rules[62].opcodes[6]={type:6,string:[36]},this.rules[62].opcodes[7]={type:5,min:38,max:46},this.rules[62].opcodes[8]={type:5,min:58,max:59},this.rules[62].opcodes[9]={type:6,string:[61]},this.rules[62].opcodes[10]={type:6,string:[64]},this.rules[62].opcodes[11]={type:6,string:[95]},this.rules[62].opcodes[12]={type:6,string:[126]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:2,children:[1,2,3]},this.rules[63].opcodes[1]={type:6,string:[37]},this.rules[63].opcodes[2]={type:4,index:80},this.rules[63].opcodes[3]={type:4,index:80},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:4,max:4},this.rules[64].opcodes[1]={type:4,index:79},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:3,min:2,max:2},this.rules[65].opcodes[1]={type:4,index:79},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:3,min:2,max:2},this.rules[66].opcodes[1]={type:4,index:79},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:2,max:2},this.rules[67].opcodes[1]={type:4,index:79},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:3,min:2,max:2},this.rules[68].opcodes[1]={type:4,index:79},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:3,min:2,max:2},this.rules[69].opcodes[1]={type:4,index:79},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:2,children:[1,2]},this.rules[70].opcodes[1]={type:7,string:[46]},this.rules[70].opcodes[2]={type:3,min:1,max:1/0},this.rules[70].opcodes[3]={type:4,index:79},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:2,children:[1,4,5,6]},this.rules[71].opcodes[1]={type:1,children:[2,3]},this.rules[71].opcodes[2]={type:7,string:[43]},this.rules[71].opcodes[3]={type:7,string:[45]},this.rules[71].opcodes[4]={type:4,index:67},this.rules[71].opcodes[5]={type:7,string:[58]},this.rules[71].opcodes[6]={type:4,index:68},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:1,children:[1,2]},this.rules[72].opcodes[1]={type:7,string:[122]},this.rules[72].opcodes[2]={type:4,index:71},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:2,children:[1,2,3,4,5,6]},this.rules[73].opcodes[1]={type:4,index:67},this.rules[73].opcodes[2]={type:7,string:[58]},this.rules[73].opcodes[3]={type:4,index:68},this.rules[73].opcodes[4]={type:7,string:[58]},this.rules[73].opcodes[5]={type:4,index:69},this.rules[73].opcodes[6]={type:3,min:0,max:1},this.rules[73].opcodes[7]={type:4,index:70},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:2,children:[1,2,3,4,5]},this.rules[74].opcodes[1]={type:4,index:64},this.rules[74].opcodes[2]={type:7,string:[45]},this.rules[74].opcodes[3]={type:4,index:65},this.rules[74].opcodes[4]={type:7,string:[45]},this.rules[74].opcodes[5]={type:4,index:66},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:2,children:[1,2]},this.rules[75].opcodes[1]={type:4,index:73},this.rules[75].opcodes[2]={type:4,index:72},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:2,children:[1,2,3]},this.rules[76].opcodes[1]={type:4,index:74},this.rules[76].opcodes[2]={type:7,string:[116]},this.rules[76].opcodes[3]={type:4,index:75},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:5,min:65,max:90},this.rules[77].opcodes[2]={type:5,min:97,max:122},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:6,string:[10]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:5,min:48,max:57},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:1,children:[1,2,3]},this.rules[80].opcodes[1]={type:5,min:48,max:57},this.rules[80].opcodes[2]={type:5,min:65,max:70},this.rules[80].opcodes[3]={type:5,min:97,max:102},this.toString=function(){let e="";return e+'; LDT 05/06/2024 \n; modified in several significant ways\n; 1) Literal strings are replaced with numbers and ranges (%d32 & %d32-126, etc.) when possible.\n;    TRB and especially TRG operators are much more efficient than TLS operators.\n; 2) Two rules, authority and URI, are used multiple times in different contexts. These rules will be reproduced and renamed\n;    in order to a) recognize the context and b) remove unneccary callback functions for certain contexts.\n;    This will simiplify recognizing contexts AND remove unneccesary callbacks\n; 2.a) domain is defined as authority-d which is identical to authority except that there will be no\n;      callback functions defined on authority-d or any of its *-d components.\n; 2.b) The resource URI is defined as URI-r and its components defined as *-r.\n;      In this way, callback functions can be defined on URI and is components while\n;      leaving URI-r to be parsed identically with no unnecessary callback functions to slow it down.\n; 3) IPv6address does not work because of APG\'s "first-success disambiguation" and "greedy" repetitions.\n;    IPv6address redefined and validations moved to callback functions (semantic vs syntactic validation)\n;    Redefinition requires negative look-ahead operators, https://en.wikipedia.org/wiki/Syntactic_predicate\n;    That is SABNF instead of simple ABNF.\n; 4) IPv4address fails because of "first-success disambiguation".\n;    This could be fixed with rearrangement of the alternative terms. However, it would still not\n;    accept zero-padded (leading zeros) decimal octets.\n;    Therefore, IPv4address is also done with callback functions and semantic validation.\n; 5) The negative look-ahead operator is also needed in the definition of host to\n;    prevent failure with a reg-name that begins with an IPv4 address.\n; 6) NOTE: host = 1.1.1.256 is a valid host name even though it is an invalid IPv4address.\n;          The IPv4address alternative fails but the reg-name alternative succeeds.\n; 7) The Ethereum spec (https://eips.ethereum.org/EIPS/eip-4361) message format ABNF\n;    allows for empty statements. Because of the "first success disambiguation" of APG\n;    the an explicit "empty-statement" rule is required to match the spec\'s intent.\n\n\nsign-in-with-ethereum =\n    oscheme domain %s" wants you to sign in with your Ethereum account:" LF\n    address LF\n    ((LF statement LF LF) / empty-statement / (LF LF))\n    %s"URI: " URI LF\n    %s"Version: " version LF\n    %s"Chain ID: " chain-id LF\n    %s"Nonce: " nonce LF\n    %s"Issued At: " issued-at\n    [ LF ex-title expiration-time ]\n    [ LF nb-title not-before ]\n    [ LF ri-title request-id ]\n    [ LF re-title resources ]\nex-title        = %s"Expiration Time: "\nnb-title        = %s"Not Before: "\nri-title        = %s"Request ID: "\nre-title        = %s"Resources:"\noscheme         = [ ALPHA *( ALPHA / DIGIT / %d43 / %d45-46 ) "://" ]\ndomain          = authority-d\naddress         = "0x" 40*40HEXDIG\n    ; Must also conform to captilization\n    ; checksum encoding specified in EIP-55\n    ; where applicable (EOAs).\n\nstatement       = 1*( %d97-122 / %d65-90 / %d48-57 / %d32-33 / %d35-36 / %d38-59 / %d61 / %d63-64 / %d91 / %d93 / %d95 / %d126)\n    ; The purpose is to exclude LF (line breaks).\n    ; LDT 10/04/2023: Do you mean %d32-126? All printing characters\nempty-statement = LF LF LF\nversion         = "1"\nnonce           = 8*( ALPHA / DIGIT )\nissued-at       = date-time\nexpiration-time = date-time\nnot-before      = date-time\nrequest-id      = *pchar\nchain-id        = 1*DIGIT\n    ; See EIP-155 for valid CHAIN_IDs.\nresources       = *( LF resource )\nresource        = "- " URI-r\n\n; ------------------------------------------------------------------------------\n; RFC 3986\n\nURI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]\nhier-part     = "//" authority path-abempty\n              / path-absolute\n              / path-rootless\n              / path-empty\nscheme        = ALPHA *( ALPHA / DIGIT / %d43 / %d45-46 )\nauthority     = [ userinfo-at ] host [ ":" port ]\npath-abempty  = *( "/" segment )\npath-absolute = "/" [ segment-nz *( "/" segment ) ]\npath-rootless = segment-nz *( "/" segment )\npath-empty    = ""\nuserinfo-at   = userinfo %d64\n                ; userinfo redefined to include the "@" so that it will fail without it\n                ; otherwise userinfo can match host and then the parser will backtrack\n                ; incorrectly keeping the captured userinfo phrase\nuserinfo      = *(%d97-122 / %d65-90 / %d48-57 / pct-encoded / %d33 / %d36 / %d38-46 / %d58-59 / %d61 / %d95 / %d126)\nhost          = IP-literal / (IPv4address !reg-name-char) / reg-name\n                ; negative look-ahead required to prevent IPv4address from being recognized as first part of reg-name\n                ; same fix as https://github.com/garycourt/uri-js/issues/4\nIP-literal    = "[" ( IPv6address / IPvFuture  ) "]"\nIPvFuture     = "v" 1*HEXDIG "." 1*( %d97-122 / %d65-90 / %d48-57 / %d33 / %d36 /%d38-46 / %d58-59 /%d61 /%d95 / %d126 )\nIPv6address   = nodcolon / dcolon\nnodcolon      = (h16n *h16cn) [%d58 IPv4address]\ndcolon        = [h16 *h16c] %d58.58 (((h16n *h16cn) [%d58 IPv4address]) / [IPv4address])\nh16           = 1*4HEXDIG\nh16c          = %d58 1*4HEXDIG\nh16n          = 1*4HEXDIG !%d46\nh16cn         = %d58 1*4HEXDIG !%d46\nIPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet\n; Here we will will use callback functions to evaluate and validate the (possibly zero-padded) dec-octet.\ndec-octet     =  *3dec-digit\ndec-digit     = %d48-57\nreg-name      = *reg-name-char\nreg-name-char = %d97-122 / %d65-90 / %d48-57 / pct-encoded / %d33 / %d36 / %d38-46 / %d59 / %d61 /%d95 / %d126\nport          = *DIGIT\nquery         = *(pchar / %d47 / %d63)\nfragment      = *(pchar / %d47 / %d63)\n\n; URI-r is a redefiniton of URI but without the callback functions attached to it\n; it reuses athority-d from domain \nURI-r         = scheme-r ":" hier-part-r [ "?" query-r ] [ "#" fragment-r ]\nhier-part-r   = "//" authority-d path-abempty-r\n              / path-absolute-r\n              / path-rootless-r\n              / path-empty-r\nscheme-r      = ALPHA *( ALPHA / DIGIT / %d43 / %d45-46 )\nquery-r       = *(pchar / %d47 / %d63)\nfragment-r    = *(pchar / %d47 / %d63)\n\n; authority-d is a redefinition of authority for capturing the domian phrase\n; but without callback functions \n; it is reused for URI- for the same reason               \nauthority-d   = [ userinfo-d %d64 ] host-d [ ":" port-d ]\nuserinfo-d    = *(%d97-122 / %d65-90 / %d48-57 / pct-encoded / %d33 / %d36 / %d38-46 / %d58-59 / %d61 / %d95 / %d126)\nhost-d        = IP-literal / (IPv4address !reg-name-char) / reg-name\nport-d        = *DIGIT\n\n; for use with URI-r\npath-abempty-r  = *( "/" segment )\npath-absolute-r = "/" [ segment-nz *( "/" segment ) ]\npath-rootless-r = segment-nz *( "/" segment )\npath-empty-r    = ""\nsegment       = *pchar\nsegment-nz    = 1*pchar\npchar         = (%d97-122 / %d65-90 / %d48-57 / pct-encoded / %d33 / %d36 / %d38-46 /%d58-59 / %d61 / %d64 / %d95 / %d126)\npct-encoded   = %d37 HEXDIG HEXDIG\n\n; no longer needed - expanded for all usage for fewer branches in the parse there\n; and more efficient use of the TBS & TRG operators in place of TLS and rule names\n; does not work with APG probably because of "first-success disambiguation" and greedy repetitions.\n; will replace with semantic checking of valid number of h16s\n;IPv6address   =                            6( h16 ":" ) ls32\n;              /                       "::" 5( h16 ":" ) ls32\n;              / [               h16 ] "::" 4( h16 ":" ) ls32\n;              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32\n;              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32\n;              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32\n;              / [ *4( h16 ":" ) h16 ] "::"              ls32\n;              / [ *5( h16 ":" ) h16 ] "::"              h16\n;              / [ *6( h16 ":" ) h16 ] "::"\n;ls32          = ( h16 ":" h16 ) / IPv4address\n; dec-octet does not work because of "first-success disambiguation".\n; Must have the longest (3-digit) numbers first.\n; Even so, this form does not accept leading zeros.\n; There does not seem to be a clear standard for this (https://en.wikipedia.org/wiki/Dot-decimal_notation)\n; however and early RFC 790 did show leading-zero padding of the three digits.\n;dec-octet     = DIGIT                 ; 0-9\n;                 / %x31-39 DIGIT         ; 10-99\n;                 / "1" 2DIGIT            ; 100-199\n;                 / "2" %x30-34 DIGIT     ; 200-249\n;                 / "25" %x30-35          ; 250-255\n;statement = 1*( reserved / unreserved / " " )\n;scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )\n;authority     = [ userinfo "@" ] host [ ":" port ]\n;userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )\n;query         = *( pchar / "/" / "?" )\n;fragment      = *( pchar / "/" / "?" )\n;IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )\n;reg-name      = *( unreserved / pct-encoded / sub-delims )\n;pct-encoded   = "%" HEXDIG HEXDIG\n;pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"\n;path-empty    = 0pchar; deprecated - empty literal string, "", is more efficient \n;unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"\n;reserved      = gen-delims / sub-delims\n;gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"\n;sub-delims    = "!" / "$" / "&" / "\'" / "(" / ")"\n;              / "*" / "+" / "," / ";" / "="\n;HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"\n\n; ------------------------------------------------------------------------------\n; RFC 3339\n\ndate-fullyear   = 4DIGIT\ndate-month      = 2DIGIT  ; 01-12\ndate-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on\n                          ; month/year\ntime-hour       = 2DIGIT  ; 00-23\ntime-minute     = 2DIGIT  ; 00-59\ntime-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second\n                          ; rules\ntime-secfrac    = "." 1*DIGIT\ntime-numoffset  = ("+" / "-") time-hour ":" time-minute\ntime-offset     = "Z" / time-numoffset\n\npartial-time    = time-hour ":" time-minute ":" time-second\n                  [time-secfrac]\nfull-date       = date-fullyear "-" date-month "-" date-mday\nfull-time       = partial-time time-offset\n\ndate-time       = full-date "T" full-time\n\n; ------------------------------------------------------------------------------\n; RFC 5234\n\nALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z\nLF             =  %x0A\n                  ; linefeed\nDIGIT          =  %x30-39\n                  ; 0-9\nHEXDIG         = %d48-57 / %d65-70 / %d97-102\n\n'}}},5587:(e,t,r)=>{"use strict";r.r(t),r.d(t,{base32:()=>i,base32hex:()=>l,base32hexpad:()=>u,base32hexpadupper:()=>d,base32hexupper:()=>c,base32pad:()=>a,base32padupper:()=>o,base32upper:()=>s,base32z:()=>h});var n=r(8122);let i=(0,n.yE)({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),s=(0,n.yE)({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),a=(0,n.yE)({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),o=(0,n.yE)({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),l=(0,n.yE)({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),c=(0,n.yE)({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),u=(0,n.yE)({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),d=(0,n.yE)({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),h=(0,n.yE)({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5})},5603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=i,t.anumber=s,t.abytes=a,t.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");s(e.outputLen),s(e.blockLen)},t.aexists=function(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")},t.aoutput=function(e,t){a(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)},t.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},t.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},t.clean=function(...e){for(let t=0;t<e.length;t++)e[t].fill(0)},t.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},t.rotr=function(e,t){return e<<32-t|e>>>t},t.rotl=function(e,t){return e<<t|e>>>32-t>>>0},t.byteSwap=o,t.byteSwap32=l,t.bytesToHex=function(e){if(a(e),c)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(c)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=h(e.charCodeAt(i)),s=h(e.charCodeAt(i+1));if(void 0===r||void 0===s)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+s}return n},t.asyncLoop=f,t.utf8ToBytes=p,t.bytesToUtf8=function(e){return new TextDecoder().decode(e)},t.toBytes=g,t.kdfInputToBytes=function(e){return"string"==typeof e&&(e=p(e)),a(e),e},t.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];a(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r},t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("options should be object or undefined");return Object.assign(e,t)},t.createHasher=b,t.createOptHasher=y,t.createXOFer=x,t.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return Uint8Array.from(n.crypto.randomBytes(e));throw Error("crypto.getRandomValues must be defined")};let n=r(4839);function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function a(e,...t){if(!i(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){return e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255}function l(e){for(let t=0;t<e.length;t++)e[t]=o(e[t]);return e}t.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],t.swap8IfBE=t.isLE?e=>e:e=>o(e),t.byteSwapIfBE=t.swap8IfBE,t.swap32IfBE=t.isLE?e=>e:l;let c="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,u=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),d={_0:48,_9:57,A:65,F:70,a:97,f:102};function h(e){return e>=d._0&&e<=d._9?e-d._0:e>=d.A&&e<=d.F?e-(d.A-10):e>=d.a&&e<=d.f?e-(d.a-10):void 0}async function f(e,r,n){let i=Date.now();for(let s=0;s<e;s++){n(s);let e=Date.now()-i;e>=0&&e<r||(await (0,t.nextTick)(),i+=e)}}function p(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function g(e){return"string"==typeof e&&(e=p(e)),a(e),e}t.nextTick=async()=>{};class m{}function b(e){let t=t=>e().update(g(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function y(e){let t=(t,r)=>e(r).update(g(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}function x(e){let t=(t,r)=>e(r).update(g(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}t.Hash=m,t.wrapConstructor=b,t.wrapConstructorWithOpts=y,t.wrapXOFConstructorWithOpts=x},5636:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.checkOpts=t.Hash=t.concatBytes=t.toBytes=t.utf8ToBytes=t.asyncLoop=t.nextTick=t.hexToBytes=t.bytesToHex=t.isLE=t.rotr=t.createView=t.u32=t.u8=void 0;let n=r(238),i=e=>e instanceof Uint8Array;if(t.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),t.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),t.rotr=(e,t)=>e<<32-t|e>>>t,t.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],!t.isLE)throw Error("Non little-endian hardware is not supported");let s=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function a(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function o(e){if("string"==typeof e&&(e=a(e)),!i(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}t.bytesToHex=function(e){if(!i(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,i=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[t]=i}return r},t.nextTick=async()=>{},t.asyncLoop=async function(e,r,n){let i=Date.now();for(let s=0;s<e;s++){n(s);let e=Date.now()-i;e>=0&&e<r||(await (0,t.nextTick)(),i+=e)}},t.utf8ToBytes=a,t.toBytes=o,t.concatBytes=function(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!i(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t};class l{clone(){return this._cloneInto()}}t.Hash=l;let c={}.toString;t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==c.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){let t=t=>e().update(o(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(o(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}},5699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnonymousCoder=void 0;let n=r(2884);class i extends n.Coder{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}t.AnonymousCoder=i},5722:(e,t,r)=>{"use strict";r.d(t,{ck:()=>b,g5:()=>y});var n=r(9982),i=r(8121),s=r(1456),a=r(8616);let o=BigInt(-1),l=BigInt(0),c=BigInt(1),u=BigInt(5),d={},h="0000";for(;h.length<80;)h+=h;function f(e){let t=h;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function p(e,t,r){let i=BigInt(t.width);if(t.signed){let t=c<<i-c;(0,n.vA)(null==r||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e}),e=e>l?(0,s.ST)((0,s.dK)(e,i),i):-(0,s.ST)((0,s.dK)(-e,i),i)}else{let t=c<<i;(0,n.vA)(null==r||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e}),e=(e%t+t)%t&t-c}return e}function g(e){"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,r=128,i=18;if("string"==typeof e){if("fixed"===e);else if("ufixed"===e)t=!1;else{let s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);(0,n.MR)(s,"invalid fixed format","format",e),t="u"!==s[1],r=parseInt(s[2]),i=parseInt(s[3])}}else if(e){let s=e,a=(e,t,r)=>null==s[e]?r:((0,n.MR)(typeof s[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,s[e]),s[e]);t=a("signed","boolean",t),r=a("width","number",r),i=a("decimals","number",i)}(0,n.MR)(r%8==0,"invalid FixedNumber width (not byte aligned)","format.width",r),(0,n.MR)(i<=80,"invalid FixedNumber decimals (too large)","format.decimals",i);let s=(t?"":"u")+"fixed"+String(r)+"x"+String(i);return{signed:t,width:r,decimals:i,name:s}}class m{format;#t_;#tC;#tO;_value;constructor(e,t,r){(0,n.gk)(e,d,"FixedNumber"),this.#tC=t,this.#t_=r;let i=function(e,t){let r="";e<l&&(r="-",e*=o);let n=e.toString();if(0===t)return r+n;for(;n.length<=t;)n=h+n;let i=n.length-t;for(n=n.substring(0,i)+"."+n.substring(i);"0"===n[0]&&"."!==n[1];)n=n.substring(1);for(;"0"===n[n.length-1]&&"."!==n[n.length-2];)n=n.substring(0,n.length-1);return r+n}(t,r.decimals);(0,a.n)(this,{format:r.name,_value:i}),this.#tO=f(r.decimals)}get signed(){return this.#t_.signed}get width(){return this.#t_.width}get decimals(){return this.#t_.decimals}get value(){return this.#tC}#tR(e){(0,n.MR)(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#tN(e,t){return new m(d,e=p(e,this.#t_,t),this.#t_)}#tM(e,t){return this.#tR(e),this.#tN(this.#tC+e.#tC,t)}addUnsafe(e){return this.#tM(e)}add(e){return this.#tM(e,"add")}#tB(e,t){return this.#tR(e),this.#tN(this.#tC-e.#tC,t)}subUnsafe(e){return this.#tB(e)}sub(e){return this.#tB(e,"sub")}#tD(e,t){return this.#tR(e),this.#tN(this.#tC*e.#tC/this.#tO,t)}mulUnsafe(e){return this.#tD(e)}mul(e){return this.#tD(e,"mul")}mulSignal(e){this.#tR(e);let t=this.#tC*e.#tC;return(0,n.vA)(t%this.#tO===l,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#tN(t/this.#tO,"mulSignal")}#tL(e,t){return(0,n.vA)(e.#tC!==l,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#tR(e),this.#tN(this.#tC*this.#tO/e.#tC,t)}divUnsafe(e){return this.#tL(e)}div(e){return this.#tL(e,"div")}divSignal(e){(0,n.vA)(e.#tC!==l,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#tR(e);let t=this.#tC*this.#tO;return(0,n.vA)(t%e.#tC===l,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#tN(t/e.#tC,"divSignal")}cmp(e){let t=this.value,r=e.value,n=this.decimals-e.decimals;return(n>0?r*=f(n):n<0&&(t*=f(-n)),t<r)?-1:+(t>r)}eq(e){return 0===this.cmp(e)}lt(e){return 0>this.cmp(e)}lte(e){return 0>=this.cmp(e)}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#tC;return this.#tC<l&&(e-=this.#tO-c),e=this.#tC/this.#tO*this.#tO,this.#tN(e,"floor")}ceiling(){let e=this.#tC;return this.#tC>l&&(e+=this.#tO-c),e=this.#tC/this.#tO*this.#tO,this.#tN(e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;let t=this.decimals-e,r=u*f(t-1),n=this.value+r,i=f(t);return p(n=n/i*i,this.#t_,"round"),new m(d,n,this.#t_)}isZero(){return this.#tC===l}isNegative(){return this.#tC<l}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return m.fromString(this.toString(),e)}static fromValue(e,t,r){let i=null==t?0:(0,s.WZ)(t),a=g(r),o=(0,s.Ab)(e,"value"),c=i-a.decimals;if(c>0){let t=f(c);(0,n.vA)(o%t===l,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=t}else c<0&&(o*=f(-c));return p(o,a,"fromValue"),new m(d,o,a)}static fromString(e,t){let r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);(0,n.MR)(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);let i=g(t),s=r[2]||"0",a=r[3]||"";for(;a.length<i.decimals;)a+=h;(0,n.vA)(a.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),a=a.substring(0,i.decimals);let o=BigInt(r[1]+s+a);return p(o,i,"fromString"),new m(d,o,i)}static fromBytes(e,t){let r=(0,s.Dg)((0,i.q5)(e,"value")),n=g(t);return n.signed&&(r=(0,s.ST)(r,n.width)),p(r,n,"fromBytes"),new m(d,r,n)}}function b(e){var t,r;let n;return t=e,r=18,n=18,n=(0,s.WZ)(r,"unit"),m.fromValue(t,n,{decimals:n,width:512}).toString()}function y(e){var t,r;let i;return t=e,r=18,(0,n.MR)("string"==typeof t,"value must be a string","value",t),i=18,i=(0,s.WZ)(r,"unit"),m.fromString(t,{decimals:i,width:512}).value}},5733:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCurve=t.getHash=void 0;let n=r(3632),i=r(5636),s=r(6902);function a(e){return{hash:e,hmac:(t,...r)=>(0,n.hmac)(e,t,(0,i.concatBytes)(...r)),randomBytes:i.randomBytes}}t.getHash=a,t.createCurve=function(e,t){let r=t=>(0,s.weierstrass)({...e,...a(t)});return Object.freeze({...r(t),create:r})}},5766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{code:()=>s,decode:()=>o,encode:()=>a,name:()=>i});var n=r(3751);let i="raw",s=85;function a(e){return(0,n.au)(e)}function o(e){return(0,n.au)(e)}},5817:e=>{e.exports=function(){return"/* This file automatically generated by jsonToless() and LESS. */\n.apg-mono {\n  font-family: monospace;\n}\n.apg-active {\n  font-weight: bold;\n  color: #000000;\n}\n.apg-match {\n  font-weight: bold;\n  color: #264BFF;\n}\n.apg-empty {\n  font-weight: bold;\n  color: #0fbd0f;\n}\n.apg-nomatch {\n  font-weight: bold;\n  color: #FF4000;\n}\n.apg-lh-match {\n  font-weight: bold;\n  color: #1A97BA;\n}\n.apg-lb-match {\n  font-weight: bold;\n  color: #5F1687;\n}\n.apg-remainder {\n  font-weight: bold;\n  color: #999999;\n}\n.apg-ctrl-char {\n  font-weight: bolder;\n  font-style: italic;\n  font-size: 0.6em;\n}\n.apg-line-end {\n  font-weight: bold;\n  color: #000000;\n}\n.apg-error {\n  font-weight: bold;\n  color: #FF4000;\n}\n.apg-phrase {\n  color: #000000;\n  background-color: #8caae6;\n}\n.apg-empty-phrase {\n  color: #0fbd0f;\n}\ntable.apg-state {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: left;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-state th,\ntable.apg-state td {\n  text-align: left;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-state th:nth-last-child(2),\ntable.apg-state td:nth-last-child(2) {\n  text-align: right;\n}\ntable.apg-state caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-stats {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-stats th,\ntable.apg-stats td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-stats caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-trace {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-trace caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-trace th,\ntable.apg-trace td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-trace th:last-child,\ntable.apg-trace th:nth-last-child(2),\ntable.apg-trace td:last-child,\ntable.apg-trace td:nth-last-child(2) {\n  text-align: left;\n}\ntable.apg-grammar {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-grammar caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-grammar th,\ntable.apg-grammar td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-grammar th:last-child,\ntable.apg-grammar td:last-child {\n  text-align: left;\n}\ntable.apg-rules {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-rules caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-rules th,\ntable.apg-rules td {\n  text-align: right;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-rules a {\n  color: #003399 !important;\n}\ntable.apg-rules a:hover {\n  color: #8caae6 !important;\n}\ntable.apg-attrs {\n  font-family: monospace;\n  margin-top: 5px;\n  font-size: 11px;\n  line-height: 130%;\n  text-align: center;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-attrs caption {\n  font-size: 125%;\n  line-height: 130%;\n  font-weight: bold;\n  text-align: left;\n}\ntable.apg-attrs th,\ntable.apg-attrs td {\n  text-align: center;\n  border: 1px solid black;\n  border-collapse: collapse;\n}\ntable.apg-attrs th:nth-child(1),\ntable.apg-attrs th:nth-child(2),\ntable.apg-attrs th:nth-child(3) {\n  text-align: right;\n}\ntable.apg-attrs td:nth-child(1),\ntable.apg-attrs td:nth-child(2),\ntable.apg-attrs td:nth-child(3) {\n  text-align: right;\n}\ntable.apg-attrs a {\n  color: #003399 !important;\n}\ntable.apg-attrs a:hover {\n  color: #8caae6 !important;\n}\n"}},5839:(e,t,r)=>{"use strict";r.r(t),r.d(t,{base58btc:()=>i,base58flickr:()=>s});var n=r(8122);let i=(0,n._Q)({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),s=(0,n._Q)({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"})},5898:(e,t,r)=>{"use strict";r.d(t,{A6:()=>h,B1:()=>S,C:()=>g,C9:()=>E,Cm:()=>d,DW:()=>b,F9:()=>_,GY:()=>n,Hu:()=>N,Ik:()=>o,Io:()=>c,Jj:()=>f,K8:()=>F,LH:()=>O,Qj:()=>M,Rc:()=>P,SQ:()=>m,U2:()=>R,X5:()=>z,XK:()=>k,ZC:()=>v,Zj:()=>p,_J:()=>T,bi:()=>w,eI:()=>u,eN:()=>D,g8:()=>x,gF:()=>j,lI:()=>U,le:()=>C,mC:()=>L,o$:()=>s,qT:()=>H,qc:()=>l,rx:()=>y,u:()=>i,v$:()=>I,xr:()=>a,yZ:()=>B,yt:()=>A});let n=4,i=6,s=273,a=33,o=41,l=42,c=43,u=53,d=54,h=55,f=56,p=132,g=301,m=302,b=400,y=421,x=444,w=445,v=446,A=447,E=448,k=449,P=454,S=460,I=461,T=465,_=466,C=480,O=481,R=443,N=477,M=478,B=479,D=277,L=275,U=276,F=280,j=281,z=290,H=777},5906:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBase58=t.encodeBase58=void 0;let n=r(4306),i=r(7073),s=r(7310),a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",o=null,l=BigInt(0),c=BigInt(58);t.encodeBase58=function(e){let t=(0,n.getBytes)(e),r=(0,s.toBigInt)(t),i="";for(;r;)i=a[Number(r%c)]+i,r/=c;for(let e=0;e<t.length&&!t[e];e++)i=a[0]+i;return i},t.decodeBase58=function(e){let t=l;for(let r=0;r<e.length;r++)t*=c,t+=function(e){if(null==o){o={};for(let e=0;e<a.length;e++)o[a[e]]=BigInt(e)}let t=o[e];return(0,i.assertArgument)(null!=t,"invalid base58 value","letter",e),t}(e[r]);return t}},5936:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scryptAsync=t.scrypt=void 0;let n=r(3810),i=r(7584),s=r(2670),a=r(5636),o=(e,t)=>e<<t|e>>>32-t;function l(e,t,r,n,i,s){let a=e[t++]^r[n++],l=e[t++]^r[n++],c=e[t++]^r[n++],u=e[t++]^r[n++],d=e[t++]^r[n++],h=e[t++]^r[n++],f=e[t++]^r[n++],p=e[t++]^r[n++],g=e[t++]^r[n++],m=e[t++]^r[n++],b=e[t++]^r[n++],y=e[t++]^r[n++],x=e[t++]^r[n++],w=e[t++]^r[n++],v=e[t++]^r[n++],A=e[t++]^r[n++],E=a,k=l,P=c,S=u,I=d,T=h,_=f,C=p,O=g,R=m,N=b,M=y,B=x,D=w,L=v,U=A;for(let e=0;e<8;e+=2)I^=o(E+B|0,7),O^=o(I+E|0,9),B^=o(O+I|0,13),E^=o(B+O|0,18),R^=o(T+k|0,7),D^=o(R+T|0,9),k^=o(D+R|0,13),T^=o(k+D|0,18),L^=o(N+_|0,7),P^=o(L+N|0,9),_^=o(P+L|0,13),N^=o(_+P|0,18),S^=o(U+M|0,7),C^=o(S+U|0,9),M^=o(C+S|0,13),U^=o(M+C|0,18),k^=o(E+S|0,7),P^=o(k+E|0,9),S^=o(P+k|0,13),E^=o(S+P|0,18),_^=o(T+I|0,7),C^=o(_+T|0,9),I^=o(C+_|0,13),T^=o(I+C|0,18),M^=o(N+R|0,7),O^=o(M+N|0,9),R^=o(O+M|0,13),N^=o(R+O|0,18),B^=o(U+L|0,7),D^=o(B+U|0,9),L^=o(D+B|0,13),U^=o(L+D|0,18);i[s++]=a+E|0,i[s++]=l+k|0,i[s++]=c+P|0,i[s++]=u+S|0,i[s++]=d+I|0,i[s++]=h+T|0,i[s++]=f+_|0,i[s++]=p+C|0,i[s++]=g+O|0,i[s++]=m+R|0,i[s++]=b+N|0,i[s++]=y+M|0,i[s++]=x+B|0,i[s++]=w+D|0,i[s++]=v+L|0,i[s++]=A+U|0}function c(e,t,r,n,i){let s=n+0,a=n+16*i;for(let n=0;n<16;n++)r[a+n]=e[t+(2*i-1)*16+n];for(let n=0;n<i;n++,s+=16,t+=16)l(r,a,e,t,r,s),n>0&&(a+=16),l(r,s,e,t+=16,r,a)}function u(e,t,r){let{N:o,r:l,p:c,dkLen:u,asyncTick:d,maxmem:h,onProgress:f}=(0,a.checkOpts)({dkLen:32,asyncTick:10,maxmem:0x40000400},r);if((0,n.number)(o),(0,n.number)(l),(0,n.number)(c),(0,n.number)(u),(0,n.number)(d),(0,n.number)(h),void 0!==f&&"function"!=typeof f)throw Error("progressCb should be function");let p=128*l,g=p/4;if(o<=1||(o&o-1)!=0||o>=2**(p/8)||o>0x100000000)throw Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(c<0||c>(0x100000000-1)*32/p)throw Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(u<0||u>(0x100000000-1)*32)throw Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");let m=p*(o+c);if(m>h)throw Error(`Scrypt: parameters too large, ${m} (128 * r * (N + p)) > ${h} (maxmem)`);let b=(0,s.pbkdf2)(i.sha256,e,t,{c:1,dkLen:p*c}),y=(0,a.u32)(b),x=(0,a.u32)(new Uint8Array(p*o)),w=(0,a.u32)(new Uint8Array(p)),v=()=>{};if(f){let e=2*o*c,t=Math.max(Math.floor(e/1e4),1),r=0;v=()=>{r++,f&&(!(r%t)||r===e)&&f(r/e)}}return{N:o,r:l,p:c,dkLen:u,blockSize32:g,V:x,B32:y,B:b,tmp:w,blockMixCb:v,asyncTick:d}}function d(e,t,r,n,a){let o=(0,s.pbkdf2)(i.sha256,e,r,{c:1,dkLen:t});return r.fill(0),n.fill(0),a.fill(0),o}t.scrypt=function(e,t,r){let{N:n,r:i,p:s,dkLen:a,blockSize32:o,V:l,B32:h,B:f,tmp:p,blockMixCb:g}=u(e,t,r);for(let e=0;e<s;e++){let t=o*e;for(let e=0;e<o;e++)l[e]=h[t+e];for(let e=0,t=0;e<n-1;e++)c(l,t,l,t+=o,i),g();c(l,(n-1)*o,h,t,i),g();for(let e=0;e<n;e++){let e=h[t+o-16]%n;for(let r=0;r<o;r++)p[r]=h[t+r]^l[e*o+r];c(p,0,h,t,i),g()}}return d(e,a,f,l,p)},t.scryptAsync=async function(e,t,r){let{N:n,r:i,p:s,dkLen:o,blockSize32:l,V:h,B32:f,B:p,tmp:g,blockMixCb:m,asyncTick:b}=u(e,t,r);for(let e=0;e<s;e++){let t=l*e;for(let e=0;e<l;e++)h[e]=f[t+e];let r=0;await (0,a.asyncLoop)(n-1,b,()=>{c(h,r,h,r+=l,i),m()}),c(h,(n-1)*l,f,t,i),m(),await (0,a.asyncLoop)(n,b,()=>{let e=f[t+l-16]%n;for(let r=0;r<l;r++)g[r]=f[t+r]^h[e*l+r];c(g,0,f,t,i),m()})}return d(e,o,p,h,g)}},5943:(e,t,r)=>{"use strict";r.d(t,{U:()=>o});var n=r(9865),i=r(6054);let s=new TextEncoder().encode("/"),a=s[0];class o{_buf;constructor(e,t){if("string"==typeof e)this._buf=(0,n.s)(e);else if(e instanceof Uint8Array)this._buf=e;else throw Error("Invalid key, should be String of Uint8Array");if(null==t&&(t=!0),t&&this.clean(),0===this._buf.byteLength||this._buf[0]!==a)throw Error("Invalid key")}toString(e="utf8"){return(0,i.d)(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new o(e.join("/"))}static random(){return new o(Math.random().toString().substring(2))}static asKey(e){return e instanceof Uint8Array||"string"==typeof e?new o(e):"function"==typeof e.uint8Array?new o(e.uint8Array()):null}clean(){if((null==this._buf||0===this._buf.byteLength)&&(this._buf=s),this._buf[0]!==a){let e=new Uint8Array(this._buf.byteLength+1);e.fill(a,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===a;)this._buf=this._buf.subarray(0,-1)}less(e){let t=this.list(),r=e.list();for(let e=0;e<t.length;e++){if(r.length<e+1)return!1;let n=t[e],i=r[e];if(n<i)return!0;if(n>i)return!1}return t.length<r.length}reverse(){return o.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let e=this.namespaces();return e[e.length-1]}list(){return this.toString().split("/").slice(1)}type(){return function(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(e){let t=e.split(":");return t[t.length-1]}(this.baseNamespace())}instance(e){return new o(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith("/")||(e+="/"),new o(e+=this.type())}parent(){let e=this.list();return new o(1===e.length?"/":e.slice(0,-1).join("/"))}child(e){return"/"===this.toString()?e:"/"===e.toString()?this:new o(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}concat(...e){return o.withNamespaces([...this.namespaces(),...[].concat(...e.map(e=>e.namespaces()))])}}},5961:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeRlp=void 0;let n=r(4306),i=r(7073),s=r(4306);function a(e,t,r){let n=0;for(let i=0;i<r;i++)n=256*n+e[t+i];return n}function o(e,t,r,n){let s=[];for(;r<t+1+n;){let a=l(e,r);s.push(a.result),r+=a.consumed,(0,i.assert)(r<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:e,length:n,offset:t})}return{consumed:1+n,result:s}}function l(e,t){(0,i.assert)(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});let r=t=>{(0,i.assert)(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){let n=e[t]-247;r(t+1+n);let i=a(e,t+1,n);return r(t+1+n+i),o(e,t,t+1+n,n+i)}if(e[t]>=192){let n=e[t]-192;return r(t+1+n),o(e,t,t+1,n)}if(e[t]>=184){let i=e[t]-183;r(t+1+i);let s=a(e,t+1,i);r(t+1+i+s);let o=(0,n.hexlify)(e.slice(t+1+i,t+1+i+s));return{consumed:1+i+s,result:o}}if(e[t]>=128){let i=e[t]-128;r(t+1+i);let s=(0,n.hexlify)(e.slice(t+1,t+1+i));return{consumed:1+i,result:s}}return{consumed:1,result:function(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}(e[t])}}t.decodeRlp=function(e){let t=(0,s.getBytes)(e,"data"),r=l(t,0);return(0,i.assertArgument)(r.consumed===t.length,"unexpected junk after rlp payload","data",e),r.result}},5972:(e,t,r)=>{"use strict";r.d(t,{_1:()=>a});var n=r(8934),i=r(6676);class s{movingAverage;variance;deviation;forecast;timeSpan;previousTime;constructor(e){this.timeSpan=e,this.movingAverage=0,this.variance=0,this.deviation=0,this.forecast=0}alpha(e,t){return 1-Math.exp(-(e-t)/this.timeSpan)}push(e,t=Date.now()){if(null!=this.previousTime){let r=this.alpha(t,this.previousTime),n=e-this.movingAverage;this.movingAverage=r*e+(1-r)*this.movingAverage,this.variance=(1-r)*(this.variance+r*n*n),this.deviation=Math.sqrt(this.variance),this.forecast=this.movingAverage+r*n}else this.movingAverage=e;this.previousTime=t}}class a{success;failure;next;metric;timeoutMultiplier;failureMultiplier;minTimeout;maxTimeout;constructor(e={}){let t=e.interval??5e3;this.success=new s(t),this.failure=new s(t),this.next=new s(t),this.failureMultiplier=e.failureMultiplier??2,this.timeoutMultiplier=e.timeoutMultiplier??1.2,this.minTimeout=e.minTimeout??5e3,this.maxTimeout=e.maxTimeout??6e4,null!=e.metricName&&(this.metric=e.metrics?.registerMetricGroup(e.metricName))}getTimeoutSignal(e={}){let t=Math.round(this.next.movingAverage*(e.timeoutFactor??this.timeoutMultiplier));t<this.minTimeout&&(t=this.minTimeout),t>this.maxTimeout&&(t=this.maxTimeout);let r=AbortSignal.timeout(t),s=(0,n.J)([e.signal,r]);return(0,i.k)(1/0,s,r),s.start=Date.now(),s.timeout=t,s}cleanUp(e){let t=Date.now()-e.start;e.aborted?(this.failure.push(t),this.next.push(t*this.failureMultiplier),this.metric?.update({failureMovingAverage:this.failure.movingAverage,failureDeviation:this.failure.deviation,failureForecast:this.failure.forecast,failureVariance:this.failure.variance,failure:t})):(this.success.push(t),this.next.push(t),this.metric?.update({successMovingAverage:this.success.movingAverage,successDeviation:this.success.deviation,successForecast:this.success.forecast,successVariance:this.success.variance,success:t}))}}},5983:(e,t,r)=>{"use strict";r.d(t,{G:()=>s});var n=r(3985),i=r(9975);function s(e){try{if(!(0,i.b)(e))return!1;let[[,t]]=e.stringTuples();if(null==t)return!1;return(0,n.b)(t)??!1}catch{}return!0}},5993:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateBasic=t.wNAF=void 0;let n=r(7296),i=r(4075),s=BigInt(0),a=BigInt(1);t.wNAF=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>s;)r&a&&(n=n.add(i)),i=i.double(),r>>=a;return n},precomputeWindow(e,t){let{windows:r,windowSize:i}=n(t),s=[],a=e,o=a;for(let e=0;e<r;e++){o=a,s.push(o);for(let e=1;e<i;e++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(t,i,s){let{windows:o,windowSize:l}=n(t),c=e.ZERO,u=e.BASE,d=BigInt(2**t-1),h=2**t,f=BigInt(t);for(let e=0;e<o;e++){let t=e*l,n=Number(s&d);s>>=f,n>l&&(n-=h,s+=a);let o=t+Math.abs(n)-1,p=e%2!=0,g=n<0;0===n?u=u.add(r(p,i[t])):c=c.add(r(g,i[o]))}return{p:c,f:u}},wNAFCached(e,t,r,n){let i=e._WINDOW_SIZE||1,s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,n(s))),this.wNAF(i,s,r)}}},t.validateBasic=function(e){return(0,n.validateField)(e.Fp),(0,i.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}},6038:(e,t,r)=>{"use strict";r.d(t,{zH:()=>j,w2:()=>z,Y8:()=>w,mH:()=>D,eG:()=>U,iU:()=>F});var n,i=r(1138);let s=new Float32Array([-0]),a=new Uint8Array(s.buffer);function o(e,t,r){s[0]=e,t[r]=a[0],t[r+1]=a[1],t[r+2]=a[2],t[r+3]=a[3]}let l=new Float64Array([-0]),c=new Uint8Array(l.buffer);function u(e,t,r){l[0]=e,t[r]=c[0],t[r+1]=c[1],t[r+2]=c[2],t[r+3]=c[3],t[r+4]=c[4],t[r+5]=c[5],t[r+6]=c[6],t[r+7]=c[7]}let d=BigInt(Number.MAX_SAFE_INTEGER),h=BigInt(Number.MIN_SAFE_INTEGER);class f{lo;hi;constructor(e,t){this.lo=0|e,this.hi=0|t}toNumber(e=!1){if(!e&&this.hi>>>31>0){let e=~this.lo+1>>>0,t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(e+0x100000000*t)}return this.lo+0x100000000*this.hi}toBigInt(e=!1){if(e)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31!=0){let e=~this.lo+1>>>0,t=~this.hi>>>0;return 0===e&&(t=t+1>>>0),-(BigInt(e)+(BigInt(t)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(e=!1){return this.toBigInt(e).toString()}zzEncode(){let e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this}zzDecode(){let e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this}length(){let e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}static fromBigInt(e){if(0n===e)return p;if(e<d&&e>h)return this.fromNumber(Number(e));let t=e<0n;t&&(e=-e);let r=e>>32n,n=e-(r<<32n);return t&&(r=0n|~r,n=0n|~n,++n>g&&(n=0n,++r>g&&(r=0n))),new f(Number(n),Number(r))}static fromNumber(e){if(0===e)return p;let t=e<0;t&&(e=-e);let r=e>>>0,n=(e-r)/0x100000000>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>0xffffffff&&(r=0,++n>0xffffffff&&(n=0))),new f(r,n)}static from(e){return"number"==typeof e?f.fromNumber(e):"bigint"==typeof e?f.fromBigInt(e):"string"==typeof e?f.fromBigInt(BigInt(e)):null!=e.low||null!=e.high?new f(e.low>>>0,e.high>>>0):p}}let p=new f(0,0);p.toBigInt=function(){return 0n},p.zzEncode=p.zzDecode=function(){return this},p.length=function(){return 1};let g=4294967296n;function m(e,t,r){let n,i;let s=r;for(let s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:((64512&n)==55296&&(64512&(i=e.charCodeAt(s+1)))==56320?(n=65536+((1023&n)<<10)+(1023&i),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-s}function b(e,t){return RangeError(`index out of range: ${e.pos} + ${t??1} > ${e.len}`)}function y(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}class x{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(e){this.buf=e,this.pos=0,this.len=e.length}uint32(){let e=0xffffffff;if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,b(this,10);return e}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)|0}bool(){return 0!==this.uint32()}fixed32(){if(this.pos+4>this.len)throw b(this,4);return y(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw b(this,4);return 0|y(this.buf,this.pos+=4)}float(){var e,t;if(this.pos+4>this.len)throw b(this,4);let r=(e=this.buf,t=this.pos,a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],s[0]);return this.pos+=4,r}double(){var e,t;if(this.pos+8>this.len)throw b(this,4);let r=(e=this.buf,t=this.pos,c[0]=e[t],c[1]=e[t+1],c[2]=e[t+2],c[3]=e[t+3],c[4]=e[t+4],c[5]=e[t+5],c[6]=e[t+6],c[7]=e[t+7],l[0]);return this.pos+=8,r}bytes(){let e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw b(this,e);return this.pos+=e,t===r?new Uint8Array(0):this.buf.subarray(t,r)}string(){let e=this.bytes();return function(e,t,r){let n,i;if(r-t<1)return"";let s=[],a=0;for(;t<r;)(i=e[t++])<128?s[a++]=i:i>191&&i<224?s[a++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[a++]=55296+(i>>10),s[a++]=56320+(1023&i)):s[a++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((n??(n=[])).push(String.fromCharCode.apply(String,s)),a=0);return null!=n?(a>0&&n.push(String.fromCharCode.apply(String,s.slice(0,a))),n.join("")):String.fromCharCode.apply(String,s.slice(0,a))}(e,0,e.length)}skip(e){if("number"==typeof e){if(this.pos+e>this.len)throw b(this,e);this.pos+=e}else do if(this.pos>=this.len)throw b(this);while((128&this.buf[this.pos++])!=0);return this}skipType(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${e} at offset ${this.pos}`)}return this}readLongVarint(){let e=new f(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw b(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw b(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw b(this,8);return new f(y(this.buf,this.pos+=4),y(this.buf,this.pos+=4))}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){let e=(0,i.Sb)(this.buf,this.pos);return this.pos+=(0,i.OY)(e),e}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function w(e,t,r){let n=new x(e instanceof Uint8Array?e:e.subarray());return t.decode(n,void 0,r)}var v=r(1970),A=r(9865);class E{fn;len;next;val;constructor(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}}function k(){}class P{head;tail;len;next;constructor(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}}let S=function(e){let t;let r=(void 0)??8192,n=r>>>1,i=r;return function(e){if(e<1||e>n)return(0,v.K)(e);i+e>r&&(t=(0,v.K)(r),i=0);let s=t.subarray(i,i+=e);return(7&i)!=0&&(i=(7|i)+1),s}}();class I{len;head;tail;states;constructor(){this.len=0,this.head=new E(k,0,0),this.tail=this.head,this.states=null}_push(e,t,r){return this.tail=this.tail.next=new E(e,t,r),this.len+=t,this}uint32(e){return this.len+=(this.tail=this.tail.next=new C((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<0x10000000?4:5,e)).len,this}int32(e){return e<0?this._push(O,10,f.fromNumber(e)):this.uint32(e)}sint32(e){return this.uint32((e<<1^e>>31)>>>0)}uint64(e){let t=f.fromBigInt(e);return this._push(O,t.length(),t)}uint64Number(e){return this._push(i.mD,(0,i.OY)(e),e)}uint64String(e){return this.uint64(BigInt(e))}int64(e){return this.uint64(e)}int64Number(e){return this.uint64Number(e)}int64String(e){return this.uint64String(e)}sint64(e){let t=f.fromBigInt(e).zzEncode();return this._push(O,t.length(),t)}sint64Number(e){let t=f.fromNumber(e).zzEncode();return this._push(O,t.length(),t)}sint64String(e){return this.sint64(BigInt(e))}bool(e){return this._push(T,1,+!!e)}fixed32(e){return this._push(R,4,e>>>0)}sfixed32(e){return this.fixed32(e)}fixed64(e){let t=f.fromBigInt(e);return this._push(R,4,t.lo)._push(R,4,t.hi)}fixed64Number(e){let t=f.fromNumber(e);return this._push(R,4,t.lo)._push(R,4,t.hi)}fixed64String(e){return this.fixed64(BigInt(e))}sfixed64(e){return this.fixed64(e)}sfixed64Number(e){return this.fixed64Number(e)}sfixed64String(e){return this.fixed64String(e)}float(e){return this._push(o,4,e)}double(e){return this._push(u,8,e)}bytes(e){let t=e.length>>>0;return 0===t?this._push(T,1,0):this.uint32(t)._push(N,t,e)}string(e){let t=function(e){let t=0,r=0;for(let n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:(64512&r)==55296&&(64512&e.charCodeAt(n+1))==56320?(++n,t+=4):t+=3;return t}(e);return 0!==t?this.uint32(t)._push(m,t,e):this._push(T,1,0)}fork(){return this.states=new P(this),this.head=this.tail=new E(k,0,0),this.len=0,this}reset(){return null!=this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new E(k,0,0),this.len=0),this}ldelim(){let e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),0!==r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this}finish(){var e;let t=this.head.next,r=(e=this.len,null!=globalThis.Buffer?(0,v.K)(e):S(e)),n=0;for(;null!=t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r}}function T(e,t,r){t[r]=255&e}function _(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}class C extends E{next;constructor(e,t){super(_,e,t),this.next=void 0}}function O(e,t,r){for(;0!==e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function R(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function N(e,t,r){t.set(e,r)}function M(e,t,r){t.set(e,r)}function B(e,t,r){e.length<40?m(e,t,r):null!=t.utf8Write?t.utf8Write(e,r):t.set((0,A.s)(e),r)}function D(e,t){let r=new I;return t.encode(e,r,{lengthDelimited:!1}),r.finish()}function L(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function U(e){function t(t){if(null==e[t.toString()])throw Error("Invalid enum value");return e[t]}return L("enum",n.VARINT,function(e,r){let n=t(e);r.int32(n)},function(e){return t(e.int32())})}function F(e,t){return L("message",n.LENGTH_DELIMITED,e,t)}null!=globalThis.Buffer&&(I.prototype.bytes=function(e){let t=e.length>>>0;return this.uint32(t),t>0&&this._push(M,t,e),this},I.prototype.string=function(e){let t=globalThis.Buffer.byteLength(e);return this.uint32(t),t>0&&this._push(B,t,e),this}),!function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"}(n||(n={}));class j extends Error{code="ERR_MAX_LENGTH";name="MaxLengthError"}class z extends Error{code="ERR_MAX_SIZE";name="MaxSizeError"}},6047:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>o,MU:()=>n});class n extends Error{constructor(e){super(e),this.name="TimeoutError"}}class i extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}let s=e=>void 0===globalThis.DOMException?new i(e):new DOMException(e),a=e=>{let t=void 0===e.reason?s("This operation was aborted."):e.reason;return t instanceof Error?t:s(t)};function o(e,t){let r,i;let{milliseconds:s,fallback:o,message:l,customTimers:c={setTimeout,clearTimeout}}=t,u=new Promise((u,d)=>{if("number"!=typeof s||1!==Math.sign(s))throw TypeError(`Expected \`milliseconds\` to be a positive number, got \`${s}\``);if(t.signal){let{signal:e}=t;e.aborted&&d(a(e)),i=()=>{d(a(e))},e.addEventListener("abort",i,{once:!0})}if(s===Number.POSITIVE_INFINITY){e.then(u,d);return}let h=new n;r=c.setTimeout.call(void 0,()=>{if(o){try{u(o())}catch(e){d(e)}return}"function"==typeof e.cancel&&e.cancel(),!1===l?u():l instanceof Error?d(l):(h.message=l??`Promise timed out after ${s} milliseconds`,d(h))},s),(async()=>{try{u(await e)}catch(e){d(e)}})()}).finally(()=>{u.clear(),i&&t.signal&&t.signal.removeEventListener("abort",i)});return u.clear=()=>{c.clearTimeout.call(void 0,r),r=void 0},u}},6054:(e,t,r)=>{"use strict";r.d(t,{d:()=>i});var n=r(1108);function i(e,t="utf8"){let r=n.A[t];if(null==r)throw Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}},6135:(e,t,r)=>{"use strict";r.d(t,{h5:()=>a,Go:()=>o,N0:()=>l});class n extends Error{static name="InvalidPeerScoreParamsError";constructor(e="Invalid peer score params"){super(e),this.name="InvalidPeerScoreParamsError"}}let i={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:36e5},s={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function a(e={}){return{...i,...e,topics:null!=e.topics?Object.entries(e.topics).reduce((e,[t,r])=>(e[t]=o(r),e),{}):{}}}function o(e={}){return{...s,...e}}function l(e){for(let[t,r]of Object.entries(e.topics))try{!function(e){if(e.topicWeight<0)throw new n("invalid topic weight; must be >= 0");if(0===e.timeInMeshQuantum)throw new n("invalid TimeInMeshQuantum; must be non zero");if(e.timeInMeshWeight<0)throw new n("invalid TimeInMeshWeight; must be positive (or 0 to disable)");if(0!==e.timeInMeshWeight&&e.timeInMeshQuantum<=0)throw new n("invalid TimeInMeshQuantum; must be positive");if(0!==e.timeInMeshWeight&&e.timeInMeshCap<=0)throw new n("invalid TimeInMeshCap; must be positive");if(e.firstMessageDeliveriesWeight<0)throw new n("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)");if(0!==e.firstMessageDeliveriesWeight&&(e.firstMessageDeliveriesDecay<=0||e.firstMessageDeliveriesDecay>=1))throw new n("invalid FirstMessageDeliveriesDecay; must be between 0 and 1");if(0!==e.firstMessageDeliveriesWeight&&e.firstMessageDeliveriesCap<=0)throw new n("invalid FirstMessageDeliveriesCap; must be positive");if(e.meshMessageDeliveriesWeight>0)throw new n("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)");if(0!==e.meshMessageDeliveriesWeight&&(e.meshMessageDeliveriesDecay<=0||e.meshMessageDeliveriesDecay>=1))throw new n("invalid MeshMessageDeliveriesDecay; must be between 0 and 1");if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesCap<=0)throw new n("invalid MeshMessageDeliveriesCap; must be positive");if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesThreshold<=0)throw new n("invalid MeshMessageDeliveriesThreshold; must be positive");if(e.meshMessageDeliveriesWindow<0)throw new n("invalid MeshMessageDeliveriesWindow; must be non-negative");if(0!==e.meshMessageDeliveriesWeight&&e.meshMessageDeliveriesActivation<1e3)throw new n("invalid MeshMessageDeliveriesActivation; must be at least 1s");if(e.meshFailurePenaltyWeight>0)throw new n("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)");if(0!==e.meshFailurePenaltyWeight&&(e.meshFailurePenaltyDecay<=0||e.meshFailurePenaltyDecay>=1))throw new n("invalid MeshFailurePenaltyDecay; must be between 0 and 1");if(e.invalidMessageDeliveriesWeight>0)throw new n("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)");if(e.invalidMessageDeliveriesDecay<=0||e.invalidMessageDeliveriesDecay>=1)throw new n("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1")}(r)}catch(e){throw new n(`invalid score parameters for topic ${t}: ${e.message}`)}if(e.topicScoreCap<0)throw new n("invalid topic score cap; must be positive (or 0 for no cap)");if(null===e.appSpecificScore||void 0===e.appSpecificScore)throw new n("missing application specific score function");if(e.IPColocationFactorWeight>0)throw new n("invalid IPColocationFactorWeight; must be negative (or 0 to disable)");if(0!==e.IPColocationFactorWeight&&e.IPColocationFactorThreshold<1)throw new n("invalid IPColocationFactorThreshold; must be at least 1");if(e.behaviourPenaltyWeight>0)throw new n("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)");if(0!==e.behaviourPenaltyWeight&&(e.behaviourPenaltyDecay<=0||e.behaviourPenaltyDecay>=1))throw new n("invalid BehaviourPenaltyDecay; must be between 0 and 1");if(e.decayInterval<1e3)throw new n("invalid DecayInterval; must be at least 1s");if(e.decayToZero<=0||e.decayToZero>=1)throw new n("invalid DecayToZero; must be between 0 and 1")}},6235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkInvalidKeys=t.isValidISO8601Date=t.generateNonce=t.checkContractWalletSignature=void 0;let n=r(4618),i=r(7064),s=r(2513),a=["function isValidSignature(bytes32 _message, bytes _signature) public view returns (bytes4)"],o=/^(?<date>[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01]))[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))$/;t.checkContractWalletSignature=async(e,t,r)=>{if(!r)return!1;let n=new i.Contract(e.address,a,r),o=(0,s.hashMessage)(e.prepareMessage());return await n.isValidSignature(o,t)==="0x1626ba7e"},t.generateNonce=()=>{let e=(0,n.randomStringForEntropy)(96);if(!e||e.length<8)throw Error("Error during nonce creation.");return e},t.isValidISO8601Date=e=>{let t=o.exec(e);if(!t)return!1;let r=new Date(t.groups.date).toISOString(),n=o.exec(r);return t.groups.date===n.groups.date},t.checkInvalidKeys=(e,t)=>{let r=[];return Object.keys(e).forEach(e=>{t.includes(e)||r.push(e)}),r}},6264:(e,t,r)=>{"use strict";r.d(t,{w:()=>i});var n=r(2804);class i extends n.o{has(e){return null!=this.find(e)}find(e){return this.queue.find(t=>e.equals(t.options.peerId))}}},6269:(e,t,r)=>{"use strict";r.d(t,{Vw:()=>h,$h:()=>c,tY:()=>p,Id:()=>d,O8:()=>a,po:()=>m,Ow:()=>o,ZJ:()=>u,DH:()=>s,ld:()=>g});let n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,i=e=>e instanceof Uint8Array,s=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),a=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),o=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([0x11223344]).buffer)[0])throw Error("Non little-endian hardware is not supported");(e,t)=>t.toString(16).padStart(2,"0");let l=async()=>{};async function c(e,t,r){let n=Date.now();for(let i=0;i<e;i++){r(i);let e=Date.now()-n;e>=0&&e<t||(await l(),n+=e)}}function u(e){if("string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}(e)),!i(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}function d(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!i(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}class h{clone(){return this._cloneInto()}}let f={}.toString;function p(e,t){if(void 0!==t&&"[object Object]"!==f.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)}function g(e){let t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function m(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}},6411:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=function(e){if(null!=e[Symbol.asyncIterator])return(async()=>{for await(let t of e);})();for(let t of e);}},6420:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var n=r(8616);class i{filter;emitter;#T;constructor(e,t,r){this.#T=t,(0,n.n)(this,{emitter:e,filter:r})}async removeListener(){null!=this.#T&&await this.emitter.off(this.filter,this.#T)}}},6456:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decryptCrowdsaleJson=t.isCrowdsaleJson=void 0;let n=r(1252),i=r(9111),s=r(6870),a=r(4259),o=r(8662),l=r(5216);t.isCrowdsaleJson=function(e){try{if(JSON.parse(e).encseed)return!0}catch(e){}return!1},t.decryptCrowdsaleJson=function(e,t){let r=JSON.parse(e),c=(0,l.getPassword)(t),u=(0,i.getAddress)((0,l.spelunk)(r,"ethaddr:string!")),d=(0,l.looseArrayify)((0,l.spelunk)(r,"encseed:string!"));(0,o.assertArgument)(d&&d.length%16==0,"invalid encseed","json",e);let h=(0,o.getBytes)((0,s.pbkdf2)(c,c,2e3,32,"sha256")).slice(0,16),f=d.slice(0,16),p=d.slice(16),g=new n.CBC(h,f),m=(0,n.pkcs7Strip)((0,o.getBytes)(g.decrypt(p))),b="";for(let e=0;e<m.length;e++)b+=String.fromCharCode(m[e]);return{address:u,privateKey:(0,a.id)(b)}}},6458:(e,t,r)=>{"use strict";r.d(t,{Q7:()=>i});var n=r(2706);function i(e){return e.filter(e=>n.YJ.exactMatch(e)||n.By.exactMatch(e))}},6523:(e,t,r)=>{"use strict";let n;r.d(t,{E:()=>r1});var i,s,a,o,l,c=r(4892),u=r(1680),d=r(8981),h=r(9827);function f(e){if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}let{hasOwnProperty:p}=Object.prototype,{propertyIsEnumerable:g}=Object,m=(e,t,r)=>{Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})},b=void 0,y={concatArrays:!1,ignoreUndefined:!1},x=e=>{let t=[];for(let r in e)p.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols)for(let r of Object.getOwnPropertySymbols(e))g.call(e,r)&&t.push(r);return t};function w(e){return Array.isArray(e)?function(e){let t=e.slice(0,0);return x(e).forEach(r=>{m(t,r,w(e[r]))}),t}(e):f(e)?function(e){let t=null===Object.getPrototypeOf(e)?Object.create(null):{};return x(e).forEach(r=>{m(t,r,w(e[r]))}),t}(e):e}let v=(e,t,r,n)=>(r.forEach(r=>{(void 0!==t[r]||!n.ignoreUndefined)&&(r in e&&e[r]!==Object.getPrototypeOf(e)?m(e,r,E(e[r],t[r],n)):m(e,r,w(t[r])))}),e),A=(e,t,r)=>{let n=e.slice(0,0),i=0;return[e,t].forEach(t=>{let s=[];for(let r=0;r<t.length;r++)p.call(t,r)&&(s.push(String(r)),t===e?m(n,i++,t[r]):m(n,i++,w(t[r])));n=v(n,t,x(t).filter(e=>!s.includes(e)),r)}),n};function E(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?A(e,t,r):f(t)&&f(e)?v(e,t,x(t),r):w(t)}function k(...e){let t=E(w(y),this!==b&&this||{},y),r={_:{}};for(let n of e)if(void 0!==n){if(!f(n))throw TypeError("`"+n+"` is not an Option Object");r=E(r,{_:n},t)}return r._}var P=r(608),S=r(2392),I=r(6047);class T{#tU=[];enqueue(e,t){let r={priority:(t={priority:0,...t}).priority,id:t.id,run:e};if(0===this.size||this.#tU[this.size-1].priority>=t.priority){this.#tU.push(r);return}let n=function(e,t,r){let n=0,i=e.length;for(;i>0;){let s=Math.trunc(i/2),a=n+s;0>=r(e[a],t)?(n=++a,i-=s+1):i=s}return n}(this.#tU,r,(e,t)=>t.priority-e.priority);this.#tU.splice(n,0,r)}setPriority(e,t){let r=this.#tU.findIndex(t=>t.id===e);if(-1===r)throw ReferenceError(`No promise function with the id "${e}" exists in the queue.`);let[n]=this.#tU.splice(r,1);this.enqueue(n.run,{priority:t,id:e})}dequeue(){let e=this.#tU.shift();return e?.run}filter(e){return this.#tU.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this.#tU.length}}class _ extends S{#tF;#tj;#tz=0;#tH;#eT;#tG=0;#t$;#tV;#tU;#tq;#tK=0;#tW;#tQ;#tZ;#tJ=1n;timeout;constructor(e){if(super(),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:T,...e}).intervalCap&&e.intervalCap>=1))throw TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#tF=e.carryoverConcurrencyCount,this.#tj=e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval,this.#tH=e.intervalCap,this.#eT=e.interval,this.#tU=new e.queueClass,this.#tq=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#tZ=!0===e.throwOnTimeout,this.#tQ=!1===e.autoStart}get #tY(){return this.#tj||this.#tz<this.#tH}get #tX(){return this.#tK<this.#tW}#t0(){this.#tK--,this.#t1(),this.emit("next")}#t2(){this.#t3(),this.#t4(),this.#tV=void 0}get #t6(){let e=Date.now();if(void 0===this.#t$){let t=this.#tG-e;if(!(t<0))return void 0===this.#tV&&(this.#tV=setTimeout(()=>{this.#t2()},t)),!0;this.#tz=this.#tF?this.#tK:0}return!1}#t1(){if(0===this.#tU.size)return this.#t$&&clearInterval(this.#t$),this.#t$=void 0,this.emit("empty"),0===this.#tK&&this.emit("idle"),!1;if(!this.#tQ){let e=!this.#t6;if(this.#tY&&this.#tX){let t=this.#tU.dequeue();return!!t&&(this.emit("active"),t(),e&&this.#t4(),!0)}}return!1}#t4(){!this.#tj&&void 0===this.#t$&&(this.#t$=setInterval(()=>{this.#t3()},this.#eT),this.#tG=Date.now()+this.#eT)}#t3(){0===this.#tz&&0===this.#tK&&this.#t$&&(clearInterval(this.#t$),this.#t$=void 0),this.#tz=this.#tF?this.#tK:0,this.#t5()}#t5(){for(;this.#t1(););}get concurrency(){return this.#tW}set concurrency(e){if(!("number"==typeof e&&e>=1))throw TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#tW=e,this.#t5()}async #t8(e){return new Promise((t,r)=>{e.addEventListener("abort",()=>{r(e.reason)},{once:!0})})}setPriority(e,t){this.#tU.setPriority(e,t)}async add(e,t={}){return t.id??=(this.#tJ++).toString(),t={timeout:this.timeout,throwOnTimeout:this.#tZ,...t},new Promise((r,n)=>{this.#tU.enqueue(async()=>{this.#tK++,this.#tz++;try{t.signal?.throwIfAborted();let n=e({signal:t.signal});t.timeout&&(n=(0,I.Ay)(Promise.resolve(n),{milliseconds:t.timeout})),t.signal&&(n=Promise.race([n,this.#t8(t.signal)]));let i=await n;r(i),this.emit("completed",i)}catch(e){if(e instanceof I.MU&&!t.throwOnTimeout){r();return}n(e),this.emit("error",e)}finally{this.#t0()}},t),this.emit("add"),this.#t1()})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this.#tQ&&(this.#tQ=!1,this.#t5()),this}pause(){this.#tQ=!0}clear(){this.#tU=new this.#tq}async onEmpty(){0!==this.#tU.size&&await this.#t7("empty")}async onSizeLessThan(e){!(this.#tU.size<e)&&await this.#t7("next",()=>this.#tU.size<e)}async onIdle(){(0!==this.#tK||0!==this.#tU.size)&&await this.#t7("idle")}async #t7(e,t){return new Promise(r=>{let n=()=>{(!t||t())&&(this.off(e,n),r())};this.on(e,n)})}get size(){return this.#tU.size}sizeBy(e){return this.#tU.filter(e).length}get pending(){return this.#tK}get isPaused(){return this.#tQ}}function C(e){let t=[i.A];return null==e?t:Array.isArray(e)?0===e.length?t:e:[e]}var O=r(6054);function R(e){return{Status:e.Status??0,TC:e.TC??e.flag_tc??!1,RD:e.RD??e.flag_rd??!1,RA:e.RA??e.flag_ra??!1,AD:e.AD??e.flag_ad??!1,CD:e.CD??e.flag_cd??!1,Question:(e.Question??e.questions??[]).map(e=>({name:e.name,type:i[e.type]})),Answer:(e.Answer??e.answers??[]).map(e=>({name:e.name,type:i[e.type],TTL:e.TTL??e.ttl??60,data:e.data instanceof Uint8Array?(0,O.d)(e.data):e.data}))}}function N(e,t={}){let r=new _({concurrency:t.queryConcurrency??4});return async(t,n={})=>{let s=new URLSearchParams;s.set("name",t),C(n.types).forEach(e=>{s.append("type",i[e])}),n.onProgress?.(new P.j("dns:query",{detail:t}));let a=await r.add(async()=>{let t=await fetch(`${e}?${s}`,{headers:{accept:"application/dns-json"},signal:n?.signal});if(200!==t.status)throw Error(`Unexpected HTTP status: ${t.status} - ${t.statusText}`);let r=R(await t.json());return n.onProgress?.(new P.j("dns:response",{detail:r})),r},{signal:n.signal});if(null==a)throw Error("No DNS response received");return a}}var M=r(518);class B{lru;constructor(e){this.lru=M(e)}get(e,t){let r=!0,n=[];for(let i of t){let t=this.getAnswers(e,i);if(0===t.length){r=!1;break}n.push(...t)}if(r)return R({answers:n})}getAnswers(e,t){let r=`${e.toLowerCase()}-${t}`,n=this.lru.get(r);if(null!=n){let e=n.filter(e=>e.expires>Date.now()).map(({expires:e,value:t})=>({...t,TTL:Math.round((e-Date.now())/1e3),type:i[t.type]}));return 0===e.length&&this.lru.remove(r),e}return[]}add(e,t){let r=`${e.toLowerCase()}-${t.type}`,n=this.lru.get(r)??[];n.push({expires:Date.now()+(t.TTL??60)*1e3,value:t}),this.lru.set(r,n)}remove(e,t){let r=`${e.toLowerCase()}-${t}`;this.lru.remove(r)}clear(){this.lru.clear()}}class D{resolvers;cache;constructor(e){this.resolvers={},this.cache=new B(e.cacheSize??1e3),Object.entries(e.resolvers??{}).forEach(([e,t])=>{Array.isArray(t)||(t=[t]),e.endsWith(".")||(e=`${e}.`),this.resolvers[e]=t}),null==this.resolvers["."]&&(this.resolvers["."]=[N("https://cloudflare-dns.com/dns-query"),N("https://dns.google/resolve")])}async query(e,t={}){let r=C(t.types),n=!1!==t.cached?this.cache.get(e,r):void 0;if(null!=n)return t.onProgress?.(new P.j("dns:cache",{detail:n})),n;let i=`${e.split(".").pop()}.`,s=(this.resolvers[i]??this.resolvers["."]).sort(()=>Math.random()>.5?-1:1),a=[];for(let n of s){if(t.signal?.aborted===!0)break;try{let i=await n(e,{...t,types:r});for(let t of i.Answer)this.cache.add(e,t);return i}catch(e){a.push(e),t.onProgress?.(new P.j("dns:error",{detail:e}))}}if(1===a.length)throw a[0];throw AggregateError(a,`DNS lookup of ${e} ${r} failed`)}}!function(e){e[e.A=1]="A",e[e.CNAME=5]="CNAME",e[e.TXT=16]="TXT",e[e.AAAA=28]="AAAA"}(i||(i={}));var L=r(3809);class U{dns;canResolve(e){return e.getComponents().some(({name:e})=>"dnsaddr"===e)}async resolve(e,t){let r=e.getComponents().find(e=>"dnsaddr"===e.name)?.value;if(null==r)return[e];let n=this.getDNS(t),s=await n.query(`_dnsaddr.${r}`,{signal:t?.signal,types:[i.TXT]}),a=e.getComponents().find(e=>"p2p"===e.name)?.value,o=[];for(let e of s.Answer){let t=e.data.replace(/["']/g,"").trim().split("=")[1];null!=t&&(null==a||t.includes(a))&&o.push((0,L.HZ)(t))}return o}getDNS(e){return null!=e.dns?e.dns:(null==this.dns&&(this.dns=function(e={}){return new D(e)}()),this.dns)}}let F=new U,j={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:e=>e},connectionManager:{resolvers:{dnsaddr:F}},transportManager:{faultTolerance:d.aF.FATAL_ALL}};async function z(e){let t=k(j,e);if(null===t.connectionProtector&&globalThis.process?.env?.LIBP2P_FORCE_PNET!=null)throw new h.gG("Private network is enforced, but no protector was provided");return t}var H=r(458),G=r(4303),$=r(2923),V=r(2577),q=r(5173),K=r(1070),W=r(4845),Q=r(4716),Z=r(332),J=r(7952),Y=r(4814),X=r(1643),ee=r(9141),et=r(8965);class er extends Error{static name="QueueFullError";constructor(e="The queue was full"){super(e),this.name="QueueFullError"}}var en=r(6676),ei=r(9985);class es{deferred;signal;constructor(e){this.signal=e,this.deferred=Promise.withResolvers(),this.onAbort=this.onAbort.bind(this),this.signal?.addEventListener("abort",this.onAbort)}onAbort(){this.deferred.reject(this.signal?.reason??new Y.l)}cleanup(){this.signal?.removeEventListener("abort",this.onAbort)}}class ea{id;fn;options;recipients;status;timeline;controller;constructor(e,t){this.id=`${parseInt(String(1e9*Math.random()),10).toString()}${Date.now()}`,this.status="queued",this.fn=e,this.options=t,this.recipients=[],this.timeline={created:Date.now()},this.controller=new AbortController,(0,en.k)(1/0,this.controller.signal),this.onAbort=this.onAbort.bind(this)}abort(e){this.controller.abort(e)}onAbort(){this.recipients.reduce((e,t)=>e&&t.signal?.aborted===!0,!0)&&(this.controller.abort(new Y.l),this.cleanup())}async join(e={}){let t=new es(e.signal);return this.recipients.push(t),e.signal?.addEventListener("abort",this.onAbort),t.deferred.promise}async run(){this.status="running",this.timeline.started=Date.now();try{this.controller.signal.throwIfAborted();let e=await (0,ei.W)(this.fn({...this.options??{},signal:this.controller.signal}),this.controller.signal);this.recipients.forEach(t=>{t.deferred.resolve(e)}),this.status="complete"}catch(e){this.recipients.forEach(t=>{t.deferred.reject(e)}),this.status="errored"}finally{this.timeline.finished=Date.now(),this.cleanup()}}cleanup(){this.recipients.forEach(e=>{e.cleanup(),e.signal?.removeEventListener("abort",this.onAbort)})}}function eo(e,t){let r;let n=function(){clearTimeout(r),r=setTimeout(function(){r=void 0,e()},t)};return n.start=()=>{},n.stop=()=>{clearTimeout(r)},n}class el extends ee.X{concurrency;maxSize;queue;pending;sort;autoStart;constructor(e={}){super(),this.concurrency=e.concurrency??Number.POSITIVE_INFINITY,this.maxSize=e.maxSize??Number.POSITIVE_INFINITY,this.pending=0,this.autoStart=e.autoStart??!0,this.sort=e.sort,this.queue=[],this.emitEmpty=eo(this.emitEmpty.bind(this),1),this.emitIdle=eo(this.emitIdle.bind(this),1)}[Symbol.asyncIterator](){return this.toGenerator()}emitEmpty(){0===this.size&&this.safeDispatchEvent("empty")}emitIdle(){0===this.running&&this.safeDispatchEvent("idle")}tryToStartAnother(){if(0===this.size)return this.emitEmpty(),0===this.running&&this.emitIdle(),!1;if(this.pending<this.concurrency){let e;for(let t of this.queue)if("queued"===t.status){e=t;break}return null!=e&&(this.safeDispatchEvent("active"),this.pending++,e.run().finally(()=>{for(let t=0;t<this.queue.length;t++)if(this.queue[t]===e){this.queue.splice(t,1);break}this.pending--,this.safeDispatchEvent("next"),this.autoStart&&this.tryToStartAnother()}),!0)}return!1}enqueue(e){this.queue.push(e),null!=this.sort&&this.queue.sort(this.sort)}start(){!1===this.autoStart&&(this.autoStart=!0,this.tryToStartAnother())}pause(){this.autoStart=!1}async add(e,t){if(t?.signal?.throwIfAborted(),this.size===this.maxSize)throw new er;let r=new ea(e,t);return this.enqueue(r),this.safeDispatchEvent("add"),this.autoStart&&this.tryToStartAnother(),r.join(t).then(e=>(this.safeDispatchEvent("success",{detail:{job:r,result:e}}),e)).catch(e=>{if("queued"===r.status){for(let e=0;e<this.queue.length;e++)if(this.queue[e]===r){this.queue.splice(e,1);break}}throw this.safeDispatchEvent("failure",{detail:{job:r,error:e}}),e})}clear(){this.queue.splice(0,this.queue.length)}abort(){this.queue.forEach(e=>{e.abort(new Y.l)}),this.clear()}async onEmpty(e){0!==this.size&&await (0,et.y)(this,"empty",e?.signal)}async onSizeLessThan(e,t){!(this.size<e)&&await (0,et.y)(this,"next",t?.signal,{filter:()=>this.size<e})}async onIdle(e){(0!==this.pending||0!==this.size)&&await (0,et.y)(this,"idle",e?.signal)}get size(){return this.queue.length}get queued(){return this.queue.length-this.pending}get running(){return this.pending}async *toGenerator(e){e?.signal?.throwIfAborted();let t=(0,X.Ny)({objectMode:!0}),r=e=>{null!=e?this.abort():this.clear(),t.end(e)},n=e=>{null!=e.detail&&t.push(e.detail.result)},i=e=>{r(e.detail.error)},s=()=>{r()},a=()=>{r(new Y.l("Queue aborted"))};this.addEventListener("success",n),this.addEventListener("failure",i),this.addEventListener("idle",s),e?.signal?.addEventListener("abort",a);try{yield*t}finally{this.removeEventListener("success",n),this.removeEventListener("failure",i),this.removeEventListener("idle",s),e?.signal?.removeEventListener("abort",a),r()}}}let ec="lock:worker:request-read",eu="lock:worker:abort-read-request",ed="lock:worker:release-read",eh="lock:master:grant-read",ef="lock:master:error-read",ep="lock:worker:request-write",eg="lock:worker:abort-write-request",em="lock:worker:release-write",eb="lock:master:grant-write",ey="lock:master:error-write",ex="lock:worker:finalize",ew="mortice",ev={singleProcess:!1},eA=(e,t,r,n,i,s,a,o,l)=>c=>{if(null==c.data)return;let u={type:c.data.type,name:c.data.name,identifier:c.data.identifier};u.type===i&&e.safeDispatchEvent(r,{detail:{name:u.name,identifier:u.identifier,handler:async()=>{t.postMessage({type:l,name:u.name,identifier:u.identifier}),await new Promise(e=>{let r=n=>{if(n?.data==null)return;let i={type:n.data.type,name:n.data.name,identifier:n.data.identifier};i.type===o&&i.identifier===u.identifier&&(t.removeEventListener("message",r),e())};t.addEventListener("message",r)})},onError:e=>{t.postMessage({type:a,name:u.name,identifier:u.identifier,error:{message:e.message,name:e.name,stack:e.stack}})}}}),u.type===s&&e.safeDispatchEvent(n,{detail:{name:u.name,identifier:u.identifier}}),u.type===ex&&e.safeDispatchEvent("finalizeRequest",{detail:{name:u.name}})},eE=(e=10)=>Math.random().toString().substring(2,e+2);class ek{name;channel;constructor(e){this.name=e,this.channel=new BroadcastChannel(ew)}readLock(e){return this.sendRequest(ec,eu,eh,ef,ed,e)}writeLock(e){return this.sendRequest(ep,eg,eb,ey,em,e)}finalize(){this.channel.postMessage({type:ex,name:this.name}),this.channel.close()}async sendRequest(e,t,r,n,i,s){s?.signal?.throwIfAborted();let a=eE();return this.channel.postMessage({type:e,identifier:a,name:this.name}),new Promise((e,o)=>{let l=()=>{this.channel.postMessage({type:t,identifier:a,name:this.name})};s?.signal?.addEventListener("abort",l,{once:!0});let c=t=>{if(t.data?.identifier===a&&(t.data?.type===r&&(this.channel.removeEventListener("message",c),s?.signal?.removeEventListener("abort",l),e(()=>{this.channel.postMessage({type:i,identifier:a,name:this.name})})),t.data.type===n)){this.channel.removeEventListener("message",c),s?.signal?.removeEventListener("abort",l);let e=Error();null!=t.data.error&&(e.message=t.data.error.message,e.name=t.data.error.name,e.stack=t.data.error.stack),o(e)}};this.channel.addEventListener("message",c)})}}let eP=e=>{if(e=Object.assign({},ev,e),globalThis.document||e.singleProcess){let e=new BroadcastChannel(ew),t=new ee.X;return e.addEventListener("message",eA(t,e,"requestReadLock","abortReadLockRequest",ec,eu,ef,ed,eh)),e.addEventListener("message",eA(t,e,"requestWriteLock","abortWriteLockRequest",ep,eg,ey,em,eb)),t}return new ek(e.name)},eS=new Map;function eI(e){return"function"==typeof e?.readLock&&"function"==typeof e?.writeLock}async function eT(e,t){let r,n;let i=new Promise((e,t)=>{r=e,n=t}),s=()=>{n(new Y.l)};return t?.signal?.addEventListener("abort",s,{once:!0}),e.add(async()=>{await new Promise(e=>{r(()=>{t?.signal?.removeEventListener("abort",s),e()})})},{signal:t?.signal}).catch(e=>{n(e)}),i}let e_=(e,t)=>{let r,i=eS.get(e);if(null!=i)return i;let s=function(e){if(null==n&&!eI(n=eP(e))){let e=n;e.addEventListener("requestReadLock",t=>{let r=t.detail.name,n=t.detail.identifier,i=eS.get(r);if(null==i)return;let s=new AbortController,a=e=>{e.detail.name===r&&e.detail.identifier===n&&s.abort()};e.addEventListener("abortReadLockRequest",a),i.readLock({signal:s.signal}).then(async e=>{await t.detail.handler().finally(()=>{e()})}).catch(e=>{t.detail.onError(e)}).finally(()=>{e.removeEventListener("abortReadLockRequest",a)})}),e.addEventListener("requestWriteLock",t=>{let r=t.detail.name,n=t.detail.identifier,i=eS.get(r);if(null==i)return;let s=new AbortController,a=e=>{e.detail.name===r&&e.detail.identifier===n&&s.abort()};e.addEventListener("abortWriteLockRequest",a),i.writeLock({signal:s.signal}).then(async e=>{await t.detail.handler().finally(()=>{e()})}).catch(e=>{t.detail.onError(e)}).finally(()=>{e.removeEventListener("abortWriteLockRequest",a)})}),e.addEventListener("finalizeRequest",e=>{let t=e.detail.name,r=eS.get(t);null!=r&&r.finalize()})}return n}(t);if(eI(s))return i=s,eS.set(e,i),i;let a=new el({concurrency:1});return i={async readLock(e){if(null!=r)return eT(r,e);let n=r=new el({concurrency:t.concurrency,autoStart:!1}),i=eT(r,e);return a.add(async()=>{n.start(),await n.onIdle().then(()=>{r===n&&(r=null)})}),i},writeLock:async e=>(r=null,eT(a,e)),finalize:()=>{eS.delete(e)},queue:a},eS.set(e,i),!0===t.autoFinalize&&a.addEventListener("idle",()=>{i.finalize()},{once:!0}),i},eC={name:"lock",concurrency:1/0,singleProcess:!1,autoFinalize:!1};var eO=r(5587),eR=r(9700),eN=r(6038),eM=r(1970);function eB(e,t,r){let n=new Map,i=BigInt(Date.now());for(let[e,r]of t.tags.entries())(null==r.expiry||!(r.expiry<i))&&n.set(e,r);return{...t,id:function(e,t){let r;if(null!=e.publicKey||null==t.publicKey)return e;"RSA"===e.type&&(r=e.toMultihash());let n=(0,c.EZ)(t.publicKey,r);return(0,u.sR)(n)}(e,t),addresses:t.addresses.filter(({observed:e})=>null!=e&&e>Date.now()-r).map(({multiaddr:e,isCertified:t})=>({multiaddr:(0,L.HZ)(e),isCertified:t??!1})),metadata:t.metadata,peerRecordEnvelope:t.peerRecordEnvelope??void 0,tags:n}}!function(e){var t,r;let n,i,s;(t=e.Peer$metadataEntry||(e.Peer$metadataEntry={})).codec=()=>(null==i&&(i=(0,eN.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.key&&""!==e.key&&(t.uint32(10),t.string(e.key)),null!=e.value&&e.value.byteLength>0&&(t.uint32(18),t.bytes(e.value)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={key:"",value:(0,eM.c)(0)},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.key=e.string();break;case 2:n.value=e.bytes();break;default:e.skipType(7&t)}}return n})),i),t.encode=e=>(0,eN.mH)(e,t.codec()),t.decode=(e,r)=>(0,eN.Y8)(e,t.codec(),r),(r=e.Peer$tagsEntry||(e.Peer$tagsEntry={})).codec=()=>(null==s&&(s=(0,eN.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.key&&""!==e.key&&(t.uint32(10),t.string(e.key)),null!=e.value&&(t.uint32(18),o.codec().encode(e.value,t)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={key:""},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.key=e.string();break;case 2:n.value=o.codec().decode(e,e.uint32(),{limits:r.limits?.value});break;default:e.skipType(7&t)}}return n})),s),r.encode=e=>(0,eN.mH)(e,r.codec()),r.decode=(e,t)=>(0,eN.Y8)(e,r.codec(),t),e.codec=()=>(null==n&&(n=(0,eN.iU)((t,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null!=t.addresses)for(let e of t.addresses)r.uint32(10),a.codec().encode(e,r);if(null!=t.protocols)for(let e of t.protocols)r.uint32(18),r.string(e);if(null!=t.publicKey&&(r.uint32(34),r.bytes(t.publicKey)),null!=t.peerRecordEnvelope&&(r.uint32(42),r.bytes(t.peerRecordEnvelope)),null!=t.metadata&&0!==t.metadata.size)for(let[n,i]of t.metadata.entries())r.uint32(50),e.Peer$metadataEntry.codec().encode({key:n,value:i},r);if(null!=t.tags&&0!==t.tags.size)for(let[n,i]of t.tags.entries())r.uint32(58),e.Peer$tagsEntry.codec().encode({key:n,value:i},r);null!=t.updated&&(r.uint32(64),r.uint64Number(t.updated)),!1!==n.lengthDelimited&&r.ldelim()},(t,r,n={})=>{let i={addresses:[],protocols:[],metadata:new Map,tags:new Map},s=null==r?t.len:t.pos+r;for(;t.pos<s;){let r=t.uint32();switch(r>>>3){case 1:if(n.limits?.addresses!=null&&i.addresses.length===n.limits.addresses)throw new eN.zH('Decode error - map field "addresses" had too many elements');i.addresses.push(a.codec().decode(t,t.uint32(),{limits:n.limits?.addresses$}));break;case 2:if(n.limits?.protocols!=null&&i.protocols.length===n.limits.protocols)throw new eN.zH('Decode error - map field "protocols" had too many elements');i.protocols.push(t.string());break;case 4:i.publicKey=t.bytes();break;case 5:i.peerRecordEnvelope=t.bytes();break;case 6:{if(n.limits?.metadata!=null&&i.metadata.size===n.limits.metadata)throw new eN.w2('Decode error - map field "metadata" had too many elements');let r=e.Peer$metadataEntry.codec().decode(t,t.uint32());i.metadata.set(r.key,r.value);break}case 7:{if(n.limits?.tags!=null&&i.tags.size===n.limits.tags)throw new eN.w2('Decode error - map field "tags" had too many elements');let r=e.Peer$tagsEntry.codec().decode(t,t.uint32(),{limits:{value:n.limits?.tags$value}});i.tags.set(r.key,r.value);break}case 8:i.updated=t.uint64Number();break;default:t.skipType(7&r)}}return i})),n),e.encode=t=>(0,eN.mH)(t,e.codec()),e.decode=(t,r)=>(0,eN.Y8)(t,e.codec(),r)}(s||(s={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,eN.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.multiaddr&&e.multiaddr.byteLength>0&&(t.uint32(10),t.bytes(e.multiaddr)),null!=e.isCertified&&(t.uint32(16),t.bool(e.isCertified)),null!=e.observed&&(t.uint32(24),t.uint64Number(e.observed)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={multiaddr:(0,eM.c)(0)},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.multiaddr=e.bytes();break;case 2:n.isCertified=e.bool();break;case 3:n.observed=e.uint64Number();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,eN.mH)(t,e.codec()),e.decode=(t,r)=>(0,eN.Y8)(t,e.codec(),r)}(a||(a={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,eN.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.value&&0!==e.value&&(t.uint32(8),t.uint32(e.value)),null!=e.expiry&&(t.uint32(16),t.uint64(e.expiry)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={value:0},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.value=e.uint32();break;case 2:n.expiry=e.uint64();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,eN.mH)(t,e.codec()),e.decode=(t,r)=>(0,eN.Y8)(t,e.codec(),r)}(o||(o={}));var eD=r(6552);function eL(e,t){return null==e&&null==t||null!=e&&null!=t&&(0,eD.a)(e,t)}function eU(e,t,r){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}function eF(e,t,r){if(e.size!==t.size)return!1;for(let[n,i]of e.entries()){let e=t.get(n);if(null==e||!r(i,e))return!1}return!0}var ej=r(5943);let ez="/peers/";function eH(e){if(!(0,K.Q)(e)||null==e.type)throw new h.gG("Invalid PeerId");let t=e.toCID().toString();return new ej.U(`${ez}${t}`)}async function eG(e,t,r,n,i){let s=new Map;for(let n of r){if(null==n)continue;if(n.multiaddr instanceof Uint8Array&&(n.multiaddr=(0,L.HZ)(n.multiaddr)),!(0,L.R8)(n.multiaddr))throw new h.gG("Multiaddr was invalid");if(!await t(e,n.multiaddr,i))continue;let r=n.isCertified??!1,a=n.multiaddr.toString(),o=s.get(a);null!=o?n.isCertified=o.isCertified||r:s.set(a,{multiaddr:n.multiaddr,isCertified:r})}return[...s.values()].sort((e,t)=>e.multiaddr.toString().localeCompare(t.multiaddr.toString())).map(({isCertified:t,multiaddr:r})=>{let n=r.getPeerId();return e.equals(n)&&(r=r.decapsulate((0,L.HZ)(`/p2p/${e}`))),{isCertified:t,multiaddr:r.bytes}})}async function e$(e,t,r,n){let i;if(null==t)throw new h.gG("Invalid PeerData");if(null!=t.publicKey&&null!=e.publicKey&&!t.publicKey.equals(e.publicKey))throw new h.gG("publicKey bytes do not match peer id publicKey bytes");let s=n.existingPeer?.peer;if(null!=s&&!e.equals(s.id))throw new h.gG("peer id did not match existing peer id");let a=s?.addresses??[],o=new Set(s?.protocols??[]),l=s?.metadata??new Map,u=s?.tags??new Map,d=s?.peerRecordEnvelope;if("patch"===r&&((null!=t.multiaddrs||null!=t.addresses)&&(a=[],null!=t.multiaddrs&&a.push(...t.multiaddrs.map(e=>({isCertified:!1,multiaddr:e}))),null!=t.addresses&&a.push(...t.addresses)),null!=t.protocols&&(o=new Set(t.protocols)),null!=t.metadata&&(l=eV(t.metadata instanceof Map?[...t.metadata.entries()]:Object.entries(t.metadata),{validate:eq})),null!=t.tags&&(u=eV(t.tags instanceof Map?[...t.tags.entries()]:Object.entries(t.tags),{validate:eK,map:eW})),null!=t.peerRecordEnvelope&&(d=t.peerRecordEnvelope)),"merge"===r){if(null!=t.multiaddrs&&a.push(...t.multiaddrs.map(e=>({isCertified:!1,multiaddr:e}))),null!=t.addresses&&a.push(...t.addresses),null!=t.protocols&&(o=new Set([...o,...t.protocols])),null!=t.metadata){for(let[e,r]of t.metadata instanceof Map?[...t.metadata.entries()]:Object.entries(t.metadata))null==r?l.delete(e):l.set(e,r);l=eV([...l.entries()],{validate:eq})}if(null!=t.tags){let e=t.tags instanceof Map?[...t.tags.entries()]:Object.entries(t.tags),r=new Map(u);for(let[t,n]of e)null==n?r.delete(t):r.set(t,n);u=eV([...r.entries()],{validate:eK,map:eW})}null!=t.peerRecordEnvelope&&(d=t.peerRecordEnvelope)}s?.id.publicKey!=null?i=(0,c.Ve)(s.id.publicKey):null!=t.publicKey?i=(0,c.Ve)(t.publicKey):null!=e.publicKey&&(i=(0,c.Ve)(e.publicKey));let f={addresses:await eG(e,n.addressFilter??(async()=>!0),a,n.existingPeer?.peerPB.addresses,n),protocols:[...o.values()].sort((e,t)=>e.localeCompare(t)),metadata:l,tags:u,publicKey:i,peerRecordEnvelope:d};return f.addresses.forEach(e=>{e.observed=n.existingPeer?.peerPB.addresses?.find(e=>eD.a(e.multiaddr,e.multiaddr))?.observed??Date.now()}),"RSA"!==e.type&&delete f.publicKey,f}function eV(e,t){let r=new Map;for(let[r,n]of e)null!=n&&t.validate(r,n);for(let[n,i]of e.sort(([e],[t])=>e.localeCompare(t)))null!=i&&r.set(n,t.map?.(n,i)??i);return r}function eq(e,t){if("string"!=typeof e)throw new h.gG("Metadata key must be a string");if(!(t instanceof Uint8Array))throw new h.gG("Metadata value must be a Uint8Array")}function eK(e,t){if("string"!=typeof e)throw new h.gG("Tag name must be a string");if(null!=t.value){if(parseInt(`${t.value}`,10)!==t.value)throw new h.gG("Tag value must be an integer");if(t.value<0||t.value>100)throw new h.gG("Tag value must be between 0-100")}if(null!=t.ttl){if(parseInt(`${t.ttl}`,10)!==t.ttl)throw new h.gG("Tag ttl must be an integer");if(t.ttl<0)throw new h.gG("Tag ttl must be between greater than 0")}}function eW(e,t){let r;null!=t.expiry&&(r=t.expiry),null!=t.ttl&&(r=BigInt(Date.now()+Number(t.ttl)));let n={value:t.value??0};return null!=r&&(n.expiry=r),n}function eQ(e){let t=e.toString().split("/")[2],r=eR.TO.parse(t,eO.base32);return(0,u.Az)(r)}function eZ(e,t,r){return eB(eQ(e),s.decode(t),r)}class eJ{peerId;datastore;locks;addressFilter;log;maxAddressAge;maxPeerAge;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:peer-store"),this.peerId=e.peerId,this.datastore=e.datastore,this.addressFilter=t.addressFilter,this.locks=(0,J.Z)({name:"libp2p_peer_store_locks",metrics:e.metrics}),this.maxAddressAge=t.maxAddressAge??36e5,this.maxPeerAge=t.maxPeerAge??216e5}getLock(e){let t=this.locks.get(e);return null==t&&(t={refs:0,lock:function(e){let t=Object.assign({},eC,e);return e_(t.name,t)}({name:e.toString(),singleProcess:!0})},this.locks.set(e,t)),t.refs++,t}maybeRemoveLock(e,t){t.refs--,0===t.refs&&(t.lock.finalize(),this.locks.delete(e))}async getReadLock(e,t){let r=this.getLock(e);try{let n=await r.lock.readLock(t);return()=>{n(),this.maybeRemoveLock(e,r)}}catch(t){throw this.maybeRemoveLock(e,r),t}}async getWriteLock(e,t){let r=this.getLock(e);try{let n=await r.lock.writeLock(t);return()=>{n(),this.maybeRemoveLock(e,r)}}catch(t){throw this.maybeRemoveLock(e,r),t}}async has(e,t){try{return await this.load(e,t),!0}catch(e){if("NotFoundError"!==e.name)throw e}return!1}async delete(e,t){!this.peerId.equals(e)&&await this.datastore.delete(eH(e),t)}async load(e,t){let r=eH(e),n=await this.datastore.get(r,t),i=s.decode(n);if(this.#t9(e,i))throw await this.datastore.delete(r,t),new h.m_;return eB(e,i,this.peerId.equals(e)?1/0:this.maxAddressAge)}async save(e,t,r){let n=await this.#re(e,r),i=await e$(e,t,"patch",{...r,addressFilter:this.addressFilter});return this.#rt(e,i,n)}async patch(e,t,r){let n=await this.#re(e,r),i=await e$(e,t,"patch",{...r,addressFilter:this.addressFilter,existingPeer:n});return this.#rt(e,i,n)}async merge(e,t,r){let n=await this.#re(e,r),i=await e$(e,t,"merge",{addressFilter:this.addressFilter,existingPeer:n});return this.#rt(e,i,n)}async *all(e){var t,r;for await(let{key:n,value:i}of this.datastore.query((t=e??{},r=this.maxAddressAge,{prefix:ez,filters:(t.filters??[]).map(e=>({key:t,value:n})=>e(eZ(t,n,r))),orders:(t.orders??[]).map(e=>(t,n)=>e(eZ(t.key,t.value,r),eZ(n.key,n.value,r)))}),e)){let t=eQ(n);if(t.equals(this.peerId))continue;let r=s.decode(i);if(this.#t9(t,r)){await this.datastore.delete(n,e);continue}yield eB(t,r,this.peerId.equals(t)?1/0:this.maxAddressAge)}}async #re(e,t){try{let r=eH(e),n=await this.datastore.get(r,t),i=s.decode(n);if(this.#t9(e,i))throw await this.datastore.delete(r,t),new h.m_;return{peerPB:i,peer:eB(e,i,this.maxAddressAge)}}catch(e){"NotFoundError"!==e.name&&this.log.error("invalid peer data found in peer store - %e",e)}}async #rt(e,t,r,n){var i,a,o,l,c,u,d;t.updated=Date.now();let h=s.encode(t);return await this.datastore.put(eH(e),h,n),{peer:eB(e,t,this.maxAddressAge),previous:r?.peer,updated:null==r||(i=r.peerPB,a=t.addresses,!(eU(a,i.addresses,(e,t)=>!!(e.isCertified===t.isCertified&&(0,eD.a)(e.multiaddr,t.multiaddr)))&&(o=t.protocols,eU(o,i.protocols,(e,t)=>e===t))&&(l=t.publicKey,eL(l,i.publicKey))&&(c=t.peerRecordEnvelope,eL(c,i.peerRecordEnvelope))&&(u=t.metadata,eF(u,i.metadata,(e,t)=>(0,eD.a)(e,t)))&&(d=t.tags,eF(d,i.tags,(e,t)=>e.value===t.value&&e.expiry===t.expiry))))}}#t9(e,t){if(null==t.updated)return!0;if(this.peerId.equals(e))return!1;let r=t.updated<Date.now()-this.maxPeerAge,n=Date.now()-this.maxAddressAge,i=t.addresses.filter(e=>null!=e.observed&&e.observed>n);return r&&0===i.length}}class eY{store;events;peerId;log;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:peer-store"),this.events=e.events,this.peerId=e.peerId,this.store=new eJ(e,t)}[Symbol.toStringTag]="@libp2p/peer-store";async forEach(e,t){for await(let r of this.store.all(t))e(r)}async all(e){return(0,Z.A)(this.store.all(e))}async delete(e,t){let r=await this.store.getReadLock(e,t);try{await this.store.delete(e,t)}finally{r()}}async has(e,t){let r=await this.store.getReadLock(e,t);try{return await this.store.has(e,t)}finally{this.log.trace("has release read lock"),r?.()}}async get(e,t){let r=await this.store.getReadLock(e,t);try{return await this.store.load(e,t)}finally{r?.()}}async getInfo(e,t){let r=await this.get(e,t);return{id:r.id,multiaddrs:r.addresses.map(({multiaddr:e})=>e)}}async save(e,t,r){let n=await this.store.getWriteLock(e,r);try{let n=await this.store.save(e,t,r);return this.#rr(e,n),n.peer}finally{n?.()}}async patch(e,t,r){let n=await this.store.getWriteLock(e,r);try{let n=await this.store.patch(e,t,r);return this.#rr(e,n),n.peer}finally{n?.()}}async merge(e,t,r){let n=await this.store.getWriteLock(e,r);try{let n=await this.store.merge(e,t,r);return this.#rr(e,n),n.peer}finally{n?.()}}async consumePeerRecord(e,t,r){let n;let i=(0,K.Q)(t)?t:(0,K.Q)(t?.expectedPeer)?t.expectedPeer:void 0,s=(0,K.Q)(t)?r:void 0===t?r:t,a=await W.e.openAndCertify(e,Q.c.DOMAIN,s),o=(0,u.Az)(a.publicKey.toCID());if(i?.equals(o)===!1)return this.log("envelope peer id was not the expected peer id - expected: %p received: %p",i,o),!1;let l=Q.c.createFromProtobuf(a.payload);try{n=await this.get(o,s)}catch(e){if("NotFoundError"!==e.name)throw e}if(n?.peerRecordEnvelope!=null){let e=W.e.createFromProtobuf(n.peerRecordEnvelope),t=Q.c.createFromProtobuf(e.payload);if(t.seqNumber>=l.seqNumber)return this.log("sequence number was lower or equal to existing sequence number - stored: %d received: %d",t.seqNumber,l.seqNumber),!1}return await this.patch(l.peerId,{peerRecordEnvelope:e,addresses:l.multiaddrs.map(e=>({isCertified:!0,multiaddr:e}))},s),!0}#rr(e,t){t.updated&&(this.peerId.equals(e)?this.events.safeDispatchEvent("self:peer:update",{detail:t}):this.events.safeDispatchEvent("peer:update",{detail:t}))}}class eX extends Error{static name="OpenFailedError";static code="ERR_OPEN_FAILED";name=eX.name;code=eX.code;constructor(e="Open failed"){super(e)}}class e0 extends Error{static name="CloseFailedError";static code="ERR_CLOSE_FAILED";name=e0.name;code=e0.code;constructor(e="Close failed"){super(e)}}class e1 extends Error{static name="PutFailedError";static code="ERR_PUT_FAILED";name=e1.name;code=e1.code;constructor(e="Put failed"){super(e)}}class e2 extends Error{static name="GetFailedError";static code="ERR_GET_FAILED";name=e2.name;code=e2.code;constructor(e="Get failed"){super(e)}}class e3 extends Error{static name="DeleteFailedError";static code="ERR_DELETE_FAILED";name=e3.name;code=e3.code;constructor(e="Delete failed"){super(e)}}class e4 extends Error{static name="HasFailedError";static code="ERR_HAS_FAILED";name=e4.name;code=e4.code;constructor(e="Has failed"){super(e)}}class e6 extends Error{static name="NotFoundError";static code="ERR_NOT_FOUND";name=e6.name;code=e6.code;constructor(e="Not Found"){super(e)}}class e5 extends Error{static name="AbortError";static code="ERR_ABORTED";name=e5.name;code=e5.code;constructor(e="Aborted"){super(e)}}var e8=r(6411),e7=r(3804);let e9=function(e,t){let r=0;if(null!=e[Symbol.asyncIterator])return async function*(){for await(let n of e)await t(n,r++)&&(yield n)}();let n=(0,e7.A)(e),{value:i,done:s}=n.next();if(!0===s)return function*(){}();let a=t(i,r++);return"function"==typeof a.then?async function*(){for(let e of(await a&&(yield i),n))await t(e,r++)&&(yield e)}():function*(){for(let e of(!0===a&&(yield i),n))t(e,r++)&&(yield e)}()},te=function(e,t){return null!=e[Symbol.asyncIterator]?async function*(){let r=await (0,Z.A)(e);yield*r.sort(t)}():function*(){let r=(0,Z.A)(e);yield*r.sort(t)}()};var tt=r(7396);class tr{put(e,t,r){return Promise.reject(Error(".put is not implemented"))}get(e,t){return Promise.reject(Error(".get is not implemented"))}has(e,t){return Promise.reject(Error(".has is not implemented"))}delete(e,t){return Promise.reject(Error(".delete is not implemented"))}async *putMany(e,t={}){for await(let{key:r,value:n}of e)await this.put(r,n,t),yield r}async *getMany(e,t={}){for await(let r of e)yield{key:r,value:await this.get(r,t)}}async *deleteMany(e,t={}){for await(let r of e)await this.delete(r,t),yield r}batch(){let e=[],t=[];return{put(t,r){e.push({key:t,value:r})},delete(e){t.push(e)},commit:async r=>{await (0,e8.A)(this.putMany(e,r)),e=[],await (0,e8.A)(this.deleteMany(t,r)),t=[]}}}async *_all(e,t){throw Error("._all is not implemented")}async *_allKeys(e,t){throw Error("._allKeys is not implemented")}query(e,t){let r=this._all(e,t);if(null!=e.prefix){let t=e.prefix;r=e9(r,e=>e.key.toString().startsWith(t))}if(Array.isArray(e.filters)&&(r=e.filters.reduce((e,t)=>e9(e,t),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((e,t)=>te(e,t),r)),null!=e.offset){let t=0,n=e.offset;r=e9(r,()=>t++>=n)}return null!=e.limit&&(r=(0,tt.A)(r,e.limit)),r}queryKeys(e,t){let r=this._allKeys(e,t);if(null!=e.prefix){let t=e.prefix;r=e9(r,e=>e.toString().startsWith(t))}if(Array.isArray(e.filters)&&(r=e.filters.reduce((e,t)=>e9(e,t),r)),Array.isArray(e.orders)&&(r=e.orders.reduce((e,t)=>te(e,t),r)),null!=e.offset){let t=e.offset,n=0;r=e9(r,()=>n++>=t)}return null!=e.limit&&(r=(0,tt.A)(r,e.limit)),r}}class tn extends tr{data;constructor(){super(),this.data=new Map}put(e,t,r){return r?.signal?.throwIfAborted(),this.data.set(e.toString(),t),e}get(e,t){t?.signal?.throwIfAborted();let r=this.data.get(e.toString());if(null==r)throw new e6;return r}has(e,t){return t?.signal?.throwIfAborted(),this.data.has(e.toString())}delete(e,t){t?.signal?.throwIfAborted(),this.data.delete(e.toString())}*_all(e,t){for(let[e,r]of(t?.signal?.throwIfAborted(),this.data.entries()))yield{key:new ej.U(e),value:r},t?.signal?.throwIfAborted()}*_allKeys(e,t){for(let e of(t?.signal?.throwIfAborted(),this.data.keys()))yield new ej.U(e),t?.signal?.throwIfAborted()}}var ti=r(7797),ts=r(9865),ta=r(3422),to=r(497),tl=r(3366),tc=r(3985),tu=r(2706);class td extends Map{metric;constructor(e){super();let{name:t,metrics:r}=e;this.metric=r.registerMetric(t),this.updateComponentMetric()}set(e,t){return super.set(e,t),this.updateComponentMetric(),this}delete(e){let t=super.delete(e);return this.updateComponentMetric(),t}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function th(e){let t;let{name:r,metrics:n}=e;return null!=n?new td({name:r,metrics:n}):new Map}class tf{log;mappings;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:address-manager:dns-mappings"),this.mappings=th({name:"libp2p_address_manager_dns_mappings",metrics:e.metrics})}has(e){let t=this.findHost(e);for(let e of this.mappings.values())if(e.domain===t)return!0;return!1}add(e,t){t.forEach(t=>{this.log("add DNS mapping %s to %s",t,e);let r=!0===(0,tc.b)(t);this.mappings.set(t,{domain:e,verified:r,expires:r?864e13-Date.now():0,lastVerified:r?864e13-Date.now():void 0})})}remove(e){let t=this.findHost(e),r=!1;for(let[e,n]of this.mappings.entries())n.domain===t&&(this.log("removing %s to %s DNS mapping %e",e,n.domain,Error("where")),this.mappings.delete(e),r=r||n.verified);return r}getAll(e){let t=[];for(let r=0;r<e.length;r++){let n=e[r].multiaddr.stringTuples(),i=n[0][1];if(null!=i)for(let[s,a]of this.mappings.entries())i===s&&this.maybeAddSNITuple(n,a.domain)&&(e.splice(r,1),r--,t.push({multiaddr:(0,L.HZ)(`/${n.map(e=>[(0,L.WH)(e[0]).name,e[1]].join("/")).join("/")}`),verified:a.verified,type:"dns-mapping",expires:a.expires,lastVerified:a.lastVerified}))}return t}maybeAddSNITuple(e,t){for(let r=0;r<e.length;r++)if(448===e[r][0]&&e[r+1]?.[0]!==449)return e.splice(r+1,0,[449,t]),!0;return!1}confirm(e,t){let r=this.findHost(e),n=!1;for(let[e,i]of this.mappings.entries())i.domain===r&&(this.log("marking %s to %s DNS mapping as verified",e,i.domain),n=i.verified,i.verified=!0,i.expires=Date.now()+t,i.lastVerified=Date.now());return n}unconfirm(e,t){let r=this.findHost(e),n=!1;for(let[e,i]of this.mappings.entries())i.domain===r&&(this.log("removing verification of %s to %s DNS mapping",e,i.domain),n=n||i.verified,i.verified=!1,i.expires=Date.now()+t);return n}findHost(e){for(let t of e.stringTuples())if(449===t[0]||53===t[0]||54===t[0]||55===t[0]||56===t[0])return t[1]}}class tp{log;mappings;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:address-manager:ip-mappings"),this.mappings=th({name:"libp2p_address_manager_ip_mappings",metrics:e.metrics})}has(e){let t=e.stringTuples();for(let e of this.mappings.values())for(let r of e)if(r.externalIp===t[0][1])return!0;return!1}add(e,t,r,n=t,i="tcp"){let s=`${e}-${t}-${i}`,a=this.mappings.get(s)??[],o={internalIp:e,internalPort:t,externalIp:r,externalPort:n,externalFamily:(0,ta.wM)(r)?4:6,protocol:i,verified:!1,expires:0};a.push(o),this.mappings.set(s,a)}remove(e){let t=e.stringTuples(),r=t[0][1]??"",n=6===t[1][0]?"tcp":"udp",i=parseInt(t[1][1]??"0"),s=!1;for(let[e,t]of this.mappings.entries()){for(let e=0;e<t.length;e++){let a=t[e];a.externalIp===r&&a.externalPort===i&&a.protocol===n&&(this.log("removing %s:%s to %s:%s %s IP mapping",a.externalIp,a.externalPort,r,i,n),s=s||a.verified,t.splice(e,1),e--)}0===t.length&&this.mappings.delete(e)}return s}getAll(e){let t=[];for(let{multiaddr:r}of e){let e;let n=r.stringTuples();if((4===n[0][0]||41===n[0][0])&&6===n[1][0]?e=`${n[0][1]}-${n[1][1]}-tcp`:(4===n[0][0]||41===n[0][0])&&273===n[1][0]&&(e=`${n[0][1]}-${n[1][1]}-udp`),null==e)continue;let i=this.mappings.get(e);if(null!=i)for(let e of i)n[0][0]=4===e.externalFamily?4:41,n[0][1]=e.externalIp,n[1][1]=`${e.externalPort}`,t.push({multiaddr:(0,L.HZ)(`/${n.map(e=>[(0,L.WH)(e[0]).name,e[1]].join("/")).join("/")}`),verified:e.verified,type:"ip-mapping",expires:e.expires,lastVerified:e.lastVerified})}return t}confirm(e,t){let r=e.stringTuples()[0][1],n=!1;for(let e of this.mappings.values())for(let i of e)i.externalIp===r&&(this.log("marking %s to %s IP mapping as verified",i.internalIp,i.externalIp),n=i.verified,i.verified=!0,i.expires=Date.now()+t,i.lastVerified=Date.now());return n}unconfirm(e,t){let r=e.stringTuples(),n=r[0][1]??"",i=6===r[1][0]?"tcp":"udp",s=parseInt(r[1][1]??"0"),a=!1;for(let e of this.mappings.values())for(let r=0;r<e.length;r++){let o=e[r];o.externalIp===n&&o.externalPort===s&&o.protocol===i&&(this.log("removing verification of %s:%s to %s:%s %s IP mapping",o.externalIp,o.externalPort,n,s,i),a=a||o.verified,o.verified=!1,o.expires=Date.now()+t)}return a}}var tg=r(5983);let tm={maxObservedAddresses:10};class tb{log;addresses;maxObservedAddresses;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:address-manager:observed-addresses"),this.addresses=th({name:"libp2p_address_manager_observed_addresses",metrics:e.metrics}),this.maxObservedAddresses=t.maxObservedAddresses??tm.maxObservedAddresses}has(e){return this.addresses.has(e.toString())}removePrefixed(e){for(let t of this.addresses.keys())t.toString().startsWith(e)&&this.addresses.delete(t)}add(e){!(this.addresses.size===this.maxObservedAddresses||(0,tg.G)(e)||function(e){try{for(let{code:t,value:r}of e.getComponents())if(t!==L.qc&&null!=r){if(t===L.GY)return r.startsWith("169.254.");if(t===L.Ik)return r.toLowerCase().startsWith("fe80")}}catch{}return!1}(e))&&(this.log("adding observed address %a",e),this.addresses.set(e.toString(),{verified:!1,expires:0}))}getAll(){return Array.from(this.addresses).map(([e,t])=>({multiaddr:(0,L.HZ)(e),verified:t.verified,type:"observed",expires:t.expires,lastVerified:t.lastVerified}))}remove(e){let t=this.addresses.get(e.toString())?.verified??!1;return this.log("removing observed address %a",e),this.addresses.delete(e.toString()),t}confirm(e,t){let r=e.toString(),n=this.addresses.get(r)??{verified:!1,expires:Date.now()+t,lastVerified:Date.now()},i=n.verified;return n.verified=!0,n.expires=Date.now()+t,n.lastVerified=Date.now(),this.log("marking observed address %a as verified",r),this.addresses.set(r,n),i}}let ty=[L.GY,L.Ik,L.eI,L.Cm,L.A6,L.Jj];function tx(e){try{for(let{code:t}of e.getComponents())if(t!==L.qc)return ty.includes(t)}catch{}return!1}let tw={maxObservedAddresses:10};class tv{log;addresses;maxObservedAddresses;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:address-manager:observed-addresses"),this.addresses=th({name:"libp2p_address_manager_transport_addresses",metrics:e.metrics}),this.maxObservedAddresses=t.maxObservedAddresses??tw.maxObservedAddresses}get(e,t){if((0,tg.G)(e))return{multiaddr:e,verified:!0,type:"transport",expires:Date.now()+t,lastVerified:Date.now()};let r=this.toKey(e),n=this.addresses.get(r);return null==n&&(n={verified:!tx(e),expires:0},this.addresses.set(r,n)),{multiaddr:e,verified:n.verified,type:"transport",expires:n.expires,lastVerified:n.lastVerified}}has(e){let t=this.toKey(e);return this.addresses.has(t)}remove(e){let t=this.toKey(e),r=this.addresses.get(t)?.verified??!1;return this.log("removing observed address %a",e),this.addresses.delete(t),r}confirm(e,t){let r=this.toKey(e),n=this.addresses.get(r)??{verified:!1,expires:0,lastVerified:0},i=n.verified;return n.verified=!0,n.expires=Date.now()+t,n.lastVerified=Date.now(),this.addresses.set(r,n),i}unconfirm(e,t){let r=this.toKey(e),n=this.addresses.get(r)??{verified:!1,expires:0},i=n.verified;return n.verified=!1,n.expires=Date.now()+t,this.addresses.set(r,n),i}toKey(e){if(tx(e)){let t=e.toOptions();return`${t.host}-${t.port}-${t.transport}`}return e.toString()}}let tA={addressVerificationTTL:6e5,addressVerificationRetry:3e5},tE=e=>e;function tk(e,t){let r=e.getPeerId();return null!=r&&(0,u.XL)(r).equals(t)&&(e=e.decapsulate((0,L.HZ)(`/p2p/${t.toString()}`))),e}class tP{log;components;listen;announce;appendAnnounce;announceFilter;observed;dnsMappings;ipMappings;transportAddresses;observedAddressFilter;addressVerificationTTL;addressVerificationRetry;constructor(e,t={}){let{listen:r=[],announce:n=[],appendAnnounce:i=[]}=t;this.components=e,this.log=e.logger.forComponent("libp2p:address-manager"),this.listen=r.map(e=>e.toString()),this.announce=new Set(n.map(e=>e.toString())),this.appendAnnounce=new Set(i.map(e=>e.toString())),this.observed=new tb(e,t),this.dnsMappings=new tf(e,t),this.ipMappings=new tp(e,t),this.transportAddresses=new tv(e,t),this.announceFilter=t.announceFilter??tE,this.observedAddressFilter=(0,tl.O)(1024),this.addressVerificationTTL=t.addressVerificationTTL??tA.addressVerificationTTL,this.addressVerificationRetry=t.addressVerificationRetry??tA.addressVerificationRetry,this._updatePeerStoreAddresses=(0,to.s)(this._updatePeerStoreAddresses.bind(this),1e3),e.events.addEventListener("transport:listening",()=>{this._updatePeerStoreAddresses()}),e.events.addEventListener("transport:close",()=>{this._updatePeerStoreAddresses()})}[Symbol.toStringTag]="@libp2p/address-manager";_updatePeerStoreAddresses(){let e=this.getAddresses().map(e=>e.getPeerId()===this.components.peerId.toString()?e.decapsulate(`/p2p/${this.components.peerId.toString()}`):e);this.components.peerStore.patch(this.components.peerId,{multiaddrs:e}).catch(e=>{this.log.error("error updating addresses",e)})}getListenAddrs(){return Array.from(this.listen).map(e=>(0,L.HZ)(e))}getAnnounceAddrs(){return Array.from(this.announce).map(e=>(0,L.HZ)(e))}getAppendAnnounceAddrs(){return Array.from(this.appendAnnounce).map(e=>(0,L.HZ)(e))}getObservedAddrs(){return this.observed.getAll().map(e=>e.multiaddr)}addObservedAddr(e){let t=e.stringTuples(),r=`${t[0][1]}:${t[1][1]}`;if(!this.observedAddressFilter.has(r))this.observedAddressFilter.add(r),e=tk(e,this.components.peerId),!(this.ipMappings.has(e)||this.dnsMappings.has(e))&&this.observed.add(e)}confirmObservedAddr(e,t){e=tk(e,this.components.peerId);let r=!0;(t?.type==="transport"||this.transportAddresses.has(e))&&!this.transportAddresses.confirm(e,t?.ttl??this.addressVerificationTTL)&&r&&(r=!1),(t?.type==="dns-mapping"||this.dnsMappings.has(e))&&!this.dnsMappings.confirm(e,t?.ttl??this.addressVerificationTTL)&&r&&(r=!1),(t?.type==="ip-mapping"||this.ipMappings.has(e))&&!this.ipMappings.confirm(e,t?.ttl??this.addressVerificationTTL)&&r&&(r=!1),(t?.type==="observed"||this.observed.has(e))&&(this.maybeUpgradeToIPMapping(e)?(this.ipMappings.confirm(e,t?.ttl??this.addressVerificationTTL),r=!1):!this.observed.confirm(e,t?.ttl??this.addressVerificationTTL)&&r&&(r=!1)),r||this._updatePeerStoreAddresses()}removeObservedAddr(e,t){e=tk(e,this.components.peerId);let r=!1;this.observed.has(e)&&!this.observed.remove(e)&&r&&(r=!1),this.transportAddresses.has(e)&&!this.transportAddresses.unconfirm(e,t?.ttl??this.addressVerificationRetry)&&r&&(r=!1),this.dnsMappings.has(e)&&!this.dnsMappings.unconfirm(e,t?.ttl??this.addressVerificationRetry)&&r&&(r=!1),this.ipMappings.has(e)&&!this.ipMappings.unconfirm(e,t?.ttl??this.addressVerificationRetry)&&r&&(r=!1),r&&this._updatePeerStoreAddresses()}getAddresses(){let e=new Set,t=this.getAddressesWithMetadata().filter(t=>{if(!t.verified)return!1;let r=t.multiaddr.toString();return!e.has(r)&&(e.add(r),!0)}).map(e=>e.multiaddr);return this.announceFilter(t.map(e=>{let t=(0,L.HZ)(e),r=t.getComponents().pop();return r?.value===this.components.peerId.toString()?t:t.encapsulate(`/p2p/${this.components.peerId.toString()}`)}))}getAddressesWithMetadata(){let e=this.getAnnounceAddrs();if(e.length>0)return this.components.transportManager.getListeners().forEach(t=>{t.updateAnnounceAddrs(e)}),e.map(e=>({multiaddr:e,verified:!0,type:"announce",expires:Date.now()+this.addressVerificationTTL,lastVerified:Date.now()}));let t=[];t=t.concat(this.components.transportManager.getAddrs().map(e=>this.transportAddresses.get(e,this.addressVerificationTTL)));let r=this.getAppendAnnounceAddrs();return r.length>0&&(this.components.transportManager.getListeners().forEach(e=>{e.updateAnnounceAddrs(r)}),t=t.concat(r.map(e=>({multiaddr:e,verified:!0,type:"announce",expires:Date.now()+this.addressVerificationTTL,lastVerified:Date.now()})))),t=(t=(t=t.concat(this.observed.getAll())).concat(this.ipMappings.getAll(t))).concat(this.dnsMappings.getAll(t))}addDNSMapping(e,t){this.dnsMappings.add(e,t)}removeDNSMapping(e){this.dnsMappings.remove((0,L.HZ)(`/dns/${e}`))&&this._updatePeerStoreAddresses()}addPublicAddressMapping(e,t,r,n=t,i="tcp"){this.ipMappings.add(e,t,r,n,i),this.observed.removePrefixed(`/ip${(0,ta.wM)(r)?4:6}/${r}/${i}/${n}`)}removePublicAddressMapping(e,t,r,n=t,i="tcp"){this.ipMappings.remove((0,L.HZ)(`/ip${(0,ta.wM)(r)?4:6}/${r}/${i}/${n}`))&&this._updatePeerStoreAddresses()}maybeUpgradeToIPMapping(e){if(this.ipMappings.has(e))return!1;let t=e.toOptions();if(6===t.family||"127.0.0.1"===t.host||!0===(0,tc.b)(t.host))return!1;let r=this.components.transportManager.getListeners();for(let n of[e=>tu.By.exactMatch(e)||tu.YJ.exactMatch(e),e=>tu.qi.exactMatch(e),e=>tu.WV.exactMatch(e)]){if(!n(e))continue;let i=r.filter(e=>e.getAddrs().filter(e=>4===e.toOptions().family&&n(e)).length>0);if(1!==i.length)continue;let s=i[0].getAddrs().filter(e=>"127.0.0.1"!==e.toOptions().host).pop();if(null==s)continue;let a=s.toOptions();return this.observed.remove(e),this.ipMappings.add(a.host,a.port,t.host,t.port,t.transport),!0}return!1}}var tS=r(1436),tI=r(3204);!function(e){e.NOT_STARTED_YET="The libp2p node is not started yet",e.NOT_FOUND="Not found"}(l||(l={}));class tT extends Error{constructor(e="Missing service"){super(e),this.name="MissingServiceError"}}class t_ extends Error{constructor(e="Unmet service dependencies"){super(e),this.name="UnmetServiceDependenciesError"}}class tC extends Error{constructor(e="No content routers available"){super(e),this.name="NoContentRoutersError"}}class tO extends Error{constructor(e="No peer routers available"){super(e),this.name="NoPeerRoutersError"}}class tR extends Error{constructor(e="Should not try to find self"){super(e),this.name="QueriedForSelfError"}}class tN extends Error{constructor(e="Unhandled protocol error"){super(e),this.name="UnhandledProtocolError"}}class tM extends Error{constructor(e="Duplicate protocol handler error"){super(e),this.name="DuplicateProtocolHandlerError"}}class tB extends Error{constructor(e="Dial denied error"){super(e),this.name="DialDeniedError"}}class tD extends Error{constructor(e="No transport was configured to listen on this address"){super(e),this.name="UnsupportedListenAddressError"}}class tL extends Error{constructor(e="Configured listen addresses could not be listened on"){super(e),this.name="UnsupportedListenAddressesError"}}class tU extends Error{constructor(e="No valid addresses"){super(e),this.name="NoValidAddressesError"}}class tF extends Error{constructor(e="Connection intercepted"){super(e),this.name="ConnectionInterceptedError"}}class tj extends Error{constructor(e="Connection denied"){super(e),this.name="ConnectionDeniedError"}}class tz extends Error{constructor(e="Stream is not multiplexed"){super(e),this.name="MuxerUnavailableError"}}class tH extends Error{constructor(e="Encryption failed"){super(e),this.name="EncryptionFailedError"}}class tG extends Error{constructor(e="Transport unavailable"){super(e),this.name="TransportUnavailableError"}}class t$ extends Error{constructor(e="Max recursive depth reached"){super(e),this.name="RecursionLimitError"}}class tV{components={};_started=!1;constructor(e={}){for(let[t,r]of(this.components={},Object.entries(e)))this.components[t]=r;null==this.components.logger&&(this.components.logger=(0,V.Um)())}isStarted(){return this._started}async _invokeStartableMethod(e){await Promise.all(Object.values(this.components).filter(e=>(0,tS.nw)(e)).map(async t=>{await t[e]?.()}))}async beforeStart(){await this._invokeStartableMethod("beforeStart")}async start(){await this._invokeStartableMethod("start"),this._started=!0}async afterStart(){await this._invokeStartableMethod("afterStart")}async beforeStop(){await this._invokeStartableMethod("beforeStop")}async stop(){await this._invokeStartableMethod("stop"),this._started=!1}async afterStop(){await this._invokeStartableMethod("afterStop")}}let tq=["metrics","connectionProtector","dns"],tK=["components","isStarted","beforeStart","start","afterStart","beforeStop","stop","afterStop","then","_invokeStartableMethod"];var tW=r(603);let tQ=()=>{let e=Error("Delay aborted");return e.name="AbortError",e},tZ=new WeakMap,tJ=function({clearTimeout:e,setTimeout:t}={}){return(r,{value:n,signal:i}={})=>{let s,a,o;if(i?.aborted)return Promise.reject(tQ());let l=e??clearTimeout,c=()=>{l(s),o(tQ())},u=()=>{i&&i.removeEventListener("abort",c)},d=new Promise((e,i)=>{a=()=>{u(),e(n)},o=i,s=(t??setTimeout)(a,r)});return i&&i.addEventListener("abort",c,{once:!0}),tZ.set(d,()=>{l(s),s=null,a()}),d}}();var tY=r(9213);class tX{memoryStorage;points;duration;blockDuration;execEvenly;execEvenlyMinDelayMs;keyPrefix;constructor(e={}){this.points=e.points??4,this.duration=e.duration??1,this.blockDuration=e.blockDuration??0,this.execEvenly=e.execEvenly??!1,this.execEvenlyMinDelayMs=e.execEvenlyMinDelayMs??1e3*this.duration/this.points,this.keyPrefix=e.keyPrefix??"rlflx",this.memoryStorage=new t0}async consume(e,t=1,r={}){let n=this.getKey(e),i=this._getKeySecDuration(r),s=this.memoryStorage.incrby(n,t,i);if(s.remainingPoints=Math.max(this.points-s.consumedPoints,0),s.consumedPoints>this.points)throw this.blockDuration>0&&s.consumedPoints<=this.points+t&&(s=this.memoryStorage.set(n,s.consumedPoints,this.blockDuration)),new tY.O("Rate limit exceeded",s);if(this.execEvenly&&s.msBeforeNext>0&&!s.isFirstInDuration){let e=Math.ceil(s.msBeforeNext/(s.remainingPoints+2));e<this.execEvenlyMinDelayMs&&(e=s.consumedPoints*this.execEvenlyMinDelayMs),await tJ(e)}return s}penalty(e,t=1,r={}){let n=this.getKey(e),i=this._getKeySecDuration(r),s=this.memoryStorage.incrby(n,t,i);return s.remainingPoints=Math.max(this.points-s.consumedPoints,0),s}reward(e,t=1,r={}){let n=this.getKey(e),i=this._getKeySecDuration(r),s=this.memoryStorage.incrby(n,-t,i);return s.remainingPoints=Math.max(this.points-s.consumedPoints,0),s}block(e,t){let r=1e3*t,n=this.points+1;return this.memoryStorage.set(this.getKey(e),n,t),{remainingPoints:0,msBeforeNext:0===r?-1:r,consumedPoints:n,isFirstInDuration:!1}}set(e,t,r=0){let n=(r>=0?r:this.duration)*1e3;return this.memoryStorage.set(this.getKey(e),t,r),{remainingPoints:0,msBeforeNext:0===n?-1:n,consumedPoints:t,isFirstInDuration:!1}}get(e){let t=this.memoryStorage.get(this.getKey(e));return null!=t&&(t.remainingPoints=Math.max(this.points-t.consumedPoints,0)),t}delete(e){this.memoryStorage.delete(this.getKey(e))}_getKeySecDuration(e){return e?.customDuration!=null&&e.customDuration>=0?e.customDuration:this.duration}getKey(e){return this.keyPrefix.length>0?`${this.keyPrefix}:${e}`:e}parseKey(e){return e.substring(this.keyPrefix.length)}}class t0{storage;constructor(){this.storage=new Map}incrby(e,t,r){let n=this.storage.get(e);if(null!=n){let e=null!=n.expiresAt?n.expiresAt.getTime()-new Date().getTime():-1;if(null==n.expiresAt||e>0)return n.value+=t,{remainingPoints:0,msBeforeNext:e,consumedPoints:n.value,isFirstInDuration:!1}}return this.set(e,t,r)}set(e,t,r){let n=1e3*r,i=this.storage.get(e);null!=i&&clearTimeout(i.timeoutId);let s={value:t,expiresAt:n>0?new Date(Date.now()+n):void 0};return this.storage.set(e,s),n>0&&(s.timeoutId=setTimeout(()=>{this.storage.delete(e)},n),null!=s.timeoutId.unref&&s.timeoutId.unref()),{remainingPoints:0,msBeforeNext:0===n?-1:n,consumedPoints:s.value,isFirstInDuration:!0}}get(e){let t=this.storage.get(e);if(null!=t)return{remainingPoints:0,msBeforeNext:null!=t.expiresAt?t.expiresAt.getTime()-new Date().getTime():-1,consumedPoints:t.value,isFirstInDuration:!1}}delete(e){let t=this.storage.get(e);return null!=t&&(null!=t.timeoutId&&clearTimeout(t.timeoutId),this.storage.delete(e),!0)}}function t1(e){let t;if((0,K.Q)(e))return{peerId:e,multiaddrs:[]};let r=Array.isArray(e)?e:[e];if(r.length>0){let e=r[0].getPeerId();t=null==e?void 0:(0,u.XL)(e),r.forEach(e=>{if(!(0,L.R8)(e))throw new h.Ci("Invalid multiaddr");let r=e.getPeerId();if(null==r){if(null!=t)throw new h.gG("Multiaddrs must all have the same peer id or have no peer id")}else{let e=(0,u.XL)(r);if(t?.equals(e)!==!0)throw new h.gG("Multiaddrs must all have the same peer id or have no peer id")}})}return r=r.filter(e=>!tu.RJ.exactMatch(e)),{peerId:t,multiaddrs:r}}let t2=["/ipfs/id/1.0.0","/ipfs/id/push/1.0.0","/libp2p/autonat/1.0.0","/libp2p/dcutr"];async function t3(e,t){let r=e?.streams?.map(e=>e.protocol)??[],n=t?.closableProtocols??t2;if(!(r.filter(e=>null!=e&&!n.includes(e)).length>0))try{await e?.close(t)}catch(t){e?.abort(t)}}var t4=r(3012);function t6(e){try{let t;t="string"==typeof e?(0,L.HZ)(e):e;let r=new Set([...t.getComponents().map(e=>e.name)]);if(!r.has("ipcidr")){let e=r.has("ip6");t=t.encapsulate(e?"/ipcidr/128":"/ipcidr/32")}return(0,t4.Hu)(t)}catch(t){throw Error(`Can't convert to IpNet, Invalid multiaddr format: ${e}`)}}class t5{connectionManager;peerStore;allow;events;log;constructor(e,t={}){this.allow=(t.allow??[]).map(e=>t6(e)),this.connectionManager=e.connectionManager,this.peerStore=e.peerStore,this.events=e.events,this.log=e.logger.forComponent("libp2p:connection-manager:connection-pruner"),this.maybePruneConnections=this.maybePruneConnections.bind(this)}start(){this.events.addEventListener("connection:open",this.maybePruneConnections)}stop(){this.events.removeEventListener("connection:open",this.maybePruneConnections)}maybePruneConnections(){this._maybePruneConnections().catch(e=>{this.log.error("error while pruning connections %e",e)})}async _maybePruneConnections(){let e=this.connectionManager.getConnections(),t=e.length,r=this.connectionManager.getMaxConnections();if(this.log("checking max connections limit %d/%d",t,r),t<=r)return;let n=new tW.j;for(let t of e){let e=t.remotePeer;if(!n.has(e)){n.set(e,0);try{let t=await this.peerStore.get(e);n.set(e,[...t.tags.values()].reduce((e,t)=>e+t.value,0))}catch(e){"NotFoundError"!==e.name&&this.log.error("error loading peer tags",e)}}}let i=this.sortConnections(e,n),s=Math.max(t-r,0),a=[];for(let e of i)if(this.log("too many connections open - closing a connection to %p",e.remotePeer),this.allow.some(t=>t.contains(e.remoteAddr.nodeAddress().address))||a.push(e),a.length===s)break;await Promise.all(a.map(async e=>{await t3(e,{signal:AbortSignal.timeout(1e3)})})),this.events.safeDispatchEvent("connection:prune",{detail:a})}sortConnections(e,t){return e.sort((e,t)=>{let r=e.timeline.open,n=t.timeline.open;return r<n?1:r>n?-1:0}).sort((e,t)=>"outbound"===e.direction&&"inbound"===t.direction?1:"inbound"===e.direction&&"outbound"===t.direction?-1:0).sort((e,t)=>e.streams.length>t.streams.length?1:e.streams.length<t.streams.length?-1:0).sort((e,r)=>{let n=t.get(e.remotePeer)??0,i=t.get(r.remotePeer)??0;return n>i?1:n<i?-1:0})}}var t8=r(2804);class t7 extends t8.o{constructor(e={}){super({...e,sort:(e,t)=>e.options.priority>t.options.priority?-1:+(e.options.priority<t.options.priority)})}}var t9=r(8934),re=r(9975);function rt(e){if(!(0,re.b)(e))return!1;let{address:t}=e.nodeAddress();return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}function rr(e,t){let r=tu.qi.exactMatch(e.multiaddr),n=tu.qi.exactMatch(t.multiaddr);if(r&&!n)return -1;if(!r&&n)return 1;let i=tu.YJ.exactMatch(e.multiaddr),s=tu.YJ.exactMatch(t.multiaddr);if(i&&!s)return -1;if(!i&&s)return 1;let a=tu.By.exactMatch(e.multiaddr),o=tu.By.exactMatch(t.multiaddr);if(a&&!o)return -1;if(!a&&o)return 1;let l=tu.aM.exactMatch(e.multiaddr),c=tu.aM.exactMatch(t.multiaddr);if(l&&!c)return -1;if(!l&&c)return 1;let u=tu.r9.exactMatch(e.multiaddr),d=tu.r9.exactMatch(t.multiaddr);if(u&&!d)return -1;if(!u&&d)return 1;let h=tu.u9.exactMatch(e.multiaddr),f=tu.u9.exactMatch(t.multiaddr);return h&&!f?-1:!h&&f?1:0}function rn(e,t){let r=rt(e.multiaddr),n=rt(t.multiaddr);return r&&!n?1:!r&&n?-1:0}function ri(e,t){let r=(0,tg.G)(e.multiaddr),n=(0,tg.G)(t.multiaddr);return r&&!n?1:!r&&n?-1:0}function rs(e,t){return e.isCertified&&!t.isCertified?-1:!e.isCertified&&t.isCertified?1:0}function ra(e,t){let r=tu.uu.exactMatch(e.multiaddr),n=tu.uu.exactMatch(t.multiaddr);return r&&!n?1:!r&&n?-1:0}async function ro(e,t,r){let n=r.depth??0;if(n>(r.maxRecursiveDepth??32))throw new t$("Max recursive depth reached");let i=!1,s=[];for(let a of Object.values(t))if(a.canResolve(e))for(let o of(i=!0,await a.resolve(e,r)))s.push(...await ro(o,t,{...r,depth:n+1}));return!1===i&&s.push(e),s}let rl={maxParallelDials:50,maxDialQueueLength:500,maxPeerAddrsToDial:25,dialTimeout:1e4,resolvers:{dnsaddr:F}};class rc{queue;components;addressSorter;maxPeerAddrsToDial;maxDialQueueLength;dialTimeout;shutDownController;connections;log;resolvers;constructor(e,t={}){this.addressSorter=t.addressSorter,this.maxPeerAddrsToDial=t.maxPeerAddrsToDial??rl.maxPeerAddrsToDial,this.maxDialQueueLength=t.maxDialQueueLength??rl.maxDialQueueLength,this.dialTimeout=t.dialTimeout??rl.dialTimeout,this.connections=t.connections??new tW.j,this.log=e.logger.forComponent("libp2p:connection-manager:dial-queue"),this.components=e,this.resolvers=t.resolvers??rl.resolvers,this.shutDownController=new AbortController,(0,en.k)(1/0,this.shutDownController.signal),this.queue=new t7({concurrency:t.maxParallelDials??rl.maxParallelDials,metricName:"libp2p_dial_queue",metrics:e.metrics}),this.queue.addEventListener("error",e=>{e.detail?.name!==h.lc.name&&this.log.error("error in dial queue - %e",e.detail)})}start(){this.shutDownController=new AbortController,(0,en.k)(1/0,this.shutDownController.signal)}stop(){this.shutDownController.abort(),this.queue.abort()}async dial(e,t={}){let{peerId:r,multiaddrs:n}=t1(e),i=Array.from(this.connections.values()).flat().find(e=>!0!==t.force&&(!!e.remotePeer.equals(r)||n.find(t=>t.equals(e.remoteAddr))));if(i?.status==="open")return this.log("already connected to %a",i.remoteAddr),t.onProgress?.(new P.j("dial-queue:already-connected")),i;let s=this.queue.queue.find(e=>{if(r?.equals(e.options.peerId)===!0)return!0;let t=e.options.multiaddrs;if(null==t)return!1;for(let e of n)if(t.has(e.toString()))return!0;return!1});if(null!=s){for(let e of(this.log("joining existing dial target for %p",r),n))s.options.multiaddrs.add(e.toString());return t.onProgress?.(new P.j("dial-queue:already-in-dial-queue")),s.join(t)}if(this.queue.size>=this.maxDialQueueLength)throw new h.zm("Dial queue is full");return this.log("creating dial target for %p",r,n.map(e=>e.toString())),t.onProgress?.(new P.j("dial-queue:add-to-dial-queue")),this.queue.add(async e=>{e.onProgress?.(new P.j("dial-queue:start-dial"));let t=(0,t9.J)([this.shutDownController.signal,e.signal]);(0,en.k)(1/0,t);try{return await this.dialPeer(e,t)}finally{t.clear()}},{peerId:r,priority:t.priority??rv,multiaddrs:new Set(n.map(e=>e.toString())),signal:t.signal??AbortSignal.timeout(this.dialTimeout),onProgress:t.onProgress})}async dialPeer(e,t){let r=e.peerId,n=e.multiaddrs,i=new Set,s=0===e.multiaddrs.size,a=0,o=0,l=[];for(this.log("starting dial to %p",r);s||n.size>0;){o++,s=!1;let c=[],u=new Set(e.multiaddrs);for(let s of(n.clear(),this.log("calculating addrs to dial %p from %s",r,[...u]),await this.calculateMultiaddrs(r,u,{...e,signal:t}))){if(i.has(s.multiaddr.toString())){this.log.trace("skipping previously failed multiaddr %a while dialing %p",s.multiaddr,r);continue}c.push(s)}for(let n of(this.log("%s dial to %p with %s",1===o?"starting":"continuing",r,c.map(e=>e.multiaddr.toString())),e?.onProgress?.(new P.j("dial-queue:calculated-addresses",c)),c)){if(a===this.maxPeerAddrsToDial)throw this.log("dialed maxPeerAddrsToDial (%d) addresses for %p, not trying any others",a,e.peerId),new h.zm("Peer had more than maxPeerAddrsToDial");a++;try{let i=await this.components.transportManager.dial(n.multiaddr,{...e,signal:t});this.log("dial to %a succeeded",n.multiaddr);try{await this.components.peerStore.merge(i.remotePeer,{multiaddrs:[i.remoteAddr],metadata:{"last-dial-success":(0,ts.s)(Date.now().toString())}})}catch(e){this.log.error("could not update last dial failure key for %p",r,e)}return i}catch(e){if(this.log.error("dial failed to %a",n.multiaddr,e),i.add(n.multiaddr.toString()),null!=r)try{await this.components.peerStore.merge(r,{metadata:{"last-dial-failure":(0,ts.s)(Date.now().toString())}})}catch(e){this.log.error("could not update last dial failure key for %p",r,e)}if(t.aborted)throw new h.MU(e.message);l.push(e)}}}if(1===l.length)throw l[0];throw AggregateError(l,"All multiaddr dials failed")}async calculateMultiaddrs(e,t=new Set,r={}){let n=[...t].map(e=>({multiaddr:(0,L.HZ)(e),isCertified:!1}));if(null!=e){if(this.components.peerId.equals(e))throw new h.zm("Tried to dial self");if(await this.components.connectionGater.denyDialPeer?.(e)===!0)throw new tB("The dial request is blocked by gater.allowDialPeer");if(0===n.length){this.log("loading multiaddrs for %p",e);try{let t=await this.components.peerStore.get(e);n.push(...t.addresses),this.log("loaded multiaddrs for %p",e,n.map(({multiaddr:e})=>e.toString()))}catch(e){if("NotFoundError"!==e.name)throw e}}if(0===n.length){this.log("looking up multiaddrs for %p in the peer routing",e);try{let t=await this.components.peerRouting.findPeer(e,r);this.log("found multiaddrs for %p in the peer routing",e,n.map(({multiaddr:e})=>e.toString())),n.push(...t.multiaddrs.map(e=>({multiaddr:e,isCertified:!1})))}catch(t){"NoPeerRoutersError"===t.name?this.log("no peer routers configured",e):this.log.error("looking up multiaddrs for %p in the peer routing failed - %e",e,t)}}}let i=(await Promise.all(n.map(async e=>{let t=await ro(e.multiaddr,this.resolvers,{dns:this.components.dns,log:this.log,...r});return 1===t.length&&t[0].equals(e.multiaddr)?e:t.map(e=>({multiaddr:e,isCertified:!1}))}))).flat();if(null!=e){let t=`/p2p/${e.toString()}`;i=i.map(e=>{let r=e.multiaddr.getComponents().pop();return r?.name!=="p2p"?{multiaddr:e.multiaddr.encapsulate(t),isCertified:e.isCertified}:e})}let s=i.filter(t=>{if(null==this.components.transportManager.dialTransportForMultiaddr(t.multiaddr))return!1;let r=t.multiaddr.getPeerId();return null==e||null==r||e.equals(r)}),a=new Map;for(let e of s){let t=e.multiaddr.toString(),r=a.get(t);if(null!=r){r.isCertified=r.isCertified||e.isCertified||!1;continue}a.set(t,e)}let o=[...a.values()];if(0===o.length)throw new tU("The dial request has no valid addresses");let l=[];for(let e of o)!(null!=this.components.connectionGater.denyDialMultiaddr&&await this.components.connectionGater.denyDialMultiaddr(e.multiaddr))&&l.push(e);let c=null==this.addressSorter?l.sort(rr).sort(rs).sort(ra).sort(ri).sort(rn):l.sort(this.addressSorter);if(0===c.length)throw new tB("The connection gater denied all addresses in the dial request");return this.log.trace("addresses for %p before filtering",e??"unknown peer",i.map(({multiaddr:e})=>e.toString())),this.log.trace("addresses for %p after filtering",e??"unknown peer",c.map(({multiaddr:e})=>e.toString())),c}async isDialable(e,t={}){Array.isArray(e)||(e=[e]);try{let r=await this.calculateMultiaddrs(void 0,new Set(e.map(e=>e.toString())),t);if(!1===t.runOnLimitedConnection)return null!=r.find(e=>!tu.uu.matches(e.multiaddr));return!0}catch(e){this.log.trace("error calculating if multiaddr(s) were dialable",e)}return!1}}var ru=r(8516),rd=r(6264),rh=r(4897);let rf=Object.prototype.toString,rp=e=>"[object Error]"===rf.call(e),rg=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);class rm extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}let rb=(e,t,r)=>{let n=r.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=n,e};async function ry(e,t){return new Promise((r,n)=>{t={...t},t.onFailedAttempt??=()=>{},t.shouldRetry??=()=>!0,t.retries??=10;let i=rh.operation(t),s=()=>{i.stop(),n(t.signal?.reason)};t.signal&&!t.signal.aborted&&t.signal.addEventListener("abort",s,{once:!0});let a=()=>{t.signal?.removeEventListener("abort",s),i.stop()};i.attempt(async s=>{try{let t=await e(s);a(),r(t)}catch(e){try{if(!(e instanceof Error))throw TypeError(`Non-error was thrown: "${e}". You should only throw errors.`);if(e instanceof rm)throw e.originalError;if(e instanceof TypeError&&!(e&&rp(e)&&"TypeError"===e.name&&"string"==typeof e.message&&("Load failed"===e.message?void 0===e.stack:rg.has(e.message))))throw e;if(rb(e,s,t),await t.shouldRetry(e)||(i.stop(),n(e)),await t.onFailedAttempt(e),!i.retry(e))throw i.mainError()}catch(e){rb(e,s,t),a(),n(e)}}})})}class rx{log;queue;started;peerStore;retries;retryInterval;backoffFactor;connectionManager;events;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:reconnect-queue"),this.peerStore=e.peerStore,this.connectionManager=e.connectionManager,this.queue=new rd.w({concurrency:t.maxParallelReconnects??5,metricName:"libp2p_reconnect_queue",metrics:e.metrics}),this.started=!1,this.retries=t.retries??5,this.backoffFactor=t.backoffFactor,this.retryInterval=t.retryInterval,this.events=e.events,e.events.addEventListener("peer:disconnect",e=>{this.maybeReconnect(e.detail).catch(t=>{this.log.error("failed to maybe reconnect to %p - %e",e.detail,t)})})}async maybeReconnect(e){if(!this.started)return;let t=await this.peerStore.get(e);!(!rw(t)||this.queue.has(e))&&this.queue.add(async t=>{await ry(async r=>{if(this.started)try{await this.connectionManager.openConnection(e,{signal:t?.signal})}catch(t){throw this.log("reconnecting to %p attempt %d of %d failed - %e",e,r,this.retries,t),t}},{signal:t?.signal,retries:this.retries,factor:this.backoffFactor,minTimeout:this.retryInterval})},{peerId:e}).catch(async r=>{this.log.error("failed to reconnect to %p - %e",e,r);let n={};[...t.tags.keys()].forEach(e=>{e.startsWith(ru.Q)&&(n[e]=void 0)}),await this.peerStore.merge(e,{tags:n}),this.events.safeDispatchEvent("peer:reconnect-failure",{detail:e})}).catch(async t=>{this.log.error("failed to remove keep-alive tag from %p - %e",e,t)})}start(){this.started=!0}async afterStart(){Promise.resolve().then(async()=>{let e=await this.peerStore.all({filters:[e=>rw(e)]});await Promise.all(e.map(async e=>{await this.connectionManager.openConnection(e.id).catch(e=>{this.log.error(e)})}))}).catch(e=>{this.log.error(e)})}stop(){this.started=!1,this.queue.abort()}}function rw(e){for(let t of e.tags.keys())if(t.startsWith(ru.Q))return!0;return!1}let rv=50,rA={maxConnections:100,inboundConnectionThreshold:5,maxIncomingPendingConnections:10};class rE{started;connections;allow;deny;maxIncomingPendingConnections;incomingPendingConnections;outboundPendingConnections;maxConnections;dialQueue;reconnectQueue;connectionPruner;inboundConnectionRateLimiter;peerStore;metrics;events;log;peerId;constructor(e,t={}){if(this.maxConnections=t.maxConnections??rA.maxConnections,this.maxConnections<1)throw new h.gG("Connection Manager maxConnections must be greater than 0");this.connections=new tW.j,this.started=!1,this.peerId=e.peerId,this.peerStore=e.peerStore,this.metrics=e.metrics,this.events=e.events,this.log=e.logger.forComponent("libp2p:connection-manager"),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.allow=(t.allow??[]).map(e=>t6(e)),this.deny=(t.deny??[]).map(e=>t6(e)),this.incomingPendingConnections=0,this.maxIncomingPendingConnections=t.maxIncomingPendingConnections??rA.maxIncomingPendingConnections,this.outboundPendingConnections=0,this.inboundConnectionRateLimiter=new tX({points:t.inboundConnectionThreshold??rA.inboundConnectionThreshold,duration:1}),this.connectionPruner=new t5({connectionManager:this,peerStore:e.peerStore,events:e.events,logger:e.logger},{allow:t.allow?.map(e=>L.HZ(e))}),this.dialQueue=new rc(e,{addressSorter:t.addressSorter,maxParallelDials:t.maxParallelDials??50,maxDialQueueLength:t.maxDialQueueLength??500,maxPeerAddrsToDial:t.maxPeerAddrsToDial??25,dialTimeout:t.dialTimeout??1e4,resolvers:t.resolvers??{dnsaddr:F},connections:this.connections}),this.reconnectQueue=new rx({events:e.events,peerStore:e.peerStore,logger:e.logger,connectionManager:this},{retries:t.reconnectRetries,retryInterval:t.reconnectRetryInterval,backoffFactor:t.reconnectBackoffFactor,maxParallelReconnects:t.maxParallelReconnects})}[Symbol.toStringTag]="@libp2p/connection-manager";async start(){this.metrics?.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{let e={inbound:0,"inbound pending":this.incomingPendingConnections,outbound:0,"outbound pending":this.outboundPendingConnections};for(let t of this.connections.values())for(let r of t)e[r.direction]++;return e}}),this.metrics?.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{let e={};for(let t of this.connections.values())for(let r of t)for(let t of r.streams){let r=`${t.direction} ${t.protocol??"unnegotiated"}`;e[r]=(e[r]??0)+1}return e}}),this.metrics?.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{let e={};for(let t of this.connections.values())for(let r of t){let t={};for(let e of r.streams){let r=`${e.direction} ${e.protocol??"unnegotiated"}`;t[r]=(t[r]??0)+1}for(let[r,n]of Object.entries(t))e[r]=e[r]??[],e[r].push(n)}let t={};for(let[r,n]of Object.entries(e)){let e=Math.floor(.9*(n=n.sort((e,t)=>e-t)).length);t[r]=n[e]}return t}}),this.events.addEventListener("connection:open",this.onConnect),this.events.addEventListener("connection:close",this.onDisconnect),await (0,tS.ni)(this.dialQueue,this.reconnectQueue,this.connectionPruner),this.started=!0,this.log("started")}async stop(){this.events.removeEventListener("connection:open",this.onConnect),this.events.removeEventListener("connection:close",this.onDisconnect),await (0,tS.ds)(this.reconnectQueue,this.dialQueue,this.connectionPruner);let e=[];for(let t of this.connections.values())for(let r of t)e.push((async()=>{try{await r.close()}catch(e){this.log.error(e)}})());this.log("closing %d connections",e.length),await Promise.all(e),this.connections.clear(),this.log("stopped")}getMaxConnections(){return this.maxConnections}setMaxConnections(e){if(this.maxConnections<1)throw new h.gG("Connection Manager maxConnections must be greater than 0");let t=!1;e<this.maxConnections&&(t=!0),this.maxConnections=e,t&&this.connectionPruner.maybePruneConnections()}onConnect(e){this._onConnect(e).catch(e=>{this.log.error(e)})}async _onConnect(e){let{detail:t}=e;if(!this.started){await t.close();return}if("open"!==t.status)return;let r=t.remotePeer,n=!this.connections.has(r),i=this.connections.get(r)??[];i.push(t),this.connections.set(r,i),null!=r.publicKey&&"RSA"===r.type&&await this.peerStore.patch(r,{publicKey:r.publicKey}),n&&this.events.safeDispatchEvent("peer:connect",{detail:t.remotePeer})}onDisconnect(e){let{detail:t}=e,r=t.remotePeer,n=(this.connections.get(r)??[]).filter(e=>e.id!==t.id);this.connections.set(r,n),0===n.length&&(this.log("onDisconnect remove all connections for peer %p",r),this.connections.delete(r),this.events.safeDispatchEvent("peer:disconnect",{detail:t.remotePeer}))}getConnections(e){if(null!=e)return this.connections.get(e)??[];let t=[];for(let e of this.connections.values())t=t.concat(e);return t}getConnectionsMap(){return this.connections}async openConnection(e,t={}){if(!this.started)throw new h.x$("Not started");this.outboundPendingConnections++;try{t.signal?.throwIfAborted();let{peerId:r}=t1(e);if(this.peerId.equals(r))throw new h.B6("Can not dial self");if(null!=r&&!0!==t.force){this.log("dial %p",r);let e=this.getConnections(r).find(e=>null==e.limits);if(null!=e)return this.log("had an existing non-limited connection to %p",r),t.onProgress?.(new P.j("dial-queue:already-connected")),e}let n=await this.dialQueue.dial(e,{...t,priority:t.priority??rv});if("open"!==n.status)throw new h.rb("Remote closed connection during opening");let i=this.connections.get(n.remotePeer);null==i&&(i=[],this.connections.set(n.remotePeer,i));let s=!1;for(let e of i)if(e.id===n.id&&(s=!0),!0!==t.force&&e.id!==n.id&&e.remoteAddr.equals(n.remoteAddr))return n.abort(new h.Ci("Duplicate multiaddr connection")),e;return s||i.push(n),n}finally{this.outboundPendingConnections--}}async closeConnections(e,t={}){let r=this.connections.get(e)??[];await Promise.all(r.map(async e=>{try{await e.close(t)}catch(t){e.abort(t)}}))}async acceptIncomingConnection(e){if(this.deny.some(t=>t.contains(e.remoteAddr.nodeAddress().address)))return this.log("connection from %a refused - connection remote address was in deny list",e.remoteAddr),!1;if(this.allow.some(t=>t.contains(e.remoteAddr.nodeAddress().address)))return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.maxIncomingPendingConnections)return this.log("connection from %a refused - incomingPendingConnections exceeded by host",e.remoteAddr),!1;if(e.remoteAddr.isThinWaistAddress()){let t=e.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(t,1)}catch{return this.log("connection from %a refused - inboundConnectionThreshold exceeded by host %s",e.remoteAddr,t),!1}}return this.getConnections().length<this.maxConnections?(this.incomingPendingConnections++,!0):(this.log("connection from %a refused - maxConnections exceeded",e.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}getDialQueue(){let e={queued:"queued",running:"active",errored:"error",complete:"success"};return this.dialQueue.queue.queue.map(t=>({id:t.id,status:e[t.status],peerId:t.options.peerId,multiaddrs:[...t.options.multiaddrs].map(e=>(0,L.HZ)(e))}))}async isDialable(e,t={}){return this.dialQueue.isDialable(e,t)}}var rk=r(9223),rP=r(5972),rS=r(560);class rI{protocol;components;log;heartbeatInterval;pingIntervalMs;abortController;timeout;abortConnectionOnPingFailure;constructor(e,t={}){this.components=e,this.protocol=`/${t.protocolPrefix??"ipfs"}/ping/1.0.0`,this.log=e.logger.forComponent("libp2p:connection-monitor"),this.pingIntervalMs=t.pingInterval??1e4,this.abortConnectionOnPingFailure=t.abortConnectionOnPingFailure??!0,this.timeout=new rP._1({...t.pingTimeout??{},metrics:e.metrics,metricName:"libp2p_connection_monitor_ping_time_milliseconds"})}[Symbol.toStringTag]="@libp2p/connection-monitor";[tI.Ch]=["@libp2p/connection-monitor"];start(){this.abortController=new AbortController,(0,en.k)(1/0,this.abortController.signal),this.heartbeatInterval=setInterval(()=>{this.components.connectionManager.getConnections().forEach(e=>{Promise.resolve().then(async()=>{let t=Date.now();try{let r=this.timeout.getTimeoutSignal({signal:this.abortController?.signal}),n=await e.newStream(this.protocol,{signal:r,runOnLimitedConnection:!0}),i=(0,rS.p)(n);t=Date.now(),await Promise.all([i.write((0,rk.A)(32),{signal:r}),i.read({bytes:32,signal:r})]),e.rtt=Date.now()-t,await i.unwrap().close({signal:r})}catch(r){if("UnsupportedProtocolError"!==r.name)throw r;e.rtt=(Date.now()-t)/2}}).catch(t=>{this.log.error("error during heartbeat",t),this.abortConnectionOnPingFailure?(this.log.error("aborting connection due to ping failure"),e.abort(t)):this.log("connection ping failed, but not aborting due to abortConnectionOnPingFailure flag")})})},this.pingIntervalMs)}stop(){this.abortController?.abort(),null!=this.heartbeatInterval&&clearInterval(this.heartbeatInterval)}}var rT=r(7905);class r_{routers;started;components;constructor(e,t){this.routers=t.routers??[],this.started=!1,this.components=e,this.findProviders=e.metrics?.traceFunction("libp2p.contentRouting.findProviders",this.findProviders.bind(this),{optionsIndex:1,getAttributesFromArgs:([e],t)=>({...t,cid:e.toString()}),getAttributesFromYieldedValue:(e,t)=>({...t,providers:[...Array.isArray(t.providers)?t.providers:[],e.id.toString()]})})??this.findProviders,this.provide=e.metrics?.traceFunction("libp2p.contentRouting.provide",this.provide.bind(this),{optionsIndex:1,getAttributesFromArgs:([e],t)=>({...t,cid:e.toString()})})??this.provide,this.cancelReprovide=e.metrics?.traceFunction("libp2p.contentRouting.cancelReprovide",this.cancelReprovide.bind(this),{optionsIndex:1,getAttributesFromArgs:([e],t)=>({...t,cid:e.toString()})})??this.cancelReprovide,this.put=e.metrics?.traceFunction("libp2p.contentRouting.put",this.put.bind(this),{optionsIndex:2,getAttributesFromArgs:([e])=>({key:O.d(e,"base36")})})??this.put,this.get=e.metrics?.traceFunction("libp2p.contentRouting.get",this.get.bind(this),{optionsIndex:1,getAttributesFromArgs:([e])=>({key:O.d(e,"base36")})})??this.get}[Symbol.toStringTag]="@libp2p/content-routing";isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async *findProviders(e,t={}){if(0===this.routers.length)throw new tC("No content routers available");let r=new q.t;for await(let n of(0,rT.A)(...this.routers.filter(e=>e.findProviders instanceof Function).map(r=>r.findProviders(e,t)))){if(null!=n)n.multiaddrs.length>0&&await this.components.peerStore.merge(n.id,{multiaddrs:n.multiaddrs},t),!r.has(n.id)&&(r.add(n.id),yield n)}}async provide(e,t={}){if(0===this.routers.length)throw new tC("No content routers available");await Promise.all(this.routers.filter(e=>e.provide instanceof Function).map(async r=>{await r.provide(e,t)}))}async cancelReprovide(e,t={}){if(0===this.routers.length)throw new tC("No content routers available");await Promise.all(this.routers.filter(e=>e.cancelReprovide instanceof Function).map(async r=>{await r.cancelReprovide(e,t)}))}async put(e,t,r){if(!this.isStarted())throw new h.x$;await Promise.all(this.routers.filter(e=>e.put instanceof Function).map(async n=>{await n.put(e,t,r)}))}async get(e,t){if(!this.isStarted())throw new h.x$;return Promise.any(this.routers.filter(e=>e.get instanceof Function).map(async r=>r.get(e,t)))}}var rC=r(1896);class rO{log;peerId;peerStore;routers;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:peer-routing"),this.peerId=e.peerId,this.peerStore=e.peerStore,this.routers=t.routers??[],this.findPeer=e.metrics?.traceFunction("libp2p.peerRouting.findPeer",this.findPeer.bind(this),{optionsIndex:1,getAttributesFromArgs:([e],t)=>({...t,peer:e.toString()})})??this.findPeer,this.getClosestPeers=e.metrics?.traceFunction("libp2p.peerRouting.getClosestPeers",this.getClosestPeers.bind(this),{optionsIndex:1,getAttributesFromArgs:([e],t)=>({...t,key:O.d(e,"base36")}),getAttributesFromYieldedValue:(e,t)=>({...t,peers:[...Array.isArray(t.peers)?t.peers:[],e.id.toString()]})})??this.getClosestPeers}[Symbol.toStringTag]="@libp2p/peer-routing";async findPeer(e,t){if(0===this.routers.length)throw new tO("No peer routers available");if(e.toString()===this.peerId.toString())throw new tR("Should not try to find self");let r=this;for await(let n of(0,rT.A)(...this.routers.filter(e=>e.findPeer instanceof Function).map(n=>(async function*(){try{yield await n.findPeer(e,t)}catch(e){r.log.error(e)}})())))if(null!=n)return n.multiaddrs.length>0&&await this.peerStore.merge(n.id,{multiaddrs:n.multiaddrs},t),n;throw new h.m_}async *getClosestPeers(e,t={}){if(0===this.routers.length)throw new tO("No peer routers available");let r=this,n=(0,tl.O)(1024);for await(let i of(0,rC.A)(async function*(){for await(let n of(0,rT.A)(...r.routers.filter(e=>e.getClosestPeers instanceof Function).map(r=>r.getClosestPeers(e,t))))yield async()=>{if(0===n.multiaddrs.length)try{n=await r.findPeer(n.id,{...t,useCache:!1})}catch(e){r.log.error("could not find peer multiaddrs",e);return}return n}}())){if(null!=i)i.multiaddrs.length>0&&await this.peerStore.merge(i.id,{multiaddrs:i.multiaddrs},t),!n.has(i.id.toMultihash().bytes)&&(n.add(i.id.toMultihash().bytes),yield i)}}}var rR=r(9608);class rN extends ee.X{peerRouting;log;walking;walkers;shutdownController;walkController;needNext;constructor(e){super(),this.log=e.logger.forComponent("libp2p:random-walk"),this.peerRouting=e.peerRouting,this.walkers=0,this.walking=!1,this.shutdownController=new AbortController,(0,en.k)(1/0,this.shutdownController.signal)}[Symbol.toStringTag]="@libp2p/random-walk";start(){this.shutdownController=new AbortController,(0,en.k)(1/0,this.shutdownController.signal)}stop(){this.shutdownController.abort()}async *walk(e){this.walking||this.startWalk(),this.walkers++;let t=(0,t9.J)([this.shutdownController.signal,e?.signal]);(0,en.k)(1/0,t);try{for(;;){this.needNext?.resolve(),this.needNext=(0,rR.A)();let e=await (0,et.y)(this,"walk:peer",t,{errorEvent:"walk:error"});yield e.detail}}finally{t.clear(),this.walkers--,0===this.walkers&&(this.walkController?.abort(),this.walkController=void 0)}}startWalk(){this.walking=!0,this.walkController=new AbortController,(0,en.k)(1/0,this.walkController.signal);let e=(0,t9.J)([this.walkController.signal,this.shutdownController.signal]);(0,en.k)(1/0,e);let t=Date.now(),r=0;Promise.resolve().then(async()=>{for(this.log("start walk");this.walkers>0;)try{let t=(0,rk.A)(32),n=Date.now();for await(let i of this.peerRouting.getClosestPeers(t,{signal:e}))e.aborted&&this.log("aborting walk"),e.throwIfAborted(),this.log("found peer %p after %dms for %d walkers",i.id,Date.now()-n,this.walkers),r++,this.safeDispatchEvent("walk:peer",{detail:i}),1===this.walkers&&null!=this.needNext&&(this.log("wait for need next"),await (0,ei.W)(this.needNext.promise,e)),n=Date.now();this.log("walk iteration for %b and %d walkers finished, found %d peers",t,this.walkers,r)}catch(e){this.log.error("random walk errored",e),this.safeDispatchEvent("walk:error",{detail:e})}this.log("no walkers left, ended walk")}).catch(e=>{this.log.error("random walk errored",e)}).finally(()=>{this.log("finished walk, found %d peers after %dms",r,Date.now()-t),this.walking=!1})}}class rM{log;topologies;handlers;components;middleware;constructor(e){this.components=e,this.log=e.logger.forComponent("libp2p:registrar"),this.middleware=new Map,this.topologies=new Map,e.metrics?.registerMetricGroup("libp2p_registrar_topologies",{calculate:()=>{let e={};for(let[t,r]of this.topologies)e[t]=r.size;return e}}),this.handlers=th({name:"libp2p_registrar_protocol_handlers",metrics:e.metrics}),this._onDisconnect=this._onDisconnect.bind(this),this._onPeerUpdate=this._onPeerUpdate.bind(this),this._onPeerIdentify=this._onPeerIdentify.bind(this),this.components.events.addEventListener("peer:disconnect",this._onDisconnect),this.components.events.addEventListener("peer:update",this._onPeerUpdate),this.components.events.addEventListener("peer:identify",this._onPeerIdentify)}[Symbol.toStringTag]="@libp2p/registrar";getProtocols(){return Array.from(new Set([...this.handlers.keys()])).sort()}getHandler(e){let t=this.handlers.get(e);if(null==t)throw new tN(`No handler registered for protocol ${e}`);return t}getTopologies(e){let t=this.topologies.get(e);return null==t?[]:[...t.values()]}async handle(e,t,r){if(this.handlers.has(e)&&r?.force!==!0)throw new tM(`Handler already registered for protocol ${e}`);let n=k.bind({ignoreUndefined:!0})({maxInboundStreams:32,maxOutboundStreams:64},r);this.handlers.set(e,{handler:t,options:n}),await this.components.peerStore.merge(this.components.peerId,{protocols:[e]},r)}async unhandle(e,t){(Array.isArray(e)?e:[e]).forEach(e=>{this.handlers.delete(e)}),await this.components.peerStore.patch(this.components.peerId,{protocols:this.getProtocols()},t)}async register(e,t){if(null==t)throw new h.gG("invalid topology");let r=`${(1e9*Math.random()).toString(36)}${Date.now()}`,n=this.topologies.get(e);return null==n&&(n=new Map,this.topologies.set(e,n)),n.set(r,t),r}unregister(e){for(let[t,r]of this.topologies.entries())r.has(e)&&(r.delete(e),0===r.size&&this.topologies.delete(t))}use(e,t){this.middleware.set(e,t)}unuse(e){this.middleware.delete(e)}getMiddleware(e){return this.middleware.get(e)??[]}_onDisconnect(e){let t=e.detail,r={signal:AbortSignal.timeout(5e3)};this.components.peerStore.get(t,r).then(e=>{for(let r of e.protocols){let e=this.topologies.get(r);if(null!=e)for(let r of e.values())r.filter?.has(t)!==!1&&(r.filter?.remove(t),r.onDisconnect?.(t))}}).catch(e=>{"NotFoundError"!==e.name&&this.log.error("could not inform topologies of disconnecting peer %p",t,e)})}_onPeerUpdate(e){let{peer:t,previous:r}=e.detail;for(let e of(r?.protocols??[]).filter(e=>!t.protocols.includes(e))){let r=this.topologies.get(e);if(null!=r)for(let e of r.values())e.filter?.has(t.id)!==!1&&(e.filter?.remove(t.id),e.onDisconnect?.(t.id))}}_onPeerIdentify(e){let t=e.detail.protocols,r=e.detail.connection,n=e.detail.peerId;for(let e of t){let t=this.topologies.get(e);if(null!=t)for(let e of t.values())(null==r.limits||!0===e.notifyOnLimitedConnection)&&e.filter?.has(n)!==!0&&(e.filter?.add(n),e.onConnect?.(n,r))}}}class rB{log;components;transports;listeners;faultTolerance;started;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:transports"),this.components=e,this.started=!1,this.transports=th({name:"libp2p_transport_manager_transports",metrics:this.components.metrics}),this.listeners=th({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=t.faultTolerance??d.aF.FATAL_ALL}[Symbol.toStringTag]="@libp2p/transport-manager";add(e){let t=e[Symbol.toStringTag];if(null==t)throw new h.gG("Transport must have a valid tag");if(this.transports.has(t))throw new h.gG(`There is already a transport with the tag ${t}`);this.log("adding transport %s",t),this.transports.set(t,e),this.listeners.has(t)||this.listeners.set(t,[])}isStarted(){return this.started}start(){this.started=!0}async afterStart(){let e=this.components.addressManager.getListenAddrs();await this.listen(e)}async stop(){let e=[];for(let[t,r]of this.listeners)for(this.log("closing listeners for %s",t);r.length>0;){let t=r.pop();null!=t&&e.push(t.close())}for(let t of(await Promise.all(e),this.log("all listeners closed"),this.listeners.keys()))this.listeners.set(t,[]);this.started=!1}async dial(e,t){let r=this.dialTransportForMultiaddr(e);if(null==r)throw new tG(`No transport available for address ${String(e)}`);return t?.onProgress?.(new P.j("transport-manager:selected-transport",r[Symbol.toStringTag])),r.dial(e,{...t,upgrader:this.components.upgrader})}getAddrs(){let e=[];for(let t of this.listeners.values())for(let r of t)e=[...e,...r.getAddrs()];return e}getTransports(){return Array.of(...this.transports.values())}getListeners(){return Array.of(...this.listeners.values()).flat()}dialTransportForMultiaddr(e){for(let t of this.transports.values())if(t.dialFilter([e]).length>0)return t}listenTransportForMultiaddr(e){for(let t of this.transports.values())if(t.listenFilter([e]).length>0)return t}async listen(e){if(!this.isStarted())throw new h.x$("Not started");if(null==e||0===e.length){this.log("no addresses were provided for listening, this node is dial only");return}let t={errors:new Map,ipv4:{success:0,attempts:0},ipv6:{success:0,attempts:0}};e.forEach(e=>{t.errors.set(e.toString(),new tD)});let r=[];for(let[n,i]of this.transports.entries())for(let s of i.listenFilter(e)){this.log("creating listener for %s on %a",n,s);let e=i.createListener({upgrader:this.components.upgrader}),a=this.listeners.get(n)??[];null==a&&(a=[],this.listeners.set(n,a)),a.push(e),e.addEventListener("listening",()=>{this.components.events.safeDispatchEvent("transport:listening",{detail:e})}),e.addEventListener("close",()=>{let t=a.findIndex(t=>t===e);a.splice(t,1),this.components.events.safeDispatchEvent("transport:close",{detail:e})}),tu.uM.matches(s)?t.ipv4.attempts++:tu.ur.matches(s)&&t.ipv6.attempts++,r.push(e.listen(s).then(()=>{t.errors.delete(s.toString()),tu.uM.matches(s)&&t.ipv4.success++,tu.ur.matches(s)&&t.ipv6.success++},e=>{throw this.log.error("transport %s could not listen on address %a - %e",n,s,e),t.errors.set(s.toString(),e),e}))}let n=await Promise.allSettled(r);if(!(n.length>0&&n.every(e=>"fulfilled"===e.status))){if(this.ipv6Unsupported(t)){this.log("all IPv4 addresses succeed but all IPv6 failed");return}if(this.faultTolerance===d.aF.NO_FATAL){this.log("failed to listen on any address but fault tolerance allows this");return}throw new tL(`Some configured addresses failed to be listened on, you may need to remove one or more listen addresses from your configuration or set \`transportManager.faultTolerance\` to NO_FATAL:
${[...t.errors.entries()].map(([e,t])=>`
  ${e}: ${`${t.stack??t}`.split("\n").join("\n  ")}
`).join("")}`)}}ipv6Unsupported(e){if(0===e.ipv4.attempts||0===e.ipv6.attempts)return!1;let t=e.ipv4.attempts===e.ipv4.success,r=0===e.ipv6.success;return t&&r}async remove(e){let t=this.listeners.get(e)??[];this.log.trace("removing transport %s",e);let r=[];for(this.log.trace("closing listeners for %s",e);t.length>0;){let e=t.pop();null!=e&&r.push(e.close())}await Promise.all(r),this.transports.delete(e),this.listeners.delete(e)}async removeAll(){let e=[];for(let t of this.transports.keys())e.push(this.remove(t));await Promise.all(e)}}var rD=r(4195),rL=r(6844),rU=r(2830);let rF="/multistream/1.0.0",rj=(0,ts.s)("\n");async function rz(e,t,r){await e.write(t,r)}async function rH(e,t,r){await e.writeV(t,r)}async function rG(e,t){let r=await e.read(t);if(0===r.byteLength||r.get(r.byteLength-1)!==rj[0])throw t.log.error("Invalid mss message - missing newline",r),new h.L("Missing newline");return r.sublist(0,-1)}async function r$(e,t){let r=await rG(e,t);return(0,O.d)(r.subarray())}async function rV(e,t,r){t=Array.isArray(t)?t:[t],r.log.trace("handle: available protocols %s",t);let n=(0,rL.V)(e,{...r,maxDataLength:1024,maxLengthLength:2});for(;;){r.log.trace("handle: reading incoming string");let e=await r$(n,r);if(r.log.trace('handle: read "%s"',e),e===rF){r.log.trace('handle: respond with "%s" for "%s"',rF,e),await rz(n,(0,ts.s)(`${rF}
`),r),r.log.trace('handle: responded with "%s" for "%s"',rF,e);continue}if(t.includes(e))return r.log.trace('handle: respond with "%s" for "%s"',e,e),await rz(n,(0,ts.s)(`${e}
`),r),r.log.trace('handle: responded with "%s" for "%s"',e,e),{stream:n.unwrap(),protocol:e};if("ls"===e){let i=new rU.I(...t.map(e=>rD.l.single((0,ts.s)(`${e}
`))),(0,ts.s)("\n"));r.log.trace('handle: respond with "%s" for %s',t,e),await rz(n,i,r),r.log.trace('handle: responded with "%s" for %s',t,e);continue}r.log.trace('handle: respond with "na" for "%s"',e),await rz(n,(0,ts.s)("na\n"),r),r.log('handle: responded with "na" for "%s"',e)}}var rq=r(1138);async function rK(e,t,r){if(1===(t=Array.isArray(t)?[...t]:[t]).length&&!1===r.negotiateFully)return function(e,t,r){let n=e.sink.bind(e),i=e.source,s=!1,a=!1,o=(0,rR.A)(),l=!1,c=!1,u=(0,rR.A)(),d=!1,f=!1,p=(0,rR.A)(),g=(0,rL.V)({sink:n,source:i},{...r,maxDataLength:1024});async function m(){if(a){r.log.trace("optimistic: already negotiating %s stream",t),await o.promise;return}a=!0;try{l||(r.log.trace("optimistic: doing send protocol for %s stream",t),await b()),d||(r.log.trace("optimistic: doing read protocol for %s stream",t),await y())}finally{a=!1,s=!0,o.resolve()}}async function b(){if(c){await u.promise;return}c=!0;try{r.log.trace('optimistic: write ["%s", "%s", data] in source',rF,t),await g.writeV([(0,ts.s)(`${rF}
`),(0,ts.s)(`${t}
`)]),r.log.trace('optimistic: wrote ["%s", "%s", data] in source',rF,t)}finally{l=!0,c=!1,u.resolve()}}async function y(){if(f){await p.promise;return}f=!0;try{r.log.trace("optimistic: reading multistream select header");let e=await r$(g,r);if(r.log.trace('optimistic: read multistream select header "%s"',e),e===rF&&(e=await r$(g,r)),r.log.trace('optimistic: read protocol "%s", expecting "%s"',e,t),e!==t)throw new h.IM("protocol selection failed")}finally{d=!0,f=!1,p.resolve()}}if(e.sink=async e=>{let{sink:n}=g.unwrap();await n(async function*(){let n=!1;for await(let i of e){if(c&&await u.promise,l)yield i;else{c=!0,r.log.trace('optimistic: write ["%s", "%s", data(%d)] in sink',rF,t,i.byteLength);let e=`${t}
`;yield new rU.I(Uint8Array.from([19]),(0,ts.s)(`${rF}
`),rq.lF(e.length),(0,ts.s)(e),i).subarray(),r.log.trace('optimistic: wrote ["%s", "%s", data(%d)] in sink',rF,t,i.byteLength),l=!0,c=!1,u.resolve(),m().catch(e=>{r.log.error("could not finish optimistic protocol negotiation of %s",t,e)})}n=!0}n||await m()}())},e.source=async function*(){await m(),r.log.trace('optimistic: reading data from "%s" stream',t),yield*g.unwrap().source}(),null!=e.closeRead){let t=e.closeRead.bind(e);e.closeRead=async e=>{s||await m().catch(e=>{r.log.error("could not negotiate protocol before close read",e)}),await t(e)}}if(null!=e.closeWrite){let t=e.closeWrite.bind(e);e.closeWrite=async e=>{s||await m().catch(e=>{r.log.error("could not negotiate protocol before close write",e)}),await t(e)}}if(null!=e.close){let t=e.close.bind(e);e.close=async e=>{let r=[];c&&r.push(u.promise),f&&r.push(p.promise),r.length>0?await (0,ei.W)(Promise.all(r),e?.signal):(s=!0,a=!1,o.resolve()),await t(e)}}return{stream:e,protocol:t}}(e,t[0],r);let n=(0,rL.V)(e,{...r,maxDataLength:1024}),i=t.shift();if(null==i)throw Error("At least one protocol must be specified");r.log.trace('select: write ["%s", "%s"]',rF,i);let s=(0,ts.s)(`${rF}
`),a=(0,ts.s)(`${i}
`);await rH(n,[s,a],r),r.log.trace("select: reading multistream-select header");let o=await r$(n,r);if(r.log.trace('select: read "%s"',o),o===rF&&(r.log.trace("select: reading protocol response"),o=await r$(n,r),r.log.trace('select: read "%s"',o)),o===i)return{stream:n.unwrap(),protocol:i};for(let e of t){r.log.trace('select: write "%s"',e),await rz(n,(0,ts.s)(`${e}
`),r),r.log.trace("select: reading protocol response");let t=await r$(n,r);if(r.log.trace('select: read "%s" for "%s"',t,e),t===e)return{stream:n.unwrap(),protocol:e}}throw new h.IM("protocol selection failed")}let rW=Symbol.for("@libp2p/connection");class rQ{id;remoteAddr;remotePeer;direction;timeline;multiplexer;encryption;status;limits;log;tags;_newStream;_close;_abort;_getStreams;constructor(e){let{remoteAddr:t,remotePeer:r,newStream:n,close:i,abort:s,getStreams:a}=e;this.id=`${parseInt(String(1e9*Math.random())).toString(36)}${Date.now()}`,this.remoteAddr=t,this.remotePeer=r,this.direction=e.direction,this.status="open",this.timeline=e.timeline,this.multiplexer=e.multiplexer,this.encryption=e.encryption,this.limits=e.limits,this.log=e.logger.forComponent(`libp2p:connection:${this.direction}:${this.id}`),null==this.remoteAddr.getPeerId()&&(this.remoteAddr=this.remoteAddr.encapsulate(`/p2p/${this.remotePeer}`)),this._newStream=n,this._close=i,this._abort=s,this._getStreams=a,this.tags=[]}[Symbol.toStringTag]="Connection";[rW]=!0;get streams(){return this._getStreams()}async newStream(e,t){if("closing"===this.status)throw new h.qB("the connection is being closed");if("closed"===this.status)throw new h.rb("the connection is closed");if(Array.isArray(e)||(e=[e]),null!=this.limits&&t?.runOnLimitedConnection!==!0)throw new h.lY("Cannot open protocol stream on limited connection");let r=await this._newStream(e,t);return r.direction="outbound",r}async close(e={}){if("closed"!==this.status&&"closing"!==this.status){if(this.log("closing connection to %a",this.remoteAddr),this.status="closing",null==e.signal){let t=AbortSignal.timeout(500);(0,en.k)(1/0,t),e={...e,signal:t}}try{this.log.trace("closing underlying transport"),await this._close(e),this.log.trace("updating timeline with close time"),this.status="closed",this.timeline.close=Date.now()}catch(e){this.log.error("error encountered during graceful close of connection to %a",this.remoteAddr,e),this.abort(e)}}}abort(e){"closed"!==this.status&&(this.log.error("aborting connection to %a due to error",this.remoteAddr,e),this.status="closing",this._abort(e),this.status="closed",this.timeline.close=Date.now())}}function rZ(e,t,r){let n=0;return r.streams.forEach(r=>{r.direction===t&&r.protocol===e&&n++}),n}class rJ{components;connectionEncrypters;streamMuxers;inboundUpgradeTimeout;inboundStreamProtocolNegotiationTimeout;outboundStreamProtocolNegotiationTimeout;events;metrics;constructor(e,t){this.components=e,this.connectionEncrypters=th({name:"libp2p_upgrader_connection_encrypters",metrics:this.components.metrics}),t.connectionEncrypters.forEach(e=>{this.connectionEncrypters.set(e.protocol,e)}),this.streamMuxers=th({name:"libp2p_upgrader_stream_multiplexers",metrics:this.components.metrics}),t.streamMuxers.forEach(e=>{this.streamMuxers.set(e.protocol,e)}),this.inboundUpgradeTimeout=t.inboundUpgradeTimeout??1e4,this.inboundStreamProtocolNegotiationTimeout=t.inboundStreamProtocolNegotiationTimeout??1e4,this.outboundStreamProtocolNegotiationTimeout=t.outboundStreamProtocolNegotiationTimeout??1e4,this.events=e.events,this.metrics={dials:e.metrics?.registerCounterGroup("libp2p_connection_manager_dials_total"),errors:e.metrics?.registerCounterGroup("libp2p_connection_manager_dial_errors_total"),inboundErrors:e.metrics?.registerCounterGroup("libp2p_connection_manager_dials_inbound_errors_total"),outboundErrors:e.metrics?.registerCounterGroup("libp2p_connection_manager_dials_outbound_errors_total")}}[Symbol.toStringTag]="@libp2p/upgrader";async shouldBlockConnection(e,...t){let r=this.components.connectionGater[e];if(null!=r&&!0===await r.apply(this.components.connectionGater,t))throw new tF(`The multiaddr connection is blocked by gater.${e}`)}createInboundAbortSignal(e){let t=(0,t9.J)([AbortSignal.timeout(this.inboundUpgradeTimeout),e]);return(0,en.k)(1/0,t),t}async upgradeInbound(e,t){let r=!1,n=this.createInboundAbortSignal(t.signal);try{if(this.metrics.dials?.increment({inbound:!0}),!(r=await (0,ei.W)(this.components.connectionManager.acceptIncomingConnection(e),n)))throw new tj("Connection denied");await (0,ei.W)(this.shouldBlockConnection("denyInboundConnection",e),n),await this._performUpgrade(e,"inbound",{...t,signal:n})}catch(e){throw this.metrics.errors?.increment({inbound:!0}),this.metrics.inboundErrors?.increment({[e.name??"Error"]:!0}),e}finally{n.clear(),r&&this.components.connectionManager.afterUpgradeInbound()}}async upgradeOutbound(e,t){try{let r;this.metrics.dials?.increment({outbound:!0});let n=e.remoteAddr.getPeerId();null!=n&&(r=(0,u.XL)(n),await (0,ei.W)(this.shouldBlockConnection("denyOutboundConnection",r,e),t.signal));let i="outbound";return!1===t.initiator&&(i="inbound"),await this._performUpgrade(e,i,t)}catch(e){throw this.metrics.errors?.increment({outbound:!0}),this.metrics.outboundErrors?.increment({[e.name??"Error"]:!0}),e}}async _performUpgrade(e,t,r){let n,i,s,a,o;this.components.metrics?.trackMultiaddrConnection(e),e.log.trace("starting the %s connection upgrade",t);let l=e;if(r?.skipProtection!==!0){let n=this.components.connectionProtector;null!=n&&(e.log("protecting the %s connection",t),l=await n.protect(e,r))}try{if(n=l,r?.skipEncryption!==!0){r?.onProgress?.(new P.j(`upgrader:encrypt-${t}-connection`)),{conn:n,remotePeer:i,protocol:o,streamMuxer:a}=await ("inbound"===t?this._encryptInbound(l,r):this._encryptOutbound(l,r));let e={...l,...n};await this.shouldBlockConnection("inbound"===t?"denyInboundEncryptedConnection":"denyOutboundEncryptedConnection",i,e)}else{let r=e.remoteAddr.getPeerId();if(null==r)throw new h.Ci(`${t} connection that skipped encryption must have a peer id`);let n=(0,u.XL)(r);o="native",i=n}if(i.equals(this.components.peerId)){let t=new h.B6("Can not dial self");throw e.abort(t),t}if(s=n,r?.muxerFactory!=null)a=r.muxerFactory;else if(null==a&&this.streamMuxers.size>0){r?.onProgress?.(new P.j(`upgrader:multiplex-${t}-connection`));let e=await ("inbound"===t?this._multiplexInbound({...l,...n},this.streamMuxers,r):this._multiplexOutbound({...l,...n},this.streamMuxers,r));a=e.muxerFactory,s=e.stream}}catch(r){throw e.log.error("failed to upgrade inbound connection %s %a - %e","inbound"===t?"from":"to",e.remoteAddr,r),r}return await this.shouldBlockConnection("inbound"===t?"denyInboundUpgradedConnection":"denyOutboundUpgradedConnection",i,e),e.log("successfully upgraded %s connection",t),this._createConnection({cryptoProtocol:o,direction:t,maConn:e,upgradedConn:s,muxerFactory:a,remotePeer:i,limits:r?.limits})}async _runMiddlewareChain(e,t,r,n){for(let i=0;i<r.length;i++){let s=r[i];n?.trace("running middleware",i,s),await new Promise((r,n)=>{try{let i=s(e,t,(n,i)=>{e=n,t=i,r()});i instanceof Promise&&i.catch(n)}catch(e){n(e)}}),n?.trace("ran middleware",i,s)}return{stream:e,connection:t}}_createConnection(e){let t,r,n;let{cryptoProtocol:i,direction:s,maConn:a,upgradedConn:o,remotePeer:l,muxerFactory:c,limits:u}=e;null!=c&&(t=c.createStreamMuxer({direction:s,onIncomingStream:e=>{if(null==n)return;let t=AbortSignal.timeout(this.inboundStreamProtocolNegotiationTimeout);(0,en.k)(1/0,t),Promise.resolve().then(async()=>{let r=this.components.registrar.getProtocols(),{stream:i,protocol:s}=await rV(e,r,{signal:t,log:e.log,yieldBytes:!1});if(null==n)return;n.log("incoming stream opened on %s",s);let a=function(e,t){try{let{options:r}=t.getHandler(e);return r.maxInboundStreams}catch(e){if("UnhandledProtocolError"!==e.name)throw e}return 32}(s,this.components.registrar);if(rZ(s,"inbound",n)===a){let t=new h.q7(`Too many inbound protocol streams for protocol "${s}" - limit ${a}`);throw e.abort(t),t}e.source=i.source,e.sink=i.sink,e.protocol=s,null!=i.closeWrite&&(e.closeWrite=i.closeWrite),null!=i.closeRead&&(e.closeRead=i.closeRead),null!=i.close&&(e.close=i.close),await this.components.peerStore.merge(l,{protocols:[s]},{signal:t}),this.components.metrics?.trackProtocolStream(e,n),this._onStream({connection:n,stream:e,protocol:s})}).catch(async r=>{n.log.error("error handling incoming stream id %s - %e",e.id,r),null==e.timeline.close&&await e.close({signal:t}).catch(t=>e.abort(t))})}}),r=async(r,i={})=>{if(null==t)throw new tz("Connection is not multiplexed");n.log.trace("starting new stream for protocols %s",r);let a=await t.newStream();n.log.trace("started new stream %s for protocols %s",a.id,r);try{if(null==i.signal){a.log("no abort signal was passed while trying to negotiate protocols %s falling back to default timeout",r);let e=AbortSignal.timeout(this.outboundStreamProtocolNegotiationTimeout);(0,en.k)(1/0,e),i={...i,signal:e}}a.log.trace("selecting protocol from protocols %s",r);let{stream:e,protocol:t}=await rK(a,r,{...i,log:a.log,yieldBytes:!0});a.log.trace("selected protocol %s",t);let s=function(e,t,r={}){try{let{options:r}=t.getHandler(e);if(null!=r.maxOutboundStreams)return r.maxOutboundStreams}catch(e){if("UnhandledProtocolError"!==e.name)throw e}return r.maxOutboundStreams??64}(t,this.components.registrar,i),o=rZ(t,"outbound",n);if(o>=s){let e=new h.NJ(`Too many outbound protocol streams for protocol "${t}" - ${o}/${s}`);throw a.abort(e),e}await this.components.peerStore.merge(l,{protocols:[t]}),a.source=e.source,a.sink=e.sink,a.protocol=t,null!=e.closeWrite&&(a.closeWrite=e.closeWrite),null!=e.closeRead&&(a.closeRead=e.closeRead),null!=e.close&&(a.close=e.close),this.components.metrics?.trackProtocolStream(a,n);let c=this.components.registrar.getMiddleware(t);return c.push((e,t,r)=>{r(e,t)}),{stream:a,connection:n}=await this._runMiddlewareChain(a,n,c,a.log),a}catch(t){throw n.log.error("could not create new outbound stream on connection %s %a for protocols %s - %e","inbound"===s?"from":"to",e.maConn.remoteAddr,r,t),null==a.timeline.close&&a.abort(t),t}},Promise.all([t.sink(o.source),o.sink(t.source)]).catch(e=>{n.log.error("error piping data through muxer - %e",e)}));let d=a.timeline;return a.timeline=new Proxy(d,{set:(...e)=>("close"===e[1]&&null!=e[2]&&null==d.close&&(async()=>{try{"open"===n.status&&await n.close()}catch(e){n.log.error("error closing connection after timeline close %e",e)}finally{this.events.safeDispatchEvent("connection:close",{detail:n})}})().catch(e=>{n.log.error("error thrown while dispatching connection:close event %e",e)}),Reflect.set(...e))}),a.timeline.upgraded=Date.now(),n=new rQ({remoteAddr:a.remoteAddr,remotePeer:l,status:"open",direction:s,timeline:a.timeline,multiplexer:t?.protocol,encryption:i,limits:u,logger:this.components.logger,newStream:r??(()=>{throw new tz("Connection is not multiplexed")}),getStreams:()=>t?.streams??[],close:async e=>{await t?.close(e),await a.close(e)},abort:e=>{a.abort(e),t?.abort(e)}}),this.events.safeDispatchEvent("connection:open",{detail:n}),n.__maConnTimeline=d,n}_onStream(e){let{connection:t,stream:r,protocol:n}=e,{handler:i,options:s}=this.components.registrar.getHandler(n);if(null!=t.limits&&!0!==s.runOnLimitedConnection)throw new h.lY("Cannot open protocol stream on limited connection");let a=this.components.registrar.getMiddleware(n);if(0===a.length){i({stream:r,connection:t});return}this._runMiddlewareChain(r,t,a,r.log).then(({stream:e,connection:t})=>{i({stream:e,connection:t})}).catch(e=>{t.log.error("middleware error for inbound stream %s - %e",r.id,e),r.abort(e)})}async _encryptInbound(e,t){let r=Array.from(this.connectionEncrypters.keys());try{let{stream:n,protocol:i}=await rV(e,r,{...t,log:e.log}),s=this.connectionEncrypters.get(i);if(null==s)throw new tH(`no crypto module found for ${i}`);return e.log("encrypting inbound connection to %a using %s",e.remoteAddr,i),{...await s.secureInbound(n,t),protocol:i}}catch(t){throw e.log.error("encrypting inbound connection from %a failed",e.remoteAddr,t),new tH(t.message)}}async _encryptOutbound(e,t){let r=Array.from(this.connectionEncrypters.keys());try{e.log.trace("selecting encrypter from %s",r);let{stream:n,protocol:i}=await rK(e,r,{...t,log:e.log,yieldBytes:!0}),s=this.connectionEncrypters.get(i);if(null==s)throw new tH(`no crypto module found for ${i}`);return e.log("encrypting outbound connection to %a using %s",e.remoteAddr,i),{...await s.secureOutbound(n,t),protocol:i}}catch(t){throw e.log.error("encrypting outbound connection to %a failed",e.remoteAddr,t),new tH(t.message)}}async _multiplexOutbound(e,t,r){let n=Array.from(t.keys());e.log("outbound selecting muxer %s",n);try{e.log.trace("selecting stream muxer from %s",n);let{stream:i,protocol:s}=await rK(e,n,{...r,log:e.log,yieldBytes:!0});e.log("selected %s as muxer protocol",s);let a=t.get(s);return{stream:i,muxerFactory:a}}catch(t){throw e.log.error("error multiplexing outbound connection",t),new tz(String(t))}}async _multiplexInbound(e,t,r){let n=Array.from(t.keys());e.log("inbound handling muxers %s",n);try{let{stream:i,protocol:s}=await rV(e,n,{...r,log:e.log}),a=t.get(s);return{stream:i,muxerFactory:a}}catch(t){throw e.log.error("error multiplexing inbound connection",t),new tz(String(t))}}getConnectionEncrypters(){return this.connectionEncrypters}getStreamMuxers(){return this.streamMuxers}}let rY="0.0.0",rX="js-libp2p";class r0 extends ee.X{peerId;peerStore;contentRouting;peerRouting;metrics;services;logger;status;components;log;constructor(e){super(),this.status="stopped";let t=new ee.X,r=t.dispatchEvent.bind(t);t.dispatchEvent=e=>{let t=r(e),n=this.dispatchEvent(new CustomEvent(e.type,{detail:e.detail}));return t||n},(0,en.k)(1/0,t),this.peerId=e.peerId,this.logger=e.logger??(0,V.Um)(),this.log=this.logger.forComponent("libp2p"),this.services={};let n=e.nodeInfo?.name??rX,i=e.nodeInfo?.version??rY,s=this.components=function(e={}){let t=new tV(e);return new Proxy(t,{get(e,r,n){if("string"==typeof r&&!tK.includes(r)){let e=t.components[r];if(null==e&&!tq.includes(r))throw new tT(`${r} not set`);return e}return Reflect.get(e,r,n)},set:(e,r,n)=>("string"==typeof r?t.components[r]=n:Reflect.set(e,r,n),!0)})}({peerId:e.peerId,privateKey:e.privateKey,nodeInfo:{name:n,version:i,userAgent:e.nodeInfo?.userAgent??`${n??rX}/${i??rY} browser/${globalThis.navigator.userAgent}`},logger:this.logger,events:t,datastore:e.datastore??new tn,connectionGater:function(e={}){return{denyDialPeer:async()=>!1,denyDialMultiaddr:async e=>{if(tu.By.matches(e))return!1;let t=e.stringTuples();return(4===t[0][0]||41===t[0][0])&&!!(0,tc.b)(`${t[0][1]}`)},denyInboundConnection:async()=>!1,denyOutboundConnection:async()=>!1,denyInboundEncryptedConnection:async()=>!1,denyOutboundEncryptedConnection:async()=>!1,denyInboundUpgradedConnection:async()=>!1,denyOutboundUpgradedConnection:async()=>!1,filterMultiaddrForPeer:async()=>!0,...e}}(e.connectionGater),dns:e.dns});null!=e.metrics&&(this.metrics=this.configureComponent("metrics",e.metrics(this.components))),this.peerStore=this.configureComponent("peerStore",function(e,t={}){return new eY(e,t)}(s,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...e.peerStore})),s.events.addEventListener("peer:update",e=>{if(null==e.detail.previous){let t={id:e.detail.peer.id,multiaddrs:e.detail.peer.addresses.map(e=>e.multiaddr)};s.events.safeDispatchEvent("peer:discovery",{detail:t})}}),null!=e.connectionProtector&&this.configureComponent("connectionProtector",e.connectionProtector(s)),this.components.upgrader=new rJ(this.components,{connectionEncrypters:(e.connectionEncrypters??[]).map((e,t)=>this.configureComponent(`connection-encryption-${t}`,e(this.components))),streamMuxers:(e.streamMuxers??[]).map((e,t)=>this.configureComponent(`stream-muxers-${t}`,e(this.components))),inboundUpgradeTimeout:e.connectionManager?.inboundUpgradeTimeout,inboundStreamProtocolNegotiationTimeout:e.connectionManager?.inboundStreamProtocolNegotiationTimeout??e.connectionManager?.protocolNegotiationTimeout,outboundStreamProtocolNegotiationTimeout:e.connectionManager?.outboundStreamProtocolNegotiationTimeout??e.connectionManager?.protocolNegotiationTimeout}),this.configureComponent("transportManager",new rB(this.components,e.transportManager)),this.configureComponent("connectionManager",new rE(this.components,e.connectionManager)),e.connectionMonitor?.enabled!==!1&&this.configureComponent("connectionMonitor",new rI(this.components,e.connectionMonitor)),this.configureComponent("registrar",new rM(this.components)),this.configureComponent("addressManager",new tP(this.components,e.addresses));let a=(e.peerRouters??[]).map((e,t)=>this.configureComponent(`peer-router-${t}`,e(this.components)));this.peerRouting=this.components.peerRouting=this.configureComponent("peerRouting",new rO(this.components,{routers:a}));let o=(e.contentRouters??[]).map((e,t)=>this.configureComponent(`content-router-${t}`,e(this.components)));if(this.contentRouting=this.components.contentRouting=this.configureComponent("contentRouting",new r_(this.components,{routers:o})),this.configureComponent("randomWalk",new rN(this.components)),(e.peerDiscovery??[]).forEach((e,t)=>{this.configureComponent(`peer-discovery-${t}`,e(this.components)).addEventListener("peer",e=>{this.#rn(e)})}),e.transports?.forEach((e,t)=>{this.components.transportManager.add(this.configureComponent(`transport-${t}`,e(this.components)))}),null!=e.services)for(let t of Object.keys(e.services)){let r=(0,e.services[t])(this.components);if(null==r){this.log.error("service factory %s returned null or undefined instance",t);continue}this.services[t]=r,this.configureComponent(t,r),null!=r[H.q]&&(this.log("registering service %s for content routing",t),o.push(r[H.q])),null!=r[G.b]&&(this.log("registering service %s for peer routing",t),a.push(r[G.b])),null!=r[$.P]&&(this.log("registering service %s for peer discovery",t),r[$.P].addEventListener?.("peer",e=>{this.#rn(e)}))}!function(e){var t,r,n;let i={};for(let r of Object.values(e.components)){for(let e of(t=r,Array.isArray(t?.[tI.Ch])?t[tI.Ch]:[]))i[e]=!0}for(let t of Object.values(e.components)){for(let e of(r=t,Array.isArray(r?.[tI.VM])?r[tI.VM]:[]))if(!0!==i[e]){throw new t_(`Service "${(n=t,n?.[Symbol.toStringTag]??n?.toString()??"unknown")}" required capability "${e}" but it was not provided by any component, you may need to add additional configuration when creating your node.`)}}}(s)}configureComponent(e,t){return null==t&&this.log.error("component %s was null or undefined",e),this.components[e]=t,t}async start(){if("stopped"===this.status){this.status="starting",this.log("libp2p is starting");try{await this.components.beforeStart?.(),await this.components.start(),await this.components.afterStart?.(),this.status="started",this.safeDispatchEvent("start",{detail:this}),this.log("libp2p has started")}catch(e){throw this.log.error("An error occurred starting libp2p",e),this.status="started",await this.stop(),e}}}async stop(){"started"===this.status&&(this.log("libp2p is stopping"),this.status="stopping",await this.components.beforeStop?.(),await this.components.stop(),await this.components.afterStop?.(),this.status="stopped",this.safeDispatchEvent("stop",{detail:this}),this.log("libp2p has stopped"))}getConnections(e){return this.components.connectionManager.getConnections(e)}getDialQueue(){return this.components.connectionManager.getDialQueue()}getPeers(){let e=new q.t;for(let t of this.components.connectionManager.getConnections())e.add(t.remotePeer);return Array.from(e)}async dial(e,t={}){return this.components.connectionManager.openConnection(e,{priority:75,...t})}async dialProtocol(e,t,r={}){if(null==t||0===(t=Array.isArray(t)?t:[t]).length)throw new h.gG("no protocols were provided to open a stream");return(await this.dial(e,r)).newStream(t,r)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(e,t={}){(0,L.R8)(e)&&(e=(0,u.XL)(e.getPeerId()??"")),await this.components.connectionManager.closeConnections(e,t)}async getPublicKey(e,t={}){if(this.log("getPublicKey %p",e),null!=e.publicKey)return e.publicKey;try{let r=await this.peerStore.get(e,t);if(null!=r.id.publicKey)return r.id.publicKey}catch(e){if("NotFoundError"!==e.name)throw e}let r=(0,ti.x)([(0,ts.s)("/pk/"),e.toMultihash().bytes]),n=await this.contentRouting.get(r,t),i=(0,c.EZ)(n);return await this.peerStore.patch(e,{publicKey:i},t),i}async handle(e,t,r){Array.isArray(e)||(e=[e]),await Promise.all(e.map(async e=>{await this.components.registrar.handle(e,t,r)}))}async unhandle(e,t){Array.isArray(e)||(e=[e]),await Promise.all(e.map(async e=>{await this.components.registrar.unhandle(e,t)}))}async register(e,t,r){return this.components.registrar.register(e,t,r)}unregister(e){this.components.registrar.unregister(e)}use(e,t){this.components.registrar.use(e,Array.isArray(t)?t:[t])}unuse(e){this.components.registrar.unuse(e)}async isDialable(e,t={}){return this.components.connectionManager.isDialable(e,t)}#rn(e){let{detail:t}=e;if(t.id.toString()===this.peerId.toString()){this.log.error("peer discovery mechanism discovered self");return}this.components.peerStore.merge(t.id,{multiaddrs:t.multiaddrs}).catch(e=>{this.log.error(e)})}}async function r1(e={}){e.privateKey??=await (0,c.TZ)("Ed25519");let t=new r0({...await z(e),peerId:(0,u.Ug)(e.privateKey)});return!1!==e.start&&await t.start(),t}},6524:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyMessage=t.hashMessage=void 0;let n=r(6870),i=r(9418),s=r(2984),a=r(8662);function o(e){return"string"==typeof e&&(e=(0,a.toUtf8Bytes)(e)),(0,n.keccak256)((0,a.concat)([(0,a.toUtf8Bytes)(i.MessagePrefix),(0,a.toUtf8Bytes)(String(e.length)),e]))}t.hashMessage=o,t.verifyMessage=function(e,t){let r=o(e);return(0,s.recoverAddress)(r,t)}},6552:(e,t,r)=>{"use strict";function n(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}r.d(t,{a:()=>n})},6571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptKeystoreJson=t.encryptKeystoreJsonSync=t.decryptKeystoreJson=t.decryptKeystoreJsonSync=t.isKeystoreJson=void 0;let n=r(1252),i=r(9111),s=r(6870),a=r(2984),o=r(8662),l=r(5216),c=r(9571),u="m/44'/60'/0'/0/0";function d(e,t){let r=(0,o.getBytes)(t),c=(0,l.spelunk)(e,"crypto.ciphertext:data!"),d=(0,o.hexlify)((0,s.keccak256)((0,o.concat)([r.slice(16,32),c]))).substring(2);(0,o.assertArgument)(d===(0,l.spelunk)(e,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");let h=function(e,t,r){if("aes-128-ctr"===(0,l.spelunk)(e,"crypto.cipher:string")){let i=(0,l.spelunk)(e,"crypto.cipherparams.iv:data!"),s=new n.CTR(t,i);return(0,o.hexlify)(s.decrypt(r))}(0,o.assert)(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})}(e,r.slice(0,16),c),f=(0,a.computeAddress)(h);if(e.address){let t=e.address.toLowerCase();t.startsWith("0x")||(t="0x"+t),(0,o.assertArgument)((0,i.getAddress)(t)===f,"keystore address/privateKey mismatch","address",e.address)}let p={address:f,privateKey:h};if("0.1"===(0,l.spelunk)(e,"x-ethers.version:string")){let t=r.slice(32,64),i=(0,l.spelunk)(e,"x-ethers.mnemonicCiphertext:data!"),s=(0,l.spelunk)(e,"x-ethers.mnemonicCounter:data!"),a=new n.CTR(t,s);p.mnemonic={path:(0,l.spelunk)(e,"x-ethers.path:string")||u,locale:(0,l.spelunk)(e,"x-ethers.locale:string")||"en",entropy:(0,o.hexlify)((0,o.getBytes)(a.decrypt(i)))}}return p}function h(e){let t=(0,l.spelunk)(e,"crypto.kdf:string");if(t&&"string"==typeof t){if("scrypt"===t.toLowerCase()){let r=(0,l.spelunk)(e,"crypto.kdfparams.salt:data!"),n=(0,l.spelunk)(e,"crypto.kdfparams.n:int!"),i=(0,l.spelunk)(e,"crypto.kdfparams.r:int!"),s=(0,l.spelunk)(e,"crypto.kdfparams.p:int!");(0,o.assertArgument)(n>0&&(n&n-1)==0,"invalid kdf.N","kdf.N",n),(0,o.assertArgument)(i>0&&s>0,"invalid kdf","kdf",t);let a=(0,l.spelunk)(e,"crypto.kdfparams.dklen:int!");return(0,o.assertArgument)(32===a,"invalid kdf.dklen","kdf.dflen",a),{name:"scrypt",salt:r,N:n,r:i,p:s,dkLen:64}}if("pbkdf2"===t.toLowerCase()){let t=(0,l.spelunk)(e,"crypto.kdfparams.salt:data!"),r=(0,l.spelunk)(e,"crypto.kdfparams.prf:string!"),n=r.split("-").pop();(0,o.assertArgument)("sha256"===n||"sha512"===n,"invalid kdf.pdf","kdf.pdf",r);let i=(0,l.spelunk)(e,"crypto.kdfparams.c:int!"),s=(0,l.spelunk)(e,"crypto.kdfparams.dklen:int!");return(0,o.assertArgument)(32===s,"invalid kdf.dklen","kdf.dklen",s),{name:"pbkdf2",salt:t,count:i,dkLen:s,algorithm:n}}}(0,o.assertArgument)(!1,"unsupported key-derivation function","kdf",t)}function f(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}function p(e){let t=null!=e.salt?(0,o.getBytes)(e.salt,"options.salt"):(0,s.randomBytes)(32),r=131072,n=8,i=1;return e.scrypt&&(e.scrypt.N&&(r=e.scrypt.N),e.scrypt.r&&(n=e.scrypt.r),e.scrypt.p&&(i=e.scrypt.p)),(0,o.assertArgument)("number"==typeof r&&r>0&&Number.isSafeInteger(r)&&(BigInt(r)&BigInt(r-1))===BigInt(0),"invalid scrypt N parameter","options.N",r),(0,o.assertArgument)("number"==typeof n&&n>0&&Number.isSafeInteger(n),"invalid scrypt r parameter","options.r",n),(0,o.assertArgument)("number"==typeof i&&i>0&&Number.isSafeInteger(i),"invalid scrypt p parameter","options.p",i),{name:"scrypt",dkLen:32,salt:t,N:r,r:n,p:i}}function g(e,t,r,i){let a=(0,o.getBytes)(r.privateKey,"privateKey"),d=null!=i.iv?(0,o.getBytes)(i.iv,"options.iv"):(0,s.randomBytes)(16);(0,o.assertArgument)(16===d.length,"invalid options.iv length","options.iv",i.iv);let h=null!=i.uuid?(0,o.getBytes)(i.uuid,"options.uuid"):(0,s.randomBytes)(16);(0,o.assertArgument)(16===h.length,"invalid options.uuid length","options.uuid",i.iv);let f=e.slice(0,16),p=e.slice(16,32),g=new n.CTR(f,d),m=(0,o.getBytes)(g.encrypt(a)),b=(0,s.keccak256)((0,o.concat)([p,m])),y={address:r.address.substring(2).toLowerCase(),id:(0,o.uuidV4)(h),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:(0,o.hexlify)(d).substring(2)},ciphertext:(0,o.hexlify)(m).substring(2),kdf:"scrypt",kdfparams:{salt:(0,o.hexlify)(t.salt).substring(2),n:t.N,dklen:32,p:t.p,r:t.r},mac:b.substring(2)}};if(r.mnemonic){let t=null!=i.client?i.client:`ethers/${c.version}`,a=r.mnemonic.path||u,d=r.mnemonic.locale||"en",h=e.slice(32,64),f=(0,o.getBytes)(r.mnemonic.entropy,"account.mnemonic.entropy"),p=(0,s.randomBytes)(16),g=new n.CTR(h,p),m=(0,o.getBytes)(g.encrypt(f)),b=new Date,x="UTC--"+(b.getUTCFullYear()+"-"+(0,l.zpad)(b.getUTCMonth()+1,2)+"-"+(0,l.zpad)(b.getUTCDate(),2)+"T"+(0,l.zpad)(b.getUTCHours(),2)+"-"+(0,l.zpad)(b.getUTCMinutes(),2)+"-"+(0,l.zpad)(b.getUTCSeconds(),2))+".0Z--"+y.address;y["x-ethers"]={client:t,gethFilename:x,path:a,locale:d,mnemonicCounter:(0,o.hexlify)(p).substring(2),mnemonicCiphertext:(0,o.hexlify)(m).substring(2),version:"0.1"}}return JSON.stringify(y)}t.isKeystoreJson=function(e){try{let t=JSON.parse(e),r=null!=t.version?parseInt(t.version):0;if(3===r)return!0}catch(e){}return!1},t.decryptKeystoreJsonSync=function(e,t){let r=JSON.parse(e),n=(0,l.getPassword)(t),i=h(r);if("pbkdf2"===i.name){let{salt:e,count:t,dkLen:a,algorithm:o}=i;return d(r,(0,s.pbkdf2)(n,e,t,a,o))}(0,o.assert)("scrypt"===i.name,"cannot be reached","UNKNOWN_ERROR",{params:i});let{salt:a,N:c,r:u,p:f,dkLen:p}=i;return d(r,(0,s.scryptSync)(n,a,c,u,f,p))},t.decryptKeystoreJson=async function(e,t,r){let n=JSON.parse(e),i=(0,l.getPassword)(t),a=h(n);if("pbkdf2"===a.name){r&&(r(0),await f(0));let{salt:e,count:t,dkLen:o,algorithm:l}=a,c=(0,s.pbkdf2)(i,e,t,o,l);return r&&(r(1),await f(0)),d(n,c)}(0,o.assert)("scrypt"===a.name,"cannot be reached","UNKNOWN_ERROR",{params:a});let{salt:c,N:u,r:p,p:g,dkLen:m}=a;return d(n,await (0,s.scrypt)(i,c,u,p,g,m,r))},t.encryptKeystoreJsonSync=function(e,t,r){null==r&&(r={});let n=(0,l.getPassword)(t),i=p(r),a=(0,s.scryptSync)(n,i.salt,i.N,i.r,i.p,64);return g((0,o.getBytes)(a),i,e,r)},t.encryptKeystoreJson=async function(e,t,r){null==r&&(r={});let n=(0,l.getPassword)(t),i=p(r),a=await (0,s.scrypt)(n,i.salt,i.N,i.r,i.p,64,r.progressCallback);return g((0,o.getBytes)(a),i,e,r)}},6572:(e,t,r)=>{"use strict";r.r(t),r.d(t,{sha256:()=>s,sha512:()=>a});var n=r(7774);function i(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}let s=(0,n.H)({name:"sha2-256",code:18,encode:i("SHA-256")}),a=(0,n.H)({name:"sha2-512",code:19,encode:i("SHA-512")})},6578:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FixedBytesCoder=void 0;let n=r(8662),i=r(4037),s=r(2884);class a extends s.Coder{size;constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),(0,n.defineProperties)(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=(0,n.getBytesCopy)(i.Typed.dereference(t,this.type));return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return(0,n.hexlify)(e.readBytes(this.size))}}t.FixedBytesCoder=a},6598:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCreate2Address=t.getCreateAddress=void 0;let n=r(6870),i=r(8662),s=r(3823);t.getCreateAddress=function(e){let t=(0,s.getAddress)(e.from),r=(0,i.getBigInt)(e.nonce,"tx.nonce").toString(16);return r="0"===r?"0x":r.length%2?"0x0"+r:"0x"+r,(0,s.getAddress)((0,i.dataSlice)((0,n.keccak256)((0,i.encodeRlp)([t,r])),12))},t.getCreate2Address=function(e,t,r){let a=(0,s.getAddress)(e),o=(0,i.getBytes)(t,"salt"),l=(0,i.getBytes)(r,"initCodeHash");return(0,i.assertArgument)(32===o.length,"salt must be 32 bytes","salt",t),(0,i.assertArgument)(32===l.length,"initCodeHash must be 32 bytes","initCodeHash",r),(0,s.getAddress)((0,i.dataSlice)((0,n.keccak256)((0,i.concat)(["0xff",a,o,l])),12))}},6623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserProvider=void 0;let n=r(8662),i=r(4822);class s extends i.JsonRpcApiPollingProvider{#ex;#e3;constructor(e,t,r){let i=Object.assign({},null!=r?r:{},{batchMaxCount:1});(0,n.assertArgument)(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,i),this.#e3=null,r&&r.providerInfo&&(this.#e3=r.providerInfo),this.#ex=async(t,r)=>{let n={method:t,params:r};this.emit("debug",{action:"sendEip1193Request",payload:n});try{let t=await e.request(n);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(t){let e=Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=n,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}get providerInfo(){return this.#e3}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){(0,n.assertArgument)(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{let t=await this.#ex(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);let t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter(t=>t.toLowerCase()===e).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#ex("eth_requestAccounts",[])}catch(t){let e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}static async discover(e){if(null==e&&(e={}),e.provider)return new s(e.provider);let t=e.window?e.window:"undefined"!=typeof window?window:null;if(null==t)return null;let r=e.anyProvider;if(r&&t.ethereum)return new s(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;let i=e.timeout?e.timeout:300;return 0===i?null:await new Promise((a,o)=>{let l=[],c=e=>{l.push(e.detail),r&&u()},u=()=>{if(clearTimeout(d),l.length){if(e&&e.filter){let t=e.filter(l.map(e=>Object.assign({},e.info)));if(null==t)a(null);else if(t instanceof s)a(t);else{let e=null;if(t.uuid&&(e=l.filter(e=>t.uuid===e.info.uuid)[0]),e){let{provider:t,info:r}=e;a(new s(t,void 0,{providerInfo:r}))}else o((0,n.makeError)("filter returned unknown info","UNSUPPORTED_OPERATION",{value:t}))}}else{let{provider:e,info:t}=l[0];a(new s(e,void 0,{providerInfo:t}))}}else a(null);t.removeEventListener("eip6963:announceProvider",c)},d=setTimeout(()=>{u()},i);t.addEventListener("eip6963:announceProvider",c),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}t.BrowserProvider=s},6633:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomBytes=void 0;let n=r(4006),i=!1,s=function(e){return new Uint8Array((0,n.randomBytes)(e))},a=s;function o(e){return a(e)}t.randomBytes=o,o._=s,o.lock=function(){i=!0},o.register=function(e){if(i)throw Error("randomBytes is locked");a=e},Object.freeze(o)},6640:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseWallet=void 0;let n=r(9111),i=r(4259),s=r(8321),a=r(2984),o=r(8662);class l extends s.AbstractSigner{address;#tv;constructor(e,t){super(t),(0,o.assertArgument)(e&&"function"==typeof e.sign,"invalid private key","privateKey","[ REDACTED ]"),this.#tv=e;let r=(0,a.computeAddress)(this.signingKey.publicKey);(0,o.defineProperties)(this,{address:r})}get signingKey(){return this.#tv}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(e){return new l(this.#tv,e)}async signTransaction(e){e=(0,s.copyRequest)(e);let{to:t,from:r}=await (0,o.resolveProperties)({to:e.to?(0,n.resolveAddress)(e.to,this):void 0,from:e.from?(0,n.resolveAddress)(e.from,this):void 0});null!=t&&(e.to=t),null!=r&&(e.from=r),null!=e.from&&((0,o.assertArgument)((0,n.getAddress)(e.from)===this.address,"transaction from address mismatch","tx.from",e.from),delete e.from);let i=a.Transaction.from(e);return i.signature=this.signingKey.sign(i.unsignedHash),i.serialized}async signMessage(e){return this.signMessageSync(e)}signMessageSync(e){return this.signingKey.sign((0,i.hashMessage)(e)).serialized}authorizeSync(e){(0,o.assertArgument)("string"==typeof e.address,"invalid address for authorizeSync","auth.address",e);let t=this.signingKey.sign((0,i.hashAuthorization)(e));return Object.assign({},{address:(0,n.getAddress)(e.address),nonce:(0,o.getBigInt)(e.nonce||0),chainId:(0,o.getBigInt)(e.chainId||0)},{signature:t})}async authorize(e){return e=Object.assign({},e,{address:await (0,n.resolveAddress)(e.address,this)}),this.authorizeSync(await this.populateAuthorization(e))}async signTypedData(e,t,r){let n=await i.TypedDataEncoder.resolveNames(e,t,r,async e=>{(0,o.assert)(null!=this.provider,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:e}});let t=await this.provider.resolveName(e);return(0,o.assert)(null!=t,"unconfigured ENS name","UNCONFIGURED_NAME",{value:e}),t});return this.signingKey.sign(i.TypedDataEncoder.hash(n.domain,t,n.value)).serialized}}t.BaseWallet=l},6676:(e,t,r)=>{"use strict";function n(){}r.d(t,{k:()=>n})},6684:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringCoder=void 0;let n=r(2097),i=r(4037),s=r(9777);class a extends s.DynamicBytesCoder{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,(0,n.toUtf8Bytes)(i.Typed.dereference(t,"string")))}decode(e){return(0,n.toUtf8String)(super.decode(e))}}t.StringCoder=a},6720:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0;let n=r(6870),i=r(8662);t.id=function(e){return(0,n.keccak256)((0,i.toUtf8Bytes)(e))}},6726:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authorizationify=void 0;let n=r(9111),i=r(6870),s=r(8662);t.authorizationify=function(e){return{address:(0,n.getAddress)(e.address),nonce:(0,s.getBigInt)(null!=e.nonce?e.nonce:0),chainId:(0,s.getBigInt)(null!=e.chainId?e.chainId:0),signature:i.Signature.from(e.signature)}}},6743:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SigningKey=void 0;let n=r(345),i=r(8662),s=r(9055);class a{#i;constructor(e){(0,i.assertArgument)(32===(0,i.dataLength)(e),"invalid private key","privateKey","[REDACTED]"),this.#i=(0,i.hexlify)(e)}get privateKey(){return this.#i}get publicKey(){return a.computePublicKey(this.#i)}get compressedPublicKey(){return a.computePublicKey(this.#i,!0)}sign(e){(0,i.assertArgument)(32===(0,i.dataLength)(e),"invalid digest length","digest",e);let t=n.secp256k1.sign((0,i.getBytesCopy)(e),(0,i.getBytesCopy)(this.#i),{lowS:!0});return s.Signature.from({r:(0,i.toBeHex)(t.r,32),s:(0,i.toBeHex)(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=a.computePublicKey(e);return(0,i.hexlify)(n.secp256k1.getSharedSecret((0,i.getBytesCopy)(this.#i),(0,i.getBytes)(t),!1))}static computePublicKey(e,t){let r=(0,i.getBytes)(e,"key");if(32===r.length){let e=n.secp256k1.getPublicKey(r,!!t);return(0,i.hexlify)(e)}if(64===r.length){let e=new Uint8Array(65);e[0]=4,e.set(r,1),r=e}let s=n.secp256k1.ProjectivePoint.fromHex(r);return(0,i.hexlify)(s.toRawBytes(t))}static recoverPublicKey(e,t){(0,i.assertArgument)(32===(0,i.dataLength)(e),"invalid digest length","digest",e);let r=s.Signature.from(t),a=n.secp256k1.Signature.fromCompact((0,i.getBytesCopy)((0,i.concat)([r.r,r.s]))),o=(a=a.addRecoveryBit(r.yParity)).recoverPublicKey((0,i.getBytesCopy)(e));return(0,i.assertArgument)(null!=o,"invalid signature for digest","signature",t),"0x"+o.toHex(!1)}static addPoints(e,t,r){let i=n.secp256k1.ProjectivePoint.fromHex(a.computePublicKey(e).substring(2)),s=n.secp256k1.ProjectivePoint.fromHex(a.computePublicKey(t).substring(2));return"0x"+i.add(s).toHex(!!r)}}t.SigningKey=a},6803:(e,t,r)=>{"use strict";r.d(t,{h:()=>ed});var n={};r.r(n),r.d(n,{OG:()=>y,My:()=>c,Ph:()=>h,lX:()=>f,Id:()=>b,fg:()=>v,qj:()=>m,aT:()=>d,lq:()=>p,z:()=>g,Q5:()=>E});var i=r(9258);BigInt(0);let s=BigInt(1),a=BigInt(2),o=e=>e instanceof Uint8Array,l=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function c(e){if(!o(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function u(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function d(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let n=2*t,i=Number.parseInt(e.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[t]=i}return r}function h(e){return u(c(e))}function f(e){if(!o(e))throw Error("Uint8Array expected");return u(c(Uint8Array.from(e).reverse()))}function p(e,t){return d(e.toString(16).padStart(2*t,"0"))}function g(e,t){return p(e,t).reverse()}function m(e,t,r){let n;if("string"==typeof t)try{n=d(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(o(t))n=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let i=n.length;if("number"==typeof r&&i!==r)throw Error(`${e} expected ${r} bytes, got ${i}`);return n}function b(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!o(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let y=e=>(a<<BigInt(e-1))-s,x=e=>new Uint8Array(e),w=e=>Uint8Array.from(e);function v(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=x(e),i=x(e),s=0,a=()=>{n.fill(1),i.fill(0),s=0},o=(...e)=>r(i,n,...e),l=(e=x())=>{i=o(w([0]),e),n=o(),0!==e.length&&(i=o(w([1]),e),n=o())},c=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=o()).slice();r.push(t),e+=n.length}return b(...r)};return(e,t)=>{let r;for(a(),l(e);!(r=t(c()));)l();return a(),r}}let A={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function E(e,t,r={}){let n=(t,r,n)=>{let i=A[r];if("function"!=typeof i)throw Error(`Invalid validator "${r}", expected function`);let s=e[t];if((!n||void 0!==s)&&!i(s,e))throw Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let k=BigInt(0),P=BigInt(1),S=BigInt(2),I=BigInt(3),T=BigInt(4),_=BigInt(5),C=BigInt(8);function O(e,t){let r=e%t;return r>=k?r:t+r}function R(e,t,r){let n=e;for(;t-- >k;)n*=n,n%=r;return n}function N(e,t){if(e===k||t<=k)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=O(e,t),n=t,i=k,s=P,a=P,o=k;for(;r!==k;){let e=n/r,t=n%r,l=i-a*e,c=s-o*e;n=r,r=t,i=a,s=o,a=l,o=c}if(n!==P)throw Error("invert: does not exist");return O(i,t)}BigInt(9),BigInt(16);let M=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function B(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function D(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function L(e){let t=D(e);return t+Math.ceil(t/2)}var U=r(4570),F=r(6269);let j=BigInt(0),z=BigInt(1);function H(e){return E(e.Fp,M.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),E(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...B(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}let{Ph:G,aT:$}=n,V={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=V;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:G(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=V,r="string"==typeof e?$(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:i,l:s}=V._parseInt(r.subarray(2)),{d:a,l:o}=V._parseInt(s);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,a=i.length/2,o=r(s),l=r(a);return`30${r(a+s+4)}02${l}${i}02${o}${n}`}},q=BigInt(0),K=BigInt(1),W=(BigInt(2),BigInt(3)),Q=(BigInt(4),BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f")),Z=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),J=BigInt(1),Y=BigInt(2),X=(e,t)=>(e+t/Y)/t,ee=function(e,t,r=!1,n={}){if(e<=k)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:i,nByteLength:s}=B(e,t);if(s>2048)throw Error("Field lengths over 2048 bytes are not supported");let a=function(e){if(e%T===I){let t=(e+P)/T;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%C===_){let t=(e-_)/C;return function(e,r){let n=e.mul(r,S),i=e.pow(n,t),s=e.mul(r,i),a=e.mul(e.mul(s,S),i),o=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(o),r))throw Error("Cannot find square root");return o}}return function(e){let t,r,n;let i=(e-P)/S;for(t=e-P,r=0;t%S===k;t/=S,r++);for(n=S;n<e&&function(e,t,r){if(r<=k||t<k)throw Error("Expected power/modulo > 0");if(r===P)return k;let n=P;for(;t>k;)t&P&&(n=n*e%r),e=e*e%r,t>>=P;return n}(n,i,e)!==e-P;n++);if(1===r){let t=(e+P)/T;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let s=(t+P)/S;return function(e,a){if(e.pow(a,i)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,n),t),c=e.pow(a,s),u=e.pow(a,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,P<<BigInt(o-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),o=t}return c}}(e)}(e),o=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:y(i),ZERO:k,ONE:P,create:t=>O(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return k<=t&&t<e},is0:e=>e===k,isOdd:e=>(e&P)===P,neg:t=>O(-t,e),eql:(e,t)=>e===t,sqr:t=>O(t*t,e),add:(t,r)=>O(t+r,e),sub:(t,r)=>O(t-r,e),mul:(t,r)=>O(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<k)throw Error("Expected power > 0");if(r===k)return e.ONE;if(r===P)return t;let n=e.ONE,i=t;for(;r>k;)r&P&&(n=e.mul(n,i)),i=e.sqr(i),r>>=P;return n})(o,e,t),div:(t,r)=>O(t*N(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>N(t,e),sqrt:n.sqrt||(e=>a(o,e)),invertBatch:e=>(function(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r})(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?g(e,s):p(e,s),fromBytes:e=>{if(e.length!==s)throw Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?f(e):h(e)}});return Object.freeze(o)}(Q,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),o=BigInt(88),l=e*e*e%Q,c=l*l*e%Q,u=R(c,t,Q)*c%Q,d=R(u,t,Q)*c%Q,h=R(d,Y,Q)*l%Q,f=R(h,n,Q)*h%Q,p=R(f,i,Q)*f%Q,g=R(p,a,Q)*p%Q,m=R(g,o,Q)*g%Q,b=R(m,a,Q)*p%Q,y=R(b,t,Q)*c%Q,x=R(y,s,Q)*f%Q,w=R(x,r,Q)*l%Q,v=R(w,Y,Q);if(!ee.eql(ee.sqr(v),e))throw Error("Cannot find square root");return v}}),et=function(e,t){let r=t=>(function(e){let t=function(e){let t=H(e);return E(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function a(e){return O(e,n)}let{ProjectivePoint:o,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:x}=function(e){let t=function(e){let t=H(e);E(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{let i=t.toAffine();return b(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){let{a:n,b:i}=t,s=r.sqr(e),a=r.mul(s,e);return r.add(r.add(a,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw Error("bad generator point: equation left != right");function a(e){return"bigint"==typeof e&&q<e&&e<t.n}function o(e){if(!a(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r;let{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:s,n:a}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=c(e)),"string"!=typeof e||!n.includes(e.length))throw Error("Invalid key");e=e.padStart(2*i,"0")}try{r="bigint"==typeof e?e:h(m("private key",e,i))}catch(t){throw Error(`private key must be ${i} bytes, hex or bigint, not ${typeof e}`)}return s&&(r=O(r,a)),o(r),r}let u=new Map;function d(e){if(!(e instanceof f))throw Error("ProjectivePoint expected")}class f{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof f)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?f.ZERO:new f(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(f.fromAffine)}static fromHex(e){let t=f.fromAffine(i(m("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,u.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw Error("bad point: x or y not FE");let i=r.sqr(n),a=s(e);if(!r.eql(i,a))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){d(e);let{px:t,py:n,pz:i}=this,{px:s,py:a,pz:o}=e,l=r.eql(r.mul(t,o),r.mul(s,i)),c=r.eql(r.mul(n,o),r.mul(a,i));return l&&c}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,W),{px:s,py:a,pz:o}=this,l=r.ZERO,c=r.ZERO,u=r.ZERO,d=r.mul(s,s),h=r.mul(a,a),p=r.mul(o,o),g=r.mul(s,a);return g=r.add(g,g),u=r.mul(s,o),u=r.add(u,u),l=r.mul(e,u),c=r.mul(i,p),c=r.add(l,c),l=r.sub(h,c),c=r.add(h,c),c=r.mul(l,c),l=r.mul(g,l),u=r.mul(i,u),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,g),c=r.add(c,d),p=r.mul(a,o),p=r.add(p,p),d=r.mul(p,g),l=r.sub(l,d),u=r.mul(p,h),u=r.add(u,u),new f(l,c,u=r.add(u,u))}add(e){d(e);let{px:n,py:i,pz:s}=this,{px:a,py:o,pz:l}=e,c=r.ZERO,u=r.ZERO,h=r.ZERO,p=t.a,g=r.mul(t.b,W),m=r.mul(n,a),b=r.mul(i,o),y=r.mul(s,l),x=r.add(n,i),w=r.add(a,o);x=r.mul(x,w),w=r.add(m,b),x=r.sub(x,w),w=r.add(n,s);let v=r.add(a,l);return w=r.mul(w,v),v=r.add(m,y),w=r.sub(w,v),v=r.add(i,s),c=r.add(o,l),v=r.mul(v,c),c=r.add(b,y),v=r.sub(v,c),h=r.mul(p,w),c=r.mul(g,y),h=r.add(c,h),c=r.sub(b,h),h=r.add(b,h),u=r.mul(c,h),b=r.add(m,m),b=r.add(b,m),y=r.mul(p,y),w=r.mul(g,w),b=r.add(b,y),y=r.sub(m,y),y=r.mul(p,y),w=r.add(w,y),m=r.mul(b,w),u=r.add(u,m),m=r.mul(v,w),c=r.mul(x,c),c=r.sub(c,m),m=r.mul(x,b),h=r.mul(v,h),new f(c,u,h=r.add(h,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return g.wNAFCached(this,u,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(f.fromAffine)})}multiplyUnsafe(e){let n=f.ZERO;if(e===q)return n;if(o(e),e===K)return this;let{endo:i}=t;if(!i)return g.unsafeLadder(this,e);let{k1neg:s,k1:a,k2neg:l,k2:c}=i.splitScalar(e),u=n,d=n,h=this;for(;a>q||c>q;)a&K&&(u=u.add(h)),c&K&&(d=d.add(h)),h=h.double(),a>>=K,c>>=K;return s&&(u=u.negate()),l&&(d=d.negate()),d=new f(r.mul(d.px,i.beta),d.py,d.pz),u.add(d)}multiply(e){let n,i;o(e);let{endo:s}=t;if(s){let{k1neg:t,k1:a,k2neg:o,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(a),{p:d,f:h}=this.wNAF(l);c=g.constTimeNegate(t,c),d=g.constTimeNegate(o,d),d=new f(r.mul(d.px,s.beta),d.py,d.pz),n=c.add(d),i=u.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,i=r}return f.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=f.BASE,i=(e,t)=>t!==q&&t!==K&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){let{px:t,py:n,pz:i}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(i));let a=r.mul(t,e),o=r.mul(n,e),l=r.mul(i,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:a,y:o}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===K)return!0;if(r)return r(f,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===K?this:r?r(f,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(f,this,e)}toHex(e=!0){return c(this.toRawBytes(e))}}f.BASE=new f(t.Gx,t.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);let p=t.nBitLength,g=function(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>j;)r&z&&(n=n.add(i)),i=i.double(),r>>=z;return n},precomputeWindow(e,t){let{windows:r,windowSize:i}=n(t),s=[],a=e,o=a;for(let e=0;e<r;e++){o=a,s.push(o);for(let e=1;e<i;e++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(t,i,s){let{windows:a,windowSize:o}=n(t),l=e.ZERO,c=e.BASE,u=BigInt(2**t-1),d=2**t,h=BigInt(t);for(let e=0;e<a;e++){let t=e*o,n=Number(s&u);s>>=h,n>o&&(n-=d,s+=z);let a=t+Math.abs(n)-1,f=e%2!=0,p=n<0;0===n?c=c.add(r(f,i[t])):l=l.add(r(p,i[a]))}return{p:l,f:c}},wNAFCached(e,t,r,n){let i=e._WINDOW_SIZE||1,s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,n(s))),this.wNAF(i,s,r)}}}(f,t.endo?Math.ceil(p/2):p);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:a}}({...t,toBytes(e,t,n){let i=t.toAffine(),s=r.toBytes(i.x),a=b;return n?a(Uint8Array.from([t.hasEvenY()?2:3]),s):a(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){let t=e.length,n=e[0],a=e.subarray(1);if(t===i&&(2===n||3===n)){let e=h(a);if(!(q<e&&e<r.ORDER))throw Error("Point is not on curve");let t=u(e),i=r.sqrt(t);return(1&n)==1!=((i&K)===K)&&(i=r.neg(i)),{x:e,y:i}}if(t===s&&4===n)return{x:r.fromBytes(a.subarray(0,r.BYTES)),y:r.fromBytes(a.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),w=e=>c(p(e,t.nByteLength)),A=(e,t,r)=>h(e.slice(t,r));class k{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new k(A(e=m("compactSignature",e,2*r),0,r),A(e,r,2*r))}static fromDER(e){let{r:t,s:r}=V.toSig(m("DER",e));return new k(t,r)}assertValidity(){if(!x(this.r))throw Error("r must be 0 < r < CURVE.n");if(!x(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new k(this.r,this.s,e)}recoverPublicKey(e){let{r:i,s,recovery:l}=this,c=T(m("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?i+t.n:i;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let d=(1&l)==0?"02":"03",h=o.fromHex(d+w(u)),f=N(u,n),p=a(-c*f),g=a(s*f),b=o.BASE.multiplyAndAddUnsafe(h,p,g);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>n>>K}normalizeS(){return this.hasHighS()?new k(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return d(this.toDERHex())}toDERHex(){return V.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return d(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}function S(e){let t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof o}let I=t.bits2int||function(e){let r=h(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},T=t.bits2int_modN||function(e){return a(I(e))},_=y(t.nBitLength);function C(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(q<=e&&e<_))throw Error(`bigint expected < 2^${t.nBitLength}`);return p(e,t.nByteLength)}let R={lowS:t.lowS,prehash:!1},M={lowS:t.lowS,prehash:!1};return o.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return o.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(S(e))throw Error("first arg must be private key");if(!S(t))throw Error("second arg must be public key");return o.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,i,s=R){let{seed:c,k2sig:u}=function(e,i,s=R){if(["recovered","canonical"].some(e=>e in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:u}=t,{lowS:d,prehash:h,extraEntropy:f}=s;null==d&&(d=!0),e=m("msgHash",e),h&&(e=m("prehashed msgHash",c(e)));let p=T(e),g=l(i),y=[C(g),C(p)];if(null!=f){let e=!0===f?u(r.BYTES):f;y.push(m("extraEntropy",e))}return{seed:b(...y),k2sig:function(e){let t=I(e);if(!x(t))return;let r=N(t,n),i=o.BASE.multiply(t).toAffine(),s=a(i.x);if(s===q)return;let l=a(r*a(p+s*g));if(l===q)return;let c=2*(i.x!==s)|Number(i.y&K),u=l;if(d&&l>n>>K){var h;u=(h=l)>n>>K?a(-h):h,c^=1}return new k(s,u,c)}}}(e,i,s);return v(t.hash.outputLen,t.nByteLength,t.hmac)(c,u)},verify:function(e,r,i,s=M){let l,c;if(r=m("msgHash",r),i=m("publicKey",i),"strict"in s)throw Error("options.strict was renamed to lowS");let{lowS:u,prehash:d}=s;try{if("string"==typeof e||e instanceof Uint8Array)try{c=k.fromDER(e)}catch(t){if(!(t instanceof V.Err))throw t;c=k.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:r}=e;c=new k(t,r)}else throw Error("PARSE");l=o.fromHex(i)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&c.hasHighS())return!1;d&&(r=t.hash(r));let{r:h,s:f}=c,p=T(r),g=N(f,n),b=a(p*g),y=a(h*g),x=o.BASE.multiplyAndAddUnsafe(l,b,y)?.toAffine();return!!x&&a(x.x)===h},ProjectivePoint:o,Signature:k,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=L(t.n);return function(e,t,r=!1){let n=e.length,i=D(t),s=L(t);if(n<16||n<s||n>1024)throw Error(`expected ${s}-1024 bytes of input, got ${n}`);let a=O(r?h(e):f(e),t-P)+P;return r?g(a,i):p(a,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=o.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...e,hash:t,hmac:(e,...r)=>(0,U.w)(t,e,(0,F.Id)(...r)),randomBytes:F.po});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:ee,n:Z,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-J*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),s=X(t*e,Z),a=X(-r*e,Z),o=O(e-s*t-a*n,Z),l=O(-s*r-a*t,Z),c=o>i,u=l>i;if(c&&(o=Z-o),u&&(l=Z-l),o>i||l>i)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:o,k2neg:u,k2:l}}}},i.s),er=BigInt(0),en={},ei=e=>e.toRawBytes(!0).slice(1),es=e=>mod(e,Z),ea=et.ProjectivePoint;var eo=r(9982),el=r(8121),ec=r(1456),eu=r(7672);class ed{#i;constructor(e){(0,eo.MR)(32===(0,el.pO)(e),"invalid private key","privateKey","[REDACTED]"),this.#i=(0,el.c$)(e)}get privateKey(){return this.#i}get publicKey(){return ed.computePublicKey(this.#i)}get compressedPublicKey(){return ed.computePublicKey(this.#i,!0)}sign(e){(0,eo.MR)(32===(0,el.pO)(e),"invalid digest length","digest",e);let t=et.sign((0,el.Lm)(e),(0,el.Lm)(this.#i),{lowS:!0});return eu.t.from({r:(0,ec.up)(t.r,32),s:(0,ec.up)(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=ed.computePublicKey(e);return(0,el.c$)(et.getSharedSecret((0,el.Lm)(this.#i),(0,el.q5)(t),!1))}static computePublicKey(e,t){let r=(0,el.q5)(e,"key");if(32===r.length){let e=et.getPublicKey(r,!!t);return(0,el.c$)(e)}if(64===r.length){let e=new Uint8Array(65);e[0]=4,e.set(r,1),r=e}let n=et.ProjectivePoint.fromHex(r);return(0,el.c$)(n.toRawBytes(t))}static recoverPublicKey(e,t){(0,eo.MR)(32===(0,el.pO)(e),"invalid digest length","digest",e);let r=eu.t.from(t),n=et.Signature.fromCompact((0,el.Lm)((0,el.xW)([r.r,r.s]))),i=(n=n.addRecoveryBit(r.yParity)).recoverPublicKey((0,el.Lm)(e));return(0,eo.MR)(null!=i,"invalid signature for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,r){let n=et.ProjectivePoint.fromHex(ed.computePublicKey(e).substring(2)),i=et.ProjectivePoint.fromHex(ed.computePublicKey(t).substring(2));return"0x"+n.add(i).toHex(!!r)}}},6833:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha384=t.sha512_256=t.sha512_224=t.sha512=t.SHA512=void 0;let n=r(1576),i=r(1113),s=r(5636),[a,o]=i.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),l=new Uint32Array(80),c=new Uint32Array(80);class u extends n.SHA2{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:l,El:c,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,g]}set(e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)l[r]=e.getUint32(t),c[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|l[e-15],r=0|c[e-15],n=i.default.rotrSH(t,r,1)^i.default.rotrSH(t,r,8)^i.default.shrSH(t,r,7),s=i.default.rotrSL(t,r,1)^i.default.rotrSL(t,r,8)^i.default.shrSL(t,r,7),a=0|l[e-2],o=0|c[e-2],u=i.default.rotrSH(a,o,19)^i.default.rotrBH(a,o,61)^i.default.shrSH(a,o,6),d=i.default.rotrSL(a,o,19)^i.default.rotrBL(a,o,61)^i.default.shrSL(a,o,6),h=i.default.add4L(s,d,c[e-7],c[e-16]),f=i.default.add4H(h,n,u,l[e-7],l[e-16]);l[e]=0|f,c[e]=0|h}let{Ah:r,Al:n,Bh:s,Bl:u,Ch:d,Cl:h,Dh:f,Dl:p,Eh:g,El:m,Fh:b,Fl:y,Gh:x,Gl:w,Hh:v,Hl:A}=this;for(let e=0;e<80;e++){let t=i.default.rotrSH(g,m,14)^i.default.rotrSH(g,m,18)^i.default.rotrBH(g,m,41),E=i.default.rotrSL(g,m,14)^i.default.rotrSL(g,m,18)^i.default.rotrBL(g,m,41),k=g&b^~g&x,P=m&y^~m&w,S=i.default.add5L(A,E,P,o[e],c[e]),I=i.default.add5H(S,v,t,k,a[e],l[e]),T=0|S,_=i.default.rotrSH(r,n,28)^i.default.rotrBH(r,n,34)^i.default.rotrBH(r,n,39),C=i.default.rotrSL(r,n,28)^i.default.rotrBL(r,n,34)^i.default.rotrBL(r,n,39),O=r&s^r&d^s&d,R=n&u^n&h^u&h;v=0|x,A=0|w,x=0|b,w=0|y,b=0|g,y=0|m,({h:g,l:m}=i.default.add(0|f,0|p,0|I,0|T)),f=0|d,p=0|h,d=0|s,h=0|u,s=0|r,u=0|n;let N=i.default.add3L(T,C,R);r=i.default.add3H(N,I,_,O),n=0|N}({h:r,l:n}=i.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:s,l:u}=i.default.add(0|this.Bh,0|this.Bl,0|s,0|u)),({h:d,l:h}=i.default.add(0|this.Ch,0|this.Cl,0|d,0|h)),({h:f,l:p}=i.default.add(0|this.Dh,0|this.Dl,0|f,0|p)),({h:g,l:m}=i.default.add(0|this.Eh,0|this.El,0|g,0|m)),({h:b,l:y}=i.default.add(0|this.Fh,0|this.Fl,0|b,0|y)),({h:x,l:w}=i.default.add(0|this.Gh,0|this.Gl,0|x,0|w)),({h:v,l:A}=i.default.add(0|this.Hh,0|this.Hl,0|v,0|A)),this.set(r,n,s,u,d,h,f,p,g,m,b,y,x,w,v,A)}roundClean(){l.fill(0),c.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}t.SHA512=u;class d extends u{constructor(){super(),this.Ah=-0x73c2c838,this.Al=0x19544da2,this.Bh=0x73e19966,this.Bl=-0x76232b2a,this.Ch=0x1dfab7ae,this.Cl=0x32ff9c82,this.Dh=0x679dd514,this.Dl=0x582f9fcf,this.Eh=0xf6d2b69,this.El=0x7bd44da8,this.Fh=0x77e36f73,this.Fl=0x4c48942,this.Gh=0x3f9d85a8,this.Gl=0x6a1d36c8,this.Hh=0x1112e6ad,this.Hl=-0x6e296d5f,this.outputLen=28}}class h extends u{constructor(){super(),this.Ah=0x22312194,this.Al=-0x3d408d4,this.Bh=-0x60aaa05d,this.Bl=-0x37b39b3e,this.Ch=0x2393b86b,this.Cl=0x6f53b151,this.Dh=-0x69c788e7,this.Dl=0x5940eabd,this.Eh=-0x69d7c11e,this.El=-0x5771001d,this.Fh=-0x41a1e1db,this.Fl=0x53863992,this.Gh=0x2b0199fc,this.Gl=0x2c85b8aa,this.Hh=0xeb72ddc,this.Hl=-0x7e3ad35e,this.outputLen=32}}class f extends u{constructor(){super(),this.Ah=-0x344462a3,this.Al=-0x3efa6128,this.Bh=0x629a292a,this.Bl=0x367cd507,this.Ch=-0x6ea6fea6,this.Cl=0x3070dd17,this.Dh=0x152fecd8,this.Dl=-0x8f1a6c7,this.Eh=0x67332667,this.El=-4191439,this.Fh=-0x714bb579,this.Fl=0x68581511,this.Gh=-0x24f3d1f3,this.Gl=0x64f98fa7,this.Hh=0x47b5481d,this.Hl=-0x4105b05c,this.outputLen=48}}t.sha512=(0,s.wrapConstructor)(()=>new u),t.sha512_224=(0,s.wrapConstructor)(()=>new d),t.sha512_256=(0,s.wrapConstructor)(()=>new h),t.sha384=(0,s.wrapConstructor)(()=>new f)},6844:(e,t,r)=>{"use strict";r.d(t,{V:()=>c});var n=r(560),i=r(1138),s=r(2830);class a extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"}class o extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"}class l extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"}function c(e,t={}){let r=(0,n.p)(e,t);null!=t.maxDataLength&&null==t.maxLengthLength&&(t.maxLengthLength=i.OY(t.maxDataLength));let u=t?.lengthDecoder??i.D4,d=t?.lengthEncoder??i.lF;return{read:async e=>{let n=-1,i=new s.I;for(;;){i.append(await r.read({...e,bytes:1}));try{n=u(i)}catch(e){if(e instanceof RangeError)continue;throw e}if(n<0)throw new a("Invalid message length");if(t?.maxLengthLength!=null&&i.byteLength>t.maxLengthLength)throw new l("message length length too long");if(n>-1)break}if(t?.maxDataLength!=null&&n>t.maxDataLength)throw new o("message length too long");return r.read({...e,bytes:n})},write:async(e,t)=>{await r.write(new s.I(d(e.byteLength),e),t)},writeV:async(e,t)=>{let n=new s.I(...e.flatMap(e=>[d(e.byteLength),e]));await r.write(n,t)},unwrap:()=>r.unwrap()}}},6858:(e,t,r)=>{"use strict";r.d(t,{c:()=>eu});var n,i,s,a=r(8981),o=r(3204),l=r(9827),c=r(1680),u=r(3809),d=r(2706),h=r(6676),f=r(1138),p=r(6038);!function(e){var t,r;let n,i;(t=e.Flag||(e.Flag={})).FIN="FIN",t.STOP_SENDING="STOP_SENDING",t.RESET="RESET",t.FIN_ACK="FIN_ACK",(r=n||(n={}))[r.FIN=0]="FIN",r[r.STOP_SENDING=1]="STOP_SENDING",r[r.RESET=2]="RESET",r[r.FIN_ACK=3]="FIN_ACK",(e.Flag||(e.Flag={})).codec=()=>(0,p.eG)(n),e.codec=()=>(null==i&&(i=(0,p.iU)((t,r,n={})=>{!1!==n.lengthDelimited&&r.fork(),null!=t.flag&&(r.uint32(8),e.Flag.codec().encode(t.flag,r)),null!=t.message&&(r.uint32(18),r.bytes(t.message)),!1!==n.lengthDelimited&&r.ldelim()},(t,r,n={})=>{let i={},s=null==r?t.len:t.pos+r;for(;t.pos<s;){let r=t.uint32();switch(r>>>3){case 1:i.flag=e.Flag.codec().decode(t);break;case 2:i.message=t.bytes();break;default:t.skipType(7&r)}}return i})),i),e.encode=t=>(0,p.mH)(t,e.codec()),e.decode=(t,r)=>(0,p.Y8)(t,e.codec(),r)}(i||(i={}));let g=["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478","stun:stun.cloudflare.com:3478","stun:stun.services.mozilla.com:3478"];Array.from("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890");let m=function(e=16384){let t=(0,f.OY)(e-(0,f.OY)(e)),r=1+(0,f.OY)(Object.keys(i.Flag).length-1),n=(0,f.OY)(e-t-r-1);return t+r+1+n}(),b="/webrtc",y="/webrtc-signaling/0.0.1";var x=r(9742),w=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},v=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},A=function(e){this.version=e,this.type="node",this.name="node",this.os=x.platform},E=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},k=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},P=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},S=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,I=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],T=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]],_=r(9608),C=r(6047);let O="undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new P:"undefined"!=typeof navigator?function(e){var t,r=""!==(t=e)&&I.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1);if(!r)return null;var n=r[0],i=r[1];if("searchbot"===n)return new k;var s=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);s?s.length<3&&(s=w(w([],s,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-s.length),!0)):s=[];var a=s.join("."),o=function(e){for(var t=0,r=T.length;t<r;t++){var n=T[t],i=n[0];if(n[1].exec(e))return i}return null}(e),l=S.exec(e);return l&&l[1]?new E(n,a,o,l[1]):new v(n,a,o)}(navigator.userAgent):void 0!==x&&x.version?new A(x.version.slice(1)):null,R=null!=O&&"firefox"===O.name,N=async function*(){},M=async e=>{};async function B(e){return"function"==typeof(e=e??{})&&(e=await e()),e.iceServers=e.iceServers??g.map(e=>({urls:[e]})),e}class D{log;peerConnection;remoteAddr;timeline;metrics;source=N();sink=M;constructor(e,t){this.log=e.logger.forComponent("libp2p:webrtc:maconn"),this.remoteAddr=t.remoteAddr,this.timeline=t.timeline,this.peerConnection=t.peerConnection;let r=this.peerConnection,n=r.connectionState;this.peerConnection.onconnectionstatechange=()=>{this.log.trace("peer connection state change",r.connectionState,"initial state",n),("disconnected"===r.connectionState||"failed"===r.connectionState||"closed"===r.connectionState)&&(this.timeline.close=Date.now())}}async close(e){this.log.trace("closing connection"),this.peerConnection.close(),this.timeline.close=Date.now(),this.metrics?.increment({close:!0})}abort(e){this.log.error("closing connection due to error",e),this.peerConnection.close(),this.timeline.close=Date.now(),this.metrics?.increment({abort:!0})}}var L=r(7850),U=r(8934),F=r(4195),j=r(1643),z=r(8965),H=r(9985),G=r(2830);class $ extends L.l{channel;incomingData;maxBufferedAmount;bufferedAmountLowEventTimeout;maxMessageSize;receiveFinAck;finAckTimeout;openTimeout;closeController;constructor(e){let t=e.onEnd;switch(e.onEnd=e=>{this.log.trace('readable and writeable ends closed with status "%s"',this.status),Promise.resolve(async()=>{if(null==this.timeline.abort&&null===this.timeline.reset)try{await (0,C.Ay)(this.receiveFinAck.promise,{milliseconds:this.finAckTimeout})}catch(e){this.log.error("error receiving FIN_ACK",e)}}).then(()=>{this.incomingData.end(),t?.(e)}).catch(e=>{this.log.error("error ending stream",e)}).finally(()=>{this.channel.close()})},super(e),this.channel=e.channel,this.channel.binaryType="arraybuffer",this.incomingData=(0,j.Ny)(),this.bufferedAmountLowEventTimeout=e.bufferedAmountLowEventTimeout??3e4,this.maxBufferedAmount=e.maxBufferedAmount??2097152,this.maxMessageSize=(e.maxMessageSize??16384)-m,this.receiveFinAck=(0,_.A)(),this.finAckTimeout=e.closeTimeout??5e3,this.openTimeout=e.openTimeout??5e3,this.closeController=new AbortController,this.channel.readyState){case"open":this.timeline.open=new Date().getTime();break;case"closed":case"closing":(void 0===this.timeline.close||0===this.timeline.close)&&(this.timeline.close=Date.now());break;case"connecting":break;default:throw this.log.error("unknown datachannel state %s",this.channel.readyState),new l.mw("Unknown datachannel state")}this.channel.onopen=e=>{this.timeline.open=new Date().getTime()},this.channel.onclose=e=>{this.log.trace("received onclose event"),this.closeController.abort(),this.receiveFinAck.resolve(),this.close().catch(e=>{this.log.error("error closing stream after channel closed",e)})},this.channel.onerror=e=>{this.log.trace("received onerror event"),this.closeController.abort();let t=e.error;this.abort(t)},this.channel.onmessage=async e=>{let{data:t}=e;null!==t&&0!==t.byteLength&&this.incomingData.push(new Uint8Array(t,0,t.byteLength))};let r=this;Promise.resolve().then(async()=>{for await(let e of F.D(this.incomingData)){let t=r.processIncomingProtobuf(e);null!=t&&r.sourcePush(new G.I(t))}}).catch(e=>{this.log.error("error processing incoming data channel messages",e)})}sendNewStream(){}async _sendMessage(e,t=!0){if("closed"===this.channel.readyState||"closing"===this.channel.readyState)throw new l.mw(`Invalid datachannel state - ${this.channel.readyState}`);if("open"!==this.channel.readyState){let e=AbortSignal.timeout(this.openTimeout),t=(0,U.J)([this.closeController.signal,e]);try{this.log('channel state is "%s" and not "open", waiting for "open" event before sending data',this.channel.readyState),await (0,z.y)(this.channel,"open",t)}finally{t.clear()}this.log('channel state is now "%s", sending data',this.channel.readyState)}if(t&&this.channel.bufferedAmount>this.maxBufferedAmount){let e=AbortSignal.timeout(this.bufferedAmountLowEventTimeout),t=(0,U.J)([this.closeController.signal,e]);try{this.log('channel buffer is %d, wait for "bufferedamountlow" event',this.channel.bufferedAmount),await (0,z.y)(this.channel,"bufferedamountlow",t)}catch(t){if(e.aborted)throw new l.MU(`Timed out waiting for DataChannel buffer to clear after ${this.bufferedAmountLowEventTimeout}ms`);throw t}finally{t.clear()}}try{this.log.trace('sending message, channel state "%s"',this.channel.readyState),this.channel.send(e.subarray())}catch(e){this.log.error("error while sending message",e)}}async sendData(e){let t=e.byteLength;for(e=e.sublist();e.byteLength>0;){let r=Math.min(e.byteLength,this.maxMessageSize),n=e.subarray(0,r),s=i.encode({message:n}),a=F.l.single(s);this.log.trace("sending %d/%d bytes on channel",n.byteLength,t),await this._sendMessage(a),e.consume(r)}this.log.trace('finished sending data, channel state "%s"',this.channel.readyState)}async sendReset(){try{await this._sendFlag(i.Flag.RESET)}catch(e){this.log.error("failed to send reset - %e",e)}finally{this.channel.close()}}async sendCloseWrite(e){if("open"!==this.channel.readyState){this.receiveFinAck.resolve();return}if(await this._sendFlag(i.Flag.FIN)){this.log.trace("awaiting FIN_ACK");try{await (0,H.W)(this.receiveFinAck.promise,e?.signal,{errorMessage:"sending close-write was aborted before FIN_ACK was received",errorName:"FinAckNotReceivedError"})}catch(e){this.log.error("failed to await FIN_ACK",e)}}else this.log.trace("sending FIN failed, not awaiting FIN_ACK");this.receiveFinAck.resolve()}async sendCloseRead(){"open"===this.channel.readyState&&await this._sendFlag(i.Flag.STOP_SENDING)}processIncomingProtobuf(e){let t=i.decode(e);if(void 0!==t.flag&&(this.log.trace('incoming flag %s, write status "%s", read status "%s"',t.flag,this.writeStatus,this.readStatus),t.flag===i.Flag.FIN&&(this.remoteCloseWrite(),this.log.trace("sending FIN_ACK"),this._sendFlag(i.Flag.FIN_ACK).catch(e=>{this.log.error("error sending FIN_ACK immediately",e)})),t.flag===i.Flag.RESET&&this.reset(),t.flag===i.Flag.STOP_SENDING&&this.remoteCloseRead(),t.flag===i.Flag.FIN_ACK&&(this.log.trace("received FIN_ACK"),this.receiveFinAck.resolve())),"ready"===this.readStatus)return t.message}async _sendFlag(e){if("open"!==this.channel.readyState)return this.log.trace('not sending flag %s because channel is "%s" and not "open"',e.toString(),this.channel.readyState),!1;this.log.trace("sending flag %s",e.toString());let t=i.encode({flag:e}),r=F.l.single(t);try{return await this._sendMessage(r,!1),!0}catch(t){this.log.error("could not send flag %s - %e",e.toString(),t)}return!1}}function V(e){let{channel:t,direction:r,handshake:n}=e;return new $({id:`${t.id}`,log:e.logger.forComponent(`libp2p:webrtc:stream:${!0===n?"handshake":r}:${t.id}`),...e})}class q{protocol;peerConnection;bufferedStreams=[];metrics;dataChannelOptions;components;log;constructor(e,t){this.components=e,this.peerConnection=t.peerConnection,this.metrics=t.metrics,this.protocol=t.protocol??b,this.dataChannelOptions=t.dataChannelOptions??{},this.log=e.logger.forComponent("libp2p:webrtc:muxerfactory"),this.peerConnection.ondatachannel=({channel:t})=>{if(this.log.trace('incoming early datachannel with channel id %d and label "%s"',t.id),"init"===t.label){this.log.trace("closing early init channel"),t.close();return}let r={},n=V({channel:t,direction:"inbound",onEnd:e=>{r.onEnd(e)},logger:e.logger,...this.dataChannelOptions});r.stream=n,r.channel=t,r.onEnd=()=>{this.bufferedStreams=this.bufferedStreams.filter(e=>e.stream.id!==n.id)},this.bufferedStreams.push(r)}}createStreamMuxer(e){return new K(this.components,{...e,peerConnection:this.peerConnection,dataChannelOptions:this.dataChannelOptions,metrics:this.metrics,streams:this.bufferedStreams,protocol:this.protocol})}}class K{init;streams;protocol;log;peerConnection;dataChannelOptions;metrics;logger;constructor(e,t){this.init=t,this.log=e.logger.forComponent("libp2p:webrtc:muxer"),this.logger=e.logger,this.streams=t.streams.map(e=>e.stream),this.peerConnection=t.peerConnection,this.protocol=t.protocol??b,this.metrics=t.metrics,this.dataChannelOptions=t.dataChannelOptions??{},this.peerConnection.ondatachannel=({channel:e})=>{if(this.log.trace("incoming datachannel with channel id %d",e.id),"init"===e.label){this.log.trace("closing init channel"),e.close();return}let r=e.id,n=V({channel:e,direction:"inbound",onEnd:()=>{this.#ri(n,e),this.log("incoming channel %s ended",r)},logger:this.logger,...this.dataChannelOptions});this.streams.push(n),this.metrics?.increment({incoming_stream:!0}),t?.onIncomingStream?.(n)},this.init.streams.length>0&&queueMicrotask(()=>{this.init.streams.forEach(e=>{e.onEnd=()=>{this.log("incoming early channel %s ended with state %s",e.channel.id,e.channel.readyState),this.#ri(e.stream,e.channel)},this.metrics?.increment({incoming_stream:!0}),this.init?.onIncomingStream?.(e.stream)})})}#ri(e,t){this.log.trace("stream %s %s %s onEnd",e.direction,e.id,e.protocol),function(e,t,r=3e4,n){"open"===e.readyState&&Promise.resolve().then(async()=>{if(e.bufferedAmount>0){n.log("%s drain channel with %d buffered bytes",t,e.bufferedAmount);let i=(0,_.A)(),s=!1;e.bufferedAmountLowThreshold=0;let a=()=>{s||(n.log("%s drain channel closed before drain",t),i.resolve())};e.addEventListener("close",a,{once:!0}),e.addEventListener("bufferedamountlow",()=>{s=!0,e.removeEventListener("close",a),i.resolve()}),await (0,C.Ay)(i.promise,{milliseconds:r})}}).then(async()=>{"open"===e.readyState&&e.close()}).catch(e=>{n.log.error("error closing outbound stream",e)})}(t,`${e.direction} ${e.id} ${e.protocol}`,this.dataChannelOptions.drainTimeout,{log:this.log}),this.streams=this.streams.filter(t=>t.id!==e.id),this.metrics?.increment({stream_end:!0}),this.init?.onStreamEnd?.(e)}async close(e){try{await Promise.all(this.streams.map(async t=>t.close(e)))}catch(e){this.abort(e)}}abort(e){for(let t of this.streams)t.abort(e)}source=N();sink=M;newStream(){let e=this.peerConnection.createDataChannel(""),t=e.id;this.log.trace("opened outgoing datachannel with channel id %s",t);let r=V({channel:e,direction:"outbound",onEnd:()=>{this.#ri(r,e),this.log("outgoing channel %s ended",t)},logger:this.logger,...this.dataChannelOptions});return this.streams.push(r),this.metrics?.increment({outgoing_stream:!0}),r}}let W=globalThis.RTCPeerConnection,Q=globalThis.RTCSessionDescription,Z=globalThis.RTCIceCandidate;var J=r(7255),Y=r(608);class X extends Error{constructor(e){super(`WebRTC transport error: ${e}`),this.name="WebRTCTransportError"}}class ee extends X{constructor(e="SDP handshake failed"){super(e),this.name="SDPHandshakeFailedError"}}!function(e){var t,r;let n,i;(t=e.Type||(e.Type={})).SDP_OFFER="SDP_OFFER",t.SDP_ANSWER="SDP_ANSWER",t.ICE_CANDIDATE="ICE_CANDIDATE",(r=n||(n={}))[r.SDP_OFFER=0]="SDP_OFFER",r[r.SDP_ANSWER=1]="SDP_ANSWER",r[r.ICE_CANDIDATE=2]="ICE_CANDIDATE",(e.Type||(e.Type={})).codec=()=>(0,p.eG)(n),e.codec=()=>(null==i&&(i=(0,p.iU)((t,r,n={})=>{!1!==n.lengthDelimited&&r.fork(),null!=t.type&&(r.uint32(8),e.Type.codec().encode(t.type,r)),null!=t.data&&(r.uint32(18),r.string(t.data)),!1!==n.lengthDelimited&&r.ldelim()},(t,r,n={})=>{let i={},s=null==r?t.len:t.pos+r;for(;t.pos<s;){let r=t.uint32();switch(r>>>3){case 1:i.type=e.Type.codec().decode(t);break;case 2:i.data=t.string();break;default:t.skipType(7&r)}}return i})),i),e.encode=t=>(0,p.mH)(t,e.codec()),e.decode=(t,r)=>(0,p.Y8)(t,e.codec(),r)}(s||(s={}));let et=async(e,t,r)=>{try{let n=(0,_.A)();for(function(e,t){e[R?"oniceconnectionstatechange":"onconnectionstatechange"]=r=>{switch(er(e)){case"connected":t.resolve();break;case"failed":case"disconnected":case"closed":t.reject(new l._r("RTCPeerConnection was closed"))}}}(e,n);;){let i=await Promise.race([n.promise,t.read({signal:r.signal}).catch(()=>{})]);if(null==i){r.signal?.throwIfAborted();break}if(i.type!==s.Type.ICE_CANDIDATE)throw new l.L("ICE candidate message expected");let a=JSON.parse(i.data??"null");if(""===a||null===a){r.onProgress?.(new Y.j("webrtc:end-of-ice-candidates")),r.log.trace("end-of-candidates received");continue}let o=new Z(a);r.log.trace("%s received new ICE candidate %o",r.direction,a);try{r.onProgress?.(new Y.j("webrtc:add-ice-candidate",o.candidate)),await e.addIceCandidate(o)}catch(e){r.log.error("%s bad candidate received",r.direction,a,e)}}}catch(t){if(r.log.error("%s error parsing ICE candidate",r.direction,t),r.signal?.aborted===!0&&"connected"!==er(e))throw t}};function er(e){return R?e.iceConnectionState:e.connectionState}async function en({rtcConfiguration:e,dataChannel:t,signal:r,metrics:n,multiaddr:i,connectionManager:a,transportManager:o,log:d,logger:h,onProgress:f}){let p;let{baseAddr:g}=function(e){let t=e.toString().split("/webrtc/");if(2!==t.length)throw new l.gG("webrtc protocol was not present in multiaddr");if(!t[0].includes("/p2p-circuit"))throw new l.gG("p2p-circuit protocol was not present in multiaddr");let r=(0,u.HZ)(t[0]),n=(0,u.HZ)("/"+t[1]).getPeerId();if(null==n)throw new l.gG("destination peer id was missing");let i=r.protos().pop();if(void 0===i)throw new l.gG("invalid multiaddr");return"p2p"!==i.name&&(r=r.encapsulate(`/p2p/${n}`)),{baseAddr:r,peerId:(0,c.XL)(n)}}(i);n?.dialerEvents.increment({open:!0}),d.trace("dialing base address: %a",g);let m=g.getPeerId();if(null==m)throw new l.gG("Relay peer was missing");let b=a.getConnections((0,c.XL)(m)),x=!1;0===b.length?(f?.(new Y.j("webrtc:dial-relay")),p=await o.dial(g,{signal:r,onProgress:f}),x=!0):(f?.(new Y.j("webrtc:reuse-relay-connection")),p=b[0]);try{f?.(new Y.j("webrtc:open-signaling-stream"));let n=await p.newStream(y,{signal:r,runOnLimitedConnection:!0}),a=(0,J.z)(n).pb(s),o=new W(e),l=new q({logger:h},{peerConnection:o,dataChannelOptions:t});try{let e=o.createDataChannel("init");o.onicecandidate=({candidate:e})=>{let t=JSON.stringify(e?.toJSON()??null);d.trace("initiator sending ICE candidate %o",e),a.write({type:s.Type.ICE_CANDIDATE,data:t},{signal:r}).catch(e=>{d.error("error sending ICE candidate",e)})},o.onicecandidateerror=e=>{d.error("initiator ICE candidate error",e)};let t=await o.createOffer().catch(e=>{throw d.error("could not execute createOffer",e),new ee("Failed to set createOffer")});d.trace("initiator send SDP offer %s",t.sdp),f?.(new Y.j("webrtc:send-sdp-offer")),await a.write({type:s.Type.SDP_OFFER,data:t.sdp},{signal:r}),await o.setLocalDescription(t).catch(e=>{throw d.error("could not execute setLocalDescription",e),new ee("Failed to set localDescription")}),f?.(new Y.j("webrtc:read-sdp-answer")),d.trace("initiator read SDP answer");let c=await a.read({signal:r});if(c.type!==s.Type.SDP_ANSWER)throw new ee("Remote should send an SDP answer");d.trace("initiator received SDP answer %s",c.data);let u=new Q({type:"answer",sdp:c.data});return await o.setRemoteDescription(u).catch(e=>{throw d.error("could not execute setRemoteDescription",e),new ee("Failed to set remoteDescription")}),d.trace("initiator read candidates until connected"),f?.(new Y.j("webrtc:read-ice-candidates")),await et(o,a,{direction:"initiator",signal:r,log:d,onProgress:f}),d.trace("initiator connected, closing init channel"),e.close(),f?.(new Y.j("webrtc:close-signaling-stream")),d.trace("closing signaling channel"),await n.close({signal:r}),d.trace("initiator connected to remote address %s",i),{remoteAddress:i,peerConnection:o,muxerFactory:l}}catch(e){throw d.error("outgoing signaling error",e),o.close(),n.abort(e),e}finally{o.onicecandidate=null,o.onicecandidateerror=null}}finally{if(x)try{await p.close({signal:r})}catch(e){p.abort(e)}}}var ei=r(7243),es=r(9141);let ea=(0,ei.Sc)(d.VO.matchers[0],(0,ei.eu)("p2p-circuit"));class eo extends es.X{transportManager;shutdownController;events;constructor(e,t){super(),this.transportManager=e.transportManager,this.events=e.events,this.shutdownController=t.shutdownController,this.onTransportListening=this.onTransportListening.bind(this)}async listen(){this.events.addEventListener("transport:listening",this.onTransportListening)}onTransportListening(e){e.detail.getAddrs().filter(e=>ea.exactMatch(e)).map(e=>e.encapsulate("/webrtc")).length>0&&this.safeDispatchEvent("listening")}getAddrs(){return this.transportManager.getListeners().filter(e=>!(e instanceof eo)).map(e=>e.getAddrs().filter(e=>ea.exactMatch(e)).map(e=>e.encapsulate("/webrtc"))).flat()}updateAnnounceAddrs(){}async close(){this.events.removeEventListener("transport:listening",this.onTransportListening),this.shutdownController.abort(),queueMicrotask(()=>{this.safeDispatchEvent("close")})}}async function el({peerConnection:e,stream:t,signal:r,connection:n,log:i}){i.trace("new inbound signaling stream");let a=(0,J.z)(t).pb(s);try{e.onicecandidate=({candidate:e})=>{let t=JSON.stringify(e?.toJSON()??null);i.trace("recipient sending ICE candidate %s",t),a.write({type:s.Type.ICE_CANDIDATE,data:t},{signal:r}).catch(e=>{i.error("error sending ICE candidate",e)})},i.trace("recipient read SDP offer");let t=await a.read({signal:r});if(t.type!==s.Type.SDP_OFFER)throw new ee(`expected message type SDP_OFFER, received: ${t.type??"undefined"} `);i.trace("recipient received SDP offer %s",t.data);let n=new Q({type:"offer",sdp:t.data});await e.setRemoteDescription(n).catch(e=>{throw i.error("could not execute setRemoteDescription",e),new ee("Failed to set remoteDescription")});let o=await e.createAnswer().catch(e=>{throw i.error("could not execute createAnswer",e),new ee("Failed to create answer")});i.trace("recipient send SDP answer %s",o.sdp),await a.write({type:s.Type.SDP_ANSWER,data:o.sdp},{signal:r}),await e.setLocalDescription(o).catch(e=>{throw i.error("could not execute setLocalDescription",e),new ee("Failed to set localDescription")}),i.trace("recipient read candidates until connected"),await et(e,a,{direction:"recipient",signal:r,log:i})}catch(t){if("connected"!==er(e))throw i.error("error while handling signaling stream from peer %a",n.remoteAddr,t),e.close(),t;i("error while handling signaling stream from peer %a, ignoring as the RTCPeerConnection is already connected",n.remoteAddr,t)}let o=(0,u.HZ)(`/webrtc/p2p/${n.remoteAddr.getPeerId()}`);return i.trace("recipient connected to remote address %s",o),{remoteAddress:o}}class ec{components;init;log;_started=!1;metrics;shutdownController;constructor(e,t={}){this.components=e,this.init=t,this.log=e.logger.forComponent("libp2p:webrtc"),this.shutdownController=new AbortController,(0,h.k)(1/0,this.shutdownController.signal),null!=e.metrics&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_webrtc_dialer_events_total",{label:"event",help:"Total count of WebRTC dialer events by type"}),listenerEvents:e.metrics.registerCounterGroup("libp2p_webrtc_listener_events_total",{label:"event",help:"Total count of WebRTC listener events by type"})})}[a._J]=!0;[Symbol.toStringTag]="@libp2p/webrtc";[o.Ch]=["@libp2p/transport"];[o.VM]=["@libp2p/identify","@libp2p/circuit-relay-v2-transport"];isStarted(){return this._started}async start(){await this.components.registrar.handle(y,e=>{let t=this.components.upgrader.createInboundAbortSignal(this.shutdownController.signal);this._onProtocol(e,t).catch(t=>{this.log.error("failed to handle incoming connect from %p",e.connection.remotePeer,t)}).finally(()=>{t.clear()})},{runOnLimitedConnection:!0}),this._started=!0}async stop(){await this.components.registrar.unhandle(y),this._started=!1}createListener(e){return new eo(this.components,{shutdownController:this.shutdownController})}listenFilter(e){return e.filter(d.aM.exactMatch)}dialFilter(e){return this.listenFilter(e)}async dial(e,t){this.log.trace("dialing address: %a",e);let{remoteAddress:r,peerConnection:n,muxerFactory:i}=await en({rtcConfiguration:await B(this.init.rtcConfiguration),dataChannel:this.init.dataChannel,multiaddr:e,dataChannelOptions:this.init.dataChannel,signal:t.signal,connectionManager:this.components.connectionManager,transportManager:this.components.transportManager,log:this.log,logger:this.components.logger,onProgress:t.onProgress}),s=new D(this.components,{peerConnection:n,timeline:{open:Date.now()},remoteAddr:r,metrics:this.metrics?.dialerEvents}),a=await t.upgrader.upgradeOutbound(s,{skipProtection:!0,skipEncryption:!0,muxerFactory:i,onProgress:t.onProgress,signal:t.signal});return this._closeOnShutdown(n,s),a}async _onProtocol({connection:e,stream:t},r){let n=new W(await B(this.init.rtcConfiguration)),i=new q(this.components,{peerConnection:n,dataChannelOptions:this.init.dataChannel});try{let{remoteAddress:s}=await el({peerConnection:n,connection:e,stream:t,signal:r,log:this.log});await t.close({signal:r});let a=new D(this.components,{peerConnection:n,timeline:{open:new Date().getTime()},remoteAddr:s,metrics:this.metrics?.listenerEvents});await this.components.upgrader.upgradeInbound(a,{skipEncryption:!0,skipProtection:!0,muxerFactory:i,signal:r}),this._closeOnShutdown(n,a)}catch(e){throw this.log.error("incoming signaling error",e),n.close(),t.abort(e),e}}_closeOnShutdown(e,t){let r=()=>{t.close().catch(e=>{this.log.error("could not close WebRTCMultiaddrConnection",e)})};this.shutdownController.signal.addEventListener("abort",r),e.addEventListener("close",()=>{this.shutdownController.signal.removeEventListener("abort",r)})}}function eu(e){return t=>new ec(t,e)}},6870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lock=t.Signature=t.SigningKey=t.scryptSync=t.scrypt=t.pbkdf2=t.sha512=t.sha256=t.ripemd160=t.keccak256=t.randomBytes=t.computeHmac=void 0;let n=r(2677);Object.defineProperty(t,"computeHmac",{enumerable:!0,get:function(){return n.computeHmac}});let i=r(8360);Object.defineProperty(t,"keccak256",{enumerable:!0,get:function(){return i.keccak256}});let s=r(7118);Object.defineProperty(t,"ripemd160",{enumerable:!0,get:function(){return s.ripemd160}});let a=r(8623);Object.defineProperty(t,"pbkdf2",{enumerable:!0,get:function(){return a.pbkdf2}});let o=r(6633);Object.defineProperty(t,"randomBytes",{enumerable:!0,get:function(){return o.randomBytes}});let l=r(5405);Object.defineProperty(t,"scrypt",{enumerable:!0,get:function(){return l.scrypt}}),Object.defineProperty(t,"scryptSync",{enumerable:!0,get:function(){return l.scryptSync}});let c=r(870);Object.defineProperty(t,"sha256",{enumerable:!0,get:function(){return c.sha256}}),Object.defineProperty(t,"sha512",{enumerable:!0,get:function(){return c.sha512}});var u=r(6743);Object.defineProperty(t,"SigningKey",{enumerable:!0,get:function(){return u.SigningKey}});var d=r(9055);Object.defineProperty(t,"Signature",{enumerable:!0,get:function(){return d.Signature}}),t.lock=function(){n.computeHmac.lock(),i.keccak256.lock(),a.pbkdf2.lock(),o.randomBytes.lock(),s.ripemd160.lock(),l.scrypt.lock(),l.scryptSync.lock(),c.sha256.lock(),c.sha512.lock(),o.randomBytes.lock()}},6890:e=>{function t(){}function r(e){this._tree=e,this._ancestors=[],this._cursor=null}t.prototype.clear=function(){this._root=null,this.size=0},t.prototype.find=function(e){for(var t=this._root;null!==t;){var r=this._comparator(e,t.data);if(0===r)return t.data;t=t.get_child(r>0)}return null},t.prototype.findIter=function(e){for(var t=this._root,r=this.iterator();null!==t;){var n=this._comparator(e,t.data);if(0===n)return r._cursor=t,r;r._ancestors.push(t),t=t.get_child(n>0)}return null},t.prototype.lowerBound=function(e){for(var t=this._root,r=this.iterator(),n=this._comparator;null!==t;){var i=n(e,t.data);if(0===i)return r._cursor=t,r;r._ancestors.push(t),t=t.get_child(i>0)}for(var s=r._ancestors.length-1;s>=0;--s)if(0>n(e,(t=r._ancestors[s]).data))return r._cursor=t,r._ancestors.length=s,r;return r._ancestors.length=0,r},t.prototype.upperBound=function(e){for(var t=this.lowerBound(e),r=this._comparator;null!==t.data()&&0===r(t.data(),e);)t.next();return t},t.prototype.min=function(){var e=this._root;if(null===e)return null;for(;null!==e.left;)e=e.left;return e.data},t.prototype.max=function(){var e=this._root;if(null===e)return null;for(;null!==e.right;)e=e.right;return e.data},t.prototype.iterator=function(){return new r(this)},t.prototype.each=function(e){for(var t,r=this.iterator();null!==(t=r.next());)if(!1===e(t))return},t.prototype.reach=function(e){for(var t,r=this.iterator();null!==(t=r.prev());)if(!1===e(t))return},r.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},r.prototype.next=function(){if(null===this._cursor){var e,t=this._tree._root;null!==t&&this._minNode(t)}else if(null===this._cursor.right)do if(e=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},r.prototype.prev=function(){if(null===this._cursor){var e,t=this._tree._root;null!==t&&this._maxNode(t)}else if(null===this._cursor.left)do if(e=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},r.prototype._minNode=function(e){for(;null!==e.left;)this._ancestors.push(e),e=e.left;this._cursor=e},r.prototype._maxNode=function(e){for(;null!==e.right;)this._ancestors.push(e),e=e.right;this._cursor=e},e.exports=t},6896:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocket=void 0,t.WebSocket=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("unable to locate global object")}().WebSocket},6902:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapToCurveSimpleSWU=t.SWUFpSqrtRatio=t.weierstrass=t.weierstrassPoints=t.DER=void 0;let n=r(7296),i=r(4075),s=r(4075),a=r(5993),{bytesToNumberBE:o,hexToBytes:l}=i;t.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:r}=t.DER;if(e.length<2||2!==e[0])throw new r("Invalid signature integer tag");let n=e[1],i=e.subarray(2,n+2);if(!n||i.length!==n)throw new r("Invalid signature integer: wrong length");if(128&i[0])throw new r("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new r("Invalid signature integer: unnecessary leading zero");return{d:o(i),l:e.subarray(n+2)}},toSig(e){let{Err:r}=t.DER,n="string"==typeof e?l(e):e;if(!(n instanceof Uint8Array))throw Error("ui8a expected");let i=n.length;if(i<2||48!=n[0])throw new r("Invalid signature tag");if(n[1]!==i-2)throw new r("Invalid signature: incorrect length");let{d:s,l:a}=t.DER._parseInt(n.subarray(2)),{d:o,l:c}=t.DER._parseInt(a);if(c.length)throw new r("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),s=n.length/2,a=i.length/2,o=r(s),l=r(a);return`30${r(a+s+4)}02${l}${i}02${o}${n}`}};let c=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(3),f=BigInt(4);function p(e){let t=function(e){let t=(0,a.validateBasic)(e);i.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:s}=t;if(r){if(!n.eql(s,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,o=t.toBytes||((e,t,n)=>{let s=t.toAffine();return i.concatBytes(Uint8Array.from([4]),r.toBytes(s.x),r.toBytes(s.y))}),l=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function d(e){let{a:n,b:i}=t,s=r.sqr(e),a=r.mul(s,e);return r.add(r.add(a,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),d(t.Gx)))throw Error("bad generator point: equation left != right");function f(e){return"bigint"==typeof e&&c<e&&e<t.n}function p(e){if(!f(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function g(e){let r;let{allowedPrivateKeyLengths:a,nByteLength:o,wrapPrivateKey:l,n:c}=t;if(a&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=i.bytesToHex(e)),"string"!=typeof e||!a.includes(e.length))throw Error("Invalid key");e=e.padStart(2*o,"0")}try{r="bigint"==typeof e?e:i.bytesToNumberBE((0,s.ensureBytes)("private key",e,o))}catch(t){throw Error(`private key must be ${o} bytes, hex or bigint, not ${typeof e}`)}return l&&(r=n.mod(r,c)),p(r),r}let m=new Map;function b(e){if(!(e instanceof y))throw Error("ProjectivePoint expected")}class y{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof y)throw Error("projective point not allowed");let i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?y.ZERO:new y(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(y.fromAffine)}static fromHex(e){let t=y.fromAffine(l((0,s.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(g(e))}_setWindowSize(e){this._WINDOW_SIZE=e,m.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw Error("bad point: x or y not FE");let i=r.sqr(n),s=d(e);if(!r.eql(i,s))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){b(e);let{px:t,py:n,pz:i}=this,{px:s,py:a,pz:o}=e,l=r.eql(r.mul(t,o),r.mul(s,i)),c=r.eql(r.mul(n,o),r.mul(a,i));return l&&c}negate(){return new y(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,i=r.mul(n,h),{px:s,py:a,pz:o}=this,l=r.ZERO,c=r.ZERO,u=r.ZERO,d=r.mul(s,s),f=r.mul(a,a),p=r.mul(o,o),g=r.mul(s,a);return g=r.add(g,g),u=r.mul(s,o),u=r.add(u,u),l=r.mul(e,u),c=r.mul(i,p),c=r.add(l,c),l=r.sub(f,c),c=r.add(f,c),c=r.mul(l,c),l=r.mul(g,l),u=r.mul(i,u),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,g),c=r.add(c,d),p=r.mul(a,o),p=r.add(p,p),d=r.mul(p,g),l=r.sub(l,d),u=r.mul(p,f),u=r.add(u,u),new y(l,c,u=r.add(u,u))}add(e){b(e);let{px:n,py:i,pz:s}=this,{px:a,py:o,pz:l}=e,c=r.ZERO,u=r.ZERO,d=r.ZERO,f=t.a,p=r.mul(t.b,h),g=r.mul(n,a),m=r.mul(i,o),x=r.mul(s,l),w=r.add(n,i),v=r.add(a,o);w=r.mul(w,v),v=r.add(g,m),w=r.sub(w,v),v=r.add(n,s);let A=r.add(a,l);return v=r.mul(v,A),A=r.add(g,x),v=r.sub(v,A),A=r.add(i,s),c=r.add(o,l),A=r.mul(A,c),c=r.add(m,x),A=r.sub(A,c),d=r.mul(f,v),c=r.mul(p,x),d=r.add(c,d),c=r.sub(m,d),d=r.add(m,d),u=r.mul(c,d),m=r.add(g,g),m=r.add(m,g),x=r.mul(f,x),v=r.mul(p,v),m=r.add(m,x),x=r.sub(g,x),x=r.mul(f,x),v=r.add(v,x),g=r.mul(m,v),u=r.add(u,g),g=r.mul(A,v),c=r.mul(w,c),c=r.sub(c,g),g=r.mul(w,m),d=r.mul(A,d),new y(c,u,d=r.add(d,g))}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return w.wNAFCached(this,m,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(y.fromAffine)})}multiplyUnsafe(e){let n=y.ZERO;if(e===c)return n;if(p(e),e===u)return this;let{endo:i}=t;if(!i)return w.unsafeLadder(this,e);let{k1neg:s,k1:a,k2neg:o,k2:l}=i.splitScalar(e),d=n,h=n,f=this;for(;a>c||l>c;)a&u&&(d=d.add(f)),l&u&&(h=h.add(f)),f=f.double(),a>>=u,l>>=u;return s&&(d=d.negate()),o&&(h=h.negate()),h=new y(r.mul(h.px,i.beta),h.py,h.pz),d.add(h)}multiply(e){let n,i;p(e);let{endo:s}=t;if(s){let{k1neg:t,k1:a,k2neg:o,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(a),{p:d,f:h}=this.wNAF(l);c=w.constTimeNegate(t,c),d=w.constTimeNegate(o,d),d=new y(r.mul(d.px,s.beta),d.py,d.pz),n=c.add(d),i=u.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,i=r}return y.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=y.BASE,i=(e,t)=>t!==c&&t!==u&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){let{px:t,py:n,pz:i}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(i));let a=r.mul(t,e),o=r.mul(n,e),l=r.mul(i,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:a,y:o}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===u)return!0;if(r)return r(y,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===u?this:r?r(y,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),o(y,this,e)}toHex(e=!0){return i.bytesToHex(this.toRawBytes(e))}}y.BASE=new y(t.Gx,t.Gy,r.ONE),y.ZERO=new y(r.ZERO,r.ONE,r.ZERO);let x=t.nBitLength,w=(0,a.wNAF)(y,t.endo?Math.ceil(x/2):x);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:g,weierstrassEquation:d,isWithinCurveOrder:f}}function g(e,t){let r=e.ORDER,n=c;for(let e=r-u;e%d===c;e/=d)n+=u;let i=n,s=d<<i-u-u,a=s*d,o=(r-u)/a,l=(o-u)/d,p=a-u,g=e.pow(t,o),m=e.pow(t,(o+u)/d),b=(t,r)=>{let n=g,a=e.pow(r,p),o=e.sqr(a);o=e.mul(o,r);let c=e.mul(t,o);c=e.pow(c,l),c=e.mul(c,a),a=e.mul(c,r),o=e.mul(c,t);let h=e.mul(o,a);c=e.pow(h,s);let f=e.eql(c,e.ONE);a=e.mul(o,m),c=e.mul(h,n),o=e.cmov(a,o,f),h=e.cmov(c,h,f);for(let t=i;t>u;t--){let r=t-d;r=d<<r-u;let i=e.pow(h,r),s=e.eql(i,e.ONE);a=e.mul(o,n),n=e.mul(n,n),i=e.mul(h,n),o=e.cmov(a,o,s),h=e.cmov(i,h,s)}return{isValid:f,value:o}};if(e.ORDER%f===h){let r=(e.ORDER-h)/f,n=e.sqrt(e.neg(t));b=(t,i)=>{let s=e.sqr(i),a=e.mul(t,i);s=e.mul(s,a);let o=e.pow(s,r);o=e.mul(o,a);let l=e.mul(o,n),c=e.mul(e.sqr(o),i),u=e.eql(c,t),d=e.cmov(l,o,u);return{isValid:u,value:d}}}return b}t.weierstrassPoints=p,t.weierstrass=function(e){let r=function(e){let t=(0,a.validateBasic)(e);return i.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:o,n:l}=r,d=o.BYTES+1,h=2*o.BYTES+1;function f(e){return n.mod(e,l)}function g(e){return n.invert(e,l)}let{ProjectivePoint:m,normPrivateKeyToScalar:b,weierstrassEquation:y,isWithinCurveOrder:x}=p({...r,toBytes(e,t,r){let n=t.toAffine(),s=o.toBytes(n.x),a=i.concatBytes;return r?a(Uint8Array.from([t.hasEvenY()?2:3]),s):a(Uint8Array.from([4]),s,o.toBytes(n.y))},fromBytes(e){let t=e.length,r=e[0],n=e.subarray(1);if(t===d&&(2===r||3===r)){let e=i.bytesToNumberBE(n);if(!(c<e&&e<o.ORDER))throw Error("Point is not on curve");let t=y(e),s=o.sqrt(t);return(1&r)==1!=((s&u)===u)&&(s=o.neg(s)),{x:e,y:s}}if(t===h&&4===r)return{x:o.fromBytes(n.subarray(0,o.BYTES)),y:o.fromBytes(n.subarray(o.BYTES,2*o.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${d} compressed bytes or ${h} uncompressed bytes`)}}),w=e=>i.bytesToHex(i.numberToBytesBE(e,r.nByteLength)),v=(e,t,r)=>i.bytesToNumberBE(e.slice(t,r));class A{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let t=r.nByteLength;return new A(v(e=(0,s.ensureBytes)("compactSignature",e,2*t),0,t),v(e,t,2*t))}static fromDER(e){let{r,s:n}=t.DER.toSig((0,s.ensureBytes)("DER",e));return new A(r,n)}assertValidity(){if(!x(this.r))throw Error("r must be 0 < r < CURVE.n");if(!x(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new A(this.r,this.s,e)}recoverPublicKey(e){let{r:t,s:n,recovery:i}=this,a=P((0,s.ensureBytes)("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw Error("recovery id invalid");let l=2===i||3===i?t+r.n:t;if(l>=o.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&i)==0?"02":"03",u=m.fromHex(c+w(l)),d=g(l),h=f(-a*d),p=f(n*d),b=m.BASE.multiplyAndAddUnsafe(u,h,p);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>l>>u}normalizeS(){return this.hasHighS()?new A(this.r,f(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}function E(e){let t=e instanceof Uint8Array,r="string"==typeof e,n=(t||r)&&e.length;return t?n===d||n===h:r?n===2*d||n===2*h:e instanceof m}let k=r.bits2int||function(e){let t=i.bytesToNumberBE(e),n=8*e.length-r.nBitLength;return n>0?t>>BigInt(n):t},P=r.bits2int_modN||function(e){return f(k(e))},S=i.bitMask(r.nBitLength);function I(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(c<=e&&e<S))throw Error(`bigint expected < 2^${r.nBitLength}`);return i.numberToBytesBE(e,r.nByteLength)}let T={lowS:r.lowS,prehash:!1},_={lowS:r.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(e,t=!0){return m.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(E(e))throw Error("first arg must be private key");if(!E(t))throw Error("second arg must be public key");return m.fromHex(t).multiply(b(e)).toRawBytes(r)},sign:function(e,t,n=T){let{seed:a,k2sig:d}=function(e,t,n=T){if(["recovered","canonical"].some(e=>e in n))throw Error("sign() legacy options not supported");let{hash:a,randomBytes:d}=r,{lowS:h,prehash:p,extraEntropy:y}=n;null==h&&(h=!0),e=(0,s.ensureBytes)("msgHash",e),p&&(e=(0,s.ensureBytes)("prehashed msgHash",a(e)));let w=P(e),v=b(t),E=[I(v),I(w)];if(null!=y){let e=!0===y?d(o.BYTES):y;E.push((0,s.ensureBytes)("extraEntropy",e))}return{seed:i.concatBytes(...E),k2sig:function(e){let t=k(e);if(!x(t))return;let r=g(t),n=m.BASE.multiply(t).toAffine(),i=f(n.x);if(i===c)return;let s=f(r*f(w+i*v));if(s===c)return;let a=2*(n.x!==i)|Number(n.y&u),o=s;if(h&&s>l>>u){var d;o=(d=s)>l>>u?f(-d):d,a^=1}return new A(i,o,a)}}}(e,t,n);return i.createHmacDrbg(r.hash.outputLen,r.nByteLength,r.hmac)(a,d)},verify:function(e,n,i,a=_){let o,l;if(n=(0,s.ensureBytes)("msgHash",n),i=(0,s.ensureBytes)("publicKey",i),"strict"in a)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:u}=a;try{if("string"==typeof e||e instanceof Uint8Array)try{l=A.fromDER(e)}catch(r){if(!(r instanceof t.DER.Err))throw r;l=A.fromCompact(e)}else if("object"==typeof e&&"bigint"==typeof e.r&&"bigint"==typeof e.s){let{r:t,s:r}=e;l=new A(t,r)}else throw Error("PARSE");o=m.fromHex(i)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&l.hasHighS())return!1;u&&(n=r.hash(n));let{r:d,s:h}=l,p=P(n),b=g(h),y=f(p*b),x=f(d*b),w=m.BASE.multiplyAndAddUnsafe(o,y,x)?.toAffine();return!!w&&f(w.x)===d},ProjectivePoint:m,Signature:A,utils:{isValidPrivateKey(e){try{return b(e),!0}catch(e){return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{let e=n.getMinHashLength(r.n);return n.mapHashToField(r.randomBytes(e),r.n)},precompute:(e=8,t=m.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}},t.SWUFpSqrtRatio=g,t.mapToCurveSimpleSWU=function(e,t){if(n.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=g(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let i,s,a,o,l,c,u,d;i=e.sqr(n),i=e.mul(i,t.Z),s=e.sqr(i),s=e.add(s,i),a=e.add(s,e.ONE),a=e.mul(a,t.B),o=e.cmov(t.Z,e.neg(s),!e.eql(s,e.ZERO)),o=e.mul(o,t.A),s=e.sqr(a),c=e.sqr(o),l=e.mul(c,t.A),s=e.add(s,l),s=e.mul(s,a),c=e.mul(c,o),l=e.mul(c,t.B),s=e.add(s,l),u=e.mul(i,a);let{isValid:h,value:f}=r(s,c);d=e.mul(i,n),d=e.mul(d,f),u=e.cmov(u,a,h),d=e.cmov(d,f,h);let p=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),{x:u=e.div(u,o),y:d}}}},6923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Wallet=void 0;let n=r(6870),i=r(8662),s=r(6640),a=r(8519),o=r(6456),l=r(6571),c=r(3414);function u(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}class d extends s.BaseWallet{constructor(e,t){"string"!=typeof e||e.startsWith("0x")||(e="0x"+e),super("string"==typeof e?new n.SigningKey(e):e,t)}connect(e){return new d(this.signingKey,e)}async encrypt(e,t){let r={address:this.address,privateKey:this.privateKey};return await (0,l.encryptKeystoreJson)(r,e,{progressCallback:t})}encryptSync(e){let t={address:this.address,privateKey:this.privateKey};return(0,l.encryptKeystoreJsonSync)(t,e)}static #tI(e){if((0,i.assertArgument)(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&"en"===e.mnemonic.locale){let t=c.Mnemonic.fromEntropy(e.mnemonic.entropy),r=a.HDNodeWallet.fromMnemonic(t,e.mnemonic.path);if(r.address===e.address&&r.privateKey===e.privateKey)return r;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}let t=new d(e.privateKey);return(0,i.assertArgument)(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),t}static async fromEncryptedJson(e,t,r){let n=null;return(0,l.isKeystoreJson)(e)?n=await (0,l.decryptKeystoreJson)(e,t,r):(0,o.isCrowdsaleJson)(e)&&(r&&(r(0),await u(0)),n=(0,o.decryptCrowdsaleJson)(e,t),r&&(r(1),await u(0))),d.#tI(n)}static fromEncryptedJsonSync(e,t){let r=null;return(0,l.isKeystoreJson)(e)?r=(0,l.decryptKeystoreJsonSync)(e,t):(0,o.isCrowdsaleJson)(e)?r=(0,o.decryptCrowdsaleJson)(e,t):(0,i.assertArgument)(!1,"invalid JSON wallet","json","[ REDACTED ]"),d.#tI(r)}static createRandom(e){let t=a.HDNodeWallet.createRandom();return e?t.connect(e):t}static fromPhrase(e,t){let r=a.HDNodeWallet.fromPhrase(e);return t?r.connect(t):r}}t.Wallet=d},6953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FixedNumber=void 0;let n=r(4306),i=r(7073),s=r(7310),a=r(9959),o=BigInt(-1),l=BigInt(0),c=BigInt(1),u=BigInt(5),d={},h="0000";for(;h.length<80;)h+=h;function f(e){let t=h;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function p(e,t,r){let n=BigInt(t.width);if(t.signed){let t=c<<n-c;(0,i.assert)(null==r||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e}),e=e>l?(0,s.fromTwos)((0,s.mask)(e,n),n):-(0,s.fromTwos)((0,s.mask)(-e,n),n)}else{let t=c<<n;(0,i.assert)(null==r||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:r,fault:"overflow",value:e}),e=(e%t+t)%t&t-c}return e}function g(e){"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,r=128,n=18;if("string"==typeof e){if("fixed"===e);else if("ufixed"===e)t=!1;else{let s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);(0,i.assertArgument)(s,"invalid fixed format","format",e),t="u"!==s[1],r=parseInt(s[2]),n=parseInt(s[3])}}else if(e){let s=e,a=(e,t,r)=>null==s[e]?r:((0,i.assertArgument)(typeof s[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,s[e]),s[e]);t=a("signed","boolean",t),r=a("width","number",r),n=a("decimals","number",n)}(0,i.assertArgument)(r%8==0,"invalid FixedNumber width (not byte aligned)","format.width",r),(0,i.assertArgument)(n<=80,"invalid FixedNumber decimals (too large)","format.decimals",n);let s=(t?"":"u")+"fixed"+String(r)+"x"+String(n);return{signed:t,width:r,decimals:n,name:s}}class m{format;#t_;#tC;#tO;_value;constructor(e,t,r){(0,i.assertPrivate)(e,d,"FixedNumber"),this.#tC=t,this.#t_=r;let n=function(e,t){let r="";e<l&&(r="-",e*=o);let n=e.toString();if(0===t)return r+n;for(;n.length<=t;)n=h+n;let i=n.length-t;for(n=n.substring(0,i)+"."+n.substring(i);"0"===n[0]&&"."!==n[1];)n=n.substring(1);for(;"0"===n[n.length-1]&&"."!==n[n.length-2];)n=n.substring(0,n.length-1);return r+n}(t,r.decimals);(0,a.defineProperties)(this,{format:r.name,_value:n}),this.#tO=f(r.decimals)}get signed(){return this.#t_.signed}get width(){return this.#t_.width}get decimals(){return this.#t_.decimals}get value(){return this.#tC}#tR(e){(0,i.assertArgument)(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}#tN(e,t){return new m(d,e=p(e,this.#t_,t),this.#t_)}#tM(e,t){return this.#tR(e),this.#tN(this.#tC+e.#tC,t)}addUnsafe(e){return this.#tM(e)}add(e){return this.#tM(e,"add")}#tB(e,t){return this.#tR(e),this.#tN(this.#tC-e.#tC,t)}subUnsafe(e){return this.#tB(e)}sub(e){return this.#tB(e,"sub")}#tD(e,t){return this.#tR(e),this.#tN(this.#tC*e.#tC/this.#tO,t)}mulUnsafe(e){return this.#tD(e)}mul(e){return this.#tD(e,"mul")}mulSignal(e){this.#tR(e);let t=this.#tC*e.#tC;return(0,i.assert)(t%this.#tO===l,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#tN(t/this.#tO,"mulSignal")}#tL(e,t){return(0,i.assert)(e.#tC!==l,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#tR(e),this.#tN(this.#tC*this.#tO/e.#tC,t)}divUnsafe(e){return this.#tL(e)}div(e){return this.#tL(e,"div")}divSignal(e){(0,i.assert)(e.#tC!==l,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#tR(e);let t=this.#tC*this.#tO;return(0,i.assert)(t%e.#tC===l,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#tN(t/e.#tC,"divSignal")}cmp(e){let t=this.value,r=e.value,n=this.decimals-e.decimals;return(n>0?r*=f(n):n<0&&(t*=f(-n)),t<r)?-1:+(t>r)}eq(e){return 0===this.cmp(e)}lt(e){return 0>this.cmp(e)}lte(e){return 0>=this.cmp(e)}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=this.#tC;return this.#tC<l&&(e-=this.#tO-c),e=this.#tC/this.#tO*this.#tO,this.#tN(e,"floor")}ceiling(){let e=this.#tC;return this.#tC>l&&(e+=this.#tO-c),e=this.#tC/this.#tO*this.#tO,this.#tN(e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;let t=this.decimals-e,r=u*f(t-1),n=this.value+r,i=f(t);return p(n=n/i*i,this.#t_,"round"),new m(d,n,this.#t_)}isZero(){return this.#tC===l}isNegative(){return this.#tC<l}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return m.fromString(this.toString(),e)}static fromValue(e,t,r){let n=null==t?0:(0,s.getNumber)(t),a=g(r),o=(0,s.getBigInt)(e,"value"),c=n-a.decimals;if(c>0){let t=f(c);(0,i.assert)(o%t===l,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),o/=t}else c<0&&(o*=f(-c));return p(o,a,"fromValue"),new m(d,o,a)}static fromString(e,t){let r=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);(0,i.assertArgument)(r&&r[2].length+r[3].length>0,"invalid FixedNumber string value","value",e);let n=g(t),s=r[2]||"0",a=r[3]||"";for(;a.length<n.decimals;)a+=h;(0,i.assert)(a.substring(n.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),a=a.substring(0,n.decimals);let o=BigInt(r[1]+s+a);return p(o,n,"fromString"),new m(d,o,n)}static fromBytes(e,t){let r=(0,s.toBigInt)((0,n.getBytes)(e,"value")),i=g(t);return i.signed&&(r=(0,s.fromTwos)(r,i.width)),p(r,i,"fromBytes"),new m(d,r,i)}}t.FixedNumber=m},6973:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuidV4=void 0;let n=r(4306);t.uuidV4=function(e){let t=(0,n.getBytes)(e,"randomBytes");t[6]=15&t[6]|64,t[8]=63&t[8]|128;let r=(0,n.hexlify)(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}},7064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ethers=void 0;let n=r(3671);t.ethers=n.__importStar(r(3173)),n.__exportStar(r(3173),t)},7073:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertPrivate=t.assertNormalize=t.assertArgumentCount=t.assertArgument=t.assert=t.makeError=t.isCallException=t.isError=void 0;let n=r(9571),i=r(9959);function s(e,t){if(null==e)return"null";if(null==t&&(t=new Set),"object"==typeof e){if(t.has(e))return"[Circular]";t.add(e)}if(Array.isArray(e))return"[ "+e.map(e=>s(e,t)).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let n=0;n<e.length;n++)r+=t[e[n]>>4],r+=t[15&e[n]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return s(e.toJSON(),t);switch(typeof e){case"boolean":case"number":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let r=Object.keys(e);return r.sort(),"{ "+r.map(r=>`${s(r,t)}: ${s(e[r],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function a(e,t){return e&&e.code===t}function o(e,t,r){let a,o=e;{let i=[];if(r){if("message"in r||"code"in r||"name"in r)throw Error(`value will overwrite populated values: ${s(r)}`);for(let e in r){if("shortMessage"===e)continue;let t=r[e];i.push(e+"="+s(t))}}i.push(`code=${t}`),i.push(`version=${n.version}`),i.length&&(e+=" ("+i.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":a=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":a=RangeError(e);break;default:a=Error(e)}return(0,i.defineProperties)(a,{code:t}),r&&Object.assign(a,r),null==a.shortMessage&&(0,i.defineProperties)(a,{shortMessage:o}),a}function l(e,t,r,n){if(!e)throw o(t,r,n)}t.isError=a,t.isCallException=function(e){return a(e,"CALL_EXCEPTION")},t.makeError=o,t.assert=l,t.assertArgument=function(e,t,r,n){l(e,t,"INVALID_ARGUMENT",{argument:r,value:n})},t.assertArgumentCount=function(e,t,r){null==r&&(r=""),r&&(r=": "+r),l(e>=t,"missing argument"+r,"MISSING_ARGUMENT",{count:e,expectedCount:t}),l(e<=t,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})};let c=["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch(e){}return e},[]);t.assertNormalize=function(e){l(c.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})},t.assertPrivate=function(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),l(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}},7118:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=void 0;let n=r(573),i=r(8662),s=!1,a=function(e){return(0,n.ripemd160)(e)},o=a;function l(e){let t=(0,i.getBytes)(e,"data");return(0,i.hexlify)(o(t))}t.ripemd160=l,l._=a,l.lock=function(){s=!0},l.register=function(e){if(s)throw TypeError("ripemd160 is locked");o=e},Object.freeze(l)},7175:(e,t,r)=>{"use strict";r.d(t,{B:()=>C});var n=r(7876),i=r(1945),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,i.A)(function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&91>e.charCodeAt(2)}),o=r(1398),l=r(7955),c=r(8455),u=r(4849),d=r(4232),h=r(1090),f=r(4854),p=r(2850),g=r(5017),m=r(7716),b=r(307),y=r(8956);let x=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]),w=e=>(Array.isArray(e)?e:[e]).filter(Boolean).flat(),v=function(e){return e.default||e}(a),A=e=>"theme"!==e,E=(e,t,r)=>{let n;if(t){let r=t.shouldForwardProp;n=e.__emotion_forwardProp&&r?t=>e.__emotion_forwardProp(t)&&r(t):r}return"function"!=typeof n&&r&&(n=e.__emotion_forwardProp),n},k="undefined"!=typeof document,P=({cache:e,serialized:t,isStringTag:r})=>{(0,u.SF)(e,t,r);let i=(0,c.s)(()=>(0,u.sk)(e,t,r));if(!k&&void 0!==i){let r=t.name,s=t.next;for(;void 0!==s;)r=(0,p.cx)(r,s.name),s=s.next;return(0,n.jsx)("style",{"data-emotion":(0,p.cx)(e.key,r),dangerouslySetInnerHTML:{__html:i},nonce:e.sheet.nonce})}return null},S={path:["d"],text:["x","y"],circle:["cx","cy","r"],rect:["width","height","x","y","rx","ry"],ellipse:["cx","cy","rx","ry"],g:["transform"],stop:["offset","stopOpacity"]},I=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),T=((e,t={},r={})=>{let i,s;if(I(S,e)){r.forwardProps||(r.forwardProps=[]);let t=S[e];r.forwardProps=(0,m.s)([...r.forwardProps,...t])}let a=e.__emotion_real===e,c=a&&e.__emotion_base||e;void 0!==r&&(i=r.label,s=r.target);let k=[],T=(0,o.w)((i,m,S)=>{let{cva:I,isValidProperty:T}=(0,b.$)(),_=t.__cva__?t:I(t),C=O(e.__emotion_cva,_);if(!r.shouldForwardProp&&r.forwardProps){let e;e=r.forwardProps,r.shouldForwardProp=(t,r)=>!!e.includes(t)||!r?.includes(t)&&!T(t)}let R=E(e,r,a)||((t,r)=>{let n="string"==typeof e&&e.charCodeAt(0)>96?v:A,i=!r?.includes(t)&&!T(t);return n(t)&&i}),{props:N,styles:M}=function(e,t,r){let{css:n,isValidProperty:i}=(0,b.$)(),{children:s,...a}=e,o=(0,d.useMemo)(()=>{let[e,n]=(0,y.r)(a,e=>r(e,t.variantKeys)),[s,o]=(0,y.r)(n,t.variantKeys),[l,c]=(0,y.r)(o,i);return{forwardedProps:e,variantProps:s,styleProps:l,elementProps:c}},[t.variantKeys,r,a,i]),{css:l,...c}=o.styleProps,u=(0,d.useMemo)(()=>{let e={...o.variantProps};return t.variantKeys.includes("colorPalette")||(e.colorPalette=a.colorPalette),t.variantKeys.includes("orientation")||(e.orientation=a.orientation),t(e)},[t,o.variantProps,a.colorPalette,a.orientation]);return{styles:(0,d.useMemo)(()=>n(u,...w(l),c),[n,u,l,c]),props:{...o.forwardedProps,...o.elementProps,children:s}}}(d.useMemo(()=>Object.assign({},r.defaultProps,(0,f.o)(i)),[i]),C,R),B="",D=[M],L=N;if(null==N.theme){for(let e in L={},N)L[e]=N[e];L.theme=d.useContext(o.T)}"string"==typeof N.className?B=(0,u.Rk)(m.registered,D,N.className):null!=N.className&&(B=(0,p.cx)(B,N.className));let U=(0,l.J)(k.concat(D),m.registered,L);B=(0,p.cx)(B,`${m.key}-${U.name}`),void 0!==s&&(B=(0,p.cx)(B,s));let F=!R("as"),j=F&&N.as||c,z={};for(let e in N)if(!F||"as"!==e){if(function(e){return"string"==typeof e&&x.has(e)}(e)){z[e.replace("html","").toLowerCase()]=N[e];continue}R(e)&&(z[e]=N[e])}z.className=B.trim(),z.ref=S;let H=r.forwardAsChild||r.forwardProps?.includes("asChild");if(N.asChild&&!H){let e=d.Children.only(N.children);j=e.type,z.children=null,Reflect.deleteProperty(z,"asChild"),(z=(0,h.v)(z,e.props)).ref=function(...e){return t=>{e.forEach(e=>{!function(e,t){if(null!=e){if("function"==typeof e){e(t);return}try{e.current=t}catch(r){throw Error(`Cannot assign value '${t}' to ref '${e}'`)}}}(e,t)})}}(S,function(e){let t=d.version;return!(0,g.Kg)(t)||t.startsWith("18.")?e?.ref:e?.props?.ref}(e))}return z.as&&H?(z.as=void 0,(0,n.jsxs)(d.Fragment,{children:[(0,n.jsx)(P,{cache:m,serialized:U,isStringTag:"string"==typeof j}),(0,n.jsx)(j,{asChild:!0,...z,children:(0,n.jsx)(N.as,{children:z.children})})]})):(0,n.jsxs)(d.Fragment,{children:[(0,n.jsx)(P,{cache:m,serialized:U,isStringTag:"string"==typeof j}),(0,n.jsx)(j,{...z})]})});return T.displayName=void 0!==i?i:`chakra(${"string"==typeof c?c:c.displayName||c.name||"Component"})`,T.__emotion_real=T,T.__emotion_base=c,T.__emotion_forwardProp=r.shouldForwardProp,T.__emotion_cva=t,Object.defineProperty(T,"toString",{value:()=>`.${s}`}),T}).bind(),_=new Map,C=new Proxy(T,{apply:(e,t,r)=>T(...r),get:(e,t)=>(_.has(t)||_.set(t,T(t)),_.get(t))}),O=(e,t)=>e&&!t?e:!e&&t?t:e.merge(t)},7196:(e,t,r)=>{"use strict";r.d(t,{TO:()=>n.TO}),r(3751);var n=r(9700);r(4057),r(7774),r(3321)},7233:(e,t,r)=>{"use strict";r.d(t,{KF:()=>eA});var n,i,s,a,o,l,c,u,d,h,f,p,g,m,b,y,x=r(9141),w=r(1887),v=r(3204),A=r(1680),E=r(1138),k=r(2830),P=r(1970);function S(e){return null!=e[Symbol.asyncIterator]}let I=e=>{let t=E.OY(e),r=(0,P.K)(t);return E.lF(e,r),I.bytes=t,r};function T(e,t){let r=(t=t??{}).lengthEncoder??I;function*n(e){let t=r(e.byteLength);t instanceof Uint8Array?yield t:yield*t,e instanceof Uint8Array?yield e:yield*e}return S(e)?async function*(){for await(let t of e)yield*n(t)}():function*(){for(let t of e)yield*n(t)}()}I.bytes=0,T.single=(e,t)=>{let r=(t=t??{}).lengthEncoder??I;return new k.I(r(e.byteLength),e)};class _ extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"}class C extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"}class O extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"}class R extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"}!function(e){e[e.LENGTH=0]="LENGTH",e[e.DATA=1]="DATA"}(n||(n={}));let N=e=>{let t=E.D4(e);return N.bytes=E.OY(t),t};function M(e,t){let r=new k.I,i=n.LENGTH,s=-1,a=t?.lengthDecoder??N,o=t?.maxLengthLength??8,l=t?.maxDataLength??4194304;function*c(){for(;r.byteLength>0;){if(i===n.LENGTH)try{if((s=a(r))<0)throw new _("Invalid message length");if(s>l)throw new C("Message length too long");let e=a.bytes;r.consume(e),t?.onLength!=null&&t.onLength(s),i=n.DATA}catch(e){if(e instanceof RangeError){if(r.byteLength>o)throw new O("Message length length too long");break}throw e}if(i===n.DATA){if(r.byteLength<s)break;let e=r.sublist(0,s);r.consume(s),t?.onData!=null&&t.onData(e),yield e,i=n.LENGTH}}}return S(e)?async function*(){for await(let t of e)r.append(t),yield*c();if(r.byteLength>0)throw new R("Unexpected end of input")}():function*(){for(let t of e)r.append(t),yield*c();if(r.byteLength>0)throw new R("Unexpected end of input")}()}N.bytes=0,M.fromReader=(e,t)=>{let r=1;return M(async function*(){for(;;)try{let{done:t,value:n}=await e.next(r);if(!0===t)return;null!=n&&(yield n)}catch(e){if("ERR_UNDER_READ"===e.code)return{done:!0,value:null};throw e}finally{r=1}}(),{...t??{},onLength:e=>{r=e}})};var B=r(4113),D=r(1643),L=r(4057);let U="/floodsub/1.0.0",F="/meshsub/1.0.0",j="/meshsub/1.2.0",z=12e4,H={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxIdontwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};var G=r(6038);!function(e){var t,r,n,i,s,a,o,l,c;let u,d,h,f,p,g,m,b,y,x;(t=e.SubOpts||(e.SubOpts={})).codec=()=>(null==d&&(d=(0,G.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.subscribe&&(t.uint32(8),t.bool(e.subscribe)),null!=e.topic&&(t.uint32(18),t.string(e.topic)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.subscribe=e.bool();break;case 2:n.topic=e.string();break;default:e.skipType(7&t)}}return n})),d),t.encode=e=>(0,G.mH)(e,t.codec()),t.decode=(e,r)=>(0,G.Y8)(e,t.codec(),r),(r=e.Message||(e.Message={})).codec=()=>(null==h&&(h=(0,G.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.from&&(t.uint32(10),t.bytes(e.from)),null!=e.data&&(t.uint32(18),t.bytes(e.data)),null!=e.seqno&&(t.uint32(26),t.bytes(e.seqno)),null!=e.topic&&""!==e.topic&&(t.uint32(34),t.string(e.topic)),null!=e.signature&&(t.uint32(42),t.bytes(e.signature)),null!=e.key&&(t.uint32(50),t.bytes(e.key)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={topic:""},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.from=e.bytes();break;case 2:n.data=e.bytes();break;case 3:n.seqno=e.bytes();break;case 4:n.topic=e.string();break;case 5:n.signature=e.bytes();break;case 6:n.key=e.bytes();break;default:e.skipType(7&t)}}return n})),h),r.encode=e=>(0,G.mH)(e,r.codec()),r.decode=(e,t)=>(0,G.Y8)(e,r.codec(),t),(n=e.ControlMessage||(e.ControlMessage={})).codec=()=>(null==f&&(f=(0,G.iU)((t,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null!=t.ihave)for(let n of t.ihave)r.uint32(10),e.ControlIHave.codec().encode(n,r);if(null!=t.iwant)for(let n of t.iwant)r.uint32(18),e.ControlIWant.codec().encode(n,r);if(null!=t.graft)for(let n of t.graft)r.uint32(26),e.ControlGraft.codec().encode(n,r);if(null!=t.prune)for(let n of t.prune)r.uint32(34),e.ControlPrune.codec().encode(n,r);if(null!=t.idontwant)for(let n of t.idontwant)r.uint32(42),e.ControlIDontWant.codec().encode(n,r);!1!==n.lengthDelimited&&r.ldelim()},(t,r,n={})=>{let i={ihave:[],iwant:[],graft:[],prune:[],idontwant:[]},s=null==r?t.len:t.pos+r;for(;t.pos<s;){let r=t.uint32();switch(r>>>3){case 1:if(n.limits?.ihave!=null&&i.ihave.length===n.limits.ihave)throw new G.zH('Decode error - map field "ihave" had too many elements');i.ihave.push(e.ControlIHave.codec().decode(t,t.uint32(),{limits:n.limits?.ihave$}));break;case 2:if(n.limits?.iwant!=null&&i.iwant.length===n.limits.iwant)throw new G.zH('Decode error - map field "iwant" had too many elements');i.iwant.push(e.ControlIWant.codec().decode(t,t.uint32(),{limits:n.limits?.iwant$}));break;case 3:if(n.limits?.graft!=null&&i.graft.length===n.limits.graft)throw new G.zH('Decode error - map field "graft" had too many elements');i.graft.push(e.ControlGraft.codec().decode(t,t.uint32(),{limits:n.limits?.graft$}));break;case 4:if(n.limits?.prune!=null&&i.prune.length===n.limits.prune)throw new G.zH('Decode error - map field "prune" had too many elements');i.prune.push(e.ControlPrune.codec().decode(t,t.uint32(),{limits:n.limits?.prune$}));break;case 5:if(n.limits?.idontwant!=null&&i.idontwant.length===n.limits.idontwant)throw new G.zH('Decode error - map field "idontwant" had too many elements');i.idontwant.push(e.ControlIDontWant.codec().decode(t,t.uint32(),{limits:n.limits?.idontwant$}));break;default:t.skipType(7&r)}}return i})),f),n.encode=e=>(0,G.mH)(e,n.codec()),n.decode=(e,t)=>(0,G.Y8)(e,n.codec(),t),(i=e.ControlIHave||(e.ControlIHave={})).codec=()=>(null==p&&(p=(0,G.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.topicID&&(t.uint32(10),t.string(e.topicID)),null!=e.messageIDs)for(let r of e.messageIDs)t.uint32(18),t.bytes(r);!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={messageIDs:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.topicID=e.string();break;case 2:if(r.limits?.messageIDs!=null&&n.messageIDs.length===r.limits.messageIDs)throw new G.zH('Decode error - map field "messageIDs" had too many elements');n.messageIDs.push(e.bytes());break;default:e.skipType(7&t)}}return n})),p),i.encode=e=>(0,G.mH)(e,i.codec()),i.decode=(e,t)=>(0,G.Y8)(e,i.codec(),t),(s=e.ControlIWant||(e.ControlIWant={})).codec=()=>(null==g&&(g=(0,G.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.messageIDs)for(let r of e.messageIDs)t.uint32(10),t.bytes(r);!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={messageIDs:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();if(t>>>3==1){if(r.limits?.messageIDs!=null&&n.messageIDs.length===r.limits.messageIDs)throw new G.zH('Decode error - map field "messageIDs" had too many elements');n.messageIDs.push(e.bytes())}else e.skipType(7&t)}return n})),g),s.encode=e=>(0,G.mH)(e,s.codec()),s.decode=(e,t)=>(0,G.Y8)(e,s.codec(),t),(a=e.ControlGraft||(e.ControlGraft={})).codec=()=>(null==m&&(m=(0,G.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.topicID&&(t.uint32(10),t.string(e.topicID)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();t>>>3==1?n.topicID=e.string():e.skipType(7&t)}return n})),m),a.encode=e=>(0,G.mH)(e,a.codec()),a.decode=(e,t)=>(0,G.Y8)(e,a.codec(),t),(o=e.ControlPrune||(e.ControlPrune={})).codec=()=>(null==b&&(b=(0,G.iU)((t,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null!=t.topicID&&(r.uint32(10),r.string(t.topicID)),null!=t.peers)for(let n of t.peers)r.uint32(18),e.PeerInfo.codec().encode(n,r);null!=t.backoff&&(r.uint32(24),r.uint64Number(t.backoff)),!1!==n.lengthDelimited&&r.ldelim()},(t,r,n={})=>{let i={peers:[]},s=null==r?t.len:t.pos+r;for(;t.pos<s;){let r=t.uint32();switch(r>>>3){case 1:i.topicID=t.string();break;case 2:if(n.limits?.peers!=null&&i.peers.length===n.limits.peers)throw new G.zH('Decode error - map field "peers" had too many elements');i.peers.push(e.PeerInfo.codec().decode(t,t.uint32(),{limits:n.limits?.peers$}));break;case 3:i.backoff=t.uint64Number();break;default:t.skipType(7&r)}}return i})),b),o.encode=e=>(0,G.mH)(e,o.codec()),o.decode=(e,t)=>(0,G.Y8)(e,o.codec(),t),(l=e.PeerInfo||(e.PeerInfo={})).codec=()=>(null==y&&(y=(0,G.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.peerID&&(t.uint32(10),t.bytes(e.peerID)),null!=e.signedPeerRecord&&(t.uint32(18),t.bytes(e.signedPeerRecord)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.peerID=e.bytes();break;case 2:n.signedPeerRecord=e.bytes();break;default:e.skipType(7&t)}}return n})),y),l.encode=e=>(0,G.mH)(e,l.codec()),l.decode=(e,t)=>(0,G.Y8)(e,l.codec(),t),(c=e.ControlIDontWant||(e.ControlIDontWant={})).codec=()=>(null==x&&(x=(0,G.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.messageIDs)for(let r of e.messageIDs)t.uint32(10),t.bytes(r);!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={messageIDs:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();if(t>>>3==1){if(r.limits?.messageIDs!=null&&n.messageIDs.length===r.limits.messageIDs)throw new G.zH('Decode error - map field "messageIDs" had too many elements');n.messageIDs.push(e.bytes())}else e.skipType(7&t)}return n})),x),c.encode=e=>(0,G.mH)(e,c.codec()),c.decode=(e,t)=>(0,G.Y8)(e,c.codec(),t),e.codec=()=>(null==u&&(u=(0,G.iU)((t,r,n={})=>{if(!1!==n.lengthDelimited&&r.fork(),null!=t.subscriptions)for(let n of t.subscriptions)r.uint32(10),e.SubOpts.codec().encode(n,r);if(null!=t.messages)for(let n of t.messages)r.uint32(18),e.Message.codec().encode(n,r);null!=t.control&&(r.uint32(26),e.ControlMessage.codec().encode(t.control,r)),!1!==n.lengthDelimited&&r.ldelim()},(t,r,n={})=>{let i={subscriptions:[],messages:[]},s=null==r?t.len:t.pos+r;for(;t.pos<s;){let r=t.uint32();switch(r>>>3){case 1:if(n.limits?.subscriptions!=null&&i.subscriptions.length===n.limits.subscriptions)throw new G.zH('Decode error - map field "subscriptions" had too many elements');i.subscriptions.push(e.SubOpts.codec().decode(t,t.uint32(),{limits:n.limits?.subscriptions$}));break;case 2:if(n.limits?.messages!=null&&i.messages.length===n.limits.messages)throw new G.zH('Decode error - map field "messages" had too many elements');i.messages.push(e.Message.codec().decode(t,t.uint32(),{limits:n.limits?.messages$}));break;case 3:i.control=e.ControlMessage.codec().decode(t,t.uint32(),{limits:n.limits?.control});break;default:t.skipType(7&r)}}return i})),u),e.encode=t=>(0,G.mH)(t,e.codec()),e.decode=(t,r)=>(0,G.Y8)(t,e.codec(),r)}(i||(i={}));class ${gossip;msgs=new Map;msgIdToStrFn;history=[];notValidatedCount=0;constructor(e,t,r){this.gossip=e,this.msgIdToStrFn=r;for(let e=0;e<t;e++)this.history[e]=[]}get size(){return this.msgs.size}put(e,t,r=!1){let{msgIdStr:n}=e;return!this.msgs.has(n)&&(this.msgs.set(n,{message:t,validated:r,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...e,topic:t.topic}),!r&&this.notValidatedCount++,!0)}observeDuplicate(e,t){let r=this.msgs.get(e);null==r||r.validated||r.originatingPeers.add(t)}get(e){return this.msgs.get(this.msgIdToStrFn(e))?.message}getWithIWantCount(e,t){let r=this.msgs.get(e);if(null==r)return null;let n=(r.iwantCounts.get(t)??0)+1;return r.iwantCounts.set(t,n),{msg:r.message,count:n}}getGossipIDs(e){let t=new Map;for(let r=0;r<this.gossip;r++)this.history[r].forEach(r=>{let n=this.msgs.get(r.msgIdStr);if(n?.validated&&e.has(r.topic)){let e=t.get(r.topic);null==e&&(e=[],t.set(r.topic,e)),e.push(r.msgId)}});return t}validate(e){let t=this.msgs.get(e);if(null==t)return null;!t.validated&&this.notValidatedCount--;let{message:r,originatingPeers:n}=t;return t.validated=!0,t.originatingPeers=new Set,{message:r,originatingPeers:n}}shift(){this.history[this.history.length-1].forEach(e=>{let t=this.msgs.get(e.msgIdStr);null!=t&&(this.msgs.delete(e.msgIdStr),!t.validated&&this.notValidatedCount--)}),this.history.pop(),this.history.unshift([])}remove(e){let t=this.msgs.get(e);return null==t?null:(this.msgs.delete(e),t)}}function V(e){switch(e){case w.z8.Ignore:return o.Ignore;case w.z8.Reject:return o.Reject;default:throw Error("Unreachable")}}!function(e){e.StrictSign="StrictSign",e.StrictNoSign="StrictNoSign"}(s||(s={})),function(e){e[e.Signing=0]="Signing",e[e.Anonymous=1]="Anonymous"}(a||(a={})),function(e){e.Error="error",e.Ignore="ignore",e.Reject="reject",e.Blacklisted="blacklisted"}(o||(o={})),function(e){e.InvalidSignature="invalid_signature",e.InvalidSeqno="invalid_seqno",e.InvalidPeerId="invalid_peerid",e.SignaturePresent="signature_present",e.SeqnoPresent="seqno_present",e.FromPresent="from_present",e.TransformFailed="transform_failed"}(l||(l={})),function(e){e.duplicate="duplicate",e.invalid="invalid",e.valid="valid"}(c||(c={})),function(e){e.forward="forward",e.publish="publish"}(u||(u={})),function(e){e.Fanout="fanout",e.Random="random",e.Subscribed="subscribed",e.Outbound="outbound",e.NotEnough="not_enough",e.Opportunistic="opportunistic"}(d||(d={})),function(e){e.Dc="disconnected",e.BadScore="bad_score",e.Prune="prune",e.Excess="excess"}(h||(h={})),function(e){e.GraftBackoff="graft_backoff",e.BrokenPromise="broken_promise",e.MessageDeficit="message_deficit",e.IPColocation="IP_colocation"}(f||(f={})),function(e){e.LowScore="low_score",e.MaxIhave="max_ihave",e.MaxIasked="max_iasked"}(p||(p={})),function(e){e.graylist="graylist",e.publish="publish",e.gossip="gossip",e.mesh="mesh"}(g||(g={}));var q=r(6135);let K={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function W(e,t,r=()=>!0){let n=new Set;if(t<=0)return n;for(let i of e){if(n.size>=t)break;r(i)&&(n.add(i),e.delete(i))}return n}class Q extends Map{getDefault;constructor(e){super(),this.getDefault=e}getOrDefault(e){let t=super.get(e);return void 0===t&&(t=this.getDefault(),this.set(e,t)),t}}function Z(e,t,r,n){let i=0;Object.entries(t.topics).forEach(([e,t])=>{let n=r.topics[e];if(void 0===n)return;let s=0;if(t.inMesh){let e=t.meshTime/n.timeInMeshQuantum;e>n.timeInMeshCap&&(e=n.timeInMeshCap),s+=e*n.timeInMeshWeight}let a=t.firstMessageDeliveries;if(a>n.firstMessageDeliveriesCap&&(a=n.firstMessageDeliveriesCap),s+=a*n.firstMessageDeliveriesWeight,t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<n.meshMessageDeliveriesThreshold){let e=n.meshMessageDeliveriesThreshold-t.meshMessageDeliveries;s+=e*e*n.meshMessageDeliveriesWeight}s+=t.meshFailurePenalty*n.meshFailurePenaltyWeight+t.invalidMessageDeliveries*t.invalidMessageDeliveries*n.invalidMessageDeliveriesWeight,i+=s*n.topicWeight}),r.topicScoreCap>0&&i>r.topicScoreCap&&(i=r.topicScoreCap);let s=r.appSpecificScore(e);if(i+=s*r.appSpecificWeight,t.knownIPs.forEach(e=>{if(r.IPColocationFactorWhitelist.has(e))return;let t=n.get(e),s=null!=t?t.size:0;if(s>r.IPColocationFactorThreshold){let e=s-r.IPColocationFactorThreshold;i+=e*e*r.IPColocationFactorWeight}}),t.behaviourPenalty>r.behaviourPenaltyThreshold){let e=t.behaviourPenalty-r.behaviourPenaltyThreshold;i+=e*e*r.behaviourPenaltyWeight}return i}var J=r(1015);!function(e){e[e.unknown=0]="unknown",e[e.valid=1]="valid",e[e.invalid=2]="invalid",e[e.ignored=3]="ignored"}(m||(m={}));class Y{records;queue;constructor(){this.records=new Map,this.queue=new J}getRecord(e){return this.records.get(e)}ensureRecord(e){let t=this.records.get(e);if(null!=t)return t;t={status:m.unknown,firstSeenTsMs:Date.now(),validated:0,peers:new Set},this.records.set(e,t);let r={msgId:e,expire:Date.now()+12e4};return this.queue.push(r),t}gc(){let e=Date.now(),t=this.queue.peekFront();for(;null!=t&&t.expire<e;)this.records.delete(t.msgId),this.queue.shift(),t=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}class X{params;metrics;peerStats=new Map;peerIPs=new Q(()=>new Set);scoreCache=new Map;deliveryRecords=new Y;_backgroundInterval;scoreCacheValidityMs;computeScore;log;constructor(e,t,r,n){this.params=e,this.metrics=t,(0,q.N0)(e),this.scoreCacheValidityMs=n.scoreCacheValidityMs,this.computeScore=n.computeScore??Z,this.log=r.forComponent("libp2p:gossipsub:score")}get size(){return this.peerStats.size}start(){if(null!=this._backgroundInterval){this.log("Peer score already running");return}this._backgroundInterval=setInterval(()=>{this.background()},this.params.decayInterval),this.log("started")}stop(){if(null==this._backgroundInterval){this.log("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),this.log("stopped")}background(){this.refreshScores(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map(([e,t])=>[e,t]))}messageFirstSeenTimestampMs(e){let t=this.deliveryRecords.getRecord(e);return null!=t?t.firstSeenTsMs:null}refreshScores(){let e=Date.now(),t=this.params.decayToZero;this.peerStats.forEach((r,n)=>{if(!r.connected){e>r.expire&&(this.removeIPsForPeer(n,r.knownIPs),this.peerStats.delete(n),this.scoreCache.delete(n));return}Object.entries(r.topics).forEach(([r,n])=>{let i=this.params.topics[r];void 0!==i&&(n.firstMessageDeliveries*=i.firstMessageDeliveriesDecay,n.firstMessageDeliveries<t&&(n.firstMessageDeliveries=0),n.meshMessageDeliveries*=i.meshMessageDeliveriesDecay,n.meshMessageDeliveries<t&&(n.meshMessageDeliveries=0),n.meshFailurePenalty*=i.meshFailurePenaltyDecay,n.meshFailurePenalty<t&&(n.meshFailurePenalty=0),n.invalidMessageDeliveries*=i.invalidMessageDeliveriesDecay,n.invalidMessageDeliveries<t&&(n.invalidMessageDeliveries=0),n.inMesh&&(n.meshTime=e-n.graftTime,n.meshTime>i.meshMessageDeliveriesActivation&&(n.meshMessageDeliveriesActive=!0)))}),r.behaviourPenalty*=this.params.behaviourPenaltyDecay,r.behaviourPenalty<t&&(r.behaviourPenalty=0)})}score(e){this.metrics?.scoreFnCalls.inc();let t=this.peerStats.get(e);if(null==t)return 0;let r=Date.now(),n=this.scoreCache.get(e);if(null!=n&&n.cacheUntil>r)return n.score;this.metrics?.scoreFnRuns.inc();let i=this.computeScore(e,t,this.params,this.peerIPs),s=r+this.scoreCacheValidityMs;return null!=n?(this.metrics?.scoreCachedDelta.observe(Math.abs(i-n.score)),n.score=i,n.cacheUntil=s):this.scoreCache.set(e,{score:i,cacheUntil:s}),i}addPenalty(e,t,r){let n=this.peerStats.get(e);null!=n&&(n.behaviourPenalty+=t,this.metrics?.onScorePenalty(r))}addPeer(e){let t={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(e,t)}addIP(e,t){let r=this.peerStats.get(e);null!=r&&r.knownIPs.add(t),this.peerIPs.getOrDefault(t).add(e)}removeIP(e,t){let r=this.peerStats.get(e);null!=r&&r.knownIPs.delete(t);let n=this.peerIPs.get(t);null!=n&&(n.delete(e),0===n.size&&this.peerIPs.delete(t))}removePeer(e){let t=this.peerStats.get(e);if(null!=t){if(this.score(e)>0){this.removeIPsForPeer(e,t.knownIPs),this.peerStats.delete(e);return}Object.entries(t.topics).forEach(([e,t])=>{t.firstMessageDeliveries=0;let r=this.params.topics[e].meshMessageDeliveriesThreshold;if(t.inMesh&&t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<r){let e=r-t.meshMessageDeliveries;t.meshFailurePenalty+=e*e}t.inMesh=!1,t.meshMessageDeliveriesActive=!1}),t.connected=!1,t.expire=Date.now()+this.params.retainScore}}graft(e,t){let r=this.peerStats.get(e);if(null!=r){let e=this.getPtopicStats(r,t);null!=e&&(e.inMesh=!0,e.graftTime=Date.now(),e.meshTime=0,e.meshMessageDeliveriesActive=!1)}}prune(e,t){let r=this.peerStats.get(e);if(null!=r){let e=this.getPtopicStats(r,t);if(null!=e){let r=this.params.topics[t].meshMessageDeliveriesThreshold;if(e.meshMessageDeliveriesActive&&e.meshMessageDeliveries<r){let t=r-e.meshMessageDeliveries;e.meshFailurePenalty+=t*t}e.meshMessageDeliveriesActive=!1,e.inMesh=!1}}}validateMessage(e){this.deliveryRecords.ensureRecord(e)}deliverMessage(e,t,r){this.markFirstMessageDelivery(e,r);let n=this.deliveryRecords.ensureRecord(t),i=Date.now();if(n.status!==m.unknown){this.log("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",e,i-n.firstSeenTsMs,m[n.status]);return}n.status=m.valid,n.validated=i,n.peers.forEach(t=>{t!==e.toString()&&this.markDuplicateMessageDelivery(t,r)})}rejectInvalidMessage(e,t){this.markInvalidMessageDelivery(e,t)}rejectMessage(e,t,r,n){switch(n){case o.Error:this.markInvalidMessageDelivery(e,r);return;case o.Blacklisted:return}let i=this.deliveryRecords.ensureRecord(t);if(i.status!==m.unknown){this.log("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",e,Date.now()-i.firstSeenTsMs,m[i.status]);return}if(n===o.Ignore){i.status=m.ignored,i.peers.clear();return}i.status=m.invalid,this.markInvalidMessageDelivery(e,r),i.peers.forEach(e=>{this.markInvalidMessageDelivery(e,r)}),i.peers.clear()}duplicateMessage(e,t,r){let n=this.deliveryRecords.ensureRecord(t);if(!n.peers.has(e))switch(n.status){case m.unknown:n.peers.add(e);break;case m.valid:n.peers.add(e),this.markDuplicateMessageDelivery(e,r,n.validated);break;case m.invalid:this.markInvalidMessageDelivery(e,r);case m.ignored:}}markInvalidMessageDelivery(e,t){let r=this.peerStats.get(e);if(null!=r){let e=this.getPtopicStats(r,t);null!=e&&(e.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(e,t){let r=this.peerStats.get(e);if(null!=r){let e=this.getPtopicStats(r,t);if(null!=e){let r=this.params.topics[t].firstMessageDeliveriesCap;e.firstMessageDeliveries=Math.min(r,e.firstMessageDeliveries+1),e.inMesh&&(e.meshMessageDeliveries=Math.min(r=this.params.topics[t].meshMessageDeliveriesCap,e.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(e,t,r){let n=this.peerStats.get(e);if(null!=n){let e=void 0!==r?Date.now():0,i=this.getPtopicStats(n,t);if(null!=i&&i.inMesh){let n=this.params.topics[t];if(void 0!==r){let i=e-r,s=i>n.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(t,i,s),s)return}i.meshMessageDeliveries=Math.min(n.meshMessageDeliveriesCap,i.meshMessageDeliveries+1)}}}removeIPsForPeer(e,t){for(let r of t){let t=this.peerIPs.get(r);null!=t&&(t.delete(e),0===t.size&&this.peerIPs.delete(r))}}getPtopicStats(e,t){let r=e.topics[t];return void 0!==r?r:void 0!==this.params.topics[t]?(r={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},e.topics[t]=r,r):null}}class ee{rawStream;pushable;closeController;maxBufferSize;constructor(e,t,r){this.rawStream=e,this.pushable=(0,D.Ny)(),this.closeController=new AbortController,this.maxBufferSize=r.maxBufferSize??1/0,this.closeController.signal.addEventListener("abort",()=>{e.close().catch(t=>{e.abort(t)})}),(0,B.F)(this.pushable,this.rawStream).catch(t)}get protocol(){return this.rawStream.protocol}push(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(T.single(e))}pushPrefixed(e){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(e)}async close(){this.closeController.abort(),await this.pushable.return()}}class et{source;rawStream;closeController;constructor(e,t={}){this.rawStream=e,this.closeController=new AbortController,this.closeController.signal.addEventListener("abort",()=>{e.close().catch(t=>{e.abort(t)})}),this.source=(0,B.F)(this.rawStream,e=>M(e,t))}async close(){this.closeController.abort()}}class er{gossipsubIWantFollowupMs;msgIdToStrFn;metrics;promises=new Map;requestMsByMsg=new Map;requestMsByMsgExpire;constructor(e,t,r){this.gossipsubIWantFollowupMs=e,this.msgIdToStrFn=t,this.metrics=r,this.requestMsByMsgExpire=10*e}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(e,t){let r=Math.floor(Math.random()*t.length),n=t[r],i=this.msgIdToStrFn(n),s=this.promises.get(i);null==s&&(s=new Map,this.promises.set(i,s));let a=Date.now();s.has(e)||(s.set(e,a+this.gossipsubIWantFollowupMs),null==this.metrics||(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(i)||this.requestMsByMsg.set(i,a)))}getBrokenPromises(){let e=Date.now(),t=new Map,r=0;return this.promises.forEach((n,i)=>{n.forEach((i,s)=>{i<e&&(t.set(s,(t.get(s)??0)+1),n.delete(s),r++)}),0===n.size&&this.promises.delete(i)}),this.metrics?.iwantPromiseBroken.inc(r),t}deliverMessage(e,t=!1){this.trackMessage(e);let r=this.promises.get(e);null!=r&&(this.promises.delete(e),null!=this.metrics&&(this.metrics.iwantPromiseResolved.inc(1),t&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(r.size)))}rejectMessage(e,t){this.trackMessage(e),t!==o.Error&&this.promises.delete(e)}clear(){this.promises.clear()}prune(){let e=Date.now()-this.requestMsByMsgExpire,t=0;for(let[r,n]of this.requestMsByMsg.entries())if(n<e)this.requestMsByMsg.delete(r),t++;else break;this.metrics?.iwantMessagePruned.inc(t)}trackMessage(e){if(null!=this.metrics){let t=this.requestMsByMsg.get(e);void 0!==t&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-t)/1e3),this.requestMsByMsg.delete(e))}}}var en=r(9223),ei=r(4892),es=r(7797),ea=r(9865),eo=r(6054);let el=(0,ea.s)("libp2p-pubsub:");async function ec(e,t,r,n){switch(e.type){case a.Signing:{let s={from:e.author.toMultihash().bytes,data:n,seqno:(0,en.A)(8),topic:t,signature:void 0,key:void 0},a=(0,es.x)([el,i.Message.encode(s)]);s.signature=await e.privateKey.sign(a),s.key=e.key;let o={type:"signed",from:e.author,data:r,sequenceNumber:BigInt(`0x${(0,eo.d)(s.seqno??new Uint8Array(0),"base16")}`),topic:t,signature:s.signature,key:(0,ei.EZ)(s.key)};return{raw:s,msg:o}}case a.Anonymous:return{raw:{from:void 0,data:n,seqno:void 0,topic:t,signature:void 0,key:void 0},msg:{type:"unsigned",data:r,topic:t}};default:throw Error("Unreachable")}}async function eu(e,t){switch(e){case w.G$:if(null!=t.signature)return{valid:!1,error:l.SignaturePresent};if(null!=t.seqno)return{valid:!1,error:l.SeqnoPresent};if(null!=t.key)return{valid:!1,error:l.FromPresent};return{valid:!0,message:{type:"unsigned",topic:t.topic,data:t.data??new Uint8Array(0)}};case w.rv:{let e,r;if(null==t.seqno||8!==t.seqno.length)return{valid:!1,error:l.InvalidSeqno};if(null==t.signature)return{valid:!1,error:l.InvalidSignature};if(null==t.from)return{valid:!1,error:l.InvalidPeerId};try{e=(0,A.jD)(L.D4(t.from))}catch(e){return{valid:!1,error:l.InvalidPeerId}}if(null!=t.key){if(r=(0,ei.EZ)(t.key),void 0!==e.publicKey&&!r.equals(e.publicKey))return{valid:!1,error:l.InvalidPeerId}}else{if(null==e.publicKey)return{valid:!1,error:l.InvalidPeerId};r=e.publicKey}let n={from:t.from,data:t.data,seqno:t.seqno,topic:t.topic,signature:void 0,key:void 0},s=(0,es.x)([el,i.Message.encode(n)]);if(!await r.verify(s,t.signature))return{valid:!1,error:l.InvalidSignature};return{valid:!0,message:{type:"signed",from:e,data:t.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${(0,eo.d)(t.seqno,"base16")}`),topic:t.topic,signature:t.signature,key:null!=t.key?(0,ei.EZ)(t.key):r}}}default:throw Error("Unreachable")}}function ed(e=[],t){return{subscriptions:[],messages:e,control:void 0!==t?{graft:t.graft??[],prune:t.prune??[],ihave:t.ihave??[],iwant:t.iwant??[],idontwant:t.idontwant??[]}:void 0}}function eh(e){return void 0===e.control&&(e.control={graft:[],prune:[],ihave:[],iwant:[],idontwant:[]}),e}function ef(e){return(0,eo.d)(e,"base64")}function ep(e){if(e.length<=1)return e;let t=()=>Math.floor(Math.random()*Math.floor(e.length));for(let r=0;r<e.length;r++){let n=t(),i=e[r];e[r]=e[n],e[n]=i}return e}var eg=r(6572);let em=(e,t)=>{let r=(0,ea.s)(t.toString(16).padStart(16,"0"),"base16"),n=(0,ei.Ve)(e),i=new Uint8Array(n.byteLength+r.length);return i.set(n,0),i.set(r,n.byteLength),i};function eb(e){if("signed"!==e.type)throw Error("expected signed message type");if(null==e.sequenceNumber)throw Error("missing seqno field");return em(e.from.publicKey??e.key,e.sequenceNumber)}async function ey(e){return eg.sha256.encode(e.data)}var ex=r(3012);!function(e){e[e.ip4=4]="ip4",e[e.ip6=41]="ip6"}(b||(b={}));class ew{entries=new Map;validityMs;constructor(e){this.validityMs=e.validityMs}get size(){return this.entries.size}put(e,t){return!!this.entries.has(e)||(this.entries.set(e,{value:t,validUntilMs:Date.now()+this.validityMs}),!1)}prune(){let e=Date.now();for(let[t,r]of this.entries.entries())if(r.validUntilMs<e)this.entries.delete(t);else break}has(e){return this.entries.has(e)}get(e){let t=this.entries.get(e);return null!=t&&t.validUntilMs>=Date.now()?t.value:void 0}clear(){this.entries.clear()}}!function(e){e[e.started=0]="started",e[e.stopped=1]="stopped"}(y||(y={}));class ev extends x.X{globalSignaturePolicy;multicodecs=[j,"/meshsub/1.1.0",F];publishConfig;dataTransform;peers=new Map;streamsInbound=new Map;streamsOutbound=new Map;outboundInflightQueue=(0,D.Ny)({objectMode:!0});direct=new Set;floodsubPeers=new Set;seenCache;acceptFromWhitelist=new Map;topics=new Map;subscriptions=new Set;mesh=new Map;fanout=new Map;fanoutLastpub=new Map;gossip=new Map;control=new Map;peerhave=new Map;iasked=new Map;backoff=new Map;outbound=new Map;msgIdFn;fastMsgIdFn;msgIdToStrFn;fastMsgIdCache;publishedMessageIds;mcache;score;topicValidators=new Map;log;heartbeatTicks=0;gossipTracer;idontwantCounts=new Map;idontwants=new Map;components;directPeerInitial=null;static multicodec=j;opts;decodeRpcLimits;metrics;status={code:y.stopped};maxInboundStreams;maxOutboundStreams;runOnLimitedConnection;allowedTopics;heartbeatTimer=null;constructor(e,t={}){super();let r={fallbackToFloodsub:!0,floodPublish:!0,batchPublish:!1,tagMeshPeers:!0,doPX:!1,directPeers:[],D:6,Dlo:4,Dhi:12,Dscore:4,Dout:2,Dlazy:6,heartbeatInterval:1e3,fanoutTTL:6e4,mcacheLength:5,mcacheGossip:3,seenTTL:z,gossipsubIWantFollowupMs:3e3,prunePeers:16,pruneBackoff:6e4,unsubcribeBackoff:1e4,graftFloodThreshold:1e4,opportunisticGraftPeers:2,opportunisticGraftTicks:60,directConnectTicks:300,gossipFactor:.25,idontwantMinDataSize:512,idontwantMaxMessages:512,...t,scoreParams:(0,q.h5)(t.scoreParams),scoreThresholds:function(e={}){return{...K,...e}}(t.scoreThresholds)};if(this.components=e,this.decodeRpcLimits=r.decodeRpcLimits??H,this.globalSignaturePolicy=r.globalSignaturePolicy??w.rv,r.fallbackToFloodsub&&this.multicodecs.push(U),this.log=e.logger.forComponent(r.debugName??"libp2p:gossipsub"),this.opts=r,this.direct=new Set(r.directPeers.map(e=>e.id.toString())),this.seenCache=new ew({validityMs:r.seenTTL}),this.publishedMessageIds=new ew({validityMs:r.seenTTL}),null!=t.msgIdFn)this.msgIdFn=t.msgIdFn;else switch(this.globalSignaturePolicy){case w.rv:this.msgIdFn=eb;break;case w.G$:this.msgIdFn=ey;break;default:throw Error(`Invalid globalSignaturePolicy: ${this.globalSignaturePolicy}`)}if(null!=t.fastMsgIdFn&&(this.fastMsgIdFn=t.fastMsgIdFn,this.fastMsgIdCache=new ew({validityMs:r.seenTTL})),this.msgIdToStrFn=t.msgIdToStrFn??ef,this.mcache=t.messageCache??new $(r.mcacheGossip,r.mcacheLength,this.msgIdToStrFn),null!=t.dataTransform&&(this.dataTransform=t.dataTransform),null!=t.metricsRegister){if(null==t.metricsTopicStrToLabel)throw Error("Must set metricsTopicStrToLabel with metrics");let e=Math.max(...Object.values(r.scoreParams.topics).map(e=>e.meshMessageDeliveriesWindow),1e3),n=function(e,t,r){return{protocolsEnabled:e.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:e.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:e.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:e.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEventsFanout:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_fanout_total",help:"Number of times we include peers in a topic mesh for fanout reasons",labelNames:["topic"]}),meshPeerInclusionEventsRandom:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_random_total",help:"Number of times we include peers in a topic mesh for random reasons",labelNames:["topic"]}),meshPeerInclusionEventsSubscribed:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_subscribed_total",help:"Number of times we include peers in a topic mesh for subscribed reasons",labelNames:["topic"]}),meshPeerInclusionEventsOutbound:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_outbound_total",help:"Number of times we include peers in a topic mesh for outbound reasons",labelNames:["topic"]}),meshPeerInclusionEventsNotEnough:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_not_enough_total",help:"Number of times we include peers in a topic mesh for not_enough reasons",labelNames:["topic"]}),meshPeerInclusionEventsOpportunistic:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_opportunistic_total",help:"Number of times we include peers in a topic mesh for opportunistic reasons",labelNames:["topic"]}),meshPeerInclusionEventsUnknown:e.gauge({name:"gossipsub_mesh_peer_inclusion_events_unknown_total",help:"Number of times we include peers in a topic mesh for unknown reasons",labelNames:["topic"]}),meshPeerChurnEventsDisconnected:e.gauge({name:"gossipsub_peer_churn_events_disconnected_total",help:"Number of times we remove peers in a topic mesh for disconnected reasons",labelNames:["topic"]}),meshPeerChurnEventsBadScore:e.gauge({name:"gossipsub_peer_churn_events_bad_score_total",help:"Number of times we remove peers in a topic mesh for bad_score reasons",labelNames:["topic"]}),meshPeerChurnEventsPrune:e.gauge({name:"gossipsub_peer_churn_events_prune_total",help:"Number of times we remove peers in a topic mesh for prune reasons",labelNames:["topic"]}),meshPeerChurnEventsExcess:e.gauge({name:"gossipsub_peer_churn_events_excess_total",help:"Number of times we remove peers in a topic mesh for excess reasons",labelNames:["topic"]}),meshPeerChurnEventsUnknown:e.gauge({name:"gossipsub_peer_churn_events_unknown_total",help:"Number of times we remove peers in a topic mesh for unknown reasons",labelNames:["topic"]}),peersPerProtocol:e.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:e.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:e.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),acceptedMessagesTotal:e.gauge({name:"gossipsub_accepted_messages_total",help:"Total accepted messages for each topic",labelNames:["topic"]}),ignoredMessagesTotal:e.gauge({name:"gossipsub_ignored_messages_total",help:"Total ignored messages for each topic",labelNames:["topic"]}),rejectedMessagesTotal:e.gauge({name:"gossipsub_rejected_messages_total",help:"Total rejected messages for each topic",labelNames:["topic"]}),unknownValidationResultsTotal:e.gauge({name:"gossipsub_unknown_validation_results_total",help:"Total unknown validation results for each topic",labelNames:["topic"]}),asyncValidationMcacheHit:e.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),asyncValidationDelayFromFirstSeenSec:e.histogram({name:"gossipsub_async_validation_delay_from_first_seen",help:"Async validation report delay from first seen in second",buckets:[.01,.03,.1,.3,1,3,10]}),asyncValidationUnknownFirstSeen:e.gauge({name:"gossipsub_async_validation_unknown_first_seen_count_total",help:"Async validation report unknown first seen value for message"}),peerReadStreamError:e.gauge({name:"gossipsub_peer_read_stream_err_count_total",help:"Peer read stream error"}),rpcRecvBytes:e.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:e.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:e.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:e.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:e.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:e.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:e.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:e.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:e.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcDataError:e.gauge({name:"gossipsub_rpc_data_err_count_total",help:"RPC data error"}),rpcRecvError:e.gauge({name:"gossipsub_rpc_recv_err_count_total",help:"RPC recv error"}),rpcRecvNotAccepted:e.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:e.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:e.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:e.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:e.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:e.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:e.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:e.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:e.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:e.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),rpcSentIDontWant:e.gauge({name:"gossipsub_rpc_sent_idontwant_total",help:"RPC sent"}),msgPublishCount:e.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeersByTopic:e.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),directPeersPublishedTotal:e.gauge({name:"gossipsub_direct_peers_published_total",help:"Total direct peers that we publish a msg to",labelNames:["topic"]}),floodsubPeersPublishedTotal:e.gauge({name:"gossipsub_floodsub_peers_published_total",help:"Total floodsub peers that we publish a msg to",labelNames:["topic"]}),meshPeersPublishedTotal:e.gauge({name:"gossipsub_mesh_peers_published_total",help:"Total mesh peers that we publish a msg to",labelNames:["topic"]}),fanoutPeersPublishedTotal:e.gauge({name:"gossipsub_fanout_peers_published_total",help:"Total fanout peers that we publish a msg to",labelNames:["topic"]}),msgPublishBytes:e.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgPublishTime:e.histogram({name:"gossipsub_msg_publish_seconds",help:"Total time in seconds to publish a message",buckets:[.001,.002,.005,.01,.1,.5,1],labelNames:["topic"]}),msgForwardCount:e.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:e.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:e.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedError:e.gauge({name:"gossipsub_msg_received_error_total",help:"Total count of recv msgs error",labelNames:["topic"]}),prevalidationInvalidTotal:e.gauge({name:"gossipsub_pre_validation_invalid_total",help:"Total count of invalid messages received",labelNames:["topic"]}),prevalidationValidTotal:e.gauge({name:"gossipsub_pre_validation_valid_total",help:"Total count of valid messages received",labelNames:["topic"]}),prevalidationDuplicateTotal:e.gauge({name:"gossipsub_pre_validation_duplicate_total",help:"Total count of duplicate messages received",labelNames:["topic"]}),prevalidationUnknownTotal:e.gauge({name:"gossipsub_pre_validation_unknown_status_total",help:"Total count of unknown_status messages received",labelNames:["topic"]}),msgReceivedInvalid:e.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["error"]}),msgReceivedInvalidByTopic:e.gauge({name:"gossipsub_msg_received_invalid_by_topic_total",help:"Tracks specific invalid message by topic",labelNames:["topic"]}),duplicateMsgDeliveryDelay:e.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*r.maxMeshMessageDeliveriesWindowSec,.5*r.maxMeshMessageDeliveriesWindowSec,Number(r.maxMeshMessageDeliveriesWindowSec),2*r.maxMeshMessageDeliveriesWindowSec,4*r.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:e.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),duplicateMsgIgnored:e.gauge({name:"gossisub_ignored_published_duplicate_msgs_total",help:"Total count of published duplicate message ignored by topic",labelNames:["topic"]}),scoreFnCalls:e.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:e.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:e.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:e.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:e.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores"}),scoreWeights:e.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:e.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:e.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:e.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*r.behaviourPenaltyThreshold,.5*r.behaviourPenaltyThreshold,Number(r.behaviourPenaltyThreshold),2*r.behaviourPenaltyThreshold,4*r.behaviourPenaltyThreshold]}),ihaveRcvIgnored:e.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:e.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:e.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:e.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),idontwantRcvMsgids:e.gauge({name:"gossipsub_idontwant_rcv_msgids_total",help:"Total received IDONTWANT messages"}),idontwantRcvDonthaveMsgids:e.gauge({name:"gossipsub_idontwant_rcv_dont_have_msgids_total",help:"Total received IDONTWANT messageIDs that we do not have in mcache"}),iwantPromiseStarted:e.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:e.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:e.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:e.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:e.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:e.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:e.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*r.gossipPromiseExpireSec,Number(r.gossipPromiseExpireSec),2*r.gossipPromiseExpireSec,4*r.gossipPromiseExpireSec]}),iwantPromiseUntracked:e.gauge({name:"gossip_iwant_promise_untracked",help:"Total count of untracked IWANT promise"}),connectedPeersBackoffSec:e.histogram({name:"gossipsub_connected_peers_backoff_seconds",help:"Backoff time in seconds",buckets:[1,2,4,10,20,60,120]}),cacheSize:e.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:e.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:e.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:e.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:e.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:t,toTopic(e){return this.topicStrToLabel.get(e)??e},onJoin(e){this.topicSubscriptionStatus.set({topicStr:e},1),this.meshPeerCounts.set({topicStr:e},0)},onLeave(e){this.topicSubscriptionStatus.set({topicStr:e},0),this.meshPeerCounts.set({topicStr:e},0)},onAddToMesh(e,t,r){let n=this.toTopic(e);switch(t){case d.Fanout:this.meshPeerInclusionEventsFanout.inc({topic:n},r);break;case d.Random:this.meshPeerInclusionEventsRandom.inc({topic:n},r);break;case d.Subscribed:this.meshPeerInclusionEventsSubscribed.inc({topic:n},r);break;case d.Outbound:this.meshPeerInclusionEventsOutbound.inc({topic:n},r);break;case d.NotEnough:this.meshPeerInclusionEventsNotEnough.inc({topic:n},r);break;case d.Opportunistic:this.meshPeerInclusionEventsOpportunistic.inc({topic:n},r);break;default:this.meshPeerInclusionEventsUnknown.inc({topic:n},r)}},onRemoveFromMesh(e,t,r){let n=this.toTopic(e);switch(t){case h.Dc:this.meshPeerChurnEventsDisconnected.inc({topic:n},r);break;case h.BadScore:this.meshPeerChurnEventsBadScore.inc({topic:n},r);break;case h.Prune:this.meshPeerChurnEventsPrune.inc({topic:n},r);break;case h.Excess:this.meshPeerChurnEventsExcess.inc({topic:n},r);break;default:this.meshPeerChurnEventsUnknown.inc({topic:n},r)}},onReportValidation(e,t,r){if(this.asyncValidationMcacheHit.inc({hit:null!=e?"hit":"miss"}),null!=e){let r=this.toTopic(e.message.topic);switch(t){case w.z8.Accept:this.acceptedMessagesTotal.inc({topic:r});break;case w.z8.Ignore:this.ignoredMessagesTotal.inc({topic:r});break;case w.z8.Reject:this.rejectedMessagesTotal.inc({topic:r});break;default:this.unknownValidationResultsTotal.inc({topic:r})}}null!=r?this.asyncValidationDelayFromFirstSeenSec.observe((Date.now()-r)/1e3):this.asyncValidationUnknownFirstSeen.inc()},onScorePenalty(e){this.scoringPenalties.inc({penalty:e},1)},onIhaveRcv(e,t,r){let n=this.toTopic(e);this.ihaveRcvMsgids.inc({topic:n},t),this.ihaveRcvNotSeenMsgids.inc({topic:n},r)},onIwantRcv(e,t){for(let[t,r]of e){let e=this.toTopic(t);this.iwantRcvMsgids.inc({topic:e},r)}this.iwantRcvDonthaveMsgids.inc(t)},onIdontwantRcv(e,t){this.idontwantRcvMsgids.inc(e),this.idontwantRcvDonthaveMsgids.inc(t)},onForwardMsg(e,t){let r=this.toTopic(e);this.msgForwardCount.inc({topic:r},1),this.msgForwardPeers.inc({topic:r},t)},onPublishMsg(e,t,r,n,i){let s=this.toTopic(e);this.msgPublishCount.inc({topic:s},1),this.msgPublishBytes.inc({topic:s},r*n),this.msgPublishPeersByTopic.inc({topic:s},r),this.directPeersPublishedTotal.inc({topic:s},t.direct),this.floodsubPeersPublishedTotal.inc({topic:s},t.floodsub),this.meshPeersPublishedTotal.inc({topic:s},t.mesh),this.fanoutPeersPublishedTotal.inc({topic:s},t.fanout),this.msgPublishTime.observe({topic:s},i/1e3)},onMsgRecvPreValidation(e){let t=this.toTopic(e);this.msgReceivedPreValidation.inc({topic:t},1)},onMsgRecvError(e){let t=this.toTopic(e);this.msgReceivedError.inc({topic:t},1)},onPrevalidationResult(e,t){let r=this.toTopic(e);switch(t){case c.duplicate:this.prevalidationDuplicateTotal.inc({topic:r});break;case c.invalid:this.prevalidationInvalidTotal.inc({topic:r});break;case c.valid:this.prevalidationValidTotal.inc({topic:r});break;default:this.prevalidationUnknownTotal.inc({topic:r})}},onMsgRecvInvalid(e,t){let r=this.toTopic(e),n=t.reason===o.Error?t.error:t.reason;this.msgReceivedInvalid.inc({error:n},1),this.msgReceivedInvalidByTopic.inc({topic:r},1)},onDuplicateMsgDelivery(e,t,r){let n=this.toTopic(e);this.duplicateMsgDeliveryDelay.observe({topic:n},t/1e3),r&&this.duplicateMsgLateDelivery.inc({topic:n},1)},onPublishDuplicateMsg(e){let t=this.toTopic(e);this.duplicateMsgIgnored.inc({topic:t},1)},onPeerReadStreamError(){this.peerReadStreamError.inc(1)},onRpcRecvError(){this.rpcRecvError.inc(1)},onRpcDataError(){this.rpcDataError.inc(1)},onRpcRecv(e,t){this.rpcRecvBytes.inc(t),this.rpcRecvCount.inc(1),null!=e.subscriptions&&this.rpcRecvSubscription.inc(e.subscriptions.length),null!=e.messages&&this.rpcRecvMessage.inc(e.messages.length),null!=e.control&&(this.rpcRecvControl.inc(1),null!=e.control.ihave&&this.rpcRecvIHave.inc(e.control.ihave.length),null!=e.control.iwant&&this.rpcRecvIWant.inc(e.control.iwant.length),null!=e.control.graft&&this.rpcRecvGraft.inc(e.control.graft.length),null!=e.control.prune&&this.rpcRecvPrune.inc(e.control.prune.length))},onRpcSent(e,t){if(this.rpcSentBytes.inc(t),this.rpcSentCount.inc(1),null!=e.subscriptions&&this.rpcSentSubscription.inc(e.subscriptions.length),null!=e.messages&&this.rpcSentMessage.inc(e.messages.length),null!=e.control){let t=e.control.ihave?.length??0,r=e.control.iwant?.length??0,n=e.control.graft?.length??0,i=e.control.prune?.length??0,s=e.control.idontwant?.length??0;t>0&&this.rpcSentIHave.inc(t),r>0&&this.rpcSentIWant.inc(r),n>0&&this.rpcSentGraft.inc(n),i>0&&this.rpcSentPrune.inc(i),s>0&&this.rpcSentIDontWant.inc(s),(t>0||r>0||n>0||i>0||s>0)&&this.rpcSentControl.inc(1)}},registerScores(e,t){let r=0,n=0,i=0,s=0;for(let a of e)a>=t.graylistThreshold&&r++,a>=t.publishThreshold&&n++,a>=t.gossipThreshold&&i++,a>=0&&s++;this.peersByScoreThreshold.set({threshold:g.graylist},r),this.peersByScoreThreshold.set({threshold:g.publish},n),this.peersByScoreThreshold.set({threshold:g.gossip},i),this.peersByScoreThreshold.set({threshold:g.mesh},s),this.score.set(e)},registerScoreWeights(e){for(let[t,r]of e.byTopic)this.scoreWeights.set({topic:t,p:"p1"},r.p1w),this.scoreWeights.set({topic:t,p:"p2"},r.p2w),this.scoreWeights.set({topic:t,p:"p3"},r.p3w),this.scoreWeights.set({topic:t,p:"p3b"},r.p3bw),this.scoreWeights.set({topic:t,p:"p4"},r.p4w);this.scoreWeights.set({p:"p5"},e.p5w),this.scoreWeights.set({p:"p6"},e.p6w),this.scoreWeights.set({p:"p7"},e.p7w)},registerScorePerMesh(e,t){let r=new Map;for(let[n,i]of(e.forEach((e,t)=>{let n=this.topicStrToLabel.get(t)??"unknown",i=r.get(n);null==i&&(i=new Set,r.set(n,i)),e.forEach(e=>i?.add(e))}),r)){let e=[];i.forEach(r=>{e.push(t.get(r)??0)}),this.scorePerMesh.set({topic:n},e)}}}}(t.metricsRegister,t.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:r.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:e/1e3});for(let e of(n.mcacheSize.addCollect(()=>{this.onScrapeMetrics(n)}),this.multicodecs))n.protocolsEnabled.set({protocol:e},1);this.metrics=n}else this.metrics=null;this.gossipTracer=new er(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new X(this.opts.scoreParams,this.metrics,this.components.logger,{scoreCacheValidityMs:r.heartbeatInterval}),this.maxInboundStreams=t.maxInboundStreams,this.maxOutboundStreams=t.maxOutboundStreams,this.runOnLimitedConnection=t.runOnLimitedConnection,this.allowedTopics=null!=r.allowedTopics?new Set(r.allowedTopics):null}[Symbol.toStringTag]="@chainsafe/libp2p-gossipsub";[v.Ch]=["@libp2p/pubsub"];[v.VM]=["@libp2p/identify"];getPeers(){return[...this.peers.values()]}isStarted(){return this.status.code===y.started}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=function(e,t,r){switch(e){case w.rv:return{type:a.Signing,author:t,key:(0,ei.Ve)(r.publicKey),privateKey:r};case w.G$:return{type:a.Anonymous};default:throw Error(`Unknown signature policy "${e}"`)}}(this.globalSignaturePolicy,this.components.peerId,this.components.privateKey),this.outboundInflightQueue=(0,D.Ny)({objectMode:!0}),(0,B.F)(this.outboundInflightQueue,async e=>{for await(let{peerId:t,connection:r}of e)await this.createOutboundStream(t,r)}).catch(e=>{this.log.error("outbound inflight queue error",e)}),await Promise.all(this.opts.directPeers.map(async e=>{await this.components.peerStore.merge(e.id,{multiaddrs:e.addrs})}));let e=this.components.registrar;await Promise.all(this.multicodecs.map(async t=>e.handle(t,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnection})));let t={onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this),notifyOnLimitedConnection:this.runOnLimitedConnection},r=await Promise.all(this.multicodecs.map(async r=>e.register(r,t))),n=setTimeout(this.runHeartbeat,100);this.status={code:y.started,registrarTopologyIds:r,heartbeatTimeout:n,hearbeatStartMs:Date.now()+100},this.score.start(),this.directPeerInitial=setTimeout(()=>{Promise.resolve().then(async()=>{await Promise.all(Array.from(this.direct).map(async e=>this.connect(e)))}).catch(e=>{this.log(e)})},1e3),this.opts.tagMeshPeers&&(this.addEventListener("gossipsub:graft",this.tagMeshPeer),this.addEventListener("gossipsub:prune",this.untagMeshPeer)),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==y.started)return;let{registrarTopologyIds:e}=this.status;this.status={code:y.stopped},this.opts.tagMeshPeers&&(this.removeEventListener("gossipsub:graft",this.tagMeshPeer),this.removeEventListener("gossipsub:prune",this.untagMeshPeer));let t=this.components.registrar;await Promise.all(this.multicodecs.map(async e=>t.unhandle(e))),e.forEach(e=>{t.unregister(e)}),this.outboundInflightQueue.end();let r=[];for(let e of this.streamsOutbound.values())r.push(e.close());for(let e of(this.streamsOutbound.clear(),this.streamsInbound.values()))r.push(e.close());this.streamsInbound.clear(),await Promise.all(r),this.peers.clear(),this.subscriptions.clear(),null!=this.heartbeatTimer&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),null!=this.fastMsgIdCache&&this.fastMsgIdCache.clear(),null!=this.directPeerInitial&&clearTimeout(this.directPeerInitial),this.idontwantCounts.clear(),this.idontwants.clear(),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:e,connection:t}){if(!this.isStarted())return;let r=t.remotePeer;this.addPeer(r,t.direction,t.remoteAddr),this.createInboundStream(r,e),this.outboundInflightQueue.push({peerId:r,connection:t})}onPeerConnected(e,t){this.metrics?.newConnectionCount.inc({status:t.status}),this.isStarted()&&"open"===t.status&&(this.addPeer(e,t.direction,t.remoteAddr),this.outboundInflightQueue.push({peerId:e,connection:t}))}onPeerDisconnected(e){this.log("connection ended %p",e),this.removePeer(e)}async createOutboundStream(e,t){if(!this.isStarted())return;let r=e.toString();if(!(!this.peers.has(r)||this.streamsOutbound.has(r)))try{let n=new ee(await t.newStream(this.multicodecs,{runOnLimitedConnection:this.runOnLimitedConnection}),e=>{this.log.error("outbound pipe error",e)},{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",e),this.streamsOutbound.set(r,n);let i=n.protocol;i===U&&this.floodsubPeers.add(r),this.metrics?.peersPerProtocol.inc({protocol:i},1),this.subscriptions.size>0&&(this.log("send subscriptions to",r),this.sendSubscriptions(r,Array.from(this.subscriptions),!0))}catch(e){this.log.error("createOutboundStream error",e)}}createInboundStream(e,t){if(!this.isStarted())return;let r=e.toString();if(!this.peers.has(r))return;let n=this.streamsInbound.get(r);void 0!==n&&(this.log("replacing existing inbound steam %s",r),n.close().catch(e=>{this.log.error(e)})),this.log("create inbound stream %s",r);let i=new et(t,{maxDataLength:this.opts.maxInboundDataLength});this.streamsInbound.set(r,i),this.pipePeerReadStream(e,i.source).catch(e=>{this.log(e)})}addPeer(e,t,r){let n=e.toString();if(!this.peers.has(n)){this.log("new peer %p",e),this.peers.set(n,e),this.score.addPeer(n);let i=function(e){for(let t of e.tuples())switch(t[0]){case b.ip4:case b.ip6:return(0,ex.cR)(t[0],t[1])}return null}(r);null!==i?this.score.addIP(n,i):this.log("Added peer has no IP in current address %s %s",n,r.toString()),this.outbound.has(n)||this.outbound.set(n,"outbound"===t)}}removePeer(e){let t=e.toString();if(!this.peers.has(t))return;this.log("delete peer %p",e),this.peers.delete(t);let r=this.streamsOutbound.get(t),n=this.streamsInbound.get(t);for(let e of(null!=r&&this.metrics?.peersPerProtocol.inc({protocol:r.protocol},-1),r?.close().catch(e=>{this.log.error(e)}),n?.close().catch(e=>{this.log.error(e)}),this.streamsOutbound.delete(t),this.streamsInbound.delete(t),this.topics.values()))e.delete(t);for(let[e,r]of this.mesh)r.delete(t)&&this.metrics?.onRemoveFromMesh(e,h.Dc,1);for(let e of this.fanout.values())e.delete(t);this.floodsubPeers.delete(t),this.gossip.delete(t),this.control.delete(t),this.outbound.delete(t),this.idontwantCounts.delete(t),this.idontwants.delete(t),this.score.removePeer(t),this.acceptFromWhitelist.delete(t)}get started(){return this.status.code===y.started}getMeshPeers(e){let t=this.mesh.get(e);return null!=t?Array.from(t):[]}getSubscribers(e){let t=this.topics.get(e);return(null!=t?Array.from(t):[]).map(e=>this.peers.get(e)??(0,A.XL)(e))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(e,t){try{await (0,B.F)(t,async t=>{for await(let r of t)try{let t=r.subarray(),n=i.decode(t,{limits:{subscriptions:this.decodeRpcLimits.maxSubscriptions,messages:this.decodeRpcLimits.maxMessages,control$:{ihave:this.decodeRpcLimits.maxIhaveMessageIDs,iwant:this.decodeRpcLimits.maxIwantMessageIDs,graft:this.decodeRpcLimits.maxControlMessages,prune:this.decodeRpcLimits.maxControlMessages,prune$:{peers:this.decodeRpcLimits.maxPeerInfos},idontwant:this.decodeRpcLimits.maxControlMessages,idontwant$:{messageIDs:this.decodeRpcLimits.maxIdontwantMessageIDs}}}});if(this.metrics?.onRpcRecv(n,t.length),this.opts.awaitRpcHandler)try{await this.handleReceivedRpc(e,n)}catch(e){this.metrics?.onRpcRecvError(),this.log(e)}else this.handleReceivedRpc(e,n).catch(e=>{this.metrics?.onRpcRecvError(),this.log(e)})}catch(e){this.metrics?.onRpcDataError(),this.log(e)}})}catch(t){this.metrics?.onPeerReadStreamError(),this.handlePeerReadStreamError(t,e)}}handlePeerReadStreamError(e,t){this.log.error(e),this.onPeerDisconnected(t)}async handleReceivedRpc(e,t){if(!this.acceptFrom(e.toString())){this.log("received message from unacceptable peer %p",e),this.metrics?.rpcRecvNotAccepted.inc();return}let r=null!=t.subscriptions?t.subscriptions.length:0,n=null!=t.messages?t.messages.length:0,i=0,s=0,a=0,o=0;if(null!=t.control&&(null!=t.control.ihave&&(i=t.control.ihave.length),null!=t.control.iwant&&(s=t.control.iwant.length),null!=t.control.graft&&(a=t.control.graft.length),null!=t.control.prune&&(o=t.control.prune.length)),this.log(`rpc.from ${e.toString()} subscriptions ${r} messages ${n} ihave ${i} iwant ${s} graft ${a} prune ${o}`),null!=t.subscriptions&&t.subscriptions.length>0){let r=[];t.subscriptions.forEach(t=>{let n=t.topic,i=!0===t.subscribe;if(null!=n){if(null!=this.allowedTopics&&!this.allowedTopics.has(n))return;this.handleReceivedSubscription(e,n,i),r.push({topic:n,subscribe:i})}}),this.safeDispatchEvent("subscription-change",{detail:{peerId:e,subscriptions:r}})}for(let r of t.messages){if(null!=this.allowedTopics&&!this.allowedTopics.has(r.topic))continue;let t=this.handleReceivedMessage(e,r).catch(e=>{this.metrics?.onMsgRecvError(r.topic),this.log(e)});this.opts.awaitRpcMessageHandler&&await t}null!=t.control&&await this.handleControlMessage(e.toString(),t.control)}handleReceivedSubscription(e,t,r){this.log("subscription update from %p topic %s",e,t);let n=this.topics.get(t);null==n&&(n=new Set,this.topics.set(t,n)),r?n.add(e.toString()):n.delete(e.toString())}async handleReceivedMessage(e,t){this.metrics?.onMsgRecvPreValidation(t.topic);let r=await this.validateReceivedMessage(e,t);this.metrics?.onPrevalidationResult(t.topic,r.code);let n=r.code;switch(n){case c.duplicate:this.score.duplicateMessage(e.toString(),r.msgIdStr,t.topic),this.gossipTracer.deliverMessage(r.msgIdStr,!0),this.mcache.observeDuplicate(r.msgIdStr,e.toString());return;case c.invalid:if(null!=r.msgIdStr){let n=r.msgIdStr;this.score.rejectMessage(e.toString(),n,t.topic,r.reason),this.gossipTracer.rejectMessage(n,r.reason)}else this.score.rejectInvalidMessage(e.toString(),t.topic);this.metrics?.onMsgRecvInvalid(t.topic,r);return;case c.valid:this.score.validateMessage(r.messageId.msgIdStr),this.gossipTracer.deliverMessage(r.messageId.msgIdStr),this.mcache.put(r.messageId,t,!this.opts.asyncValidation),this.subscriptions.has(t.topic)&&(!this.components.peerId.equals(e)||this.opts.emitSelf)&&(super.dispatchEvent(new CustomEvent("gossipsub:message",{detail:{propagationSource:e,msgId:r.messageId.msgIdStr,msg:r.msg}})),super.dispatchEvent(new CustomEvent("message",{detail:r.msg}))),this.opts.asyncValidation||this.forwardMessage(r.messageId.msgIdStr,t,e.toString());break;default:throw Error(`Invalid validation result: ${n}`)}}async validateReceivedMessage(e,t){let r=this.fastMsgIdFn?.(t),n=void 0!==r?this.fastMsgIdCache?.get(r):void 0;if(null!=n)return{code:c.duplicate,msgIdStr:n};let i=await eu(this.globalSignaturePolicy,t);if(!i.valid)return{code:c.invalid,reason:o.Error,error:i.error};let s=i.message;try{null!=this.dataTransform&&(s.data=this.dataTransform.inboundTransform(t.topic,s.data))}catch(e){return this.log("Invalid message, transform failed",e),{code:c.invalid,reason:o.Error,error:l.TransformFailed}}let a=await this.msgIdFn(s),u=this.msgIdToStrFn(a);if(void 0!==r&&null!=this.fastMsgIdCache&&this.fastMsgIdCache.put(r,u)&&this.metrics?.fastMsgIdCacheCollision.inc(),this.seenCache.has(u))return{code:c.duplicate,msgIdStr:u};this.seenCache.put(u),(t.data?.length??0)>=this.opts.idontwantMinDataSize&&this.sendIDontWants(a,t.topic,e.toString());let d=this.topicValidators.get(t.topic);if(null!=d){let t;try{t=await d(e,s)}catch(r){let e=r.code;"ERR_TOPIC_VALIDATOR_IGNORE"===e&&(t=w.z8.Ignore),t="ERR_TOPIC_VALIDATOR_REJECT"===e?w.z8.Reject:w.z8.Ignore}if(t!==w.z8.Accept)return{code:c.invalid,reason:V(t),msgIdStr:u}}return{code:c.valid,messageId:{msgId:a,msgIdStr:u},msg:s}}getScore(e){return this.score.score(e)}sendSubscriptions(e,t,r){this.sendRpc(e,{subscriptions:t.map(e=>({topic:e,subscribe:r})),messages:[]})}async handleControlMessage(e,t){if(void 0===t)return;let r=t.ihave?.length>0?this.handleIHave(e,t.ihave):[],n=t.iwant?.length>0?this.handleIWant(e,t.iwant):[],i=t.graft?.length>0?await this.handleGraft(e,t.graft):[];if(t.prune?.length>0&&await this.handlePrune(e,t.prune),t.idontwant?.length>0&&this.handleIdontwant(e,t.idontwant),0===r.length&&0===n.length&&0===i.length)return;let s=this.sendRpc(e,ed(n,{iwant:r,prune:i})),a=r[0]?.messageIDs;null!=a&&(s?this.gossipTracer.addPromise(e,a):this.metrics?.iwantPromiseUntracked.inc(1))}acceptFrom(e){if(this.direct.has(e))return!0;let t=Date.now(),r=this.acceptFromWhitelist.get(e);if(null!=r&&r.messagesAccepted<128&&r.acceptUntil>=t)return r.messagesAccepted+=1,!0;let n=this.score.score(e);return n>=0?this.acceptFromWhitelist.set(e,{messagesAccepted:0,acceptUntil:t+1e3}):this.acceptFromWhitelist.delete(e),n>=this.opts.scoreThresholds.graylistThreshold}handleIHave(e,t){if(0===t.length)return[];let r=this.score.score(e);if(r<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",e,r),this.metrics?.ihaveRcvIgnored.inc({reason:p.LowScore}),[];let n=(this.peerhave.get(e)??0)+1;if(this.peerhave.set(e,n),n>10)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",e,n),this.metrics?.ihaveRcvIgnored.inc({reason:p.MaxIhave}),[];let i=this.iasked.get(e)??0;if(i>=5e3)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",e,i),this.metrics?.ihaveRcvIgnored.inc({reason:p.MaxIasked}),[];let s=new Map;if(t.forEach(({topicID:e,messageIDs:t})=>{if(null==e||null==t||!this.mesh.has(e))return;let r=0;t.forEach(e=>{let t=this.msgIdToStrFn(e);!this.seenCache.has(t)&&(s.set(t,e),r++)}),this.metrics?.onIhaveRcv(e,t.length,r)}),0===s.size)return[];let a=s.size;a+i>5e3&&(a=5e3-i),this.log("IHAVE: Asking for %d out of %d messages from %s",a,s.size,e);let o=Array.from(s.values());return ep(o),o=o.slice(0,a),this.iasked.set(e,i+a),[{messageIDs:o}]}handleIWant(e,t){if(0===t.length)return[];let r=this.score.score(e);if(r<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",e,r),[];let n=new Map,i=new Map,s=0;return(t.forEach(({messageIDs:t})=>{t?.forEach(t=>{let r=this.msgIdToStrFn(t),a=this.mcache.getWithIWantCount(r,e);if(null==a){s++;return}if(i.set(a.msg.topic,1+(i.get(a.msg.topic)??0)),a.count>3){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",e,t);return}n.set(r,a.msg)})}),this.metrics?.onIwantRcv(i,s),0===n.size)?(this.log("IWANT: Could not provide any wanted messages to %s",e),[]):(this.log("IWANT: Sending %d messages to %s",n.size,e),Array.from(n.values()))}async handleGraft(e,t){let r=[],n=this.score.score(e),i=Date.now(),s=this.opts.doPX;return(t.forEach(({topicID:t})=>{if(null==t)return;let a=this.mesh.get(t);if(null==a){s=!1;return}if(a.has(e))return;let o=this.backoff.get(t)?.get(e);this.direct.has(e)?(this.log("GRAFT: ignoring request from direct peer %s",e),r.push(t),s=!1):"number"==typeof o&&i<o?(this.log("GRAFT: ignoring backed off peer %s",e),this.score.addPenalty(e,1,f.GraftBackoff),s=!1,i<o+this.opts.graftFloodThreshold-this.opts.pruneBackoff&&this.score.addPenalty(e,1,f.GraftBackoff),this.addBackoff(e,t),r.push(t)):n<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",e,n,t),r.push(t),s=!1,this.addBackoff(e,t)):a.size>=this.opts.Dhi&&!this.outbound.get(e)?(r.push(t),this.addBackoff(e,t)):(this.log("GRAFT: Add mesh link from %s in %s",e,t),this.score.graft(e,t),a.add(e),this.metrics?.onAddToMesh(t,d.Subscribed,1)),this.safeDispatchEvent("gossipsub:graft",{detail:{peerId:e,topic:t,direction:"inbound"}})}),0===r.length)?[]:Promise.all(r.map(async t=>this.makePrune(e,t,s,!1)))}async handlePrune(e,t){let r=this.score.score(e);for(let{topicID:n,backoff:i,peers:s}of t){if(null==n)continue;let t=this.mesh.get(n);if(null==t)return;this.log("PRUNE: Remove mesh link to %s in %s",e,n),this.score.prune(e,n),t.has(e)&&(t.delete(e),this.metrics?.onRemoveFromMesh(n,h.Prune,1)),"number"==typeof i&&i>0?this.doAddBackoff(e,n,1e3*i):this.addBackoff(e,n),null!=s&&s.length>0&&(r<this.opts.scoreThresholds.acceptPXThreshold?this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",e,r,n):await this.pxConnect(s)),this.safeDispatchEvent("gossipsub:prune",{detail:{peerId:e,topic:n,direction:"inbound"}})}}handleIdontwant(e,t){let r=this.idontwantCounts.get(e)??0;if(r>=this.opts.idontwantMaxMessages)return;let n=r,i=this.idontwants.get(e);null==i&&(i=new Map,this.idontwants.set(e,i));let s=0;e:for(let{messageIDs:e}of t)for(let t of e){if(r>=this.opts.idontwantMaxMessages)break e;r++;let e=this.msgIdToStrFn(t);i.set(e,this.heartbeatTicks),!this.mcache.msgs.has(e)&&s++}this.idontwantCounts.set(e,r);let a=r-n;this.metrics?.onIdontwantRcv(a,s)}addBackoff(e,t){this.doAddBackoff(e,t,this.opts.pruneBackoff)}doAddBackoff(e,t,r){let n=this.backoff.get(t);null==n&&(n=new Map,this.backoff.set(t,n));let i=Date.now()+r;(n.get(e)??0)<i&&n.set(e,i)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((e,t)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",t,e),this.score.addPenalty(t,e,f.BrokenPromise)})}clearBackoff(){if(this.heartbeatTicks%15!=0)return;let e=Date.now();this.backoff.forEach((t,r)=>{t.forEach((r,n)=>{r+ +this.opts.heartbeatInterval<e&&t.delete(n)}),0===t.size&&this.backoff.delete(r)})}async directConnect(){let e=[];this.direct.forEach(t=>{this.streamsOutbound.has(t)||e.push(t)}),await Promise.all(e.map(async e=>this.connect(e)))}async pxConnect(e){e.length>this.opts.prunePeers&&(ep(e),e=e.slice(0,this.opts.prunePeers));let t=[];await Promise.all(e.map(async e=>{if(null==e.peerID)return;let r=(0,A.jD)(L.D4(e.peerID)),n=r.toString();if(!this.peers.has(n)){if(null==e.signedPeerRecord){t.push(n);return}try{if(!await this.components.peerStore.consumePeerRecord(e.signedPeerRecord,r)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}t.push(n)}catch(e){this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}})),0!==t.length&&await Promise.all(t.map(async e=>this.connect(e)))}async connect(e){this.log("Initiating connection with %s",e);let t=(0,A.XL)(e),r=await this.components.connectionManager.openConnection(t);for(let e of this.multicodecs)for(let n of this.components.registrar.getTopologies(e))n.onConnect?.(t,r)}subscribe(e){if(this.status.code!==y.started)throw Error("Pubsub has not started");if(!this.subscriptions.has(e))for(let t of(this.subscriptions.add(e),this.peers.keys()))this.sendSubscriptions(t,[e],!0);this.join(e)}unsubscribe(e){if(this.status.code!==y.started)throw Error("Pubsub is not started");let t=this.subscriptions.delete(e);if(this.log("unsubscribe from %s - am subscribed %s",e,t),t)for(let t of this.peers.keys())this.sendSubscriptions(t,[e],!1);this.leave(e)}join(e){if(this.status.code!==y.started)throw Error("Gossipsub has not started");if(this.mesh.has(e))return;this.log("JOIN %s",e),this.metrics?.onJoin(e);let t=new Set,r=this.backoff.get(e),n=this.fanout.get(e);if(null!=n&&(this.fanout.delete(e),this.fanoutLastpub.delete(e),n.forEach(e=>{!this.direct.has(e)&&this.score.score(e)>=0&&r?.has(e)!==!0&&t.add(e)}),this.metrics?.onAddToMesh(e,d.Fanout,t.size)),t.size<this.opts.D){let n=t.size;this.getRandomGossipPeers(e,this.opts.D,e=>!t.has(e)&&!this.direct.has(e)&&this.score.score(e)>=0&&r?.has(e)!==!0).forEach(e=>{t.add(e)}),this.metrics?.onAddToMesh(e,d.Random,t.size-n)}this.mesh.set(e,t),t.forEach(t=>{this.log("JOIN: Add mesh link to %s in %s",t,e),this.sendGraft(t,e)})}leave(e){if(this.status.code!==y.started)throw Error("Gossipsub has not started");this.log("LEAVE %s",e),this.metrics?.onLeave(e);let t=this.mesh.get(e);null!=t&&(Promise.all(Array.from(t).map(async t=>{this.log("LEAVE: Remove mesh link to %s in %s",t,e),await this.sendPrune(t,e)})).catch(e=>{this.log("Error sending prunes to mesh peers",e)}),this.mesh.delete(e))}selectPeersToForward(e,t,r){let n=new Set,i=this.topics.get(e);null!=i&&(this.direct.forEach(e=>{i.has(e)&&t!==e&&!r?.has(e)&&n.add(e)}),this.floodsubPeers.forEach(e=>{i.has(e)&&t!==e&&!r?.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&n.add(e)}));let s=this.mesh.get(e);return null!=s&&s.size>0&&s.forEach(e=>{t===e||r?.has(e)||n.add(e)}),n}selectPeersToPublish(e){let t=new Set,r={direct:0,floodsub:0,mesh:0,fanout:0},n=this.topics.get(e);if(null!=n){if(this.opts.floodPublish)n.forEach(e=>{this.direct.has(e)?(t.add(e),r.direct++):this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),r.floodsub++)});else{this.direct.forEach(e=>{n.has(e)&&(t.add(e),r.direct++)}),this.floodsubPeers.forEach(e=>{n.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold&&(t.add(e),r.floodsub++)});let i=this.mesh.get(e);if(null!=i&&i.size>0)i.forEach(e=>{t.add(e),r.mesh++}),i.size<this.opts.D&&this.getRandomGossipPeers(e,this.opts.D-i.size,e=>!i.has(e)&&!this.direct.has(e)&&!this.floodsubPeers.has(e)&&this.score.score(e)>=this.opts.scoreThresholds.publishThreshold).forEach(e=>{t.add(e),r.mesh++});else{let n=this.fanout.get(e);if(null!=n&&n.size>0)n.forEach(e=>{t.add(e),r.fanout++});else{let n=this.getRandomGossipPeers(e,this.opts.D,e=>this.score.score(e)>=this.opts.scoreThresholds.publishThreshold);n.size>0&&(this.fanout.set(e,n),n.forEach(e=>{t.add(e),r.fanout++}))}this.fanoutLastpub.set(e,Date.now())}}}return{tosend:t,tosendCount:r}}forwardMessage(e,t,r,n){null!=r&&this.score.deliverMessage(r,e,t.topic);let i=this.selectPeersToForward(t.topic,r,n);i.forEach(e=>{this.sendRpc(e,ed([t]))}),this.metrics?.onForwardMsg(t.topic,i.size)}async publish(e,t,r){let n=Date.now(),i=null!=this.dataTransform?this.dataTransform.outboundTransform(e,t):t;if(null==this.publishConfig)throw Error("PublishError.Uninitialized");let{raw:s,msg:a}=await ec(this.publishConfig,e,t,i),o=await this.msgIdFn(a),l=this.msgIdToStrFn(o),c=r?.ignoreDuplicatePublishError??this.opts.ignoreDuplicatePublishError;if(this.seenCache.has(l)){if(c)return this.metrics?.onPublishDuplicateMsg(e),{recipients:[]};throw Error("PublishError.Duplicate")}let{tosend:u,tosendCount:d}=this.selectPeersToPublish(e),h=this.opts.emitSelf&&this.subscriptions.has(e),f=r?.allowPublishToZeroTopicPeers??this.opts.allowPublishToZeroTopicPeers;if(0===u.size&&!f&&!h)throw Error("PublishError.NoPeersSubscribedToTopic");this.seenCache.put(l),this.mcache.put({msgId:o,msgIdStr:l},s,!0),this.publishedMessageIds.put(l);let p=r?.batchPublish??this.opts.batchPublish,g=ed([s]);if(p)this.sendRpcInBatch(u,g);else for(let e of u)this.sendRpc(e,g)||u.delete(e);let m=Date.now()-n;return this.metrics?.onPublishMsg(e,d,u.size,null!=s.data?s.data.length:0,m),h&&(u.add(this.components.peerId.toString()),super.dispatchEvent(new CustomEvent("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:l,msg:a}})),super.dispatchEvent(new CustomEvent("message",{detail:a}))),{recipients:Array.from(u.values()).map(e=>this.peers.get(e)??(0,A.XL)(e))}}sendRpcInBatch(e,t){let r=i.encode(t),n=T.single(r);for(let i of e){let s=this.streamsOutbound.get(i);if(null==s){this.log(`Cannot send RPC to ${i} as there is no open stream to it available`),e.delete(i);continue}try{s.pushPrefixed(n)}catch(t){e.delete(i),this.log.error(`Cannot send rpc to ${i}`,t)}this.metrics?.onRpcSent(t,r.length)}}reportMessageValidationResult(e,t,r){let n;if(r===w.z8.Accept){if(null!=(n=this.mcache.validate(e))){let{message:r,originatingPeers:i}=n;this.score.deliverMessage(t,e,r.topic),this.forwardMessage(e,n.message,t,i)}}else if(null!=(n=this.mcache.remove(e))){let i=V(r),{message:s,originatingPeers:a}=n;for(let r of(this.score.rejectMessage(t,e,s.topic,i),a))this.score.rejectMessage(r,e,s.topic,i)}let i=this.score.messageFirstSeenTimestampMs(e);this.metrics?.onReportValidation(n,r,i)}sendGraft(e,t){let r=ed([],{graft:[{topicID:t}]});this.sendRpc(e,r)}async sendPrune(e,t){let r=ed([],{prune:[await this.makePrune(e,t,this.opts.doPX,!0)]});this.sendRpc(e,r)}sendIDontWants(e,t,r){let n=this.mesh.get(t);if(null==n)return;let i=new Set(n);for(let e of(i.delete(r),i))this.streamsOutbound.get(e)?.protocol!==j&&i.delete(e);let s=ed([],{idontwant:[{messageIDs:[e]}]});this.sendRpcInBatch(i,s)}sendRpc(e,t){let r=this.streamsOutbound.get(e);if(null==r)return this.log(`Cannot send RPC to ${e} as there is no open stream to it available`),!1;let n=this.control.get(e);null!=n&&(this.piggybackControl(e,t,n),this.control.delete(e));let s=this.gossip.get(e);null!=s&&(this.piggybackGossip(e,t,s),this.gossip.delete(e));let a=i.encode(t);try{r.push(a)}catch(t){return this.log.error(`Cannot send rpc to ${e}`,t),null!=n&&this.control.set(e,n),null!=s&&this.gossip.set(e,s),!1}if(this.metrics?.onRpcSent(t,a.length),t.control?.graft!=null)for(let r of t.control?.graft)null!=r.topicID&&this.safeDispatchEvent("gossipsub:graft",{detail:{peerId:e,topic:r.topicID,direction:"outbound"}});if(t.control?.prune!=null)for(let r of t.control?.prune)null!=r.topicID&&this.safeDispatchEvent("gossipsub:prune",{detail:{peerId:e,topic:r.topicID,direction:"outbound"}});return!0}piggybackControl(e,t,r){let n=eh(t);for(let t of r.graft)null!=t.topicID&&this.mesh.get(t.topicID)?.has(e)&&n.control.graft.push(t);for(let t of r.prune)null==t.topicID||this.mesh.get(t.topicID)?.has(e)||n.control.prune.push(t)}piggybackGossip(e,t,r){eh(t).control.ihave=r}async sendGraftPrune(e,t,r){let n=this.opts.doPX;for(let[i,s]of e){let e=s.map(e=>({topicID:e})),a=[],o=t.get(i);null!=o&&(a=await Promise.all(o.map(async e=>this.makePrune(i,e,n&&!r.get(i),!1))),t.delete(i)),this.sendRpc(i,ed([],{graft:e,prune:a}))}for(let[e,i]of t){let t=await Promise.all(i.map(async t=>this.makePrune(e,t,n&&!r.get(e),!1)));this.sendRpc(e,ed([],{prune:t}))}}emitGossip(e){let t=this.mcache.getGossipIDs(new Set(e.keys()));for(let[r,n]of e)this.doEmitGossip(r,n,t.get(r)??[])}doEmitGossip(e,t,r){if(0===r.length||(ep(r),r.length>5e3&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",r.length),0===t.size))return;let n=this.opts.Dlazy,i=this.opts.gossipFactor*t.size,s=t;i>n&&(n=i),n>s.size?n=s.size:s=ep(Array.from(s)).slice(0,n),s.forEach(t=>{let n=r;r.length>5e3&&(n=ep(n.slice()).slice(0,5e3)),this.pushGossip(t,{topicID:e,messageIDs:n})})}flush(){for(let[e,t]of this.gossip.entries())this.gossip.delete(e),this.sendRpc(e,ed([],{ihave:t}));for(let[e,t]of this.control.entries()){this.control.delete(e);let r=ed([],{graft:t.graft,prune:t.prune});this.sendRpc(e,r)}}pushGossip(e,t){this.log("Add gossip to %s",e);let r=this.gossip.get(e)??[];this.gossip.set(e,r.concat(t))}async makePrune(e,t,r,n){if(this.score.prune(e,t),this.streamsOutbound.get(e)?.protocol===F)return{topicID:t,peers:[]};let i=n?this.opts.unsubcribeBackoff:this.opts.pruneBackoff,s=i/1e3;if(this.doAddBackoff(e,t,i),!r)return{topicID:t,peers:[],backoff:s};let a=this.getRandomGossipPeers(t,this.opts.prunePeers,t=>t!==e&&this.score.score(t)>=0);return{topicID:t,peers:await Promise.all(Array.from(a).map(async e=>{let t;let r=this.peers.get(e)??(0,A.XL)(e);try{t=await this.components.peerStore.get(r)}catch(e){if("NotFoundError"!==e.name)throw e}return{peerID:r.toMultihash().bytes,signedPeerRecord:t?.peerRecordEnvelope}})),backoff:s}}runHeartbeat=()=>{let e=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch(e=>{this.log("Error running heartbeat",e)}).finally(()=>{if(null!=e&&e(),this.status.code===y.started){clearTimeout(this.status.heartbeatTimeout);let e=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;e<.25*this.opts.heartbeatInterval&&(e+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,e)}})};async heartbeat(){let{D:e,Dlo:t,Dhi:r,Dscore:n,Dout:i,fanoutTTL:s}=this.opts;this.heartbeatTicks++;let a=new Map,o=e=>{let t=a.get(e);return void 0===t&&(t=this.score.score(e),a.set(e,t)),t},l=new Map,c=new Map,u=new Map;for(let e of(this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.idontwantCounts.clear(),this.idontwants.values()))for(let[t,r]of e)this.heartbeatTicks-r>=this.opts.mcacheLength&&e.delete(t);this.heartbeatTicks%this.opts.directConnectTicks==0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();let f=new Map;this.mesh.forEach((s,a)=>{let p=this.topics.get(a),g=new Set,m=new Set;if(f.set(a,m),null!=p){let e=ep(Array.from(p)),t=this.backoff.get(a);for(let r of e){let e=this.streamsOutbound.get(r);if(null!=e&&this.multicodecs.includes(e.protocol)&&!s.has(r)&&!this.direct.has(r)){let e=o(r);t?.has(r)!==!0&&e>=0&&g.add(r),e>=this.opts.scoreThresholds.gossipThreshold&&m.add(r)}}}let b=(e,t)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",e,a),this.addBackoff(e,a),s.delete(e),o(e)>=this.opts.scoreThresholds.gossipThreshold&&m.add(e),this.metrics?.onRemoveFromMesh(a,t,1);let r=c.get(e);null==r?c.set(e,[a]):r.push(a)},y=(e,t)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",e,a),this.score.graft(e,a),s.add(e),m.delete(e),this.metrics?.onAddToMesh(a,t,1);let r=l.get(e);null==r?l.set(e,[a]):r.push(a)};if(s.forEach(e=>{let t=o(e);t<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",e,t,a),b(e,h.BadScore),u.set(e,!0))}),s.size<t&&W(g,e-s.size,()=>!0).forEach(e=>{y(e,d.NotEnough)}),s.size>r){let t=Array.from(s);t.sort((e,t)=>o(t)-o(e));let r=0;if((t=t.slice(0,n).concat(ep(t.slice(n)))).slice(0,e).forEach(e=>{this.outbound.get(e)&&r++}),r<i){let n=e=>{let r=t[e];for(let r=e;r>0;r--)t[r]=t[r-1];t[0]=r};if(r>0){let i=r;for(let r=1;r<e&&i>0;r++)this.outbound.get(t[r])&&(n(r),i--)}let i=e-r;for(let r=e;r<t.length&&i>0;r++)this.outbound.get(t[r])&&(n(r),i--)}t.slice(e).forEach(e=>{b(e,h.Excess)})}if(s.size>=t){let e=0;s.forEach(t=>{this.outbound.get(t)&&e++}),e<i&&W(g,i-e,e=>!0===this.outbound.get(e)).forEach(e=>{y(e,d.Outbound)})}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks==0&&s.size>1){let e=Array.from(s).sort((e,t)=>o(e)-o(t)),t=o(e[Math.floor(s.size/2)]);if(t<this.opts.scoreThresholds.opportunisticGraftThreshold)for(let e of W(g,this.opts.opportunisticGraftPeers,e=>o(e)>t))this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",e,a),y(e,d.Opportunistic)}});let p=Date.now();this.fanoutLastpub.forEach((e,t)=>{e+s<p&&(this.fanout.delete(t),this.fanoutLastpub.delete(t))}),this.fanout.forEach((t,r)=>{let n=this.topics.get(r);t.forEach(e=>{(!n?.has(e)||o(e)<this.opts.scoreThresholds.publishThreshold)&&t.delete(e)});let i=this.topics.get(r),s=[],a=new Set;if(f.set(r,a),null!=i)for(let e of ep(Array.from(i))){let r=this.streamsOutbound.get(e);if(null!=r&&this.multicodecs.includes(r.protocol)&&!t.has(e)&&!this.direct.has(e)){let t=o(e);t>=this.opts.scoreThresholds.publishThreshold&&s.push(e),t>=this.opts.scoreThresholds.gossipThreshold&&a.add(e)}}if(t.size<e){let r=e-t.size;s.slice(0,r).forEach(e=>{t.add(e),a?.delete(e)})}}),this.emitGossip(f),await this.sendGraftPrune(l,c,u),this.flush(),this.mcache.shift(),this.dispatchEvent(new CustomEvent("gossipsub:heartbeat"))}getRandomGossipPeers(e,t,r=()=>!0){let n=this.topics.get(e);if(null==n)return new Set;let i=[];return n.forEach(e=>{let t=this.streamsOutbound.get(e);null!=t&&this.multicodecs.includes(t.protocol)&&r(e)&&i.push(e)}),i=ep(i),t>0&&i.length>t&&(i=i.slice(0,t)),new Set(i)}onScrapeMetrics(e){e.mcacheSize.set(this.mcache.size),e.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),e.cacheSize.set({cache:"direct"},this.direct.size),e.cacheSize.set({cache:"seenCache"},this.seenCache.size),e.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),e.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),e.cacheSize.set({cache:"mcache"},this.mcache.size),e.cacheSize.set({cache:"score"},this.score.size),e.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),e.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),e.cacheSize.set({cache:"topics"},this.topics.size),e.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),e.cacheSize.set({cache:"mesh"},this.mesh.size),e.cacheSize.set({cache:"fanout"},this.fanout.size),e.cacheSize.set({cache:"peers"},this.peers.size),e.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),e.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),e.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),e.cacheSize.set({cache:"gossip"},this.gossip.size),e.cacheSize.set({cache:"control"},this.control.size),e.cacheSize.set({cache:"peerhave"},this.peerhave.size),e.cacheSize.set({cache:"outbound"},this.outbound.size);let t=0,r=Date.now();for(let n of(e.connectedPeersBackoffSec.reset(),this.backoff.values()))for(let[i,s]of(t+=n.size,n.entries()))this.peers.has(i)&&e.connectedPeersBackoffSec.observe(Math.max(0,s-r)/1e3);e.cacheSize.set({cache:"backoff"},t);let n=0;for(let e of this.idontwants.values())n+=e.size;for(let[t,r]of(e.cacheSize.set({cache:"idontwants"},n),this.topics))e.topicPeersCount.set({topicStr:t},r.size);for(let[t,r]of this.mesh)e.meshPeerCounts.set({topicStr:t},r.size);let i=[],s=new Map;for(let t of(e.behaviourPenalty.reset(),this.peers.keys())){let r=this.score.score(t);i.push(r),s.set(t,r),e.behaviourPenalty.observe(this.score.peerStats.get(t)?.behaviourPenalty??0)}e.registerScores(i,this.opts.scoreThresholds),e.registerScorePerMesh(this.mesh,s);let a=function(e,t,r,n,i){let s={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(let a of e){let e=t.get(a);if(null!=e){let t=function(e,t,r,n,i){let s,a=0,o=new Map;if(Object.entries(t.topics).forEach(([e,t])=>{let n=i.get(e)??"unknown",s=r.topics[e];if(void 0===s)return;let l=o.get(n);null==l&&(l={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},o.set(n,l));let c=0,u=0,d=0,h=0,f=0;t.inMesh&&(c+=Math.max(t.meshTime/s.timeInMeshQuantum,s.timeInMeshCap)*s.timeInMeshWeight);let p=t.firstMessageDeliveries;if(p>s.firstMessageDeliveriesCap&&(p=s.firstMessageDeliveriesCap),u+=p*s.firstMessageDeliveriesWeight,t.meshMessageDeliveriesActive&&t.meshMessageDeliveries<s.meshMessageDeliveriesThreshold){let e=s.meshMessageDeliveriesThreshold-t.meshMessageDeliveries;d+=e*e*s.meshMessageDeliveriesWeight}h+=t.meshFailurePenalty*s.meshFailurePenaltyWeight,f+=t.invalidMessageDeliveries*t.invalidMessageDeliveries*s.invalidMessageDeliveriesWeight,a+=(c+u+d+h+f)*s.topicWeight,l.p1w+=c,l.p2w+=u,l.p3w+=d,l.p3bw+=h,l.p4w+=f}),r.topicScoreCap>0&&a>r.topicScoreCap){a=r.topicScoreCap;let e=r.topicScoreCap/a;for(let t of o.values())t.p1w*=e,t.p2w*=e,t.p3w*=e,t.p3bw*=e,t.p4w*=e}let l=0,c=0;return s=0+r.appSpecificScore(e)*r.appSpecificWeight,t.knownIPs.forEach(e=>{if(r.IPColocationFactorWhitelist.has(e))return;let t=n.get(e),i=null!=t?t.size:0;if(i>r.IPColocationFactorThreshold){let e=i-r.IPColocationFactorThreshold;l+=e*e*r.IPColocationFactorWeight}}),c+=t.behaviourPenalty*t.behaviourPenalty*r.behaviourPenaltyWeight,a+=s+l+c,{byTopic:o,p5w:s,p6w:l,p7w:c,score:a}}(a,e,r,n,i);for(let[e,r]of t.byTopic){let t=s.byTopic.get(e);null==t&&(t={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},s.byTopic.set(e,t)),t.p1w.push(r.p1w),t.p2w.push(r.p2w),t.p3w.push(r.p3w),t.p3bw.push(r.p3bw),t.p4w.push(r.p4w)}s.p5w.push(t.p5w),s.p6w.push(t.p6w),s.p7w.push(t.p7w),s.score.push(t.score)}else s.p5w.push(0),s.p6w.push(0),s.p7w.push(0),s.score.push(0)}return s}(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,e.topicStrToLabel);e.registerScoreWeights(a)}tagMeshPeer=e=>{let{peerId:t,topic:r}=e.detail;this.components.peerStore.merge(this.peers.get(t)??(0,A.XL)(t),{tags:{[r]:{value:100}}}).catch(e=>{this.log.error("Error tagging peer %s with topic %s",t,r,e)})};untagMeshPeer=e=>{let{peerId:t,topic:r}=e.detail;this.components.peerStore.merge(this.peers.get(t)??(0,A.XL)(t),{tags:{[r]:void 0}}).catch(e=>{this.log.error("Error untagging peer %s with topic %s",t,r,e)})}}function eA(e={}){return t=>new ev(t,e)}},7243:(e,t,r)=>{"use strict";r.d(t,{Pc:()=>a,Sc:()=>g,Uo:()=>p,Yj:()=>l,ai:()=>c,cl:()=>u,eu:()=>o,lT:()=>d,lq:()=>h,or:()=>f});var n=r(5839),i=r(3172);let s=e=>e.toString().split("/").slice(1),a=e=>({match:t=>!(t.length<1)&&!!e(t[0])&&t.slice(1),pattern:"fn"}),o=e=>({match:t=>a(t=>t===e).match(t),pattern:e}),l=()=>({match:e=>a(e=>"string"==typeof e).match(e),pattern:"{string}"}),c=()=>({match:e=>a(e=>!isNaN(parseInt(e))).match(e),pattern:"{number}"}),u=()=>({match:e=>{if(e.length<2||"p2p"!==e[0]&&"ipfs"!==e[0]||!(e[1].startsWith("Q")||e[1].startsWith("1")))return!1;try{n.base58btc.decode(`z${e[1]}`)}catch(e){return!1}return e.slice(2)},pattern:"/p2p/{peerid}"}),d=()=>({match:e=>{if(e.length<2||"certhash"!==e[0])return!1;try{i.base64url.decode(e[1])}catch{return!1}return e.slice(2)},pattern:"/certhash/{certhash}"}),h=e=>({match:t=>{let r=e.match(t);return!1===r?t:r},pattern:`optional(${e.pattern})`}),f=(...e)=>({match:t=>{let r;for(let n of e){let e=n.match(t);!1!==e&&(null==r||e.length<r.length)&&(r=e)}return null!=r&&r},pattern:`or(${e.map(e=>e.pattern).join(", ")})`}),p=(...e)=>({match:t=>{for(let r of e){let e=r.match(t);if(!1===e)return!1;t=e}return t},pattern:`and(${e.map(e=>e.pattern).join(", ")})`});function g(...e){function t(t){let r=s(t);for(let t of e){let e=t.match(r);if(!1===e)return!1;r=e}return r}return{matchers:e,matches:function(e){return!1!==t(e)},exactMatch:function(e){let r=t(e);return!1!==r&&0===r.length}}}},7247:(e,t)=>{t.read=function(e,t,r,n,i){var s,a,o=8*i-n-1,l=(1<<o)-1,c=l>>1,u=-7,d=r?i-1:0,h=r?-1:1,f=e[t+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=o;u>0;s=256*s+e[t+d],d+=h,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=n;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===s)s=1-c;else{if(s===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),s-=c}return(f?-1:1)*a*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var a,o,l,c=8*s-i-1,u=(1<<c)-1,d=u>>1,h=5960464477539062e-23*(23===i),f=n?0:s-1,p=n?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+d>=1?t+=h/l:t+=h*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=u?(o=0,a=u):a+d>=1?(o=(t*l-1)*Math.pow(2,i),a+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&o,f+=p,o/=256,i-=8);for(a=a<<i|o,c+=i;c>0;e[r+f]=255&a,f+=p,a/=256,c-=8);e[r+f-p]|=128*g}},7255:(e,t,r)=>{"use strict";r.d(t,{z:()=>i});var n=r(6844);function i(e,t){let r=(0,n.V)(e,t),i={read:async(e,t)=>{let n=await r.read(t);return e.decode(n)},write:async(e,t,n)=>{await r.write(t.encode(e),n)},writeV:async(e,t,n)=>{await r.writeV(e.map(e=>t.encode(e)),n)},pb:e=>({read:async t=>i.read(e,t),write:async(t,r)=>i.write(t,e,r),writeV:async(t,r)=>i.writeV(t,e,r),unwrap:()=>i}),unwrap:()=>r.unwrap()};return i}},7260:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TupleCoder=void 0;let n=r(9959),i=r(4037),s=r(2884),a=r(3539);class o extends s.Coder{coders;constructor(e,t){let r=!1,i=[];e.forEach(e=>{e.dynamic&&(r=!0),i.push(e.type)}),super("tuple","tuple("+i.join(",")+")",t,r),(0,n.defineProperties)(this,{coders:Object.freeze(e.slice())})}defaultValue(){let e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});let t=this.coders.reduce((e,t)=>{let r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let i=r.localName;if(i&&1===t[i])"length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n])}),Object.freeze(e)}encode(e,t){let r=i.Typed.dereference(t,"tuple");return(0,a.pack)(e,this.coders,r)}decode(e){return(0,a.unpack)(e,this.coders)}}t.TupleCoder=o},7296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapHashToField=t.getMinHashLength=t.getFieldBytesLength=t.hashToPrivateScalar=t.FpSqrtEven=t.FpSqrtOdd=t.Field=t.nLength=t.FpIsSquare=t.FpDiv=t.FpInvertBatch=t.FpPow=t.validateField=t.isNegativeLE=t.FpSqrt=t.tonelliShanks=t.invert=t.pow2=t.pow=t.mod=void 0;let n=r(4075),i=BigInt(0),s=BigInt(1),a=BigInt(2),o=BigInt(3),l=BigInt(4),c=BigInt(5),u=BigInt(8);function d(e,t){let r=e%t;return r>=i?r:t+r}function h(e,t,r){if(r<=i||t<i)throw Error("Expected power/modulo > 0");if(r===s)return i;let n=s;for(;t>i;)t&s&&(n=n*e%r),e=e*e%r,t>>=s;return n}function f(e,t){if(e===i||t<=i)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=d(e,t),n=t,a=i,o=s,l=s,c=i;for(;r!==i;){let e=n/r,t=n%r,i=a-l*e,s=o-c*e;n=r,r=t,a=l,o=c,l=i,c=s}if(n!==s)throw Error("invert: does not exist");return d(a,t)}function p(e){let t,r,n;let o=(e-s)/a;for(t=e-s,r=0;t%a===i;t/=a,r++);for(n=a;n<e&&h(n,o,e)!==e-s;n++);if(1===r){let t=(e+s)/l;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let c=(t+s)/a;return function(e,i){if(e.pow(i,o)===e.neg(e.ONE))throw Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(i,c),d=e.pow(i,t);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,s<<BigInt(a-t-1));l=e.sqr(r),u=e.mul(u,r),d=e.mul(d,l),a=t}return u}}function g(e){if(e%l===o){let t=(e+s)/l;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%u===c){let t=(e-c)/u;return function(e,r){let n=e.mul(r,a),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,a),i),l=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(l),r))throw Error("Cannot find square root");return l}}return p(e)}BigInt(9),BigInt(16),t.mod=d,t.pow=h,t.pow2=function(e,t,r){let n=e;for(;t-- >i;)n*=n,n%=r;return n},t.invert=f,t.tonelliShanks=p,t.FpSqrt=g,t.isNegativeLE=(e,t)=>(d(e,t)&s)===s;let m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function b(e,t,r){if(r<i)throw Error("Expected power > 0");if(r===i)return e.ONE;if(r===s)return t;let n=e.ONE,a=t;for(;r>i;)r&s&&(n=e.mul(n,a)),a=e.sqr(a),r>>=s;return n}function y(e,t){let r=Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}function x(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function w(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function v(e){let t=w(e);return t+Math.ceil(t/2)}t.validateField=function(e){let t=m.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(e,t)},t.FpPow=b,t.FpInvertBatch=y,t.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?f(r,e.ORDER):e.inv(r))},t.FpIsSquare=function(e){let t=(e.ORDER-s)/a;return r=>{let n=e.pow(r,t);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},t.nLength=x,t.Field=function(e,t,r=!1,a={}){if(e<=i)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:l}=x(e,t);if(l>2048)throw Error("Field lengths over 2048 bytes are not supported");let c=g(e),u=Object.freeze({ORDER:e,BITS:o,BYTES:l,MASK:(0,n.bitMask)(o),ZERO:i,ONE:s,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&s)===s,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>b(u,e,t),div:(t,r)=>d(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:a.sqrt||(e=>c(u,e)),invertBatch:e=>y(u,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.numberToBytesLE)(e,l):(0,n.numberToBytesBE)(e,l),fromBytes:e=>{if(e.length!==l)throw Error(`Fp.fromBytes: expected ${l}, got ${e.length}`);return r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(u)},t.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},t.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},t.hashToPrivateScalar=function(e,t,r=!1){let i=(e=(0,n.ensureBytes)("privateHash",e)).length,a=x(t).nByteLength+8;if(a<24||i<a||i>1024)throw Error(`hashToPrivateScalar: expected ${a}-1024 bytes of input, got ${i}`);return d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-s)+s},t.getFieldBytesLength=w,t.getMinHashLength=v,t.mapHashToField=function(e,t,r=!1){let i=e.length,a=w(t),o=v(t);if(i<16||i<o||i>1024)throw Error(`expected ${o}-1024 bytes of input, got ${i}`);let l=d(r?(0,n.bytesToNumberBE)(e):(0,n.bytesToNumberLE)(e),t-s)+s;return r?(0,n.numberToBytesLE)(l,a):(0,n.numberToBytesBE)(l,a)}},7310:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toQuantity=t.toBeArray=t.toBeHex=t.toNumber=t.getNumber=t.toBigInt=t.getUint=t.getBigInt=t.mask=t.toTwos=t.fromTwos=void 0;let n=r(4306),i=r(7073),s=BigInt(0),a=BigInt(1);function o(e,t){switch(typeof e){case"bigint":return e;case"number":return(0,i.assertArgument)(Number.isInteger(e),"underflow",t||"value",e),(0,i.assertArgument)(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");if("-"===e[0]&&"-"!==e[1])return-BigInt(e.substring(1));return BigInt(e)}catch(r){(0,i.assertArgument)(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}(0,i.assertArgument)(!1,"invalid BigNumberish value",t||"value",e)}function l(e,t){let r=o(e,t);return(0,i.assert)(r>=s,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}t.fromTwos=function(e,t){let r=l(e,"value"),n=BigInt(d(t,"width"));return((0,i.assert)(r>>n===s,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),r>>n-a)?-((~r&(a<<n)-a)+a):r},t.toTwos=function(e,t){let r=o(e,"value"),n=BigInt(d(t,"width")),l=a<<n-a;return r<s?(r=-r,(0,i.assert)(r<=l,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~r&(a<<n)-a)+a):((0,i.assert)(r<l,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),r)},t.mask=function(e,t){return l(e,"value")&(a<<BigInt(d(t,"bits")))-a},t.getBigInt=o,t.getUint=l;let c="0123456789abcdef";function u(e){if(e instanceof Uint8Array){let t="0x0";for(let r of e)t+=c[r>>4],t+=c[15&r];return BigInt(t)}return o(e)}function d(e,t){switch(typeof e){case"bigint":return(0,i.assertArgument)(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),Number(e);case"number":return(0,i.assertArgument)(Number.isInteger(e),"underflow",t||"value",e),(0,i.assertArgument)(e>=-0x1fffffffffffff&&e<=0x1fffffffffffff,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return d(BigInt(e),t)}catch(r){(0,i.assertArgument)(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}(0,i.assertArgument)(!1,"invalid numeric value",t||"value",e)}function h(e){let t=l(e,"value");if(t===s)return new Uint8Array([]);let r=t.toString(16);r.length%2&&(r="0"+r);let n=new Uint8Array(r.length/2);for(let e=0;e<n.length;e++){let t=2*e;n[e]=parseInt(r.substring(t,t+2),16)}return n}t.toBigInt=u,t.getNumber=d,t.toNumber=function(e){return d(u(e))},t.toBeHex=function(e,t){let r=l(e,"value").toString(16);if(null==t)r.length%2&&(r="0"+r);else{let n=d(t,"width");for((0,i.assert)(2*n>=r.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<2*n;)r="0"+r}return"0x"+r},t.toBeArray=h,t.toQuantity=function(e){let t=(0,n.hexlify)((0,n.isBytesLike)(e)?e:h(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}},7328:(e,t,r)=>{e.exports=r(9836)},7385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;let n=r(2898);class i{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{let e=r(9432);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw Error("NodeRandomSource: got fewer bytes than requested");let r=new Uint8Array(e);for(let e=0;e<r.length;e++)r[e]=t[e];return(0,n.wipe)(t),r}}t.NodeRandomSource=i},7396:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=function(e,t){return null!=e[Symbol.asyncIterator]?async function*(){let r=0;if(!(t<1)){for await(let n of e)if(yield n,++r===t)return}}():function*(){let r=0;if(!(t<1)){for(let n of e)if(yield n,++r===t)return}}()}},7399:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContractFactory=void 0;let n=r(7813),i=r(9111),s=r(8662),a=r(3341);class o{interface;bytecode;runner;constructor(e,t,r){let i=n.Interface.from(e);t instanceof Uint8Array||("object"==typeof t&&(t=t.object),t.startsWith("0x")||(t="0x"+t)),t=(0,s.hexlify)((0,s.getBytes)(t)),(0,s.defineProperties)(this,{bytecode:t,interface:i,runner:r||null})}attach(e){return new a.BaseContract(e,this.interface,this.runner)}async getDeployTransaction(...e){let t={},r=this.interface.deploy;if(r.inputs.length+1===e.length&&(t=await (0,a.copyOverrides)(e.pop())),r.inputs.length!==e.length)throw Error("incorrect number of arguments to constructor");let n=await (0,a.resolveArgs)(this.runner,r.inputs,e);return Object.assign({},t,{data:(0,s.concat)([this.bytecode,this.interface.encodeDeploy(n)])})}async deploy(...e){let t=await this.getDeployTransaction(...e);(0,s.assert)(this.runner&&"function"==typeof this.runner.sendTransaction,"factory runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let r=await this.runner.sendTransaction(t),n=(0,i.getCreateAddress)(r);return new a.BaseContract(n,this.interface,this.runner,r)}connect(e){return new o(this.interface,this.bytecode,e)}static fromSolidity(e,t){(0,s.assertArgument)(null!=e,"bad compiler output","output",e),"string"==typeof e&&(e=JSON.parse(e));let r=e.abi,n="";return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(r,n,t)}}t.ContractFactory=o},7506:(e,t,r)=>{"use strict";r.d(t,{YW:()=>o,_v:()=>l});var n=r(8121),i=r(9982);function s(e,t,r,n,i){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return"OVERRUN"===e?r.length-t-1:0}let a=Object.freeze({error:function(e,t,r,n,s){(0,i.MR)(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:s,replace:function(e,t,r,n,a){return"OVERLONG"===e?((0,i.MR)("number"==typeof a,"invalid bad code point for replacement","badCodepoint",a),n.push(a),0):(n.push(65533),s(e,t,r,n,a))}});function o(e,t){(0,i.MR)("string"==typeof e,"invalid string value","str",e),null!=t&&((0,i.SP)(t),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){let n=e.charCodeAt(t);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if((64512&n)==55296){t++;let s=e.charCodeAt(t);(0,i.MR)(t<e.length&&(64512&s)==56320,"invalid surrogate pair","str",e);let a=65536+((1023&n)<<10)+(1023&s);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return new Uint8Array(r)}function l(e,t){return(function(e,t){null==t&&(t=a.error);let r=(0,n.q5)(e,"bytes"),i=[],s=0;for(;s<r.length;){let e=r[s++];if(e>>7==0){i.push(e);continue}let n=null,a=null;if((224&e)==192)n=1,a=127;else if((240&e)==224)n=2,a=2047;else if((248&e)==240)n=3,a=65535;else{(192&e)==128?s+=t("UNEXPECTED_CONTINUE",s-1,r,i):s+=t("BAD_PREFIX",s-1,r,i);continue}if(s-1+n>=r.length){s+=t("OVERRUN",s-1,r,i);continue}let o=e&(1<<8-n-1)-1;for(let e=0;e<n;e++){let e=r[s];if((192&e)!=128){s+=t("MISSING_CONTINUE",s,r,i),o=null;break}o=o<<6|63&e,s++}if(null!==o){if(o>1114111){s+=t("OUT_OF_RANGE",s-1-n,r,i,o);continue}if(o>=55296&&o<=57343){s+=t("UTF16_SURROGATE",s-1-n,r,i,o);continue}if(o<=a){s+=t("OVERLONG",s-1-n,r,i,o);continue}i.push(o)}}return i})(e,t).map(e=>e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10&1023)+55296,(1023&e)+56320)).join("")}},7547:(e,t,r)=>{e.exports=function(){let e=r(1331),t=r(2079),n=this,i=null,s=null,a=null,o=0,l=[],c=[],u=[],d=[];function h(e){let t="";for(let r=0;r<e;r+=1)t+=" ";return t}this.callbacks=[],this.astObject="astObject",this.init=function(e,t,r){let h;u.length=0,d.length=0,l.length=0,o=0,i=e,s=t,a=r;let f=[];for(h=0;h<i.length;h+=1)f.push(i[h].lower);for(h=0;h<s.length;h+=1)f.push(s[h].lower);for(h=0,o=i.length+s.length;h<o;h+=1)l[h]=!1,c[h]=null;for(let e in n.callbacks){let t=e.toLowerCase();if((h=f.indexOf(t))<0)throw Error(`ast.js: init: node '${e}' not a rule or udt name`);"function"==typeof n.callbacks[e]&&(l[h]=!0,c[h]=n.callbacks[e]),!0===n.callbacks[e]&&(l[h]=!0)}},this.ruleDefined=function(e){return!1!==l[e]},this.udtDefined=function(e){return!1!==l[i.length+e]},this.down=function(t,r){let n=d.length;return u.push(n),d.push({name:r,thisIndex:n,thatIndex:null,state:e.SEM_PRE,callbackIndex:t,phraseIndex:null,phraseLength:null,stack:u.length}),n},this.up=function(t,r,n,i){let s=d.length,a=u.pop();return d.push({name:r,thisIndex:s,thatIndex:a,state:e.SEM_POST,callbackIndex:t,phraseIndex:n,phraseLength:i,stack:u.length}),d[a].thatIndex=s,d[a].phraseIndex=n,d[a].phraseLength=i,s},this.translate=function(t){let r,n;for(let i=0;i<d.length;i+=1)r=c[(n=d[i]).callbackIndex],n.state===e.SEM_PRE?null!==r&&r(e.SEM_PRE,a,n.phraseIndex,n.phraseLength,t)===e.SEM_SKIP&&(i=n.thatIndex):null!==r&&r(e.SEM_POST,a,n.phraseIndex,n.phraseLength,t)},this.setLength=function(e){d.length=e,e>0?u.length=d[e-1].stack:u.length=0},this.getLength=function(){return d.length},this.toXml=function(r){let n=t.charsToDec,i="decimal integer character codes";if("string"==typeof r&&r.length>=3){let e=r.slice(0,3).toLowerCase();"asc"===e?(n=t.charsToAscii,i="ASCII for printing characters, hex for non-printing"):"hex"===e?(n=t.charsToHex,i="hexadecimal integer character codes"):"uni"===e&&(n=t.charsToUnicode,i="Unicode UTF-32 integer character codes")}let s="",o=0;return s+='<?xml version="1.0" encoding="utf-8"?>\n',s+=`<root nodes="${d.length/2}" characters="${a.length}">
`,s+=`<!-- input string, ${i} -->
`,s+=h(o+2),s+=n(a),s+="\n",d.forEach(t=>{t.state===e.SEM_PRE?(o+=1,s+=h(o),s+=`<node name="${t.name}" index="${t.phraseIndex}" length="${t.phraseLength}">
`,s+=h(o+2),s+=n(a,t.phraseIndex,t.phraseLength),s+="\n"):(s+=h(o),s+=`</node><!-- name="${t.name}" -->
`,o-=1)}),s+="</root>\n"},this.phrases=function(){let t,r;let n={};for(t=0;t<d.length;t+=1)(r=d[t]).state===e.SEM_PRE&&(Array.isArray(n[r.name])||(n[r.name]=[]),n[r.name].push({index:r.phraseIndex,length:r.phraseLength}));return n}}},7551:(e,t,r)=>{"use strict";r.d(t,{D0:()=>function e(t,r,f=!1,b={}){let y,x,A;if(t<=s)throw Error("invalid field: expected ORDER > 0, got "+t);if("object"==typeof r&&null!=r){if(b.sqrt||f)throw Error("cannot specify opts in two arguments");r.BITS&&(x=r.BITS),r.sqrt&&(A=r.sqrt),"boolean"==typeof r.isLE&&(f=r.isLE)}else"number"==typeof r&&(x=r),b.sqrt&&(A=b.sqrt);let{nBitLength:E,nByteLength:k}=function(e,t){void 0!==t&&(0,i.Fe)(t);let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}(t,x);if(k>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let P=Object.freeze({ORDER:t,isLE:f,BITS:E,BYTES:k,MASK:(0,n.OG)(E),ZERO:s,ONE:a,create:e=>h(e,t),isValid:e=>{if("bigint"!=typeof e)throw Error("invalid field element: expected bigint, got "+typeof e);return s<=e&&e<t},is0:e=>e===s,isValidNot0:e=>!P.is0(e)&&P.isValid(e),isOdd:e=>(e&a)===a,neg:e=>h(-e,t),eql:(e,t)=>e===t,sqr:e=>h(e*e,t),add:(e,r)=>h(e+r,t),sub:(e,r)=>h(e-r,t),mul:(e,r)=>h(e*r,t),pow:(e,t)=>(function(e,t,r){if(r<s)throw Error("invalid exponent, negatives unsupported");if(r===s)return e.ONE;if(r===a)return t;let n=e.ONE,i=t;for(;r>s;)r&a&&(n=e.mul(n,i)),i=e.sqr(i),r>>=a;return n})(P,e,t),div:(e,r)=>h(e*p(r,t),t),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:e=>p(e,t),sqrt:A||(r=>{if(!y)y=t%c===l?g:t%d===u?m:function(t){if(t<BigInt(3))throw Error("sqrt is not defined for small field");let r=t-a,n=0;for(;r%o===s;)r/=o,n++;let i=o,l=e(t);for(;1===v(l,i);)if(i++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===n)return g;let c=l.pow(i,r),u=(r+a)/o;return function(e,t){if(e.is0(t))return t;if(1!==v(e,t))throw Error("Cannot find square root");let i=n,s=e.mul(e.ONE,c),o=e.pow(t,r),l=e.pow(t,u);for(;!e.eql(o,e.ONE);){if(e.is0(o))return e.ZERO;let t=1,r=e.sqr(o);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===i)throw Error("Cannot find square root");let n=a<<BigInt(i-t-1),c=e.pow(s,n);i=t,s=e.sqr(c),o=e.mul(o,s),l=e.mul(l,c)}return l}}(t);return y(P,r)}),toBytes:e=>f?(0,n.z)(e,k):(0,n.lq)(e,k),fromBytes:e=>{if(e.length!==k)throw Error("Field.fromBytes: expected "+k+" bytes, got "+e.length);return f?(0,n.lX)(e):(0,n.Ph)(e)},invertBatch:e=>w(P,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(P)},Tp:()=>E,dQ:()=>b,jr:()=>x,pS:()=>w,qy:()=>k,zH:()=>f,zi:()=>h});var n=r(2405),i=r(3084);let s=BigInt(0),a=BigInt(1),o=BigInt(2),l=BigInt(3),c=BigInt(4),u=BigInt(5),d=BigInt(8);function h(e,t){let r=e%t;return r>=s?r:t+r}function f(e,t,r){let n=e;for(;t-- >s;)n*=n,n%=r;return n}function p(e,t){if(e===s)throw Error("invert: expected non-zero number");if(t<=s)throw Error("invert: expected positive modulus, got "+t);let r=h(e,t),n=t,i=s,o=a,l=a,c=s;for(;r!==s;){let e=n/r,t=n%r,s=i-l*e,a=o-c*e;n=r,r=t,i=l,o=c,l=s,c=a}if(n!==a)throw Error("invert: does not exist");return h(i,t)}function g(e,t){let r=(e.ORDER+a)/c,n=e.pow(t,r);if(!e.eql(e.sqr(n),t))throw Error("Cannot find square root");return n}function m(e,t){let r=(e.ORDER-u)/d,n=e.mul(t,o),i=e.pow(n,r),s=e.mul(t,i),a=e.mul(e.mul(s,o),i),l=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(l),t))throw Error("Cannot find square root");return l}let b=(e,t)=>(h(e,t)&a)===a,y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function x(e){let t=y.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"});return(0,n.DS)(e,t),e}function w(e,t,r=!1){let n=Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),s=e.inv(i);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),s),n}function v(e,t){let r=(e.ORDER-a)/o,n=e.pow(t,r),i=e.eql(n,e.ONE),s=e.eql(n,e.ZERO),l=e.eql(n,e.neg(e.ONE));if(!i&&!s&&!l)throw Error("invalid Legendre symbol result");return i?1:s?0:-1}function A(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function E(e){let t=A(e);return t+Math.ceil(t/2)}function k(e,t,r=!1){let i=e.length,s=A(t),o=E(t);if(i<16||i<o||i>1024)throw Error("expected "+o+"-1024 bytes of input, got "+i);let l=h(r?(0,n.lX)(e):(0,n.Ph)(e),t-a)+a;return r?(0,n.z)(l,s):(0,n.lq)(l,s)}},7584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=void 0;let n=r(1576),i=r(5636),s=(e,t,r)=>e&t^~e&r,a=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),l=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),c=new Uint32Array(64);class u extends n.SHA2{constructor(){super(64,32,8,!1),this.A=0|l[0],this.B=0|l[1],this.C=0|l[2],this.D=0|l[3],this.E=0|l[4],this.F=0|l[5],this.G=0|l[6],this.H=0|l[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=c[e-15],r=c[e-2],n=(0,i.rotr)(t,7)^(0,i.rotr)(t,18)^t>>>3,s=(0,i.rotr)(r,17)^(0,i.rotr)(r,19)^r>>>10;c[e]=s+c[e-7]+n+c[e-16]|0}let{A:r,B:n,C:l,D:u,E:d,F:h,G:f,H:p}=this;for(let e=0;e<64;e++){let t=p+((0,i.rotr)(d,6)^(0,i.rotr)(d,11)^(0,i.rotr)(d,25))+s(d,h,f)+o[e]+c[e]|0,g=((0,i.rotr)(r,2)^(0,i.rotr)(r,13)^(0,i.rotr)(r,22))+a(r,n,l)|0;p=f,f=h,h=d,d=u+t|0,u=l,l=n,n=r,r=t+g|0}r=r+this.A|0,n=n+this.B|0,l=l+this.C|0,u=u+this.D|0,d=d+this.E|0,h=h+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(r,n,l,u,d,h,f,p)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class d extends u{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}t.sha256=(0,i.wrapConstructor)(()=>new u),t.sha224=(0,i.wrapConstructor)(()=>new d)},7672:(e,t,r)=>{"use strict";r.d(t,{t:()=>g});let n="0x0000000000000000000000000000000000000000000000000000000000000000";var i=r(8121),s=r(1456),a=r(9982);let o=BigInt(0),l=BigInt(1),c=BigInt(2),u=BigInt(27),d=BigInt(28),h=BigInt(35),f={};function p(e){return(0,i.nx)((0,s.c4)(e),32)}class g{#e;#t;#r;#n;get r(){return this.#e}set r(e){(0,a.MR)(32===(0,i.pO)(e),"invalid r","value",e),this.#e=(0,i.c$)(e)}get s(){return this.#t}set s(e){(0,a.MR)(32===(0,i.pO)(e),"invalid s","value",e);let t=(0,i.c$)(e);(0,a.MR)(8>parseInt(t.substring(0,3)),"non-canonical s","value",t),this.#t=t}get v(){return this.#r}set v(e){let t=(0,s.WZ)(e,"value");(0,a.MR)(27===t||28===t,"invalid v","v",e),this.#r=t}get networkV(){return this.#n}get legacyChainId(){let e=this.networkV;return null==e?null:g.getChainId(e)}get yParity(){return+(27!==this.v)}get yParityAndS(){let e=(0,i.q5)(this.s);return this.yParity&&(e[0]|=128),(0,i.c$)(e)}get compactSerialized(){return(0,i.xW)([this.r,this.yParityAndS])}get serialized(){return(0,i.xW)([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,n){(0,a.gk)(e,f,"Signature"),this.#e=t,this.#t=r,this.#r=n,this.#n=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let e=new g(f,this.r,this.s,this.v);return this.networkV&&(e.#n=this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){let t=(0,s.Ab)(e,"v");return t==u||t==d?o:((0,a.MR)(t>=h,"invalid EIP-155 v","v",e),(t-h)/c)}static getChainIdV(e,t){return(0,s.Ab)(e)*c+BigInt(35+t-27)}static getNormalizedV(e){let t=(0,s.Ab)(e);return t===o||t===u?27:t===l||t===d?28:((0,a.MR)(t>=h,"invalid v","v",e),t&l?27:28)}static from(e){function t(t,r){(0,a.MR)(t,r,"signature",e)}if(null==e)return new g(f,n,n,27);if("string"==typeof e){let r=(0,i.q5)(e,"signature");if(64===r.length){let e=(0,i.c$)(r.slice(0,32)),t=r.slice(32,64),n=128&t[0]?28:27;return t[0]&=127,new g(f,e,(0,i.c$)(t),n)}if(65===r.length){let e=(0,i.c$)(r.slice(0,32)),n=r.slice(32,64);t((128&n[0])==0,"non-canonical s");let s=g.getNormalizedV(r[64]);return new g(f,e,(0,i.c$)(n),s)}t(!1,"invalid raw signature length")}if(e instanceof g)return e.clone();let r=e.r;t(null!=r,"missing r");let o=p(r),l=function(e,r){if(null!=e)return p(e);if(null!=r){t((0,i.Lo)(r,32),"invalid yParityAndS");let e=(0,i.q5)(r);return e[0]&=127,(0,i.c$)(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t((128&(0,i.q5)(l)[0])==0,"non-canonical s");let{networkV:c,v:u}=function(e,r,n){if(null!=e){let t=(0,s.Ab)(e);return{networkV:t>=h?t:void 0,v:g.getNormalizedV(t)}}if(null!=r)return t((0,i.Lo)(r,32),"invalid yParityAndS"),{v:128&(0,i.q5)(r)[0]?28:27};if(null!=n){switch((0,s.WZ)(n,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),d=new g(f,o,l,u);return c&&(d.#n=c),t(null==e.yParity||(0,s.WZ)(e.yParity,"sig.yParity")===d.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===d.yParityAndS,"yParityAndS mismatch"),d}}},7690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloudflareProvider=void 0;let n=r(8662),i=r(9307),s=r(4822);class a extends s.JsonRpcProvider{constructor(e){null==e&&(e="mainnet");let t=i.Network.from(e);(0,n.assertArgument)("mainnet"===t.name,"unsupported network","network",e),super("https://cloudflare-eth.com/",t,{staticNetwork:t})}}t.CloudflareProvider=a},7700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockscoutProvider=void 0;let n=r(8662),i=r(9307),s=r(4822);class a extends s.JsonRpcProvider{apiKey;constructor(e,t){null==e&&(e="mainnet");let r=i.Network.from(e);null==t&&(t=null),super(a.getRequest(r),r,{staticNetwork:r}),(0,n.defineProperties)(this,{apiKey:t})}_getProvider(e){try{return new a(e,this.apiKey)}catch(e){}return super._getProvider(e)}isCommunityResource(){return null===this.apiKey}getRpcRequest(e){let t=super.getRpcRequest(e);return t&&"eth_estimateGas"===t.method&&1==t.args.length&&(t.args=t.args.slice(),t.args.push("latest")),t}getRpcError(e,t){let r=t?t.error:null;if(r&&-32015===r.code&&!(0,n.isHexString)(r.data||"",!0)){let e={"assert(false)":"01","arithmetic underflow or overflow":"11","division or modulo by zero":"12","out-of-bounds array access; popping on an empty array":"31","out-of-bounds access of an array or bytesN":"32"},t="";"VM execution error."===r.message?t=e[r.data]||"":e[r.message||""]&&(t=e[r.message||""]),t&&(r.message+=` (reverted: ${r.data})`,r.data="0x4e487b7100000000000000000000000000000000000000000000000000000000000000"+t)}else r&&-32e3===r.code&&"wrong transaction nonce"===r.message&&(r.message+=" (nonce too low)");return super.getRpcError(e,t)}static getRequest(e){let t=new n.FetchRequest(function(e){switch(e){case"mainnet":return"https://eth.blockscout.com/api/eth-rpc";case"sepolia":return"https://eth-sepolia.blockscout.com/api/eth-rpc";case"holesky":return"https://eth-holesky.blockscout.com/api/eth-rpc";case"classic":return"https://etc.blockscout.com/api/eth-rpc";case"arbitrum":return"https://arbitrum.blockscout.com/api/eth-rpc";case"base":return"https://base.blockscout.com/api/eth-rpc";case"base-sepolia":return"https://base-sepolia.blockscout.com/api/eth-rpc";case"matic":return"https://polygon.blockscout.com/api/eth-rpc";case"optimism":return"https://optimism.blockscout.com/api/eth-rpc";case"optimism-sepolia":return"https://optimism-sepolia.blockscout.com/api/eth-rpc";case"xdai":return"https://gnosis.blockscout.com/api/eth-rpc"}(0,n.assertArgument)(!1,"unsupported network","network",e)}(e.name));return t.allowGzip=!0,t}}t.BlockscoutProvider=a},7730:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUrl=t.createGetUrl=void 0;let n=r(7073);function i(e){return async function(t,r){let i;(0,n.assert)(null==r||!r.cancelled,"request cancelled before sending","CANCELLED");let s=t.url.split(":")[0].toLowerCase();(0,n.assert)("http"===s||"https"===s,`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),(0,n.assert)("https"===s||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let a=null,o=new AbortController,l=setTimeout(()=>{a=(0,n.makeError)("request timeout","TIMEOUT"),o.abort()},t.timeout);r&&r.addListener(()=>{a=(0,n.makeError)("request cancelled","CANCELLED"),o.abort()});let c=Object.assign({},e,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:o.signal});try{i=await fetch(t.url,c)}catch(e){if(clearTimeout(l),a)throw a;throw e}clearTimeout(l);let u={};i.headers.forEach((e,t)=>{u[t.toLowerCase()]=e});let d=await i.arrayBuffer(),h=null==d?null:new Uint8Array(d);return{statusCode:i.status,statusMessage:i.statusText,headers:u,body:h}}}t.createGetUrl=i;let s=i({});t.getUrl=async function(e,t){return s(e,t)}},7757:(e,t,r)=>{"use strict";r.d(t,{N:()=>R});var n,i,s,a,o=r(3204),l=r(6676),c=r(9827),u=r(1774),d=r(1643),h=r(9985),f=r(2830);class p extends Error{static name="InvalidFrameError";constructor(e="The frame was invalid"){super(e),this.name="InvalidFrameError"}}class g extends Error{static name="UnrequestedPingError";constructor(e="Unrequested ping error"){super(e),this.name="UnrequestedPingError"}}class m extends Error{static name="NotMatchingPingError";constructor(e="Unrequested ping error"){super(e),this.name="NotMatchingPingError"}}class b extends Error{static name="InvalidStateError";constructor(e="Invalid state"){super(e),this.name="InvalidStateError"}}class y extends Error{static name="StreamAlreadyExistsError";constructor(e="Strean already exists"){super(e),this.name="StreamAlreadyExistsError"}}class x extends Error{static name="DecodeInvalidVersionError";constructor(e="Decode invalid version"){super(e),this.name="DecodeInvalidVersionError"}}class w extends Error{static name="BothClientsError";constructor(e="Both clients"){super(e),this.name="BothClientsError"}}class v extends Error{static name="ReceiveWindowExceededError";constructor(e="Receive window exceeded"){super(e),this.name="ReceiveWindowExceededError"}}let A=new Set([p.name,g.name,m.name,y.name,x.name,w.name,v.name]),E={enableKeepAlive:!0,keepAliveInterval:3e4,maxInboundStreams:1e3,maxOutboundStreams:1e3,initialStreamWindowSize:262144,maxStreamWindowSize:0x1000000,maxMessageSize:65536};!function(e){e[e.Data=0]="Data",e[e.WindowUpdate=1]="WindowUpdate",e[e.Ping=2]="Ping",e[e.GoAway=3]="GoAway"}(n||(n={})),function(e){e[e.SYN=1]="SYN",e[e.ACK=2]="ACK",e[e.FIN=4]="FIN",e[e.RST=8]="RST"}(i||(i={})),Object.values(i).filter(e=>"string"!=typeof e),!function(e){e[e.NormalTermination=0]="NormalTermination",e[e.ProtocolError=1]="ProtocolError",e[e.InternalError=2]="InternalError"}(s||(s={}));class k{source;buffer;frameInProgress;constructor(e){this.source=function(e){if(void 0!==e[Symbol.iterator]){let t=e[Symbol.iterator]();return t.return=void 0,{[Symbol.iterator]:()=>t}}if(void 0!==e[Symbol.asyncIterator]){let t=e[Symbol.asyncIterator]();return t.return=void 0,{[Symbol.asyncIterator]:()=>t}}throw Error("a source must be either an iterable or an async iterable")}(e),this.buffer=new f.I,this.frameInProgress=!1}async *emitFrames(){for await(let e of this.source)for(this.buffer.append(e);;){let e=this.readHeader();if(void 0===e)break;let{type:t,length:r}=e;t===n.Data?(this.frameInProgress=!0,yield{header:e,readData:this.readBytes.bind(this,r)}):yield{header:e}}}readHeader(){if(this.frameInProgress)throw new b("decoding frame already in progress");if(this.buffer.length<12)return;let e=function(e){if(0!==e[0])throw new p("Invalid frame version");return{type:e[1],flag:(e[2]<<8)+e[3],streamID:0x1000000*e[4]+(e[5]<<16)+(e[6]<<8)+e[7],length:0x1000000*e[8]+(e[9]<<16)+(e[10]<<8)+e[11]}}(this.buffer.subarray(0,12));return this.buffer.consume(12),e}async readBytes(e){if(this.buffer.length<e){for await(let t of this.source)if(this.buffer.append(t),this.buffer.length>=e)break}let t=this.buffer.sublist(0,e);return this.buffer.consume(e),this.frameInProgress=!1,t}}function P(e){let t=new Uint8Array(12);return t[1]=e.type,t[2]=e.flag>>>8,t[3]=e.flag,t[4]=e.streamID>>>24,t[5]=e.streamID>>>16,t[6]=e.streamID>>>8,t[7]=e.streamID,t[8]=e.length>>>24,t[9]=e.length>>>16,t[10]=e.length>>>8,t[11]=e.length,t}var S=r(7850),I=r(847);!function(e){e[e.Init=0]="Init",e[e.SYNSent=1]="SYNSent",e[e.SYNReceived=2]="SYNReceived",e[e.Established=3]="Established",e[e.Finished=4]="Finished"}(a||(a={}));class T extends S.l{name;state;config;_id;sendWindowCapacity;sendWindowCapacityUpdate;recvWindow;recvWindowCapacity;epochStart;getRTT;sendFrame;constructor(e){super({...e,onEnd:t=>{this.state=a.Finished,e.onEnd?.(t)}}),this.config=e.config,this._id=parseInt(e.id,10),this.name=e.name,this.state=e.state,this.sendWindowCapacity=262144,this.recvWindow=this.config.initialStreamWindowSize,this.recvWindowCapacity=this.recvWindow,this.epochStart=Date.now(),this.getRTT=e.getRTT,this.sendFrame=e.sendFrame,this.source=(0,I.A)(this.source,()=>{this.sendWindowUpdate()})}async sendNewStream(){}async sendData(e,t={}){for(e=e.sublist();0!==e.byteLength;){if(0===this.sendWindowCapacity&&(this.log?.trace("wait for send window capacity, status %s",this.status),await this.waitForSendWindowCapacity(t),"closed"===this.status||"aborted"===this.status||"reset"===this.status)){this.log?.trace("%s while waiting for send window capacity",this.status);return}let r=Math.min(this.sendWindowCapacity,this.config.maxMessageSize-12,e.length),i=this.getSendFlags();this.sendFrame({type:n.Data,flag:i,streamID:this._id,length:r},e.sublist(0,r)),this.sendWindowCapacity-=r,e.consume(r)}}async sendReset(){this.sendFrame({type:n.WindowUpdate,flag:i.RST,streamID:this._id,length:0})}async sendCloseWrite(){let e=this.getSendFlags()|i.FIN;this.sendFrame({type:n.WindowUpdate,flag:e,streamID:this._id,length:0})}async sendCloseRead(){}async waitForSendWindowCapacity(e={}){let t,r;if(this.sendWindowCapacity>0)return;let n=()=>{"open"===this.status||"closing"===this.status?r(new c.lc("Stream aborted")):t()};e.signal?.addEventListener("abort",n);try{await new Promise((e,n)=>{this.sendWindowCapacityUpdate=()=>{e()},r=n,t=e})}finally{e.signal?.removeEventListener("abort",n)}}handleWindowUpdate(e){this.log?.trace("stream received window update id=%s",this._id),this.processFlags(e.flag);let t=this.sendWindowCapacity;this.sendWindowCapacity+=e.length,0===t&&e.length>0&&this.sendWindowCapacityUpdate?.()}async handleData(e,t){if(this.log?.trace("stream received data id=%s",this._id),this.processFlags(e.flag),this.recvWindowCapacity<e.length)throw new v("Receive window exceeded");let r=await t();this.recvWindowCapacity-=e.length,this.sourcePush(r)}processFlags(e){(e&i.ACK)===i.ACK&&this.state===a.SYNSent&&(this.state=a.Established),(e&i.FIN)===i.FIN&&this.remoteCloseWrite(),(e&i.RST)===i.RST&&this.reset()}getSendFlags(){switch(this.state){case a.Init:return this.state=a.SYNSent,i.SYN;case a.SYNReceived:return this.state=a.Established,i.ACK;default:return 0}}sendWindowUpdate(){let e=this.getSendFlags(),t=Date.now(),r=this.getRTT();if(0===e&&r>-1&&t-this.epochStart<4*r&&(this.recvWindow=Math.min(2*this.recvWindow,this.config.maxStreamWindowSize)),this.recvWindowCapacity>=this.recvWindow&&0===e)return;let i=this.recvWindow-this.recvWindowCapacity;this.recvWindowCapacity=this.recvWindow,this.epochStart=t,this.sendFrame({type:n.WindowUpdate,flag:e,streamID:this._id,length:i})}}let _="/yamux/1.0.0";class C{protocol=_;_components;_init;constructor(e,t={}){this._components=e,this._init=t}[Symbol.toStringTag]="@chainsafe/libp2p-yamux";[o.Ch]=["@libp2p/stream-multiplexing"];createStreamMuxer(e){return new O(this._components,{...this._init,...e})}}class O{protocol=_;source;sink;config;log;logger;closeController;nextStreamID;_streams;nextPingID;activePing;rtt;client;localGoAway;remoteGoAway;numInboundStreams;numOutboundStreams;onIncomingStream;onStreamEnd;constructor(e,t){this.client="outbound"===t.direction,this.config={...E,...t},this.logger=e.logger,this.log=this.logger.forComponent("libp2p:yamux"),function(e){if(e.keepAliveInterval<=0)throw new c.gG("keep-alive interval must be positive");if(e.maxInboundStreams<0)throw new c.gG("max inbound streams must be larger or equal 0");if(e.maxOutboundStreams<0)throw new c.gG("max outbound streams must be larger or equal 0");if(e.initialStreamWindowSize<262144)throw new c.gG("InitialStreamWindowSize must be larger or equal 256 kB");if(e.maxStreamWindowSize<e.initialStreamWindowSize)throw new c.gG("MaxStreamWindowSize must be larger than the InitialStreamWindowSize");if(e.maxStreamWindowSize>0x100000000-1)throw new c.gG("MaxStreamWindowSize must be less than equal MAX_UINT32");if(e.maxMessageSize<1024)throw new c.gG("MaxMessageSize must be greater than a kilobyte")}(this.config),this.closeController=new AbortController,(0,l.k)(1/0,this.closeController.signal),this.onIncomingStream=t.onIncomingStream,this.onStreamEnd=t.onStreamEnd,this._streams=new Map,this.source=(0,d.Ny)({onEnd:()=>{this.log?.trace("muxer source ended"),this._streams.forEach(e=>{e.destroy()})}}),this.sink=async e=>{let t,r;let n=()=>{let t=(0,u.h)(e);if(null!=t.return){let e=t.return();(function(e){return null!=e&&"function"==typeof e.then})(e)&&e.catch(e=>{this.log?.("could not cause sink source to return",e)})}};try{let r=new k(e);try{for await(let e of(this.closeController.signal.addEventListener("abort",n),r.emitFrames()))await this.handleFrame(e.header,e.readData)}finally{this.closeController.signal.removeEventListener("abort",n)}t=s.NormalTermination}catch(e){A.has(e.name)?(this.log?.error("protocol error in sink",e),t=s.ProtocolError):(this.log?.error("internal error in sink",e),t=s.InternalError),r=e}this.log?.trace("muxer sink ended"),null!=r?this.abort(r,t):await this.close({reason:t})},this.numInboundStreams=0,this.numOutboundStreams=0,this.nextStreamID=this.client?1:2,this.nextPingID=0,this.rtt=-1,this.log?.trace("muxer created"),this.config.enableKeepAlive&&this.keepAliveLoop().catch(e=>this.log?.error("keepalive error: %s",e)),this.ping().catch(e=>this.log?.error("ping error: %s",e))}get streams(){return Array.from(this._streams.values())}newStream(e){if(void 0!==this.remoteGoAway)throw new c.Qx("Muxer closed remotely");if(void 0!==this.localGoAway)throw new c.Qx("Muxer closed locally");let t=this.nextStreamID;if(this.nextStreamID+=2,this.numOutboundStreams>=this.config.maxOutboundStreams)throw new c.NJ("max outbound streams exceeded");this.log?.trace("new outgoing stream id=%s",t);let r=this._newStream(t,e,a.Init,"outbound");return this._streams.set(t,r),this.numOutboundStreams++,r.sendWindowUpdate(),r}async ping(){if(void 0!==this.remoteGoAway)throw new c.Qx("Muxer closed remotely");if(void 0!==this.localGoAway)throw new c.Qx("Muxer closed locally");if(void 0===this.activePing){let e=()=>{};this.activePing={id:this.nextPingID++,promise:new Promise((t,r)=>{let n=()=>{r(new c.Qx("Muxer closed locally"))};this.closeController.signal.addEventListener("abort",n,{once:!0}),e=()=>{this.closeController.signal.removeEventListener("abort",n),t()}}),resolve:e};let t=Date.now();this.sendPing(this.activePing.id);try{await this.activePing.promise}finally{delete this.activePing}let r=Date.now();this.rtt=r-t}else await this.activePing.promise;return this.rtt}getRTT(){return this.rtt}async close(e={}){if(this.closeController.signal.aborted)return;let t=e?.reason??s.NormalTermination;if(this.log?.trace("muxer close reason=%s",t),null==e.signal){let t=AbortSignal.timeout(500);(0,l.k)(1/0,t),e={...e,signal:t}}try{await Promise.all([...this._streams.values()].map(async t=>t.close(e))),this.sendGoAway(t),this._closeMuxer()}catch(e){this.abort(e)}}abort(e,t){if(!this.closeController.signal.aborted){for(let r of(t=t??s.InternalError,this.log?.error("muxer abort reason=%s error=%s",t,e),this._streams.values()))r.abort(e);this.sendGoAway(t),this._closeMuxer()}}isClosed(){return this.closeController.signal.aborted}_closeMuxer(){this.closeController.abort(),this.source.end()}_newStream(e,t,r,n){if(null!=this._streams.get(e))throw new c.gG("Stream already exists with that id");let i=new T({id:e.toString(),name:t,state:r,direction:n,sendFrame:this.sendFrame.bind(this),onEnd:()=>{this.closeStream(e),this.onStreamEnd?.(i)},log:this.logger.forComponent(`libp2p:yamux:${n}:${e}`),config:this.config,getRTT:this.getRTT.bind(this)});return i}closeStream(e){this.client===(e%2==0)?this.numInboundStreams--:this.numOutboundStreams--,this._streams.delete(e)}async keepAliveLoop(){for(this.log?.trace("muxer keepalive enabled interval=%s",this.config.keepAliveInterval);;){let e;try{await (0,h.W)(new Promise(t=>{e=setTimeout(t,this.config.keepAliveInterval)}),this.closeController.signal),this.ping().catch(e=>this.log?.error("ping error: %s",e))}catch(t){clearInterval(e);return}}}async handleFrame(e,t){let{streamID:r,type:i,length:s}=e;if(this.log?.trace("received frame %o",e),0===r)switch(i){case n.Ping:this.handlePing(e);return;case n.GoAway:this.handleGoAway(s);return;default:throw new p("Invalid frame type")}else switch(e.type){case n.Data:case n.WindowUpdate:await this.handleStreamMessage(e,t);return;default:throw new p("Invalid frame type")}}handlePing(e){if(e.flag===i.SYN)this.log?.trace("received ping request pingId=%s",e.length),this.sendPing(e.length,i.ACK);else if(e.flag===i.ACK)this.log?.trace("received ping response pingId=%s",e.length),this.handlePingResponse(e.length);else throw new p("Invalid frame flag")}handlePingResponse(e){if(void 0===this.activePing)throw new g("ping not requested");if(this.activePing.id!==e)throw new m("ping doesn't match our id");this.activePing.resolve()}handleGoAway(e){for(let t of(this.log?.trace("received GoAway reason=%s",s[e]??"unknown"),this.remoteGoAway=e,this._streams.values()))t.reset();this._closeMuxer()}async handleStreamMessage(e,t){let{streamID:r,flag:s,type:a}=e;(s&i.SYN)===i.SYN&&this.incomingStream(r);let o=this._streams.get(r);if(void 0===o){if(a===n.Data){if(this.log?.("discarding data for stream id=%s",r),void 0===t)throw Error("unreachable");await t()}else this.log?.trace("frame for missing stream id=%s",r);return}switch(a){case n.WindowUpdate:o.handleWindowUpdate(e);return;case n.Data:if(void 0===t)throw Error("unreachable");await o.handleData(e,t);return;default:throw Error("unreachable")}}incomingStream(e){if(this.client!==(e%2==0))throw new c.gG("Both endpoints are clients");if(this._streams.has(e))return;if(this.log?.trace("new incoming stream id=%s",e),void 0!==this.localGoAway){this.sendFrame({type:n.WindowUpdate,flag:i.RST,streamID:e,length:0});return}if(this.numInboundStreams>=this.config.maxInboundStreams){this.log?.("maxIncomingStreams exceeded, forcing stream reset"),this.sendFrame({type:n.WindowUpdate,flag:i.RST,streamID:e,length:0});return}let t=this._newStream(e,void 0,a.SYNReceived,"inbound");this.numInboundStreams++,this._streams.set(e,t),this.onIncomingStream?.(t)}sendFrame(e,t){if(this.log?.trace("sending frame %o",e),e.type===n.Data){if(void 0===t)throw new p("Invalid frame");this.source.push(new f.I(P(e),t))}else this.source.push(P(e))}sendPing(e,t=i.SYN){t===i.SYN?this.log?.trace("sending ping request pingId=%s",e):this.log?.trace("sending ping response pingId=%s",e),this.sendFrame({type:n.Ping,flag:t,streamID:0,length:e})}sendGoAway(e=s.NormalTermination){this.log?.("sending GoAway reason=%s",s[e]),this.localGoAway=e,this.sendFrame({type:n.GoAway,flag:0,streamID:0,length:e})}}function R(e={}){return t=>new C(t,e)}},7774:(e,t,r)=>{"use strict";r.d(t,{H:()=>i});var n=r(4057);function i({name:e,code:t,encode:r}){return new s(e,t,r)}class s{name;code;encode;constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?n.vt(this.code,t):t.then(e=>n.vt(this.code,e))}throw Error("Unknown type, must be binary type")}}},7797:(e,t,r)=>{"use strict";r.d(t,{x:()=>s});var n=r(1970),i=r(3256);function s(e,t){null==t&&(t=e.reduce((e,t)=>e+t.length,0));let r=(0,n.K)(t),s=0;for(let t of e)r.set(t,s),s+=t.length;return(0,i.o)(r)}},7813:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Typed=t.Result=t.TransactionDescription=t.LogDescription=t.ErrorDescription=t.Interface=t.Indexed=t.checkResultErrors=t.StructFragment=t.ParamType=t.NamedFragment=t.FunctionFragment=t.Fragment=t.FallbackFragment=t.EventFragment=t.ErrorFragment=t.ConstructorFragment=t.encodeBytes32String=t.decodeBytes32String=t.AbiCoder=void 0;var n=r(4931);Object.defineProperty(t,"AbiCoder",{enumerable:!0,get:function(){return n.AbiCoder}});var i=r(1735);Object.defineProperty(t,"decodeBytes32String",{enumerable:!0,get:function(){return i.decodeBytes32String}}),Object.defineProperty(t,"encodeBytes32String",{enumerable:!0,get:function(){return i.encodeBytes32String}});var s=r(2332);Object.defineProperty(t,"ConstructorFragment",{enumerable:!0,get:function(){return s.ConstructorFragment}}),Object.defineProperty(t,"ErrorFragment",{enumerable:!0,get:function(){return s.ErrorFragment}}),Object.defineProperty(t,"EventFragment",{enumerable:!0,get:function(){return s.EventFragment}}),Object.defineProperty(t,"FallbackFragment",{enumerable:!0,get:function(){return s.FallbackFragment}}),Object.defineProperty(t,"Fragment",{enumerable:!0,get:function(){return s.Fragment}}),Object.defineProperty(t,"FunctionFragment",{enumerable:!0,get:function(){return s.FunctionFragment}}),Object.defineProperty(t,"NamedFragment",{enumerable:!0,get:function(){return s.NamedFragment}}),Object.defineProperty(t,"ParamType",{enumerable:!0,get:function(){return s.ParamType}}),Object.defineProperty(t,"StructFragment",{enumerable:!0,get:function(){return s.StructFragment}});var a=r(5378);Object.defineProperty(t,"checkResultErrors",{enumerable:!0,get:function(){return a.checkResultErrors}}),Object.defineProperty(t,"Indexed",{enumerable:!0,get:function(){return a.Indexed}}),Object.defineProperty(t,"Interface",{enumerable:!0,get:function(){return a.Interface}}),Object.defineProperty(t,"ErrorDescription",{enumerable:!0,get:function(){return a.ErrorDescription}}),Object.defineProperty(t,"LogDescription",{enumerable:!0,get:function(){return a.LogDescription}}),Object.defineProperty(t,"TransactionDescription",{enumerable:!0,get:function(){return a.TransactionDescription}}),Object.defineProperty(t,"Result",{enumerable:!0,get:function(){return a.Result}});var o=r(4037);Object.defineProperty(t,"Typed",{enumerable:!0,get:function(){return o.Typed}})},7840:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;let n=r(2399),i=r(7385);class s{constructor(){if(this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new i.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw Error("System random byte generator is not available.");return this._source.randomBytes(e)}}t.SystemRandomSource=s},7848:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SocketProvider=t.SocketEventSubscriber=t.SocketPendingSubscriber=t.SocketBlockSubscriber=t.SocketSubscriber=void 0;let n=r(4861),i=r(8662),s=r(4822);class a{#G;#C;get filter(){return JSON.parse(this.#C)}#rs;#ra;#ro;constructor(e,t){this.#G=e,this.#C=JSON.stringify(t),this.#rs=null,this.#ra=null,this.#ro=null}start(){this.#rs=this.#G.send("eth_subscribe",this.filter).then(e=>(this.#G._register(e,this),e))}stop(){this.#rs.then(e=>{!this.#G.destroyed&&this.#G.send("eth_unsubscribe",[e])}),this.#rs=null}pause(e){(0,i.assert)(e,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),this.#ra=!!e}resume(){this.#ra=null}_handleMessage(e){if(null!=this.#rs&&null===this.#ra){let t=this.#ro;t=null==t?this._emit(this.#G,e):t.then(async()=>{await this._emit(this.#G,e)}),this.#ro=t.then(()=>{this.#ro===t&&(this.#ro=null)})}}async _emit(e,t){throw Error("sub-classes must implemente this; _emit")}}t.SocketSubscriber=a;class o extends a{constructor(e){super(e,["newHeads"])}async _emit(e,t){e.emit("block",parseInt(t.number))}}t.SocketBlockSubscriber=o;class l extends a{constructor(e){super(e,["newPendingTransactions"])}async _emit(e,t){e.emit("pending",t)}}t.SocketPendingSubscriber=l;class c extends a{#rl;get logFilter(){return JSON.parse(this.#rl)}constructor(e,t){super(e,["logs",t]),this.#rl=JSON.stringify(t)}async _emit(e,t){e.emit(this.logFilter,e._wrapLog(t,e._network))}}t.SocketEventSubscriber=c;class u extends s.JsonRpcApiProvider{#rc;#eN;#tK;constructor(e,t){let r=Object.assign({},null!=t?t:{});(0,i.assertArgument)(null==r.batchMaxCount||1===r.batchMaxCount,"sockets-based providers do not support batches","options.batchMaxCount",t),r.batchMaxCount=1,null==r.staticNetwork&&(r.staticNetwork=!0),super(e,r),this.#rc=new Map,this.#eN=new Map,this.#tK=new Map}_getSubscriber(e){switch(e.type){case"close":return new n.UnmanagedSubscriber("close");case"block":return new o(this);case"pending":return new l(this);case"event":return new c(this,e.filter);case"orphan":if("drop-log"===e.filter.orphan)return new n.UnmanagedSubscriber("drop-log")}return super._getSubscriber(e)}_register(e,t){this.#eN.set(e,t);let r=this.#tK.get(e);if(r){for(let e of r)t._handleMessage(e);this.#tK.delete(e)}}async _send(e){(0,i.assertArgument)(!Array.isArray(e),"WebSocket does not support batch send","payload",e);let t=new Promise((t,r)=>{this.#rc.set(e.id,{payload:e,resolve:t,reject:r})});return await this._waitUntilReady(),await this._write(JSON.stringify(e)),[await t]}async _processMessage(e){let t=JSON.parse(e);if(t&&"object"==typeof t&&"id"in t){let e=this.#rc.get(t.id);if(null==e){this.emit("error",(0,i.makeError)("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:t}));return}this.#rc.delete(t.id),e.resolve(t)}else if(t&&"eth_subscription"===t.method){let e=t.params.subscription,r=this.#eN.get(e);if(r)r._handleMessage(t.params.result);else{let r=this.#tK.get(e);null==r&&(r=[],this.#tK.set(e,r)),r.push(t.params.result)}}else{this.emit("error",(0,i.makeError)("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:t}));return}}async _write(e){throw Error("sub-classes must override this")}}t.SocketProvider=u},7850:(e,t,r)=>{"use strict";r.d(t,{l:()=>u});var n=r(9827),i=r(1643),s=r(9608),a=r(9985),o=r(2830),l=r(1774);function c(e){return null!=e&&"function"==typeof e.then&&"function"==typeof e.catch&&"function"==typeof e.finally}class u{id;direction;timeline;protocol;metadata;source;status;readStatus;writeStatus;log;sinkController;sinkEnd;closed;endErr;streamSource;onEnd;onCloseRead;onCloseWrite;onReset;onAbort;sendCloseWriteTimeout;sendingData;constructor(e){this.sinkController=new AbortController,this.sinkEnd=(0,s.A)(),this.closed=(0,s.A)(),this.log=e.log,this.status="open",this.readStatus="ready",this.writeStatus="ready",this.id=e.id,this.metadata=e.metadata??{},this.direction=e.direction,this.timeline={open:Date.now()},this.sendCloseWriteTimeout=e.sendCloseWriteTimeout??5e3,this.onEnd=e.onEnd,this.onCloseRead=e.onCloseRead,this.onCloseWrite=e.onCloseWrite,this.onReset=e.onReset,this.onAbort=e.onAbort,this.source=this.streamSource=(0,i.Ny)({onEnd:e=>{null!=e?this.log.trace("source ended with error",e):this.log.trace("source ended"),this.onSourceEnd(e)}}),this.sink=this.sink.bind(this)}async sink(e){if("ready"!==this.writeStatus)throw new n.mw(`writable end state is "${this.writeStatus}" not "ready"`);try{this.writeStatus="writing";let t={signal:this.sinkController.signal};if("outbound"===this.direction){let e=this.sendNewStream(t);c(e)&&await e}let r=()=>{!function(e,t){let r=l.h(e).return?.();null!=r&&"function"==typeof r.then&&"function"==typeof r.catch&&"function"==typeof r.finally&&r.catch(e=>{t.error("could not cause iterator to return",e)})}(e,this.log)};try{for await(let n of(this.sinkController.signal.addEventListener("abort",r),this.log.trace("sink reading from source"),e)){n=n instanceof Uint8Array?new o.I(n):n;let e=this.sendData(n,t);c(e)&&(this.sendingData=(0,s.A)(),await e,this.sendingData.resolve(),this.sendingData=void 0)}}finally{this.sinkController.signal.removeEventListener("abort",r)}this.log.trace('sink finished reading from source, write status is "%s"',this.writeStatus),"writing"===this.writeStatus&&(this.writeStatus="closing",this.log.trace("send close write to remote"),await this.sendCloseWrite({signal:AbortSignal.timeout(this.sendCloseWriteTimeout)}),this.writeStatus="closed"),this.onSinkEnd()}catch(e){throw this.log.trace("sink ended with error, calling abort with error",e),this.abort(e),e}finally{this.log.trace("resolve sink end"),this.sinkEnd.resolve()}}onSourceEnd(e){null==this.timeline.closeRead&&(this.timeline.closeRead=Date.now(),this.readStatus="closed",null!=e&&null==this.endErr&&(this.endErr=e),this.onCloseRead?.(),null!=this.timeline.closeWrite?(this.log.trace("source and sink ended"),this.timeline.close=Date.now(),"aborted"!==this.status&&"reset"!==this.status&&(this.status="closed"),null!=this.onEnd&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("source ended, waiting for sink to end"))}onSinkEnd(e){null==this.timeline.closeWrite&&(this.timeline.closeWrite=Date.now(),this.writeStatus="closed",null!=e&&null==this.endErr&&(this.endErr=e),this.onCloseWrite?.(),null!=this.timeline.closeRead?(this.log.trace("sink and source ended"),this.timeline.close=Date.now(),"aborted"!==this.status&&"reset"!==this.status&&(this.status="closed"),null!=this.onEnd&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("sink ended, waiting for source to end"))}async close(e){"open"===this.status&&(this.log.trace("closing gracefully"),this.status="closing",await (0,a.W)(Promise.all([this.closeWrite(e),this.closeRead(e),this.closed.promise]),e?.signal),this.status="closed",this.log.trace("closed gracefully"))}async closeRead(e={}){if("closing"===this.readStatus||"closed"===this.readStatus)return;this.log.trace('closing readable end of stream with starting read status "%s"',this.readStatus);let t=this.readStatus;this.readStatus="closing","reset"!==this.status&&"aborted"!==this.status&&null==this.timeline.closeRead&&(this.log.trace("send close read to remote"),await this.sendCloseRead(e)),"ready"===t&&(this.log.trace("ending internal source queue with %d queued bytes",this.streamSource.readableLength),this.streamSource.end()),this.log.trace("closed readable end of stream")}async closeWrite(e={}){"closing"!==this.writeStatus&&"closed"!==this.writeStatus&&(this.log.trace('closing writable end of stream with starting write status "%s"',this.writeStatus),"ready"===this.writeStatus&&(this.log.trace("sink was never sunk, sink an empty array"),await (0,a.W)(this.sink([]),e.signal)),"writing"===this.writeStatus&&(null!=this.sendingData&&await (0,a.W)(this.sendingData.promise,e.signal),this.log.trace("aborting source passed to .sink"),this.sinkController.abort(),await (0,a.W)(this.sinkEnd.promise,e.signal)),this.writeStatus="closed",this.log.trace("closed writable end of stream"))}abort(e){if("closed"===this.status||"aborted"===this.status||"reset"===this.status)return;this.log("abort with error",e),this.log("try to send reset to remote");let t=this.sendReset();c(t)&&t.catch(e=>{this.log.error("error sending reset message",e)}),this.status="aborted",this.timeline.abort=Date.now(),this._closeSinkAndSource(e),this.onAbort?.(e)}reset(){if("closed"===this.status||"aborted"===this.status||"reset"===this.status)return;let e=new n.yp("stream reset");this.status="reset",this.timeline.reset=Date.now(),this._closeSinkAndSource(e),this.onReset?.()}_closeSinkAndSource(e){this._closeSink(e),this._closeSource(e)}_closeSink(e){"writing"===this.writeStatus&&(this.log.trace("end sink source"),this.sinkController.abort()),this.onSinkEnd(e)}_closeSource(e){"closing"!==this.readStatus&&"closed"!==this.readStatus&&(this.log.trace("ending source with %d bytes to be read by consumer",this.streamSource.readableLength),this.readStatus="closing",this.streamSource.end(e))}remoteCloseWrite(){if("closing"===this.readStatus||"closed"===this.readStatus){this.log("received remote close write but local source is already closed");return}this.log.trace("remote close write"),this._closeSource()}remoteCloseRead(){if("closing"===this.writeStatus||"closed"===this.writeStatus){this.log("received remote close read but local sink is already closed");return}this.log.trace("remote close read"),this._closeSink()}destroy(){if("closed"===this.status||"aborted"===this.status||"reset"===this.status){this.log("received destroy but we are already closed");return}this.log.trace("stream destroyed"),this._closeSinkAndSource()}sourcePush(e){this.streamSource.push(e)}sourceReadableLength(){return this.streamSource.readableLength}}},7905:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(4298);async function i(e,t,r){try{await Promise.all(e.map(async e=>{for await(let n of e)await t.push(n,{signal:r}),r.throwIfAborted()})),await t.end(void 0,{signal:r})}catch(e){await t.end(e,{signal:r}).catch(()=>{})}}async function*s(e){let t=new AbortController,r=(0,n.L)();i(e,r,t.signal).catch(()=>{});try{yield*r}finally{t.abort()}}let a=function(...e){let t=[];for(let r of e)null==r[Symbol.asyncIterator]&&t.push(r);return t.length===e.length?function*(e){for(let t of e)yield*t}(t):s(e)}},7912:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuickNodeProvider=void 0;let n=r(8662),i=r(5188),s=r(9307),a=r(4822),o="919b412a057b5e9c9b6dce193c5a60242d6efadb";class l extends a.JsonRpcProvider{token;constructor(e,t){null==e&&(e="mainnet");let r=s.Network.from(e);null==t&&(t=o),super(l.getRequest(r,t),r,{staticNetwork:r}),(0,n.defineProperties)(this,{token:t})}_getProvider(e){try{return new l(e,this.token)}catch(e){}return super._getProvider(e)}isCommunityResource(){return this.token===o}static getRequest(e,t){null==t&&(t=o);let r=new n.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"ethers.quiknode.pro";case"goerli":return"ethers.ethereum-goerli.quiknode.pro";case"sepolia":return"ethers.ethereum-sepolia.quiknode.pro";case"holesky":return"ethers.ethereum-holesky.quiknode.pro";case"arbitrum":return"ethers.arbitrum-mainnet.quiknode.pro";case"arbitrum-goerli":return"ethers.arbitrum-goerli.quiknode.pro";case"arbitrum-sepolia":return"ethers.arbitrum-sepolia.quiknode.pro";case"base":return"ethers.base-mainnet.quiknode.pro";case"base-goerli":return"ethers.base-goerli.quiknode.pro";case"base-spolia":return"ethers.base-sepolia.quiknode.pro";case"bnb":return"ethers.bsc.quiknode.pro";case"bnbt":return"ethers.bsc-testnet.quiknode.pro";case"matic":return"ethers.matic.quiknode.pro";case"matic-mumbai":return"ethers.matic-testnet.quiknode.pro";case"optimism":return"ethers.optimism.quiknode.pro";case"optimism-goerli":return"ethers.optimism-goerli.quiknode.pro";case"optimism-sepolia":return"ethers.optimism-sepolia.quiknode.pro";case"xdai":return"ethers.xdai.quiknode.pro"}(0,n.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/${t}`);return r.allowGzip=!0,t===o&&(r.retryFunc=async(e,t,r)=>((0,i.showThrottleMessage)("QuickNodeProvider"),!0)),r}}t.QuickNodeProvider=l},7937:(e,t,r)=>{"use strict";r.d(t,{FK:()=>G,Pw:()=>W,Zp:()=>K,aX:()=>H,bp:()=>q,hc:()=>Z});var n=r(1456),i=r(9982),s=r(8616),a=r(4453);function o(e){let t=new Set;return e.forEach(e=>t.add(e)),Object.freeze(t)}let l=o("external public payable override".split(" ")),c="constant external internal payable private public pure view override",u=o(c.split(" ")),d="constructor error event fallback function receive struct",h=o(d.split(" ")),f="calldata memory storage payable indexed",p=o(f.split(" ")),g=o([d,f,"tuple returns",c].join(" ").split(" ")),m={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},b=RegExp("^(\\s*)"),y=RegExp("^([0-9]+)"),x=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),w=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),v=RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class A{#u;#m;get offset(){return this.#u}get length(){return this.#m.length-this.#u}constructor(e){this.#u=0,this.#m=e.slice()}clone(){return new A(this.#m)}reset(){this.#u=0}#b(e=0,t=0){return new A(this.#m.slice(e,t).map(t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e}))))}popKeyword(e){let t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){let t=this.peek();throw Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=this.#b(this.#u+1,e.match+1);return this.#u=e.match+1,t}popParams(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=[];for(;this.#u<e.match-1;){let e=this.peek().linkNext;t.push(this.#b(this.#u+1,e)),this.#u=e}return this.#u=e.match+1,t}peek(){if(this.#u>=this.#m.length)throw Error("out-of-bounds");return this.#m[this.#u]}peekKeyword(e){let t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;let t=this.peek();return t.type===e?t.text:null}pop(){let e=this.peek();return this.#u++,e}toString(){let e=[];for(let t=this.#u;t<this.#m.length;t++){let r=this.#m[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function E(e){let t=[],r=t=>{let r=a<e.length?JSON.stringify(e[a]):"$EOI";throw Error(`invalid token ${r} at ${a}: ${t}`)},i=[],s=[],a=0;for(;a<e.length;){let o=e.substring(a),l=o.match(b);l&&(a+=l[1].length,o=e.substring(a));let c={depth:i.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:a,value:-1};t.push(c);let u=m[o[0]]||"";if(u){if(c.type=u,c.text=o[0],a++,"OPEN_PAREN"===u)i.push(t.length-1),s.push(t.length-1);else if("CLOSE_PAREN"==u)0===i.length&&r("no matching open bracket"),c.match=i.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if("COMMA"===u)c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if("OPEN_BRACKET"===u)c.type="BRACKET";else if("CLOSE_BRACKET"===u){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){let r=t.pop().text;e=r+e,t[t.length-1].value=(0,n.WZ)(r)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw Error("missing opening bracket");t[t.length-1].text+=e}continue}if(l=o.match(x)){if(c.text=l[1],a+=c.text.length,g.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(v)){c.type="TYPE";continue}c.type="ID";continue}if(l=o.match(y)){c.text=l[1],c.type="NUMBER",a+=c.text.length;continue}throw Error(`unexpected token ${JSON.stringify(o[0])} at position ${a}`)}return new A(t.map(e=>Object.freeze(e)))}function k(e,t){let r=[];for(let n in t.keys())e.has(n)&&r.push(n);if(r.length>1)throw Error(`conflicting types: ${r.join(", ")}`)}function P(e,t){if(t.peekKeyword(h)){let r=t.pop().text;if(r!==e)throw Error(`expected ${e}, got ${r}`)}return t.popType("ID")}function S(e,t){let r=new Set;for(;;){let n=e.peekType("KEYWORD");if(null==n||t&&!t.has(n))break;if(e.pop(),r.has(n))throw Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function I(e){let t=S(e,u);return(k(t,o("constant payable nonpayable".split(" "))),k(t,o("pure view payable nonpayable".split(" "))),t.has("view"))?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function T(e,t){return e.popParams().map(e=>H.from(e,t))}function _(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return(0,n.Ab)(e.pop().text);throw Error("invalid gas")}return null}function C(e){if(e.length)throw Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}let O=new RegExp(/^(.*)\[([0-9]*)\]$/);function R(e){let t=e.match(v);if((0,i.MR)(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){let r=parseInt(t[2]);(0,i.MR)(0!==r&&r<=32,"invalid bytes length","type",e)}else if(t[3]){let r=parseInt(t[3]);(0,i.MR)(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",e)}return e}let N={},M=Symbol.for("_ethers_internal"),B="_ParamTypeInternal",D="_ErrorInternal",L="_EventInternal",U="_ConstructorInternal",F="_FallbackInternal",j="_FunctionInternal",z="_StructInternal";class H{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,r,n,a,o,l,c){if((0,i.gk)(e,N,"ParamType"),Object.defineProperty(this,M,{value:B}),o&&(o=Object.freeze(o.slice())),"array"===n){if(null==l||null==c)throw Error("")}else if(null!=l||null!=c)throw Error("");if("tuple"===n){if(null==o)throw Error("")}else if(null!=o)throw Error("");(0,s.n)(this,{name:t,type:r,baseType:n,indexed:a,components:o,arrayLength:l,arrayChildren:c})}format(e){if(null==e&&(e="sighash"),"json"===e){let t=this.name||"";if(this.isArray()){let e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}let r={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(t=>t.format(e)).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw Error("array is wrong length");let r=this;return e.map(e=>r.arrayChildren.walk(e,t))}if(this.isTuple()){if(!Array.isArray(e))throw Error("invalid tuple value");if(e.length!==this.components.length)throw Error("array is wrong length");let r=this;return e.map((e,n)=>r.components[n].walk(e,t))}return t(this.type,e)}#y(e,t,r,n){if(this.isArray()){if(!Array.isArray(t))throw Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw Error("array is wrong length");let i=this.arrayChildren,s=t.slice();s.forEach((t,n)=>{i.#y(e,t,r,e=>{s[n]=e})}),n(s);return}if(this.isTuple()){let i;let s=this.components;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!=typeof t)throw Error("invalid tuple value");i=s.map(e=>{if(!e.name)throw Error("cannot use object value with unnamed components");if(!(e.name in t))throw Error(`missing value for component ${e.name}`);return t[e.name]})}if(i.length!==this.components.length)throw Error("array is wrong length");i.forEach((t,n)=>{s[n].#y(e,t,r,e=>{i[n]=e})}),n(i);return}let i=r(this.type,t);i.then?e.push(async function(){n(await i)}()):n(i)}async walkAsync(e,t){let r=[],n=[e];return this.#y(r,e,t,e=>{n[0]=e}),r.length&&await Promise.all(r),n[0]}static from(e,t){if(H.isParamType(e))return e;if("string"==typeof e)try{return H.from(E(e),t)}catch(t){(0,i.MR)(!1,"invalid param type","obj",e)}else if(e instanceof A){let r="",n="",i=null;S(e,o(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(n="tuple",i=e.popParams().map(e=>H.from(e)),r=`tuple(${i.map(e=>e.format()).join(",")})`):n=r=R(e.popType("TYPE"));let s=null,a=null;for(;e.length&&e.peekType("BRACKET");){let t=e.pop();s=new H(N,"",r,n,null,i,a,s),a=t.value,r+=t.text,n="array",i=null}let l=null;if(S(e,p).has("indexed")){if(!t)throw Error("");l=!0}let c=e.peekType("ID")?e.pop().text:"";if(e.length)throw Error("leftover tokens");return new H(N,c,r,n,l,i,a,s)}let r=e.name;(0,i.MR)(!r||"string"==typeof r&&r.match(w),"invalid name","obj.name",r);let n=e.indexed;null!=n&&((0,i.MR)(t,"parameter cannot be indexed","obj.indexed",e.indexed),n=!!n);let s=e.type,a=s.match(O);if(a){let t=parseInt(a[2]||"-1"),i=H.from({type:a[1],components:e.components});return new H(N,r||"",s,"array",n,null,t,i)}if("tuple"===s||s.startsWith("tuple(")||s.startsWith("(")){let t=null!=e.components?e.components.map(e=>H.from(e)):null;return new H(N,r||"",s,"tuple",n,t,null,null)}return new H(N,r||"",s=R(e.type),s,n,null,null,null)}static isParamType(e){return e&&e[M]===B}}class G{type;inputs;constructor(e,t,r){(0,i.gk)(e,N,"Fragment"),r=Object.freeze(r.slice()),(0,s.n)(this,{type:t,inputs:r})}static from(e){if("string"==typeof e){try{G.from(JSON.parse(e))}catch(e){}return G.from(E(e))}if(e instanceof A)switch(e.peekKeyword(h)){case"constructor":return W.from(e);case"error":return q.from(e);case"event":return K.from(e);case"fallback":case"receive":return Q.from(e);case"function":return Z.from(e);case"struct":return J.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return W.from(e);case"error":return q.from(e);case"event":return K.from(e);case"fallback":case"receive":return Q.from(e);case"function":return Z.from(e);case"struct":return J.from(e)}(0,i.vA)(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}(0,i.MR)(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return W.isFragment(e)}static isError(e){return q.isFragment(e)}static isEvent(e){return K.isFragment(e)}static isFunction(e){return Z.isFragment(e)}static isStruct(e){return J.isFragment(e)}}class $ extends G{name;constructor(e,t,r,n){super(e,t,n),(0,i.MR)("string"==typeof r&&r.match(w),"invalid identifier","name",r),n=Object.freeze(n.slice()),(0,s.n)(this,{name:r})}}function V(e,t){return"("+t.map(t=>t.format(e)).join("full"===e?", ":",")+")"}class q extends ${constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,M,{value:D})}get selector(){return(0,a.id)(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+V(e,this.inputs)),t.join(" ")}static from(e){if(q.isFragment(e))return e;if("string"==typeof e)return q.from(E(e));if(e instanceof A){let t=P("error",e),r=T(e);return C(e),new q(N,t,r)}return new q(N,e.name,e.inputs?e.inputs.map(H.from):[])}static isFragment(e){return e&&e[M]===D}}class K extends ${anonymous;constructor(e,t,r,n){super(e,"event",t,r),Object.defineProperty(this,M,{value:L}),(0,s.n)(this,{anonymous:n})}get topicHash(){return(0,a.id)(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+V(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return new K(N,e,t=(t||[]).map(e=>H.from(e)),!1).topicHash}static from(e){if(K.isFragment(e))return e;if("string"==typeof e)try{return K.from(E(e))}catch(t){(0,i.MR)(!1,"invalid event fragment","obj",e)}else if(e instanceof A){let t=P("event",e),r=T(e,!0),n=!!S(e,o(["anonymous"])).has("anonymous");return C(e),new K(N,t,r,n)}return new K(N,e.name,e.inputs?e.inputs.map(e=>H.from(e,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[M]===L}}class W extends G{payable;gas;constructor(e,t,r,n,i){super(e,t,r),Object.defineProperty(this,M,{value:U}),(0,s.n)(this,{payable:n,gas:i})}format(e){if((0,i.vA)(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[`constructor${V(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(W.isFragment(e))return e;if("string"==typeof e)try{return W.from(E(e))}catch(t){(0,i.MR)(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof A){S(e,o(["constructor"]));let t=T(e),r=!!S(e,l).has("payable"),n=_(e);return C(e),new W(N,"constructor",t,r,n)}return new W(N,"constructor",e.inputs?e.inputs.map(H.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[M]===U}}class Q extends G{payable;constructor(e,t,r){super(e,"fallback",t),Object.defineProperty(this,M,{value:F}),(0,s.n)(this,{payable:r})}format(e){let t=0===this.inputs.length?"receive":"fallback";return"json"===e?JSON.stringify({type:t,stateMutability:this.payable?"payable":"nonpayable"}):`${t}()${this.payable?" payable":""}`}static from(e){if(Q.isFragment(e))return e;if("string"==typeof e)try{return Q.from(E(e))}catch(t){(0,i.MR)(!1,"invalid fallback fragment","obj",e)}else if(e instanceof A){let t=e.toString(),r=e.peekKeyword(o(["fallback","receive"]));if((0,i.MR)(r,"type must be fallback or receive","obj",t),"receive"===e.popKeyword(o(["fallback","receive"]))){let t=T(e);return(0,i.MR)(0===t.length,"receive cannot have arguments","obj.inputs",t),S(e,o(["payable"])),C(e),new Q(N,[],!0)}let n=T(e);n.length?(0,i.MR)(1===n.length&&"bytes"===n[0].type,"invalid fallback inputs","obj.inputs",n.map(e=>e.format("minimal")).join(", ")):n=[H.from("bytes")];let s=I(e);if((0,i.MR)("nonpayable"===s||"payable"===s,"fallback cannot be constants","obj.stateMutability",s),S(e,o(["returns"])).has("returns")){let t=T(e);(0,i.MR)(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map(e=>e.format("minimal")).join(", "))}return C(e),new Q(N,n,"payable"===s)}return"receive"===e.type?new Q(N,[],!0):"fallback"===e.type?new Q(N,[H.from("bytes")],"payable"===e.stateMutability):void(0,i.MR)(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[M]===F}}class Z extends ${constant;outputs;stateMutability;payable;gas;constructor(e,t,r,n,i,a){super(e,"function",t,n),Object.defineProperty(this,M,{value:j}),i=Object.freeze(i.slice()),(0,s.n)(this,{constant:"view"===r||"pure"===r,gas:a,outputs:i,payable:"payable"===r,stateMutability:r})}get selector(){return(0,a.id)(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+V(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(V(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return new Z(N,e,"view",t=(t||[]).map(e=>H.from(e)),[],null).selector}static from(e){if(Z.isFragment(e))return e;if("string"==typeof e)try{return Z.from(E(e))}catch(t){(0,i.MR)(!1,"invalid function fragment","obj",e)}else if(e instanceof A){let t=P("function",e),r=T(e),n=I(e),i=[];S(e,o(["returns"])).has("returns")&&(i=T(e));let s=_(e);return C(e),new Z(N,t,n,r,i,s)}let t=e.stateMutability;return null!=t||(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new Z(N,e.name,t,e.inputs?e.inputs.map(H.from):[],e.outputs?e.outputs.map(H.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[M]===j}}class J extends ${constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,M,{value:z})}format(){throw Error("@TODO")}static from(e){if("string"==typeof e)try{return J.from(E(e))}catch(t){(0,i.MR)(!1,"invalid struct fragment","obj",e)}else if(e instanceof A){let t=P("struct",e),r=T(e);return C(e),new J(N,t,r)}return new J(N,e.name,e.inputs?e.inputs.map(H.from):[])}static isFragment(e){return e&&e[M]===z}}},7939:(e,t,r)=>{"use strict";r.d(t,{M:()=>a});var n=r(4922),i=r(7672),s=r(1456);function a(e){return{address:(0,n.b)(e.address),nonce:(0,s.Ab)(null!=e.nonce?e.nonce:0),chainId:(0,s.Ab)(null!=e.chainId?e.chainId:0),signature:i.t.from(e.signature)}}},7952:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(603);class i extends n.j{metric;constructor(e){super();let{name:t,metrics:r}=e;this.metric=r.registerMetric(t),this.updateComponentMetric()}set(e,t){return super.set(e,t),this.updateComponentMetric(),this}delete(e){let t=super.delete(e);return this.updateComponentMetric(),t}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function s(e){let t;let{name:r,metrics:s}=e;return null!=s?new i({name:r,metrics:s}):new n.j}},8007:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NumberCoder=void 0;let n=r(8662),i=r(4037),s=r(2884),a=BigInt(0),o=BigInt(1),l=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class c extends s.Coder{size;signed;constructor(e,t,r){let i=(t?"int":"uint")+8*e;super(i,i,r,!1),(0,n.defineProperties)(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=(0,n.getBigInt)(i.Typed.dereference(t,this.type)),c=(0,n.mask)(l,8*s.WordSize);if(this.signed){let e=(0,n.mask)(c,8*this.size-1);(r>e||r<-(e+o))&&this._throwError("value out-of-bounds",t),r=(0,n.toTwos)(r,8*s.WordSize)}else(r<a||r>(0,n.mask)(c,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(r)}decode(e){let t=(0,n.mask)(e.readValue(),8*this.size);return this.signed&&(t=(0,n.fromTwos)(t,8*this.size)),t}}t.NumberCoder=c},8121:(e,t,r)=>{"use strict";r.d(t,{Lm:()=>a,Lo:()=>o,X_:()=>m,ZG:()=>f,c$:()=>u,f:()=>l,nx:()=>g,pO:()=>h,q5:()=>s,xW:()=>d});var n=r(9982);function i(e,t,r){if(e instanceof Uint8Array)return r?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let t=new Uint8Array((e.length-2)/2),r=2;for(let n=0;n<t.length;n++)t[n]=parseInt(e.substring(r,r+2),16),r+=2;return t}(0,n.MR)(!1,"invalid BytesLike value",t||"value",e)}function s(e,t){return i(e,t,!1)}function a(e,t){return i(e,t,!0)}function o(e,t){return!!("string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/))&&("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0)}function l(e){return o(e,!0)||e instanceof Uint8Array}let c="0123456789abcdef";function u(e){let t=s(e),r="0x";for(let e=0;e<t.length;e++){let n=t[e];r+=c[(240&n)>>4]+c[15&n]}return r}function d(e){return"0x"+e.map(e=>u(e).substring(2)).join("")}function h(e){return o(e,!0)?(e.length-2)/2:s(e).length}function f(e,t,r){let i=s(e);return null!=r&&r>i.length&&(0,n.vA)(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:i,length:i.length,offset:r}),u(i.slice(null==t?0:t,null==r?i.length:r))}function p(e,t,r){let i=s(e);(0,n.vA)(t>=i.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(i),length:t,offset:t+1});let a=new Uint8Array(t);return a.fill(0),r?a.set(i,t-i.length):a.set(i,0),u(a)}function g(e,t){return p(e,t,!0)}function m(e,t){return p(e,t,!1)}},8122:(e,t,r)=>{"use strict";r.d(t,{_Q:()=>d,HT:()=>u,yE:()=>h});var n=r(3751);let i=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,h=s-1;(0!==u||d<i)&&-1!==h;h--,d++)u+=o*a[h]>>>0,a[h]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var f=s-i;f!==s&&0===a[f];)f++;for(var p=new Uint8Array(n+(s-f)),g=n;f!==s;)p[g++]=a[f++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],h=0,f=a-1;(0!==d||h<n)&&-1!==f;f--,h++)d+=256*c[f]>>>0,c[f]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=h,i++}for(var p=a-n;p!==a&&0===c[p];)p++;for(var g=l.repeat(r);p<a;++p)g+=e.charAt(c[p]);return g},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};class s{name;prefix;baseEncode;constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class a{name;prefix;baseDecode;prefixCodePoint;constructor(e,t,r){this.name=e,this.prefix=t;let n=t.codePointAt(0);if(void 0===n)throw Error("Invalid prefix character");this.prefixCodePoint=n,this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return l(this,e)}}class o{decoders;constructor(e){this.decoders=e}or(e){return l(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(null!=r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function l(e,t){return new o({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class c{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new s(e,t,r),this.decoder=new a(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function u({name:e,prefix:t,encode:r,decode:n}){return new c(e,t,r,n)}function d({name:e,prefix:t,alphabet:r}){let{encode:s,decode:a}=i(r,e);return u({prefix:t,name:e,encode:s,decode:e=>(0,n.au)(a(e))})}function h({name:e,prefix:t,bitsPerChar:r,alphabet:n}){let i=function(e){let t={};for(let r=0;r<e.length;++r)t[e[r]]=r;return t}(n);return u({prefix:t,name:e,encode:e=>(function(e,t,r){let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let n=0;n<e.length;++n)for(o=o<<8|e[n],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(0!==a&&(s+=t[i&o<<r-a]),n)for(;(s.length*r&7)!=0;)s+="=";return s})(e,n,r),decode:t=>(function(e,t,r,n){let i=e.length;for(;"="===e[i-1];)--i;let s=new Uint8Array(i*r/8|0),a=0,o=0,l=0;for(let c=0;c<i;++c){let i=t[e[c]];if(void 0===i)throw SyntaxError(`Non-${n} character`);o=o<<r|i,(a+=r)>=8&&(a-=8,s[l++]=255&o>>a)}if(a>=r||(255&o<<8-a)!=0)throw SyntaxError("Unexpected end of data");return s})(t,i,r,e)})}},8138:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionResponse=t.TransactionReceipt=t.Log=t.Block=t.copyRequest=t.FeeData=void 0;let n=r(8662),i=r(2984),s=BigInt(0);function a(e){return null==e?null:e}function o(e){return null==e?null:e.toString()}class l{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,r){(0,n.defineProperties)(this,{gasPrice:a(e),maxFeePerGas:a(t),maxPriorityFeePerGas:a(r)})}toJSON(){let{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:o(e),maxFeePerGas:o(t),maxPriorityFeePerGas:o(r)}}}t.FeeData=l,t.copyRequest=function(e){let t={};for(let r of(e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=(0,n.hexlify)(e.data)),"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/)))r in e&&null!=e[r]&&(t[r]=(0,n.getBigInt)(e[r],`request.${r}`));for(let r of"type,nonce".split(/,/))r in e&&null!=e[r]&&(t[r]=(0,n.getNumber)(e[r],`request.${r}`));return e.accessList&&(t.accessList=(0,i.accessListify)(e.accessList)),e.authorizationList&&(t.authorizationList=e.authorizationList.slice()),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(e=>(0,n.isBytesLike)(e)?(0,n.hexlify)(e):Object.assign({},e))),t};class c{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#O;constructor(e,t){this.#O=e.transactions.map(e=>"string"!=typeof e?new h(e,t):e),(0,n.defineProperties)(this,{provider:t,hash:a(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:a(e.prevRandao),extraData:e.extraData,baseFeePerGas:a(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#O.map(e=>"string"==typeof e?e:e.hash)}get prefetchedTransactions(){let e=this.#O.slice();return 0===e.length?[]:((0,n.assert)("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){let{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:n,gasUsed:i,hash:s,miner:a,prevRandao:l,nonce:c,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:m}=this;return{_type:"Block",baseFeePerGas:o(e),difficulty:o(t),extraData:r,gasLimit:o(n),gasUsed:o(i),blobGasUsed:o(this.blobGasUsed),excessBlobGas:o(this.excessBlobGas),hash:s,miner:a,prevRandao:l,nonce:c,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:m}}[Symbol.iterator](){let e=0,t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#O.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#O[e];else{let r=e.toLowerCase();for(let e of this.#O){if("string"==typeof e){if(e!==r)continue;t=e;break}if(e.hash===r){t=e;break}}}if(null==t)throw Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){let t=this.prefetchedTransactions;if("number"==typeof e)return t[e];for(let r of(e=e.toLowerCase(),t))if(r.hash===e)return r;(0,n.assertArgument)(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){var e;if(!this.isMined())throw Error("");return e=this,{orphan:"drop-block",hash:e.hash,number:e.number}}}t.Block=c;class u{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;let r=Object.freeze(e.topics.slice());(0,n.defineProperties)(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){let{address:e,blockHash:t,blockNumber:r,data:n,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:n,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:l}}async getBlock(){let e=await this.provider.getBlock(this.blockHash);return(0,n.assert)(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){let e=await this.provider.getTransaction(this.transactionHash);return(0,n.assert)(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){let e=await this.provider.getTransactionReceipt(this.transactionHash);return(0,n.assert)(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){var e;return e=this,{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}}t.Log=u;class d{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#S;constructor(e,t){this.#S=Object.freeze(e.logs.map(e=>new u(e,t)));let r=s;null!=e.effectiveGasPrice?r=e.effectiveGasPrice:null!=e.gasPrice&&(r=e.gasPrice),(0,n.defineProperties)(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#S}toJSON(){let{to:e,from:t,contractAddress:r,hash:n,index:i,blockHash:s,blockNumber:a,logsBloom:l,logs:c,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:a,contractAddress:r,cumulativeGasUsed:o(this.cumulativeGasUsed),from:t,gasPrice:o(this.gasPrice),blobGasUsed:o(this.blobGasUsed),blobGasPrice:o(this.blobGasPrice),gasUsed:o(this.gasUsed),hash:n,index:i,logs:c,logsBloom:l,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let e=await this.provider.getBlock(this.blockHash);if(null==e)throw Error("TODO");return e}async getTransaction(){let e=await this.provider.getTransaction(this.hash);if(null==e)throw Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return p(this)}reorderedEvent(e){return(0,n.assert)(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),f(this,e)}}t.TransactionReceipt=d;class h{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#I;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.authorizationList=null!=e.authorizationList?e.authorizationList:null,this.#I=-1}toJSON(){let{blockNumber:e,blockHash:t,index:r,hash:n,type:i,to:s,from:a,nonce:l,data:c,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:t,blobVersionedHashes:h,chainId:o(this.chainId),data:c,from:a,gasLimit:o(this.gasLimit),gasPrice:o(this.gasPrice),hash:n,maxFeePerGas:o(this.maxFeePerGas),maxPriorityFeePerGas:o(this.maxPriorityFeePerGas),maxFeePerBlobGas:o(this.maxFeePerBlobGas),nonce:l,signature:u,to:s,index:r,type:i,value:o(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){let t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;let t=this.provider.getBlock(e);if(null==t)throw Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){let{tx:e,blockNumber:t}=await (0,n.resolveProperties)({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){let r=null==e?1:e,i=null==t?0:t,a=this.#I,o=-1,l=-1===a,c=async()=>{if(l)return null;let{blockNumber:e,nonce:t}=await (0,n.resolveProperties)({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce){a=e;return}if(l)return null;let i=await this.getTransaction();if(!i||null==i.blockNumber)for(-1===o&&(o=a-3)<this.#I&&(o=this.#I);o<=e;){if(l)return null;let t=await this.provider.getBlock(o,!0);if(null==t)break;for(let e of t)if(e===this.hash)return;for(let i=0;i<t.length;i++){let o=await t.getTransaction(i);if(o.from===this.from&&o.nonce===this.nonce){if(l)return null;let t=await this.provider.getTransactionReceipt(o.hash);if(null==t||e-t.blockNumber+1<r)return;let i="replaced";o.data===this.data&&o.to===this.to&&o.value===this.value?i="repriced":"0x"===o.data&&o.from===o.to&&o.value===s&&(i="cancelled"),(0,n.assert)(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:o.replaceableTransaction(a),hash:o.hash,receipt:t})}}o++}},u=e=>{if(null==e||0!==e.status)return e;(0,n.assert)(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},d=await this.provider.getTransactionReceipt(this.hash);if(0===r)return u(d);if(d){if(1===r||await d.confirmations()>=r)return u(d)}else if(await c(),0===r)return null;let h=new Promise((e,t)=>{let s=[],o=()=>{s.forEach(e=>e())};if(s.push(()=>{l=!0}),i>0){let e=setTimeout(()=>{o(),t((0,n.makeError)("wait for transaction timeout","TIMEOUT"))},i);s.push(()=>{clearTimeout(e)})}let d=async n=>{if(await n.confirmations()>=r){o();try{e(u(n))}catch(e){t(e)}}};if(s.push(()=>{this.provider.off(this.hash,d)}),this.provider.on(this.hash,d),a>=0){let e=async()=>{try{await c()}catch(e){if((0,n.isError)(e,"TRANSACTION_REPLACED")){o(),t(e);return}}l||this.provider.once("block",e)};s.push(()=>{this.provider.off("block",e)}),this.provider.once("block",e)}});return await h}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return(0,n.assert)(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),p(this)}reorderedEvent(e){return(0,n.assert)(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),(0,n.assert)(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),f(this,e)}replaceableTransaction(e){(0,n.assertArgument)(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);let t=new h(this,this.provider);return t.#I=e,t}}function f(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function p(e){return{orphan:"drop-transaction",tx:e}}t.TransactionResponse=h},8195:(e,t,r)=>{"use strict";r.d(t,{N:()=>z});var n=r(2923),i=r(3204),s=r(1680),a=r(3809);let o=U("dns4"),l=U("dns6"),c=U("dnsaddr"),u=L(U("dns"),c,o,l),d=L(U("ip4"),U("ip6")),h=L(D(d,U("tcp")),D(u,U("tcp"))),f=D(d,U("udp")),p=D(f,U("utp")),g=D(f,U("quic")),m=D(f,U("quic-v1")),b=L(D(h,U("ws")),D(u,U("ws"))),y=L(D(b,U("p2p")),b),x=L(D(h,U("wss")),D(u,U("wss")),D(h,U("tls"),U("ws")),D(u,U("tls"),U("ws"))),w=L(D(x,U("p2p")),x),v=L(D(h,U("http")),D(d,U("http")),D(u,U("http"))),A=L(D(h,U("https")),D(d,U("https")),D(u,U("https"))),E=D(f,U("webrtc-direct"),U("certhash")),k=L(D(E,U("p2p")),E),P=D(m,U("webtransport"),U("certhash"),U("certhash")),S=L(D(P,U("p2p")),P),I=L(D(y,U("p2p-webrtc-star"),U("p2p")),D(w,U("p2p-webrtc-star"),U("p2p")),D(y,U("p2p-webrtc-star")),D(w,U("p2p-webrtc-star")));L(D(y,U("p2p-websocket-star"),U("p2p")),D(w,U("p2p-websocket-star"),U("p2p")),D(y,U("p2p-websocket-star")),D(w,U("p2p-websocket-star")));let T=L(D(v,U("p2p-webrtc-direct"),U("p2p")),D(A,U("p2p-webrtc-direct"),U("p2p")),D(v,U("p2p-webrtc-direct")),D(A,U("p2p-webrtc-direct"))),_=L(b,x,v,A,I,T,h,p,g,u,k,S);L(D(_,U("p2p-stardust"),U("p2p")),D(_,U("p2p-stardust")));let C=L(D(_,U("p2p")),I,T,k,S,U("p2p")),O=L(D(C,U("p2p-circuit"),C),D(C,U("p2p-circuit")),D(U("p2p-circuit"),C),D(_,U("p2p-circuit")),D(U("p2p-circuit"),_),U("p2p-circuit")),R=()=>L(D(O,R),O),N=R(),M=L(D(N,C,N),D(C,N),D(N,C),N,C);function B(e){return function(t){let r;try{r=(0,a.HZ)(t)}catch(e){return!1}let n=e(r.protoNames());return null!==n&&(!0===n||!1===n?n:0===n.length)}}function D(...e){function t(t){if(t.length<e.length)return null;let r=t;return e.some(e=>(Array.isArray(r="function"==typeof e?e().partialMatch(t):e.partialMatch(t))&&(t=r),null===r)),r}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:B(t),partialMatch:t}}function L(...e){function t(t){let r=null;return e.some(e=>{let n="function"==typeof e?e().partialMatch(t):e.partialMatch(t);return null!=n&&(r=n,!0)}),r}return{toString:function(){return"{ "+e.join(" ")+" }"},input:e,matches:B(t),partialMatch:t}}function U(e){return{toString:function(){return e},matches:function(t){let r;try{r=(0,a.HZ)(t)}catch(e){return!1}let n=r.protoNames();return 1===n.length&&n[0]===e},partialMatch:function(t){return 0===t.length?null:t[0]===e?t.slice(1):null}}}L(D(N,U("webrtc"),U("p2p")),D(N,U("webrtc")),D(_,U("webrtc"),U("p2p")),D(_,U("webrtc")),U("webrtc"));var F=r(9141);class j extends F.X{static tag="bootstrap";log;timer;list;timeout;components;_init;constructor(e,t={list:[]}){if(null==t.list||0===t.list.length)throw Error("Bootstrap requires a list of peer addresses");for(let r of(super(),this.components=e,this.log=e.logger.forComponent("libp2p:bootstrap"),this.timeout=t.timeout??1e3,this.list=[],t.list)){if(!M.matches(r)){this.log.error("Invalid multiaddr");continue}let e=(0,a.HZ)(r),t=e.getPeerId();if(null==t){this.log.error("Invalid bootstrap multiaddr without peer id");continue}let n={id:(0,s.XL)(t),multiaddrs:[e]};this.list.push(n)}this._init=t}[n.P]=this;[Symbol.toStringTag]="@libp2p/bootstrap";[i.Ch]=["@libp2p/peer-discovery"];isStarted(){return!!this.timer}start(){!this.isStarted()&&(this.log("Starting bootstrap node discovery, discovering peers after %s ms",this.timeout),this.timer=setTimeout(()=>{this._discoverBootstrapPeers().catch(e=>{this.log.error(e)})},this.timeout))}async _discoverBootstrapPeers(){if(null!=this.timer)for(let e of this.list){if(await this.components.peerStore.merge(e.id,{tags:{[this._init.tagName??"bootstrap"]:{value:this._init.tagValue??50,ttl:this._init.tagTTL}},multiaddrs:e.multiaddrs}),null==this.timer)return;this.safeDispatchEvent("peer",{detail:e}),this.components.connectionManager.openConnection(e.id).catch(t=>{this.log.error("could not dial bootstrap peer %p",e.id,t)})}}stop(){null!=this.timer&&clearTimeout(this.timer),this.timer=void 0}}function z(e){return t=>new j(t,e)}},8199:(e,t,r)=>{"use strict";r.d(t,{J:()=>h,Z:()=>d});var n=r(1819),i=r(4096),s=r(9982),a=r(8616),o=r(1456),l=r(1857);function c(e,t){if(e.provider)return e.provider;(0,s.vA)(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function u(e,t){let r=(0,l.VS)(t);if(null!=r.to&&(r.to=(0,n.tG)(r.to,e)),null!=r.from){let t=r.from;r.from=Promise.all([e.getAddress(),(0,n.tG)(t,e)]).then(([e,t])=>((0,s.MR)(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e))}else r.from=e.getAddress();return await (0,a.k)(r)}class d{provider;constructor(e){(0,a.n)(this,{provider:e||null})}async getNonce(e){return c(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await u(this,e)}async populateTransaction(e){let t=c(this,"populateTransaction"),r=await u(this,e);null==r.nonce&&(r.nonce=await this.getNonce("pending")),null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));let n=await this.provider.getNetwork();if(null!=r.chainId){let t=(0,o.Ab)(r.chainId);(0,s.MR)(t===n.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=n.chainId;let i=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null!=r.gasPrice&&(2===r.type||i)?(0,s.MR)(!1,"eip-1559 transaction do not support gasPrice","tx",e):(0===r.type||1===r.type)&&i&&(0,s.MR)(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(2===r.type||null==r.type)&&null!=r.maxFeePerGas&&null!=r.maxPriorityFeePerGas)r.type=2;else if(0===r.type||1===r.type){let e=await t.getFeeData();(0,s.vA)(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice)}else{let e=await t.getFeeData();if(null==r.type){if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas){if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,null!=r.gasPrice){let e=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=e,r.maxPriorityFeePerGas=e}else null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas)}else null!=e.gasPrice?((0,s.vA)(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice),r.type=0):(0,s.vA)(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"})}else(2===r.type||3===r.type||4===r.type)&&(null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}return await (0,a.k)(r)}async populateAuthorization(e){let t=Object.assign({},e);return null==t.chainId&&(t.chainId=(await c(this,"getNetwork").getNetwork()).chainId),null==t.nonce&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return c(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return c(this,"call").call(await this.populateCall(e))}async resolveName(e){let t=c(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){let t=c(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;let n=i.Z.from(r);return await t.broadcastTransaction(await this.signTransaction(n))}authorize(e){(0,s.vA)(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}class h extends d{address;constructor(e,t){super(t),(0,a.n)(this,{address:e})}async getAddress(){return this.address}connect(e){return new h(this.address,e)}#ru(e,t){(0,s.vA)(!1,`VoidSigner cannot sign ${e}`,"UNSUPPORTED_OPERATION",{operation:t})}async signTransaction(e){this.#ru("transactions","signTransaction")}async signMessage(e){this.#ru("messages","signMessage")}async signTypedData(e,t,r){this.#ru("typed-data","signTypedData")}}},8249:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pkcs7Strip=t.pkcs7Pad=void 0,t.pkcs7Pad=function(e){let t=16-e.length%16,r=new Uint8Array(e.length+t);r.set(e);for(let n=e.length;n<r.length;n++)r[n]=t;return r},t.pkcs7Strip=function(e){if(e.length<16)throw TypeError("PKCS#7 invalid length");let t=e[e.length-1];if(t>16)throw TypeError("PKCS#7 padding byte out of range");let r=e.length-t;for(let n=0;n<t;n++)if(e[r+n]!==t)throw TypeError("PKCS#7 invalid padding byte");return new Uint8Array(e.subarray(0,r))}},8259:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBits=void 0,t.decodeBits=function(e,t){let r=(1<<e)-1,n=[],i=0,s=0,a=0;for(let o=0;o<t.length;o++)for(i=i<<6|")!@#$%^&*(ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".indexOf(t[o]),s+=6;s>=e;){let t=i>>s-e;i&=(1<<s-e)-1,s-=e,0===t?a+=r:(n.push(t+a),a=0)}return n}},8314:(e,t,r)=>{"use strict";r.d(t,{K:()=>a,x:()=>o});var n=r(4922),i=r(6803),s=r(3683);function a(e){let t;return t="string"==typeof e?i.h.computePublicKey(e,!1):e.publicKey,(0,n.b)((0,s.S)("0x"+t.substring(4)).substring(26))}function o(e,t){return a(i.h.recoverPublicKey(e,t))}},8319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContractEventPayload=t.ContractUnknownEventPayload=t.ContractTransactionResponse=t.ContractTransactionReceipt=t.UndecodedEventLog=t.EventLog=void 0;let n=r(8138),i=r(8662);class s extends n.Log{interface;fragment;args;constructor(e,t,r){super(e,e.provider);let n=t.decodeEventLog(r,e.data,e.topics);(0,i.defineProperties)(this,{args:n,fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}t.EventLog=s;class a extends n.Log{error;constructor(e,t){super(e,e.provider),(0,i.defineProperties)(this,{error:t})}}t.UndecodedEventLog=a;class o extends n.TransactionReceipt{#_;constructor(e,t,r){super(r,t),this.#_=e}get logs(){return super.logs.map(e=>{let t=e.topics.length?this.#_.getEvent(e.topics[0]):null;if(t)try{return new s(e,this.#_,t)}catch(t){return new a(e,t)}return e})}}t.ContractTransactionReceipt=o;class l extends n.TransactionResponse{#_;constructor(e,t,r){super(r,t),this.#_=e}async wait(e,t){let r=await super.wait(e,t);return null==r?null:new o(this.#_,this.provider,r)}}t.ContractTransactionResponse=l;class c extends i.EventPayload{log;constructor(e,t,r,n){super(e,t,r),(0,i.defineProperties)(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}t.ContractUnknownEventPayload=c;class u extends c{constructor(e,t,r,n,a){super(e,t,r,new s(a,e.interface,n));let o=e.interface.decodeEventLog(n,this.log.data,this.log.topics);(0,i.defineProperties)(this,{args:o,fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}t.ContractEventPayload=u},8321:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SocketEventSubscriber=t.SocketPendingSubscriber=t.SocketBlockSubscriber=t.SocketSubscriber=t.WebSocketProvider=t.SocketProvider=t.IpcSocketProvider=t.QuickNodeProvider=t.PocketProvider=t.InfuraWebSocketProvider=t.InfuraProvider=t.EtherscanPlugin=t.EtherscanProvider=t.ChainstackProvider=t.CloudflareProvider=t.AnkrProvider=t.BlockscoutProvider=t.AlchemyProvider=t.BrowserProvider=t.JsonRpcSigner=t.JsonRpcProvider=t.JsonRpcApiProvider=t.FallbackProvider=t.copyRequest=t.TransactionResponse=t.TransactionReceipt=t.Log=t.FeeData=t.Block=t.FetchUrlFeeDataNetworkPlugin=t.FeeDataNetworkPlugin=t.EnsPlugin=t.GasCostPlugin=t.NetworkPlugin=t.NonceManager=t.Network=t.MulticoinProviderPlugin=t.EnsResolver=t.getDefaultProvider=t.showThrottleMessage=t.VoidSigner=t.AbstractSigner=t.UnmanagedSubscriber=t.AbstractProvider=void 0;var n=r(4861);Object.defineProperty(t,"AbstractProvider",{enumerable:!0,get:function(){return n.AbstractProvider}}),Object.defineProperty(t,"UnmanagedSubscriber",{enumerable:!0,get:function(){return n.UnmanagedSubscriber}});var i=r(9578);Object.defineProperty(t,"AbstractSigner",{enumerable:!0,get:function(){return i.AbstractSigner}}),Object.defineProperty(t,"VoidSigner",{enumerable:!0,get:function(){return i.VoidSigner}});var s=r(5188);Object.defineProperty(t,"showThrottleMessage",{enumerable:!0,get:function(){return s.showThrottleMessage}});var a=r(622);Object.defineProperty(t,"getDefaultProvider",{enumerable:!0,get:function(){return a.getDefaultProvider}});var o=r(8718);Object.defineProperty(t,"EnsResolver",{enumerable:!0,get:function(){return o.EnsResolver}}),Object.defineProperty(t,"MulticoinProviderPlugin",{enumerable:!0,get:function(){return o.MulticoinProviderPlugin}});var l=r(9307);Object.defineProperty(t,"Network",{enumerable:!0,get:function(){return l.Network}});var c=r(8330);Object.defineProperty(t,"NonceManager",{enumerable:!0,get:function(){return c.NonceManager}});var u=r(3118);Object.defineProperty(t,"NetworkPlugin",{enumerable:!0,get:function(){return u.NetworkPlugin}}),Object.defineProperty(t,"GasCostPlugin",{enumerable:!0,get:function(){return u.GasCostPlugin}}),Object.defineProperty(t,"EnsPlugin",{enumerable:!0,get:function(){return u.EnsPlugin}}),Object.defineProperty(t,"FeeDataNetworkPlugin",{enumerable:!0,get:function(){return u.FeeDataNetworkPlugin}}),Object.defineProperty(t,"FetchUrlFeeDataNetworkPlugin",{enumerable:!0,get:function(){return u.FetchUrlFeeDataNetworkPlugin}});var d=r(8138);Object.defineProperty(t,"Block",{enumerable:!0,get:function(){return d.Block}}),Object.defineProperty(t,"FeeData",{enumerable:!0,get:function(){return d.FeeData}}),Object.defineProperty(t,"Log",{enumerable:!0,get:function(){return d.Log}}),Object.defineProperty(t,"TransactionReceipt",{enumerable:!0,get:function(){return d.TransactionReceipt}}),Object.defineProperty(t,"TransactionResponse",{enumerable:!0,get:function(){return d.TransactionResponse}}),Object.defineProperty(t,"copyRequest",{enumerable:!0,get:function(){return d.copyRequest}});var h=r(3599);Object.defineProperty(t,"FallbackProvider",{enumerable:!0,get:function(){return h.FallbackProvider}});var f=r(4822);Object.defineProperty(t,"JsonRpcApiProvider",{enumerable:!0,get:function(){return f.JsonRpcApiProvider}}),Object.defineProperty(t,"JsonRpcProvider",{enumerable:!0,get:function(){return f.JsonRpcProvider}}),Object.defineProperty(t,"JsonRpcSigner",{enumerable:!0,get:function(){return f.JsonRpcSigner}});var p=r(6623);Object.defineProperty(t,"BrowserProvider",{enumerable:!0,get:function(){return p.BrowserProvider}});var g=r(9064);Object.defineProperty(t,"AlchemyProvider",{enumerable:!0,get:function(){return g.AlchemyProvider}});var m=r(7700);Object.defineProperty(t,"BlockscoutProvider",{enumerable:!0,get:function(){return m.BlockscoutProvider}});var b=r(3300);Object.defineProperty(t,"AnkrProvider",{enumerable:!0,get:function(){return b.AnkrProvider}});var y=r(7690);Object.defineProperty(t,"CloudflareProvider",{enumerable:!0,get:function(){return y.CloudflareProvider}});var x=r(8926);Object.defineProperty(t,"ChainstackProvider",{enumerable:!0,get:function(){return x.ChainstackProvider}});var w=r(2802);Object.defineProperty(t,"EtherscanProvider",{enumerable:!0,get:function(){return w.EtherscanProvider}}),Object.defineProperty(t,"EtherscanPlugin",{enumerable:!0,get:function(){return w.EtherscanPlugin}});var v=r(5226);Object.defineProperty(t,"InfuraProvider",{enumerable:!0,get:function(){return v.InfuraProvider}}),Object.defineProperty(t,"InfuraWebSocketProvider",{enumerable:!0,get:function(){return v.InfuraWebSocketProvider}});var A=r(9599);Object.defineProperty(t,"PocketProvider",{enumerable:!0,get:function(){return A.PocketProvider}});var E=r(7912);Object.defineProperty(t,"QuickNodeProvider",{enumerable:!0,get:function(){return E.QuickNodeProvider}});let k=r(5541);Object.defineProperty(t,"IpcSocketProvider",{enumerable:!0,get:function(){return k.IpcSocketProvider}});var P=r(7848);Object.defineProperty(t,"SocketProvider",{enumerable:!0,get:function(){return P.SocketProvider}});var S=r(3248);Object.defineProperty(t,"WebSocketProvider",{enumerable:!0,get:function(){return S.WebSocketProvider}});var I=r(7848);Object.defineProperty(t,"SocketSubscriber",{enumerable:!0,get:function(){return I.SocketSubscriber}}),Object.defineProperty(t,"SocketBlockSubscriber",{enumerable:!0,get:function(){return I.SocketBlockSubscriber}}),Object.defineProperty(t,"SocketPendingSubscriber",{enumerable:!0,get:function(){return I.SocketPendingSubscriber}}),Object.defineProperty(t,"SocketEventSubscriber",{enumerable:!0,get:function(){return I.SocketEventSubscriber}})},8330:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NonceManager=void 0;let n=r(8662),i=r(9578);class s extends i.AbstractSigner{signer;#rd;#rh;constructor(e){super(e.provider),(0,n.defineProperties)(this,{signer:e}),this.#rd=null,this.#rh=0}async getAddress(){return this.signer.getAddress()}connect(e){return new s(this.signer.connect(e))}async getNonce(e){if("pending"===e){null==this.#rd&&(this.#rd=super.getNonce("pending"));let e=this.#rh;return await this.#rd+e}return super.getNonce(e)}increment(){this.#rh++}reset(){this.#rh=0,this.#rd=null}async sendTransaction(e){let t=this.getNonce("pending");return this.increment(),(e=await this.signer.populateTransaction(e)).nonce=await t,await this.signer.sendTransaction(e)}signTransaction(e){return this.signer.signTransaction(e)}signMessage(e){return this.signer.signMessage(e)}signTypedData(e,t,r){return this.signer.signTypedData(e,t,r)}}t.NonceManager=s},8336:(e,t,r)=>{"use strict";r.d(t,{r:()=>n});let n="6.14.4"},8360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keccak256=void 0;let n=r(3264),i=r(8662),s=!1,a=function(e){return(0,n.keccak_256)(e)},o=a;function l(e){let t=(0,i.getBytes)(e,"data");return(0,i.hexlify)(o(t))}t.keccak256=l,l._=a,l.lock=function(){s=!0},l.register=function(e){if(s)throw TypeError("keccak256 is locked");o=e},Object.freeze(l)},8402:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchResponse=t.FetchRequest=t.FetchCancelSignal=void 0;let n=r(3308),i=r(4306),s=r(7073),a=r(9959),o=r(2097),l=r(7730),c=(0,l.createGetUrl)(),u=RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),d=RegExp("^ipfs://(ipfs/)?(.*)$","i"),h=!1;async function f(e,t){try{var r;let t=e.match(u);if(!t)throw Error("invalid data");return new w(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?(0,n.decodeBase64)(t[3]):(r=t[3],(0,o.toUtf8Bytes)(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))))}catch(t){return new w(599,"BAD REQUEST (invalid data: URI)",{},null,new x(e))}}function p(e){return async function(t,r){try{let r=t.match(d);if(!r)throw Error("invalid link");return new x(`${e}${r[2]}`)}catch(e){return new w(599,"BAD REQUEST (invalid IPFS URI)",{},null,new x(t))}}}let g={data:f,ipfs:p("https://gateway.ipfs.io/ipfs/")},m=new WeakMap;class b{#ee;#et;constructor(e){this.#ee=[],this.#et=!1,m.set(e,()=>{if(!this.#et){for(let e of(this.#et=!0,this.#ee))setTimeout(()=>{e()},0);this.#ee=[]}})}addListener(e){(0,s.assert)(!this.#et,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#ee.push(e)}get cancelled(){return this.#et}checkSignal(){(0,s.assert)(!this.cancelled,"cancelled","CANCELLED",{})}}function y(e){if(null==e)throw Error("missing signal; should not happen");return e.checkSignal(),e}t.FetchCancelSignal=b;class x{#er;#en;#ei;#es;#ea;#z;#eo;#el;#ec;#eu;#ed;#eh;#ef;#ep;#eg;get url(){return this.#z}set url(e){this.#z=String(e)}get body(){return null==this.#eo?null:new Uint8Array(this.#eo)}set body(e){if(null==e)this.#eo=void 0,this.#el=void 0;else if("string"==typeof e)this.#eo=(0,o.toUtf8Bytes)(e),this.#el="text/plain";else if(e instanceof Uint8Array)this.#eo=e,this.#el="application/octet-stream";else if("object"==typeof e)this.#eo=(0,o.toUtf8Bytes)(JSON.stringify(e)),this.#el="application/json";else throw Error("invalid body")}hasBody(){return null!=this.#eo}get method(){return this.#es?this.#es:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#es=String(e).toUpperCase()}get headers(){let e=Object.assign({},this.#ei);return this.#ec&&(e.authorization=`Basic ${(0,n.encodeBase64)((0,o.toUtf8Bytes)(this.#ec))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#el&&(e["content-type"]=this.#el),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#ei[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#ei={}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let n=t[r++];return{value:[n,e[n]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#ec||null}setCredentials(e,t){(0,s.assertArgument)(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#ec=`${e}:${t}`}get allowGzip(){return this.#en}set allowGzip(e){this.#en=!!e}get allowInsecureAuthentication(){return!!this.#er}set allowInsecureAuthentication(e){this.#er=!!e}get timeout(){return this.#ea}set timeout(e){(0,s.assertArgument)(e>=0,"timeout must be non-zero","timeout",e),this.#ea=e}get preflightFunc(){return this.#eu||null}set preflightFunc(e){this.#eu=e}get processFunc(){return this.#ed||null}set processFunc(e){this.#ed=e}get retryFunc(){return this.#eh||null}set retryFunc(e){this.#eh=e}get getUrlFunc(){return this.#eg||c}set getUrlFunc(e){this.#eg=e}constructor(e){this.#z=String(e),this.#er=!1,this.#en=!0,this.#ei={},this.#es="",this.#ea=3e5,this.#ep={slotInterval:250,maxAttempts:12},this.#eg=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#eo?(0,i.hexlify)(this.#eo):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#ep.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#ep.maxAttempts=e.maxAttempts)}async #em(e,t,r,n,i){var a;if(e>=this.#ep.maxAttempts)return i.makeServerError("exceeded maximum retry limit");(0,s.assert)(v()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n}),r>0&&await (a=r,new Promise(e=>setTimeout(e,a)));let o=this.clone(),l=(o.url.split(":")[0]||"").toLowerCase();if(l in g){let e=await g[l](o.url,y(n.#ef));if(e instanceof w){let t=e;if(this.processFunc){y(n.#ef);try{t=await this.processFunc(o,t)}catch(e){(null==e.throttle||"number"!=typeof e.stall)&&t.makeServerError("error in post-processing function",e).assertOk()}}return t}o=e}this.preflightFunc&&(o=await this.preflightFunc(o));let c=await this.getUrlFunc(o,y(n.#ef)),u=new w(c.statusCode,c.statusMessage,c.headers,c.body,n);if(301===u.statusCode||302===u.statusCode){try{let r=u.headers.location||"";return o.redirect(r).#em(e+1,t,0,n,u)}catch(e){}return u}if(429===u.statusCode&&(null==this.retryFunc||await this.retryFunc(o,u,e))){let r=u.headers["retry-after"],i=this.#ep.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(i=parseInt(r)),o.clone().#em(e+1,t,i,n,u)}if(this.processFunc){y(n.#ef);try{u=await this.processFunc(o,u)}catch(i){(null==i.throttle||"number"!=typeof i.stall)&&u.makeServerError("error in post-processing function",i).assertOk();let r=this.#ep.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return i.stall>=0&&(r=i.stall),o.clone().#em(e+1,t,r,n,u)}}return u}send(){return(0,s.assert)(null==this.#ef,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#ef=new b(this),this.#em(0,v()+this.timeout,0,this,new w(0,"",{},null,this))}cancel(){(0,s.assert)(null!=this.#ef,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let e=m.get(this);if(!e)throw Error("missing signal; should not happen");e()}redirect(e){let t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();(0,s.assert)("GET"===this.method&&("https"!==t||"http"!==r)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});let n=new x(e);return n.method="GET",n.allowGzip=this.allowGzip,n.timeout=this.timeout,n.#ei=Object.assign({},this.#ei),this.#eo&&(n.#eo=new Uint8Array(this.#eo)),n.#el=this.#el,n}clone(){let e=new x(this.url);return e.#es=this.#es,this.#eo&&(e.#eo=this.#eo),e.#el=this.#el,e.#ei=Object.assign({},this.#ei),e.#ec=this.#ec,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#eu=this.#eu,e.#ed=this.#ed,e.#eh=this.#eh,e.#ep=Object.assign({},this.#ep),e.#eg=this.#eg,e}static lockConfig(){h=!0}static getGateway(e){return g[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw Error(`cannot intercept ${e}; use registerGetUrl`);if(h)throw Error("gateways locked");g[e]=t}static registerGetUrl(e){if(h)throw Error("gateways locked");c=e}static createGetUrlFunc(e){return(0,l.createGetUrl)(e)}static createDataGateway(){return f}static createIpfsGatewayFunc(e){return p(e)}}t.FetchRequest=x;class w{#eb;#ey;#ei;#eo;#ex;#ew;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#eo?(0,i.hexlify)(this.#eo):"null"}>`}get statusCode(){return this.#eb}get statusMessage(){return this.#ey}get headers(){return Object.assign({},this.#ei)}get body(){return null==this.#eo?null:new Uint8Array(this.#eo)}get bodyText(){try{return null==this.#eo?"":(0,o.toUtf8String)(this.#eo)}catch(e){(0,s.assert)(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){(0,s.assert)(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let n=t[r++];return{value:[n,e[n]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,r,n,i){this.#eb=e,this.#ey=t,this.#ei=Object.keys(r).reduce((e,t)=>(e[t.toLowerCase()]=String(r[t]),e),{}),this.#eo=null==n?null:new Uint8Array(n),this.#ex=i||null,this.#ew={message:""}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);let n=new w(599,r,this.headers,this.body,this.#ex||void 0);return n.#ew={message:e,error:t},n}throwThrottleError(e,t){null==t?t=-1:(0,s.assertArgument)(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);let r=Error(e||"throttling requests");throw(0,a.defineProperties)(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#eo}get request(){return this.#ex}ok(){return""===this.#ew.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#ew;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let n=null;try{this.#eo&&(n=(0,o.toUtf8String)(this.#eo))}catch(e){}(0,s.assert)(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:n,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function v(){return new Date().getTime()}t.FetchResponse=w},8410:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wordlists=void 0,t.wordlists={en:r(5250).LangEn.wordlist()}},8516:(e,t,r)=>{"use strict";r.d(t,{Q:()=>n});let n="keep-alive"},8519:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIndexedAccountPath=t.getAccountPath=t.HDNodeVoidWallet=t.HDNodeWallet=t.defaultPath=void 0;let n=r(6870),i=r(8321),s=r(2984),a=r(8662),o=r(5250),l=r(6640),c=r(3414),u=r(6571);t.defaultPath="m/44'/60'/0'/0/0";let d=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),h=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function f(e,t){let r="";for(;e;)r="0123456789abcdef"[e%16]+r,e=Math.trunc(e/16);for(;r.length<2*t;)r="0"+r;return"0x"+r}function p(e){let t=(0,a.getBytes)(e),r=(0,a.dataSlice)((0,n.sha256)((0,n.sha256)(t)),0,4),i=(0,a.concat)([t,r]);return(0,a.encodeBase58)(i)}let g={};function m(e,t,r,i){let s=new Uint8Array(37);0x80000000&e?((0,a.assert)(null!=i,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set((0,a.getBytes)(i),1)):s.set((0,a.getBytes)(r));for(let t=24;t>=0;t-=8)s[33+(t>>3)]=e>>24-t&255;let o=(0,a.getBytes)((0,n.computeHmac)("sha512",t,s));return{IL:o.slice(0,32),IR:o.slice(32)}}function b(e,t){let r=t.split("/");(0,a.assertArgument)(r.length>0,"invalid path","path",t),"m"===r[0]&&((0,a.assertArgument)(0===e.depth,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${e.depth}`,"path",t),r.shift());let n=e;for(let e=0;e<r.length;e++){let t=r[e];if(t.match(/^[0-9]+'$/)){let r=parseInt(t.substring(0,t.length-1));(0,a.assertArgument)(r<0x80000000,"invalid path index",`path[${e}]`,t),n=n.deriveChild(0x80000000+r)}else if(t.match(/^[0-9]+$/)){let r=parseInt(t);(0,a.assertArgument)(r<0x80000000,"invalid path index",`path[${e}]`,t),n=n.deriveChild(r)}else(0,a.assertArgument)(!1,"invalid path component",`path[${e}]`,t)}return n}class y extends l.BaseWallet{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(e,t,r,i,s,o,l,c,u){super(t,u),(0,a.assertPrivate)(e,g,"HDNodeWallet"),(0,a.defineProperties)(this,{publicKey:t.compressedPublicKey});let d=(0,a.dataSlice)((0,n.ripemd160)((0,n.sha256)(this.publicKey)),0,4);(0,a.defineProperties)(this,{parentFingerprint:r,fingerprint:d,chainCode:i,path:s,index:o,depth:l}),(0,a.defineProperties)(this,{mnemonic:c})}connect(e){return new y(g,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,e)}#tP(){let e={address:this.address,privateKey:this.privateKey},t=this.mnemonic;return this.path&&t&&"en"===t.wordlist.locale&&""===t.password&&(e.mnemonic={path:this.path,locale:"en",entropy:t.entropy}),e}async encrypt(e,t){return await (0,u.encryptKeystoreJson)(this.#tP(),e,{progressCallback:t})}encryptSync(e){return(0,u.encryptKeystoreJsonSync)(this.#tP(),e)}get extendedKey(){return(0,a.assert)(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),p((0,a.concat)(["0x0488ADE4",f(this.depth,1),this.parentFingerprint,f(this.index,4),this.chainCode,(0,a.concat)(["0x00",this.privateKey])]))}hasPath(){return null!=this.path}neuter(){return new x(g,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(e){let t=(0,a.getNumber)(e,"index");(0,a.assertArgument)(t<=0xffffffff,"invalid index","index",t);let r=this.path;r&&(r+="/"+(0x7fffffff&t),0x80000000&t&&(r+="'"));let{IR:i,IL:s}=m(t,this.chainCode,this.publicKey,this.privateKey);return new y(g,new n.SigningKey((0,a.toBeHex)(((0,a.toBigInt)(s)+BigInt(this.privateKey))%h,32)),this.fingerprint,(0,a.hexlify)(i),r,t,this.depth+1,this.mnemonic,this.provider)}derivePath(e){return b(this,e)}static #tS(e,t){(0,a.assertArgument)((0,a.isBytesLike)(e),"invalid seed","seed","[REDACTED]");let r=(0,a.getBytes)(e,"seed");(0,a.assertArgument)(r.length>=16&&r.length<=64,"invalid seed","seed","[REDACTED]");let i=(0,a.getBytes)((0,n.computeHmac)("sha512",d,r));return new y(g,new n.SigningKey((0,a.hexlify)(i.slice(0,32))),"0x00000000",(0,a.hexlify)(i.slice(32)),"m",0,0,t,null)}static fromExtendedKey(e){let t=(0,a.toBeArray)((0,a.decodeBase58)(e));(0,a.assertArgument)(82===t.length||p(t.slice(0,78))===e,"invalid extended key","extendedKey","[ REDACTED ]");let r=t[4],i=(0,a.hexlify)(t.slice(5,9)),o=parseInt((0,a.hexlify)(t.slice(9,13)).substring(2),16),l=(0,a.hexlify)(t.slice(13,45)),c=t.slice(45,78);switch((0,a.hexlify)(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":{let e=(0,a.hexlify)(c);return new x(g,(0,s.computeAddress)(e),e,i,l,null,o,r,null)}case"0x0488ade4":case"0x04358394 ":if(0!==c[0])break;return new y(g,new n.SigningKey(c.slice(1)),i,l,null,o,r,null,null)}(0,a.assertArgument)(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(e,r,i){null==e&&(e=""),null==r&&(r=t.defaultPath),null==i&&(i=o.LangEn.wordlist());let s=c.Mnemonic.fromEntropy((0,n.randomBytes)(16),e,i);return y.#tS(s.computeSeed(),s).derivePath(r)}static fromMnemonic(e,r){return r||(r=t.defaultPath),y.#tS(e.computeSeed(),e).derivePath(r)}static fromPhrase(e,r,n,i){null==r&&(r=""),null==n&&(n=t.defaultPath),null==i&&(i=o.LangEn.wordlist());let s=c.Mnemonic.fromPhrase(e,r,i);return y.#tS(s.computeSeed(),s).derivePath(n)}static fromSeed(e){return y.#tS(e,null)}}t.HDNodeWallet=y;class x extends i.VoidSigner{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(e,t,r,i,s,o,l,c,u){super(t,u),(0,a.assertPrivate)(e,g,"HDNodeVoidWallet"),(0,a.defineProperties)(this,{publicKey:r});let d=(0,a.dataSlice)((0,n.ripemd160)((0,n.sha256)(r)),0,4);(0,a.defineProperties)(this,{publicKey:r,fingerprint:d,parentFingerprint:i,chainCode:s,path:o,index:l,depth:c})}connect(e){return new x(g,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,e)}get extendedKey(){return(0,a.assert)(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),p((0,a.concat)(["0x0488B21E",f(this.depth,1),this.parentFingerprint,f(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return null!=this.path}deriveChild(e){let t=(0,a.getNumber)(e,"index");(0,a.assertArgument)(t<=0xffffffff,"invalid index","index",t);let r=this.path;r&&(r+="/"+(0x7fffffff&t),0x80000000&t&&(r+="'"));let{IR:i,IL:o}=m(t,this.chainCode,this.publicKey,null),l=n.SigningKey.addPoints(o,this.publicKey,!0);return new x(g,(0,s.computeAddress)(l),l,this.fingerprint,(0,a.hexlify)(i),r,t,this.depth+1,this.provider)}derivePath(e){return b(this,e)}}t.HDNodeVoidWallet=x,t.getAccountPath=function(e){let t=(0,a.getNumber)(e,"index");return(0,a.assertArgument)(t>=0&&t<0x80000000,"invalid account index","index",t),`m/44'/60'/${t}'/0/0`},t.getIndexedAccountPath=function(e){let t=(0,a.getNumber)(e,"index");return(0,a.assertArgument)(t>=0&&t<0x80000000,"invalid account index","index",t),`m/44'/60'/0'/0/${t}`}},8579:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recoverAddress=t.computeAddress=void 0;let n=r(9111),i=r(6870);function s(e){let t;return t="string"==typeof e?i.SigningKey.computePublicKey(e,!1):e.publicKey,(0,n.getAddress)((0,i.keccak256)("0x"+t.substring(4)).substring(26))}t.computeAddress=s,t.recoverAddress=function(e,t){return s(i.SigningKey.recoverPublicKey(e,t))}},8616:(e,t,r)=>{"use strict";async function n(e){let t=Object.keys(e);return(await Promise.all(t.map(t=>Promise.resolve(e[t])))).reduce((e,r,n)=>(e[t[n]]=r,e),{})}function i(e,t,r){for(let n in t){let i=t[n],s=r?r[n]:null;s&&function(e,t,r){let n=t.split("|").map(e=>e.trim());for(let r=0;r<n.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let i=Error(`invalid value for type ${t}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${r}`,i.value=e,i}(i,s,n),Object.defineProperty(e,n,{enumerable:!0,value:i,writable:!1})}}r.d(t,{k:()=>n,n:()=>i})},8623:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf2=void 0;let n=r(4006),i=r(8662),s=!1,a=function(e,t,r,i,s){return(0,n.pbkdf2Sync)(e,t,r,i,s)},o=a;function l(e,t,r,n,s){let a=(0,i.getBytes)(e,"password"),l=(0,i.getBytes)(t,"salt");return(0,i.hexlify)(o(a,l,r,n,s))}t.pbkdf2=l,l._=a,l.lock=function(){s=!0},l.register=function(e){if(s)throw Error("pbkdf2 is locked");o=e},Object.freeze(l)},8635:(e,t,r)=>{"use strict";r.d(t,{aI:()=>n.a,dI:()=>s.d,sH:()=>i.s});var n=r(6552),i=r(9865),s=r(6054)},8662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toUtf8String=t.toUtf8CodePoints=t.toUtf8Bytes=t.parseUnits=t.formatUnits=t.parseEther=t.formatEther=t.encodeRlp=t.decodeRlp=t.defineProperties=t.resolveProperties=t.toQuantity=t.toBeArray=t.toBeHex=t.toNumber=t.toBigInt=t.getUint=t.getNumber=t.getBigInt=t.mask=t.toTwos=t.fromTwos=t.FixedNumber=t.FetchCancelSignal=t.FetchResponse=t.FetchRequest=t.EventPayload=t.makeError=t.assertNormalize=t.assertPrivate=t.assertArgumentCount=t.assertArgument=t.assert=t.isError=t.isCallException=t.zeroPadBytes=t.zeroPadValue=t.stripZerosLeft=t.dataSlice=t.dataLength=t.concat=t.hexlify=t.isBytesLike=t.isHexString=t.getBytesCopy=t.getBytes=t.encodeBase64=t.decodeBase64=t.encodeBase58=t.decodeBase58=void 0,t.uuidV4=t.Utf8ErrorFuncs=void 0;var n=r(5906);Object.defineProperty(t,"decodeBase58",{enumerable:!0,get:function(){return n.decodeBase58}}),Object.defineProperty(t,"encodeBase58",{enumerable:!0,get:function(){return n.encodeBase58}});var i=r(3308);Object.defineProperty(t,"decodeBase64",{enumerable:!0,get:function(){return i.decodeBase64}}),Object.defineProperty(t,"encodeBase64",{enumerable:!0,get:function(){return i.encodeBase64}});var s=r(4306);Object.defineProperty(t,"getBytes",{enumerable:!0,get:function(){return s.getBytes}}),Object.defineProperty(t,"getBytesCopy",{enumerable:!0,get:function(){return s.getBytesCopy}}),Object.defineProperty(t,"isHexString",{enumerable:!0,get:function(){return s.isHexString}}),Object.defineProperty(t,"isBytesLike",{enumerable:!0,get:function(){return s.isBytesLike}}),Object.defineProperty(t,"hexlify",{enumerable:!0,get:function(){return s.hexlify}}),Object.defineProperty(t,"concat",{enumerable:!0,get:function(){return s.concat}}),Object.defineProperty(t,"dataLength",{enumerable:!0,get:function(){return s.dataLength}}),Object.defineProperty(t,"dataSlice",{enumerable:!0,get:function(){return s.dataSlice}}),Object.defineProperty(t,"stripZerosLeft",{enumerable:!0,get:function(){return s.stripZerosLeft}}),Object.defineProperty(t,"zeroPadValue",{enumerable:!0,get:function(){return s.zeroPadValue}}),Object.defineProperty(t,"zeroPadBytes",{enumerable:!0,get:function(){return s.zeroPadBytes}});var a=r(7073);Object.defineProperty(t,"isCallException",{enumerable:!0,get:function(){return a.isCallException}}),Object.defineProperty(t,"isError",{enumerable:!0,get:function(){return a.isError}}),Object.defineProperty(t,"assert",{enumerable:!0,get:function(){return a.assert}}),Object.defineProperty(t,"assertArgument",{enumerable:!0,get:function(){return a.assertArgument}}),Object.defineProperty(t,"assertArgumentCount",{enumerable:!0,get:function(){return a.assertArgumentCount}}),Object.defineProperty(t,"assertPrivate",{enumerable:!0,get:function(){return a.assertPrivate}}),Object.defineProperty(t,"assertNormalize",{enumerable:!0,get:function(){return a.assertNormalize}}),Object.defineProperty(t,"makeError",{enumerable:!0,get:function(){return a.makeError}});var o=r(3547);Object.defineProperty(t,"EventPayload",{enumerable:!0,get:function(){return o.EventPayload}});var l=r(8402);Object.defineProperty(t,"FetchRequest",{enumerable:!0,get:function(){return l.FetchRequest}}),Object.defineProperty(t,"FetchResponse",{enumerable:!0,get:function(){return l.FetchResponse}}),Object.defineProperty(t,"FetchCancelSignal",{enumerable:!0,get:function(){return l.FetchCancelSignal}});var c=r(6953);Object.defineProperty(t,"FixedNumber",{enumerable:!0,get:function(){return c.FixedNumber}});var u=r(7310);Object.defineProperty(t,"fromTwos",{enumerable:!0,get:function(){return u.fromTwos}}),Object.defineProperty(t,"toTwos",{enumerable:!0,get:function(){return u.toTwos}}),Object.defineProperty(t,"mask",{enumerable:!0,get:function(){return u.mask}}),Object.defineProperty(t,"getBigInt",{enumerable:!0,get:function(){return u.getBigInt}}),Object.defineProperty(t,"getNumber",{enumerable:!0,get:function(){return u.getNumber}}),Object.defineProperty(t,"getUint",{enumerable:!0,get:function(){return u.getUint}}),Object.defineProperty(t,"toBigInt",{enumerable:!0,get:function(){return u.toBigInt}}),Object.defineProperty(t,"toNumber",{enumerable:!0,get:function(){return u.toNumber}}),Object.defineProperty(t,"toBeHex",{enumerable:!0,get:function(){return u.toBeHex}}),Object.defineProperty(t,"toBeArray",{enumerable:!0,get:function(){return u.toBeArray}}),Object.defineProperty(t,"toQuantity",{enumerable:!0,get:function(){return u.toQuantity}});var d=r(9959);Object.defineProperty(t,"resolveProperties",{enumerable:!0,get:function(){return d.resolveProperties}}),Object.defineProperty(t,"defineProperties",{enumerable:!0,get:function(){return d.defineProperties}});var h=r(5961);Object.defineProperty(t,"decodeRlp",{enumerable:!0,get:function(){return h.decodeRlp}});var f=r(2257);Object.defineProperty(t,"encodeRlp",{enumerable:!0,get:function(){return f.encodeRlp}});var p=r(489);Object.defineProperty(t,"formatEther",{enumerable:!0,get:function(){return p.formatEther}}),Object.defineProperty(t,"parseEther",{enumerable:!0,get:function(){return p.parseEther}}),Object.defineProperty(t,"formatUnits",{enumerable:!0,get:function(){return p.formatUnits}}),Object.defineProperty(t,"parseUnits",{enumerable:!0,get:function(){return p.parseUnits}});var g=r(2097);Object.defineProperty(t,"toUtf8Bytes",{enumerable:!0,get:function(){return g.toUtf8Bytes}}),Object.defineProperty(t,"toUtf8CodePoints",{enumerable:!0,get:function(){return g.toUtf8CodePoints}}),Object.defineProperty(t,"toUtf8String",{enumerable:!0,get:function(){return g.toUtf8String}}),Object.defineProperty(t,"Utf8ErrorFuncs",{enumerable:!0,get:function(){return g.Utf8ErrorFuncs}});var m=r(6973);Object.defineProperty(t,"uuidV4",{enumerable:!0,get:function(){return m.uuidV4}})},8718:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnsResolver=t.BasicMulticoinProviderPlugin=t.MulticoinProviderPlugin=void 0;let n=r(9111),i=r(9418),s=r(629),a=r(4259),o=r(8662);function l(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):(0,o.assertArgument)(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class c{name;constructor(e){(0,o.defineProperties)(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw Error("unsupported coin")}async decodeAddress(e,t){throw Error("unsupported coin")}}t.MulticoinProviderPlugin=c;class u extends c{constructor(){super("org.ethers.plugins.provider.BasicMulticoin")}}t.BasicMulticoinProviderPlugin=u;let d=RegExp("^(ipfs)://(.*)$","i"),h=[RegExp("^(https)://(.*)$","i"),RegExp("^(data):(.*)$","i"),d,RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class f{provider;address;name;#ev;#eA;constructor(e,t,r){(0,o.defineProperties)(this,{provider:e,address:t,name:r}),this.#ev=null,this.#eA=new s.Contract(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#ev&&(this.#ev=(async()=>{try{return await this.#eA.supportsInterface("0x9061b923")}catch(e){if((0,o.isError)(e,"CALL_EXCEPTION"))return!1;throw this.#ev=null,e}})()),await this.#ev}async #eE(e,t){t=(t||[]).slice();let r=this.#eA.interface;t.unshift((0,a.namehash)(this.name));let n=null;await this.supportsWildcard()&&(n=r.getFunction(e),(0,o.assert)(n,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[(0,a.dnsEncode)(this.name,255),r.encodeFunctionData(n,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{let i=await this.#eA[e](...t);if(n)return r.decodeFunctionResult(n,i)[0];return i}catch(e){if(!(0,o.isError)(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{let e=await this.#eE("addr(bytes32)");if(null==e||e===i.ZeroAddress)return null;return e}catch(e){if((0,o.isError)(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<0x80000000){let t=e+0x80000000,r=await this.#eE("addr(bytes32,uint)",[t]);if((0,o.isHexString)(r,20))return(0,n.getAddress)(r)}let t=null;for(let r of this.provider.plugins)if(r instanceof c&&r.supportsCoinType(e)){t=r;break}if(null==t)return null;let r=await this.#eE("addr(bytes32,uint)",[e]);if(null==r||"0x"===r)return null;let s=await t.decodeAddress(e,r);if(null!=s)return s;(0,o.assert)(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){let t=await this.#eE("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){let e=await this.#eE("contenthash(bytes32)");if(null==e||"0x"===e)return null;let t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){let e="e3010170"===t[1]?"ipfs":"ipns",r=parseInt(t[4],16);if(t[5].length===2*r)return`${e}://${(0,o.encodeBase58)("0x"+t[2])}`}let r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;(0,o.assert)(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){let e=[{type:"name",value:this.name}];try{let t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<h.length;r++){let n=t.match(h[r]);if(null==n)continue;let i=n[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{let r=l(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:r}),{linkage:e,url:r}}case"erc721":case"erc1155":{let r="erc721"===i?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:t});let a=await this.getAddress();if(null==a)return e.push({type:"!owner",value:""}),{url:null,linkage:e};let c=(n[2]||"").split("/");if(2!==c.length)return e.push({type:`!${i}caip`,value:n[2]||""}),{url:null,linkage:e};let u=c[1],h=new s.Contract(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===i){let t=await h.ownerOf(u);if(a!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===i){let t=await h.balanceOf(a,u);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let f=await h[r](u);if(null==f||"0x"===f)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:f}),"erc1155"===i&&(f=f.replace("{id}",(0,o.toBeHex)(u,32).substring(2)),e.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=l(f)),e.push({type:"metadata-url",value:f});let p={},g=await new o.FetchRequest(f).send();g.assertOk();try{p=g.bodyJson}catch(t){try{e.push({type:"!metadata",value:g.bodyText})}catch(r){let t=g.body;t&&e.push({type:"!metadata",value:(0,o.hexlify)(t)})}return{url:null,linkage:e}}if(!p)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(p)});let m=p.image;if("string"!=typeof m)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(m.match(/^(https:\/\/|data:)/i));else{let t=m.match(d);if(null==t)return e.push({type:"!imageUrl-ipfs",value:m}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:m}),m=l(m)}return e.push({type:"url",value:m}),{linkage:e,url:m}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){let t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return(0,o.assert)(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async #ek(e,t){let r=await f.getEnsAddress(e);try{let n=new s.Contract(r,["function resolver(bytes32) view returns (address)"],e),o=await n.resolver((0,a.namehash)(t),{enableCcipRead:!0});if(o===i.ZeroAddress)return null;return o}catch(e){throw e}return null}static async fromName(e,t){let r=t;for(;;){if(""===r||"."===r||"eth"!==t&&"eth"===r)return null;let n=await f.#ek(e,r);if(null!=n){let i=new f(e,n,t);if(r!==t&&!await i.supportsWildcard())return null;return i}r=r.split(".").slice(1).join(".")}}}t.EnsResolver=f},8738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZeroHash=void 0,t.ZeroHash="0x0000000000000000000000000000000000000000000000000000000000000000"},8895:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.accessListify=void 0;let n=r(9111),i=r(8662);function s(e,t){return{address:(0,n.getAddress)(e),storageKeys:t.map((e,t)=>((0,i.assertArgument)((0,i.isHexString)(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase()))}}t.accessListify=function(e){if(Array.isArray(e))return e.map((t,r)=>Array.isArray(t)?((0,i.assertArgument)(2===t.length,"invalid slot set",`value[${r}]`,t),s(t[0],t[1])):((0,i.assertArgument)(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),s(t.address,t.storageKeys)));(0,i.assertArgument)(null!=e&&"object"==typeof e,"invalid access list","value",e);let t=Object.keys(e).map(t=>{let r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return s(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}},8926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChainstackProvider=void 0;let n=r(8662),i=r(5188),s=r(9307),a=r(4822);function o(e){switch(e){case"mainnet":return"39f1d67cedf8b7831010a665328c9197";case"arbitrum":return"0550c209db33c3abf4cc927e1e18cea1";case"bnb":return"98b5a77e531614387366f6fc5da097f8";case"matic":return"cd9d4d70377471aa7c142ec4a4205249"}(0,n.assertArgument)(!1,"unsupported network","network",e)}class l extends a.JsonRpcProvider{apiKey;constructor(e,t){null==e&&(e="mainnet");let r=s.Network.from(e);null==t&&(t=o(r.name)),super(l.getRequest(r,t),r,{staticNetwork:r}),(0,n.defineProperties)(this,{apiKey:t})}_getProvider(e){try{return new l(e,this.apiKey)}catch(e){}return super._getProvider(e)}isCommunityResource(){return this.apiKey===o(this._network.name)}static getRequest(e,t){null==t&&(t=o(e.name));let r=new n.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"ethereum-mainnet.core.chainstack.com";case"arbitrum":return"arbitrum-mainnet.core.chainstack.com";case"bnb":return"bsc-mainnet.core.chainstack.com";case"matic":return"polygon-mainnet.core.chainstack.com"}(0,n.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/${t}`);return r.allowGzip=!0,t===o(e.name)&&(r.retryFunc=async(e,t,r)=>((0,i.showThrottleMessage)("ChainstackProvider"),!0)),r}}t.ChainstackProvider=l},8934:(e,t,r)=>{"use strict";function n(e){let t=new globalThis.AbortController;function r(){for(let n of(t.abort(),e))n?.removeEventListener!=null&&n.removeEventListener("abort",r)}for(let t of e){if(t?.aborted===!0){r();break}t?.addEventListener!=null&&t.addEventListener("abort",r)}let n=t.signal;return n.clear=function(){for(let t of e)t?.removeEventListener!=null&&t.removeEventListener("abort",r)},n}r.d(t,{J:()=>n})},8965:(e,t,r)=>{"use strict";r.d(t,{y:()=>i});class n extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.name="AbortError",this.code=t??"ABORT_ERR"}}async function i(e,t,r,i){let s=new n(i?.errorMessage,i?.errorCode);return r?.aborted===!0?Promise.reject(s):new Promise((n,a)=>{function o(){r?.removeEventListener("abort",u),e.removeEventListener(t,l),i?.errorEvent!=null&&e.removeEventListener(i.errorEvent,c)}let l=e=>{try{if(i?.filter?.(e)===!1)return}catch(e){o(),a(e);return}o(),n(e)},c=e=>{o(),a(e.detail)},u=()=>{o(),a(s)};r?.addEventListener("abort",u),e.addEventListener(t,l),i?.errorEvent!=null&&e.addEventListener(i.errorEvent,c)})}},8981:(e,t,r)=>{"use strict";var n;r.d(t,{_J:()=>i,aF:()=>n});let i=Symbol.for("@libp2p/transport");!function(e){e[e.FATAL_ALL=0]="FATAL_ALL",e[e.NO_FATAL=1]="NO_FATAL"}(n||(n={}))},9034:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BooleanCoder=void 0;let n=r(4037),i=r(2884);class s extends i.Coder{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){let r=n.Typed.dereference(t,"bool");return e.writeValue(+!!r)}decode(e){return!!e.readValue()}}t.BooleanCoder=s},9051:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});let n=(0,r(7175).B)("div",{base:{display:"flex",alignItems:"center",justifyContent:"center"},variants:{inline:{true:{display:"inline-flex"}}}});n.displayName="Center"},9055:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Signature=void 0;let n=r(9418),i=r(8662),s=BigInt(0),a=BigInt(1),o=BigInt(2),l=BigInt(27),c=BigInt(28),u=BigInt(35),d={};function h(e){return(0,i.zeroPadValue)((0,i.toBeArray)(e),32)}class f{#e;#t;#r;#n;get r(){return this.#e}set r(e){(0,i.assertArgument)(32===(0,i.dataLength)(e),"invalid r","value",e),this.#e=(0,i.hexlify)(e)}get s(){return this.#t}set s(e){(0,i.assertArgument)(32===(0,i.dataLength)(e),"invalid s","value",e);let t=(0,i.hexlify)(e);(0,i.assertArgument)(8>parseInt(t.substring(0,3)),"non-canonical s","value",t),this.#t=t}get v(){return this.#r}set v(e){let t=(0,i.getNumber)(e,"value");(0,i.assertArgument)(27===t||28===t,"invalid v","v",e),this.#r=t}get networkV(){return this.#n}get legacyChainId(){let e=this.networkV;return null==e?null:f.getChainId(e)}get yParity(){return+(27!==this.v)}get yParityAndS(){let e=(0,i.getBytes)(this.s);return this.yParity&&(e[0]|=128),(0,i.hexlify)(e)}get compactSerialized(){return(0,i.concat)([this.r,this.yParityAndS])}get serialized(){return(0,i.concat)([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,n){(0,i.assertPrivate)(e,d,"Signature"),this.#e=t,this.#t=r,this.#r=n,this.#n=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let e=new f(d,this.r,this.s,this.v);return this.networkV&&(e.#n=this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){let t=(0,i.getBigInt)(e,"v");return t==l||t==c?s:((0,i.assertArgument)(t>=u,"invalid EIP-155 v","v",e),(t-u)/o)}static getChainIdV(e,t){return(0,i.getBigInt)(e)*o+BigInt(35+t-27)}static getNormalizedV(e){let t=(0,i.getBigInt)(e);return t===s||t===l?27:t===a||t===c?28:((0,i.assertArgument)(t>=u,"invalid v","v",e),t&a?27:28)}static from(e){function t(t,r){(0,i.assertArgument)(t,r,"signature",e)}if(null==e)return new f(d,n.ZeroHash,n.ZeroHash,27);if("string"==typeof e){let r=(0,i.getBytes)(e,"signature");if(64===r.length){let e=(0,i.hexlify)(r.slice(0,32)),t=r.slice(32,64),n=128&t[0]?28:27;return t[0]&=127,new f(d,e,(0,i.hexlify)(t),n)}if(65===r.length){let e=(0,i.hexlify)(r.slice(0,32)),n=r.slice(32,64);t((128&n[0])==0,"non-canonical s");let s=f.getNormalizedV(r[64]);return new f(d,e,(0,i.hexlify)(n),s)}t(!1,"invalid raw signature length")}if(e instanceof f)return e.clone();let r=e.r;t(null!=r,"missing r");let s=h(r),a=function(e,r){if(null!=e)return h(e);if(null!=r){t((0,i.isHexString)(r,32),"invalid yParityAndS");let e=(0,i.getBytes)(r);return e[0]&=127,(0,i.hexlify)(e)}t(!1,"missing s")}(e.s,e.yParityAndS);t((128&(0,i.getBytes)(a)[0])==0,"non-canonical s");let{networkV:o,v:l}=function(e,r,n){if(null!=e){let t=(0,i.getBigInt)(e);return{networkV:t>=u?t:void 0,v:f.getNormalizedV(t)}}if(null!=r)return t((0,i.isHexString)(r,32),"invalid yParityAndS"),{v:128&(0,i.getBytes)(r)[0]?28:27};if(null!=n){switch((0,i.getNumber)(n,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new f(d,s,a,l);return o&&(c.#n=o),t(null==e.yParity||(0,i.getNumber)(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}}t.Signature=f},9064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlchemyProvider=void 0;let n=r(8662),i=r(5188),s=r(9307),a=r(4822),o="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class l extends a.JsonRpcProvider{apiKey;constructor(e,t){null==e&&(e="mainnet");let r=s.Network.from(e);null==t&&(t=o),super(l.getRequest(r,t),r,{staticNetwork:r}),(0,n.defineProperties)(this,{apiKey:t})}_getProvider(e){try{return new l(e,this.apiKey)}catch(e){}return super._getProvider(e)}async _perform(e){if("getTransactionResult"===e.method){let t;let{trace:r,tx:i}=await (0,n.resolveProperties)({trace:this.send("trace_transaction",[e.hash]),tx:this.getTransaction(e.hash)});if(null==r||null==i)return null;let s=!1;try{t=r[0].result.output,s="Reverted"===r[0].error}catch(e){}if(t)return(0,n.assert)(!s,"an error occurred during transaction executions","CALL_EXCEPTION",{action:"getTransactionResult",data:t,reason:null,transaction:i,invocation:null,revert:null}),t;(0,n.assert)(!1,"could not parse trace result","BAD_DATA",{value:r})}return await super._perform(e)}isCommunityResource(){return this.apiKey===o}static getRequest(e,t){null==t&&(t=o);let r=new n.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"eth-mainnet.alchemyapi.io";case"goerli":return"eth-goerli.g.alchemy.com";case"sepolia":return"eth-sepolia.g.alchemy.com";case"arbitrum":return"arb-mainnet.g.alchemy.com";case"arbitrum-goerli":return"arb-goerli.g.alchemy.com";case"arbitrum-sepolia":return"arb-sepolia.g.alchemy.com";case"base":return"base-mainnet.g.alchemy.com";case"base-goerli":return"base-goerli.g.alchemy.com";case"base-sepolia":return"base-sepolia.g.alchemy.com";case"matic":return"polygon-mainnet.g.alchemy.com";case"matic-amoy":return"polygon-amoy.g.alchemy.com";case"matic-mumbai":return"polygon-mumbai.g.alchemy.com";case"optimism":return"opt-mainnet.g.alchemy.com";case"optimism-goerli":return"opt-goerli.g.alchemy.com";case"optimism-sepolia":return"opt-sepolia.g.alchemy.com"}(0,n.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/v2/${t}`);return r.allowGzip=!0,t===o&&(r.retryFunc=async(e,t,r)=>((0,i.showThrottleMessage)("alchemy"),!0)),r}}t.AlchemyProvider=l},9111:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveAddress=t.isAddress=t.isAddressable=t.getCreate2Address=t.getCreateAddress=t.getIcapAddress=t.getAddress=void 0;var n=r(3823);Object.defineProperty(t,"getAddress",{enumerable:!0,get:function(){return n.getAddress}}),Object.defineProperty(t,"getIcapAddress",{enumerable:!0,get:function(){return n.getIcapAddress}});var i=r(6598);Object.defineProperty(t,"getCreateAddress",{enumerable:!0,get:function(){return i.getCreateAddress}}),Object.defineProperty(t,"getCreate2Address",{enumerable:!0,get:function(){return i.getCreate2Address}});var s=r(9856);Object.defineProperty(t,"isAddressable",{enumerable:!0,get:function(){return s.isAddressable}}),Object.defineProperty(t,"isAddress",{enumerable:!0,get:function(){return s.isAddress}}),Object.defineProperty(t,"resolveAddress",{enumerable:!0,get:function(){return s.resolveAddress}})},9134:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressCoder=void 0;let n=r(9111),i=r(7310),s=r(4037),a=r(2884);class o extends a.Coder{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=s.Typed.dereference(t,"string");try{r=(0,n.getAddress)(r)}catch(e){return this._throwError(e.message,t)}return e.writeValue(r)}decode(e){return(0,n.getAddress)((0,i.toBeHex)(e.readValue(),20))}}t.AddressCoder=o},9141:(e,t,r)=>{"use strict";r.d(t,{X:()=>i});var n=r(6676);class i extends EventTarget{#ee=new Map;constructor(){super(),(0,n.k)(1/0,this)}listenerCount(e){let t=this.#ee.get(e);return null==t?0:t.length}addEventListener(e,t,r){super.addEventListener(e,t,r);let n=this.#ee.get(e);null==n&&(n=[],this.#ee.set(e,n)),n.push({callback:t,once:(!0!==r&&!1!==r&&r?.once)??!1})}removeEventListener(e,t,r){super.removeEventListener(e.toString(),t??null,r);let n=this.#ee.get(e);null!=n&&(n=n.filter(({callback:e})=>e!==t),this.#ee.set(e,n))}dispatchEvent(e){let t=super.dispatchEvent(e),r=this.#ee.get(e.type);return null==r||(r=r.filter(({once:e})=>!e),this.#ee.set(e.type,r)),t}safeDispatchEvent(e,t={}){return this.dispatchEvent(new CustomEvent(e,t))}}},9213:(e,t,r)=>{"use strict";r.d(t,{O:()=>n,Z:()=>i});class n extends Error{remainingPoints;msBeforeNext;consumedPoints;isFirstInDuration;constructor(e="Rate limit exceeded",t){super(e),this.name="RateLimitError",this.remainingPoints=t.remainingPoints,this.msBeforeNext=t.msBeforeNext,this.consumedPoints=t.consumedPoints,this.isFirstInDuration=t.isFirstInDuration}}class i extends Error{static name="QueueFullError";constructor(e="The queue was full"){super(e),this.name="QueueFullError"}}},9219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseIntegerNumber=t.isEIP55Address=void 0;let n=r(1813),i=r(5603);t.isEIP55Address=e=>{if(42!=e.length)return!1;let t=`${e}`.toLowerCase().replace("0x",""),r=(0,i.bytesToHex)((0,n.keccak_256)(t)),s="0x";for(let e=0;e<t.length;e++)parseInt(r[e],16)>=8?s+=t[e].toUpperCase():s+=t[e];return e===s},t.parseIntegerNumber=e=>{let t=parseInt(e);if(isNaN(t)||t===1/0)throw Error("Invalid number.");return t}},9223:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var n=r(9827),i=r(3084);function s(e){if(isNaN(e)||e<=0)throw new n.gG("random bytes length must be a Number bigger than 0");return(0,i.po)(e)}},9258:(e,t,r)=>{"use strict";r.d(t,{s:()=>d});var n=r(1414),i=r(6269);let s=(e,t,r)=>e&t^~e&r,a=(e,t,r)=>e&t^e&r^t&r,o=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),l=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),c=new Uint32Array(64);class u extends n.D{constructor(){super(64,32,8,!1),this.A=0|l[0],this.B=0|l[1],this.C=0|l[2],this.D=0|l[3],this.E=0|l[4],this.F=0|l[5],this.G=0|l[6],this.H=0|l[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:s,G:a,H:o}=this;return[e,t,r,n,i,s,a,o]}set(e,t,r,n,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=c[e-15],r=c[e-2],n=(0,i.Ow)(t,7)^(0,i.Ow)(t,18)^t>>>3,s=(0,i.Ow)(r,17)^(0,i.Ow)(r,19)^r>>>10;c[e]=s+c[e-7]+n+c[e-16]|0}let{A:r,B:n,C:l,D:u,E:d,F:h,G:f,H:p}=this;for(let e=0;e<64;e++){let t=p+((0,i.Ow)(d,6)^(0,i.Ow)(d,11)^(0,i.Ow)(d,25))+s(d,h,f)+o[e]+c[e]|0,g=((0,i.Ow)(r,2)^(0,i.Ow)(r,13)^(0,i.Ow)(r,22))+a(r,n,l)|0;p=f,f=h,h=d,d=u+t|0,u=l,l=n,n=r,r=t+g|0}r=r+this.A|0,n=n+this.B|0,l=l+this.C|0,u=u+this.D|0,d=d+this.E|0,h=h+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(r,n,l,u,d,h,f,p)}roundClean(){c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let d=(0,i.ld)(()=>new u)},9307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Network=void 0;let n=r(2984),i=r(8662),s=r(3118),a=new Map;class o{#eP;#eS;#eI;constructor(e,t){this.#eP=e,this.#eS=(0,i.getBigInt)(t),this.#eI=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#eP}set name(e){this.#eP=e}get chainId(){return this.#eS}set chainId(e){this.#eS=(0,i.getBigInt)(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===(0,i.getBigInt)(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===(0,i.getBigInt)(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===(0,i.getBigInt)(e.chainId)}catch(e){}return!1}if(null!=e.name)return this.name===e.name}return!1}get plugins(){return Array.from(this.#eI.values())}attachPlugin(e){if(this.#eI.get(e.name))throw Error(`cannot replace existing plugin: ${e.name} `);return this.#eI.set(e.name,e.clone()),this}getPlugin(e){return this.#eI.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){let e=new o(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){let t=this.getPlugin("org.ethers.plugins.network.GasCost")||new s.GasCostPlugin,r=t.txBase;if(null==e.to&&(r+=t.txCreate),e.data)for(let n=2;n<e.data.length;n+=2)"00"===e.data.substring(n,n+2)?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){let i=(0,n.accessListify)(e.accessList);for(let e in i)r+=t.txAccessListAddress+t.txAccessListStorageKey*i[e].storageKeys.length}return r}static from(e){if(function(){!u&&(u=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",0xaa36a7,{ensNetwork:0xaa36a7}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[c("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[c("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",0xaa37dc,{}),e("xdai",100,{ensNetwork:1}));function e(e,t,r){let n=function(){let n=new o(e,t);return null!=r.ensNetwork&&n.attachPlugin(new s.EnsPlugin(null,r.ensNetwork)),n.attachPlugin(new s.GasCostPlugin),(r.plugins||[]).forEach(e=>{n.attachPlugin(e)}),n};o.register(e,n),o.register(t,n),r.altNames&&r.altNames.forEach(e=>{o.register(e,n)})}}(),null==e)return o.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){let t=a.get(e);if(t)return t();if("bigint"==typeof e)return new o("unknown",e);(0,i.assertArgument)(!1,"unknown network","network",e)}if("function"==typeof e.clone)return e.clone();if("object"==typeof e){(0,i.assertArgument)("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);let t=new o(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new s.EnsPlugin(e.ensAddress,e.ensNetwork)),t}(0,i.assertArgument)(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));let r=a.get(e);r&&(0,i.assertArgument)(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),a.set(e,t)}}function l(e,t){let r=String(e);if(!r.match(/^[0-9.]+$/))throw Error(`invalid gwei value: ${e}`);let n=r.split(".");if(1===n.length&&n.push(""),2!==n.length)throw Error(`invalid gwei value: ${e}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let e=BigInt(n[1].substring(0,9));!n[1].substring(9).match(/^0+$/)&&e++,n[1]=e.toString()}return BigInt(n[0]+n[1])}function c(e){return new s.FetchUrlFeeDataNetworkPlugin(e,async(e,t,r)=>{let n;r.setHeader("User-Agent","ethers");try{let[t,i]=await Promise.all([r.send(),e()]),s=(n=t).bodyJson.standard;return{gasPrice:i.gasPrice,maxFeePerGas:l(s.maxFee,9),maxPriorityFeePerGas:l(s.maxPriorityFee,9)}}catch(e){(0,i.assert)(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:n,error:e})}})}t.Network=o;let u=!1},9313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WordlistOwl=void 0;let n=r(4259),i=r(8662),s=r(2963),a=r(4326);class o extends a.Wordlist{#o;#tA;constructor(e,t,r){super(e),this.#o=t,this.#tA=r,this.#tE=null}get _data(){return this.#o}_decodeWords(){return(0,s.decodeOwl)(this.#o)}#tE;#tk(){if(null==this.#tE){let e=this._decodeWords();if((0,n.id)(e.join("\n")+"\n")!==this.#tA)throw Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#tE=e}return this.#tE}getWord(e){let t=this.#tk();return(0,i.assertArgument)(e>=0&&e<t.length,`invalid word index: ${e}`,"index",e),t[e]}getWordIndex(e){return this.#tk().indexOf(e)}}t.WordlistOwl=o},9418:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessagePrefix=t.EtherSymbol=t.MaxInt256=t.MinInt256=t.MaxUint256=t.WeiPerEther=t.N=t.ZeroHash=t.ZeroAddress=void 0;var n=r(1842);Object.defineProperty(t,"ZeroAddress",{enumerable:!0,get:function(){return n.ZeroAddress}});var i=r(8738);Object.defineProperty(t,"ZeroHash",{enumerable:!0,get:function(){return i.ZeroHash}});var s=r(2860);Object.defineProperty(t,"N",{enumerable:!0,get:function(){return s.N}}),Object.defineProperty(t,"WeiPerEther",{enumerable:!0,get:function(){return s.WeiPerEther}}),Object.defineProperty(t,"MaxUint256",{enumerable:!0,get:function(){return s.MaxUint256}}),Object.defineProperty(t,"MinInt256",{enumerable:!0,get:function(){return s.MinInt256}}),Object.defineProperty(t,"MaxInt256",{enumerable:!0,get:function(){return s.MaxInt256}});var a=r(1124);Object.defineProperty(t,"EtherSymbol",{enumerable:!0,get:function(){return a.EtherSymbol}}),Object.defineProperty(t,"MessagePrefix",{enumerable:!0,get:function(){return a.MessagePrefix}})},9478:(e,t,r)=>{"use strict";r.d(t,{n1:()=>y,Gz:()=>x,T_:()=>w,po:()=>v});var n=r(4570),i=r(28),s=r(9258),a=r(1414),o=r(1295),l=r(6269);let[c,u]=o.Ay.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),d=new Uint32Array(80),h=new Uint32Array(80);class f extends a.D{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:a,Dl:o,Eh:l,El:c,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,g]}set(e,t,r,n,i,s,a,o,l,c,u,d,h,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)d[r]=e.getUint32(t),h[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|d[e-15],r=0|h[e-15],n=o.Ay.rotrSH(t,r,1)^o.Ay.rotrSH(t,r,8)^o.Ay.shrSH(t,r,7),i=o.Ay.rotrSL(t,r,1)^o.Ay.rotrSL(t,r,8)^o.Ay.shrSL(t,r,7),s=0|d[e-2],a=0|h[e-2],l=o.Ay.rotrSH(s,a,19)^o.Ay.rotrBH(s,a,61)^o.Ay.shrSH(s,a,6),c=o.Ay.rotrSL(s,a,19)^o.Ay.rotrBL(s,a,61)^o.Ay.shrSL(s,a,6),u=o.Ay.add4L(i,c,h[e-7],h[e-16]),f=o.Ay.add4H(u,n,l,d[e-7],d[e-16]);d[e]=0|f,h[e]=0|u}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:a,Cl:l,Dh:f,Dl:p,Eh:g,El:m,Fh:b,Fl:y,Gh:x,Gl:w,Hh:v,Hl:A}=this;for(let e=0;e<80;e++){let t=o.Ay.rotrSH(g,m,14)^o.Ay.rotrSH(g,m,18)^o.Ay.rotrBH(g,m,41),E=o.Ay.rotrSL(g,m,14)^o.Ay.rotrSL(g,m,18)^o.Ay.rotrBL(g,m,41),k=g&b^~g&x,P=m&y^~m&w,S=o.Ay.add5L(A,E,P,u[e],h[e]),I=o.Ay.add5H(S,v,t,k,c[e],d[e]),T=0|S,_=o.Ay.rotrSH(r,n,28)^o.Ay.rotrBH(r,n,34)^o.Ay.rotrBH(r,n,39),C=o.Ay.rotrSL(r,n,28)^o.Ay.rotrBL(r,n,34)^o.Ay.rotrBL(r,n,39),O=r&i^r&a^i&a,R=n&s^n&l^s&l;v=0|x,A=0|w,x=0|b,w=0|y,b=0|g,y=0|m,({h:g,l:m}=o.Ay.add(0|f,0|p,0|I,0|T)),f=0|a,p=0|l,a=0|i,l=0|s,i=0|r,s=0|n;let N=o.Ay.add3L(T,C,R);r=o.Ay.add3H(N,I,_,O),n=0|N}({h:r,l:n}=o.Ay.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=o.Ay.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:a,l:l}=o.Ay.add(0|this.Ch,0|this.Cl,0|a,0|l)),({h:f,l:p}=o.Ay.add(0|this.Dh,0|this.Dl,0|f,0|p)),({h:g,l:m}=o.Ay.add(0|this.Eh,0|this.El,0|g,0|m)),({h:b,l:y}=o.Ay.add(0|this.Fh,0|this.Fl,0|b,0|y)),({h:x,l:w}=o.Ay.add(0|this.Gh,0|this.Gl,0|x,0|w)),({h:v,l:A}=o.Ay.add(0|this.Hh,0|this.Hl,0|v,0|A)),this.set(r,n,i,s,a,l,f,p,g,m,b,y,x,w,v,A)}roundClean(){d.fill(0),h.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let p=(0,l.ld)(()=>new f);var g=r(9982);let m=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}(),b=m.crypto||m.msCrypto;function y(e){switch(e){case"sha256":return s.s.create();case"sha512":return p.create()}(0,g.MR)(!1,"invalid hashing algorithm name","algorithm",e)}function x(e,t){let r={sha256:s.s,sha512:p}[e];return(0,g.MR)(null!=r,"invalid hmac algorithm","algorithm",e),n.w.create(r,t)}function w(e,t,r,n,a){let o={sha256:s.s,sha512:p}[a];return(0,g.MR)(null!=o,"invalid pbkdf2 algorithm","algorithm",a),(0,i.A)(o,e,t,{c:r,dkLen:n})}function v(e){(0,g.vA)(null!=b,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),(0,g.MR)(Number.isInteger(e)&&e>0&&e<=1024,"invalid length","length",e);let t=new Uint8Array(e);return b.getRandomValues(t),t}},9481:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isUri=t.ParsedMessage=void 0;let i=r(5574),s=r(5414),a=n(r(907)),o=new i.grammar;class l{constructor(e){let t=new a.default.parser;t.callbacks["sign-in-with-ethereum"]=s.cb.signInWithEtherium,t.callbacks.oscheme=s.cb.oscheme,t.callbacks.domain=s.cb.domain,t.callbacks.LF=s.cb.lineno,t.callbacks["ex-title"]=s.cb.exTitle,t.callbacks["nb-title"]=s.cb.nbTitle,t.callbacks["ri-title"]=s.cb.riTitle,t.callbacks["re-title"]=s.cb.reTitle,t.callbacks.address=s.cb.address,t.callbacks.statement=s.cb.statement,t.callbacks["empty-statement"]=s.cb.emptyStatement,t.callbacks.version=s.cb.version,t.callbacks["chain-id"]=s.cb.chainId,t.callbacks.nonce=s.cb.nonce,t.callbacks["issued-at"]=s.cb.issuedAt,t.callbacks["expiration-time"]=s.cb.expirationTime,t.callbacks["not-before"]=s.cb.notBefore,t.callbacks["request-id"]=s.cb.requestId,t.callbacks.uri=s.cb.uri,t.callbacks["uri-r"]=s.cb.uriR,t.callbacks.resource=s.cb.resource,t.callbacks.scheme=s.cb.scheme,t.callbacks["userinfo-at"]=s.cb.userinfo,t.callbacks.host=s.cb.host,t.callbacks["IP-literal"]=s.cb.ipLiteral,t.callbacks.port=s.cb.port,t.callbacks["path-abempty"]=s.cb.pathAbempty,t.callbacks["path-absolute"]=s.cb.pathAbsolute,t.callbacks["path-rootless"]=s.cb.pathRootless,t.callbacks["path-empty"]=s.cb.pathEmpty,t.callbacks.query=s.cb.query,t.callbacks.fragment=s.cb.fragment,t.callbacks.IPv4address=s.cb.ipv4,t.callbacks.nodcolon=s.cb.nodcolon,t.callbacks.dcolon=s.cb.dcolon,t.callbacks.h16=s.cb.h16,t.callbacks.h16c=s.cb.h16,t.callbacks.h16n=s.cb.h16,t.callbacks.h16cn=s.cb.h16,t.callbacks["dec-octet"]=s.cb.decOctet,t.callbacks["dec-digit"]=s.cb.decDigit;let r={errors:[],lineno:1,scheme:void 0,domain:void 0,address:void 0,statement:void 0,uri:void 0,version:void 0,chainId:void 0,nonce:void 0,issuedAt:void 0,expirationTime:void 0,notBefore:void 0,requestId:void 0,resources:void 0,uriElements:{scheme:void 0,userinfo:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0}},n=t.parse(o,0,e,r),i="";for(let e=0;e<r.errors.length;e+=1)i+=r.errors[e]+"\n";if(n.success||(i+=`Invalid message: ${JSON.stringify(n)}`),""!==i)throw Error(i);this.scheme=r.scheme,this.domain=r.domain,this.address=r.address,this.statement=r.statement,this.uri=r.uri,this.version=r.version,this.chainId=r.chainId,this.nonce=r.nonce,this.issuedAt=r.issuedAt,this.expirationTime=r.expirationTime,this.notBefore=r.notBefore,this.requestId=r.requestId,this.resources=r.resources,this.uriElements=r.uriElements}}t.ParsedMessage=l,t.isUri=e=>{let t=new a.default.parser;return t.callbacks["IP-literal"]=s.cb.ipLiteral,t.callbacks.IPv4address=s.cb.ipv4,t.callbacks.nodcolon=s.cb.nodcolon,t.callbacks.dcolon=s.cb.dcolon,t.callbacks.h16=s.cb.h16,t.callbacks.h16c=s.cb.h16,t.callbacks.h16n=s.cb.h16,t.callbacks.h16cn=s.cb.h16,t.callbacks["dec-octet"]=s.cb.decOctet,t.callbacks["dec-digit"]=s.cb.decDigit,t.parse(o,"uri-r",e,{errors:[]}).success}},9536:(e,t,r)=>{"use strict";r.d(t,{h:()=>_});var n=r(8981),i=r(3204),s=r(9827),a=r(3809);let o=[(0,a.WH)("tcp").code,(0,a.WH)("dns").code,(0,a.WH)("dnsaddr").code,(0,a.WH)("dns4").code,(0,a.WH)("dns6").code];function l(e){return u("sni",e)?.[1]}function c(e){let t=u("tcp",e)?.[1];return null==t?"":`:${t}`}function u(e,t){let r;try{r=(0,a.WH)(e).code}catch(e){return}for(let[e,n]of t)if(e===r&&null!=n)return[e,n]}function d(e){return e.some(([e,t])=>e===(0,a.WH)("tls").code)}function h(e,t,r){let n=f[(0,a.WH)(e).name];if(null==n)throw Error(`Can't interpret protocol ${(0,a.WH)(e).name}`);let i=n(t,r);return e===(0,a.WH)("ip6").code?`[${i}]`:i}let f={ip4:(e,t)=>e,ip6:(e,t)=>0===t.length?e:`[${e}]`,tcp:(e,t)=>{let r=t.pop();if(null==r)throw Error("Unexpected end of multiaddr");return`tcp://${h(r[0],r[1]??"",t)}:${e}`},udp:(e,t)=>{let r=t.pop();if(null==r)throw Error("Unexpected end of multiaddr");return`udp://${h(r[0],r[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{let r=t.pop();if(null==r)throw Error("Unexpected end of multiaddr");return`${h(r[0],r[1]??"",t)}`},p2p:(e,t)=>{let r=t.pop();if(null==r)throw Error("Unexpected end of multiaddr");return`${h(r[0],r[1]??"",t)}`},http:(e,t)=>{let r=d(t),n=l(t),i=c(t);if(r&&null!=n)return`https://${n}${i}`;let s=t.pop();if(null==s)throw Error("Unexpected end of multiaddr");let a=h(s[0],s[1]??"",t);return a=a.replace("tcp://",""),`${r?"https://":"http://"}${a}`},"http-path":(e,t)=>{let r=t.pop();if(null==r)throw Error("Unexpected end of multiaddr");let n=h(r[0],r[1]??"",t),i=decodeURIComponent(e);return`${n}/${i}`},tls:(e,t)=>{let r=t.pop();if(null==r)throw Error("Unexpected end of multiaddr");return h(r[0],r[1]??"",t)},sni:(e,t)=>{let r=t.pop();if(null==r)throw Error("Unexpected end of multiaddr");return h(r[0],r[1]??"",t)},https:(e,t)=>{let r=t.pop();if(null==r)throw Error("Unexpected end of multiaddr");let n=h(r[0],r[1]??"",t);return n=n.replace("tcp://",""),`https://${n}`},ws:(e,t)=>{let r=d(t),n=l(t),i=c(t);if(r&&null!=n)return`wss://${n}${i}`;let s=t.pop();if(null==s)throw Error("Unexpected end of multiaddr");let a=h(s[0],s[1]??"",t);return a=a.replace("tcp://",""),`${r?"wss://":"ws://"}${a}`},wss:(e,t)=>{let r=t.pop();if(null==r)throw Error("Unexpected end of multiaddr");let n=h(r[0],r[1]??"",t);return n=n.replace("tcp://",""),`wss://${n}`}},p=async e=>{if(e.readyState>=2)throw Error("socket closed");1!==e.readyState&&await new Promise((t,r)=>{function n(){e.removeEventListener("open",i),e.removeEventListener("error",s)}function i(){n(),t()}function s(t){n(),r(t.error??Error(`connect ECONNREFUSED ${e.url}`))}e.addEventListener("open",i),e.addEventListener("error",s)})},g=(e,t)=>((t=t??{}).closeOnEnd=!1!==t.closeOnEnd,async r=>{for await(let t of r){try{await p(e)}catch(e){if("socket closed"===e.message)break;throw e}if(e.readyState===e.CLOSING||e.readyState===e.CLOSED)break;e.send(t)}null!=t.closeOnEnd&&e.readyState<=1&&await new Promise((t,r)=>{e.addEventListener("close",e=>{e.wasClean||1006===e.code?t():r(Object.assign(Error("ws error"),{event:e}))}),setTimeout(()=>{e.close()})})});var m=r(3590),b=r(9865);function y(e){return e instanceof ArrayBuffer||e?.constructor?.name==="ArrayBuffer"&&"number"==typeof e?.byteLength}let x=e=>{let t;e.binaryType="arraybuffer";let r=async()=>{await new Promise((r,n)=>{if(i){r();return}if(null!=t){n(t);return}let s=t=>{e.removeEventListener("open",a),e.removeEventListener("error",o),t()},a=()=>{s(r)},o=t=>{s(()=>{n(t.error??Error(`connect ECONNREFUSED ${e.url}`))})};e.addEventListener("open",a),e.addEventListener("error",o)})},n=async function*(){let t=new m.PP(({push:t,stop:r,fail:n})=>{let i=e=>{let r=null;"string"==typeof e.data&&(r=(0,b.s)(e.data)),y(e.data)&&(r=new Uint8Array(e.data)),e.data instanceof Uint8Array&&(r=e.data),null!=r&&t(r)},s=e=>{n(e.error??Error("Socket error"))};return e.addEventListener("message",i),e.addEventListener("error",s),e.addEventListener("close",r),()=>{e.removeEventListener("message",i),e.removeEventListener("error",s),e.removeEventListener("close",r)}},{highWaterMark:1/0});for await(let e of(await r(),t))yield y(e)?new Uint8Array(e):e}(),i=1===e.readyState;return e.addEventListener("open",()=>{i=!0,t=null}),e.addEventListener("close",()=>{i=!1,t=null}),e.addEventListener("error",r=>{i||(t=r.error??Error(`connect ECONNREFUSED ${e.url}`))}),Object.assign(n,{connected:r})},w=(e,t)=>{t=t??{};let r=x(e),n=t.remoteAddress,i=t.remotePort;if(null!=e.url)try{let t=new URL(e.url);n=t.hostname,i=parseInt(t.port,10)}catch{}if(null==n||null==i)throw Error("Remote connection did not have address and/or port");return{sink:g(e,t),source:r,connected:async()=>{await r.connected()},close:async()=>{(e.readyState===e.CONNECTING||e.readyState===e.OPEN)&&await new Promise(t=>{e.addEventListener("close",()=>{t()}),e.close()})},destroy:()=>{null!=e.terminate?e.terminate():e.close()},remoteAddress:n,remotePort:i,socket:e}},v=WebSocket,A={"http:":"ws:","https:":"wss:"},E=(e,t)=>{if(e.startsWith("//")&&(e=`${t?.protocol??"ws:"}${e}`),e.startsWith("/")&&null!=t){let r=t.protocol??"ws:",n=t.host,i=null!=t.port&&n?.endsWith(`:${t.port}`)!==!0?`:${t.port}`:"";e=`${r}//${n}${i}${e}`}let r=new URL(e);for(let[e,t]of Object.entries(A))r.protocol===e&&(r.protocol=t);return r};var k=r(9608),P=r(608),S=r(9985),I=r(6458);class T{log;init;logger;metrics;components;constructor(e,t={}){this.log=e.logger.forComponent("libp2p:websockets"),this.logger=e.logger,this.components=e,this.init=t,null!=e.metrics&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_websockets_dialer_events_total",{label:"event",help:"Total count of WebSockets dialer events by type"})})}[n._J]=!0;[Symbol.toStringTag]="@libp2p/websockets";[i.Ch]=["@libp2p/transport"];async dial(e,t){this.log("dialing %s",e),t=t??{};let r=function(e,t,r){let n=r.logger.forComponent("libp2p:websockets:maconn"),i=r.metrics,a=r.metricPrefix??"",o={log:n,async sink(t){try{await e.sink(async function*(){for await(let e of t)e instanceof Uint8Array?yield e:yield e.subarray()}())}catch(e){"aborted"!==e.type&&n.error(e)}},source:e.source,remoteAddr:t,timeline:{open:Date.now()},async close(t={}){let r=Date.now();if(null==t.signal){let e=AbortSignal.timeout(500);t={...t,signal:e}}let i=()=>{let{host:e,port:t}=o.remoteAddr.toOptions();n("timeout closing stream to %s:%s after %dms, destroying it manually",e,t,Date.now()-r),this.abort(new s.lc("Socket close timeout"))};t.signal?.addEventListener("abort",i);try{await e.close()}catch(e){n.error("error closing WebSocket gracefully",e),this.abort(e)}finally{t.signal?.removeEventListener("abort",i),o.timeline.close=Date.now()}},abort(t){let{host:r,port:s}=o.remoteAddr.toOptions();n("timeout closing stream to %s:%s due to error",r,s,t),e.destroy(),o.timeline.close=Date.now(),i?.increment({[`${a}error`]:!0})}};return e.socket.addEventListener("close",()=>{i?.increment({[`${a}close`]:!0}),null==o.timeline.close&&(o.timeline.close=Date.now())},{once:!0}),o}(await this._connect(e,t),e,{logger:this.logger,metrics:this.metrics?.dialerEvents});this.log("new outbound connection %s",r.remoteAddr);let n=await t.upgrader.upgradeOutbound(r,t);return this.log("outbound connection %s upgraded",r.remoteAddr),n}async _connect(e,t){var r,n;t?.signal?.throwIfAborted();let i=e.toOptions();this.log("dialing %s:%s",i.host,i.port);let l=(0,k.A)(),c=(r=function(e,t){let r=(0,a.HZ)(e).stringTuples(),n=r.pop();if(null==n)throw Error("Unexpected end of multiaddr");let i=(0,a.WH)(n[0]),s=f[i.name];if(null==s)throw Error(`No interpreter found for ${i.name}`);let l=s(n[1]??"",r);return o.includes(n[0])&&(l=l.replace(/^.*:\/\//,""),l="443"===n[1]?`https://${l}`:`http://${l}`),(l.startsWith("http://")||l.startsWith("https://")||l.startsWith("ws://")||l.startsWith("wss://"))&&(l=new URL(l).toString()).endsWith("/")&&(l=l.substring(0,l.length-1)),l}(e),n=(n=this.init)??{},w(new v(E(r,"undefined"==typeof window?void 0:window.location).toString(),n.websocket),n));c.socket.addEventListener("error",()=>{let t=new s._r(`Could not connect to ${e.toString()}`);this.log.error("connection error:",t),this.metrics?.dialerEvents.increment({error:!0}),l.reject(t)});try{t.onProgress?.(new P.j("websockets:open-connection")),await (0,S.W)(Promise.race([c.connected(),l.promise]),t.signal)}catch(e){throw t.signal?.aborted&&this.metrics?.dialerEvents.increment({abort:!0}),c.close().catch(e=>{this.log.error("error closing raw socket",e)}),e}return this.log("connected %s",e),this.metrics?.dialerEvents.increment({connect:!0}),c}createListener(e){return function(){throw Error("WebSocket Servers can not be created in the browser!")}({logger:this.logger,events:this.components.events,metrics:this.components.metrics},{...this.init,...e})}listenFilter(e){return(e=Array.isArray(e)?e:[e],this.init?.filter!=null)?this.init?.filter(e):I.Q7(e)}dialFilter(e){return this.listenFilter(e)}}function _(e={}){return t=>new T(t,e)}},9571:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="6.14.4"},9578:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VoidSigner=t.AbstractSigner=void 0;let n=r(9111),i=r(2984),s=r(8662),a=r(8138);function o(e,t){if(e.provider)return e.provider;(0,s.assert)(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function l(e,t){let r=(0,a.copyRequest)(t);if(null!=r.to&&(r.to=(0,n.resolveAddress)(r.to,e)),null!=r.from){let t=r.from;r.from=Promise.all([e.getAddress(),(0,n.resolveAddress)(t,e)]).then(([e,t])=>((0,s.assertArgument)(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e))}else r.from=e.getAddress();return await (0,s.resolveProperties)(r)}class c{provider;constructor(e){(0,s.defineProperties)(this,{provider:e||null})}async getNonce(e){return o(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await l(this,e)}async populateTransaction(e){let t=o(this,"populateTransaction"),r=await l(this,e);null==r.nonce&&(r.nonce=await this.getNonce("pending")),null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));let n=await this.provider.getNetwork();if(null!=r.chainId){let t=(0,s.getBigInt)(r.chainId);(0,s.assertArgument)(t===n.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=n.chainId;let i=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null!=r.gasPrice&&(2===r.type||i)?(0,s.assertArgument)(!1,"eip-1559 transaction do not support gasPrice","tx",e):(0===r.type||1===r.type)&&i&&(0,s.assertArgument)(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(2===r.type||null==r.type)&&null!=r.maxFeePerGas&&null!=r.maxPriorityFeePerGas)r.type=2;else if(0===r.type||1===r.type){let e=await t.getFeeData();(0,s.assert)(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice)}else{let e=await t.getFeeData();if(null==r.type){if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas){if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,null!=r.gasPrice){let e=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=e,r.maxPriorityFeePerGas=e}else null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas)}else null!=e.gasPrice?((0,s.assert)(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice),r.type=0):(0,s.assert)(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"})}else(2===r.type||3===r.type||4===r.type)&&(null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}return await (0,s.resolveProperties)(r)}async populateAuthorization(e){let t=Object.assign({},e);return null==t.chainId&&(t.chainId=(await o(this,"getNetwork").getNetwork()).chainId),null==t.nonce&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return o(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return o(this,"call").call(await this.populateCall(e))}async resolveName(e){let t=o(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){let t=o(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;let n=i.Transaction.from(r);return await t.broadcastTransaction(await this.signTransaction(n))}authorize(e){(0,s.assert)(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}t.AbstractSigner=c;class u extends c{address;constructor(e,t){super(t),(0,s.defineProperties)(this,{address:e})}async getAddress(){return this.address}connect(e){return new u(this.address,e)}#ru(e,t){(0,s.assert)(!1,`VoidSigner cannot sign ${e}`,"UNSUPPORTED_OPERATION",{operation:t})}async signTransaction(e){this.#ru("transactions","signTransaction")}async signMessage(e){this.#ru("messages","signMessage")}async signTypedData(e,t,r){this.#ru("typed-data","signTypedData")}}t.VoidSigner=u},9593:(e,t,r)=>{"use strict";t.A=void 0;var n=r(4232),i=r(7876);t.A=function(e){var t=e.seed,r=e.className,s=e.size,a=void 0===s?8:s,o=e.scale,l=void 0===o?4:o,c=e.color,u=e.bgColor,d=e.spotColor,h=(0,n.useRef)(null),f=[,,,,],p=function(e){for(var t=0;t<f.length;t++)f[t]=0;for(var r=0;r<e.length;r++)f[r%4]=(f[r%4]<<5)-f[r%4]+e.charCodeAt(r)},g=function(){var e=f[0]^f[0]<<11;return f[0]=f[1],f[1]=f[2],f[2]=f[3],f[3]=f[3]^f[3]>>19^e^e>>8,(f[3]>>>0)/0x80000000},m=function(){var e=Math.floor(360*g()),t="".concat(60*g()+40,"%"),r="".concat((g()+g()+g()+g())*25,"%");return"hsl(".concat(e,",").concat(t,",").concat(r,")")},b=function(e){for(var t=Math.ceil(e/2),r=e-t,n=[],i=0;i<e;i++){for(var s=[],a=0;a<t;a++)s[a]=Math.floor(2.3*g());var o=s.slice(0,r);o.reverse(),s=s.concat(o);for(var l=0;l<s.length;l++)n.push(s[l])}return n},y=function(e,t,r,n,i){var s=Math.sqrt(e.length),a=s*r,o=h.current;if(o){o.width=a,o.height=a;var l=o.getContext("2d");if(l){l.fillStyle=n,l.fillRect(0,0,o.width,o.height),l.fillStyle=t;for(var c=0;c<e.length;c++)if(l.fillStyle=1===e[c]?t:i,e[c]){var u=Math.floor(c/s),d=c%s;l.fillRect(d*r,u*r,r,r)}}}},x=function(){p(t);var e=c||m(),r=u||m(),n=d||m();y(b(a||8),e,l||4,r,n)};return(0,n.useEffect)(function(){x()}),(0,i.jsx)("canvas",{ref:h,className:void 0===r?"identicon":r})}},9599:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PocketProvider=void 0;let n=r(8662),i=r(5188),s=r(9307),a=r(4822),o="62e1ad51b37b8e00394bda3b";class l extends a.JsonRpcProvider{applicationId;applicationSecret;constructor(e,t,r){null==e&&(e="mainnet");let i=s.Network.from(e);null==t&&(t=o),null==r&&(r=null),super(l.getRequest(i,t,r),i,{staticNetwork:i}),(0,n.defineProperties)(this,{applicationId:t,applicationSecret:r})}_getProvider(e){try{return new l(e,this.applicationId,this.applicationSecret)}catch(e){}return super._getProvider(e)}static getRequest(e,t,r){null==t&&(t=o);let s=new n.FetchRequest(`https://${function(e){switch(e){case"mainnet":return"eth-mainnet.gateway.pokt.network";case"goerli":return"eth-goerli.gateway.pokt.network";case"matic":return"poly-mainnet.gateway.pokt.network";case"matic-mumbai":return"polygon-mumbai-rpc.gateway.pokt.network"}(0,n.assertArgument)(!1,"unsupported network","network",e)}(e.name)}/v1/lb/${t}`);return s.allowGzip=!0,r&&s.setCredentials("",r),t===o&&(s.retryFunc=async(e,t,r)=>((0,i.showThrottleMessage)("PocketProvider"),!0)),s}isCommunityResource(){return this.applicationId===o}}t.PocketProvider=l},9608:(e,t,r)=>{"use strict";function n(){let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}r.d(t,{A:()=>n})},9698:(e,t,r)=>{e.exports=function(){let e=r(2079),t=r(3110),n=new(r(961)),i=r(1331),s="trace.js: ",a=this,o=[],l=5e3,c=-1,u=0,d=0,h=[],f=null,p=null,g=null,m=[],b=[],y=`<span class="${t.CLASS_LINEEND}">&bull;</span>`,x=`<span class="${t.CLASS_LINEEND}">&hellip;</span>`,w=`<span class="${t.CLASS_EMPTY}">&#120634;</span>`,v=function(){let e=function(e){m[i.ALT]=e,m[i.CAT]=e,m[i.REP]=e,m[i.TLS]=e,m[i.TBS]=e,m[i.TRG]=e,m[i.AND]=e,m[i.NOT]=e,m[i.BKR]=e,m[i.BKA]=e,m[i.BKN]=e,m[i.ABG]=e,m[i.AEN]=e},t=0;for(let e in a.filter.operators)t+=1;if(0===t){e(!1);return}for(let t in a.filter.operators){let r=t.toUpperCase();if("<ALL>"===r){e(!0);return}if("<NONE>"===r){e(!1);return}}for(let t in e(!1),a.filter.operators){let e=t.toUpperCase();if("ALT"===e)m[i.ALT]=!0===a.filter.operators[t];else if("CAT"===e)m[i.CAT]=!0===a.filter.operators[t];else if("REP"===e)m[i.REP]=!0===a.filter.operators[t];else if("AND"===e)m[i.AND]=!0===a.filter.operators[t];else if("NOT"===e)m[i.NOT]=!0===a.filter.operators[t];else if("TLS"===e)m[i.TLS]=!0===a.filter.operators[t];else if("TBS"===e)m[i.TBS]=!0===a.filter.operators[t];else if("TRG"===e)m[i.TRG]=!0===a.filter.operators[t];else if("BKR"===e)m[i.BKR]=!0===a.filter.operators[t];else if("BKA"===e)m[i.BKA]=!0===a.filter.operators[t];else if("BKN"===e)m[i.BKN]=!0===a.filter.operators[t];else if("ABG"===e)m[i.ABG]=!0===a.filter.operators[t];else if("AEN"===e)m[i.AEN]=!0===a.filter.operators[t];else throw Error(`${s}initOpratorFilter: '${t}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},A=function(){let e,t;let r=function(e){m[i.RNM]=e,m[i.UDT]=e;let t=p.length+g.length;b.length=0;for(let r=0;r<t;r+=1)b.push(e)},n=[];for(t=0;t<p.length;t+=1)n.push(p[t].lower);for(t=0;t<g.length;t+=1)n.push(g[t].lower);for(let t in b.length=0,e=0,a.filter.rules)e+=1;if(0===e){r(!0);return}for(let e in a.filter.rules){let t=e.toLowerCase();if("<all>"===t){r(!0);return}if("<none>"===t){r(!1);return}}for(let e in r(!1),m[i.RNM]=!0,m[i.UDT]=!0,a.filter.rules){let r=e.toLowerCase();if((t=n.indexOf(r))<0)throw Error(`${s}initRuleFilter: '${e}' not a valid rule or udt name`);b[t]=!0===a.filter.rules[e]}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(e,t){if(c=-1,"number"==typeof e&&e>0)l=Math.ceil(e);else{l=0;return}"number"==typeof t&&(c=Math.floor(t))<0&&(c=-1)},this.getMaxRecords=function(){return l},this.getLastRecord=function(){return c},this.init=function(e,t,r){o.length=0,h.length=0,u=0,d=0,f=r,p=e,g=t,v(),A(),n.init(l)};let E=function(e){let t=!1;return e.type===i.RNM?!!m[e.type]&&!!b[e.index]:e.type===i.UDT?!!m[e.type]&&!!b[p.length+e.index]:m[e.type]},k=function(e){return -1===c||!!(e<=c)};this.down=function(e,t,r,i,s,a){k(u)&&E(e)&&(h.push(u),o[n.increment()]={dirUp:!1,depth:d,thisLine:u,thatLine:void 0,opcode:e,state:t,phraseIndex:r,phraseLength:i,lookAnchor:s,lookAround:a},u+=1,d+=1)},this.up=function(e,t,r,i,s,a){if(k(u)&&E(e)){let l=u,c=h.pop(),f=n.getListIndex(c);-1!==f&&(o[f].thatLine=l),d-=1,o[n.increment()]={dirUp:!0,depth:d,thisLine:l,thatLine:c,opcode:e,state:t,phraseIndex:r,phraseLength:i,lookAnchor:s,lookAround:a},u+=1}};let P=function(){let t,r,s,a,l;function c(t,r){let n,s,a;if(r)switch(t.op={id:r.type,name:e.opcodeToString(r.type)},t.opData=void 0,r.type){case i.RNM:t.opData=p[r.index].name;break;case i.UDT:t.opData=g[r.index].name;break;case i.BKR:n=r.index<p.length?p[r.index].name:g[r.index-p.length].name,s=r.bkrCase===i.BKR_MODE_CI?"%i":"%s",a=r.bkrMode===i.BKR_MODE_UM?"%u":"%p",t.opData=`\\\\${s}${a}${n}`;break;case i.TLS:t.opData=[];for(let e=0;e<r.string.length;e+=1)t.opData.push(r.string[e]);break;case i.TBS:t.opData=[];for(let e=0;e<r.string.length;e+=1)t.opData.push(r.string[e]);break;case i.TRG:case i.REP:t.opData=[r.min,r.max];break;default:throw Error("unrecognized opcode")}else t.op={id:void 0,name:void 0},t.opData=void 0}function u(e,t,r){return e===i.MATCH?{index:t,length:r}:e===i.NOMATCH||e===i.EMPTY?{index:t,length:0}:null}let h=-1;function m(t,r,n){let i={id:h++,branch:-1,parent:t,up:!1,down:!1,depth:n,children:[]};return r?(i.down=!0,i.state={id:r.state,name:e.stateToString(r.state)},i.phrase=null,c(i,r.opcode)):(i.state={id:void 0,name:void 0},i.phrase=u(),c(i,void 0)),i}function b(t,r){r&&(t.up=!0,t.state={id:r.state,name:e.stateToString(r.state)},t.phrase=u(r.state,r.phraseIndex,r.phraseLength),t.down||c(t,r.opcode))}let y=0,x=-1,w=1,v=[],A=!0,E=m(null,null,-1);for(v.push(E),r=E,n.forEach(e=>{if(a=o[e],A&&(A=!1,a.depth>0)){let e=a.dirUp?a.depth+1:a.depth;for(let t=0;t<e;t+=1)s=r,r=m(r,null,t),v.push(r),s.children.push(r)}a.dirUp?(b(r=v.pop(),a),r=v[v.length-1]):(s=r,r=m(r,a,a.depth),v.push(r),s.children.push(r))});v.length>1;)b(r=v.pop(),null);if(0===E.children.length)throw Error("trace.toTree(): parse tree has no nodes");if(0===v.length)throw Error("trace.toTree(): integrity check: dummy root node disappeared?");let k=t=E.children[0];for(;t&&!t.down&&!t.up;)k=t,t=t.children[0];(t=k).leftMost=!0,t.rightMost=!0,function e(t){if(x+=1,t.branch=w,x>d&&(d=x),0===t.children.length)y+=1;else for(let r=0;r<t.children.length;r+=1)r>0&&(w+=1),t.children[r].leftMost=!1,t.children[r].rightMost=!1,t.leftMost&&(t.children[r].leftMost=0===r),t.rightMost&&(t.children[r].rightMost=r===t.children.length-1),e(t.children[r]);x-=1}(t),t.branch=0;let P={};P.string=[];for(let e=0;e<f.length;e+=1)P.string[e]=f[e];P.rules=[];for(let e=0;e<p.length;e+=1)P.rules[e]=p[e].name;P.udts=[];for(let e=0;e<g.length;e+=1)P.udts[e]=g[e].name;return P.id={},P.id.ALT={id:i.ALT,name:"ALT"},P.id.CAT={id:i.CAT,name:"CAT"},P.id.REP={id:i.REP,name:"REP"},P.id.RNM={id:i.RNM,name:"RNM"},P.id.TLS={id:i.TLS,name:"TLS"},P.id.TBS={id:i.TBS,name:"TBS"},P.id.TRG={id:i.TRG,name:"TRG"},P.id.UDT={id:i.UDT,name:"UDT"},P.id.AND={id:i.AND,name:"AND"},P.id.NOT={id:i.NOT,name:"NOT"},P.id.BKR={id:i.BKR,name:"BKR"},P.id.BKA={id:i.BKA,name:"BKA"},P.id.BKN={id:i.BKN,name:"BKN"},P.id.ABG={id:i.ABG,name:"ABG"},P.id.AEN={id:i.AEN,name:"AEN"},P.id.ACTIVE={id:i.ACTIVE,name:"ACTIVE"},P.id.MATCH={id:i.MATCH,name:"MATCH"},P.id.EMPTY={id:i.EMPTY,name:"EMPTY"},P.id.NOMATCH={id:i.NOMATCH,name:"NOMATCH"},P.treeDepth=d,P.leafNodes=y,P.branchesIncomplete=t.down?t.up?"none":"right":t.up?"left":"both",P.tree=function e(t,r){let n;let i={};if(i.id=t.id,i.branch=t.branch,i.leftMost=t.leftMost,i.rightMost=t.rightMost,n=t.state.name?t.state.name:"ACTIVE",i.state={id:t.state.id,name:n},n=t.op.name?t.op.name:"?",i.op={id:t.op.id,name:n},"string"==typeof t.opData)i.opData=t.opData;else if(Array.isArray(t.opData)){i.opData=[];for(let e=0;e<t.opData.length;e+=1)i.opData[e]=t.opData[e]}else i.opData=void 0;t.phrase?i.phrase={index:t.phrase.index,length:t.phrase.length}:i.phrase=null,i.depth=t.depth,i.children=[];for(let n=0;n<t.children.length;n+=1){let s=n!==t.children.length-1;i.children[n]=e(t.children[n],r,s)}return i}(t,t.depth,!1),P};this.toTree=function(e){let t=P();return e?JSON.stringify(t):t},this.toHtmlPage=function(t,r,n){return e.htmlToPage(this.toHtml(t,r),n)};let S=function(e,r){let n;switch(e){case 16:n="hexadecimal";break;case 10:n="decimal";break;case 8:n="ASCII";break;case 32:n="UNICODE";break;default:throw Error(`${s}htmlHeader: unrecognized mode: ${e}`)}let i="";return i+=`<p>display mode: ${n}</p>
<table class="${t.CLASS_TRACE}">
`,"string"==typeof r&&(i+=`<caption>${r}</caption>`),i},I=function(){let e="";return e+`</table>
<p class="${t.CLASS_MONOSPACE}">legend:<br>
(a)&nbsp;-&nbsp;line number<br>
(b)&nbsp;-&nbsp;matching line number<br>
(c)&nbsp;-&nbsp;phrase offset<br>
(d)&nbsp;-&nbsp;phrase length<br>
(e)&nbsp;-&nbsp;tree depth<br>
(f)&nbsp;-&nbsp;operator state<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to 80 characters of the phrase being matched<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_MATCH}">matched characters</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${w} empty string<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${y} end of input string<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${x} input string display truncated<br>
</p>
<p class="${t.CLASS_MONOSPACE}">
<sup>&dagger;</sup>original ABNF operators:<br>
ALT - alternation<br>
CAT - concatenation<br>
REP - repetition<br>
RNM - rule name<br>
TRG - terminal range<br>
TLS - terminal literal string (case insensitive)<br>
TBS - terminal binary string (case sensitive)<br>
<br>
<sup>&Dagger;</sup>super set SABNF operators:<br>
UDT - user-defined terminal<br>
AND - positive look ahead<br>
NOT - negative look ahead<br>
BKA - positive look behind<br>
BKN - negative look behind<br>
BKR - back reference<br>
ABG - anchor - begin of input string<br>
AEN - anchor - end of input string<br>
</p>
`};this.indent=function(e){let t="";for(let r=0;r<e;r+=1)t+=".";return t};let T=function(e,t){let r="";if(t.type===i.TRG){if(16===e||32===e){let n=t.min.toString(16).toUpperCase();n.length%2!=0&&(n=`0${n}`),r+=16===e?"%x":"U+",r+=n,(n=t.max.toString(16).toUpperCase()).length%2!=0&&(n=`0${n}`),r+=`&ndash;${n}`}else r=`%d${t.min.toString(10)}&ndash;${t.max.toString(10)}`}return r},_=function(e,t){let r="";if(t.type===i.REP){if(16===e){let e=t.min.toString(16).toUpperCase();e.length%2!=0&&(e=`0${e}`),r=`x${e}`,t.max<1/0?(e=t.max.toString(16).toUpperCase()).length%2!=0&&(e=`0${e}`):e="inf",r+=`&ndash;${e}`}else r=t.max<1/0?`${t.min.toString(10)}&ndash;${t.max.toString(10)}`:`${t.min.toString(10)}&ndash;inf`}return r},C=function(e,t){let r="";if(t.type===i.TBS){let n=Math.min(t.string.length,10);if(16===e||32===e){r+=16===e?"%x":"U+";for(let e=0;e<n;e+=1){let n;e>0&&(r+="."),(n=t.string[e].toString(16).toUpperCase()).length%2!=0&&(n=`0${n}`),r+=n}}else{r="%d";for(let e=0;e<n;e+=1)e>0&&(r+="."),r+=t.string[e].toString(10)}n<t.string.length&&(r+=x)}return r},O=function(t,r){let n="";if(r.type===i.TLS){let i=Math.min(r.string.length,5);if(16===t||10===t){let e,s,a;16===t?(n="%x",a=16):(n="%d",a=10);for(let t=0;t<i;t+=1)t>0&&(n+="."),(s=r.string[t])>=97&&s<=122?(e=s-32,n+=`${e.toString(a)}/${s.toString(a)}`.toUpperCase()):s>=65&&s<=90?(e=s,s+=32,n+=`${e.toString(a)}/${s.toString(a)}`.toUpperCase()):n+=s.toString(a).toUpperCase();i<r.string.length&&(n+=x)}else{n='"';for(let t=0;t<i;t+=1)n+=e.asciiChars[r.string[t]];i<r.string.length&&(n+=x),n+='"'}}return n},R=function(t,r,n,i,s){if(0===i)return"";let a="",o=s?",":"";switch(t){case 16:a=o+e.charsToHex(r,n,i);break;case 10:if(s)return`,${e.charsToDec(r,n,i)}`;a=o+e.charsToDec(r,n,i);break;case 32:a=e.charsToUnicode(r,n,i);break;default:a=e.charsToAsciiHtml(r,n,i)}return a},N=function(e,r,n,s,a,o){let l,c,u,d,h="",f=y,p=`<span class="${t.CLASS_LOOKBEHIND}">`,g=`<span class="${t.CLASS_REMAINDER}">`,m="</span>",b=!1;switch(n){case i.EMPTY:h+=w;case i.NOMATCH:case i.MATCH:case i.ACTIVE:c=o-(l=s-a),u=o,d=r.length-u;break;default:throw Error("unrecognized state")}return f=y,c>80?(c=80,f=x,d=0):c+d>80&&(f=x,d=80-c),c>0&&(h+=p,h+=R(e,r,l,c,b),h+=m,b=!0),d>0&&(h+=g,h+=R(e,r,u,d,b),h+=m),h+f},M=function(e,r,n,s,a,o){let l,c,u,d,h="",f=y,p=`<span class="${t.CLASS_REMAINDER}">`,g="</span>",m=!1;switch(n){case i.EMPTY:h+=w;case i.NOMATCH:case i.ACTIVE:l=s,c=0,u=s,d=r.length-u;break;case i.MATCH:l=s,u=s+(c=a),d=r.length-u;break;default:throw Error("unrecognized state")}return f=y,c>80?(c=80,f=x,d=0):c+d>80&&(f=x,d=80-c),c>0&&(h+=o,h+=R(e,r,l,c,m),h+=g,m=!0),d>0&&(h+=p,h+=R(e,r,u,d,m),h+=g),h+f},B=function(r){let s,l,c,u,d,h;if(null===p)return"";let m="";return m+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",m+="<th>operator</th><th>phrase</th></tr>\n",n.forEach(n=>{var b,y,x,w;let v=o[n];switch(s=v.thisLine,l=void 0!==v.thatLine?v.thatLine:"--",c=!1,u=!1,d=!1,v.lookAround===i.LOOKAROUND_AHEAD&&(c=!0,d=!0,h=v.lookAnchor),(v.opcode.type===i.AND||v.opcode.type===i.NOT)&&(c=!0,d=!0,h=v.phraseIndex),v.lookAround===i.LOOKAROUND_BEHIND&&(u=!0,d=!0,h=v.lookAnchor),(v.opcode.type===i.BKA||v.opcode.type===i.BKN)&&(u=!0,d=!0,h=v.phraseIndex),m+="<tr>",m+=`<td>${s}</td><td>${l}</td>`,m+=`<td>${v.phraseIndex}</td>`,m+=`<td>${v.phraseLength}</td>`,m+=`<td>${v.depth}</td>`,m+="<td>",v.state){case i.ACTIVE:m+=`<span class="${t.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case i.MATCH:m+=`<span class="${t.CLASS_MATCH}">&uarr;M</span>`;break;case i.NOMATCH:m+=`<span class="${t.CLASS_NOMATCH}">&uarr;N</span>`;break;case i.EMPTY:m+=`<span class="${t.CLASS_EMPTY}">&uarr;E</span>`;break;default:m+=`<span class="${t.CLASS_ACTIVE}">--</span>`}if(m+="</td>",m+="<td>",m+=a.indent(v.depth),c?m+=`<span class="${t.CLASS_LOOKAHEAD}">`:u&&(m+=`<span class="${t.CLASS_LOOKBEHIND}">`),m+=e.opcodeToString(v.opcode.type),v.opcode.type===i.RNM&&(m+=`(${p[v.opcode.index].name}) `),v.opcode.type===i.BKR){let e=v.opcode.bkrCase===i.BKR_MODE_CI?"%i":"%s",t=v.opcode.bkrMode===i.BKR_MODE_UM?"%u":"%p";m+=`(\\${e}${t}${p[v.opcode.index].name}) `}(v.opcode.type===i.UDT&&(m+=`(${g[v.opcode.index].name}) `),v.opcode.type===i.TRG&&(m+=`(${T(r,v.opcode)}) `),v.opcode.type===i.TBS&&(m+=`(${C(r,v.opcode)}) `),v.opcode.type===i.TLS&&(m+=`(${O(r,v.opcode)}) `),v.opcode.type===i.REP&&(m+=`(${_(r,v.opcode)}) `),d&&(m+="</span>"),m+="</td>",m+="<td>",u)?m+=N(r,f,v.state,v.phraseIndex,v.phraseLength,h):c?m+=(b=f,y=v.state,M(r,b,y,v.phraseIndex,v.phraseLength,`<span class="${t.CLASS_LOOKAHEAD}">`)):m+=(x=f,w=v.state,M(r,x,w,v.phraseIndex,v.phraseLength,`<span class="${t.CLASS_MATCH}">`)),m+="</td></tr>\n"}),m+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",m+="<th>operator</th><th>phrase</th></tr>\n",m+="</table>\n"};this.toHtml=function(e,t){let r=8;if("string"==typeof e&&e.length>=3){let t=e.toLowerCase().slice(0,3);"hex"===t?r=16:"dec"===t?r=10:"uni"===t&&(r=32)}let n="";return n+=S(r,t),n+=B(r),n+=I()}}},9700:(e,t,r)=>{"use strict";r.d(t,{TO:()=>h});var n=r(5587),i=r(4503),s=r(5839),a=r(3751),o=r(4057),l=r(3321);function c(e,t){let{bytes:r,version:i}=e;return 0===i?function(e,t,r){let{prefix:n}=r;if(n!==s.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let i=r.encode(e).slice(1);return t.set(n,i),i}}(r,d(e),t??s.base58btc.encoder):function(e,t,r){let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let i=r.encode(e);return t.set(n,i),i}}(r,d(e),t??n.base32.encoder)}let u=new WeakMap;function d(e){let t=u.get(e);if(null==t){let t=new Map;return u.set(e,t),t}return t}class h{code;version;multihash;bytes;"/";constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==f)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==p)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return h.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=o.vt(e,t);return h.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return h.equals(this,e)}static equals(e,t){return null!=t&&e.code===t.code&&e.version===t.version&&o.aI(e.multihash,t.multihash)}toString(e){return c(this,e)}toJSON(){return{"/":c(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;if(e instanceof h)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new h(t,r,n,i??g(t,r,n.bytes))}if(!0!==e[m])return null;{let{version:t,multihash:r,code:n}=e,i=o.D4(r);return h.create(t,n,i)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw Error("Invalid digest");switch(e){case 0:if(t===f)return new h(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${f}) block encoding`);case 1:{let n=g(e,t,r.bytes);return new h(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return h.create(0,f,e)}static createV1(e,t){return h.create(1,e,t)}static decode(e){let[t,r]=h.decodeFirst(e);if(0!==r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=h.inspectBytes(e),r=t.size-t.multihashSize,n=(0,a.au)(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new o.np(t.multihashCode,t.digestSize,i,n);return[0===t.version?h.createV0(s):h.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=l.D4(e.subarray(t));return t+=n,r},n=r(),i=f;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,a=r(),o=r(),c=t+o;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:c-s,size:c}}static parse(e,t){let[r,a]=function(e,t){switch(e[0]){case"Q":{let r=t??s.base58btc;return[s.base58btc.prefix,r.decode(`${s.base58btc.prefix}${e}`)]}case s.base58btc.prefix:{let r=t??s.base58btc;return[s.base58btc.prefix,r.decode(e)]}case n.base32.prefix:{let r=t??n.base32;return[n.base32.prefix,r.decode(e)]}case i.base36.prefix:{let r=t??i.base36;return[i.base36.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}(e,t),o=h.decode(a);if(0===o.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return d(o).set(r,e),o}}let f=112,p=18;function g(e,t,r){let n=l.OY(e),i=n+l.OY(t),s=new Uint8Array(i+r.byteLength);return l.s_(e,s,0),l.s_(t,s,n),s.set(r,i),s}let m=Symbol.for("@ipld/js-cid/CID")},9737:(e,t,r)=>{"use strict";r.d(t,{tD:()=>tC});var n,i,s,a,o,l,c,u,d,h,f,p,g=r(3204),m=r(1436),b=r(2577),y=r(847),x=r(4319);let w=(0,b.vF)("libp2p:simple-metrics");class v{value=0;calculate;constructor(e){this.calculate=e?.calculate}async collect(){return null!=this.calculate?this.calculate():this.value}update(e){this.value=e}increment(e=1){this.value+=e}decrement(e=1){this.value-=e}reset(){this.value=0}timer(){let e=Date.now();return()=>{this.value=Date.now()-e}}}class A{values={};calculate;constructor(e){this.calculate=e?.calculate}async collect(){return null!=this.calculate?this.calculate():this.values}update(e){Object.entries(e).forEach(([e,t])=>{this.values[e]=t})}increment(e){Object.entries(e).forEach(([e,t])=>{this.values[e]=this.values[e]??0,this.values[e]+=Number("number"==typeof t?t:1)})}decrement(e){Object.entries(e).forEach(([e,t])=>{this.values[e]=this.values[e]??0,this.values[e]-=Number("number"==typeof t?t:1)})}reset(){this.values={}}timer(e){let t=Date.now();return()=>{this.values[e]=Date.now()-t}}}class E{bucketValues=new Map;countValue=0;sumValue=0;calculate;constructor(e){for(let t of[...e?.buckets??[.005,.01,.025,.05,.1,.25,.5,1,2.5,5,10],1/0])this.bucketValues.set(t,0);this.calculate=e?.calculate}async collect(){return null!=this.calculate&&this.observe(await this.calculate()),{count:this.countValue,sum:this.sumValue,buckets:{...this.bucketValues}}}observe(e){for(let[t,r]of(this.countValue++,this.sumValue+=e,this.bucketValues.entries()))e<=t&&this.bucketValues.set(t,r+1)}reset(){for(let e of(this.countValue=0,this.sumValue=0,this.bucketValues.keys()))this.bucketValues.set(e,0)}timer(){let e=Date.now();return()=>{this.observe(Date.now()-e)}}}class k{histograms={};calculate;constructor(e){this.histograms={},this.calculate=e?.calculate}async collect(){let e={};for(let[t,r]of Object.entries(this.histograms))e[t]=await r.collect();return e}observe(e){for(let[t,r]of Object.entries(e))void 0===this.histograms[t]&&(this.histograms[t]=new E),this.histograms[t].observe(r)}reset(){for(let e of Object.values(this.histograms))e.reset()}timer(e){let t=Date.now();return()=>{this.observe({[e]:Date.now()-t})}}}class P{sumValue=0;countValue=0;percentiles;tdigest=new x.TDigest(.01);compressCount;calculate;constructor(e){this.percentiles=e?.percentiles??[.01,.05,.5,.9,.95,.99,.999],this.compressCount=e?.compressCount??1e3,this.calculate=e?.calculate}async collect(){return null!=this.calculate&&this.observe(await this.calculate()),{count:this.countValue,sum:this.sumValue,percentiles:Object.fromEntries(this.percentiles.map(e=>[e,this.tdigest.percentile(e)]))}}observe(e){this.sumValue+=e,this.countValue++,this.tdigest.push(e),this.tdigest.size()>this.compressCount&&this.tdigest.compress()}reset(){this.sumValue=0,this.countValue=0,this.tdigest.reset()}timer(){let e=Date.now();return()=>{this.observe(Date.now()-e)}}}class S{summaries={};opts;constructor(e){this.summaries={},this.opts=e}async collect(){return{...Object.fromEntries(Object.entries(this.summaries).map(([e,t])=>[e,{count:t.countValue,sum:t.sumValue,percentiles:Object.fromEntries(t.percentiles.map(e=>[e,t.tdigest.percentile(e)]))}]))}}observe(e){for(let[t,r]of Object.entries(e))void 0===this.summaries[t]&&(this.summaries[t]=new P(this.opts)),this.summaries[t].observe(r)}reset(){for(let e of Object.values(this.summaries))e.reset()}timer(e){let t=Date.now();return()=>{this.observe({[e]:Date.now()-t})}}}class I{metrics=new Map;transferStats;started;interval;intervalMs;onMetrics;log;constructor(e,t){this.log=e.logger.forComponent("libp2p:simple-metrics"),this.started=!1,this._emitMetrics=this._emitMetrics.bind(this),this.intervalMs=t.intervalMs??1e3,this.onMetrics=t.onMetrics,this.transferStats=new Map}[Symbol.toStringTag]="@libp2p/metrics-simple";[g.Ch]=["@libp2p/metrics"];isStarted(){return this.started}start(){this.started=!0,this.interval=setInterval(this._emitMetrics,this.intervalMs)}stop(){this.started=!1,clearInterval(this.interval),this.transferStats.clear()}_emitMetrics(){Promise.resolve().then(async()=>{let e={};for(let[t,r]of this.metrics.entries())e[t]=await r.collect();this.onMetrics(structuredClone(e))}).catch(e=>{w.error("could not invoke onMetrics callback",e)})}_incrementValue(e,t){let r=this.transferStats.get(e)??0;this.transferStats.set(e,r+t)}_track(e,t){let r=this,n=e.sink;e.sink=async function(e){await n((0,y.A)(e,e=>{r._incrementValue(`${t} sent`,e.byteLength)}))};let i=e.source;e.source=(0,y.A)(i,e=>{r._incrementValue(`${t} received`,e.byteLength)})}trackMultiaddrConnection(e){this._track(e,"global")}trackProtocolStream(e,t){null!=e.protocol&&this._track(e,e.protocol)}registerMetric(e,t={}){if(null==e||""===e.trim())throw Error("Metric name is required");let r=this.metrics.get(e);return null!=r?this.log("reuse existing metric",e):(r=new v(t),this.metrics.set(e,r)),r}registerMetricGroup(e,t={}){if(null==e||""===e.trim())throw Error("Metric name is required");let r=this.metrics.get(e);return null!=r?this.log("reuse existing metric",e):(r=new A(t),this.metrics.set(e,r)),r}registerCounter(e,t={}){if(null==e||""===e.trim())throw Error("Metric name is required");let r=this.metrics.get(e);return null!=r?this.log("reuse existing metric",e):(r=new v(t),this.metrics.set(e,r)),r}registerCounterGroup(e,t={}){if(null==e||""===e.trim())throw Error("Metric name is required");let r=this.metrics.get(e);return null!=r?this.log("reuse existing metric",e):(r=new A(t),this.metrics.set(e,r)),r}registerHistogram(e,t={}){if(null==e||""===e.trim())throw Error("Metric name is required");let r=this.metrics.get(e);return null!=r?this.log("reuse existing metric",e):(r=new E(t),this.metrics.set(e,r)),r}registerHistogramGroup(e,t={}){if(null==e||""===e.trim())throw Error("Metric name is required");let r=this.metrics.get(e);return null!=r?this.log("reuse existing metric",e):(r=new k(t),this.metrics.set(e,r)),r}registerSummary(e,t={}){if(null==e||""===e.trim())throw Error("Metric name is required");let r=this.metrics.get(e);return null!=r?this.log("reuse existing metric",e):(r=new P(t),this.metrics.set(e,r)),r}registerSummaryGroup(e,t={}){if(null==e||""===e.trim())throw Error("Metric name is required");let r=this.metrics.get(e);return null!=r?this.log("reuse existing metric",e):(r=new S(t),this.metrics.set(e,r)),r}createTrace(){}traceFunction(e,t){return t}}var T=r(4113),_=r(1643),C=r(4814),O=r(8934),R=r(4195);let N=(e=21)=>{let t="",r=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&r[e]];return t};var M=r(9608),B=r(9985);class D extends Error{constructor(e="Method not found"){super(e),this.name="MethodNotFoundError"}}class L extends Error{constructor(e="Invocation target was not a function"){super(e),this.name="InvalidMethodError"}}class U extends Error{constructor(e="Unsupported value type"){super(e),this.name="UnsupportedValueTypeError"}}class F extends Error{constructor(e="Cannot reuse RPC target name"){super(e),this.name="DuplicateTargetNameError"}}class j extends Error{constructor(e="Duplicate scope"){super(e),this.name="DuplicateScopeError"}}class z extends Error{constructor(e="Invalid return type"){super(e),this.name="InvalidReturnTypeError"}}class H extends Error{constructor(e="Invocation target was not a function"){super(e),this.name="InvalidInvocationTypeError"}}class G extends Error{constructor(e="Parent invocation scope not found"){super(e),this.name="MissingParentScopeError"}}class $ extends Error{constructor(e="Invocation not found"){super(e),this.name="MissingInvocationError"}}class V extends Error{constructor(e="Callback not found"){super(e),this.name="MissingCallbackError"}}class q extends Error{constructor(e="Not connected"){super(e),this.name="NotConnectedError"}}class K extends Error{constructor(e="Timeout"){super(e),this.name="TimeoutError"}}var W=r(6038),Q=r(1970);!function(e){e.invokeMethod="invokeMethod",e.methodResolved="methodResolved",e.methodRejected="methodRejected",e.invokeGeneratorMethod="invokeGeneratorMethod",e.abortMethodInvocation="abortMethodInvocation",e.invokeCallback="invokeCallback",e.callbackResolved="callbackResolved",e.callbackRejected="callbackRejected",e.abortCallbackInvocation="abortCallbackInvocation"}(n||(n={})),function(e){e[e.invokeMethod=0]="invokeMethod",e[e.methodResolved=1]="methodResolved",e[e.methodRejected=2]="methodRejected",e[e.invokeGeneratorMethod=3]="invokeGeneratorMethod",e[e.abortMethodInvocation=4]="abortMethodInvocation",e[e.invokeCallback=5]="invokeCallback",e[e.callbackResolved=6]="callbackResolved",e[e.callbackRejected=7]="callbackRejected",e[e.abortCallbackInvocation=8]="abortCallbackInvocation"}(i||(i={})),(n||(n={})).codec=()=>(0,W.eG)(i),function(e){let t;e.codec=()=>(null==t&&(t=(0,W.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.type&&0!==e.type&&(t.uint32(8),t.uint32(e.type)),null!=e.value&&(t.uint32(18),t.bytes(e.value)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={type:0},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.type=e.uint32();break;case 2:n.value=e.bytes();break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,W.mH)(t,e.codec()),e.decode=(t,r)=>(0,W.Y8)(t,e.codec(),r)}(s||(s={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,W.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.type&&0!==i[e.type]&&(t.uint32(8),n.codec().encode(e.type,t)),null!=e.message&&e.message.byteLength>0&&(t.uint32(18),t.bytes(e.message)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let i={type:n.invokeMethod,message:(0,Q.c)(0)},s=null==t?e.len:e.pos+t;for(;e.pos<s;){let t=e.uint32();switch(t>>>3){case 1:i.type=n.codec().decode(e);break;case 2:i.message=e.bytes();break;default:e.skipType(7&t)}}return i})),t),e.encode=t=>(0,W.mH)(t,e.codec()),e.decode=(t,r)=>(0,W.Y8)(t,e.codec(),r)}(a||(a={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,W.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.scope&&""!==e.scope&&(t.uint32(10),t.string(e.scope)),null!=e.path&&""!==e.path&&(t.uint32(18),t.string(e.path)),null!=e.args)for(let r of e.args)t.uint32(26),s.codec().encode(r,t);!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={scope:"",path:"",args:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.scope=e.string();break;case 2:n.path=e.string();break;case 3:if(r.limits?.args!=null&&n.args.length===r.limits.args)throw new W.zH('Decode error - map field "args" had too many elements');n.args.push(s.codec().decode(e,e.uint32(),{limits:r.limits?.args$}));break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,W.mH)(t,e.codec()),e.decode=(t,r)=>(0,W.Y8)(t,e.codec(),r)}(o||(o={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,W.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.scope&&""!==e.scope&&(t.uint32(10),t.string(e.scope)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={scope:""},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();t>>>3==1?n.scope=e.string():e.skipType(7&t)}return n})),t),e.encode=t=>(0,W.mH)(t,e.codec()),e.decode=(t,r)=>(0,W.Y8)(t,e.codec(),r)}(l||(l={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,W.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.scope&&""!==e.scope&&(t.uint32(10),t.string(e.scope)),null!=e.value&&(t.uint32(18),s.codec().encode(e.value,t)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={scope:""},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.scope=e.string();break;case 2:n.value=s.codec().decode(e,e.uint32(),{limits:r.limits?.value});break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,W.mH)(t,e.codec()),e.decode=(t,r)=>(0,W.Y8)(t,e.codec(),r)}(c||(c={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,W.iU)((e,t,r={})=>{!1!==r.lengthDelimited&&t.fork(),null!=e.scope&&""!==e.scope&&(t.uint32(10),t.string(e.scope)),null!=e.error&&(t.uint32(18),s.codec().encode(e.error,t)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={scope:""},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.scope=e.string();break;case 2:n.error=s.codec().decode(e,e.uint32(),{limits:r.limits?.error});break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,W.mH)(t,e.codec()),e.decode=(t,r)=>(0,W.Y8)(t,e.codec(),r)}(u||(u={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,W.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.scope&&""!==e.scope&&(t.uint32(10),t.string(e.scope)),null!=e.parents)for(let r of e.parents)t.uint32(18),t.string(r);if(null!=e.callback&&""!==e.callback&&(t.uint32(26),t.string(e.callback)),null!=e.args)for(let r of e.args)t.uint32(34),s.codec().encode(r,t);!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={scope:"",parents:[],callback:"",args:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.scope=e.string();break;case 2:if(r.limits?.parents!=null&&n.parents.length===r.limits.parents)throw new W.zH('Decode error - map field "parents" had too many elements');n.parents.push(e.string());break;case 3:n.callback=e.string();break;case 4:if(r.limits?.args!=null&&n.args.length===r.limits.args)throw new W.zH('Decode error - map field "args" had too many elements');n.args.push(s.codec().decode(e,e.uint32(),{limits:r.limits?.args$}));break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,W.mH)(t,e.codec()),e.decode=(t,r)=>(0,W.Y8)(t,e.codec(),r)}(d||(d={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,W.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.scope&&""!==e.scope&&(t.uint32(10),t.string(e.scope)),null!=e.parents)for(let r of e.parents)t.uint32(18),t.string(r);!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={scope:"",parents:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.scope=e.string();break;case 2:if(r.limits?.parents!=null&&n.parents.length===r.limits.parents)throw new W.zH('Decode error - map field "parents" had too many elements');n.parents.push(e.string());break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,W.mH)(t,e.codec()),e.decode=(t,r)=>(0,W.Y8)(t,e.codec(),r)}(h||(h={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,W.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.scope&&""!==e.scope&&(t.uint32(10),t.string(e.scope)),null!=e.parents)for(let r of e.parents)t.uint32(18),t.string(r);null!=e.value&&(t.uint32(26),s.codec().encode(e.value,t)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={scope:"",parents:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.scope=e.string();break;case 2:if(r.limits?.parents!=null&&n.parents.length===r.limits.parents)throw new W.zH('Decode error - map field "parents" had too many elements');n.parents.push(e.string());break;case 3:n.value=s.codec().decode(e,e.uint32(),{limits:r.limits?.value});break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,W.mH)(t,e.codec()),e.decode=(t,r)=>(0,W.Y8)(t,e.codec(),r)}(f||(f={})),function(e){let t;e.codec=()=>(null==t&&(t=(0,W.iU)((e,t,r={})=>{if(!1!==r.lengthDelimited&&t.fork(),null!=e.scope&&""!==e.scope&&(t.uint32(10),t.string(e.scope)),null!=e.parents)for(let r of e.parents)t.uint32(18),t.string(r);null!=e.error&&(t.uint32(26),s.codec().encode(e.error,t)),!1!==r.lengthDelimited&&t.ldelim()},(e,t,r={})=>{let n={scope:"",parents:[]},i=null==t?e.len:e.pos+t;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:n.scope=e.string();break;case 2:if(r.limits?.parents!=null&&n.parents.length===r.limits.parents)throw new W.zH('Decode error - map field "parents" had too many elements');n.parents.push(e.string());break;case 3:n.error=s.codec().decode(e,e.uint32(),{limits:r.limits?.error});break;default:e.skipType(7&t)}}return n})),t),e.encode=t=>(0,W.mH)(t,e.codec()),e.decode=(t,r)=>(0,W.Y8)(t,e.codec(),r)}(p||(p={}));let Z=["string","number","bigint","symbol"],J=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];class Y{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:+(this.major>e.major)}}Y.uint=new Y(0,"uint",!0),Y.negint=new Y(1,"negint",!0),Y.bytes=new Y(2,"bytes",!0),Y.string=new Y(3,"string",!0),Y.array=new Y(4,"array",!1),Y.map=new Y(5,"map",!1),Y.tag=new Y(6,"tag",!1),Y.float=new Y(7,"float",!0),Y.false=new Y(7,"false",!0),Y.true=new Y(7,"true",!0),Y.null=new Y(7,"null",!0),Y.undefined=new Y(7,"undefined",!0),Y.break=new Y(7,"break",!0);class X{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}let ee=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,et=new TextDecoder,er=new TextEncoder;function en(e){return ee&&globalThis.Buffer.isBuffer(e)}function ei(e){return e instanceof Uint8Array?en(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}let es=ee?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):eh(e,t,r):(e,t,r)=>r-t>64?et.decode(e.subarray(t,r)):eh(e,t,r),ea=ee?e=>e.length>64?globalThis.Buffer.from(e):ed(e):e=>e.length>64?er.encode(e):ed(e),eo=e=>Uint8Array.from(e),el=ee?(e,t,r)=>en(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),ec=ee?(e,t)=>(e=e.map(e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e)),ei(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let t of e)n+t.length>r.length&&(t=t.subarray(0,r.length-n)),r.set(t,n),n+=t.length;return r},eu=ee?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function ed(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t}function eh(e,t,r){let n=[];for(;t<r;){let i=e[t],s=null,a=i>239?4:i>223?3:i>191?2:1;if(t+a<=r){let r,n,o,l;switch(a){case 1:i<128&&(s=i);break;case 2:(192&(r=e[t+1]))==128&&(l=(31&i)<<6|63&r)>127&&(s=l);break;case 3:r=e[t+1],n=e[t+2],(192&r)==128&&(192&n)==128&&(l=(15&i)<<12|(63&r)<<6|63&n)>2047&&(l<55296||l>57343)&&(s=l);break;case 4:r=e[t+1],n=e[t+2],o=e[t+3],(192&r)==128&&(192&n)==128&&(192&o)==128&&(l=(15&i)<<18|(63&r)<<12|(63&n)<<6|63&o)>65535&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),t+=a}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}class ef{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){let r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){let e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=eu(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){let r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=el(r,0,this.cursor)}else t=ec(this.chunks,this.cursor);return e&&this.reset(),t}}let ep="CBOR decode error:",eg="CBOR encode error:",em=[];function eb(e,t,r){if(e.length-t<r)throw Error(`${ep} not enough data for type`)}em[23]=1,em[24]=2,em[25]=3,em[26]=5,em[27]=9;let ey=[24,256,65536,0x100000000,BigInt("18446744073709551616")];function ex(e,t,r){eb(e,t,1);let n=e[t];if(!0===r.strict&&n<ey[0])throw Error(`${ep} integer encoded in more bytes than necessary (strict decode)`);return n}function ew(e,t,r){eb(e,t,2);let n=e[t]<<8|e[t+1];if(!0===r.strict&&n<ey[1])throw Error(`${ep} integer encoded in more bytes than necessary (strict decode)`);return n}function ev(e,t,r){eb(e,t,4);let n=0x1000000*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<ey[2])throw Error(`${ep} integer encoded in more bytes than necessary (strict decode)`);return n}function eA(e,t,r){eb(e,t,8);let n=0x1000000*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],i=0x1000000*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(n)<<BigInt(32))+BigInt(i);if(!0===r.strict&&s<ey[3])throw Error(`${ep} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(!0===r.allowBigInt)return s;throw Error(`${ep} integers outside of the safe integer range are not supported`)}function eE(e,t){return ek(e,0,t.value)}function ek(e,t,r){if(r<ey[0]){let n=Number(r);e.push([t|n])}else if(r<ey[1]){let n=Number(r);e.push([24|t,n])}else if(r<ey[2]){let n=Number(r);e.push([25|t,n>>>8,255&n])}else if(r<ey[3]){let n=Number(r);e.push([26|t,n>>>24&255,n>>>16&255,n>>>8&255,255&n])}else{let n=BigInt(r);if(n<ey[4]){let r=[27|t,0,0,0,0,0,0,0],i=Number(n&BigInt(0xffffffff)),s=Number(n>>BigInt(32)&BigInt(0xffffffff));r[8]=255&i,i>>=8,r[7]=255&i,i>>=8,r[6]=255&i,i>>=8,r[5]=255&i,r[4]=255&s,s>>=8,r[3]=255&s,s>>=8,r[2]=255&s,s>>=8,r[1]=255&s,e.push(r)}else throw Error(`${ep} encountered BigInt larger than allowable range`)}}eE.encodedSize=function(e){return ek.encodedSize(e.value)},ek.encodedSize=function(e){return e<ey[0]?1:e<ey[1]?2:e<ey[2]?3:e<ey[3]?5:9},eE.compareTokens=function(e,t){return e.value<t.value?-1:+(e.value>t.value)};let eP=BigInt(-1),eS=BigInt(1);function eI(e,t){let r=t.value;ek(e,t.type.majorEncoded,"bigint"==typeof r?r*eP-eS:-1*r-1)}function eT(e,t,r,n){eb(e,t,r+n);let i=el(e,t+r,t+r+n);return new X(Y.bytes,i,r+n)}function e_(e,t,r,n){return eT(e,t,1,r)}function eC(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===Y.string?ea(e.value):e.value),e.encodedBytes}function eO(e,t){let r=eC(t);ek(e,t.type.majorEncoded,r.length),e.push(r)}function eR(e,t,r,n,i){let s=r+n;eb(e,t,s);let a=new X(Y.string,es(e,t+r,t+s),s);return!0===i.retainStringBytes&&(a.byteValue=el(e,t+r,t+s)),a}function eN(e,t,r,n){return eR(e,t,1,r,n)}function eM(e,t,r,n){return new X(Y.array,n,r)}function eB(e,t,r,n){return eM(e,t,1,r)}function eD(e,t){ek(e,Y.array.majorEncoded,t.value)}function eL(e,t,r,n){return new X(Y.map,n,r)}function eU(e,t,r,n){return eL(e,t,1,r)}function eF(e,t){ek(e,Y.map.majorEncoded,t.value)}function ej(e,t,r,n){return new X(Y.tag,r,1)}function ez(e,t){ek(e,Y.tag.majorEncoded,t.value)}function eH(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw Error(`${ep} NaN values are not supported`);if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw Error(`${ep} Infinity values are not supported`)}return new X(Y.float,e,t)}function eG(e,t,r){let n=t.value;if(!1===n)e.push([20|Y.float.majorEncoded]);else if(!0===n)e.push([21|Y.float.majorEncoded]);else if(null===n)e.push([22|Y.float.majorEncoded]);else if(void 0===n)e.push([23|Y.float.majorEncoded]);else{var i;let t;let s=!1;r&&!0===r.float64||(eK(n),n===eW(eq,1)||Number.isNaN(n)?(eq[0]=249,e.push(eq.slice(0,3)),s=!0):(eQ(n),n!==eZ(eq,1)||(eq[0]=250,e.push(eq.slice(0,5)),s=!0))),s||(i=n,eV.setFloat64(0,i,!1),eJ(eq,1),eq[0]=251,e.push(eq.slice(0,9)))}}eI.encodedSize=function(e){let t=e.value,r="bigint"==typeof t?t*eP-eS:-1*t-1;return r<ey[0]?1:r<ey[1]?2:r<ey[2]?3:r<ey[3]?5:9},eI.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},eO.encodedSize=function(e){let t=eC(e);return ek.encodedSize(t.length)+t.length},eO.compareTokens=function(e,t){var r,n;return r=eC(e),n=eC(t),r.length<n.length?-1:r.length>n.length?1:function(e,t){if(en(e)&&en(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}(r,n)},eD.compareTokens=eE.compareTokens,eD.encodedSize=function(e){return ek.encodedSize(e.value)},eF.compareTokens=eE.compareTokens,eF.encodedSize=function(e){return ek.encodedSize(e.value)},ez.compareTokens=eE.compareTokens,ez.encodedSize=function(e){return ek.encodedSize(e.value)},eG.encodedSize=function(e,t){let r=e.value;if(!1===r||!0===r||null==r)return 1;if(!t||!0!==t.float64){eK(r);let e=eW(eq,1);if(r===e||Number.isNaN(r))return 3;if(eQ(r),r===(e=eZ(eq,1)))return 5}return 9};let e$=new ArrayBuffer(9),eV=new DataView(e$,1),eq=new Uint8Array(e$,0);function eK(e){if(e===1/0)eV.setUint16(0,31744,!1);else if(e===-1/0)eV.setUint16(0,64512,!1);else if(Number.isNaN(e))eV.setUint16(0,32256,!1);else{eV.setFloat32(0,e);let t=eV.getUint32(0),r=(0x7f800000&t)>>23,n=8388607&t;if(255===r)eV.setUint16(0,31744,!1);else if(0===r)eV.setUint16(0,(0x80000000&e)>>16|n>>13,!1);else{let e=r-127;e<-24?eV.setUint16(0,0):e<-14?eV.setUint16(0,(0x80000000&t)>>16|1<<24+e,!1):eV.setUint16(0,(0x80000000&t)>>16|e+15<<10|n>>13,!1)}}}function eW(e,t){let r;if(e.length-t<2)throw Error(`${ep} not enough data for float16`);let n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;let i=n>>10&31,s=1023&n;return r=0===i?5960464477539063e-23*s:31!==i?(s+1024)*2**(i-25):0===s?1/0:NaN,32768&n?-r:r}function eQ(e){eV.setFloat32(0,e,!1)}function eZ(e,t){if(e.length-t<4)throw Error(`${ep} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function eJ(e,t){if(e.length-t<8)throw Error(`${ep} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}function eY(e,t,r){throw Error(`${ep} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function eX(e){return()=>{throw Error(`${ep} ${e}`)}}eG.compareTokens=eE.compareTokens;let e0=[];for(let e=0;e<=23;e++)e0[e]=eY;e0[24]=function(e,t,r,n){return new X(Y.uint,ex(e,t+1,n),2)},e0[25]=function(e,t,r,n){return new X(Y.uint,ew(e,t+1,n),3)},e0[26]=function(e,t,r,n){return new X(Y.uint,ev(e,t+1,n),5)},e0[27]=function(e,t,r,n){return new X(Y.uint,eA(e,t+1,n),9)},e0[28]=eY,e0[29]=eY,e0[30]=eY,e0[31]=eY;for(let e=32;e<=55;e++)e0[e]=eY;e0[56]=function(e,t,r,n){return new X(Y.negint,-1-ex(e,t+1,n),2)},e0[57]=function(e,t,r,n){return new X(Y.negint,-1-ew(e,t+1,n),3)},e0[58]=function(e,t,r,n){return new X(Y.negint,-1-ev(e,t+1,n),5)},e0[59]=function(e,t,r,n){let i=eA(e,t+1,n);if("bigint"!=typeof i){let e=-1-i;if(e>=Number.MIN_SAFE_INTEGER)return new X(Y.negint,e,9)}if(!0!==n.allowBigInt)throw Error(`${ep} integers outside of the safe integer range are not supported`);return new X(Y.negint,eP-BigInt(i),9)},e0[60]=eY,e0[61]=eY,e0[62]=eY,e0[63]=eY;for(let e=64;e<=87;e++)e0[e]=e_;e0[88]=function(e,t,r,n){return eT(e,t,2,ex(e,t+1,n))},e0[89]=function(e,t,r,n){return eT(e,t,3,ew(e,t+1,n))},e0[90]=function(e,t,r,n){return eT(e,t,5,ev(e,t+1,n))},e0[91]=function(e,t,r,n){let i=eA(e,t+1,n);if("bigint"==typeof i)throw Error(`${ep} 64-bit integer bytes lengths not supported`);return eT(e,t,9,i)},e0[92]=eY,e0[93]=eY,e0[94]=eY,e0[95]=eX("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)e0[e]=eN;e0[120]=function(e,t,r,n){return eR(e,t,2,ex(e,t+1,n),n)},e0[121]=function(e,t,r,n){return eR(e,t,3,ew(e,t+1,n),n)},e0[122]=function(e,t,r,n){return eR(e,t,5,ev(e,t+1,n),n)},e0[123]=function(e,t,r,n){let i=eA(e,t+1,n);if("bigint"==typeof i)throw Error(`${ep} 64-bit integer string lengths not supported`);return eR(e,t,9,i,n)},e0[124]=eY,e0[125]=eY,e0[126]=eY,e0[127]=eX("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)e0[e]=eB;e0[152]=function(e,t,r,n){return eM(e,t,2,ex(e,t+1,n))},e0[153]=function(e,t,r,n){return eM(e,t,3,ew(e,t+1,n))},e0[154]=function(e,t,r,n){return eM(e,t,5,ev(e,t+1,n))},e0[155]=function(e,t,r,n){let i=eA(e,t+1,n);if("bigint"==typeof i)throw Error(`${ep} 64-bit integer array lengths not supported`);return eM(e,t,9,i)},e0[156]=eY,e0[157]=eY,e0[158]=eY,e0[159]=function(e,t,r,n){if(!1===n.allowIndefinite)throw Error(`${ep} indefinite length items not allowed`);return eM(e,t,1,1/0)};for(let e=160;e<=183;e++)e0[e]=eU;e0[184]=function(e,t,r,n){return eL(e,t,2,ex(e,t+1,n))},e0[185]=function(e,t,r,n){return eL(e,t,3,ew(e,t+1,n))},e0[186]=function(e,t,r,n){return eL(e,t,5,ev(e,t+1,n))},e0[187]=function(e,t,r,n){let i=eA(e,t+1,n);if("bigint"==typeof i)throw Error(`${ep} 64-bit integer map lengths not supported`);return eL(e,t,9,i)},e0[188]=eY,e0[189]=eY,e0[190]=eY,e0[191]=function(e,t,r,n){if(!1===n.allowIndefinite)throw Error(`${ep} indefinite length items not allowed`);return eL(e,t,1,1/0)};for(let e=192;e<=215;e++)e0[e]=ej;e0[216]=function(e,t,r,n){return new X(Y.tag,ex(e,t+1,n),2)},e0[217]=function(e,t,r,n){return new X(Y.tag,ew(e,t+1,n),3)},e0[218]=function(e,t,r,n){return new X(Y.tag,ev(e,t+1,n),5)},e0[219]=function(e,t,r,n){return new X(Y.tag,eA(e,t+1,n),9)},e0[220]=eY,e0[221]=eY,e0[222]=eY,e0[223]=eY;for(let e=224;e<=243;e++)e0[e]=eX("simple values are not supported");e0[244]=eY,e0[245]=eY,e0[246]=eY,e0[247]=function(e,t,r,n){if(!1===n.allowUndefined)throw Error(`${ep} undefined values are not supported`);return!0===n.coerceUndefinedToNull?new X(Y.null,null,1):new X(Y.undefined,void 0,1)},e0[248]=eX("simple values are not supported"),e0[249]=function(e,t,r,n){return eH(eW(e,t+1),3,n)},e0[250]=function(e,t,r,n){return eH(eZ(e,t+1),5,n)},e0[251]=function(e,t,r,n){return eH(eJ(e,t+1),9,n)},e0[252]=eY,e0[253]=eY,e0[254]=eY,e0[255]=function(e,t,r,n){if(!1===n.allowIndefinite)throw Error(`${ep} indefinite length items not allowed`);return new X(Y.break,void 0,1)};let e1=[];for(let e=0;e<24;e++)e1[e]=new X(Y.uint,e,1);for(let e=-1;e>=-24;e--)e1[31-e]=new X(Y.negint,e,1);e1[64]=new X(Y.bytes,new Uint8Array(0),1),e1[96]=new X(Y.string,"",1),e1[128]=new X(Y.array,0,1),e1[160]=new X(Y.map,0,1),e1[244]=new X(Y.false,!1,1),e1[245]=new X(Y.true,!0,1),e1[246]=new X(Y.null,null,1);let e2={float64:!1,mapSorter:function(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let i=e3[r.type.major].compareTokens(r,n);return 0===i&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i},quickEncodeToken:function(e){switch(e.type){case Y.false:return eo([244]);case Y.true:return eo([245]);case Y.null:return eo([246]);case Y.bytes:if(!e.value.length)return eo([64]);return;case Y.string:if(""===e.value)return eo([96]);return;case Y.array:if(0===e.value)return eo([128]);return;case Y.map:if(0===e.value)return eo([160]);return;case Y.uint:if(e.value<24)return eo([Number(e.value)]);return;case Y.negint:if(e.value>=-24)return eo([31-Number(e.value)])}}},e3=function(){let e=[];return e[Y.uint.major]=eE,e[Y.negint.major]=eI,e[Y.bytes.major]=eO,e[Y.string.major]=eO,e[Y.array.major]=eD,e[Y.map.major]=eF,e[Y.tag.major]=ez,e[Y.float.major]=eG,e}(),e4=new ef;class e6{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw Error(`${eg} object contains circular references`);return new e6(t,e)}}let e5={null:new X(Y.null,null),undefined:new X(Y.undefined,void 0),true:new X(Y.true,!0),false:new X(Y.false,!1),emptyArray:new X(Y.array,0),emptyMap:new X(Y.map,0)},e8={number:(e,t,r,n)=>Number.isInteger(e)&&Number.isSafeInteger(e)?e>=0?new X(Y.uint,e):new X(Y.negint,e):new X(Y.float,e),bigint:(e,t,r,n)=>e>=BigInt(0)?new X(Y.uint,e):new X(Y.negint,e),Uint8Array:(e,t,r,n)=>new X(Y.bytes,e),string:(e,t,r,n)=>new X(Y.string,e),boolean:(e,t,r,n)=>e?e5.true:e5.false,null:(e,t,r,n)=>e5.null,undefined:(e,t,r,n)=>e5.undefined,ArrayBuffer:(e,t,r,n)=>new X(Y.bytes,new Uint8Array(e)),DataView:(e,t,r,n)=>new X(Y.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,r,n){if(!e.length)return!0===r.addBreakTokens?[e5.emptyArray,new X(Y.break)]:e5.emptyArray;n=e6.createCheck(n,e);let i=[],s=0;for(let t of e)i[s++]=e7(t,r,n);return r.addBreakTokens?[new X(Y.array,e.length),i,new X(Y.break)]:[new X(Y.array,e.length),i]},Object(e,t,r,n){var i,s;let a="Object"!==t,o=a?e.keys():Object.keys(e),l=a?e.size:o.length;if(!l)return!0===r.addBreakTokens?[e5.emptyMap,new X(Y.break)]:e5.emptyMap;n=e6.createCheck(n,e);let c=[],u=0;for(let t of o)c[u++]=[e7(t,r,n),e7(a?e.get(t):e[t],r,n)];return(i=c,(s=r).mapSorter&&i.sort(s.mapSorter),r.addBreakTokens)?[new X(Y.map,l),c,new X(Y.break)]:[new X(Y.map,l),c]}};for(let e of(e8.Map=e8.Object,e8.Buffer=e8.Uint8Array,"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" ")))e8[`${e}Array`]=e8.DataView;function e7(e,t={},r){let n=function(e){var t;if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";let r=typeof e;if(Z.includes(r))return r;if("function"===r)return"Function";if(Array.isArray(e))return"Array";if((t=e)&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t))return"Buffer";let n=function(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(J.includes(t))return t}(e);return n||"Object"}(e),i=t&&t.typeEncoders&&t.typeEncoders[n]||e8[n];if("function"==typeof i){let s=i(e,n,t,r);if(null!=s)return s}let s=e8[n];if(!s)throw Error(`${eg} unsupported type: ${n}`);return s(e,n,t,r)}function e9(e,t){return function(e,t,r){let n=e7(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let e=r.quickEncodeToken(n);if(e)return e;let i=t[n.type.major];if(i.encodedSize){let e=new ef(i.encodedSize(n,r));if(i(e,n,r),1!==e.chunks.length)throw Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return ei(e.chunks[0])}}return e4.reset(),!function e(t,r,n,i){if(Array.isArray(r))for(let s of r)e(t,s,n,i);else n[r.type.major](t,r,i)}(e4,n,t,r),e4.toBytes(!0)}(e,e3,t=Object.assign({},e2,t))}let te={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class tt{constructor(e,t={}){this._pos=0,this.data=e,this.options=t}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){let e=this.data[this._pos],t=e1[e];if(void 0===t){let r=e0[e];if(!r)throw Error(`${ep} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);let n=31&e;t=r(this.data,this._pos,n,this.options)}return this._pos+=t.encodedLength,t}}let tr=Symbol.for("DONE"),tn=Symbol.for("BREAK");function ti(e,t){let[r,n]=function(e,t){if(!(e instanceof Uint8Array))throw Error(`${ep} data to decode must be a Uint8Array`);let r=(t=Object.assign({},te,t)).tokenizer||new tt(e,t),n=function e(t,r){if(t.done())return tr;let n=t.next();if(n.type===Y.break)return tn;if(n.type.terminal)return n.value;if(n.type===Y.array)return function(t,r,n){let i=[];for(let s=0;s<t.value;s++){let a=e(r,n);if(a===tn){if(t.value===1/0)break;throw Error(`${ep} got unexpected break to lengthed array`)}if(a===tr)throw Error(`${ep} found array but not enough entries (got ${s}, expected ${t.value})`);i[s]=a}return i}(n,t,r);if(n.type===Y.map)return function(t,r,n){let i=!0===n.useMaps,s=i?void 0:{},a=i?new Map:void 0;for(let o=0;o<t.value;o++){let l=e(r,n);if(l===tn){if(t.value===1/0)break;throw Error(`${ep} got unexpected break to lengthed map`)}if(l===tr)throw Error(`${ep} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(!0!==i&&"string"!=typeof l)throw Error(`${ep} non-string keys not supported (got ${typeof l})`);if(!0===n.rejectDuplicateMapKeys&&(i&&a.has(l)||!i&&l in s))throw Error(`${ep} found repeat map key "${l}"`);let c=e(r,n);if(c===tr)throw Error(`${ep} found map but not enough entries (got ${o} [no value], expected ${t.value})`);i?a.set(l,c):s[l]=c}return i?a:s}(n,t,r);if(n.type===Y.tag){if(r.tags&&"function"==typeof r.tags[n.value]){let i=e(t,r);return r.tags[n.value](i)}throw Error(`${ep} tag not supported (${n.value})`)}throw Error("unsupported")}(r,t);if(n===tr)throw Error(`${ep} did not find any content to decode`);if(n===tn)throw Error(`${ep} got unexpected break`);return[n,e.subarray(r.pos())]}(e,t);if(n.length>0)throw Error(`${ep} too many terminals, data makes no sense`);return r}let ts=["__defineGetter__","__defineSetter__","hasOwnProperty","__lookupGetter__","__lookupSetter__","isPrototypeOf","propertyIsEnumerable","toString","valueOf","__proto__","toLocaleString","constructor"],ta={type:0x7fffffff,canEncode:e=>"object"==typeof e,encode:(e,t,r,n)=>{let i={};for(let t in e)!ts.includes(t)&&Object.hasOwn(e,t)&&(i[t]=e[t]);for(let t of Object.getOwnPropertyNames(Object.getPrototypeOf(e)))!ts.includes(t)&&(i[t]=e[t]);return e9([...Object.entries(i)].map(([r,i])=>[t.toValue(r,e,n),t.toValue(i,e,n)]))},decode:(e,t,r,n)=>{let i={};return ti(e).forEach(([e,s])=>{i[t.fromValue(e,r,n)]=t.fromValue(s,r,n)}),i}},to=[{type:1024,canEncode:e=>void 0===e,decode:()=>void 0},{type:1025,canEncode:e=>null===e,decode:()=>null},{type:1026,canEncode:e=>!0===e||!1===e,encode:e=>e9(e),decode:e=>ti(e)},{type:1027,canEncode:e=>"number"==typeof e&&!isNaN(e),encode:e=>e9(e),decode:e=>ti(e)},{type:1028,canEncode:e=>"string"==typeof e,encode:e=>e9(e),decode:e=>ti(e)},{type:1029,canEncode:e=>Array.isArray(e),encode:(e,t,r,n)=>e9(e.map(e=>t.toValue(e,r,n))),decode:(e,t,r,n)=>ti(e).map(e=>t.fromValue(e,r,n))},{type:1030,canEncode:e=>"function"==typeof e,encode:(e,t,r,n)=>{let i=N();return n?.callbacks.set(i,{context:r,fn:e}),e9(i)},decode:(e,t,r,i)=>async(...s)=>new Promise((o,l)=>{let c=ti(e),u=N(),f={scope:u,result:(0,M.A)(),callbacks:new Map,children:new Map,parents:[...i.parents,i.scope],abortControllers:[],abortSignals:[]};i.children.set(u,f),s=s.map(e=>t.toValue(e,null,f));let p=(0,O.J)(f.abortSignals);p.addEventListener("abort",()=>{r.push(a.encode({type:n.abortCallbackInvocation,message:h.encode({scope:u,parents:f.parents})}))}),r.push(a.encode({type:n.invokeCallback,message:d.encode({scope:u,parents:f.parents,callback:c,args:s})})),f.result.promise.then(e=>{o(e)},e=>{l(e)}).finally(()=>{i.children.delete(u),p.clear()})})},{type:1031,canEncode:e=>"NaN"===e.toString()&&isNaN(e),decode:()=>NaN},{type:1032,canEncode:e=>e instanceof Error,encode:e=>e9({message:e.message,name:e.name,code:e.code,type:e.type,stack:e.stack}),decode:e=>{let t=ti(e),r=Error(t.message);return r.name=t.name,r.stack=t.stack,r.code=t.code,r.type=t.type,r}},{type:1033,canEncode:e=>Array.isArray(e),encode:(e,t,r,n)=>{throw Error("Promises are not supported")},decode:(e,t,r,n)=>{throw Error("Promises are not supported")}},{type:1034,canEncode:e=>"function"==typeof e.next&&"function"==typeof e.throw&&"function"==typeof e.return,encode:(e,t,r,n)=>ta.encode({next:e.next.bind(e),throw:e.throw.bind(e),return:e.return.bind(e)},t,r,n),decode:(e,t,r,n)=>{let i=ta.decode(e,t,r,n);return i[Symbol.asyncIterator]=()=>i,i}},{type:1035,canEncode:e=>"bigint"==typeof e,encode:e=>e9(e),decode:e=>BigInt(ti(e))},{type:1036,canEncode:e=>e instanceof Map,encode:(e,t,r,n)=>e9([...e.entries()].map(([e,i])=>[t.toValue(e,r,n),t.toValue(i,r,n)])),decode:(e,t,r,n)=>{let i=new Map;return ti(e).forEach(([e,s])=>{let a=t.fromValue(e,r,n),o=t.fromValue(s,r,n);i.set(a,o)}),i}},{type:1037,canEncode:e=>e instanceof Set,encode:(e,t,r,n)=>e9([...e.values()].map(e=>t.toValue(e,r,n))),decode:(e,t,r,n)=>{let i=new Set;return ti(e).forEach(e=>{i.add(t.fromValue(e,r,n))}),i}},{type:1038,canEncode:e=>e instanceof Uint8Array,encode:e=>e,decode:e=>e},{type:1039,canEncode:e=>e instanceof AbortSignal,encode:(e,t,r,n)=>(n?.abortSignals.push(e),new Uint8Array(0)),decode:(e,t,r,n)=>{let i=new AbortController;return n.abortControllers.push(i),i.signal}},{type:1040,canEncode:e=>e instanceof Date,encode:e=>e9(e.toString()),decode:e=>new Date(ti(e))},{type:1041,canEncode:e=>e instanceof RegExp,encode:e=>e9({source:e.source,flags:e.flags}),decode:e=>{let{source:t,flags:r}=ti(e);return new RegExp(t,r)}},ta];class tl{transformersMap;transformersList;constructor(e){this.transformersList=[...to,...e?.valueCodecs??[]].sort((e,t)=>e.type<t.type?-1:+(e.type>t.type)),this.transformersMap={},this.transformersList.forEach(e=>{if(null!=this.transformersMap[e.type])throw Error(`Duplicate transformer type ${e.type}`);this.transformersMap[e.type]=e})}toValue(e,t,r){for(let n=0;n<this.transformersList.length;n++){let i=this.transformersList[n];if(i.canEncode(e))return{type:i.type,value:i.encode?.(e,this,t,r)}}throw new U(`Unsupported value type "${e}"`)}fromValue(e,t,r){let n=this.transformersMap[e.type];if(null==n)throw new U(`Unsupported value type "${e.type}"`);return n.decode(e.value??new Uint8Array(0),this,t,r)}}class tc{source;output;targets;invocations;values;messageHandlers;connected;lpDecoderOptions;constructor(e){this.output=(0,_.Ny)(),this.source=(0,R.l)(this.output,e?.lpEncoder),this.lpDecoderOptions=e?.lpDecoder,this.connected=!1;let t=this.source.next;this.source.next=async(...e)=>(this.connected=!0,t.apply(this.source,e)),this.targets=new Map,this.invocations=new Map,this.values=new tl(e),this.sink=this.sink.bind(this),this.messageHandlers={[n.invokeMethod]:{decoder:o,handler:this.handleInvokeMethod.bind(this)},[n.invokeGeneratorMethod]:{decoder:o,handler:this.handleInvokeGeneratorMethod.bind(this)},[n.abortMethodInvocation]:{decoder:l,handler:this.handleAbortMethod.bind(this),isScope:!0},[n.methodResolved]:{decoder:c,handler:this.handleMethodResolved.bind(this),isScope:!0},[n.methodRejected]:{decoder:u,handler:this.handleMethodRejected.bind(this),isScope:!0,isError:!0},[n.invokeCallback]:{decoder:d,handler:this.handleInvokeCallback.bind(this),isScope:!0},[n.abortCallbackInvocation]:{decoder:h,handler:this.handleAbortCallback.bind(this),isScope:!0},[n.callbackResolved]:{decoder:f,handler:this.handleCallbackResolved.bind(this),isScope:!0},[n.callbackRejected]:{decoder:p,handler:this.handleCallbackRejected.bind(this),isScope:!0,isError:!0}}}async sink(e){for await(let t of(0,R.D)(e,this.lpDecoderOptions))try{let e;let r=a.decode(t),i=this.messageHandlers[r.type];if(null==i)continue;let s=i.decoder.decode(r.message);if(!0===i.isScope)try{e=function(e,t){if(null!=e.parents)return function(e,t){let r;for(let n of e){if(null==r){if(null==(r=t.get(n)))throw new G;continue}if(null==(r=r.children.get(n)))throw new G}if(null==r)throw new G;return r}(e.parents,t);let r=t.get(e.scope);if(null==r)throw new $;return r}(s,this.invocations)}catch(e){continue}i.handler(s,e).catch(e=>{(r.type===n.invokeMethod||r.type===n.invokeGeneratorMethod||r.type===n.invokeCallback)&&this.sendError(s,e),this.invocations.delete(s.scope)}).finally(()=>{r.type===n.invokeMethod&&this.invocations.delete(s.scope)})}catch{continue}}sendError(e,t){null!=e.parents?this.output.push(a.encode({type:n.callbackRejected,message:p.encode({scope:e.scope,parents:e.parents,error:this.values.toValue(t)})})):this.output.push(a.encode({type:n.methodRejected,message:u.encode({scope:e.scope,error:this.values.toValue(t)})}))}createClient(e,t){return this.proxy(e,t)}createTarget(e,t){if(this.targets.has(e))throw new F(`Cannot reuse RPC target name "${e}"`);this.targets.set(e,t)}async handleInvokeMethod(e){if(this.invocations.has(e.scope))throw new j;let t=new Map,r=new Map,i={scope:e.scope,result:(0,M.A)(),callbacks:t,children:r,parents:[],abortControllers:[],abortSignals:[]};this.invocations.set(e.scope,i);let s=this.lookupInvocationTarget(e.path),o=await s.fn.apply(s.context,e.args.map(e=>this.values.fromValue(e,this.output,i)));this.output.push(a.encode({type:n.methodResolved,message:c.encode({scope:e.scope,value:this.values.toValue(o)})}))}async handleAbortMethod(e,t){t.abortControllers.forEach(e=>{e.abort()})}async handleInvokeGeneratorMethod(e){if(this.invocations.has(e.scope))throw new j;let t=new Map,r=new Map,i={scope:e.scope,result:(0,M.A)(),callbacks:t,children:r,parents:[],abortControllers:[],abortSignals:[]};this.invocations.set(e.scope,i);let s=this.lookupInvocationTarget(e.path),o=s.fn.apply(s.context,e.args.map(e=>this.values.fromValue(e,this.output,i)));if("function"!=typeof o.next)throw new z(`${e.path} did not return an async generator`);let l={next:async()=>{let t=await o.next();return!0===t.done&&this.invocations.delete(e.scope),t},throw:async t=>{try{let r=await o.throw(t);return!0===r.done&&this.invocations.delete(e.scope),r}catch(t){throw this.invocations.delete(e.scope),t}},return:async t=>{let r=await o.return(t);return!0===r.done&&this.invocations.delete(e.scope),r},[Symbol.asyncIterator]:()=>l};this.output.push(a.encode({type:n.methodResolved,message:c.encode({scope:e.scope,value:this.values.toValue(l,null,i)})}))}lookupInvocationTarget(e){let t=e.split("."),r=this.targets.get(t[0]),n=r;for(let e=1;e<t.length;e++)n=r,r=r?.[t[e]];if(null==r){if(null!=n&&e.endsWith(".then"))throw new L(`"${e.substring(0,e.length-5)}" was not a function`);throw new D(`Could not find "${e}" on target`)}if("function"!=typeof r)throw new H("Invocation target was not a function");return{context:n,fn:r}}async handleMethodResolved(e,t){let r;null!=e.value&&(r=this.values.fromValue(e.value,this.output,t)),t.result.resolve(r)}async handleMethodRejected(e,t){let r;null!=e.error&&(r=this.values.fromValue(e.error,this.output,t)),t.result.reject(r)}async handleInvokeCallback(e,t){let r=t.callbacks.get(e.callback);if(null==r)throw new V;let i=await r.fn.apply(r.context,e.args.map(e=>this.values.fromValue(e,this.output,t)));this.output.push(a.encode({type:n.callbackResolved,message:f.encode({scope:e.scope,parents:e.parents,value:this.values.toValue(i)})}))}async handleAbortCallback(e,t){t.abortControllers.forEach(e=>{e.abort()})}async handleCallbackResolved(e,t){let r;null!=e.value&&(r=this.values.fromValue(e.value,this.output,t)),t.children.get(e.scope)?.result.resolve(r),t.children.delete(e.scope)}async handleCallbackRejected(e,t){let r;null!=e.error&&(r=this.values.fromValue(e.error,this.output,t)),t.children.get(e.scope)?.result.reject(r),t.children.delete(e.scope)}proxy(e,t){let r=()=>{},i=this;return new Proxy(r,{get:(r,n,s)=>i.proxy(`${null==e?"":`${e}.`}${n.toString()}`,t),apply(s,c,u){let d,h;function f(){return null==h&&(h=new Promise((r,s)=>{let c;let d=N(),h={scope:d,result:(0,M.A)(),callbacks:new Map,children:new Map,parents:[],abortControllers:[],abortSignals:[]};t?.timeout!=null&&(c=AbortSignal.timeout(t.timeout),h.abortSignals.push(c)),i.invocations.set(d,h),i.output.push(a.encode({type:n.invokeMethod,message:o.encode({scope:d,path:e,args:u.map(e=>i.values.toValue(e,null,h))})}));let f=(0,O.J)(h.abortSignals);f.addEventListener("abort",()=>{i.output.push(a.encode({type:n.abortMethodInvocation,message:l.encode({scope:d})})),c?.aborted===!0?h.result.reject(new K):h.result.reject(new C.l)}),h.result.promise.then(e=>{r(e)},e=>{s(e)}).finally(()=>{i.invocations.delete(d),f.clear()}),i.connected||h.result.reject(new q)})),h}function p(){if(null==d){let r;let s=N(),l={scope:s,result:(0,M.A)(),callbacks:new Map,children:new Map,parents:[],abortControllers:[],abortSignals:[]};i.invocations.set(s,l),i.output.push(a.encode({type:n.invokeGeneratorMethod,message:o.encode({scope:s,path:e,args:u.map(e=>i.values.toValue(e,null,l))})})),d={async next(){let e;if(null!=r)throw r;let n=[...l.abortSignals];t?.timeout!=null&&(e=AbortSignal.timeout(t.timeout),n.push(e));let a=(0,O.J)(n);try{let e=await (0,B.W)(l.result.promise,a),t=await (0,B.W)(e.next(),a);return!0===t.done&&i.invocations.delete(s),t}catch(t){if(i.invocations.delete(s),e?.aborted===!0)throw new K;throw t}finally{a.clear()}},async throw(e){let n;if(null!=r)throw r;let a=[...l.abortSignals];t?.timeout!=null&&(n=AbortSignal.timeout(t.timeout),a.push(n));let o=(0,O.J)(a);try{let t=await (0,B.W)(l.result.promise,o),r=await (0,B.W)(t.throw(e),o);return!0===r.done&&i.invocations.delete(s),r}catch(t){if(i.invocations.delete(s),r=e,n?.aborted===!0)throw r=new K;throw t}finally{o.clear()}},async return(e){let n;if(null!=r)throw r;let a=[...l.abortSignals];t?.timeout!=null&&(n=AbortSignal.timeout(t.timeout),a.push(n));let o=(0,O.J)(a);try{let t=await (0,B.W)(l.result.promise,o),r=await (0,B.W)(t.return(e),o);return!0===r.done&&i.invocations.delete(s),r}catch(e){if(i.invocations.delete(s),n?.aborted===!0)throw new K;throw e}finally{o.clear()}},[Symbol.asyncIterator]:()=>d},i.connected||l.result.reject(new q)}return d}return new Proxy(r,{get(e,t,r){if("then"===t)return f().then.bind(h);if("catch"===t)return f().catch.bind(h);if("finally"===t)return f().finally.bind(h);if(t===Symbol.asyncIterator)return()=>p();if("next"===t)return p().next.bind(d);if("return"===t)return p().return.bind(d);if("throw"===t)return p().throw.bind(d);if(t===Symbol.toStringTag)return"[object Object]";if("constructor"===t)return()=>{};throw new H(`Property ${t.toString()} was not used as a promise or async generator`)}})}})}}var tu=r(3172);let td={rE:"1.0.2"};var th=r(9700),tf=r(608),tp=r(3809),tg=r(1070),tm=r(1680),tb=r(4057);let ty=[{type:4096,canEncode:e=>null!=e.code&&null!=e.version&&null!=e.multihash&&null!=e["/"],encode:e=>e.bytes,decode:e=>th.TO.decode(e)},{type:4097,canEncode:e=>(0,tp.R8)(e),encode:e=>e.bytes,decode:e=>(0,tp.HZ)(e)},{type:4098,canEncode:e=>(0,tg.Q)(e),encode:e=>e.toMultihash().bytes,decode:e=>(0,tm.jD)(tb.D4(e))},{type:4099,canEncode:e=>e instanceof tf.j,encode:(e,t,r,n)=>e9({type:e.type,detail:t.toValue(e.detail,r,n)}),decode:(e,t,r,n)=>{let{type:i,detail:s}=ti(e);return new tf.j(i,t.fromValue(s,r,n))}}];var tx=r(9827);function tw(e,t,r){let n=t[e];if(n[g.Ch]?.includes(r)===!0)return n;throw new tx.gG(`Component ${e} did not have capabilitiy ${r}`)}function tv(e,t){let r={};for(let[n,i]of e.entries())r[n]=t(i);return r}async function tA(e,t){let r=[],n=e.connectionManager.getConnectionsMap(),i=[...n.values()].flatMap(e=>e).map(e=>e.remoteAddr.toString());for(let[s,a]of n.entries())try{let t=await e.peerStore.get(s);r.push({id:s,addresses:t.addresses.map(({isCertified:e,multiaddr:t})=>({multiaddr:t,isCertified:e,isConnected:i.includes(t.toString())})),protocols:[...t.protocols],tags:tv(t.tags,e=>e.value),metadata:tv(t.metadata,e=>tu.base64.encode(e))})}catch(e){t.error("could not load peer data from peer store",e),r.push({id:s,addresses:a.map(e=>({multiaddr:e.remoteAddr,isConnected:i.includes(e.remoteAddr.toString())})),protocols:[],tags:{},metadata:{}})}return r}var tE=r(1887);function tk(e,t){let r=t[e];if(!(0,tE.sG)(r))throw new tx.gG(`Component ${e} did not implement the PubSub interface`);return r}async function tP(e){let t=await e.peerStore.get(e.peerId);return{id:t.id,addresses:t.addresses,protocols:[...t.protocols],tags:tv(t.tags,e=>e.value),metadata:tv(t.metadata,e=>tu.base64.encode(e))}}function tS(e){let t;try{t=(0,tm.XL)(e)}catch{t=(0,tp.HZ)(e)}return t}function tI(e,t=100){let r,n;return()=>{if(null==n&&(n=Date.now()),null!=r&&Date.now()-n>t){clearTimeout(r),n=void 0,e();return}clearTimeout(r),r=setTimeout(()=>{n=void 0,e()},t)}}let tT="@ipshipyard/libp2p-inspector-metrics:metrics";Object.defineProperty(globalThis,"________ipshipyard_libp2p_inspector_metrics",{value:!0,enumerable:!1,writable:!1});class t_{log;components;simpleMetrics;intervalMs;rpcQueue;rpc;inspector;messages;constructor(e,t={}){var r;this.log=e.logger.forComponent("libp2p:devtools-metrics"),this.intervalMs=t?.intervalMs,this.components=e,this.rpcQueue=(0,_.Ny)(),this.rpc=new tc({valueCodecs:ty}),this.inspector=this.rpc.createClient("inspector",{timeout:1e4}),this.messages=window,this.onPeersUpdate=tI(this.onPeersUpdate.bind(this),1e3),this.onSelfUpdate=tI(this.onSelfUpdate.bind(this),1e3),this.onIncomingMessage=this.onIncomingMessage.bind(this),this.simpleMetrics=(r={intervalMs:this.intervalMs,onMetrics:e=>{this.inspector.safeDispatchEvent("metrics",{detail:e}).catch(e=>{this.log.error("error sending metrics",e)})}},e=>new I(e,r))(e)}[Symbol.toStringTag]="@ipshipyard/libp2p-inspector-metrics";[g.Ch]=["@libp2p/metrics"];trackMultiaddrConnection(e){this.simpleMetrics.trackMultiaddrConnection(e)}trackProtocolStream(e,t){this.simpleMetrics.trackProtocolStream(e,t)}registerMetric(e,t){return this.simpleMetrics.registerMetric(e,t)}registerMetricGroup(e,t){return this.simpleMetrics.registerMetricGroup(e,t)}registerCounter(e,t){return this.simpleMetrics.registerCounter(e,t)}registerCounterGroup(e,t){return this.simpleMetrics.registerCounterGroup(e,t)}registerHistogram(e,t){return this.simpleMetrics.registerHistogram(e,t)}registerHistogramGroup(e,t){return this.simpleMetrics.registerHistogramGroup(e,t)}registerSummary(e,t){return this.simpleMetrics.registerSummary(e,t)}registerSummaryGroup(e,t){return this.simpleMetrics.registerSummaryGroup(e,t)}createTrace(){return this.simpleMetrics.createTrace()}traceFunction(e,t,r){return this.simpleMetrics.traceFunction(e,t,r)}async start(){this.components.events.addEventListener("peer:connect",this.onPeersUpdate),this.components.events.addEventListener("peer:disconnect",this.onPeersUpdate),this.components.events.addEventListener("peer:identify",this.onPeersUpdate),this.components.events.addEventListener("peer:update",this.onPeersUpdate),this.components.events.addEventListener("self:peer:update",this.onSelfUpdate),this.messages.addEventListener("message",this.onIncomingMessage),this.rpc.createTarget("metrics",function(e){let t=e.logger.forComponent("libp2p:devtools-metrics:metrics-rpc"),r=globalThis.localStorage?.getItem("debug")??globalThis.process?.env?.DEBUG??"";return{init:async()=>({self:await tP(e),peers:await tA(e,t),debug:r,capabilities:function(e){let t={};return Object.entries(e.components??e).forEach(([e,r])=>{r?.[g.Ch]!=null&&Array.isArray(r[g.Ch])&&(t[e]=r[g.Ch])}),t}(e)}),setDebug:async e=>{e?.length!=null&&e?.length>0?((0,b.sS)(e),globalThis.localStorage?.setItem("debug",e)):((0,b.b8)(),globalThis.localStorage?.removeItem("debug")),r=e??""},openConnection:async(t,r)=>{let n=tS(t),i=await e.connectionManager.openConnection(n,r);return{id:i.id,remoteAddr:i.remoteAddr,remotePeer:i.remotePeer,tags:i.tags,direction:i.direction,timeline:i.timeline,multiplexer:i.multiplexer,encryption:i.encryption,status:i.status,limits:i.limits,rtt:i.rtt}},closeConnection:async(t,r)=>{await Promise.all(e.connectionManager.getConnections(t).map(async e=>{try{await e.close(r)}catch(t){e.abort(t)}}))},contentRouting:e.contentRouting,peerRouting:e.peerRouting,pubsub:{getTopics:async t=>tk(t,e).getTopics(),async subscribe(t,r){tk(t,e).subscribe(r)},async unsubscribe(t,r){tk(t,e).unsubscribe(r)},async publish(t,r,n){await tk(t,e).publish(r,n)},getSubscribers:async(t,r)=>tk(t,e).getSubscribers(r)},ping:async(t,r,n)=>{let i=tw(t,e,"@libp2p/ping"),s=tS(r);return i.ping(s,n)},identify:async(t,r,n)=>{let i=tw(t,e,"@libp2p/identify"),s=tS(r),a=await e.connectionManager.openConnection(s,n);return i.identify(a,n)}}}(this.components)),await (0,m.ni)(this.simpleMetrics,this.messages),Promise.resolve().then(async()=>{await (0,T.F)(this.rpcQueue,this.rpc,async e=>{for await(let t of e)this.messages.postMessage({source:tT,type:"libp2p-rpc",message:tu.base64.encode(t)})})}).catch(e=>{this.log.error("error while reading RPC messages",e)})}async stop(){this.messages.removeEventListener("message",this.onIncomingMessage),this.components.events.removeEventListener("self:peer:update",this.onSelfUpdate),this.components.events.removeEventListener("peer:connect",this.onPeersUpdate),this.components.events.removeEventListener("peer:disconnect",this.onPeersUpdate),this.components.events.removeEventListener("peer:identify",this.onPeersUpdate),this.components.events.removeEventListener("peer:update",this.onPeersUpdate),await (0,m.ds)(this.simpleMetrics,this.messages)}onIncomingMessage(e){if(e.source!==this.messages)return;let t=e.data;if(t?.source==="@ipshipyard/libp2p-inspector-metrics:client"){if("libp2p-identify"===t.type){this.messages.postMessage({source:tT,type:"libp2p-identify",name:this.components.nodeInfo.name,version:this.components.nodeInfo.version,userAgent:this.components.nodeInfo.userAgent,inspector:td.rE});return}"libp2p-rpc"===t.type&&this.rpcQueue.push(tu.base64.decode(t.message))}}onSelfUpdate(){Promise.resolve().then(async()=>{await this.inspector.safeDispatchEvent("self",{detail:await tP(this.components)})}).catch(e=>{this.log.error("error sending peers message",e)})}onPeersUpdate(){Promise.resolve().then(async()=>{await this.inspector.safeDispatchEvent("peers",{detail:await tA(this.components,this.log)})}).catch(e=>{this.log.error("error sending peers message",e)})}}function tC(e){return t=>new t_(t,e)}},9777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BytesCoder=t.DynamicBytesCoder=void 0;let n=r(8662),i=r(2884);class s extends i.Coder{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=(0,n.getBytesCopy)(t);let r=e.writeValue(t.length);return r+e.writeBytes(t)}decode(e){return e.readBytes(e.readIndex(),!0)}}t.DynamicBytesCoder=s;class a extends s{constructor(e){super("bytes",e)}decode(e){return(0,n.hexlify)(super.decode(e))}}t.BytesCoder=a},9792:(e,t,r)=>{"use strict";r.d(t,{h:()=>u});var n=r(9223),i=r(3204),s=r(9827),a=r(560),o=r(6676),l=r(6552);class c{protocol;components;started;timeout;maxInboundStreams;maxOutboundStreams;runOnLimitedConnection;log;constructor(e,t={}){this.components=e,this.log=e.logger.forComponent("libp2p:ping"),this.started=!1,this.protocol=`/${t.protocolPrefix??"ipfs"}/ping/1.0.0`,this.timeout=t.timeout??1e4,this.maxInboundStreams=t.maxInboundStreams??2,this.maxOutboundStreams=t.maxOutboundStreams??1,this.runOnLimitedConnection=t.runOnLimitedConnection??!0,this.handleMessage=this.handleMessage.bind(this)}[Symbol.toStringTag]="@libp2p/ping";[i.Ch]=["@libp2p/ping"];async start(){await this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnection}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(e){this.log("incoming ping from %p",e.connection.remotePeer);let{stream:t}=e,r=Date.now(),n=(0,a.p)(t),i=!1;Promise.resolve().then(async()=>{for(;;){let e=AbortSignal.timeout(this.timeout);(0,o.k)(1/0,e),e.addEventListener("abort",()=>{t?.abort(new s.MU("ping timeout"))});let r=await n.read({bytes:32,signal:e});await n.write(r,{signal:e}),i=!0}}).catch(r=>{(!i||"UnexpectedEOFError"!==r.name||"ready"===t.readStatus)&&(this.log.error("incoming ping from %p failed with error - %e",e.connection.remotePeer,r),t?.abort(r))}).finally(()=>{let n=Date.now()-r;this.log("incoming ping from %p complete in %dms",e.connection.remotePeer,n);let i=AbortSignal.timeout(this.timeout);(0,o.k)(1/0,i),t.close({signal:i}).catch(r=>{this.log.error("error closing ping stream from %p - %e",e.connection.remotePeer,r),t?.abort(r)})})}async ping(e,t={}){let r;this.log("pinging %p",e);let i=Date.now(),o=(0,n.A)(32),c=await this.components.connectionManager.openConnection(e,t);if(null==t.signal){let e=AbortSignal.timeout(this.timeout);t={...t,signal:e}}try{r=await c.newStream(this.protocol,{...t,runOnLimitedConnection:this.runOnLimitedConnection});let e=(0,a.p)(r),[,n]=await Promise.all([e.write(o,t),e.read({...t,bytes:32})]),u=Date.now()-i;if(!(0,l.a)(o,n.subarray()))throw new s.bd(`Received wrong ping ack after ${u}ms`);return this.log("ping %p complete in %dms",c.remotePeer,u),u}catch(e){throw this.log.error("error while pinging %p",c.remotePeer,e),r?.abort(e),e}finally{null!=r&&await r.close(t)}}}function u(e={}){return t=>new c(t,e)}},9818:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyTypedData=t.TypedDataEncoder=void 0;let n=r(9111),i=r(6870),s=r(2984),a=r(8662),o=r(6720),l=new Uint8Array(32);l.fill(0);let c=BigInt(-1),u=BigInt(0),d=BigInt(1),h=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),f=(0,a.toBeHex)(d,32),p=(0,a.toBeHex)(u,32),g={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},m=["name","version","chainId","verifyingContract","salt"];function b(e){return function(t){return(0,a.assertArgument)("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}let y={name:b("name"),version:b("version"),chainId:function(e){let t=(0,a.getBigInt)(e,"domain.chainId");return((0,a.assertArgument)(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t))?Number(t):(0,a.toQuantity)(t)},verifyingContract:function(e){try{return(0,n.getAddress)(e).toLowerCase()}catch(e){}(0,a.assertArgument)(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){let t=(0,a.getBytes)(e,"domain.salt");return(0,a.assertArgument)(32===t.length,'invalid domain value "salt"',"domain.salt",e),(0,a.hexlify)(t)}};function x(e){{let t=e.match(/^(u?)int(\d+)$/);if(t){let r=""===t[1],n=parseInt(t[2]);(0,a.assertArgument)(n%8==0&&0!==n&&n<=256&&t[2]===String(n),"invalid numeric width","type",e);let i=(0,a.mask)(h,r?n-1:n),s=r?(i+d)*c:u;return function(t){let n=(0,a.getBigInt)(t,"value");return(0,a.assertArgument)(n>=s&&n<=i,`value out-of-bounds for ${e}`,"value",n),(0,a.toBeHex)(r?(0,a.toTwos)(n,256):n,32)}}}{let t=e.match(/^bytes(\d+)$/);if(t){let r=parseInt(t[1]);return(0,a.assertArgument)(0!==r&&r<=32&&t[1]===String(r),"invalid bytes width","type",e),function(t){let n=(0,a.getBytes)(t);return(0,a.assertArgument)(n.length===r,`invalid length for ${e}`,"value",t),function(e){let t=(0,a.getBytes)(e),r=t.length%32;return r?(0,a.concat)([t,l.slice(r)]):(0,a.hexlify)(t)}(t)}}}switch(e){case"address":return function(e){return(0,a.zeroPadValue)((0,n.getAddress)(e),32)};case"bool":return function(e){return e?f:p};case"bytes":return function(e){return(0,i.keccak256)(e)};case"string":return function(e){return(0,o.id)(e)}}return null}function w(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}function v(e){let t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}class A{primaryType;#B;get types(){return JSON.parse(this.#B)}#D;#L;constructor(e){this.#D=new Map,this.#L=new Map;let t=new Map,r=new Map,n=new Map,i={};for(let s in Object.keys(e).forEach(s=>{i[s]=e[s].map(({name:t,type:r})=>{let{base:n,index:i}=v(r);return"int"!==n||e.int||(n="int256"),"uint"!==n||e.uint||(n="uint256"),{name:t,type:n+(i||"")}}),t.set(s,new Set),r.set(s,[]),n.set(s,new Set)}),this.#B=JSON.stringify(i),i){let n=new Set;for(let o of i[s]){(0,a.assertArgument)(!n.has(o.name),`duplicate variable name ${JSON.stringify(o.name)} in ${JSON.stringify(s)}`,"types",e),n.add(o.name);let i=v(o.type).base;(0,a.assertArgument)(i!==s,`circular type reference to ${JSON.stringify(i)}`,"types",e),!x(i)&&((0,a.assertArgument)(r.has(i),`unknown type ${JSON.stringify(i)}`,"types",e),r.get(i).push(s),t.get(s).add(i))}}let s=Array.from(r.keys()).filter(e=>0===r.get(e).length);for(let[o,l]of((0,a.assertArgument)(0!==s.length,"missing primary type","types",e),(0,a.assertArgument)(1===s.length,`ambiguous primary types or unused types: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),(0,a.defineProperties)(this,{primaryType:s[0]}),!function i(s,o){for(let l of((0,a.assertArgument)(!o.has(s),`circular type reference to ${JSON.stringify(s)}`,"types",e),o.add(s),t.get(s)))if(r.has(l))for(let e of(i(l,o),o))n.get(e).add(l);o.delete(s)}(this.primaryType,new Set),n)){let e=Array.from(l);e.sort(),this.#D.set(o,w(o,i[o])+e.map(e=>w(e,i[e])).join(""))}}getEncoder(e){let t=this.#L.get(e);return t||(t=this.#U(e),this.#L.set(e,t)),t}#U(e){{let t=x(e);if(t)return t}let t=v(e).array;if(t){let e=t.prefix,r=this.getEncoder(e);return n=>{(0,a.assertArgument)(-1===t.count||t.count===n.length,`array length mismatch; expected length ${t.count}`,"value",n);let s=n.map(r);return this.#D.has(e)&&(s=s.map(i.keccak256)),(0,i.keccak256)((0,a.concat)(s))}}let r=this.types[e];if(r){let t=(0,o.id)(this.#D.get(e));return e=>{let n=r.map(({name:t,type:r})=>{let n=this.getEncoder(r)(e[t]);return this.#D.has(r)?(0,i.keccak256)(n):n});return n.unshift(t),(0,a.concat)(n)}}(0,a.assertArgument)(!1,`unknown type: ${e}`,"type",e)}encodeType(e){let t=this.#D.get(e);return(0,a.assertArgument)(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return(0,i.keccak256)(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(x(e))return r(e,t);let n=v(e).array;if(n)return(0,a.assertArgument)(-1===n.count||n.count===t.length,`array length mismatch; expected length ${n.count}`,"value",t),t.map(e=>this._visit(n.prefix,e,r));let i=this.types[e];if(i)return i.reduce((e,{name:n,type:i})=>(e[n]=this._visit(i,t[n],r),e),{});(0,a.assertArgument)(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new A(e)}static getPrimaryType(e){return A.from(e).primaryType}static hashStruct(e,t,r){return A.from(t).hashStruct(e,r)}static hashDomain(e){let t=[];for(let r in e){if(null==e[r])continue;let n=g[r];(0,a.assertArgument)(n,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:n})}return t.sort((e,t)=>m.indexOf(e.name)-m.indexOf(t.name)),A.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return(0,a.concat)(["0x1901",A.hashDomain(e),A.from(t).hash(r)])}static hash(e,t,r){return(0,i.keccak256)(A.encode(e,t,r))}static async resolveNames(e,t,r,n){for(let t in e=Object.assign({},e))null==e[t]&&delete e[t];let i={};e.verifyingContract&&!(0,a.isHexString)(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");let s=A.from(t);for(let e in s.visit(r,(e,t)=>("address"!==e||(0,a.isHexString)(t,20)||(i[t]="0x"),t)),i)i[e]=await n(e);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=s.visit(r,(e,t)=>"address"===e&&i[t]?i[t]:t),{domain:e,value:r}}static getPayload(e,t,r){A.hashDomain(e);let n={},i=[];m.forEach(t=>{let r=e[t];null!=r&&(n[t]=y[t](r),i.push({name:t,type:g[t]}))});let s=A.from(t),o=Object.assign({},t=s.types);return(0,a.assertArgument)(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),o.EIP712Domain=i,s.encode(r),{types:o,domain:n,primaryType:s.primaryType,message:s.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return(0,a.hexlify)((0,a.getBytes)(t));if(e.match(/^u?int/))return(0,a.getBigInt)(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return(0,a.assertArgument)("string"==typeof t,"invalid string","value",t),t}(0,a.assertArgument)(!1,"unsupported type","type",e)})}}}t.TypedDataEncoder=A,t.verifyTypedData=function(e,t,r,n){return(0,s.recoverAddress)(A.hash(e,t,r),n)}},9827:(e,t,r)=>{"use strict";r.d(t,{$V:()=>x,$q:()=>C,B6:()=>m,CG:()=>l,Ci:()=>b,IM:()=>w,L:()=>v,MU:()=>E,NJ:()=>_,O7:()=>o,Qx:()=>h,U7:()=>S,_r:()=>d,aS:()=>i,bd:()=>A,c6:()=>s,gG:()=>a,lY:()=>I,lc:()=>n,m_:()=>g,mw:()=>p,q7:()=>T,qB:()=>c,rb:()=>u,sY:()=>y,x$:()=>k,yp:()=>f,zm:()=>P});class n extends Error{static name="AbortError";constructor(e="The operation was aborted"){super(e),this.name="AbortError"}}class i extends Error{static name="UnexpectedPeerError";constructor(e="Unexpected Peer"){super(e),this.name="UnexpectedPeerError"}}class s extends Error{static name="InvalidCryptoExchangeError";constructor(e="Invalid crypto exchange"){super(e),this.name="InvalidCryptoExchangeError"}}class a extends Error{static name="InvalidParametersError";constructor(e="Invalid parameters"){super(e),this.name="InvalidParametersError"}}class o extends Error{static name="InvalidPublicKeyError";constructor(e="Invalid public key"){super(e),this.name="InvalidPublicKeyError"}}class l extends Error{static name="InvalidPrivateKeyError";constructor(e="Invalid private key"){super(e),this.name="InvalidPrivateKeyError"}}class c extends Error{static name="ConnectionClosingError";constructor(e="The connection is closing"){super(e),this.name="ConnectionClosingError"}}class u extends Error{static name="ConnectionClosedError";constructor(e="The connection is closed"){super(e),this.name="ConnectionClosedError"}}class d extends Error{static name="ConnectionFailedError";constructor(e="Connection failed"){super(e),this.name="ConnectionFailedError"}}class h extends Error{static name="MuxerClosedError";constructor(e="The muxer is closed"){super(e),this.name="MuxerClosedError"}}class f extends Error{static name="StreamResetError";constructor(e="The stream has been reset"){super(e),this.name="StreamResetError"}}class p extends Error{static name="StreamStateError";constructor(e="The stream is in an invalid state"){super(e),this.name="StreamStateError"}}class g extends Error{static name="NotFoundError";constructor(e="Not found"){super(e),this.name="NotFoundError"}}class m extends Error{static name="InvalidPeerIdError";constructor(e="Invalid PeerID"){super(e),this.name="InvalidPeerIdError"}}class b extends Error{static name="InvalidMultiaddrError";constructor(e="Invalid multiaddr"){super(e),this.name="InvalidMultiaddrError"}}class y extends Error{static name="InvalidCIDError";constructor(e="Invalid CID"){super(e),this.name="InvalidCIDError"}}class x extends Error{static name="InvalidMultihashError";constructor(e="Invalid Multihash"){super(e),this.name="InvalidMultihashError"}}class w extends Error{static name="UnsupportedProtocolError";constructor(e="Unsupported protocol error"){super(e),this.name="UnsupportedProtocolError"}}class v extends Error{static name="InvalidMessageError";constructor(e="Invalid message"){super(e),this.name="InvalidMessageError"}}class A extends Error{static name="ProtocolError";constructor(e="Protocol error"){super(e),this.name="ProtocolError"}}class E extends Error{static name="TimeoutError";constructor(e="Timed out"){super(e),this.name="TimeoutError"}}class k extends Error{static name="NotStartedError";constructor(e="Not started"){super(e),this.name="NotStartedError"}}class P extends Error{static name="DialError";constructor(e="Dial error"){super(e),this.name="DialError"}}class S extends Error{static name="ListenError";constructor(e="Listen error"){super(e),this.name="ListenError"}}class I extends Error{static name="LimitedConnectionError";constructor(e="Limited connection"){super(e),this.name="LimitedConnectionError"}}class T extends Error{static name="TooManyInboundProtocolStreamsError";constructor(e="Too many inbound protocol streams"){super(e),this.name="TooManyInboundProtocolStreamsError"}}class _ extends Error{static name="TooManyOutboundProtocolStreamsError";constructor(e="Too many outbound protocol streams"){super(e),this.name="TooManyOutboundProtocolStreamsError"}}class C extends Error{static name="UnsupportedKeyTypeError";constructor(e="Unsupported key type"){super(e),this.name="UnsupportedKeyTypeError"}}},9856:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveAddress=t.isAddress=t.isAddressable=void 0;let n=r(8662),i=r(3823);function s(e){return e&&"function"==typeof e.getAddress}async function a(e,t){let r=await t;return(null==r||"0x0000000000000000000000000000000000000000"===r)&&((0,n.assert)("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),(0,n.assertArgument)(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),(0,i.getAddress)(r)}t.isAddressable=s,t.isAddress=function(e){try{return(0,i.getAddress)(e),!0}catch(e){}return!1},t.resolveAddress=function(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?(0,i.getAddress)(e):((0,n.assert)(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),a(e,t.resolveName(e))):s(e)?a(e,e.getAddress()):e&&"function"==typeof e.then?a(e,e):void(0,n.assertArgument)(!1,"unsupported addressable value","target",e)}},9865:(e,t,r)=>{"use strict";r.d(t,{s:()=>i});var n=r(1108);function i(e,t="utf8"){let r=n.A[t];if(null==r)throw Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}},9959:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defineProperties=t.resolveProperties=void 0,t.resolveProperties=async function(e){let t=Object.keys(e);return(await Promise.all(t.map(t=>Promise.resolve(e[t])))).reduce((e,r,n)=>(e[t[n]]=r,e),{})},t.defineProperties=function(e,t,r){for(let n in t){let i=t[n],s=r?r[n]:null;s&&function(e,t,r){let n=t.split("|").map(e=>e.trim());for(let r=0;r<n.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let i=Error(`invalid value for type ${t}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${r}`,i.value=e,i}(i,s,n),Object.defineProperty(e,n,{enumerable:!0,value:i,writable:!1})}}},9975:(e,t,r)=>{"use strict";r.d(t,{b:()=>i});var n=r(3809);function i(e){try{for(let{code:t}of e.getComponents())if(t!==n.qc)return t===n.GY||t===n.Ik}catch{}return!1}},9982:(e,t,r)=>{"use strict";r.d(t,{E:()=>o,MR:()=>u,SP:()=>f,bJ:()=>a,dd:()=>d,gk:()=>p,vA:()=>c,xz:()=>l});var n=r(8336),i=r(8616);function s(e,t){if(null==e)return"null";if(null==t&&(t=new Set),"object"==typeof e){if(t.has(e))return"[Circular]";t.add(e)}if(Array.isArray(e))return"[ "+e.map(e=>s(e,t)).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let n=0;n<e.length;n++)r+=t[e[n]>>4],r+=t[15&e[n]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return s(e.toJSON(),t);switch(typeof e){case"boolean":case"number":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let r=Object.keys(e);return r.sort(),"{ "+r.map(r=>`${s(r,t)}: ${s(e[r],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function a(e,t){return e&&e.code===t}function o(e){return a(e,"CALL_EXCEPTION")}function l(e,t,r){let a,o=e;{let i=[];if(r){if("message"in r||"code"in r||"name"in r)throw Error(`value will overwrite populated values: ${s(r)}`);for(let e in r){if("shortMessage"===e)continue;let t=r[e];i.push(e+"="+s(t))}}i.push(`code=${t}`),i.push(`version=${n.r}`),i.length&&(e+=" ("+i.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":a=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":a=RangeError(e);break;default:a=Error(e)}return(0,i.n)(a,{code:t}),r&&Object.assign(a,r),null==a.shortMessage&&(0,i.n)(a,{shortMessage:o}),a}function c(e,t,r,n){if(!e)throw l(t,r,n)}function u(e,t,r,n){c(e,t,"INVALID_ARGUMENT",{argument:r,value:n})}function d(e,t,r){null==r&&(r=""),r&&(r=": "+r),c(e>=t,"missing argument"+r,"MISSING_ARGUMENT",{count:e,expectedCount:t}),c(e<=t,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}let h=["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch(e){}return e},[]);function f(e){c(h.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}function p(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),c(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}},9985:(e,t,r)=>{"use strict";r.d(t,{W:()=>i});class n extends Error{type;code;constructor(e,t,r){super(e??"The operation was aborted"),this.type="aborted",this.name=r??"AbortError",this.code=t??"ABORT_ERR"}}async function i(e,t,r){let i;if(null==t)return e;if(t.aborted)return e.catch(()=>{}),Promise.reject(new n(r?.errorMessage,r?.errorCode,r?.errorName));let s=new n(r?.errorMessage,r?.errorCode,r?.errorName);try{return await Promise.race([e,new Promise((e,r)=>{i=()=>{r(s)},t.addEventListener("abort",i)})])}finally{null!=i&&t.removeEventListener("abort",i)}}}}]);